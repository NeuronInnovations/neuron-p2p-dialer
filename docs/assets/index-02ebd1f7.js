var Lr=Object.defineProperty;var Mr=(n,e,t)=>e in n?Lr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var me=(n,e,t)=>(Mr(n,typeof e!="symbol"?e+"":e,t),t),Dr=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var Ut=(n,e,t)=>(Dr(n,e,"read from private field"),t?t.call(n):e.get(n)),nr=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},hr=(n,e,t,o)=>(Dr(n,e,"write to private field"),o?o.call(n,t):e.set(n,t),t);var ir=(n,e,t)=>(Dr(n,e,"access private method"),t);function _mergeNamespaces(n,e){for(var t=0;t<e.length;t++){const o=e[t];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in n)){const l=Object.getOwnPropertyDescriptor(o,c);l&&Object.defineProperty(n,c,l.get?l:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function t(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(c){if(c.ep)return;c.ep=!0;const l=t(c);fetch(c.href,l)}})();const style="";var TopicValidatorResult$2;(function(n){n.Accept="accept",n.Ignore="ignore",n.Reject="reject"})(TopicValidatorResult$2||(TopicValidatorResult$2={}));var FaultTolerance$3;(function(n){n[n.FATAL_ALL=0]="FATAL_ALL",n[n.NO_FATAL=1]="NO_FATAL"})(FaultTolerance$3||(FaultTolerance$3={}));let CodeError$4=class extends Error{constructor(t,o,c){super(t);me(this,"code");me(this,"props");this.code=o,this.name=c?.name??"CodeError",this.props=c??{}}};function base$3(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),o=0;o<t.length;o++)t[o]=255;for(var c=0;c<n.length;c++){var l=n.charAt(c),h=l.charCodeAt(0);if(t[h]!==255)throw new TypeError(l+" is ambiguous");t[h]=c}var d=n.length,g=n.charAt(0),m=Math.log(d)/Math.log(256),v=Math.log(256)/Math.log(d);function _(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";for(var y=0,b=0,w=0,T=u.length;w!==T&&u[w]===0;)w++,y++;for(var B=(T-w)*v+1>>>0,H=new Uint8Array(B);w!==T;){for(var J=u[w],W=0,fe=B-1;(J!==0||W<b)&&fe!==-1;fe--,W++)J+=256*H[fe]>>>0,H[fe]=J%d>>>0,J=J/d>>>0;if(J!==0)throw new Error("Non-zero carry");b=W,w++}for(var re=B-b;re!==B&&H[re]===0;)re++;for(var se=g.repeat(y);re<B;++re)se+=n.charAt(H[re]);return se}function p(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;var y=0;if(u[y]!==" "){for(var b=0,w=0;u[y]===g;)b++,y++;for(var T=(u.length-y)*m+1>>>0,B=new Uint8Array(T);u[y];){var H=t[u.charCodeAt(y)];if(H===255)return;for(var J=0,W=T-1;(H!==0||J<w)&&W!==-1;W--,J++)H+=d*B[W]>>>0,B[W]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");w=J,y++}if(u[y]!==" "){for(var fe=T-w;fe!==T&&B[fe]===0;)fe++;for(var re=new Uint8Array(b+(T-fe)),se=b;fe!==T;)re[se++]=B[fe++];return re}}}function a(u){var y=p(u);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:p,decode:a}}var src=base$3,_brrp__multiformats_scope_baseX=src;const equals$2=(n,e)=>{if(n===e)return!0;if(n.byteLength!==e.byteLength)return!1;for(let t=0;t<n.byteLength;t++)if(n[t]!==e[t])return!1;return!0},coerce=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},fromString$3=n=>new TextEncoder().encode(n),toString$3=n=>new TextDecoder().decode(n);class Encoder{constructor(e,t,o){this.name=e,this.prefix=t,this.baseEncode=o}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,t,o){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=o}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$2(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or$2(this,e)}decode(e){const t=e[0],o=this.decoders[t];if(o)return o.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or$2=(n,e)=>new ComposedDecoder({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Codec{constructor(e,t,o,c){this.name=e,this.prefix=t,this.baseEncode=o,this.baseDecode=c,this.encoder=new Encoder(e,t,o),this.decoder=new Decoder(e,t,c)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$1=({name:n,prefix:e,encode:t,decode:o})=>new Codec(n,e,t,o),baseX=({prefix:n,name:e,alphabet:t})=>{const{encode:o,decode:c}=_brrp__multiformats_scope_baseX(t,e);return from$1({prefix:n,name:e,encode:o,decode:l=>coerce(c(l))})},decode$f=(n,e,t,o)=>{const c={};for(let v=0;v<e.length;++v)c[e[v]]=v;let l=n.length;for(;n[l-1]==="=";)--l;const h=new Uint8Array(l*t/8|0);let d=0,g=0,m=0;for(let v=0;v<l;++v){const _=c[n[v]];if(_===void 0)throw new SyntaxError(`Non-${o} character`);g=g<<t|_,d+=t,d>=8&&(d-=8,h[m++]=255&g>>d)}if(d>=t||255&g<<8-d)throw new SyntaxError("Unexpected end of data");return h},encode$f=(n,e,t)=>{const o=e[e.length-1]==="=",c=(1<<t)-1;let l="",h=0,d=0;for(let g=0;g<n.length;++g)for(d=d<<8|n[g],h+=8;h>t;)h-=t,l+=e[c&d>>h];if(h&&(l+=e[c&d<<t-h]),o)for(;l.length*t&7;)l+="=";return l},rfc4648=({name:n,prefix:e,bitsPerChar:t,alphabet:o})=>from$1({prefix:e,name:n,encode(c){return encode$f(c,o,t)},decode(c){return decode$f(c,o,t,n)}}),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc,base58flickr},Symbol.toStringTag,{value:"Module"})),base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$1=Object.freeze(Object.defineProperty({__proto__:null,base32,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"}));var encode_1=encode$e,MSB$1=128,REST$1=127,MSBALL=~REST$1,INT=Math.pow(2,31);function encode$e(n,e,t){e=e||[],t=t||0;for(var o=t;n>=INT;)e[t++]=n&255|MSB$1,n/=128;for(;n&MSBALL;)e[t++]=n&255|MSB$1,n>>>=7;return e[t]=n|0,encode$e.bytes=t-o+1,e}var decode$e=read$2,MSB$1$1=128,REST$1$1=127;function read$2(n,o){var t=0,o=o||0,c=0,l=o,h,d=n.length;do{if(l>=d)throw read$2.bytes=0,new RangeError("Could not decode varint");h=n[l++],t+=c<28?(h&REST$1$1)<<c:(h&REST$1$1)*Math.pow(2,c),c+=7}while(h>=MSB$1$1);return read$2.bytes=l-o,t}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(n){return n<N1$1?1:n<N2$1?2:n<N3$1?3:n<N4$1?4:n<N5$1?5:n<N6$1?6:n<N7$1?7:n<N8?8:n<N9?9:10},varint={encode:encode_1,decode:decode$e,encodingLength:length},_brrp_varint=varint;const decode$d=(n,e=0)=>[_brrp_varint.decode(n,e),_brrp_varint.decode.bytes],encodeTo=(n,e,t=0)=>(_brrp_varint.encode(n,e,t),e),encodingLength$1=n=>_brrp_varint.encodingLength(n),create$4=(n,e)=>{const t=e.byteLength,o=encodingLength$1(n),c=o+encodingLength$1(t),l=new Uint8Array(c+t);return encodeTo(n,l,0),encodeTo(t,l,o),l.set(e,c),new Digest(n,t,e,l)},decode$c=n=>{const e=coerce(n),[t,o]=decode$d(e),[c,l]=decode$d(e.subarray(o)),h=e.subarray(o+l);if(h.byteLength!==c)throw new Error("Incorrect length");return new Digest(t,c,h,e)},equals$1=(n,e)=>{if(n===e)return!0;{const t=e;return n.code===t.code&&n.size===t.size&&t.bytes instanceof Uint8Array&&equals$2(n.bytes,t.bytes)}};class Digest{constructor(e,t,o,c){this.code=e,this.size=t,this.digest=o,this.bytes=c}}const format$5=(n,e)=>{const{bytes:t,version:o}=n;switch(o){case 0:return toStringV0(t,baseCache(n),e||base58btc.encoder);default:return toStringV1(t,baseCache(n),e||base32.encoder)}},cache$1=new WeakMap,baseCache=n=>{const e=cache$1.get(n);if(e==null){const t=new Map;return cache$1.set(n,t),t}return e};class CID{constructor(e,t,o,c){this.code=t,this.version=e,this.multihash=o,this.bytes=c,this["/"]=c}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,o=create$4(e,t);return CID.createV1(this.code,o)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID.equals(this,e)}static equals(e,t){const o=t;return o&&e.code===o.code&&e.version===o.version&&equals$1(e.multihash,o.multihash)}toString(e){return format$5(this,e)}toJSON(){return{"/":format$5(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const t=e;if(t instanceof CID)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:o,code:c,multihash:l,bytes:h}=t;return new CID(o,c,l,h||encodeCID(o,c,l.bytes))}else if(t[cidSymbol]===!0){const{version:o,multihash:c,code:l}=t,h=decode$c(c);return CID.create(o,l,h)}else return null}static create(e,t,o){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(o.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,t,o,o.bytes)}case 1:{const c=encodeCID(e,t,o.bytes);return new CID(e,t,o,c)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,t){return CID.create(1,e,t)}static decode(e){const[t,o]=CID.decodeFirst(e);if(o.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=CID.inspectBytes(e),o=t.size-t.multihashSize,c=coerce(e.subarray(o,o+t.multihashSize));if(c.byteLength!==t.multihashSize)throw new Error("Incorrect length");const l=c.subarray(t.multihashSize-t.digestSize),h=new Digest(t.multihashCode,t.digestSize,l,c);return[t.version===0?CID.createV0(h):CID.createV1(t.codec,h),e.subarray(t.size)]}static inspectBytes(e){let t=0;const o=()=>{const[_,p]=decode$d(e.subarray(t));return t+=p,_};let c=o(),l=DAG_PB_CODE;if(c===18?(c=0,t=0):l=o(),c!==0&&c!==1)throw new RangeError(`Invalid CID version ${c}`);const h=t,d=o(),g=o(),m=t+g,v=m-h;return{version:c,codec:l,multihashCode:d,digestSize:g,multihashSize:v,size:m}}static parse(e,t){const[o,c]=parseCIDtoBytes(e,t),l=CID.decode(c);if(l.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache(l).set(o,e),l}}const parseCIDtoBytes=(n,e)=>{switch(n[0]){case"Q":{const t=e||base58btc;return[base58btc.prefix,t.decode(`${base58btc.prefix}${n}`)]}case base58btc.prefix:{const t=e||base58btc;return[base58btc.prefix,t.decode(n)]}case base32.prefix:{const t=e||base32;return[base32.prefix,t.decode(n)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],e.decode(n)]}}},toStringV0=(n,e,t)=>{const{prefix:o}=t;if(o!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const c=e.get(o);if(c==null){const l=t.encode(n).slice(1);return e.set(o,l),l}else return c},toStringV1=(n,e,t)=>{const{prefix:o}=t,c=e.get(o);if(c==null){const l=t.encode(n);return e.set(o,l),l}else return c},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(n,e,t)=>{const o=encodingLength$1(n),c=o+encodingLength$1(e),l=new Uint8Array(c+t.byteLength);return encodeTo(n,l,0),encodeTo(e,l,o),l.set(t,c),l},cidSymbol=Symbol.for("@ipld/js-cid/CID");function equals(n,e){if(n===e)return!0;if(n.byteLength!==e.byteLength)return!1;for(let t=0;t<n.byteLength;t++)if(n[t]!==e[t])return!1;return!0}const base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars=alphabet.reduce((n,e,t)=>(n[t]=e,n),[]),alphabetCharsToBytes=alphabet.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function encode$d(n){return n.reduce((e,t)=>(e+=alphabetBytesToChars[t],e),"")}function decode$b(n){const e=[];for(const t of n){const o=alphabetCharsToBytes[t.codePointAt(0)];if(o===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(o)}return new Uint8Array(e)}const base256emoji=from$1({prefix:"🚀",name:"base256emoji",encode:encode$d,decode:decode$b}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base64$2=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$3=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$2,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),identity$1=from$1({prefix:"\0",name:"identity",encode:n=>toString$3(n),decode:n=>fromString$3(n)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$1},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const code$1=0,name$1="identity",encode$c=coerce,digest$2=n=>create$4(code$1,encode$c(n)),identity={code:code$1,name:name$1,encode:encode$c,digest:digest$2},from=({name:n,code:e,encode:t})=>new Hasher(n,e,t);class Hasher{constructor(e,t,o){this.name=e,this.code=t,this.encode=o}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?create$4(this.code,t):t.then(o=>create$4(this.code,o))}else throw Error("Unknown type, must be binary type")}}const sha$1=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),sha256$4=from({name:"sha2-256",code:18,encode:sha$1("SHA-256")}),bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$1,...base36$1,...base58,...base64$3,...base256emoji$1};function asUint8Array(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function alloc(n=0){return globalThis.Buffer?.alloc!=null?asUint8Array(globalThis.Buffer.alloc(n)):new Uint8Array(n)}function allocUnsafe$1(n=0){return globalThis.Buffer?.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function createCodec$1(n,e,t,o){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:o}}}const string$1=createCodec$1("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),ascii=createCodec$1("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=allocUnsafe$1(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),BASES={utf8:string$1,"utf-8":string$1,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function toString$2(n,e="utf8"){const t=BASES[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):t.encoder.encode(n).substring(1)}const N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),MSB=128,REST=127;function encodingLength(n){if(n<N1)return 1;if(n<N2)return 2;if(n<N3)return 3;if(n<N4)return 4;if(n<N5)return 5;if(n<N6)return 6;if(n<N7)return 7;if(Number.MAX_SAFE_INTEGER!=null&&n>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function encodeUint8Array(n,e,t=0){switch(encodingLength(n)){case 8:e[t++]=n&255|MSB,n/=128;case 7:e[t++]=n&255|MSB,n/=128;case 6:e[t++]=n&255|MSB,n/=128;case 5:e[t++]=n&255|MSB,n/=128;case 4:e[t++]=n&255|MSB,n>>>=7;case 3:e[t++]=n&255|MSB,n>>>=7;case 2:e[t++]=n&255|MSB,n>>>=7;case 1:{e[t++]=n&255,n>>>=7;break}default:throw new Error("unreachable")}return e}function encodeUint8ArrayList(n,e,t=0){switch(encodingLength(n)){case 8:e.set(t++,n&255|MSB),n/=128;case 7:e.set(t++,n&255|MSB),n/=128;case 6:e.set(t++,n&255|MSB),n/=128;case 5:e.set(t++,n&255|MSB),n/=128;case 4:e.set(t++,n&255|MSB),n>>>=7;case 3:e.set(t++,n&255|MSB),n>>>=7;case 2:e.set(t++,n&255|MSB),n>>>=7;case 1:{e.set(t++,n&255),n>>>=7;break}default:throw new Error("unreachable")}return e}function decodeUint8Array(n,e){let t=n[e],o=0;if(o+=t&REST,t<MSB||(t=n[e+1],o+=(t&REST)<<7,t<MSB)||(t=n[e+2],o+=(t&REST)<<14,t<MSB)||(t=n[e+3],o+=(t&REST)<<21,t<MSB)||(t=n[e+4],o+=(t&REST)*N4,t<MSB)||(t=n[e+5],o+=(t&REST)*N5,t<MSB)||(t=n[e+6],o+=(t&REST)*N6,t<MSB)||(t=n[e+7],o+=(t&REST)*N7,t<MSB))return o;throw new RangeError("Could not decode varint")}function decodeUint8ArrayList(n,e){let t=n.get(e),o=0;if(o+=t&REST,t<MSB||(t=n.get(e+1),o+=(t&REST)<<7,t<MSB)||(t=n.get(e+2),o+=(t&REST)<<14,t<MSB)||(t=n.get(e+3),o+=(t&REST)<<21,t<MSB)||(t=n.get(e+4),o+=(t&REST)*N4,t<MSB)||(t=n.get(e+5),o+=(t&REST)*N5,t<MSB)||(t=n.get(e+6),o+=(t&REST)*N6,t<MSB)||(t=n.get(e+7),o+=(t&REST)*N7,t<MSB))return o;throw new RangeError("Could not decode varint")}function encode$b(n,e,t=0){return e==null&&(e=allocUnsafe$1(encodingLength(n))),e instanceof Uint8Array?encodeUint8Array(n,e,t):encodeUint8ArrayList(n,e,t)}function decode$a(n,e=0){return n instanceof Uint8Array?decodeUint8Array(n,e):decodeUint8ArrayList(n,e)}function concat$2(n,e){e==null&&(e=n.reduce((c,l)=>c+l.length,0));const t=allocUnsafe$1(e);let o=0;for(const c of n)t.set(c,o),o+=c.length;return asUint8Array(t)}class Parser{constructor(){me(this,"index",0);me(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const t=this.index,o=e();return o===void 0&&(this.index=t),o}parseWith(e){const t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const t=this.readChar();if(t===e)return t})}readSeparator(e,t,o){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(e)===void 0))return o()})}readNumber(e,t,o,c){return this.readAtomically(()=>{let l=0,h=0;const d=this.peekChar();if(d===void 0)return;const g=d==="0",m=2**(8*c)-1;for(;;){const v=this.readAtomically(()=>{const _=this.readChar();if(_===void 0)return;const p=Number.parseInt(_,e);if(!Number.isNaN(p))return p});if(v===void 0)break;if(l*=e,l+=v,l>m||(h+=1,t!==void 0&&h>t))return}if(h!==0)return!o&&g&&h>1?void 0:l})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let t=0;t<e.length;t++){const o=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(o===void 0)return;e[t]=o}return e})}readIPv6Addr(){const e=t=>{for(let o=0;o<t.length/2;o++){const c=o*2;if(o<t.length-3){const h=this.readSeparator(":",o,()=>this.readIPv4Addr());if(h!==void 0)return t[c]=h[0],t[c+1]=h[1],t[c+2]=h[2],t[c+3]=h[3],[c+4,!0]}const l=this.readSeparator(":",o,()=>this.readNumber(16,4,!0,2));if(l===void 0)return[c,!1];t[c]=l>>8,t[c+1]=l&255}return[t.length,!1]};return this.readAtomically(()=>{const t=new Uint8Array(16),[o,c]=e(t);if(o===16)return t;if(c||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const l=new Uint8Array(14),h=16-(o+2),[d]=e(l.subarray(0,h));return t.set(l.subarray(0,d),16-d),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const MAX_IPV6_LENGTH=45,MAX_IPV4_LENGTH=15,parser=new Parser;function parseIPv4(n){if(!(n.length>MAX_IPV4_LENGTH))return parser.new(n).parseWith(()=>parser.readIPv4Addr())}function parseIPv6(n){if(n.includes("%")&&(n=n.split("%")[0]),!(n.length>MAX_IPV6_LENGTH))return parser.new(n).parseWith(()=>parser.readIPv6Addr())}function parseIP(n){if(n.includes("%")&&(n=n.split("%")[0]),!(n.length>MAX_IPV6_LENGTH))return parser.new(n).parseWith(()=>parser.readIPAddr())}function fromString$2(n,e="utf8"){const t=BASES[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}function isIPv4(n){return!!parseIPv4(n)}function isIPv6(n){return!!parseIPv6(n)}function isIP(n){return!!parseIP(n)}const isV4=isIPv4,isV6=isIPv6,toBytes$2=function(n){let e=0;if(n=n.toString().trim(),isV4(n)){const t=new Uint8Array(e+4);return n.split(/\./g).forEach(o=>{t[e++]=parseInt(o,10)&255}),t}if(isV6(n)){const t=n.split(":",8);let o;for(o=0;o<t.length;o++){const l=isV4(t[o]);let h;l&&(h=toBytes$2(t[o]),t[o]=toString$2(h.slice(0,2),"base16")),h!=null&&++o<8&&t.splice(o,0,toString$2(h.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(o=0;o<t.length&&t[o]!=="";o++);const l=[o,1];for(o=9-t.length;o>0;o--)l.push("0");t.splice.apply(t,l)}const c=new Uint8Array(e+16);for(o=0;o<t.length;o++){const l=parseInt(t[o],16);c[e++]=l>>8&255,c[e++]=l&255}return c}throw new Error("invalid ip address")},toString$1=function(n,e=0,t){e=~~e,t=t??n.length-e;const o=new DataView(n.buffer);if(t===4){const c=[];for(let l=0;l<t;l++)c.push(n[e+l]);return c.join(".")}if(t===16){const c=[];for(let l=0;l<t;l+=2)c.push(o.getUint16(e+l).toString(16));return c.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},V=-1,names={},codes$4={},table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[43,8,"ipcidr"],[53,V,"dns",!0],[54,V,"dns4",!0],[55,V,"dns6",!0],[56,V,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,!0],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[448,0,"tls"],[449,V,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,V,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V,"memory"]];table.forEach(n=>{const e=createProtocol(...n);codes$4[e.code]=e,names[e.name]=e});function createProtocol(n,e,t,o,c){return{code:n,size:e,name:t,resolvable:!!o,path:!!c}}function getProtocol(n){if(typeof n=="number"){if(codes$4[n]!=null)return codes$4[n];throw new Error(`no protocol with code: ${n}`)}else if(typeof n=="string"){if(names[n]!=null)return names[n];throw new Error(`no protocol with name: ${n}`)}throw new Error(`invalid protocol id type: ${typeof n}`)}getProtocol("ip4");getProtocol("ip6");getProtocol("ipcidr");function convertToString(n,e){switch(getProtocol(n).code){case 4:case 41:return bytes2ip(e);case 42:return bytes2str(e);case 6:case 273:case 33:case 132:return bytes2port(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return bytes2str(e);case 421:return bytes2mh(e);case 444:return bytes2onion(e);case 445:return bytes2onion(e);case 466:return bytes2mb(e);default:return toString$2(e,"base16")}}function convertToBytes(n,e){switch(getProtocol(n).code){case 4:return ip2bytes(e);case 41:return ip2bytes(e);case 42:return str2bytes(e);case 6:case 273:case 33:case 132:return port2bytes(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return str2bytes(e);case 421:return mh2bytes(e);case 444:return onion2bytes(e);case 445:return onion32bytes(e);case 466:return mb2bytes(e);default:return fromString$2(e,"base16")}}const decoders=Object.values(bases).map(n=>n.decoder),anybaseDecoder=function(){let n=decoders[0].or(decoders[1]);return decoders.slice(2).forEach(e=>n=n.or(e)),n}();function ip2bytes(n){if(!isIP(n))throw new Error("invalid ip address");return toBytes$2(n)}function bytes2ip(n){const e=toString$1(n,0,n.length);if(e==null)throw new Error("ipBuff is required");if(!isIP(e))throw new Error("invalid ip address");return e}function port2bytes(n){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,n),new Uint8Array(e)}function bytes2port(n){return new DataView(n.buffer).getUint16(n.byteOffset)}function str2bytes(n){const e=fromString$2(n),t=Uint8Array.from(encode$b(e.length));return concat$2([t,e],t.length+e.length)}function bytes2str(n){const e=decode$a(n);if(n=n.slice(encodingLength(e)),n.length!==e)throw new Error("inconsistent lengths");return toString$2(n)}function mh2bytes(n){let e;n[0]==="Q"||n[0]==="1"?e=decode$c(base58btc.decode(`z${n}`)).bytes:e=CID.parse(n).multihash.bytes;const t=Uint8Array.from(encode$b(e.length));return concat$2([t,e],t.length+e.length)}function mb2bytes(n){const e=anybaseDecoder.decode(n),t=Uint8Array.from(encode$b(e.length));return concat$2([t,e],t.length+e.length)}function bytes2mb(n){const e=decode$a(n),t=n.slice(encodingLength(e));if(t.length!==e)throw new Error("inconsistent lengths");return"u"+toString$2(t,"base64url")}function bytes2mh(n){const e=decode$a(n),t=n.slice(encodingLength(e));if(t.length!==e)throw new Error("inconsistent lengths");return toString$2(t,"base58btc")}function onion2bytes(n){const e=n.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const t=base32.decode("b"+e[0]),o=parseInt(e[1],10);if(o<1||o>65536)throw new Error("Port number is not in range(1, 65536)");const c=port2bytes(o);return concat$2([t,c],t.length+c.length)}function onion32bytes(n){const e=n.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const t=base32.decode(`b${e[0]}`),o=parseInt(e[1],10);if(o<1||o>65536)throw new Error("Port number is not in range(1, 65536)");const c=port2bytes(o);return concat$2([t,c],t.length+c.length)}function bytes2onion(n){const e=n.slice(0,n.length-2),t=n.slice(n.length-2),o=toString$2(e,"base32"),c=bytes2port(t);return`${o}:${c}`}function stringToMultiaddrParts(n){n=cleanPath(n);const e=[],t=[];let o=null;const c=n.split("/").slice(1);if(c.length===1&&c[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let l=0;l<c.length;l++){const h=c[l],d=getProtocol(h);if(d.size===0){e.push([d.code]),t.push([d.code]);continue}if(l++,l>=c.length)throw ParseError("invalid address: "+n);if(d.path===!0){o=cleanPath(c.slice(l).join("/")),e.push([d.code,convertToBytes(d.code,o)]),t.push([d.code,o]);break}const g=convertToBytes(d.code,c[l]);e.push([d.code,g]),t.push([d.code,convertToString(d.code,g)])}return{string:stringTuplesToString(t),bytes:tuplesToBytes(e),tuples:e,stringTuples:t,path:o}}function bytesToMultiaddrParts(n){const e=[],t=[];let o=null,c=0;for(;c<n.length;){const l=decode$a(n,c),h=encodingLength(l),d=getProtocol(l),g=sizeForAddr(d,n.slice(c+h));if(g===0){e.push([l]),t.push([l]),c+=h;continue}const m=n.slice(c+h,c+h+g);if(c+=g+h,c>n.length)throw ParseError("Invalid address Uint8Array: "+toString$2(n,"base16"));e.push([l,m]);const v=convertToString(l,m);if(t.push([l,v]),d.path===!0){o=v;break}}return{bytes:Uint8Array.from(n),string:stringTuplesToString(t),tuples:e,stringTuples:t,path:o}}function stringTuplesToString(n){const e=[];return n.map(t=>{const o=getProtocol(t[0]);return e.push(o.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),cleanPath(e.join("/"))}function tuplesToBytes(n){return concat$2(n.map(e=>{const t=getProtocol(e[0]);let o=Uint8Array.from(encode$b(t.code));return e.length>1&&e[1]!=null&&(o=concat$2([o,e[1]])),o}))}function sizeForAddr(n,e){if(n.size>0)return n.size/8;if(n.size===0)return 0;{const t=decode$a(e instanceof Uint8Array?e:Uint8Array.from(e));return t+encodingLength(t)}}function cleanPath(n){return"/"+n.trim().split("/").filter(e=>e).join("/")}function ParseError(n){return new Error("Error parsing address: "+n)}const inspect$2=Symbol.for("nodejs.util.inspect.custom"),symbol$4=Symbol.for("@multiformats/js-multiaddr/multiaddr"),DNS_CODES=[getProtocol("dns").code,getProtocol("dns4").code,getProtocol("dns6").code,getProtocol("dnsaddr").code];var xr,mr,Er,Tr,Fr;const vr=class vr{constructor(e){me(this,"bytes");nr(this,xr,void 0);nr(this,mr,void 0);nr(this,Er,void 0);nr(this,Tr,void 0);me(this,Fr,!0);e==null&&(e="");let t;if(e instanceof Uint8Array)t=bytesToMultiaddrParts(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);t=stringToMultiaddrParts(e)}else if(isMultiaddr(e))t=bytesToMultiaddrParts(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=t.bytes,hr(this,xr,t.string),hr(this,mr,t.tuples),hr(this,Er,t.stringTuples),hr(this,Tr,t.path)}toString(){return Ut(this,xr)}toJSON(){return this.toString()}toOptions(){let e,t,o,c,l="";const h=getProtocol("tcp"),d=getProtocol("udp"),g=getProtocol("ip4"),m=getProtocol("ip6"),v=getProtocol("dns6"),_=getProtocol("ip6zone");for(const[a,u]of this.stringTuples())a===_.code&&(l=`%${u??""}`),DNS_CODES.includes(a)&&(t=h.name,c=443,o=`${u??""}${l}`,e=a===v.code?6:4),(a===h.code||a===d.code)&&(t=getProtocol(a).name,c=parseInt(u??"")),(a===g.code||a===m.code)&&(t=getProtocol(a).name,o=`${u??""}${l}`,e=a===m.code?6:4);if(e==null||t==null||o==null||c==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:o,transport:t,port:c}}protos(){return Ut(this,mr).map(([e])=>Object.assign({},getProtocol(e)))}protoCodes(){return Ut(this,mr).map(([e])=>e)}protoNames(){return Ut(this,mr).map(([e])=>getProtocol(e).name)}tuples(){return Ut(this,mr)}stringTuples(){return Ut(this,Er)}encapsulate(e){return e=new vr(e),new vr(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),o=this.toString(),c=o.lastIndexOf(t);if(c<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new vr(o.slice(0,c))}decapsulateCode(e){const t=this.tuples();for(let o=t.length-1;o>=0;o--)if(t[o][0]===e)return new vr(tuplesToBytes(t.slice(0,o)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([o,c])=>{o===names.p2p.code&&e.push([o,c]),o===names["p2p-circuit"].code&&(e=[])});const t=e.pop();if(t?.[1]!=null){const o=t[1];return o[0]==="Q"||o[0]==="1"?toString$2(base58btc.decode(`z${o}`),"base58btc"):toString$2(CID.parse(o).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return Ut(this,Tr)}equals(e){return equals(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find(l=>l.resolvable);if(t==null)return[this];const o=resolvers.get(t.name);if(o==null)throw new CodeError$4(`no available resolver for ${t.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await o(this,e)).map(l=>new vr(l))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(Fr=symbol$4,inspect$2)](){return`Multiaddr(${Ut(this,xr)})`}};xr=new WeakMap,mr=new WeakMap,Er=new WeakMap,Tr=new WeakMap;let Multiaddr=vr;const resolvers=new Map;function isMultiaddr(n){return!!n?.[symbol$4]}function multiaddr(n){return new Multiaddr(n)}const symbol$3=Symbol.for("@achingbrain/uint8arraylist");function findBufAndOffset(n,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let t=0;for(const o of n){const c=t+o.byteLength;if(e<c)return{buf:o,index:e-t};t=c}throw new RangeError("index is out of bounds")}function isUint8ArrayList(n){return!!n?.[symbol$3]}class Uint8ArrayList{constructor(...e){Object.defineProperty(this,symbol$3,{value:!0}),this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let t=0;for(const o of e)if(o instanceof Uint8Array)t+=o.byteLength,this.bufs.push(o);else if(isUint8ArrayList(o))t+=o.byteLength,this.bufs.push(...o.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}prepend(...e){this.prependAll(e)}prependAll(e){let t=0;for(const o of e.reverse())if(o instanceof Uint8Array)t+=o.byteLength,this.bufs.unshift(o);else if(isUint8ArrayList(o))t+=o.byteLength,this.bufs.unshift(...o.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}get(e){const t=findBufAndOffset(this.bufs,e);return t.buf[t.index]}set(e,t){const o=findBufAndOffset(this.bufs,e);o.buf[o.index]=t}write(e,t=0){if(e instanceof Uint8Array)for(let o=0;o<e.length;o++)this.set(t+o,e[o]);else if(isUint8ArrayList(e))for(let o=0;o<e.length;o++)this.set(t+o,e.get(o));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,t){const{bufs:o,length:c}=this._subList(e,t);return concat$2(o,c)}subarray(e,t){const{bufs:o,length:c}=this._subList(e,t);return o.length===1?o[0]:concat$2(o,c)}sublist(e,t){const{bufs:o,length:c}=this._subList(e,t),l=new Uint8ArrayList;return l.length=c,l.bufs=o,l}_subList(e,t){if(e=e??0,t=t??this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(e===0&&t===this.length)return{bufs:[...this.bufs],length:this.length};const o=[];let c=0;for(let l=0;l<this.bufs.length;l++){const h=this.bufs[l],d=c,g=d+h.byteLength;if(c=g,e>=g)continue;const m=e>=d&&e<g,v=t>d&&t<=g;if(m&&v){if(e===d&&t===g){o.push(h);break}const _=e-d;o.push(h.subarray(_,_+(t-e)));break}if(m){if(e===0){o.push(h);continue}o.push(h.subarray(e-d));continue}if(v){if(t===g){o.push(h);break}o.push(h.subarray(0,t-d));break}o.push(h)}return{bufs:o,length:t-e}}indexOf(e,t=0){if(!isUint8ArrayList(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const o=e instanceof Uint8Array?e:e.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),e.length===0)return t>this.length?this.length:t;const c=o.byteLength;if(c===0)throw new TypeError("search must be at least 1 byte long");const l=256,h=new Int32Array(l);for(let _=0;_<l;_++)h[_]=-1;for(let _=0;_<c;_++)h[o[_]]=_;const d=h,g=this.byteLength-o.byteLength,m=o.byteLength-1;let v;for(let _=t;_<=g;_+=v){v=0;for(let p=m;p>=0;p--){const a=this.get(_+p);if(o[p]!==a){v=Math.max(1,p-d[a]);break}}if(v===0)return _}return-1}getInt8(e){const t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(e,t){const o=allocUnsafe$1(1);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt8(0,t),this.write(o,e)}getInt16(e,t){const o=this.subarray(e,e+2);return new DataView(o.buffer,o.byteOffset,o.byteLength).getInt16(0,t)}setInt16(e,t,o){const c=alloc(2);new DataView(c.buffer,c.byteOffset,c.byteLength).setInt16(0,t,o),this.write(c,e)}getInt32(e,t){const o=this.subarray(e,e+4);return new DataView(o.buffer,o.byteOffset,o.byteLength).getInt32(0,t)}setInt32(e,t,o){const c=alloc(4);new DataView(c.buffer,c.byteOffset,c.byteLength).setInt32(0,t,o),this.write(c,e)}getBigInt64(e,t){const o=this.subarray(e,e+8);return new DataView(o.buffer,o.byteOffset,o.byteLength).getBigInt64(0,t)}setBigInt64(e,t,o){const c=alloc(8);new DataView(c.buffer,c.byteOffset,c.byteLength).setBigInt64(0,t,o),this.write(c,e)}getUint8(e){const t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(e,t){const o=allocUnsafe$1(1);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint8(0,t),this.write(o,e)}getUint16(e,t){const o=this.subarray(e,e+2);return new DataView(o.buffer,o.byteOffset,o.byteLength).getUint16(0,t)}setUint16(e,t,o){const c=alloc(2);new DataView(c.buffer,c.byteOffset,c.byteLength).setUint16(0,t,o),this.write(c,e)}getUint32(e,t){const o=this.subarray(e,e+4);return new DataView(o.buffer,o.byteOffset,o.byteLength).getUint32(0,t)}setUint32(e,t,o){const c=alloc(4);new DataView(c.buffer,c.byteOffset,c.byteLength).setUint32(0,t,o),this.write(c,e)}getBigUint64(e,t){const o=this.subarray(e,e+8);return new DataView(o.buffer,o.byteOffset,o.byteLength).getBigUint64(0,t)}setBigUint64(e,t,o){const c=alloc(8);new DataView(c.buffer,c.byteOffset,c.byteLength).setBigUint64(0,t,o),this.write(c,e)}getFloat32(e,t){const o=this.subarray(e,e+4);return new DataView(o.buffer,o.byteOffset,o.byteLength).getFloat32(0,t)}setFloat32(e,t,o){const c=alloc(4);new DataView(c.buffer,c.byteOffset,c.byteLength).setFloat32(0,t,o),this.write(c,e)}getFloat64(e,t){const o=this.subarray(e,e+8);return new DataView(o.buffer,o.byteOffset,o.byteLength).getFloat64(0,t)}setFloat64(e,t,o){const c=alloc(8);new DataView(c.buffer,c.byteOffset,c.byteLength).setFloat64(0,t,o),this.write(c,e)}equals(e){if(e==null||!(e instanceof Uint8ArrayList)||e.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!equals(this.bufs[t],e.bufs[t]))return!1;return!0}static fromUint8Arrays(e,t){const o=new Uint8ArrayList;return o.bufs=e,t==null&&(t=e.reduce((c,l)=>c+l.byteLength,0)),o.length=t,o}}function isAsyncIterable$9(n){return n[Symbol.asyncIterator]!=null}const defaultEncoder=n=>{const e=encodingLength(n),t=allocUnsafe$1(e);return encode$b(n,t),defaultEncoder.bytes=e,t};defaultEncoder.bytes=0;function encode$a(n,e){e=e??{};const t=e.lengthEncoder??defaultEncoder;function*o(c){const l=t(c.byteLength);l instanceof Uint8Array?yield l:yield*l,c instanceof Uint8Array?yield c:yield*c}return isAsyncIterable$9(n)?async function*(){for await(const c of n)yield*o(c)}():function*(){for(const c of n)yield*o(c)}()}encode$a.single=(n,e)=>{e=e??{};const t=e.lengthEncoder??defaultEncoder;return new Uint8ArrayList(t(n.byteLength),n)};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(o){var c=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(t,o,c.get?c:{enumerable:!0,get:function(){return n[o]}})}),t}function assign(n,e){for(const t in e)Object.defineProperty(n,t,{value:e[t],enumerable:!0,configurable:!0});return n}function createError(n,e,t){if(!n||typeof n=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return assign(n,t)}catch{t.message=n.message,t.stack=n.stack;const c=function(){};return c.prototype=Object.create(Object.getPrototypeOf(n)),assign(new c,t)}}var errCode=createError;const errCode$1=getDefaultExportFromCjs(errCode),MAX_LENGTH_LENGTH=8,MAX_DATA_LENGTH=1024*1024*4;var ReadMode;(function(n){n[n.LENGTH=0]="LENGTH",n[n.DATA=1]="DATA"})(ReadMode||(ReadMode={}));const defaultDecoder=n=>{const e=decode$a(n);return defaultDecoder.bytes=encodingLength(e),e};defaultDecoder.bytes=0;function decode$9(n,e){const t=new Uint8ArrayList;let o=ReadMode.LENGTH,c=-1;const l=e?.lengthDecoder??defaultDecoder,h=e?.maxLengthLength??MAX_LENGTH_LENGTH,d=e?.maxDataLength??MAX_DATA_LENGTH;function*g(){for(;t.byteLength>0;){if(o===ReadMode.LENGTH)try{if(c=l(t),c<0)throw errCode$1(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(c>d)throw errCode$1(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");const m=l.bytes;t.consume(m),e?.onLength!=null&&e.onLength(c),o=ReadMode.DATA}catch(m){if(m instanceof RangeError){if(t.byteLength>h)throw errCode$1(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw m}if(o===ReadMode.DATA){if(t.byteLength<c)break;const m=t.sublist(0,c);t.consume(c),e?.onData!=null&&e.onData(m),yield m,o=ReadMode.LENGTH}}}return isAsyncIterable$9(n)?async function*(){for await(const m of n)t.append(m),yield*g();if(t.byteLength>0)throw errCode$1(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(const m of n)t.append(m),yield*g();if(t.byteLength>0)throw errCode$1(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}decode$9.fromReader=(n,e)=>{let t=1;const o=async function*(){for(;;)try{const{done:l,value:h}=await n.next(t);if(l===!0)return;h!=null&&(yield h)}catch(l){if(l.code==="ERR_UNDER_READ")return{done:!0,value:null};throw l}finally{t=1}}();return decode$9(o,{...e??{},onLength:l=>{t=l}})};function pDefer(){const n={};return n.promise=new Promise((e,t)=>{n.resolve=e,n.reject=t}),n}class FixedFIFO{constructor(e){me(this,"buffer");me(this,"mask");me(this,"top");me(this,"btm");me(this,"next");if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}class FIFO{constructor(e={}){me(this,"size");me(this,"hwm");me(this,"head");me(this,"tail");this.hwm=e.splitLimit??16,this.head=new FixedFIFO(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const t=this.head;this.head=t.next=new FixedFIFO(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){const t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}let AbortError$6=class extends Error{constructor(t,o){super(t??"The operation was aborted");me(this,"type");me(this,"code");this.type="aborted",this.code=o??"ABORT_ERR"}};function pushable(n={}){return _pushable(t=>{const o=t.shift();if(o==null)return{done:!0};if(o.error!=null)throw o.error;return{done:o.done===!0,value:o.value}},n)}function _pushable(n,e){e=e??{};let t=e.onEnd,o=new FIFO,c,l,h,d=pDefer();const g=async()=>{try{return o.isEmpty()?h?{done:!0}:await new Promise((b,w)=>{l=T=>{l=null,o.push(T);try{b(n(o))}catch(B){w(B)}return c}}):n(o)}finally{o.isEmpty()&&queueMicrotask(()=>{d.resolve(),d=pDefer()})}},m=b=>l!=null?l(b):(o.push(b),c),v=b=>(o=new FIFO,l!=null?l({error:b}):(o.push({error:b}),c)),_=b=>{if(h)return c;if(e?.objectMode!==!0&&b?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return m({done:!1,value:b})},p=b=>h?c:(h=!0,b!=null?v(b):m({done:!0})),a=()=>(o=new FIFO,p(),{done:!0}),u=b=>(p(b),{done:!0});if(c={[Symbol.asyncIterator](){return this},next:g,return:a,throw:u,push:_,end:p,get readableLength(){return o.size},onEmpty:async b=>{const w=b?.signal;if(w?.throwIfAborted(),o.isEmpty())return;let T,B;w!=null&&(T=new Promise((H,J)=>{B=()=>{J(new AbortError$6)},w.addEventListener("abort",B)}));try{await Promise.race([d.promise,T])}finally{B!=null&&w!=null&&w?.removeEventListener("abort",B)}}},t==null)return c;const y=c;return c={[Symbol.asyncIterator](){return this},next(){return y.next()},throw(b){return y.throw(b),t!=null&&(t(b),t=void 0),{done:!0}},return(){return y.return(),t!=null&&(t(),t=void 0),{done:!0}},push:_,end(b){return y.end(b),t!=null&&(t(b),t=void 0),c},get readableLength(){return y.readableLength},onEmpty:b=>y.onEmpty(b)},c}let CodeError$3=class extends Error{constructor(t,o){super(t);me(this,"code");this.code=o}},AbortError$5=class extends CodeError$3{constructor(t){super(t,"ABORT_ERR");me(this,"type");this.type="aborted"}};function byteStream(n){const e=pushable();n.sink(e).catch(l=>{e.end(l)}),n.sink=async l=>{for await(const h of l)e.push(h);e.end()};let t=n.source;n.source[Symbol.iterator]!=null?t=n.source[Symbol.iterator]():n.source[Symbol.asyncIterator]!=null&&(t=n.source[Symbol.asyncIterator]());const o=new Uint8ArrayList;return{read:async(l,h)=>{h?.signal?.throwIfAborted();let d;const g=new Promise((m,v)=>{d=()=>{v(new AbortError$5("Read aborted"))},h?.signal?.addEventListener("abort",d)});try{if(l==null){const{done:v,value:_}=await Promise.race([t.next(),g]);return v===!0?new Uint8ArrayList:_}for(;o.byteLength<l;){const{value:v,done:_}=await Promise.race([t.next(),g]);if(_===!0)throw new CodeError$3("unexpected end of input","ERR_UNEXPECTED_EOF");o.append(v)}const m=o.sublist(0,l);return o.consume(l),m}finally{d!=null&&h?.signal?.removeEventListener("abort",d)}},write:async(l,h)=>{h?.signal?.throwIfAborted(),l instanceof Uint8Array?e.push(l):e.push(l.subarray()),await e.onEmpty(h)},unwrap:()=>{const l=n.source;return n.source=async function*(){yield*o,yield*l}(),n}}}let CodeError$2=class extends Error{constructor(t,o){super(t);me(this,"code");this.code=o}};const defaultLengthDecoder=n=>decode$a(n);defaultLengthDecoder.bytes=0;function lpStream(n,e){const t=byteStream(n);return{read:async c=>{let l=-1;const h=new Uint8ArrayList,d=e?.lengthDecoder??defaultLengthDecoder;for(;;){h.append(await t.read(1,c));try{l=d(h)}catch(g){if(g instanceof RangeError)continue;throw g}if(l>-1)break;if(e?.maxLengthLength!=null&&h.byteLength>e.maxLengthLength)throw new CodeError$2("message length length too long","ERR_MSG_LENGTH_TOO_LONG")}if(e?.maxDataLength!=null&&l>e.maxDataLength)throw new CodeError$2("message length too long","ERR_MSG_DATA_TOO_LONG");return t.read(l,c)},write:async(c,l)=>{await t.write(encode$a.single(c,e),l)},unwrap:()=>t.unwrap()}}function pair(){const n=pDefer();let e=!1;return{sink:async t=>{if(e)throw new Error("already piped");e=!0,n.resolve(t)},source:async function*(){yield*await n.promise}()}}function duplexPair(){const n=pair(),e=pair();return[{source:n.source,sink:e.sink},{source:e.source,sink:n.sink}]}function isAsyncIterable$8(n){return n[Symbol.asyncIterator]!=null}function merge$2(...n){const e=[];for(const t of n)isAsyncIterable$8(t)||e.push(t);return e.length===n.length?function*(){for(const t of e)yield*t}():async function*(){const t=pushable({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(n.map(async o=>{for await(const c of o)t.push(c)})),t.end()}catch(o){t.end(o)}}),yield*t}()}function pipe(n,...e){if(n==null)throw new Error("Empty pipeline");if(isDuplex(n)){const o=n;n=()=>o.source}else if(isIterable(n)||isAsyncIterable$7(n)){const o=n;n=()=>o}const t=[n,...e];if(t.length>1&&isDuplex(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let o=1;o<t.length-1;o++)isDuplex(t[o])&&(t[o]=duplexPipelineFn(t[o]));return rawPipe(...t)}const rawPipe=(...n)=>{let e;for(;n.length>0;)e=n.shift()(e);return e},isAsyncIterable$7=n=>n?.[Symbol.asyncIterator]!=null,isIterable=n=>n?.[Symbol.iterator]!=null,isDuplex=n=>n==null?!1:n.sink!=null&&n.source!=null,duplexPipelineFn=n=>e=>{const t=n.sink(e);if(t?.then!=null){const o=pushable({objectMode:!0});t.then(()=>{o.end()},h=>{o.end(h)});let c;const l=n.source;if(isAsyncIterable$7(l))c=async function*(){yield*l,o.end()};else if(isIterable(l))c=function*(){yield*l,o.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return merge$2(o,c())}return n.source},NOISE_MSG_MAX_LENGTH_BYTES=65535,NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=NOISE_MSG_MAX_LENGTH_BYTES-16,DUMP_SESSION_KEYS=!!globalThis.process?.env?.DUMP_SESSION_KEYS;/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const u8a$2=n=>n instanceof Uint8Array,u32=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),createView$1=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),isLE$1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$1)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$2(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function toBytes$1(n){if(typeof n=="string"&&(n=utf8ToBytes$2(n)),!u8a$2(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}const isPlainObject$1=n=>Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object;function checkOpts(n,e){if(e!==void 0&&(typeof e!="object"||!isPlainObject$1(e)))throw new Error("options must be object or undefined");return Object.assign(n,e)}function ensureBytes$1(n,e){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");if(typeof e=="number"&&n.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function equalBytes$1(n,e){if(n.length!==e.length)throw new Error("equalBytes: Different size of Uint8Arrays");let t=!0;for(let o=0;o<n.length;o++)t&&(t=n[o]===e[o]);return t}function setBigUint64$1(n,e,t,o){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,o);const c=BigInt(32),l=BigInt(4294967295),h=Number(t>>c&l),d=Number(t&l),g=o?4:0,m=o?0:4;n.setUint32(e+g,h,o),n.setUint32(e+m,d,o)}function number$2(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function bool(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}function bytes$2(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function hash$7(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");number$2(n.outputLen),number$2(n.blockLen)}function exists$1(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function output$1(n,e){bytes$2(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const assert$h={number:number$2,bool,bytes:bytes$2,hash:hash$7,exists:exists$1,output:output$1},u8to16=(n,e)=>n[e++]&255|(n[e++]&255)<<8;class Poly1305{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=toBytes$1(e),ensureBytes$1(e,32);const t=u8to16(e,0),o=u8to16(e,2),c=u8to16(e,4),l=u8to16(e,6),h=u8to16(e,8),d=u8to16(e,10),g=u8to16(e,12),m=u8to16(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|o<<3)&8191,this.r[2]=(o>>>10|c<<6)&7939,this.r[3]=(c>>>7|l<<9)&8191,this.r[4]=(l>>>4|h<<12)&255,this.r[5]=h>>>1&8190,this.r[6]=(h>>>14|d<<2)&8191,this.r[7]=(d>>>11|g<<5)&8065,this.r[8]=(g>>>8|m<<8)&8191,this.r[9]=m>>>5&127;for(let v=0;v<8;v++)this.pad[v]=u8to16(e,16+2*v)}process(e,t,o=!1){const c=o?0:2048,{h:l,r:h}=this,d=h[0],g=h[1],m=h[2],v=h[3],_=h[4],p=h[5],a=h[6],u=h[7],y=h[8],b=h[9],w=u8to16(e,t+0),T=u8to16(e,t+2),B=u8to16(e,t+4),H=u8to16(e,t+6),J=u8to16(e,t+8),W=u8to16(e,t+10),fe=u8to16(e,t+12),re=u8to16(e,t+14);let se=l[0]+(w&8191),ae=l[1]+((w>>>13|T<<3)&8191),ee=l[2]+((T>>>10|B<<6)&8191),P=l[3]+((B>>>7|H<<9)&8191),C=l[4]+((H>>>4|J<<12)&8191),E=l[5]+(J>>>1&8191),k=l[6]+((J>>>14|W<<2)&8191),F=l[7]+((W>>>11|fe<<5)&8191),j=l[8]+((fe>>>8|re<<8)&8191),Q=l[9]+(re>>>5|c),G=0,U=G+se*d+ae*(5*b)+ee*(5*y)+P*(5*u)+C*(5*a);G=U>>>13,U&=8191,U+=E*(5*p)+k*(5*_)+F*(5*v)+j*(5*m)+Q*(5*g),G+=U>>>13,U&=8191;let $=G+se*g+ae*d+ee*(5*b)+P*(5*y)+C*(5*u);G=$>>>13,$&=8191,$+=E*(5*a)+k*(5*p)+F*(5*_)+j*(5*v)+Q*(5*m),G+=$>>>13,$&=8191;let O=G+se*m+ae*g+ee*d+P*(5*b)+C*(5*y);G=O>>>13,O&=8191,O+=E*(5*u)+k*(5*a)+F*(5*p)+j*(5*_)+Q*(5*v),G+=O>>>13,O&=8191;let oe=G+se*v+ae*m+ee*g+P*d+C*(5*b);G=oe>>>13,oe&=8191,oe+=E*(5*y)+k*(5*u)+F*(5*a)+j*(5*p)+Q*(5*_),G+=oe>>>13,oe&=8191;let ue=G+se*_+ae*v+ee*m+P*g+C*d;G=ue>>>13,ue&=8191,ue+=E*(5*b)+k*(5*y)+F*(5*u)+j*(5*a)+Q*(5*p),G+=ue>>>13,ue&=8191;let q=G+se*p+ae*_+ee*v+P*m+C*g;G=q>>>13,q&=8191,q+=E*d+k*(5*b)+F*(5*y)+j*(5*u)+Q*(5*a),G+=q>>>13,q&=8191;let pe=G+se*a+ae*p+ee*_+P*v+C*m;G=pe>>>13,pe&=8191,pe+=E*g+k*d+F*(5*b)+j*(5*y)+Q*(5*u),G+=pe>>>13,pe&=8191;let be=G+se*u+ae*a+ee*p+P*_+C*v;G=be>>>13,be&=8191,be+=E*m+k*g+F*d+j*(5*b)+Q*(5*y),G+=be>>>13,be&=8191;let ve=G+se*y+ae*u+ee*a+P*p+C*_;G=ve>>>13,ve&=8191,ve+=E*v+k*m+F*g+j*d+Q*(5*b),G+=ve>>>13,ve&=8191;let we=G+se*b+ae*y+ee*u+P*a+C*p;G=we>>>13,we&=8191,we+=E*_+k*v+F*m+j*g+Q*d,G+=we>>>13,we&=8191,G=(G<<2)+G|0,G=G+U|0,U=G&8191,G=G>>>13,$+=G,l[0]=U,l[1]=$,l[2]=O,l[3]=oe,l[4]=ue,l[5]=q,l[6]=pe,l[7]=be,l[8]=ve,l[9]=we}finalize(){const{h:e,pad:t}=this,o=new Uint16Array(10);let c=e[1]>>>13;e[1]&=8191;for(let d=2;d<10;d++)e[d]+=c,c=e[d]>>>13,e[d]&=8191;e[0]+=c*5,c=e[0]>>>13,e[0]&=8191,e[1]+=c,c=e[1]>>>13,e[1]&=8191,e[2]+=c,o[0]=e[0]+5,c=o[0]>>>13,o[0]&=8191;for(let d=1;d<10;d++)o[d]=e[d]+c,c=o[d]>>>13,o[d]&=8191;o[9]-=8192;let l=(c^1)-1;for(let d=0;d<10;d++)o[d]&=l;l=~l;for(let d=0;d<10;d++)e[d]=e[d]&l|o[d];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let h=e[0]+t[0];e[0]=h&65535;for(let d=1;d<8;d++)h=(e[d]+t[d]|0)+(h>>>16)|0,e[d]=h&65535}update(e){assert$h.exists(this);const{buffer:t,blockLen:o}=this;e=toBytes$1(e);const c=e.length;for(let l=0;l<c;){const h=Math.min(o-this.pos,c-l);if(h===o){for(;o<=c-l;l+=o)this.process(e,l);continue}t.set(e.subarray(l,l+h),this.pos),this.pos+=h,l+=h,this.pos===o&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){assert$h.exists(this),assert$h.output(e,this),this.finished=!0;const{buffer:t,h:o}=this;let{pos:c}=this;if(c){for(t[c++]=1;c<16;c++)t[c]=0;this.process(t,0,!0)}this.finalize();let l=0;for(let h=0;h<8;h++)e[l++]=o[h]>>>0,e[l++]=o[h]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const o=e.slice(0,t);return this.destroy(),o}}function wrapConstructorWithKey(n){const e=(o,c)=>n(c).update(toBytes$1(o)).digest(),t=n(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=o=>n(o),e}const poly1305=wrapConstructorWithKey(n=>new Poly1305(n)),sigma16=utf8ToBytes$2("expand 16-byte k"),sigma32=utf8ToBytes$2("expand 32-byte k"),sigma16_32=u32(sigma16),sigma32_32=u32(sigma32),isAligned32=n=>!(n.byteOffset%4),salsaBasic=n=>{const{core:e,rounds:t,counterRight:o,counterLen:c,allow128bitKeys:l,extendNonceFn:h,blockLen:d}=checkOpts({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},n);assert$h.number(c),assert$h.number(t),assert$h.number(d),assert$h.bool(o),assert$h.bool(l);const g=d/4;if(d%4!==0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(m,v,_,p,a=0)=>{if(assert$h.bytes(m),assert$h.bytes(v),assert$h.bytes(_),p||(p=new Uint8Array(_.length)),assert$h.bytes(p),assert$h.number(a),a<0||a>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(p.length<_.length)throw new Error(`Salsa/ChaCha: output (${p.length}) is shorter than data (${_.length})`);const u=[];let y,b;if(m.length===32)isAligned32(m)?y=m:(y=m.slice(),u.push(y)),b=sigma32_32;else if(m.length===16&&l)y=new Uint8Array(32),y.set(m),y.set(m,16),b=sigma16_32,u.push(y);else throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${m.length}`);if(isAligned32(v)||(v=v.slice(),u.push(v)),h){if(v.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");y=h(b,y,v.subarray(0,16),new Uint8Array(32)),u.push(y),v=v.subarray(16)}const w=16-c;if(v.length!==w)throw new Error(`Salsa/ChaCha: nonce must be ${w} or 16 bytes`);if(w!==12){const se=new Uint8Array(12);se.set(v,o?0:12-v.length),u.push(v=se)}const T=new Uint8Array(d),B=u32(T),H=u32(y),J=u32(v),W=isAligned32(_)&&u32(_),fe=isAligned32(p)&&u32(p);u.push(B);const re=_.length;for(let se=0,ae=a;se<re;ae++){if(e(b,H,J,B,ae,t),ae>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const ee=Math.min(d,re-se);if(ee===d&&fe&&W){const P=se/4;if(se%4!==0)throw new Error("Salsa/ChaCha: invalid block position");for(let C=0;C<g;C++)fe[P+C]=W[P+C]^B[C];se+=d;continue}for(let P=0;P<ee;P++)p[se+P]=_[se+P]^T[P];se+=ee}for(let se=0;se<u.length;se++)u[se].fill(0);return p}},rotl=(n,e)=>n<<e|n>>>32-e;function chachaCore(n,e,t,o,c,l=20){let h=n[0],d=n[1],g=n[2],m=n[3],v=e[0],_=e[1],p=e[2],a=e[3],u=e[4],y=e[5],b=e[6],w=e[7],T=c,B=t[0],H=t[1],J=t[2],W=h,fe=d,re=g,se=m,ae=v,ee=_,P=p,C=a,E=u,k=y,F=b,j=w,Q=T,G=B,U=H,$=J;for(let oe=0;oe<l;oe+=2)W=W+ae|0,Q=rotl(Q^W,16),E=E+Q|0,ae=rotl(ae^E,12),W=W+ae|0,Q=rotl(Q^W,8),E=E+Q|0,ae=rotl(ae^E,7),fe=fe+ee|0,G=rotl(G^fe,16),k=k+G|0,ee=rotl(ee^k,12),fe=fe+ee|0,G=rotl(G^fe,8),k=k+G|0,ee=rotl(ee^k,7),re=re+P|0,U=rotl(U^re,16),F=F+U|0,P=rotl(P^F,12),re=re+P|0,U=rotl(U^re,8),F=F+U|0,P=rotl(P^F,7),se=se+C|0,$=rotl($^se,16),j=j+$|0,C=rotl(C^j,12),se=se+C|0,$=rotl($^se,8),j=j+$|0,C=rotl(C^j,7),W=W+ee|0,$=rotl($^W,16),F=F+$|0,ee=rotl(ee^F,12),W=W+ee|0,$=rotl($^W,8),F=F+$|0,ee=rotl(ee^F,7),fe=fe+P|0,Q=rotl(Q^fe,16),j=j+Q|0,P=rotl(P^j,12),fe=fe+P|0,Q=rotl(Q^fe,8),j=j+Q|0,P=rotl(P^j,7),re=re+C|0,G=rotl(G^re,16),E=E+G|0,C=rotl(C^E,12),re=re+C|0,G=rotl(G^re,8),E=E+G|0,C=rotl(C^E,7),se=se+ae|0,U=rotl(U^se,16),k=k+U|0,ae=rotl(ae^k,12),se=se+ae|0,U=rotl(U^se,8),k=k+U|0,ae=rotl(ae^k,7);let O=0;o[O++]=h+W|0,o[O++]=d+fe|0,o[O++]=g+re|0,o[O++]=m+se|0,o[O++]=v+ae|0,o[O++]=_+ee|0,o[O++]=p+P|0,o[O++]=a+C|0,o[O++]=u+E|0,o[O++]=y+k|0,o[O++]=b+F|0,o[O++]=w+j|0,o[O++]=T+Q|0,o[O++]=B+G|0,o[O++]=H+U|0,o[O++]=J+$|0}const chacha20=salsaBasic({core:chachaCore,counterRight:!1,counterLen:4,allow128bitKeys:!1}),ZERO$1=new Uint8Array(16),updatePadded=(n,e)=>{n.update(e);const t=e.length%16;t&&n.update(ZERO$1.subarray(t))},computeTag=(n,e,t,o,c)=>{const l=n(e,t,new Uint8Array(32)),h=poly1305.create(l);c&&updatePadded(h,c),updatePadded(h,o);const d=new Uint8Array(16),g=createView$1(d);setBigUint64$1(g,0,BigInt(c?c.length:0),!0),setBigUint64$1(g,8,BigInt(o.length),!0),h.update(d);const m=h.digest();return l.fill(0),m},_poly1305_aead=n=>(e,t,o)=>(ensureBytes$1(e,32),ensureBytes$1(t),{tagLength:16,encrypt:(l,h)=>{const d=l.length,g=d+16;h?ensureBytes$1(h,g):h=new Uint8Array(g),n(e,t,l,h,1);const m=computeTag(n,e,t,h.subarray(0,-16),o);return h.set(m,d),h},decrypt:(l,h)=>{const d=l.length,g=d-16;if(d<16)throw new Error("encrypted data must be at least 16 bytes");h?ensureBytes$1(h,g):h=new Uint8Array(g);const m=l.subarray(0,-16),v=l.subarray(-16),_=computeTag(n,e,t,m,o);if(!equalBytes$1(v,_))throw new Error("invalid tag");return n(e,t,m,h,1),h}}),chacha20poly1305=_poly1305_aead(chacha20);function number$1(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function bytes$1(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function hash$6(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$1(n.outputLen),number$1(n.blockLen)}function exists(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function output(n,e){bytes$1(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const crypto$5=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a$1=n=>n instanceof Uint8Array,createView=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),rotr=(n,e)=>n<<32-e|n>>>e,isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$1(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function toBytes(n){if(typeof n=="string"&&(n=utf8ToBytes$1(n)),!u8a$1(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function concatBytes$1(...n){const e=new Uint8Array(n.reduce((o,c)=>o+c.length,0));let t=0;return n.forEach(o=>{if(!u8a$1(o))throw new Error("Uint8Array expected");e.set(o,t),t+=o.length}),e}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(n){const e=o=>n().update(toBytes(o)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function randomBytes$3(n=32){if(crypto$5&&typeof crypto$5.getRandomValues=="function")return crypto$5.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64(n,e,t,o){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,o);const c=BigInt(32),l=BigInt(4294967295),h=Number(t>>c&l),d=Number(t&l),g=o?4:0,m=o?0:4;n.setUint32(e+g,h,o),n.setUint32(e+m,d,o)}class SHA2 extends Hash{constructor(e,t,o,c){super(),this.blockLen=e,this.outputLen=t,this.padOffset=o,this.isLE=c,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){exists(this);const{view:t,buffer:o,blockLen:c}=this;e=toBytes(e);const l=e.length;for(let h=0;h<l;){const d=Math.min(c-this.pos,l-h);if(d===c){const g=createView(e);for(;c<=l-h;h+=c)this.process(g,h);continue}o.set(e.subarray(h,h+d),this.pos),this.pos+=d,h+=d,this.pos===c&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){exists(this),output(e,this),this.finished=!0;const{buffer:t,view:o,blockLen:c,isLE:l}=this;let{pos:h}=this;t[h++]=128,this.buffer.subarray(h).fill(0),this.padOffset>c-h&&(this.process(o,0),h=0);for(let _=h;_<c;_++)t[_]=0;setBigUint64(o,c-8,BigInt(this.length*8),l),this.process(o,0);const d=createView(e),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=g/4,v=this.get();if(m>v.length)throw new Error("_sha2: outputLen bigger than state");for(let _=0;_<m;_++)d.setUint32(4*_,v[_],l)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const o=e.slice(0,t);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:o,length:c,finished:l,destroyed:h,pos:d}=this;return e.length=c,e.pos=d,e.finished=l,e.destroyed=h,c%t&&e.buffer.set(o),e}}const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(n,e=!1){return e?{h:Number(n&U32_MASK64),l:Number(n>>_32n&U32_MASK64)}:{h:Number(n>>_32n&U32_MASK64)|0,l:Number(n&U32_MASK64)|0}}function split(n,e=!1){let t=new Uint32Array(n.length),o=new Uint32Array(n.length);for(let c=0;c<n.length;c++){const{h:l,l:h}=fromBig(n[c],e);[t[c],o[c]]=[l,h]}return[t,o]}const toBig=(n,e)=>BigInt(n>>>0)<<_32n|BigInt(e>>>0),shrSH=(n,e,t)=>n>>>t,shrSL=(n,e,t)=>n<<32-t|e>>>t,rotrSH=(n,e,t)=>n>>>t|e<<32-t,rotrSL=(n,e,t)=>n<<32-t|e>>>t,rotrBH=(n,e,t)=>n<<64-t|e>>>t-32,rotrBL=(n,e,t)=>n>>>t-32|e<<64-t,rotr32H=(n,e)=>e,rotr32L=(n,e)=>n,rotlSH=(n,e,t)=>n<<t|e>>>32-t,rotlSL=(n,e,t)=>e<<t|n>>>32-t,rotlBH=(n,e,t)=>e<<t-32|n>>>64-t,rotlBL=(n,e,t)=>n<<t-32|e>>>64-t;function add$1(n,e,t,o){const c=(e>>>0)+(o>>>0);return{h:n+t+(c/2**32|0)|0,l:c|0}}const add3L=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),add3H=(n,e,t,o)=>e+t+o+(n/2**32|0)|0,add4L=(n,e,t,o)=>(n>>>0)+(e>>>0)+(t>>>0)+(o>>>0),add4H=(n,e,t,o,c)=>e+t+o+c+(n/2**32|0)|0,add5L=(n,e,t,o,c)=>(n>>>0)+(e>>>0)+(t>>>0)+(o>>>0)+(c>>>0),add5H=(n,e,t,o,c,l)=>e+t+o+c+l+(n/2**32|0)|0,u64={fromBig,split,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add:add$1,add3L,add3H,add4L,add4H,add5H,add5L},u64$1=u64,[SHA512_Kh,SHA512_Kl]=(()=>u64$1.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);let SHA512$2=class extends SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:o,Bl:c,Ch:l,Cl:h,Dh:d,Dl:g,Eh:m,El:v,Fh:_,Fl:p,Gh:a,Gl:u,Hh:y,Hl:b}=this;return[e,t,o,c,l,h,d,g,m,v,_,p,a,u,y,b]}set(e,t,o,c,l,h,d,g,m,v,_,p,a,u,y,b){this.Ah=e|0,this.Al=t|0,this.Bh=o|0,this.Bl=c|0,this.Ch=l|0,this.Cl=h|0,this.Dh=d|0,this.Dl=g|0,this.Eh=m|0,this.El=v|0,this.Fh=_|0,this.Fl=p|0,this.Gh=a|0,this.Gl=u|0,this.Hh=y|0,this.Hl=b|0}process(e,t){for(let B=0;B<16;B++,t+=4)SHA512_W_H[B]=e.getUint32(t),SHA512_W_L[B]=e.getUint32(t+=4);for(let B=16;B<80;B++){const H=SHA512_W_H[B-15]|0,J=SHA512_W_L[B-15]|0,W=u64$1.rotrSH(H,J,1)^u64$1.rotrSH(H,J,8)^u64$1.shrSH(H,J,7),fe=u64$1.rotrSL(H,J,1)^u64$1.rotrSL(H,J,8)^u64$1.shrSL(H,J,7),re=SHA512_W_H[B-2]|0,se=SHA512_W_L[B-2]|0,ae=u64$1.rotrSH(re,se,19)^u64$1.rotrBH(re,se,61)^u64$1.shrSH(re,se,6),ee=u64$1.rotrSL(re,se,19)^u64$1.rotrBL(re,se,61)^u64$1.shrSL(re,se,6),P=u64$1.add4L(fe,ee,SHA512_W_L[B-7],SHA512_W_L[B-16]),C=u64$1.add4H(P,W,ae,SHA512_W_H[B-7],SHA512_W_H[B-16]);SHA512_W_H[B]=C|0,SHA512_W_L[B]=P|0}let{Ah:o,Al:c,Bh:l,Bl:h,Ch:d,Cl:g,Dh:m,Dl:v,Eh:_,El:p,Fh:a,Fl:u,Gh:y,Gl:b,Hh:w,Hl:T}=this;for(let B=0;B<80;B++){const H=u64$1.rotrSH(_,p,14)^u64$1.rotrSH(_,p,18)^u64$1.rotrBH(_,p,41),J=u64$1.rotrSL(_,p,14)^u64$1.rotrSL(_,p,18)^u64$1.rotrBL(_,p,41),W=_&a^~_&y,fe=p&u^~p&b,re=u64$1.add5L(T,J,fe,SHA512_Kl[B],SHA512_W_L[B]),se=u64$1.add5H(re,w,H,W,SHA512_Kh[B],SHA512_W_H[B]),ae=re|0,ee=u64$1.rotrSH(o,c,28)^u64$1.rotrBH(o,c,34)^u64$1.rotrBH(o,c,39),P=u64$1.rotrSL(o,c,28)^u64$1.rotrBL(o,c,34)^u64$1.rotrBL(o,c,39),C=o&l^o&d^l&d,E=c&h^c&g^h&g;w=y|0,T=b|0,y=a|0,b=u|0,a=_|0,u=p|0,{h:_,l:p}=u64$1.add(m|0,v|0,se|0,ae|0),m=d|0,v=g|0,d=l|0,g=h|0,l=o|0,h=c|0;const k=u64$1.add3L(ae,P,E);o=u64$1.add3H(k,se,ee,C),c=k|0}({h:o,l:c}=u64$1.add(this.Ah|0,this.Al|0,o|0,c|0)),{h:l,l:h}=u64$1.add(this.Bh|0,this.Bl|0,l|0,h|0),{h:d,l:g}=u64$1.add(this.Ch|0,this.Cl|0,d|0,g|0),{h:m,l:v}=u64$1.add(this.Dh|0,this.Dl|0,m|0,v|0),{h:_,l:p}=u64$1.add(this.Eh|0,this.El|0,_|0,p|0),{h:a,l:u}=u64$1.add(this.Fh|0,this.Fl|0,a|0,u|0),{h:y,l:b}=u64$1.add(this.Gh|0,this.Gl|0,y|0,b|0),{h:w,l:T}=u64$1.add(this.Hh|0,this.Hl|0,w|0,T|0),this.set(o,c,l,h,d,g,m,v,_,p,a,u,y,b,w,T)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const sha512$3=wrapConstructor(()=>new SHA512$2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$5=BigInt(0),_1n$7=BigInt(1),_2n$4=BigInt(2),u8a=n=>n instanceof Uint8Array,hexes=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function bytesToHex(n){if(!u8a(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=hexes[n[t]];return e}function numberToHexUnpadded(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function hexToNumber(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function hexToBytes(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let o=0;o<t.length;o++){const c=o*2,l=n.slice(c,c+2),h=Number.parseInt(l,16);if(Number.isNaN(h)||h<0)throw new Error("Invalid byte sequence");t[o]=h}return t}function bytesToNumberBE(n){return hexToNumber(bytesToHex(n))}function bytesToNumberLE(n){if(!u8a(n))throw new Error("Uint8Array expected");return hexToNumber(bytesToHex(Uint8Array.from(n).reverse()))}function numberToBytesBE(n,e){return hexToBytes(n.toString(16).padStart(e*2,"0"))}function numberToBytesLE(n,e){return numberToBytesBE(n,e).reverse()}function numberToVarBytesBE(n){return hexToBytes(numberToHexUnpadded(n))}function ensureBytes(n,e,t){let o;if(typeof e=="string")try{o=hexToBytes(e)}catch(l){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${l}`)}else if(u8a(e))o=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const c=o.length;if(typeof t=="number"&&c!==t)throw new Error(`${n} expected ${t} bytes, got ${c}`);return o}function concatBytes(...n){const e=new Uint8Array(n.reduce((o,c)=>o+c.length,0));let t=0;return n.forEach(o=>{if(!u8a(o))throw new Error("Uint8Array expected");e.set(o,t),t+=o.length}),e}function equalBytes(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function utf8ToBytes(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function bitLen(n){let e;for(e=0;n>_0n$5;n>>=_1n$7,e+=1);return e}function bitGet(n,e){return n>>BigInt(e)&_1n$7}const bitSet=(n,e,t)=>n|(t?_1n$7:_0n$5)<<BigInt(e),bitMask=n=>(_2n$4<<BigInt(n-1))-_1n$7,u8n=n=>new Uint8Array(n),u8fr=n=>Uint8Array.from(n);function createHmacDrbg(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let o=u8n(n),c=u8n(n),l=0;const h=()=>{o.fill(1),c.fill(0),l=0},d=(..._)=>t(c,o,..._),g=(_=u8n())=>{c=d(u8fr([0]),_),o=d(),_.length!==0&&(c=d(u8fr([1]),_),o=d())},m=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let _=0;const p=[];for(;_<e;){o=d();const a=o.slice();p.push(a),_+=o.length}return concatBytes(...p)};return(_,p)=>{h(),g(_);let a;for(;!(a=p(m()));)g();return h(),a}}const validatorFns={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function validateObject(n,e,t={}){const o=(c,l,h)=>{const d=validatorFns[l];if(typeof d!="function")throw new Error(`Invalid validator "${l}", expected function`);const g=n[c];if(!(h&&g===void 0)&&!d(g,n))throw new Error(`Invalid param ${String(c)}=${g} (${typeof g}), expected ${l}`)};for(const[c,l]of Object.entries(e))o(c,l,!1);for(const[c,l]of Object.entries(t))o(c,l,!0);return n}const ut=Object.freeze(Object.defineProperty({__proto__:null,bitGet,bitLen,bitMask,bitSet,bytesToHex,bytesToNumberBE,bytesToNumberLE,concatBytes,createHmacDrbg,ensureBytes,equalBytes,hexToBytes,hexToNumber,numberToBytesBE,numberToBytesLE,numberToHexUnpadded,numberToVarBytesBE,utf8ToBytes,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$6=BigInt(1),_2n$3=BigInt(2),_3n$1=BigInt(3),_4n=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod(n,e){const t=n%e;return t>=_0n$4?t:e+t}function pow(n,e,t){if(t<=_0n$4||e<_0n$4)throw new Error("Expected power/modulo > 0");if(t===_1n$6)return _0n$4;let o=_1n$6;for(;e>_0n$4;)e&_1n$6&&(o=o*n%t),n=n*n%t,e>>=_1n$6;return o}function pow2(n,e,t){let o=n;for(;e-- >_0n$4;)o*=o,o%=t;return o}function invert(n,e){if(n===_0n$4||e<=_0n$4)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=mod(n,e),o=e,c=_0n$4,l=_1n$6;for(;t!==_0n$4;){const d=o/t,g=o%t,m=c-l*d;o=t,t=g,c=l,l=m}if(o!==_1n$6)throw new Error("invert: does not exist");return mod(c,e)}function tonelliShanks(n){const e=(n-_1n$6)/_2n$3;let t,o,c;for(t=n-_1n$6,o=0;t%_2n$3===_0n$4;t/=_2n$3,o++);for(c=_2n$3;c<n&&pow(c,e,n)!==n-_1n$6;c++);if(o===1){const h=(n+_1n$6)/_4n;return function(g,m){const v=g.pow(m,h);if(!g.eql(g.sqr(v),m))throw new Error("Cannot find square root");return v}}const l=(t+_1n$6)/_2n$3;return function(d,g){if(d.pow(g,e)===d.neg(d.ONE))throw new Error("Cannot find square root");let m=o,v=d.pow(d.mul(d.ONE,c),t),_=d.pow(g,l),p=d.pow(g,t);for(;!d.eql(p,d.ONE);){if(d.eql(p,d.ZERO))return d.ZERO;let a=1;for(let y=d.sqr(p);a<m&&!d.eql(y,d.ONE);a++)y=d.sqr(y);const u=d.pow(v,_1n$6<<BigInt(m-a-1));v=d.sqr(u),_=d.mul(_,u),p=d.mul(p,v),m=a}return _}}function FpSqrt(n){if(n%_4n===_3n$1){const e=(n+_1n$6)/_4n;return function(o,c){const l=o.pow(c,e);if(!o.eql(o.sqr(l),c))throw new Error("Cannot find square root");return l}}if(n%_8n$1===_5n$1){const e=(n-_5n$1)/_8n$1;return function(o,c){const l=o.mul(c,_2n$3),h=o.pow(l,e),d=o.mul(c,h),g=o.mul(o.mul(d,_2n$3),h),m=o.mul(d,o.sub(g,o.ONE));if(!o.eql(o.sqr(m),c))throw new Error("Cannot find square root");return m}}return tonelliShanks(n)}const isNegativeLE=(n,e)=>(mod(n,e)&_1n$6)===_1n$6,FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=FIELD_FIELDS.reduce((o,c)=>(o[c]="function",o),e);return validateObject(n,t)}function FpPow(n,e,t){if(t<_0n$4)throw new Error("Expected power > 0");if(t===_0n$4)return n.ONE;if(t===_1n$6)return e;let o=n.ONE,c=e;for(;t>_0n$4;)t&_1n$6&&(o=n.mul(o,c)),c=n.sqr(c),t>>=_1n$6;return o}function FpInvertBatch(n,e){const t=new Array(e.length),o=e.reduce((l,h,d)=>n.is0(h)?l:(t[d]=l,n.mul(l,h)),n.ONE),c=n.inv(o);return e.reduceRight((l,h,d)=>n.is0(h)?l:(t[d]=n.mul(l,t[d]),n.mul(l,h)),c),t}function nLength(n,e){const t=e!==void 0?e:n.toString(2).length,o=Math.ceil(t/8);return{nBitLength:t,nByteLength:o}}function Field(n,e,t=!1,o={}){if(n<=_0n$4)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:c,nByteLength:l}=nLength(n,e);if(l>2048)throw new Error("Field lengths over 2048 bytes are not supported");const h=FpSqrt(n),d=Object.freeze({ORDER:n,BITS:c,BYTES:l,MASK:bitMask(c),ZERO:_0n$4,ONE:_1n$6,create:g=>mod(g,n),isValid:g=>{if(typeof g!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof g}`);return _0n$4<=g&&g<n},is0:g=>g===_0n$4,isOdd:g=>(g&_1n$6)===_1n$6,neg:g=>mod(-g,n),eql:(g,m)=>g===m,sqr:g=>mod(g*g,n),add:(g,m)=>mod(g+m,n),sub:(g,m)=>mod(g-m,n),mul:(g,m)=>mod(g*m,n),pow:(g,m)=>FpPow(d,g,m),div:(g,m)=>mod(g*invert(m,n),n),sqrN:g=>g*g,addN:(g,m)=>g+m,subN:(g,m)=>g-m,mulN:(g,m)=>g*m,inv:g=>invert(g,n),sqrt:o.sqrt||(g=>h(d,g)),invertBatch:g=>FpInvertBatch(d,g),cmov:(g,m,v)=>v?m:g,toBytes:g=>t?numberToBytesLE(g,l):numberToBytesBE(g,l),fromBytes:g=>{if(g.length!==l)throw new Error(`Fp.fromBytes: expected ${l}, got ${g.length}`);return t?bytesToNumberLE(g):bytesToNumberBE(g)}});return Object.freeze(d)}function FpSqrtEven(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");const t=n.sqrt(e);return n.isOdd(t)?n.neg(t):t}function getFieldBytesLength(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function getMinHashLength(n){const e=getFieldBytesLength(n);return e+Math.ceil(e/2)}function mapHashToField(n,e,t=!1){const o=n.length,c=getFieldBytesLength(e),l=getMinHashLength(e);if(o<16||o<l||o>1024)throw new Error(`expected ${l}-1024 bytes of input, got ${o}`);const h=t?bytesToNumberBE(n):bytesToNumberLE(n),d=mod(h,e-_1n$6)+_1n$6;return t?numberToBytesLE(d,c):numberToBytesBE(d,c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$5=BigInt(1);function wNAF(n,e){const t=(c,l)=>{const h=l.negate();return c?h:l},o=c=>{const l=Math.ceil(e/c)+1,h=2**(c-1);return{windows:l,windowSize:h}};return{constTimeNegate:t,unsafeLadder(c,l){let h=n.ZERO,d=c;for(;l>_0n$3;)l&_1n$5&&(h=h.add(d)),d=d.double(),l>>=_1n$5;return h},precomputeWindow(c,l){const{windows:h,windowSize:d}=o(l),g=[];let m=c,v=m;for(let _=0;_<h;_++){v=m,g.push(v);for(let p=1;p<d;p++)v=v.add(m),g.push(v);m=v.double()}return g},wNAF(c,l,h){const{windows:d,windowSize:g}=o(c);let m=n.ZERO,v=n.BASE;const _=BigInt(2**c-1),p=2**c,a=BigInt(c);for(let u=0;u<d;u++){const y=u*g;let b=Number(h&_);h>>=a,b>g&&(b-=p,h+=_1n$5);const w=y,T=y+Math.abs(b)-1,B=u%2!==0,H=b<0;b===0?v=v.add(t(B,l[w])):m=m.add(t(H,l[T]))}return{p:m,f:v}},wNAFCached(c,l,h,d){const g=c._WINDOW_SIZE||1;let m=l.get(c);return m||(m=this.precomputeWindow(c,g),g!==1&&l.set(c,d(m))),this.wNAF(g,m,h)}}}function validateBasic(n){return validateField(n.Fp),validateObject(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$4=BigInt(1),_2n$2=BigInt(2),_8n=BigInt(8),VERIFY_DEFAULT={zip215:!0};function validateOpts$2(n){const e=validateBasic(n);return validateObject(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function twistedEdwards(n){const e=validateOpts$2(n),{Fp:t,n:o,prehash:c,hash:l,randomBytes:h,nByteLength:d,h:g}=e,m=_2n$2<<BigInt(d*8)-_1n$4,v=t.create,_=e.uvRatio||((Q,G)=>{try{return{isValid:!0,value:t.sqrt(Q*t.inv(G))}}catch{return{isValid:!1,value:_0n$2}}}),p=e.adjustScalarBytes||(Q=>Q),a=e.domain||((Q,G,U)=>{if(G.length||U)throw new Error("Contexts/pre-hash are not supported");return Q}),u=Q=>typeof Q=="bigint"&&_0n$2<Q,y=(Q,G)=>u(Q)&&u(G)&&Q<G,b=Q=>Q===_0n$2||y(Q,m);function w(Q,G){if(y(Q,G))return Q;throw new Error(`Expected valid scalar < ${G}, got ${typeof Q} ${Q}`)}function T(Q){return Q===_0n$2?Q:w(Q,o)}const B=new Map;function H(Q){if(!(Q instanceof J))throw new Error("ExtendedPoint expected")}class J{constructor(G,U,$,O){if(this.ex=G,this.ey=U,this.ez=$,this.et=O,!b(G))throw new Error("x required");if(!b(U))throw new Error("y required");if(!b($))throw new Error("z required");if(!b(O))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(G){if(G instanceof J)throw new Error("extended point not allowed");const{x:U,y:$}=G||{};if(!b(U)||!b($))throw new Error("invalid affine point");return new J(U,$,_1n$4,v(U*$))}static normalizeZ(G){const U=t.invertBatch(G.map($=>$.ez));return G.map(($,O)=>$.toAffine(U[O])).map(J.fromAffine)}_setWindowSize(G){this._WINDOW_SIZE=G,B.delete(this)}assertValidity(){const{a:G,d:U}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:$,ey:O,ez:oe,et:ue}=this,q=v($*$),pe=v(O*O),be=v(oe*oe),ve=v(be*be),we=v(q*G),Ce=v(be*v(we+pe)),Re=v(ve+v(U*v(q*pe)));if(Ce!==Re)throw new Error("bad point: equation left != right (1)");const Se=v($*O),$e=v(oe*ue);if(Se!==$e)throw new Error("bad point: equation left != right (2)")}equals(G){H(G);const{ex:U,ey:$,ez:O}=this,{ex:oe,ey:ue,ez:q}=G,pe=v(U*q),be=v(oe*O),ve=v($*q),we=v(ue*O);return pe===be&&ve===we}is0(){return this.equals(J.ZERO)}negate(){return new J(v(-this.ex),this.ey,this.ez,v(-this.et))}double(){const{a:G}=e,{ex:U,ey:$,ez:O}=this,oe=v(U*U),ue=v($*$),q=v(_2n$2*v(O*O)),pe=v(G*oe),be=U+$,ve=v(v(be*be)-oe-ue),we=pe+ue,Ce=we-q,Re=pe-ue,Se=v(ve*Ce),$e=v(we*Re),De=v(ve*Re),Ne=v(Ce*we);return new J(Se,$e,Ne,De)}add(G){H(G);const{a:U,d:$}=e,{ex:O,ey:oe,ez:ue,et:q}=this,{ex:pe,ey:be,ez:ve,et:we}=G;if(U===BigInt(-1)){const et=v((oe-O)*(be+pe)),at=v((oe+O)*(be-pe)),Ye=v(at-et);if(Ye===_0n$2)return this.double();const lt=v(ue*_2n$2*we),dt=v(q*_2n$2*ve),le=dt+lt,ne=at+et,ie=dt-lt,ge=v(le*Ye),_e=v(ne*ie),Ee=v(le*ie),Te=v(Ye*ne);return new J(ge,_e,Te,Ee)}const Ce=v(O*pe),Re=v(oe*be),Se=v(q*$*we),$e=v(ue*ve),De=v((O+oe)*(pe+be)-Ce-Re),Ne=$e-Se,pt=$e+Se,xt=v(Re-U*Ce),Xe=v(De*Ne),yt=v(pt*xt),gt=v(De*xt),ze=v(Ne*pt);return new J(Xe,yt,ze,gt)}subtract(G){return this.add(G.negate())}wNAF(G){return re.wNAFCached(this,B,G,J.normalizeZ)}multiply(G){const{p:U,f:$}=this.wNAF(w(G,o));return J.normalizeZ([U,$])[0]}multiplyUnsafe(G){let U=T(G);return U===_0n$2?fe:this.equals(fe)||U===_1n$4?this:this.equals(W)?this.wNAF(U).p:re.unsafeLadder(this,U)}isSmallOrder(){return this.multiplyUnsafe(g).is0()}isTorsionFree(){return re.unsafeLadder(this,o).is0()}toAffine(G){const{ex:U,ey:$,ez:O}=this,oe=this.is0();G==null&&(G=oe?_8n:t.inv(O));const ue=v(U*G),q=v($*G),pe=v(O*G);if(oe)return{x:_0n$2,y:_1n$4};if(pe!==_1n$4)throw new Error("invZ was invalid");return{x:ue,y:q}}clearCofactor(){const{h:G}=e;return G===_1n$4?this:this.multiplyUnsafe(G)}static fromHex(G,U=!1){const{d:$,a:O}=e,oe=t.BYTES;G=ensureBytes("pointHex",G,oe);const ue=G.slice(),q=G[oe-1];ue[oe-1]=q&-129;const pe=bytesToNumberLE(ue);pe===_0n$2||(U?w(pe,m):w(pe,t.ORDER));const be=v(pe*pe),ve=v(be-_1n$4),we=v($*be-O);let{isValid:Ce,value:Re}=_(ve,we);if(!Ce)throw new Error("Point.fromHex: invalid y coordinate");const Se=(Re&_1n$4)===_1n$4,$e=(q&128)!==0;if(!U&&Re===_0n$2&&$e)throw new Error("Point.fromHex: x=0 and x_0=1");return $e!==Se&&(Re=v(-Re)),J.fromAffine({x:Re,y:pe})}static fromPrivateKey(G){return ee(G).point}toRawBytes(){const{x:G,y:U}=this.toAffine(),$=numberToBytesLE(U,t.BYTES);return $[$.length-1]|=G&_1n$4?128:0,$}toHex(){return bytesToHex(this.toRawBytes())}}J.BASE=new J(e.Gx,e.Gy,_1n$4,v(e.Gx*e.Gy)),J.ZERO=new J(_0n$2,_1n$4,_1n$4,_0n$2);const{BASE:W,ZERO:fe}=J,re=wNAF(J,d*8);function se(Q){return mod(Q,o)}function ae(Q){return se(bytesToNumberLE(Q))}function ee(Q){const G=d;Q=ensureBytes("private key",Q,G);const U=ensureBytes("hashed private key",l(Q),2*G),$=p(U.slice(0,G)),O=U.slice(G,2*G),oe=ae($),ue=W.multiply(oe),q=ue.toRawBytes();return{head:$,prefix:O,scalar:oe,point:ue,pointBytes:q}}function P(Q){return ee(Q).pointBytes}function C(Q=new Uint8Array,...G){const U=concatBytes(...G);return ae(l(a(U,ensureBytes("context",Q),!!c)))}function E(Q,G,U={}){Q=ensureBytes("message",Q),c&&(Q=c(Q));const{prefix:$,scalar:O,pointBytes:oe}=ee(G),ue=C(U.context,$,Q),q=W.multiply(ue).toRawBytes(),pe=C(U.context,q,oe,Q),be=se(ue+pe*O);T(be);const ve=concatBytes(q,numberToBytesLE(be,t.BYTES));return ensureBytes("result",ve,d*2)}const k=VERIFY_DEFAULT;function F(Q,G,U,$=k){const{context:O,zip215:oe}=$,ue=t.BYTES;Q=ensureBytes("signature",Q,2*ue),G=ensureBytes("message",G),c&&(G=c(G));const q=bytesToNumberLE(Q.slice(ue,2*ue));let pe,be,ve;try{pe=J.fromHex(U,oe),be=J.fromHex(Q.slice(0,ue),oe),ve=W.multiplyUnsafe(q)}catch{return!1}if(!oe&&pe.isSmallOrder())return!1;const we=C(O,be.toRawBytes(),pe.toRawBytes(),G);return be.add(pe.multiplyUnsafe(we)).subtract(ve).clearCofactor().equals(J.ZERO)}return W._setWindowSize(8),{CURVE:e,getPublicKey:P,sign:E,verify:F,ExtendedPoint:J,utils:{getExtendedPublicKey:ee,randomPrivateKey:()=>h(t.BYTES),precompute(Q=8,G=J.BASE){return G._setWindowSize(Q),G.multiply(BigInt(3)),G}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$3=BigInt(1);function validateOpts$1(n){return validateObject(n,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...n})}function montgomery(n){const e=validateOpts$1(n),{P:t}=e,o=B=>mod(B,t),c=e.montgomeryBits,l=Math.ceil(c/8),h=e.nByteLength,d=e.adjustScalarBytes||(B=>B),g=e.powPminus2||(B=>pow(B,t-BigInt(2),t));function m(B,H,J){const W=o(B*(H-J));return H=o(H-W),J=o(J+W),[H,J]}function v(B){if(typeof B=="bigint"&&_0n$1<=B&&B<t)return B;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const _=(e.a-BigInt(2))/BigInt(4);function p(B,H){const J=v(B),W=v(H),fe=J;let re=_1n$3,se=_0n$1,ae=J,ee=_1n$3,P=_0n$1,C;for(let k=BigInt(c-1);k>=_0n$1;k--){const F=W>>k&_1n$3;P^=F,C=m(P,re,ae),re=C[0],ae=C[1],C=m(P,se,ee),se=C[0],ee=C[1],P=F;const j=re+se,Q=o(j*j),G=re-se,U=o(G*G),$=Q-U,O=ae+ee,oe=ae-ee,ue=o(oe*j),q=o(O*G),pe=ue+q,be=ue-q;ae=o(pe*pe),ee=o(fe*o(be*be)),re=o(Q*U),se=o($*(Q+o(_*$)))}C=m(P,re,ae),re=C[0],ae=C[1],C=m(P,se,ee),se=C[0],ee=C[1];const E=g(se);return o(re*E)}function a(B){return numberToBytesLE(o(B),l)}function u(B){const H=ensureBytes("u coordinate",B,l);return h===l&&(H[h-1]&=127),bytesToNumberLE(H)}function y(B){const H=ensureBytes("scalar",B);if(H.length!==l&&H.length!==h)throw new Error(`Expected ${l} or ${h} bytes, got ${H.length}`);return bytesToNumberLE(d(H))}function b(B,H){const J=u(H),W=y(B),fe=p(J,W);if(fe===_0n$1)throw new Error("Invalid private or public key received");return a(fe)}const w=a(e.Gu);function T(B){return b(B,w)}return{scalarMult:b,scalarMultBase:T,getSharedSecret:(B,H)=>b(B,H),getPublicKey:B=>T(B),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _1n$2=BigInt(1),_2n$1=BigInt(2),_5n=BigInt(5),_10n=BigInt(10),_20n=BigInt(20),_40n=BigInt(40),_80n=BigInt(80);function ed25519_pow_2_252_3(n){const e=ED25519_P,o=n*n%e*n%e,c=pow2(o,_2n$1,e)*o%e,l=pow2(c,_1n$2,e)*n%e,h=pow2(l,_5n,e)*l%e,d=pow2(h,_10n,e)*h%e,g=pow2(d,_20n,e)*d%e,m=pow2(g,_40n,e)*g%e,v=pow2(m,_80n,e)*m%e,_=pow2(v,_80n,e)*m%e,p=pow2(_,_10n,e)*h%e;return{pow_p_5_8:pow2(p,_2n$1,e)*n%e,b2:o}}function adjustScalarBytes(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function uvRatio(n,e){const t=ED25519_P,o=mod(e*e*e,t),c=mod(o*o*e,t),l=ed25519_pow_2_252_3(n*c).pow_p_5_8;let h=mod(n*o*l,t);const d=mod(e*h*h,t),g=h,m=mod(h*ED25519_SQRT_M1,t),v=d===n,_=d===mod(-n,t),p=d===mod(-n*ED25519_SQRT_M1,t);return v&&(h=g),(_||p)&&(h=m),isNegativeLE(h,t)&&(h=mod(-h,t)),{isValid:v||_,value:h}}const Fp$1=Field(ED25519_P,void 0,!0),ed25519Defaults={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Fp$1,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512$3,randomBytes:randomBytes$3,adjustScalarBytes,uvRatio},ed25519$1=twistedEdwards(ed25519Defaults);function ed25519_domain(n,e,t){if(e.length>255)throw new Error("Context is too big");return concatBytes$1(utf8ToBytes$1("SigEd25519 no Ed25519 collisions"),new Uint8Array([t?1:0,e.length]),e,n)}({...ed25519Defaults});({...ed25519Defaults});const x25519=(()=>montgomery({P:ED25519_P,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:n=>{const e=ED25519_P,{pow_p_5_8:t,b2:o}=ed25519_pow_2_252_3(n);return mod(pow2(t,BigInt(3),e)*o,e)},adjustScalarBytes,randomBytes:randomBytes$3}))(),ELL2_C1=(Fp$1.ORDER+BigInt(3))/BigInt(8);Fp$1.pow(_2n$1,ELL2_C1);Fp$1.sqrt(Fp$1.neg(Fp$1.ONE));(Fp$1.ORDER-BigInt(5))/BigInt(8);BigInt(486662);FpSqrtEven(Fp$1,Fp$1.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class HMAC extends Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,hash$6(e);const o=toBytes(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,l=new Uint8Array(c);l.set(o.length>c?e.create().update(o).digest():o);for(let h=0;h<l.length;h++)l[h]^=54;this.iHash.update(l),this.oHash=e.create();for(let h=0;h<l.length;h++)l[h]^=106;this.oHash.update(l),l.fill(0)}update(e){return exists(this),this.iHash.update(e),this}digestInto(e){exists(this),bytes$1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:o,finished:c,destroyed:l,blockLen:h,outputLen:d}=this;return e=e,e.finished=c,e.destroyed=l,e.blockLen=h,e.outputLen=d,e.oHash=t._cloneInto(e.oHash),e.iHash=o._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac$3=(n,e,t)=>new HMAC(n,e).update(t).digest();hmac$3.create=(n,e)=>new HMAC(n,e);function extract(n,e,t){return hash$6(n),t===void 0&&(t=new Uint8Array(n.outputLen)),hmac$3(n,toBytes(t),toBytes(e))}const HKDF_COUNTER=new Uint8Array([0]),EMPTY_BUFFER$1=new Uint8Array;function expand(n,e,t,o=32){if(hash$6(n),number$1(o),o>255*n.outputLen)throw new Error("Length should be <= 255*HashLen");const c=Math.ceil(o/n.outputLen);t===void 0&&(t=EMPTY_BUFFER$1);const l=new Uint8Array(c*n.outputLen),h=hmac$3.create(n,e),d=h._cloneInto(),g=new Uint8Array(h.outputLen);for(let m=0;m<c;m++)HKDF_COUNTER[0]=m+1,d.update(m===0?EMPTY_BUFFER$1:g).update(t).update(HKDF_COUNTER).digestInto(g),l.set(g,n.outputLen*m),h._cloneInto(d);return h.destroy(),d.destroy(),g.fill(0),HKDF_COUNTER.fill(0),l.slice(0,o)}const Chi=(n,e,t)=>n&e^~n&t,Maj=(n,e,t)=>n&e^n&t^e&t,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);let SHA256$2=class extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:e,B:t,C:o,D:c,E:l,F:h,G:d,H:g}=this;return[e,t,o,c,l,h,d,g]}set(e,t,o,c,l,h,d,g){this.A=e|0,this.B=t|0,this.C=o|0,this.D=c|0,this.E=l|0,this.F=h|0,this.G=d|0,this.H=g|0}process(e,t){for(let _=0;_<16;_++,t+=4)SHA256_W[_]=e.getUint32(t,!1);for(let _=16;_<64;_++){const p=SHA256_W[_-15],a=SHA256_W[_-2],u=rotr(p,7)^rotr(p,18)^p>>>3,y=rotr(a,17)^rotr(a,19)^a>>>10;SHA256_W[_]=y+SHA256_W[_-7]+u+SHA256_W[_-16]|0}let{A:o,B:c,C:l,D:h,E:d,F:g,G:m,H:v}=this;for(let _=0;_<64;_++){const p=rotr(d,6)^rotr(d,11)^rotr(d,25),a=v+p+Chi(d,g,m)+SHA256_K[_]+SHA256_W[_]|0,y=(rotr(o,2)^rotr(o,13)^rotr(o,22))+Maj(o,c,l)|0;v=m,m=g,g=d,d=h+a|0,h=l,l=c,c=o,o=a+y|0}o=o+this.A|0,c=c+this.B|0,l=l+this.C|0,h=h+this.D|0,d=d+this.E|0,g=g+this.F|0,m=m+this.G|0,v=v+this.H|0,this.set(o,c,l,h,d,g,m,v)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const sha256$3=wrapConstructor(()=>new SHA256$2),pureJsCrypto={hashSHA256(n){return sha256$3(n)},getHKDF(n,e){const t=extract(sha256$3,e,n),c=expand(sha256$3,t,void 0,96),l=c.subarray(0,32),h=c.subarray(32,64),d=c.subarray(64,96);return[l,h,d]},generateX25519KeyPair(){const n=x25519.utils.randomPrivateKey();return{publicKey:x25519.getPublicKey(n),privateKey:n}},generateX25519KeyPairFromSeed(n){return{publicKey:x25519.getPublicKey(n),privateKey:n}},generateX25519SharedKey(n,e){return x25519.getSharedSecret(n,e)},chaCha20Poly1305Encrypt(n,e,t,o){return chacha20poly1305(o,e,t).encrypt(n)},chaCha20Poly1305Decrypt(n,e,t,o,c){return chacha20poly1305(o,e,t).decrypt(n,c)}},allocUnsafe=n=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(n):new Uint8Array(n),uint16BEEncode=n=>{const e=allocUnsafe(2);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(0,n,!1),e};uint16BEEncode.bytes=2;const uint16BEDecode=n=>{if(n.length<2)throw RangeError("Could not decode int16BE");return n instanceof Uint8Array?new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,!1):n.getUint16(0)};uint16BEDecode.bytes=2;function encode0(n){return concat$2([n.ne,n.ciphertext],n.ne.length+n.ciphertext.length)}function encode1(n){return concat$2([n.ne,n.ns,n.ciphertext],n.ne.length+n.ns.length+n.ciphertext.length)}function encode2(n){return concat$2([n.ns,n.ciphertext],n.ns.length+n.ciphertext.length)}function decode0(n){if(n.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:n.subarray(0,32),ciphertext:n.subarray(32,n.length),ns:new Uint8Array(0)}}function decode1(n){if(n.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:n.subarray(0,32),ns:n.subarray(32,80),ciphertext:n.subarray(80,n.length)}}function decode2(n){if(n.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:n.subarray(0,48),ciphertext:n.subarray(48,n.length)}}const CHACHA_TAG_LENGTH=16;function encryptStream(n,e){return async function*(t){for await(const o of t)for(let c=0;c<o.length;c+=NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG){let l=c+NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;l>o.length&&(l=o.length);const h=n.encrypt(o.subarray(c,l),n.session);e?.encryptedPackets.increment(),yield uint16BEEncode(h.byteLength),yield h}}}function decryptStream(n,e){return async function*(t){for await(const o of t)for(let c=0;c<o.length;c+=NOISE_MSG_MAX_LENGTH_BYTES){let l=c+NOISE_MSG_MAX_LENGTH_BYTES;if(l>o.length&&(l=o.length),l-CHACHA_TAG_LENGTH<c)throw new Error("Invalid chunk");const h=o.subarray(c,l),d=o.subarray(c,l-CHACHA_TAG_LENGTH),{plaintext:g,valid:m}=n.decrypt(h,n.session,d);if(!m)throw e?.decryptErrors.increment(),new Error("Failed to validate decrypted chunk");e?.decryptedPackets.increment(),yield g}}}var br;let AbortError$4=(br=class extends Error{constructor(t="The operation was aborted"){super(t);me(this,"code");me(this,"type");this.code=br.code,this.type=br.type}},me(br,"code","ABORT_ERR"),me(br,"type","aborted"),br),CodeError$1=class extends Error{constructor(t,o,c){super(t);me(this,"code");me(this,"props");this.code=o,this.name=c?.name??"CodeError",this.props=c??{}}};const Pr=class Pr extends Error{constructor(t="Unexpected Peer"){super(t);me(this,"code");this.code=Pr.code}};me(Pr,"code","ERR_UNEXPECTED_PEER");let UnexpectedPeerError=Pr;const Br=class Br extends Error{constructor(t="Invalid crypto exchange"){super(t);me(this,"code");this.code=Br.code}};me(Br,"code","ERR_INVALID_CRYPTO_EXCHANGE");let InvalidCryptoExchangeError=Br;var forge$D={options:{usePureJavaScript:!1}};const forge$E=getDefaultExportFromCjs(forge$D);var util$8={exports:{}},api={},baseN$1=api,_reverseAlphabets={};api.encode=function(n,e,t){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(t!==void 0&&typeof t!="number")throw new TypeError('"maxline" must be a number.');var o="";if(!(n instanceof Uint8Array))o=_encodeWithByteBuffer(n,e);else{var c=0,l=e.length,h=e.charAt(0),d=[0];for(c=0;c<n.length;++c){for(var g=0,m=n[c];g<d.length;++g)m+=d[g]<<8,d[g]=m%l,m=m/l|0;for(;m>0;)d.push(m%l),m=m/l|0}for(c=0;n[c]===0&&c<n.length-1;++c)o+=h;for(c=d.length-1;c>=0;--c)o+=e[d[c]]}if(t){var v=new RegExp(".{1,"+t+"}","g");o=o.match(v).join(`\r
`)}return o};api.decode=function(n,e){if(typeof n!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var t=_reverseAlphabets[e];if(!t){t=_reverseAlphabets[e]=[];for(var o=0;o<e.length;++o)t[e.charCodeAt(o)]=o}n=n.replace(/\s/g,"");for(var c=e.length,l=e.charAt(0),h=[0],o=0;o<n.length;o++){var d=t[n.charCodeAt(o)];if(d===void 0)return;for(var g=0,m=d;g<h.length;++g)m+=h[g]*c,h[g]=m&255,m>>=8;for(;m>0;)h.push(m&255),m>>=8}for(var v=0;n[v]===l&&v<n.length-1;++v)h.push(0);return typeof Buffer<"u"?Buffer.from(h.reverse()):new Uint8Array(h.reverse())};function _encodeWithByteBuffer(n,e){var t=0,o=e.length,c=e.charAt(0),l=[0];for(t=0;t<n.length();++t){for(var h=0,d=n.at(t);h<l.length;++h)d+=l[h]<<8,l[h]=d%o,d=d/o|0;for(;d>0;)l.push(d%o),d=d/o|0}var g="";for(t=0;n.at(t)===0&&t<n.length()-1;++t)g+=c;for(t=l.length-1;t>=0;--t)g+=e[l[t]];return g}var forge$C=forge$D,baseN=baseN$1,util$7=util$8.exports=forge$C.util=forge$C.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){util$7.nextTick=process.nextTick,typeof setImmediate=="function"?util$7.setImmediate=setImmediate:util$7.setImmediate=util$7.nextTick;return}if(typeof setImmediate=="function"){util$7.setImmediate=function(){return setImmediate.apply(void 0,arguments)},util$7.nextTick=function(d){return setImmediate(d)};return}if(util$7.setImmediate=function(d){setTimeout(d,0)},typeof window<"u"&&typeof window.postMessage=="function"){let d=function(g){if(g.source===window&&g.data===n){g.stopPropagation();var m=e.slice();e.length=0,m.forEach(function(v){v()})}};var h=d,n="forge.setImmediate",e=[];util$7.setImmediate=function(g){e.push(g),e.length===1&&window.postMessage(n,"*")},window.addEventListener("message",d,!0)}if(typeof MutationObserver<"u"){var t=Date.now(),o=!0,c=document.createElement("div"),e=[];new MutationObserver(function(){var g=e.slice();e.length=0,g.forEach(function(m){m()})}).observe(c,{attributes:!0});var l=util$7.setImmediate;util$7.setImmediate=function(g){Date.now()-t>15?(t=Date.now(),l(g)):(e.push(g),e.length===1&&c.setAttribute("a",o=!o))}}util$7.nextTick=util$7.setImmediate})();util$7.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;util$7.globalScope=function(){return util$7.isNodejs?commonjsGlobal:typeof self>"u"?window:self}();util$7.isArray=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};util$7.isArrayBuffer=function(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer};util$7.isArrayBufferView=function(n){return n&&util$7.isArrayBuffer(n.buffer)&&n.byteLength!==void 0};function _checkBitsParam(n){if(!(n===8||n===16||n===24||n===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+n)}util$7.ByteBuffer=ByteStringBuffer;function ByteStringBuffer(n){if(this.data="",this.read=0,typeof n=="string")this.data=n;else if(util$7.isArrayBuffer(n)||util$7.isArrayBufferView(n))if(typeof Buffer<"u"&&n instanceof Buffer)this.data=n.toString("binary");else{var e=new Uint8Array(n);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var t=0;t<e.length;++t)this.putByte(e[t])}}else(n instanceof ByteStringBuffer||typeof n=="object"&&typeof n.data=="string"&&typeof n.read=="number")&&(this.data=n.data,this.read=n.read);this._constructedStringLength=0}util$7.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;util$7.ByteStringBuffer.prototype._optimizeConstructedString=function(n){this._constructedStringLength+=n,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)};util$7.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};util$7.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};util$7.ByteStringBuffer.prototype.putByte=function(n){return this.putBytes(String.fromCharCode(n))};util$7.ByteStringBuffer.prototype.fillWithByte=function(n,e){n=String.fromCharCode(n);for(var t=this.data;e>0;)e&1&&(t+=n),e>>>=1,e>0&&(n+=n);return this.data=t,this._optimizeConstructedString(e),this};util$7.ByteStringBuffer.prototype.putBytes=function(n){return this.data+=n,this._optimizeConstructedString(n.length),this};util$7.ByteStringBuffer.prototype.putString=function(n){return this.putBytes(util$7.encodeUtf8(n))};util$7.ByteStringBuffer.prototype.putInt16=function(n){return this.putBytes(String.fromCharCode(n>>8&255)+String.fromCharCode(n&255))};util$7.ByteStringBuffer.prototype.putInt24=function(n){return this.putBytes(String.fromCharCode(n>>16&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n&255))};util$7.ByteStringBuffer.prototype.putInt32=function(n){return this.putBytes(String.fromCharCode(n>>24&255)+String.fromCharCode(n>>16&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n&255))};util$7.ByteStringBuffer.prototype.putInt16Le=function(n){return this.putBytes(String.fromCharCode(n&255)+String.fromCharCode(n>>8&255))};util$7.ByteStringBuffer.prototype.putInt24Le=function(n){return this.putBytes(String.fromCharCode(n&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n>>16&255))};util$7.ByteStringBuffer.prototype.putInt32Le=function(n){return this.putBytes(String.fromCharCode(n&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n>>16&255)+String.fromCharCode(n>>24&255))};util$7.ByteStringBuffer.prototype.putInt=function(n,e){_checkBitsParam(e);var t="";do e-=8,t+=String.fromCharCode(n>>e&255);while(e>0);return this.putBytes(t)};util$7.ByteStringBuffer.prototype.putSignedInt=function(n,e){return n<0&&(n+=2<<e-1),this.putInt(n,e)};util$7.ByteStringBuffer.prototype.putBuffer=function(n){return this.putBytes(n.getBytes())};util$7.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};util$7.ByteStringBuffer.prototype.getInt16=function(){var n=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,n};util$7.ByteStringBuffer.prototype.getInt24=function(){var n=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,n};util$7.ByteStringBuffer.prototype.getInt32=function(){var n=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,n};util$7.ByteStringBuffer.prototype.getInt16Le=function(){var n=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,n};util$7.ByteStringBuffer.prototype.getInt24Le=function(){var n=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,n};util$7.ByteStringBuffer.prototype.getInt32Le=function(){var n=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,n};util$7.ByteStringBuffer.prototype.getInt=function(n){_checkBitsParam(n);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),n-=8;while(n>0);return e};util$7.ByteStringBuffer.prototype.getSignedInt=function(n){var e=this.getInt(n),t=2<<n-2;return e>=t&&(e-=t<<1),e};util$7.ByteStringBuffer.prototype.getBytes=function(n){var e;return n?(n=Math.min(this.length(),n),e=this.data.slice(this.read,this.read+n),this.read+=n):n===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};util$7.ByteStringBuffer.prototype.bytes=function(n){return typeof n>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+n)};util$7.ByteStringBuffer.prototype.at=function(n){return this.data.charCodeAt(this.read+n)};util$7.ByteStringBuffer.prototype.setAt=function(n,e){return this.data=this.data.substr(0,this.read+n)+String.fromCharCode(e)+this.data.substr(this.read+n+1),this};util$7.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};util$7.ByteStringBuffer.prototype.copy=function(){var n=util$7.createBuffer(this.data);return n.read=this.read,n};util$7.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};util$7.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};util$7.ByteStringBuffer.prototype.truncate=function(n){var e=Math.max(0,this.length()-n);return this.data=this.data.substr(this.read,e),this.read=0,this};util$7.ByteStringBuffer.prototype.toHex=function(){for(var n="",e=this.read;e<this.data.length;++e){var t=this.data.charCodeAt(e);t<16&&(n+="0"),n+=t.toString(16)}return n};util$7.ByteStringBuffer.prototype.toString=function(){return util$7.decodeUtf8(this.bytes())};function DataBuffer(n,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var t=util$7.isArrayBuffer(n),o=util$7.isArrayBufferView(n);if(t||o){t?this.data=new DataView(n):this.data=new DataView(n.buffer,n.byteOffset,n.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,n!=null&&this.putBytes(n),"writeOffset"in e&&(this.write=e.writeOffset)}util$7.DataBuffer=DataBuffer;util$7.DataBuffer.prototype.length=function(){return this.write-this.read};util$7.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};util$7.DataBuffer.prototype.accommodate=function(n,e){if(this.length()>=n)return this;e=Math.max(e||this.growSize,n);var t=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),o=new Uint8Array(this.length()+e);return o.set(t),this.data=new DataView(o.buffer),this};util$7.DataBuffer.prototype.putByte=function(n){return this.accommodate(1),this.data.setUint8(this.write++,n),this};util$7.DataBuffer.prototype.fillWithByte=function(n,e){this.accommodate(e);for(var t=0;t<e;++t)this.data.setUint8(n);return this};util$7.DataBuffer.prototype.putBytes=function(n,e){if(util$7.isArrayBufferView(n)){var t=new Uint8Array(n.buffer,n.byteOffset,n.byteLength),o=t.byteLength-t.byteOffset;this.accommodate(o);var c=new Uint8Array(this.data.buffer,this.write);return c.set(t),this.write+=o,this}if(util$7.isArrayBuffer(n)){var t=new Uint8Array(n);this.accommodate(t.byteLength);var c=new Uint8Array(this.data.buffer);return c.set(t,this.write),this.write+=t.byteLength,this}if(n instanceof util$7.DataBuffer||typeof n=="object"&&typeof n.read=="number"&&typeof n.write=="number"&&util$7.isArrayBufferView(n.data)){var t=new Uint8Array(n.data.byteLength,n.read,n.length());this.accommodate(t.byteLength);var c=new Uint8Array(n.data.byteLength,this.write);return c.set(t),this.write+=t.byteLength,this}if(n instanceof util$7.ByteStringBuffer&&(n=n.data,e="binary"),e=e||"binary",typeof n=="string"){var l;if(e==="hex")return this.accommodate(Math.ceil(n.length/2)),l=new Uint8Array(this.data.buffer,this.write),this.write+=util$7.binary.hex.decode(n,l,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(n.length/4)*3),l=new Uint8Array(this.data.buffer,this.write),this.write+=util$7.binary.base64.decode(n,l,this.write),this;if(e==="utf8"&&(n=util$7.encodeUtf8(n),e="binary"),e==="binary"||e==="raw")return this.accommodate(n.length),l=new Uint8Array(this.data.buffer,this.write),this.write+=util$7.binary.raw.decode(l),this;if(e==="utf16")return this.accommodate(n.length*2),l=new Uint16Array(this.data.buffer,this.write),this.write+=util$7.text.utf16.encode(l),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+n)};util$7.DataBuffer.prototype.putBuffer=function(n){return this.putBytes(n),n.clear(),this};util$7.DataBuffer.prototype.putString=function(n){return this.putBytes(n,"utf16")};util$7.DataBuffer.prototype.putInt16=function(n){return this.accommodate(2),this.data.setInt16(this.write,n),this.write+=2,this};util$7.DataBuffer.prototype.putInt24=function(n){return this.accommodate(3),this.data.setInt16(this.write,n>>8&65535),this.data.setInt8(this.write,n>>16&255),this.write+=3,this};util$7.DataBuffer.prototype.putInt32=function(n){return this.accommodate(4),this.data.setInt32(this.write,n),this.write+=4,this};util$7.DataBuffer.prototype.putInt16Le=function(n){return this.accommodate(2),this.data.setInt16(this.write,n,!0),this.write+=2,this};util$7.DataBuffer.prototype.putInt24Le=function(n){return this.accommodate(3),this.data.setInt8(this.write,n>>16&255),this.data.setInt16(this.write,n>>8&65535,!0),this.write+=3,this};util$7.DataBuffer.prototype.putInt32Le=function(n){return this.accommodate(4),this.data.setInt32(this.write,n,!0),this.write+=4,this};util$7.DataBuffer.prototype.putInt=function(n,e){_checkBitsParam(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,n>>e&255);while(e>0);return this};util$7.DataBuffer.prototype.putSignedInt=function(n,e){return _checkBitsParam(e),this.accommodate(e/8),n<0&&(n+=2<<e-1),this.putInt(n,e)};util$7.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};util$7.DataBuffer.prototype.getInt16=function(){var n=this.data.getInt16(this.read);return this.read+=2,n};util$7.DataBuffer.prototype.getInt24=function(){var n=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,n};util$7.DataBuffer.prototype.getInt32=function(){var n=this.data.getInt32(this.read);return this.read+=4,n};util$7.DataBuffer.prototype.getInt16Le=function(){var n=this.data.getInt16(this.read,!0);return this.read+=2,n};util$7.DataBuffer.prototype.getInt24Le=function(){var n=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,n};util$7.DataBuffer.prototype.getInt32Le=function(){var n=this.data.getInt32(this.read,!0);return this.read+=4,n};util$7.DataBuffer.prototype.getInt=function(n){_checkBitsParam(n);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),n-=8;while(n>0);return e};util$7.DataBuffer.prototype.getSignedInt=function(n){var e=this.getInt(n),t=2<<n-2;return e>=t&&(e-=t<<1),e};util$7.DataBuffer.prototype.getBytes=function(n){var e;return n?(n=Math.min(this.length(),n),e=this.data.slice(this.read,this.read+n),this.read+=n):n===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};util$7.DataBuffer.prototype.bytes=function(n){return typeof n>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+n)};util$7.DataBuffer.prototype.at=function(n){return this.data.getUint8(this.read+n)};util$7.DataBuffer.prototype.setAt=function(n,e){return this.data.setUint8(n,e),this};util$7.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};util$7.DataBuffer.prototype.copy=function(){return new util$7.DataBuffer(this)};util$7.DataBuffer.prototype.compact=function(){if(this.read>0){var n=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(n.byteLength);e.set(n),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};util$7.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};util$7.DataBuffer.prototype.truncate=function(n){return this.write=Math.max(0,this.length()-n),this.read=Math.min(this.read,this.write),this};util$7.DataBuffer.prototype.toHex=function(){for(var n="",e=this.read;e<this.data.byteLength;++e){var t=this.data.getUint8(e);t<16&&(n+="0"),n+=t.toString(16)}return n};util$7.DataBuffer.prototype.toString=function(n){var e=new Uint8Array(this.data,this.read,this.length());if(n=n||"utf8",n==="binary"||n==="raw")return util$7.binary.raw.encode(e);if(n==="hex")return util$7.binary.hex.encode(e);if(n==="base64")return util$7.binary.base64.encode(e);if(n==="utf8")return util$7.text.utf8.decode(e);if(n==="utf16")return util$7.text.utf16.decode(e);throw new Error("Invalid encoding: "+n)};util$7.createBuffer=function(n,e){return e=e||"raw",n!==void 0&&e==="utf8"&&(n=util$7.encodeUtf8(n)),new util$7.ByteBuffer(n)};util$7.fillString=function(n,e){for(var t="";e>0;)e&1&&(t+=n),e>>>=1,e>0&&(n+=n);return t};util$7.xorBytes=function(n,e,t){for(var o="",c="",l="",h=0,d=0;t>0;--t,++h)c=n.charCodeAt(h)^e.charCodeAt(h),d>=10&&(o+=l,l="",d=0),l+=String.fromCharCode(c),++d;return o+=l,o};util$7.hexToBytes=function(n){var e="",t=0;for(n.length&!0&&(t=1,e+=String.fromCharCode(parseInt(n[0],16)));t<n.length;t+=2)e+=String.fromCharCode(parseInt(n.substr(t,2),16));return e};util$7.bytesToHex=function(n){return util$7.createBuffer(n).toHex()};util$7.int32ToBytes=function(n){return String.fromCharCode(n>>24&255)+String.fromCharCode(n>>16&255)+String.fromCharCode(n>>8&255)+String.fromCharCode(n&255)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util$7.encode64=function(n,e){for(var t="",o="",c,l,h,d=0;d<n.length;)c=n.charCodeAt(d++),l=n.charCodeAt(d++),h=n.charCodeAt(d++),t+=_base64.charAt(c>>2),t+=_base64.charAt((c&3)<<4|l>>4),isNaN(l)?t+="==":(t+=_base64.charAt((l&15)<<2|h>>6),t+=isNaN(h)?"=":_base64.charAt(h&63)),e&&t.length>e&&(o+=t.substr(0,e)+`\r
`,t=t.substr(e));return o+=t,o};util$7.decode64=function(n){n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",t,o,c,l,h=0;h<n.length;)t=_base64Idx[n.charCodeAt(h++)-43],o=_base64Idx[n.charCodeAt(h++)-43],c=_base64Idx[n.charCodeAt(h++)-43],l=_base64Idx[n.charCodeAt(h++)-43],e+=String.fromCharCode(t<<2|o>>4),c!==64&&(e+=String.fromCharCode((o&15)<<4|c>>2),l!==64&&(e+=String.fromCharCode((c&3)<<6|l)));return e};util$7.encodeUtf8=function(n){return unescape(encodeURIComponent(n))};util$7.decodeUtf8=function(n){return decodeURIComponent(escape(n))};util$7.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}};util$7.binary.raw.encode=function(n){return String.fromCharCode.apply(null,n)};util$7.binary.raw.decode=function(n,e,t){var o=e;o||(o=new Uint8Array(n.length)),t=t||0;for(var c=t,l=0;l<n.length;++l)o[c++]=n.charCodeAt(l);return e?c-t:o};util$7.binary.hex.encode=util$7.bytesToHex;util$7.binary.hex.decode=function(n,e,t){var o=e;o||(o=new Uint8Array(Math.ceil(n.length/2))),t=t||0;var c=0,l=t;for(n.length&1&&(c=1,o[l++]=parseInt(n[0],16));c<n.length;c+=2)o[l++]=parseInt(n.substr(c,2),16);return e?l-t:o};util$7.binary.base64.encode=function(n,e){for(var t="",o="",c,l,h,d=0;d<n.byteLength;)c=n[d++],l=n[d++],h=n[d++],t+=_base64.charAt(c>>2),t+=_base64.charAt((c&3)<<4|l>>4),isNaN(l)?t+="==":(t+=_base64.charAt((l&15)<<2|h>>6),t+=isNaN(h)?"=":_base64.charAt(h&63)),e&&t.length>e&&(o+=t.substr(0,e)+`\r
`,t=t.substr(e));return o+=t,o};util$7.binary.base64.decode=function(n,e,t){var o=e;o||(o=new Uint8Array(Math.ceil(n.length/4)*3)),n=n.replace(/[^A-Za-z0-9\+\/\=]/g,""),t=t||0;for(var c,l,h,d,g=0,m=t;g<n.length;)c=_base64Idx[n.charCodeAt(g++)-43],l=_base64Idx[n.charCodeAt(g++)-43],h=_base64Idx[n.charCodeAt(g++)-43],d=_base64Idx[n.charCodeAt(g++)-43],o[m++]=c<<2|l>>4,h!==64&&(o[m++]=(l&15)<<4|h>>2,d!==64&&(o[m++]=(h&3)<<6|d));return e?m-t:o.subarray(0,m)};util$7.binary.base58.encode=function(n,e){return util$7.binary.baseN.encode(n,_base58,e)};util$7.binary.base58.decode=function(n,e){return util$7.binary.baseN.decode(n,_base58,e)};util$7.text={utf8:{},utf16:{}};util$7.text.utf8.encode=function(n,e,t){n=util$7.encodeUtf8(n);var o=e;o||(o=new Uint8Array(n.length)),t=t||0;for(var c=t,l=0;l<n.length;++l)o[c++]=n.charCodeAt(l);return e?c-t:o};util$7.text.utf8.decode=function(n){return util$7.decodeUtf8(String.fromCharCode.apply(null,n))};util$7.text.utf16.encode=function(n,e,t){var o=e;o||(o=new Uint8Array(n.length*2));var c=new Uint16Array(o.buffer);t=t||0;for(var l=t,h=t,d=0;d<n.length;++d)c[h++]=n.charCodeAt(d),l+=2;return e?l-t:o};util$7.text.utf16.decode=function(n){return String.fromCharCode.apply(null,new Uint16Array(n.buffer))};util$7.deflate=function(n,e,t){if(e=util$7.decode64(n.deflate(util$7.encode64(e)).rval),t){var o=2,c=e.charCodeAt(1);c&32&&(o=6),e=e.substring(o,e.length-4)}return e};util$7.inflate=function(n,e,t){var o=n.inflate(util$7.encode64(e)).rval;return o===null?null:util$7.decode64(o)};var _setStorageObject=function(n,e,t){if(!n)throw new Error("WebStorage not available.");var o;if(t===null?o=n.removeItem(e):(t=util$7.encode64(JSON.stringify(t)),o=n.setItem(e,t)),typeof o<"u"&&o.rval!==!0){var c=new Error(o.error.message);throw c.id=o.error.id,c.name=o.error.name,c}},_getStorageObject=function(n,e){if(!n)throw new Error("WebStorage not available.");var t=n.getItem(e);if(n.init)if(t.rval===null){if(t.error){var o=new Error(t.error.message);throw o.id=t.error.id,o.name=t.error.name,o}t=null}else t=t.rval;return t!==null&&(t=JSON.parse(util$7.decode64(t))),t},_setItem=function(n,e,t,o){var c=_getStorageObject(n,e);c===null&&(c={}),c[t]=o,_setStorageObject(n,e,c)},_getItem=function(n,e,t){var o=_getStorageObject(n,e);return o!==null&&(o=t in o?o[t]:null),o},_removeItem=function(n,e,t){var o=_getStorageObject(n,e);if(o!==null&&t in o){delete o[t];var c=!0;for(var l in o){c=!1;break}c&&(o=null),_setStorageObject(n,e,o)}},_clearItems=function(n,e){_setStorageObject(n,e,null)},_callStorageFunction=function(n,e,t){var o=null;typeof t>"u"&&(t=["web","flash"]);var c,l=!1,h=null;for(var d in t){c=t[d];try{if(c==="flash"||c==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");o=n.apply(this,e),l=c==="flash"}(c==="web"||c==="both")&&(e[0]=localStorage,o=n.apply(this,e),l=!0)}catch(g){h=g}if(l)break}if(!l)throw h;return o};util$7.setItem=function(n,e,t,o,c){_callStorageFunction(_setItem,arguments,c)};util$7.getItem=function(n,e,t,o){return _callStorageFunction(_getItem,arguments,o)};util$7.removeItem=function(n,e,t,o){_callStorageFunction(_removeItem,arguments,o)};util$7.clearItems=function(n,e,t){_callStorageFunction(_clearItems,arguments,t)};util$7.isEmpty=function(n){for(var e in n)if(n.hasOwnProperty(e))return!1;return!0};util$7.format=function(n){for(var e=/%./g,t,o,c=0,l=[],h=0;t=e.exec(n);){o=n.substring(h,e.lastIndex-2),o.length>0&&l.push(o),h=e.lastIndex;var d=t[0][1];switch(d){case"s":case"o":c<arguments.length?l.push(arguments[c+++1]):l.push("<?>");break;case"%":l.push("%");break;default:l.push("<%"+d+"?>")}}return l.push(n.substring(h)),l.join("")};util$7.formatNumber=function(n,e,t,o){var c=n,l=isNaN(e=Math.abs(e))?2:e,h=t===void 0?",":t,d=o===void 0?".":o,g=c<0?"-":"",m=parseInt(c=Math.abs(+c||0).toFixed(l),10)+"",v=m.length>3?m.length%3:0;return g+(v?m.substr(0,v)+d:"")+m.substr(v).replace(/(\d{3})(?=\d)/g,"$1"+d)+(l?h+Math.abs(c-m).toFixed(l).slice(2):"")};util$7.formatSize=function(n){return n>=1073741824?n=util$7.formatNumber(n/1073741824,2,".","")+" GiB":n>=1048576?n=util$7.formatNumber(n/1048576,2,".","")+" MiB":n>=1024?n=util$7.formatNumber(n/1024,0)+" KiB":n=util$7.formatNumber(n,0)+" bytes",n};util$7.bytesFromIP=function(n){return n.indexOf(".")!==-1?util$7.bytesFromIPv4(n):n.indexOf(":")!==-1?util$7.bytesFromIPv6(n):null};util$7.bytesFromIPv4=function(n){if(n=n.split("."),n.length!==4)return null;for(var e=util$7.createBuffer(),t=0;t<n.length;++t){var o=parseInt(n[t],10);if(isNaN(o))return null;e.putByte(o)}return e.getBytes()};util$7.bytesFromIPv6=function(n){var e=0;n=n.split(":").filter(function(h){return h.length===0&&++e,!0});for(var t=(8-n.length+e)*2,o=util$7.createBuffer(),c=0;c<8;++c){if(!n[c]||n[c].length===0){o.fillWithByte(0,t),t=0;continue}var l=util$7.hexToBytes(n[c]);l.length<2&&o.putByte(0),o.putBytes(l)}return o.getBytes()};util$7.bytesToIP=function(n){return n.length===4?util$7.bytesToIPv4(n):n.length===16?util$7.bytesToIPv6(n):null};util$7.bytesToIPv4=function(n){if(n.length!==4)return null;for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e.join(".")};util$7.bytesToIPv6=function(n){if(n.length!==16)return null;for(var e=[],t=[],o=0,c=0;c<n.length;c+=2){for(var l=util$7.bytesToHex(n[c]+n[c+1]);l[0]==="0"&&l!=="0";)l=l.substr(1);if(l==="0"){var h=t[t.length-1],d=e.length;!h||d!==h.end+1?t.push({start:d,end:d}):(h.end=d,h.end-h.start>t[o].end-t[o].start&&(o=t.length-1))}e.push(l)}if(t.length>0){var g=t[o];g.end-g.start>0&&(e.splice(g.start,g.end-g.start+1,""),g.start===0&&e.unshift(""),g.end===7&&e.push(""))}return e.join(":")};util$7.estimateCores=function(n,e){if(typeof n=="function"&&(e=n,n={}),n=n||{},"cores"in util$7&&!n.update)return e(null,util$7.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util$7.cores=navigator.hardwareConcurrency,e(null,util$7.cores);if(typeof Worker>"u")return util$7.cores=1,e(null,util$7.cores);if(typeof Blob>"u")return util$7.cores=2,e(null,util$7.cores);var t=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(h){var d=Date.now(),g=d+4;self.postMessage({st:d,et:g})})}.toString(),")()"],{type:"application/javascript"}));o([],5,16);function o(h,d,g){if(d===0){var m=Math.floor(h.reduce(function(v,_){return v+_},0)/h.length);return util$7.cores=Math.max(1,m),URL.revokeObjectURL(t),e(null,util$7.cores)}c(g,function(v,_){h.push(l(g,_)),o(h,d-1,g)})}function c(h,d){for(var g=[],m=[],v=0;v<h;++v){var _=new Worker(t);_.addEventListener("message",function(p){if(m.push(p.data),m.length===h){for(var a=0;a<h;++a)g[a].terminate();d(null,m)}}),g.push(_)}for(var v=0;v<h;++v)g[v].postMessage(v)}function l(h,d){for(var g=[],m=0;m<h;++m)for(var v=d[m],_=g[m]=[],p=0;p<h;++p)if(m!==p){var a=d[p];(v.st>a.st&&v.st<a.et||a.st>v.st&&a.st<v.et)&&_.push(p)}return g.reduce(function(u,y){return Math.max(u,y.length)},0)}};var utilExports=util$8.exports;const forgeUtil=getDefaultExportFromCjs(utilExports);var forge$B=forge$D;forge$B.pki=forge$B.pki||{};var oids$2=forge$B.pki.oids=forge$B.oids=forge$B.oids||{};function _IN(n,e){oids$2[n]=e,oids$2[e]=n}function _I_(n,e){oids$2[n]=e}_IN("1.2.840.113549.1.1.1","rsaEncryption");_IN("1.2.840.113549.1.1.4","md5WithRSAEncryption");_IN("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_IN("1.2.840.113549.1.1.7","RSAES-OAEP");_IN("1.2.840.113549.1.1.8","mgf1");_IN("1.2.840.113549.1.1.9","pSpecified");_IN("1.2.840.113549.1.1.10","RSASSA-PSS");_IN("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_IN("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_IN("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_IN("1.3.101.112","EdDSA25519");_IN("1.2.840.10040.4.3","dsa-with-sha1");_IN("1.3.14.3.2.7","desCBC");_IN("1.3.14.3.2.26","sha1");_IN("1.3.14.3.2.29","sha1WithRSASignature");_IN("2.16.840.1.101.3.4.2.1","sha256");_IN("2.16.840.1.101.3.4.2.2","sha384");_IN("2.16.840.1.101.3.4.2.3","sha512");_IN("2.16.840.1.101.3.4.2.4","sha224");_IN("2.16.840.1.101.3.4.2.5","sha512-224");_IN("2.16.840.1.101.3.4.2.6","sha512-256");_IN("1.2.840.113549.2.2","md2");_IN("1.2.840.113549.2.5","md5");_IN("1.2.840.113549.1.7.1","data");_IN("1.2.840.113549.1.7.2","signedData");_IN("1.2.840.113549.1.7.3","envelopedData");_IN("1.2.840.113549.1.7.4","signedAndEnvelopedData");_IN("1.2.840.113549.1.7.5","digestedData");_IN("1.2.840.113549.1.7.6","encryptedData");_IN("1.2.840.113549.1.9.1","emailAddress");_IN("1.2.840.113549.1.9.2","unstructuredName");_IN("1.2.840.113549.1.9.3","contentType");_IN("1.2.840.113549.1.9.4","messageDigest");_IN("1.2.840.113549.1.9.5","signingTime");_IN("1.2.840.113549.1.9.6","counterSignature");_IN("1.2.840.113549.1.9.7","challengePassword");_IN("1.2.840.113549.1.9.8","unstructuredAddress");_IN("1.2.840.113549.1.9.14","extensionRequest");_IN("1.2.840.113549.1.9.20","friendlyName");_IN("1.2.840.113549.1.9.21","localKeyId");_IN("1.2.840.113549.1.9.22.1","x509Certificate");_IN("1.2.840.113549.1.12.10.1.1","keyBag");_IN("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_IN("1.2.840.113549.1.12.10.1.3","certBag");_IN("1.2.840.113549.1.12.10.1.4","crlBag");_IN("1.2.840.113549.1.12.10.1.5","secretBag");_IN("1.2.840.113549.1.12.10.1.6","safeContentsBag");_IN("1.2.840.113549.1.5.13","pkcs5PBES2");_IN("1.2.840.113549.1.5.12","pkcs5PBKDF2");_IN("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_IN("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_IN("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_IN("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_IN("1.2.840.113549.2.7","hmacWithSHA1");_IN("1.2.840.113549.2.8","hmacWithSHA224");_IN("1.2.840.113549.2.9","hmacWithSHA256");_IN("1.2.840.113549.2.10","hmacWithSHA384");_IN("1.2.840.113549.2.11","hmacWithSHA512");_IN("1.2.840.113549.3.7","des-EDE3-CBC");_IN("2.16.840.1.101.3.4.1.2","aes128-CBC");_IN("2.16.840.1.101.3.4.1.22","aes192-CBC");_IN("2.16.840.1.101.3.4.1.42","aes256-CBC");_IN("2.5.4.3","commonName");_IN("2.5.4.4","surname");_IN("2.5.4.5","serialNumber");_IN("2.5.4.6","countryName");_IN("2.5.4.7","localityName");_IN("2.5.4.8","stateOrProvinceName");_IN("2.5.4.9","streetAddress");_IN("2.5.4.10","organizationName");_IN("2.5.4.11","organizationalUnitName");_IN("2.5.4.12","title");_IN("2.5.4.13","description");_IN("2.5.4.15","businessCategory");_IN("2.5.4.17","postalCode");_IN("2.5.4.42","givenName");_IN("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_IN("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_IN("2.16.840.1.113730.1.1","nsCertType");_IN("2.16.840.1.113730.1.13","nsComment");_I_("2.5.29.1","authorityKeyIdentifier");_I_("2.5.29.2","keyAttributes");_I_("2.5.29.3","certificatePolicies");_I_("2.5.29.4","keyUsageRestriction");_I_("2.5.29.5","policyMapping");_I_("2.5.29.6","subtreesConstraint");_I_("2.5.29.7","subjectAltName");_I_("2.5.29.8","issuerAltName");_I_("2.5.29.9","subjectDirectoryAttributes");_I_("2.5.29.10","basicConstraints");_I_("2.5.29.11","nameConstraints");_I_("2.5.29.12","policyConstraints");_I_("2.5.29.13","basicConstraints");_IN("2.5.29.14","subjectKeyIdentifier");_IN("2.5.29.15","keyUsage");_I_("2.5.29.16","privateKeyUsagePeriod");_IN("2.5.29.17","subjectAltName");_IN("2.5.29.18","issuerAltName");_IN("2.5.29.19","basicConstraints");_I_("2.5.29.20","cRLNumber");_I_("2.5.29.21","cRLReason");_I_("2.5.29.22","expirationDate");_I_("2.5.29.23","instructionCode");_I_("2.5.29.24","invalidityDate");_I_("2.5.29.25","cRLDistributionPoints");_I_("2.5.29.26","issuingDistributionPoint");_I_("2.5.29.27","deltaCRLIndicator");_I_("2.5.29.28","issuingDistributionPoint");_I_("2.5.29.29","certificateIssuer");_I_("2.5.29.30","nameConstraints");_IN("2.5.29.31","cRLDistributionPoints");_IN("2.5.29.32","certificatePolicies");_I_("2.5.29.33","policyMappings");_I_("2.5.29.34","policyConstraints");_IN("2.5.29.35","authorityKeyIdentifier");_I_("2.5.29.36","policyConstraints");_IN("2.5.29.37","extKeyUsage");_I_("2.5.29.46","freshestCRL");_I_("2.5.29.54","inhibitAnyPolicy");_IN("1.3.6.1.4.1.11129.2.4.2","timestampList");_IN("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_IN("1.3.6.1.5.5.7.3.1","serverAuth");_IN("1.3.6.1.5.5.7.3.2","clientAuth");_IN("1.3.6.1.5.5.7.3.3","codeSigning");_IN("1.3.6.1.5.5.7.3.4","emailProtection");_IN("1.3.6.1.5.5.7.3.8","timeStamping");var forge$A=forge$D,asn1$8=forge$A.asn1=forge$A.asn1||{};asn1$8.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};asn1$8.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1$8.create=function(n,e,t,o,c){if(forge$A.util.isArray(o)){for(var l=[],h=0;h<o.length;++h)o[h]!==void 0&&l.push(o[h]);o=l}var d={tagClass:n,type:e,constructed:t,composed:t||forge$A.util.isArray(o),value:o};return c&&"bitStringContents"in c&&(d.bitStringContents=c.bitStringContents,d.original=asn1$8.copy(d)),d};asn1$8.copy=function(n,e){var t;if(forge$A.util.isArray(n)){t=[];for(var o=0;o<n.length;++o)t.push(asn1$8.copy(n[o],e));return t}return typeof n=="string"?n:(t={tagClass:n.tagClass,type:n.type,constructed:n.constructed,composed:n.composed,value:asn1$8.copy(n.value,e)},e&&!e.excludeBitStringContents&&(t.bitStringContents=n.bitStringContents),t)};asn1$8.equals=function(n,e,t){if(forge$A.util.isArray(n)){if(!forge$A.util.isArray(e)||n.length!==e.length)return!1;for(var o=0;o<n.length;++o)if(!asn1$8.equals(n[o],e[o]))return!1;return!0}if(typeof n!=typeof e)return!1;if(typeof n=="string")return n===e;var c=n.tagClass===e.tagClass&&n.type===e.type&&n.constructed===e.constructed&&n.composed===e.composed&&asn1$8.equals(n.value,e.value);return t&&t.includeBitStringContents&&(c=c&&n.bitStringContents===e.bitStringContents),c};asn1$8.getBerValueLength=function(n){var e=n.getByte();if(e!==128){var t,o=e&128;return o?t=n.getInt((e&127)<<3):t=e,t}};function _checkBufferLength(n,e,t){if(t>e){var o=new Error("Too few bytes to parse DER.");throw o.available=n.length(),o.remaining=e,o.requested=t,o}}var _getValueLength=function(n,e){var t=n.getByte();if(e--,t!==128){var o,c=t&128;if(!c)o=t;else{var l=t&127;_checkBufferLength(n,e,l),o=n.getInt(l<<3)}if(o<0)throw new Error("Negative length: "+o);return o}};asn1$8.fromDer=function(n,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof n=="string"&&(n=forge$A.util.createBuffer(n));var t=n.length(),o=_fromDer(n,n.length(),0,e);if(e.parseAllBytes&&n.length()!==0){var c=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw c.byteCount=t,c.remaining=n.length(),c}return o};function _fromDer(n,e,t,o){var c;_checkBufferLength(n,e,2);var l=n.getByte();e--;var h=l&192,d=l&31;c=n.length();var g=_getValueLength(n,e);if(e-=c-n.length(),g!==void 0&&g>e){if(o.strict){var m=new Error("Too few bytes to read ASN.1 value.");throw m.available=n.length(),m.remaining=e,m.requested=g,m}g=e}var v,_,p=(l&32)===32;if(p)if(v=[],g===void 0)for(;;){if(_checkBufferLength(n,e,2),n.bytes(2)===String.fromCharCode(0,0)){n.getBytes(2),e-=2;break}c=n.length(),v.push(_fromDer(n,e,t+1,o)),e-=c-n.length()}else for(;g>0;)c=n.length(),v.push(_fromDer(n,g,t+1,o)),e-=c-n.length(),g-=c-n.length();if(v===void 0&&h===asn1$8.Class.UNIVERSAL&&d===asn1$8.Type.BITSTRING&&(_=n.bytes(g)),v===void 0&&o.decodeBitStrings&&h===asn1$8.Class.UNIVERSAL&&d===asn1$8.Type.BITSTRING&&g>1){var a=n.read,u=e,y=0;if(d===asn1$8.Type.BITSTRING&&(_checkBufferLength(n,e,1),y=n.getByte(),e--),y===0)try{c=n.length();var b={strict:!0,decodeBitStrings:!0},w=_fromDer(n,e,t+1,b),T=c-n.length();e-=T,d==asn1$8.Type.BITSTRING&&T++;var B=w.tagClass;T===g&&(B===asn1$8.Class.UNIVERSAL||B===asn1$8.Class.CONTEXT_SPECIFIC)&&(v=[w])}catch{}v===void 0&&(n.read=a,e=u)}if(v===void 0){if(g===void 0){if(o.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");g=e}if(d===asn1$8.Type.BMPSTRING)for(v="";g>0;g-=2)_checkBufferLength(n,e,2),v+=String.fromCharCode(n.getInt16()),e-=2;else v=n.getBytes(g),e-=g}var H=_===void 0?null:{bitStringContents:_};return asn1$8.create(h,d,p,v,H)}asn1$8.toDer=function(n){var e=forge$A.util.createBuffer(),t=n.tagClass|n.type,o=forge$A.util.createBuffer(),c=!1;if("bitStringContents"in n&&(c=!0,n.original&&(c=asn1$8.equals(n,n.original))),c)o.putBytes(n.bitStringContents);else if(n.composed){n.constructed?t|=32:o.putByte(0);for(var l=0;l<n.value.length;++l)n.value[l]!==void 0&&o.putBuffer(asn1$8.toDer(n.value[l]))}else if(n.type===asn1$8.Type.BMPSTRING)for(var l=0;l<n.value.length;++l)o.putInt16(n.value.charCodeAt(l));else n.type===asn1$8.Type.INTEGER&&n.value.length>1&&(n.value.charCodeAt(0)===0&&!(n.value.charCodeAt(1)&128)||n.value.charCodeAt(0)===255&&(n.value.charCodeAt(1)&128)===128)?o.putBytes(n.value.substr(1)):o.putBytes(n.value);if(e.putByte(t),o.length()<=127)e.putByte(o.length()&127);else{var h=o.length(),d="";do d+=String.fromCharCode(h&255),h=h>>>8;while(h>0);e.putByte(d.length|128);for(var l=d.length-1;l>=0;--l)e.putByte(d.charCodeAt(l))}return e.putBuffer(o),e};asn1$8.oidToDer=function(n){var e=n.split("."),t=forge$A.util.createBuffer();t.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var o,c,l,h,d=2;d<e.length;++d){o=!0,c=[],l=parseInt(e[d],10);do h=l&127,l=l>>>7,o||(h|=128),c.push(h),o=!1;while(l>0);for(var g=c.length-1;g>=0;--g)t.putByte(c[g])}return t};asn1$8.derToOid=function(n){var e;typeof n=="string"&&(n=forge$A.util.createBuffer(n));var t=n.getByte();e=Math.floor(t/40)+"."+t%40;for(var o=0;n.length()>0;)t=n.getByte(),o=o<<7,t&128?o+=t&127:(e+="."+(o+t),o=0);return e};asn1$8.utcTimeToDate=function(n){var e=new Date,t=parseInt(n.substr(0,2),10);t=t>=50?1900+t:2e3+t;var o=parseInt(n.substr(2,2),10)-1,c=parseInt(n.substr(4,2),10),l=parseInt(n.substr(6,2),10),h=parseInt(n.substr(8,2),10),d=0;if(n.length>11){var g=n.charAt(10),m=10;g!=="+"&&g!=="-"&&(d=parseInt(n.substr(10,2),10),m+=2)}if(e.setUTCFullYear(t,o,c),e.setUTCHours(l,h,d,0),m&&(g=n.charAt(m),g==="+"||g==="-")){var v=parseInt(n.substr(m+1,2),10),_=parseInt(n.substr(m+4,2),10),p=v*60+_;p*=6e4,g==="+"?e.setTime(+e-p):e.setTime(+e+p)}return e};asn1$8.generalizedTimeToDate=function(n){var e=new Date,t=parseInt(n.substr(0,4),10),o=parseInt(n.substr(4,2),10)-1,c=parseInt(n.substr(6,2),10),l=parseInt(n.substr(8,2),10),h=parseInt(n.substr(10,2),10),d=parseInt(n.substr(12,2),10),g=0,m=0,v=!1;n.charAt(n.length-1)==="Z"&&(v=!0);var _=n.length-5,p=n.charAt(_);if(p==="+"||p==="-"){var a=parseInt(n.substr(_+1,2),10),u=parseInt(n.substr(_+4,2),10);m=a*60+u,m*=6e4,p==="+"&&(m*=-1),v=!0}return n.charAt(14)==="."&&(g=parseFloat(n.substr(14),10)*1e3),v?(e.setUTCFullYear(t,o,c),e.setUTCHours(l,h,d,g),e.setTime(+e+m)):(e.setFullYear(t,o,c),e.setHours(l,h,d,g)),e};asn1$8.dateToUtcTime=function(n){if(typeof n=="string")return n;var e="",t=[];t.push((""+n.getUTCFullYear()).substr(2)),t.push(""+(n.getUTCMonth()+1)),t.push(""+n.getUTCDate()),t.push(""+n.getUTCHours()),t.push(""+n.getUTCMinutes()),t.push(""+n.getUTCSeconds());for(var o=0;o<t.length;++o)t[o].length<2&&(e+="0"),e+=t[o];return e+="Z",e};asn1$8.dateToGeneralizedTime=function(n){if(typeof n=="string")return n;var e="",t=[];t.push(""+n.getUTCFullYear()),t.push(""+(n.getUTCMonth()+1)),t.push(""+n.getUTCDate()),t.push(""+n.getUTCHours()),t.push(""+n.getUTCMinutes()),t.push(""+n.getUTCSeconds());for(var o=0;o<t.length;++o)t[o].length<2&&(e+="0"),e+=t[o];return e+="Z",e};asn1$8.integerToDer=function(n){var e=forge$A.util.createBuffer();if(n>=-128&&n<128)return e.putSignedInt(n,8);if(n>=-32768&&n<32768)return e.putSignedInt(n,16);if(n>=-8388608&&n<8388608)return e.putSignedInt(n,24);if(n>=-2147483648&&n<2147483648)return e.putSignedInt(n,32);var t=new Error("Integer too large; max is 32-bits.");throw t.integer=n,t};asn1$8.derToInteger=function(n){typeof n=="string"&&(n=forge$A.util.createBuffer(n));var e=n.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return n.getSignedInt(e)};asn1$8.validate=function(n,e,t,o){var c=!1;if((n.tagClass===e.tagClass||typeof e.tagClass>"u")&&(n.type===e.type||typeof e.type>"u"))if(n.constructed===e.constructed||typeof e.constructed>"u"){if(c=!0,e.value&&forge$A.util.isArray(e.value))for(var l=0,h=0;c&&h<e.value.length;++h)c=e.value[h].optional||!1,n.value[l]&&(c=asn1$8.validate(n.value[l],e.value[h],t,o),c?++l:e.value[h].optional&&(c=!0)),!c&&o&&o.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+n.value.length+'"');if(c&&t&&(e.capture&&(t[e.capture]=n.value),e.captureAsn1&&(t[e.captureAsn1]=n),e.captureBitStringContents&&"bitStringContents"in n&&(t[e.captureBitStringContents]=n.bitStringContents),e.captureBitStringValue&&"bitStringContents"in n))if(n.bitStringContents.length<2)t[e.captureBitStringValue]="";else{var d=n.bitStringContents.charCodeAt(0);if(d!==0)throw new Error("captureBitStringValue only supported for zero unused bits");t[e.captureBitStringValue]=n.bitStringContents.slice(1)}}else o&&o.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+n.constructed+'"');else o&&(n.tagClass!==e.tagClass&&o.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+n.tagClass+'"'),n.type!==e.type&&o.push("["+e.name+'] Expected type "'+e.type+'", got "'+n.type+'"'));return c};var _nonLatinRegex=/[^\\u0000-\\u00ff]/;asn1$8.prettyPrint=function(n,e,t){var o="";e=e||0,t=t||2,e>0&&(o+=`
`);for(var c="",l=0;l<e*t;++l)c+=" ";switch(o+=c+"Tag: ",n.tagClass){case asn1$8.Class.UNIVERSAL:o+="Universal:";break;case asn1$8.Class.APPLICATION:o+="Application:";break;case asn1$8.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case asn1$8.Class.PRIVATE:o+="Private:";break}if(n.tagClass===asn1$8.Class.UNIVERSAL)switch(o+=n.type,n.type){case asn1$8.Type.NONE:o+=" (None)";break;case asn1$8.Type.BOOLEAN:o+=" (Boolean)";break;case asn1$8.Type.INTEGER:o+=" (Integer)";break;case asn1$8.Type.BITSTRING:o+=" (Bit string)";break;case asn1$8.Type.OCTETSTRING:o+=" (Octet string)";break;case asn1$8.Type.NULL:o+=" (Null)";break;case asn1$8.Type.OID:o+=" (Object Identifier)";break;case asn1$8.Type.ODESC:o+=" (Object Descriptor)";break;case asn1$8.Type.EXTERNAL:o+=" (External or Instance of)";break;case asn1$8.Type.REAL:o+=" (Real)";break;case asn1$8.Type.ENUMERATED:o+=" (Enumerated)";break;case asn1$8.Type.EMBEDDED:o+=" (Embedded PDV)";break;case asn1$8.Type.UTF8:o+=" (UTF8)";break;case asn1$8.Type.ROID:o+=" (Relative Object Identifier)";break;case asn1$8.Type.SEQUENCE:o+=" (Sequence)";break;case asn1$8.Type.SET:o+=" (Set)";break;case asn1$8.Type.PRINTABLESTRING:o+=" (Printable String)";break;case asn1$8.Type.IA5String:o+=" (IA5String (ASCII))";break;case asn1$8.Type.UTCTIME:o+=" (UTC time)";break;case asn1$8.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case asn1$8.Type.BMPSTRING:o+=" (BMP String)";break}else o+=n.type;if(o+=`
`,o+=c+"Constructed: "+n.constructed+`
`,n.composed){for(var h=0,d="",l=0;l<n.value.length;++l)n.value[l]!==void 0&&(h+=1,d+=asn1$8.prettyPrint(n.value[l],e+1,t),l+1<n.value.length&&(d+=","));o+=c+"Sub values: "+h+d}else{if(o+=c+"Value: ",n.type===asn1$8.Type.OID){var g=asn1$8.derToOid(n.value);o+=g,forge$A.pki&&forge$A.pki.oids&&g in forge$A.pki.oids&&(o+=" ("+forge$A.pki.oids[g]+") ")}if(n.type===asn1$8.Type.INTEGER)try{o+=asn1$8.derToInteger(n.value)}catch{o+="0x"+forge$A.util.bytesToHex(n.value)}else if(n.type===asn1$8.Type.BITSTRING){if(n.value.length>1?o+="0x"+forge$A.util.bytesToHex(n.value.slice(1)):o+="(none)",n.value.length>0){var m=n.value.charCodeAt(0);m==1?o+=" (1 unused bit shown)":m>1&&(o+=" ("+m+" unused bits shown)")}}else if(n.type===asn1$8.Type.OCTETSTRING)_nonLatinRegex.test(n.value)||(o+="("+n.value+") "),o+="0x"+forge$A.util.bytesToHex(n.value);else if(n.type===asn1$8.Type.UTF8)try{o+=forge$A.util.decodeUtf8(n.value)}catch(v){if(v.message==="URI malformed")o+="0x"+forge$A.util.bytesToHex(n.value)+" (malformed UTF8)";else throw v}else n.type===asn1$8.Type.PRINTABLESTRING||n.type===asn1$8.Type.IA5String?o+=n.value:_nonLatinRegex.test(n.value)?o+="0x"+forge$A.util.bytesToHex(n.value):n.value.length===0?o+="[null]":o+=n.value}return o};var forge$z=forge$D;forge$z.cipher=forge$z.cipher||{};forge$z.cipher.algorithms=forge$z.cipher.algorithms||{};forge$z.cipher.createCipher=function(n,e){var t=n;if(typeof t=="string"&&(t=forge$z.cipher.getAlgorithm(t),t&&(t=t())),!t)throw new Error("Unsupported algorithm: "+n);return new forge$z.cipher.BlockCipher({algorithm:t,key:e,decrypt:!1})};forge$z.cipher.createDecipher=function(n,e){var t=n;if(typeof t=="string"&&(t=forge$z.cipher.getAlgorithm(t),t&&(t=t())),!t)throw new Error("Unsupported algorithm: "+n);return new forge$z.cipher.BlockCipher({algorithm:t,key:e,decrypt:!0})};forge$z.cipher.registerAlgorithm=function(n,e){n=n.toUpperCase(),forge$z.cipher.algorithms[n]=e};forge$z.cipher.getAlgorithm=function(n){return n=n.toUpperCase(),n in forge$z.cipher.algorithms?forge$z.cipher.algorithms[n]:null};var BlockCipher=forge$z.cipher.BlockCipher=function(n){this.algorithm=n.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=n.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=n.decrypt,this.algorithm.initialize(n)};BlockCipher.prototype.start=function(n){n=n||{};var e={};for(var t in n)e[t]=n[t];e.decrypt=this._decrypt,this._finish=!1,this._input=forge$z.util.createBuffer(),this.output=n.output||forge$z.util.createBuffer(),this.mode.start(e)};BlockCipher.prototype.update=function(n){for(n&&this._input.putBuffer(n);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BlockCipher.prototype.finish=function(n){n&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(t){return n(this.blockSize,t,!1)},this.mode.unpad=function(t){return n(this.blockSize,t,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))};var forge$y=forge$D;forge$y.cipher=forge$y.cipher||{};var modes=forge$y.cipher.modes=forge$y.cipher.modes||{};modes.ecb=function(n){n=n||{},this.name="ECB",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes.ecb.prototype.start=function(n){};modes.ecb.prototype.encrypt=function(n,e,t){if(n.length()<this.blockSize&&!(t&&n.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=n.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o])};modes.ecb.prototype.decrypt=function(n,e,t){if(n.length()<this.blockSize&&!(t&&n.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=n.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o])};modes.ecb.prototype.pad=function(n,e){var t=n.length()===this.blockSize?this.blockSize:this.blockSize-n.length();return n.fillWithByte(t,t),!0};modes.ecb.prototype.unpad=function(n,e){if(e.overflow>0)return!1;var t=n.length(),o=n.at(t-1);return o>this.blockSize<<2?!1:(n.truncate(o),!0)};modes.cbc=function(n){n=n||{},this.name="CBC",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes.cbc.prototype.start=function(n){if(n.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in n)this._iv=transformIV(n.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};modes.cbc.prototype.encrypt=function(n,e,t){if(n.length()<this.blockSize&&!(t&&n.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=this._prev[o]^n.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]);this._prev=this._outBlock};modes.cbc.prototype.decrypt=function(n,e,t){if(n.length()<this.blockSize&&!(t&&n.length()>0))return!0;for(var o=0;o<this._ints;++o)this._inBlock[o]=n.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._prev[o]^this._outBlock[o]);this._prev=this._inBlock.slice(0)};modes.cbc.prototype.pad=function(n,e){var t=n.length()===this.blockSize?this.blockSize:this.blockSize-n.length();return n.fillWithByte(t,t),!0};modes.cbc.prototype.unpad=function(n,e){if(e.overflow>0)return!1;var t=n.length(),o=n.at(t-1);return o>this.blockSize<<2?!1:(n.truncate(o),!0)};modes.cfb=function(n){n=n||{},this.name="CFB",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge$y.util.createBuffer(),this._partialBytes=0};modes.cfb.prototype.start=function(n){if(!("iv"in n))throw new Error("Invalid IV parameter.");this._iv=transformIV(n.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.cfb.prototype.encrypt=function(n,e,t){var o=n.length();if(o===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&o>=this.blockSize){for(var c=0;c<this._ints;++c)this._inBlock[c]=n.getInt32()^this._outBlock[c],e.putInt32(this._inBlock[c]);return}var l=(this.blockSize-o)%this.blockSize;l>0&&(l=this.blockSize-l),this._partialOutput.clear();for(var c=0;c<this._ints;++c)this._partialBlock[c]=n.getInt32()^this._outBlock[c],this._partialOutput.putInt32(this._partialBlock[c]);if(l>0)n.read-=this.blockSize;else for(var c=0;c<this._ints;++c)this._inBlock[c]=this._partialBlock[c];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),l>0&&!t)return e.putBytes(this._partialOutput.getBytes(l-this._partialBytes)),this._partialBytes=l,!0;e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0};modes.cfb.prototype.decrypt=function(n,e,t){var o=n.length();if(o===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&o>=this.blockSize){for(var c=0;c<this._ints;++c)this._inBlock[c]=n.getInt32(),e.putInt32(this._inBlock[c]^this._outBlock[c]);return}var l=(this.blockSize-o)%this.blockSize;l>0&&(l=this.blockSize-l),this._partialOutput.clear();for(var c=0;c<this._ints;++c)this._partialBlock[c]=n.getInt32(),this._partialOutput.putInt32(this._partialBlock[c]^this._outBlock[c]);if(l>0)n.read-=this.blockSize;else for(var c=0;c<this._ints;++c)this._inBlock[c]=this._partialBlock[c];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),l>0&&!t)return e.putBytes(this._partialOutput.getBytes(l-this._partialBytes)),this._partialBytes=l,!0;e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0};modes.ofb=function(n){n=n||{},this.name="OFB",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$y.util.createBuffer(),this._partialBytes=0};modes.ofb.prototype.start=function(n){if(!("iv"in n))throw new Error("Invalid IV parameter.");this._iv=transformIV(n.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.ofb.prototype.encrypt=function(n,e,t){var o=n.length();if(n.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&o>=this.blockSize){for(var c=0;c<this._ints;++c)e.putInt32(n.getInt32()^this._outBlock[c]),this._inBlock[c]=this._outBlock[c];return}var l=(this.blockSize-o)%this.blockSize;l>0&&(l=this.blockSize-l),this._partialOutput.clear();for(var c=0;c<this._ints;++c)this._partialOutput.putInt32(n.getInt32()^this._outBlock[c]);if(l>0)n.read-=this.blockSize;else for(var c=0;c<this._ints;++c)this._inBlock[c]=this._outBlock[c];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),l>0&&!t)return e.putBytes(this._partialOutput.getBytes(l-this._partialBytes)),this._partialBytes=l,!0;e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0};modes.ofb.prototype.decrypt=modes.ofb.prototype.encrypt;modes.ctr=function(n){n=n||{},this.name="CTR",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$y.util.createBuffer(),this._partialBytes=0};modes.ctr.prototype.start=function(n){if(!("iv"in n))throw new Error("Invalid IV parameter.");this._iv=transformIV(n.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.ctr.prototype.encrypt=function(n,e,t){var o=n.length();if(o===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&o>=this.blockSize)for(var c=0;c<this._ints;++c)e.putInt32(n.getInt32()^this._outBlock[c]);else{var l=(this.blockSize-o)%this.blockSize;l>0&&(l=this.blockSize-l),this._partialOutput.clear();for(var c=0;c<this._ints;++c)this._partialOutput.putInt32(n.getInt32()^this._outBlock[c]);if(l>0&&(n.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),l>0&&!t)return e.putBytes(this._partialOutput.getBytes(l-this._partialBytes)),this._partialBytes=l,!0;e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0}inc32(this._inBlock)};modes.ctr.prototype.decrypt=modes.ctr.prototype.encrypt;modes.gcm=function(n){n=n||{},this.name="GCM",this.cipher=n.cipher,this.blockSize=n.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge$y.util.createBuffer(),this._partialBytes=0,this._R=3774873600};modes.gcm.prototype.start=function(n){if(!("iv"in n))throw new Error("Invalid IV parameter.");var e=forge$y.util.createBuffer(n.iv);this._cipherLength=0;var t;if("additionalData"in n?t=forge$y.util.createBuffer(n.additionalData):t=forge$y.util.createBuffer(),"tagLength"in n?this._tagLength=n.tagLength:this._tagLength=128,this._tag=null,n.decrypt&&(this._tag=forge$y.util.createBuffer(n.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=e.length();if(o===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(o*8)))}this._inBlock=this._j0.slice(0),inc32(this._inBlock),this._partialBytes=0,t=forge$y.util.createBuffer(t),this._aDataLength=from64To32(t.length()*8);var c=t.length()%this.blockSize;for(c&&t.fillWithByte(0,this.blockSize-c),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])};modes.gcm.prototype.encrypt=function(n,e,t){var o=n.length();if(o===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&o>=this.blockSize){for(var c=0;c<this._ints;++c)e.putInt32(this._outBlock[c]^=n.getInt32());this._cipherLength+=this.blockSize}else{var l=(this.blockSize-o)%this.blockSize;l>0&&(l=this.blockSize-l),this._partialOutput.clear();for(var c=0;c<this._ints;++c)this._partialOutput.putInt32(n.getInt32()^this._outBlock[c]);if(l<=0||t){if(t){var h=o%this.blockSize;this._cipherLength+=h,this._partialOutput.truncate(this.blockSize-h)}else this._cipherLength+=this.blockSize;for(var c=0;c<this._ints;++c)this._outBlock[c]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),l>0&&!t)return n.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(l-this._partialBytes)),this._partialBytes=l,!0;e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),inc32(this._inBlock)};modes.gcm.prototype.decrypt=function(n,e,t){var o=n.length();if(o<this.blockSize&&!(t&&o>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),inc32(this._inBlock),this._hashBlock[0]=n.getInt32(),this._hashBlock[1]=n.getInt32(),this._hashBlock[2]=n.getInt32(),this._hashBlock[3]=n.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var c=0;c<this._ints;++c)e.putInt32(this._outBlock[c]^this._hashBlock[c]);o<this.blockSize?this._cipherLength+=o%this.blockSize:this._cipherLength+=this.blockSize};modes.gcm.prototype.afterFinish=function(n,e){var t=!0;e.decrypt&&e.overflow&&n.truncate(this.blockSize-e.overflow),this.tag=forge$y.util.createBuffer();var o=this._aDataLength.concat(from64To32(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,o);var c=[];this.cipher.encrypt(this._j0,c);for(var l=0;l<this._ints;++l)this.tag.putInt32(this._s[l]^c[l]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(t=!1),t};modes.gcm.prototype.multiply=function(n,e){for(var t=[0,0,0,0],o=e.slice(0),c=0;c<128;++c){var l=n[c/32|0]&1<<31-c%32;l&&(t[0]^=o[0],t[1]^=o[1],t[2]^=o[2],t[3]^=o[3]),this.pow(o,o)}return t};modes.gcm.prototype.pow=function(n,e){for(var t=n[3]&1,o=3;o>0;--o)e[o]=n[o]>>>1|(n[o-1]&1)<<31;e[0]=n[0]>>>1,t&&(e[0]^=this._R)};modes.gcm.prototype.tableMultiply=function(n){for(var e=[0,0,0,0],t=0;t<32;++t){var o=t/8|0,c=n[o]>>>(7-t%8)*4&15,l=this._m[t][c];e[0]^=l[0],e[1]^=l[1],e[2]^=l[2],e[3]^=l[3]}return e};modes.gcm.prototype.ghash=function(n,e,t){return e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3],this.tableMultiply(e)};modes.gcm.prototype.generateHashTable=function(n,e){for(var t=8/e,o=4*t,c=16*t,l=new Array(c),h=0;h<c;++h){var d=[0,0,0,0],g=h/o|0,m=(o-1-h%o)*e;d[g]=1<<e-1<<m,l[h]=this.generateSubHashTable(this.multiply(d,n),e)}return l};modes.gcm.prototype.generateSubHashTable=function(n,e){var t=1<<e,o=t>>>1,c=new Array(t);c[o]=n.slice(0);for(var l=o>>>1;l>0;)this.pow(c[2*l],c[l]=[]),l>>=1;for(l=2;l<o;){for(var h=1;h<l;++h){var d=c[l],g=c[h];c[l+h]=[d[0]^g[0],d[1]^g[1],d[2]^g[2],d[3]^g[3]]}l*=2}for(c[0]=[0,0,0,0],l=o+1;l<t;++l){var m=c[l^o];c[l]=[n[0]^m[0],n[1]^m[1],n[2]^m[2],n[3]^m[3]]}return c};function transformIV(n,e){if(typeof n=="string"&&(n=forge$y.util.createBuffer(n)),forge$y.util.isArray(n)&&n.length>4){var t=n;n=forge$y.util.createBuffer();for(var o=0;o<t.length;++o)n.putByte(t[o])}if(n.length()<e)throw new Error("Invalid IV length; got "+n.length()+" bytes and expected "+e+" bytes.");if(!forge$y.util.isArray(n)){for(var c=[],l=e/4,o=0;o<l;++o)c.push(n.getInt32());n=c}return n}function inc32(n){n[n.length-1]=n[n.length-1]+1&4294967295}function from64To32(n){return[n/4294967296|0,n&4294967295]}var forge$x=forge$D;forge$x.aes=forge$x.aes||{};forge$x.aes.startEncrypting=function(n,e,t,o){var c=_createCipher$1({key:n,output:t,decrypt:!1,mode:o});return c.start(e),c};forge$x.aes.createEncryptionCipher=function(n,e){return _createCipher$1({key:n,output:null,decrypt:!1,mode:e})};forge$x.aes.startDecrypting=function(n,e,t,o){var c=_createCipher$1({key:n,output:t,decrypt:!0,mode:o});return c.start(e),c};forge$x.aes.createDecryptionCipher=function(n,e){return _createCipher$1({key:n,output:null,decrypt:!0,mode:e})};forge$x.aes.Algorithm=function(n,e){init||initialize();var t=this;t.name=n,t.mode=new e({blockSize:16,cipher:{encrypt:function(o,c){return _updateBlock$1(t._w,o,c,!1)},decrypt:function(o,c){return _updateBlock$1(t._w,o,c,!0)}}}),t._init=!1};forge$x.aes.Algorithm.prototype.initialize=function(n){if(!this._init){var e=n.key,t;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=forge$x.util.createBuffer(e);else if(forge$x.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){t=e,e=forge$x.util.createBuffer();for(var o=0;o<t.length;++o)e.putByte(t[o])}if(!forge$x.util.isArray(e)){t=e,e=[];var c=t.length();if(c===16||c===24||c===32){c=c>>>2;for(var o=0;o<c;++o)e.push(t.getInt32())}}if(!forge$x.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var l=this.mode.name,h=["CFB","OFB","CTR","GCM"].indexOf(l)!==-1;this._w=_expandKey(e,n.decrypt&&!h),this._init=!0}};forge$x.aes._expandKey=function(n,e){return init||initialize(),_expandKey(n,e)};forge$x.aes._updateBlock=_updateBlock$1;registerAlgorithm$1("AES-ECB",forge$x.cipher.modes.ecb);registerAlgorithm$1("AES-CBC",forge$x.cipher.modes.cbc);registerAlgorithm$1("AES-CFB",forge$x.cipher.modes.cfb);registerAlgorithm$1("AES-OFB",forge$x.cipher.modes.ofb);registerAlgorithm$1("AES-CTR",forge$x.cipher.modes.ctr);registerAlgorithm$1("AES-GCM",forge$x.cipher.modes.gcm);function registerAlgorithm$1(n,e){var t=function(){return new forge$x.aes.Algorithm(n,e)};forge$x.cipher.registerAlgorithm(n,t)}var init=!1,Nb=4,sbox,isbox,rcon,mix,imix;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var n=new Array(256),e=0;e<128;++e)n[e]=e<<1,n[e+128]=e+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(var e=0;e<4;++e)mix[e]=new Array(256),imix[e]=new Array(256);for(var t=0,o=0,c,l,h,d,g,m,v,e=0;e<256;++e){d=o^o<<1^o<<2^o<<3^o<<4,d=d>>8^d&255^99,sbox[t]=d,isbox[d]=t,g=n[d],c=n[t],l=n[c],h=n[l],m=g<<24^d<<16^d<<8^(d^g),v=(c^l^h)<<24^(t^h)<<16^(t^l^h)<<8^(t^c^h);for(var _=0;_<4;++_)mix[_][t]=m,imix[_][d]=v,m=m<<24|m>>>8,v=v<<24|v>>>8;t===0?t=o=1:(t=c^n[n[n[c^h]]],o^=n[n[o]])}}function _expandKey(n,e){for(var t=n.slice(0),o,c=1,l=t.length,h=l+6+1,d=Nb*h,g=l;g<d;++g)o=t[g-1],g%l===0?(o=sbox[o>>>16&255]<<24^sbox[o>>>8&255]<<16^sbox[o&255]<<8^sbox[o>>>24]^rcon[c]<<24,c++):l>6&&g%l===4&&(o=sbox[o>>>24]<<24^sbox[o>>>16&255]<<16^sbox[o>>>8&255]<<8^sbox[o&255]),t[g]=t[g-l]^o;if(e){var m,v=imix[0],_=imix[1],p=imix[2],a=imix[3],u=t.slice(0);d=t.length;for(var g=0,y=d-Nb;g<d;g+=Nb,y-=Nb)if(g===0||g===d-Nb)u[g]=t[y],u[g+1]=t[y+3],u[g+2]=t[y+2],u[g+3]=t[y+1];else for(var b=0;b<Nb;++b)m=t[y+b],u[g+(3&-b)]=v[sbox[m>>>24]]^_[sbox[m>>>16&255]]^p[sbox[m>>>8&255]]^a[sbox[m&255]];t=u}return t}function _updateBlock$1(n,e,t,o){var c=n.length/4-1,l,h,d,g,m;o?(l=imix[0],h=imix[1],d=imix[2],g=imix[3],m=isbox):(l=mix[0],h=mix[1],d=mix[2],g=mix[3],m=sbox);var v,_,p,a,u,y,b;v=e[0]^n[0],_=e[o?3:1]^n[1],p=e[2]^n[2],a=e[o?1:3]^n[3];for(var w=3,T=1;T<c;++T)u=l[v>>>24]^h[_>>>16&255]^d[p>>>8&255]^g[a&255]^n[++w],y=l[_>>>24]^h[p>>>16&255]^d[a>>>8&255]^g[v&255]^n[++w],b=l[p>>>24]^h[a>>>16&255]^d[v>>>8&255]^g[_&255]^n[++w],a=l[a>>>24]^h[v>>>16&255]^d[_>>>8&255]^g[p&255]^n[++w],v=u,_=y,p=b;t[0]=m[v>>>24]<<24^m[_>>>16&255]<<16^m[p>>>8&255]<<8^m[a&255]^n[++w],t[o?3:1]=m[_>>>24]<<24^m[p>>>16&255]<<16^m[a>>>8&255]<<8^m[v&255]^n[++w],t[2]=m[p>>>24]<<24^m[a>>>16&255]<<16^m[v>>>8&255]<<8^m[_&255]^n[++w],t[o?1:3]=m[a>>>24]<<24^m[v>>>16&255]<<16^m[_>>>8&255]<<8^m[p&255]^n[++w]}function _createCipher$1(n){n=n||{};var e=(n.mode||"CBC").toUpperCase(),t="AES-"+e,o;n.decrypt?o=forge$x.cipher.createDecipher(t,n.key):o=forge$x.cipher.createCipher(t,n.key);var c=o.start;return o.start=function(l,h){var d=null;h instanceof forge$x.util.ByteBuffer&&(d=h,h={}),h=h||{},h.output=d,h.iv=l,c.call(o,h)},o}var forge$w=forge$D;forge$w.des=forge$w.des||{};forge$w.des.startEncrypting=function(n,e,t,o){var c=_createCipher({key:n,output:t,decrypt:!1,mode:o||(e===null?"ECB":"CBC")});return c.start(e),c};forge$w.des.createEncryptionCipher=function(n,e){return _createCipher({key:n,output:null,decrypt:!1,mode:e})};forge$w.des.startDecrypting=function(n,e,t,o){var c=_createCipher({key:n,output:t,decrypt:!0,mode:o||(e===null?"ECB":"CBC")});return c.start(e),c};forge$w.des.createDecryptionCipher=function(n,e){return _createCipher({key:n,output:null,decrypt:!0,mode:e})};forge$w.des.Algorithm=function(n,e){var t=this;t.name=n,t.mode=new e({blockSize:8,cipher:{encrypt:function(o,c){return _updateBlock(t._keys,o,c,!1)},decrypt:function(o,c){return _updateBlock(t._keys,o,c,!0)}}}),t._init=!1};forge$w.des.Algorithm.prototype.initialize=function(n){if(!this._init){var e=forge$w.util.createBuffer(n.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=_createKeys(e),this._init=!0}};registerAlgorithm("DES-ECB",forge$w.cipher.modes.ecb);registerAlgorithm("DES-CBC",forge$w.cipher.modes.cbc);registerAlgorithm("DES-CFB",forge$w.cipher.modes.cfb);registerAlgorithm("DES-OFB",forge$w.cipher.modes.ofb);registerAlgorithm("DES-CTR",forge$w.cipher.modes.ctr);registerAlgorithm("3DES-ECB",forge$w.cipher.modes.ecb);registerAlgorithm("3DES-CBC",forge$w.cipher.modes.cbc);registerAlgorithm("3DES-CFB",forge$w.cipher.modes.cfb);registerAlgorithm("3DES-OFB",forge$w.cipher.modes.ofb);registerAlgorithm("3DES-CTR",forge$w.cipher.modes.ctr);function registerAlgorithm(n,e){var t=function(){return new forge$w.des.Algorithm(n,e)};forge$w.cipher.registerAlgorithm(n,t)}var spfunction1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],spfunction2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],spfunction3=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],spfunction4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],spfunction5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],spfunction6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],spfunction7=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],spfunction8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _createKeys(n){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],t=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],o=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],c=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],l=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],h=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],d=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],g=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],m=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],v=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],_=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],a=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],u=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=n.length()>8?3:1,b=[],w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],T=0,B,H=0;H<y;H++){var J=n.getInt32(),W=n.getInt32();B=(J>>>4^W)&252645135,W^=B,J^=B<<4,B=(W>>>-16^J)&65535,J^=B,W^=B<<-16,B=(J>>>2^W)&858993459,W^=B,J^=B<<2,B=(W>>>-16^J)&65535,J^=B,W^=B<<-16,B=(J>>>1^W)&1431655765,W^=B,J^=B<<1,B=(W>>>8^J)&16711935,J^=B,W^=B<<8,B=(J>>>1^W)&1431655765,W^=B,J^=B<<1,B=J<<8|W>>>20&240,J=W<<24|W<<8&16711680|W>>>8&65280|W>>>24&240,W=B;for(var fe=0;fe<w.length;++fe){w[fe]?(J=J<<2|J>>>26,W=W<<2|W>>>26):(J=J<<1|J>>>27,W=W<<1|W>>>27),J&=-15,W&=-15;var re=e[J>>>28]|t[J>>>24&15]|o[J>>>20&15]|c[J>>>16&15]|l[J>>>12&15]|h[J>>>8&15]|d[J>>>4&15],se=g[W>>>28]|m[W>>>24&15]|v[W>>>20&15]|_[W>>>16&15]|p[W>>>12&15]|a[W>>>8&15]|u[W>>>4&15];B=(se>>>16^re)&65535,b[T++]=re^B,b[T++]=se^B<<16}}return b}function _updateBlock(n,e,t,o){var c=n.length===32?3:9,l;c===3?l=o?[30,-2,-2]:[0,32,2]:l=o?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var h,d=e[0],g=e[1];h=(d>>>4^g)&252645135,g^=h,d^=h<<4,h=(d>>>16^g)&65535,g^=h,d^=h<<16,h=(g>>>2^d)&858993459,d^=h,g^=h<<2,h=(g>>>8^d)&16711935,d^=h,g^=h<<8,h=(d>>>1^g)&1431655765,g^=h,d^=h<<1,d=d<<1|d>>>31,g=g<<1|g>>>31;for(var m=0;m<c;m+=3){for(var v=l[m+1],_=l[m+2],p=l[m];p!=v;p+=_){var a=g^n[p],u=(g>>>4|g<<28)^n[p+1];h=d,d=g,g=h^(spfunction2[a>>>24&63]|spfunction4[a>>>16&63]|spfunction6[a>>>8&63]|spfunction8[a&63]|spfunction1[u>>>24&63]|spfunction3[u>>>16&63]|spfunction5[u>>>8&63]|spfunction7[u&63])}h=d,d=g,g=h}d=d>>>1|d<<31,g=g>>>1|g<<31,h=(d>>>1^g)&1431655765,g^=h,d^=h<<1,h=(g>>>8^d)&16711935,d^=h,g^=h<<8,h=(g>>>2^d)&858993459,d^=h,g^=h<<2,h=(d>>>16^g)&65535,g^=h,d^=h<<16,h=(d>>>4^g)&252645135,g^=h,d^=h<<4,t[0]=d,t[1]=g}function _createCipher(n){n=n||{};var e=(n.mode||"CBC").toUpperCase(),t="DES-"+e,o;n.decrypt?o=forge$w.cipher.createDecipher(t,n.key):o=forge$w.cipher.createCipher(t,n.key);var c=o.start;return o.start=function(l,h){var d=null;h instanceof forge$w.util.ByteBuffer&&(d=h,h={}),h=h||{},h.output=d,h.iv=l,c.call(o,h)},o}var forge$v=forge$D;forge$v.md=forge$v.md||{};forge$v.md.algorithms=forge$v.md.algorithms||{};var forge$u=forge$D,hmac$2=forge$u.hmac=forge$u.hmac||{};hmac$2.create=function(){var n=null,e=null,t=null,o=null,c={};return c.start=function(l,h){if(l!==null)if(typeof l=="string")if(l=l.toLowerCase(),l in forge$u.md.algorithms)e=forge$u.md.algorithms[l].create();else throw new Error('Unknown hash algorithm "'+l+'"');else e=l;if(h===null)h=n;else{if(typeof h=="string")h=forge$u.util.createBuffer(h);else if(forge$u.util.isArray(h)){var d=h;h=forge$u.util.createBuffer();for(var g=0;g<d.length;++g)h.putByte(d[g])}var m=h.length();m>e.blockLength&&(e.start(),e.update(h.bytes()),h=e.digest()),t=forge$u.util.createBuffer(),o=forge$u.util.createBuffer(),m=h.length();for(var g=0;g<m;++g){var d=h.at(g);t.putByte(54^d),o.putByte(92^d)}if(m<e.blockLength)for(var d=e.blockLength-m,g=0;g<d;++g)t.putByte(54),o.putByte(92);n=h,t=t.bytes(),o=o.bytes()}e.start(),e.update(t)},c.update=function(l){e.update(l)},c.getMac=function(){var l=e.digest().bytes();return e.start(),e.update(o),e.update(l),e.digest()},c.digest=c.getMac,c};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(__viteBrowserExternal$1);var forge$t=forge$D,pkcs5=forge$t.pkcs5=forge$t.pkcs5||{},crypto$4;forge$t.util.isNodejs&&!forge$t.options.usePureJavaScript&&(crypto$4=require$$0$1);var pbkdf2$4=forge$t.pbkdf2=pkcs5.pbkdf2=function(n,e,t,o,c,l){if(typeof c=="function"&&(l=c,c=null),forge$t.util.isNodejs&&!forge$t.options.usePureJavaScript&&crypto$4.pbkdf2&&(c===null||typeof c!="object")&&(crypto$4.pbkdf2Sync.length>4||!c||c==="sha1"))return typeof c!="string"&&(c="sha1"),n=Buffer.from(n,"binary"),e=Buffer.from(e,"binary"),l?crypto$4.pbkdf2Sync.length===4?crypto$4.pbkdf2(n,e,t,o,function(B,H){if(B)return l(B);l(null,H.toString("binary"))}):crypto$4.pbkdf2(n,e,t,o,c,function(B,H){if(B)return l(B);l(null,H.toString("binary"))}):crypto$4.pbkdf2Sync.length===4?crypto$4.pbkdf2Sync(n,e,t,o).toString("binary"):crypto$4.pbkdf2Sync(n,e,t,o,c).toString("binary");if((typeof c>"u"||c===null)&&(c="sha1"),typeof c=="string"){if(!(c in forge$t.md.algorithms))throw new Error("Unknown hash algorithm: "+c);c=forge$t.md[c].create()}var h=c.digestLength;if(o>4294967295*h){var d=new Error("Derived key is too long.");if(l)return l(d);throw d}var g=Math.ceil(o/h),m=o-(g-1)*h,v=forge$t.hmac.create();v.start(c,n);var _="",p,a,u;if(!l){for(var y=1;y<=g;++y){v.start(null,null),v.update(e),v.update(forge$t.util.int32ToBytes(y)),p=u=v.digest().getBytes();for(var b=2;b<=t;++b)v.start(null,null),v.update(u),a=v.digest().getBytes(),p=forge$t.util.xorBytes(p,a,h),u=a;_+=y<g?p:p.substr(0,m)}return _}var y=1,b;function w(){if(y>g)return l(null,_);v.start(null,null),v.update(e),v.update(forge$t.util.int32ToBytes(y)),p=u=v.digest().getBytes(),b=2,T()}function T(){if(b<=t)return v.start(null,null),v.update(u),a=v.digest().getBytes(),p=forge$t.util.xorBytes(p,a,h),u=a,++b,forge$t.util.setImmediate(T);_+=y<g?p:p.substr(0,m),++y,w()}w()};const forgePbkdf2=getDefaultExportFromCjs(pbkdf2$4);var forge$s=forge$D,pem=forge$s.pem=forge$s.pem||{};pem.encode=function(n,e){e=e||{};var t="-----BEGIN "+n.type+`-----\r
`,o;if(n.procType&&(o={name:"Proc-Type",values:[String(n.procType.version),n.procType.type]},t+=foldHeader(o)),n.contentDomain&&(o={name:"Content-Domain",values:[n.contentDomain]},t+=foldHeader(o)),n.dekInfo&&(o={name:"DEK-Info",values:[n.dekInfo.algorithm]},n.dekInfo.parameters&&o.values.push(n.dekInfo.parameters),t+=foldHeader(o)),n.headers)for(var c=0;c<n.headers.length;++c)t+=foldHeader(n.headers[c]);return n.procType&&(t+=`\r
`),t+=forge$s.util.encode64(n.body,e.maxline||64)+`\r
`,t+="-----END "+n.type+`-----\r
`,t};pem.decode=function(n){for(var e=[],t=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,o=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,c=/\r?\n/,l;l=t.exec(n),!!l;){var h=l[1];h==="NEW CERTIFICATE REQUEST"&&(h="CERTIFICATE REQUEST");var d={type:h,procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge$s.util.decode64(l[3])};if(e.push(d),!!l[2]){for(var g=l[2].split(c),m=0;l&&m<g.length;){for(var v=g[m].replace(/\s+$/,""),_=m+1;_<g.length;++_){var p=g[_];if(!/\s/.test(p[0]))break;v+=p,m=_}if(l=v.match(o),l){for(var a={name:l[1],values:[]},u=l[2].split(","),y=0;y<u.length;++y)a.values.push(ltrim(u[y]));if(d.procType)if(!d.contentDomain&&a.name==="Content-Domain")d.contentDomain=u[0]||"";else if(!d.dekInfo&&a.name==="DEK-Info"){if(a.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');d.dekInfo={algorithm:u[0],parameters:u[1]||null}}else d.headers.push(a);else{if(a.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(a.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');d.procType={version:u[0],type:u[1]}}}++m}if(d.procType==="ENCRYPTED"&&!d.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function foldHeader(n){for(var e=n.name+": ",t=[],o=function(g,m){return" "+m},c=0;c<n.values.length;++c)t.push(n.values[c].replace(/^(\S+\r\n)/,o));e+=t.join(",")+`\r
`;for(var l=0,h=-1,c=0;c<e.length;++c,++l)if(l>65&&h!==-1){var d=e[h];d===","?(++h,e=e.substr(0,h)+`\r
 `+e.substr(h)):e=e.substr(0,h)+`\r
`+d+e.substr(h+1),l=c-h-1,h=-1,++c}else(e[c]===" "||e[c]==="	"||e[c]===",")&&(h=c);return e}function ltrim(n){return n.replace(/^\s+/,"")}var forge$r=forge$D,sha256$2=forge$r.sha256=forge$r.sha256||{};forge$r.md.sha256=forge$r.md.algorithms.sha256=sha256$2;sha256$2.create=function(){_initialized$3||_init$3();var n=null,e=forge$r.util.createBuffer(),t=new Array(64),o={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var c=o.messageLengthSize/4,l=0;l<c;++l)o.fullMessageLength.push(0);return e=forge$r.util.createBuffer(),n={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},o},o.start(),o.update=function(c,l){l==="utf8"&&(c=forge$r.util.encodeUtf8(c));var h=c.length;o.messageLength+=h,h=[h/4294967296>>>0,h>>>0];for(var d=o.fullMessageLength.length-1;d>=0;--d)o.fullMessageLength[d]+=h[1],h[1]=h[0]+(o.fullMessageLength[d]/4294967296>>>0),o.fullMessageLength[d]=o.fullMessageLength[d]>>>0,h[0]=h[1]/4294967296>>>0;return e.putBytes(c),_update$3(n,t,e),(e.read>2048||e.length()===0)&&e.compact(),o},o.digest=function(){var c=forge$r.util.createBuffer();c.putBytes(e.bytes());var l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,h=l&o.blockLength-1;c.putBytes(_padding$3.substr(0,o.blockLength-h));for(var d,g,m=o.fullMessageLength[0]*8,v=0;v<o.fullMessageLength.length-1;++v)d=o.fullMessageLength[v+1]*8,g=d/4294967296>>>0,m+=g,c.putInt32(m>>>0),m=d>>>0;c.putInt32(m);var _={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3,h4:n.h4,h5:n.h5,h6:n.h6,h7:n.h7};_update$3(_,t,c);var p=forge$r.util.createBuffer();return p.putInt32(_.h0),p.putInt32(_.h1),p.putInt32(_.h2),p.putInt32(_.h3),p.putInt32(_.h4),p.putInt32(_.h5),p.putInt32(_.h6),p.putInt32(_.h7),p},o};var _padding$3=null,_initialized$3=!1,_k$2=null;function _init$3(){_padding$3=String.fromCharCode(128),_padding$3+=forge$r.util.fillString(String.fromCharCode(0),64),_k$2=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized$3=!0}function _update$3(n,e,t){for(var o,c,l,h,d,g,m,v,_,p,a,u,y,b,w,T=t.length();T>=64;){for(m=0;m<16;++m)e[m]=t.getInt32();for(;m<64;++m)o=e[m-2],o=(o>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,c=e[m-15],c=(c>>>7|c<<25)^(c>>>18|c<<14)^c>>>3,e[m]=o+e[m-7]+c+e[m-16]|0;for(v=n.h0,_=n.h1,p=n.h2,a=n.h3,u=n.h4,y=n.h5,b=n.h6,w=n.h7,m=0;m<64;++m)h=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),d=b^u&(y^b),l=(v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10),g=v&_|p&(v^_),o=w+h+d+_k$2[m]+e[m],c=l+g,w=b,b=y,y=u,u=a+o>>>0,a=p,p=_,_=v,v=o+c>>>0;n.h0=n.h0+v|0,n.h1=n.h1+_|0,n.h2=n.h2+p|0,n.h3=n.h3+a|0,n.h4=n.h4+u|0,n.h5=n.h5+y|0,n.h6=n.h6+b|0,n.h7=n.h7+w|0,T-=64}}var forge$q=forge$D,_crypto$1=null;forge$q.util.isNodejs&&!forge$q.options.usePureJavaScript&&!process.versions["node-webkit"]&&(_crypto$1=require$$0$1);var prng=forge$q.prng=forge$q.prng||{};prng.create=function(n){for(var e={plugin:n,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},t=n.md,o=new Array(32),c=0;c<32;++c)o[c]=t.create();e.pools=o,e.pool=0,e.generate=function(m,v){if(!v)return e.generateSync(m);var _=e.plugin.cipher,p=e.plugin.increment,a=e.plugin.formatKey,u=e.plugin.formatSeed,y=forge$q.util.createBuffer();e.key=null,b();function b(w){if(w)return v(w);if(y.length()>=m)return v(null,y.getBytes(m));if(e.generated>1048575&&(e.key=null),e.key===null)return forge$q.util.nextTick(function(){l(b)});var T=_(e.key,e.seed);e.generated+=T.length,y.putBytes(T),e.key=a(_(e.key,p(e.seed))),e.seed=u(_(e.key,e.seed)),forge$q.util.setImmediate(b)}},e.generateSync=function(m){var v=e.plugin.cipher,_=e.plugin.increment,p=e.plugin.formatKey,a=e.plugin.formatSeed;e.key=null;for(var u=forge$q.util.createBuffer();u.length()<m;){e.generated>1048575&&(e.key=null),e.key===null&&h();var y=v(e.key,e.seed);e.generated+=y.length,u.putBytes(y),e.key=p(v(e.key,_(e.seed))),e.seed=a(v(e.key,e.seed))}return u.getBytes(m)};function l(m){if(e.pools[0].messageLength>=32)return d(),m();var v=32-e.pools[0].messageLength<<5;e.seedFile(v,function(_,p){if(_)return m(_);e.collect(p),d(),m()})}function h(){if(e.pools[0].messageLength>=32)return d();var m=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(m)),d()}function d(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var m=e.plugin.md.create();m.update(e.keyBytes);for(var v=1,_=0;_<32;++_)e.reseeds%v===0&&(m.update(e.pools[_].digest().getBytes()),e.pools[_].start()),v=v<<1;e.keyBytes=m.digest().getBytes(),m.start(),m.update(e.keyBytes);var p=m.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(p),e.generated=0}function g(m){var v=null,_=forge$q.util.globalScope,p=_.crypto||_.msCrypto;p&&p.getRandomValues&&(v=function(J){return p.getRandomValues(J)});var a=forge$q.util.createBuffer();if(v)for(;a.length()<m;){var u=Math.max(1,Math.min(m-a.length(),65536)/4),y=new Uint32Array(Math.floor(u));try{v(y);for(var b=0;b<y.length;++b)a.putInt32(y[b])}catch(J){if(!(typeof QuotaExceededError<"u"&&J instanceof QuotaExceededError))throw J}}if(a.length()<m)for(var w,T,B,H=Math.floor(Math.random()*65536);a.length()<m;){T=16807*(H&65535),w=16807*(H>>16),T+=(w&32767)<<16,T+=w>>15,T=(T&2147483647)+(T>>31),H=T&4294967295;for(var b=0;b<3;++b)B=H>>>(b<<3),B^=Math.floor(Math.random()*256),a.putByte(B&255)}return a.getBytes(m)}return _crypto$1?(e.seedFile=function(m,v){_crypto$1.randomBytes(m,function(_,p){if(_)return v(_);v(null,p.toString())})},e.seedFileSync=function(m){return _crypto$1.randomBytes(m).toString()}):(e.seedFile=function(m,v){try{v(null,g(m))}catch(_){v(_)}},e.seedFileSync=g),e.collect=function(m){for(var v=m.length,_=0;_<v;++_)e.pools[e.pool].update(m.substr(_,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(m,v){for(var _="",p=0;p<v;p+=8)_+=String.fromCharCode(m>>p&255);e.collect(_)},e.registerWorker=function(m){if(m===self)e.seedFile=function(_,p){function a(u){var y=u.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",a),p(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",a),self.postMessage({forge:{prng:{needed:_}}})};else{var v=function(_){var p=_.data;p.forge&&p.forge.prng&&e.seedFile(p.forge.prng.needed,function(a,u){m.postMessage({forge:{prng:{err:a,bytes:u}}})})};m.addEventListener("message",v)}},e};var forge$p=forge$D;(function(){if(forge$p.random&&forge$p.random.getBytes){forge$p.random;return}(function(n){var e={},t=new Array(4),o=forge$p.util.createBuffer();e.formatKey=function(_){var p=forge$p.util.createBuffer(_);return _=new Array(4),_[0]=p.getInt32(),_[1]=p.getInt32(),_[2]=p.getInt32(),_[3]=p.getInt32(),forge$p.aes._expandKey(_,!1)},e.formatSeed=function(_){var p=forge$p.util.createBuffer(_);return _=new Array(4),_[0]=p.getInt32(),_[1]=p.getInt32(),_[2]=p.getInt32(),_[3]=p.getInt32(),_},e.cipher=function(_,p){return forge$p.aes._updateBlock(_,p,t,!1),o.putInt32(t[0]),o.putInt32(t[1]),o.putInt32(t[2]),o.putInt32(t[3]),o.getBytes()},e.increment=function(_){return++_[3],_},e.md=forge$p.md.sha256;function c(){var _=forge$p.prng.create(e);return _.getBytes=function(p,a){return _.generate(p,a)},_.getBytesSync=function(p){return _.generate(p)},_}var l=c(),h=null,d=forge$p.util.globalScope,g=d.crypto||d.msCrypto;if(g&&g.getRandomValues&&(h=function(_){return g.getRandomValues(_)}),forge$p.options.usePureJavaScript||!forge$p.util.isNodejs&&!h){if(l.collectInt(+new Date,32),typeof navigator<"u"){var m="";for(var v in navigator)try{typeof navigator[v]=="string"&&(m+=navigator[v])}catch{}l.collect(m),m=null}n&&(n().mousemove(function(_){l.collectInt(_.clientX,16),l.collectInt(_.clientY,16)}),n().keypress(function(_){l.collectInt(_.charCode,8)}))}if(!forge$p.random)forge$p.random=l;else for(var v in l)forge$p.random[v]=l[v];forge$p.random.createInstance=c,forge$p.random})(typeof jQuery<"u"?jQuery:null)})();var forge$o=forge$D,piTable=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s$1=[1,2,3,5],rol=function(n,e){return n<<e&65535|(n&65535)>>16-e},ror=function(n,e){return(n&65535)>>e|n<<16-e&65535};forge$o.rc2=forge$o.rc2||{};forge$o.rc2.expandKey=function(n,e){typeof n=="string"&&(n=forge$o.util.createBuffer(n)),e=e||128;var t=n,o=n.length(),c=e,l=Math.ceil(c/8),h=255>>(c&7),d;for(d=o;d<128;d++)t.putByte(piTable[t.at(d-1)+t.at(d-o)&255]);for(t.setAt(128-l,piTable[t.at(128-l)&h]),d=127-l;d>=0;d--)t.setAt(d,piTable[t.at(d+1)^t.at(d+l)]);return t};var createCipher=function(n,e,t){var o=!1,c=null,l=null,h=null,d,g,m,v,_=[];for(n=forge$o.rc2.expandKey(n,e),m=0;m<64;m++)_.push(n.getInt16Le());t?(d=function(u){for(m=0;m<4;m++)u[m]+=_[v]+(u[(m+3)%4]&u[(m+2)%4])+(~u[(m+3)%4]&u[(m+1)%4]),u[m]=rol(u[m],s$1[m]),v++},g=function(u){for(m=0;m<4;m++)u[m]+=_[u[(m+3)%4]&63]}):(d=function(u){for(m=3;m>=0;m--)u[m]=ror(u[m],s$1[m]),u[m]-=_[v]+(u[(m+3)%4]&u[(m+2)%4])+(~u[(m+3)%4]&u[(m+1)%4]),v--},g=function(u){for(m=3;m>=0;m--)u[m]-=_[u[(m+3)%4]&63]});var p=function(u){var y=[];for(m=0;m<4;m++){var b=c.getInt16Le();h!==null&&(t?b^=h.getInt16Le():h.putInt16Le(b)),y.push(b&65535)}v=t?0:63;for(var w=0;w<u.length;w++)for(var T=0;T<u[w][0];T++)u[w][1](y);for(m=0;m<4;m++)h!==null&&(t?h.putInt16Le(y[m]):y[m]^=h.getInt16Le()),l.putInt16Le(y[m])},a=null;return a={start:function(u,y){u&&typeof u=="string"&&(u=forge$o.util.createBuffer(u)),o=!1,c=forge$o.util.createBuffer(),l=y||new forge$o.util.createBuffer,h=u,a.output=l},update:function(u){for(o||c.putBuffer(u);c.length()>=8;)p([[5,d],[1,g],[6,d],[1,g],[5,d]])},finish:function(u){var y=!0;if(t)if(u)y=u(8,c,!t);else{var b=c.length()===8?8:8-c.length();c.fillWithByte(b,b)}if(y&&(o=!0,a.update()),!t&&(y=c.length()===0,y))if(u)y=u(8,l,!t);else{var w=l.length(),T=l.at(w-1);T>w?y=!1:l.truncate(T)}return y}},a};forge$o.rc2.startEncrypting=function(n,e,t){var o=forge$o.rc2.createEncryptionCipher(n,128);return o.start(e,t),o};forge$o.rc2.createEncryptionCipher=function(n,e){return createCipher(n,e,!0)};forge$o.rc2.startDecrypting=function(n,e,t){var o=forge$o.rc2.createDecryptionCipher(n,128);return o.start(e,t),o};forge$o.rc2.createDecryptionCipher=function(n,e){return createCipher(n,e,!1)};var forge$n=forge$D;forge$n.jsbn=forge$n.jsbn||{};var dbits;function BigInteger$4(n,e,t){this.data=[],n!=null&&(typeof n=="number"?this.fromNumber(n,e,t):e==null&&typeof n!="string"?this.fromString(n,256):this.fromString(n,e))}forge$n.jsbn.BigInteger=BigInteger$4;function nbi(){return new BigInteger$4(null)}function am1(n,e,t,o,c,l){for(;--l>=0;){var h=e*this.data[n++]+t.data[o]+c;c=Math.floor(h/67108864),t.data[o++]=h&67108863}return c}function am2(n,e,t,o,c,l){for(var h=e&32767,d=e>>15;--l>=0;){var g=this.data[n]&32767,m=this.data[n++]>>15,v=d*g+m*h;g=h*g+((v&32767)<<15)+t.data[o]+(c&1073741823),c=(g>>>30)+(v>>>15)+d*m+(c>>>30),t.data[o++]=g&1073741823}return c}function am3(n,e,t,o,c,l){for(var h=e&16383,d=e>>14;--l>=0;){var g=this.data[n]&16383,m=this.data[n++]>>14,v=d*g+m*h;g=h*g+((v&16383)<<14)+t.data[o]+c,c=(g>>28)+(v>>14)+d*m,t.data[o++]=g&268435455}return c}typeof navigator>"u"?(BigInteger$4.prototype.am=am3,dbits=28):navigator.appName=="Microsoft Internet Explorer"?(BigInteger$4.prototype.am=am2,dbits=30):navigator.appName!="Netscape"?(BigInteger$4.prototype.am=am1,dbits=26):(BigInteger$4.prototype.am=am3,dbits=28);BigInteger$4.prototype.DB=dbits;BigInteger$4.prototype.DM=(1<<dbits)-1;BigInteger$4.prototype.DV=1<<dbits;var BI_FP=52;BigInteger$4.prototype.FV=Math.pow(2,BI_FP);BigInteger$4.prototype.F1=BI_FP-dbits;BigInteger$4.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n)}function intAt(n,e){var t=BI_RC[n.charCodeAt(e)];return t??-1}function bnpCopyTo(n){for(var e=this.t-1;e>=0;--e)n.data[e]=this.data[e];n.t=this.t,n.s=this.s}function bnpFromInt(n){this.t=1,this.s=n<0?-1:0,n>0?this.data[0]=n:n<-1?this.data[0]=n+this.DV:this.t=0}function nbv(n){var e=nbi();return e.fromInt(n),e}function bnpFromString(n,e){var t;if(e==16)t=4;else if(e==8)t=3;else if(e==256)t=8;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else{this.fromRadix(n,e);return}this.t=0,this.s=0;for(var o=n.length,c=!1,l=0;--o>=0;){var h=t==8?n[o]&255:intAt(n,o);if(h<0){n.charAt(o)=="-"&&(c=!0);continue}c=!1,l==0?this.data[this.t++]=h:l+t>this.DB?(this.data[this.t-1]|=(h&(1<<this.DB-l)-1)<<l,this.data[this.t++]=h>>this.DB-l):this.data[this.t-1]|=h<<l,l+=t,l>=this.DB&&(l-=this.DB)}t==8&&n[0]&128&&(this.s=-1,l>0&&(this.data[this.t-1]|=(1<<this.DB-l)-1<<l)),this.clamp(),c&&BigInteger$4.ZERO.subTo(this,this)}function bnpClamp(){for(var n=this.s&this.DM;this.t>0&&this.data[this.t-1]==n;)--this.t}function bnToString(n){if(this.s<0)return"-"+this.negate().toString(n);var e;if(n==16)e=4;else if(n==8)e=3;else if(n==2)e=1;else if(n==32)e=5;else if(n==4)e=2;else return this.toRadix(n);var t=(1<<e)-1,o,c=!1,l="",h=this.t,d=this.DB-h*this.DB%e;if(h-- >0)for(d<this.DB&&(o=this.data[h]>>d)>0&&(c=!0,l=int2char(o));h>=0;)d<e?(o=(this.data[h]&(1<<d)-1)<<e-d,o|=this.data[--h]>>(d+=this.DB-e)):(o=this.data[h]>>(d-=e)&t,d<=0&&(d+=this.DB,--h)),o>0&&(c=!0),c&&(l+=int2char(o));return c?l:"0"}function bnNegate(){var n=nbi();return BigInteger$4.ZERO.subTo(this,n),n}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(n){var e=this.s-n.s;if(e!=0)return e;var t=this.t;if(e=t-n.t,e!=0)return this.s<0?-e:e;for(;--t>=0;)if((e=this.data[t]-n.data[t])!=0)return e;return 0}function nbits(n){var e=1,t;return(t=n>>>16)!=0&&(n=t,e+=16),(t=n>>8)!=0&&(n=t,e+=8),(t=n>>4)!=0&&(n=t,e+=4),(t=n>>2)!=0&&(n=t,e+=2),(t=n>>1)!=0&&(n=t,e+=1),e}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(n,e){var t;for(t=this.t-1;t>=0;--t)e.data[t+n]=this.data[t];for(t=n-1;t>=0;--t)e.data[t]=0;e.t=this.t+n,e.s=this.s}function bnpDRShiftTo(n,e){for(var t=n;t<this.t;++t)e.data[t-n]=this.data[t];e.t=Math.max(this.t-n,0),e.s=this.s}function bnpLShiftTo(n,e){var t=n%this.DB,o=this.DB-t,c=(1<<o)-1,l=Math.floor(n/this.DB),h=this.s<<t&this.DM,d;for(d=this.t-1;d>=0;--d)e.data[d+l+1]=this.data[d]>>o|h,h=(this.data[d]&c)<<t;for(d=l-1;d>=0;--d)e.data[d]=0;e.data[l]=h,e.t=this.t+l+1,e.s=this.s,e.clamp()}function bnpRShiftTo(n,e){e.s=this.s;var t=Math.floor(n/this.DB);if(t>=this.t){e.t=0;return}var o=n%this.DB,c=this.DB-o,l=(1<<o)-1;e.data[0]=this.data[t]>>o;for(var h=t+1;h<this.t;++h)e.data[h-t-1]|=(this.data[h]&l)<<c,e.data[h-t]=this.data[h]>>o;o>0&&(e.data[this.t-t-1]|=(this.s&l)<<c),e.t=this.t-t,e.clamp()}function bnpSubTo(n,e){for(var t=0,o=0,c=Math.min(n.t,this.t);t<c;)o+=this.data[t]-n.data[t],e.data[t++]=o&this.DM,o>>=this.DB;if(n.t<this.t){for(o-=n.s;t<this.t;)o+=this.data[t],e.data[t++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;t<n.t;)o-=n.data[t],e.data[t++]=o&this.DM,o>>=this.DB;o-=n.s}e.s=o<0?-1:0,o<-1?e.data[t++]=this.DV+o:o>0&&(e.data[t++]=o),e.t=t,e.clamp()}function bnpMultiplyTo(n,e){var t=this.abs(),o=n.abs(),c=t.t;for(e.t=c+o.t;--c>=0;)e.data[c]=0;for(c=0;c<o.t;++c)e.data[c+t.t]=t.am(0,o.data[c],e,c,0,t.t);e.s=0,e.clamp(),this.s!=n.s&&BigInteger$4.ZERO.subTo(e,e)}function bnpSquareTo(n){for(var e=this.abs(),t=n.t=2*e.t;--t>=0;)n.data[t]=0;for(t=0;t<e.t-1;++t){var o=e.am(t,e.data[t],n,2*t,0,1);(n.data[t+e.t]+=e.am(t+1,2*e.data[t],n,2*t+1,o,e.t-t-1))>=e.DV&&(n.data[t+e.t]-=e.DV,n.data[t+e.t+1]=1)}n.t>0&&(n.data[n.t-1]+=e.am(t,e.data[t],n,2*t,0,1)),n.s=0,n.clamp()}function bnpDivRemTo(n,e,t){var o=n.abs();if(!(o.t<=0)){var c=this.abs();if(c.t<o.t){e?.fromInt(0),t!=null&&this.copyTo(t);return}t==null&&(t=nbi());var l=nbi(),h=this.s,d=n.s,g=this.DB-nbits(o.data[o.t-1]);g>0?(o.lShiftTo(g,l),c.lShiftTo(g,t)):(o.copyTo(l),c.copyTo(t));var m=l.t,v=l.data[m-1];if(v!=0){var _=v*(1<<this.F1)+(m>1?l.data[m-2]>>this.F2:0),p=this.FV/_,a=(1<<this.F1)/_,u=1<<this.F2,y=t.t,b=y-m,w=e??nbi();for(l.dlShiftTo(b,w),t.compareTo(w)>=0&&(t.data[t.t++]=1,t.subTo(w,t)),BigInteger$4.ONE.dlShiftTo(m,w),w.subTo(l,l);l.t<m;)l.data[l.t++]=0;for(;--b>=0;){var T=t.data[--y]==v?this.DM:Math.floor(t.data[y]*p+(t.data[y-1]+u)*a);if((t.data[y]+=l.am(0,T,t,b,0,m))<T)for(l.dlShiftTo(b,w),t.subTo(w,t);t.data[y]<--T;)t.subTo(w,t)}e!=null&&(t.drShiftTo(m,e),h!=d&&BigInteger$4.ZERO.subTo(e,e)),t.t=m,t.clamp(),g>0&&t.rShiftTo(g,t),h<0&&BigInteger$4.ZERO.subTo(t,t)}}}function bnMod(n){var e=nbi();return this.abs().divRemTo(n,null,e),this.s<0&&e.compareTo(BigInteger$4.ZERO)>0&&n.subTo(e,e),e}function Classic(n){this.m=n}function cConvert(n){return n.s<0||n.compareTo(this.m)>=0?n.mod(this.m):n}function cRevert(n){return n}function cReduce(n){n.divRemTo(this.m,null,n)}function cMulTo(n,e,t){n.multiplyTo(e,t),this.reduce(t)}function cSqrTo(n,e){n.squareTo(e),this.reduce(e)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var n=this.data[0];if(!(n&1))return 0;var e=n&3;return e=e*(2-(n&15)*e)&15,e=e*(2-(n&255)*e)&255,e=e*(2-((n&65535)*e&65535))&65535,e=e*(2-n*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Montgomery(n){this.m=n,this.mp=n.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<n.DB-15)-1,this.mt2=2*n.t}function montConvert(n){var e=nbi();return n.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),n.s<0&&e.compareTo(BigInteger$4.ZERO)>0&&this.m.subTo(e,e),e}function montRevert(n){var e=nbi();return n.copyTo(e),this.reduce(e),e}function montReduce(n){for(;n.t<=this.mt2;)n.data[n.t++]=0;for(var e=0;e<this.m.t;++e){var t=n.data[e]&32767,o=t*this.mpl+((t*this.mph+(n.data[e]>>15)*this.mpl&this.um)<<15)&n.DM;for(t=e+this.m.t,n.data[t]+=this.m.am(0,o,n,e,0,this.m.t);n.data[t]>=n.DV;)n.data[t]-=n.DV,n.data[++t]++}n.clamp(),n.drShiftTo(this.m.t,n),n.compareTo(this.m)>=0&&n.subTo(this.m,n)}function montSqrTo(n,e){n.squareTo(e),this.reduce(e)}function montMulTo(n,e,t){n.multiplyTo(e,t),this.reduce(t)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0}function bnpExp(n,e){if(n>4294967295||n<1)return BigInteger$4.ONE;var t=nbi(),o=nbi(),c=e.convert(this),l=nbits(n)-1;for(c.copyTo(t);--l>=0;)if(e.sqrTo(t,o),(n&1<<l)>0)e.mulTo(o,c,t);else{var h=t;t=o,o=h}return e.revert(t)}function bnModPowInt(n,e){var t;return n<256||e.isEven()?t=new Classic(e):t=new Montgomery(e),this.exp(n,t)}BigInteger$4.prototype.copyTo=bnpCopyTo;BigInteger$4.prototype.fromInt=bnpFromInt;BigInteger$4.prototype.fromString=bnpFromString;BigInteger$4.prototype.clamp=bnpClamp;BigInteger$4.prototype.dlShiftTo=bnpDLShiftTo;BigInteger$4.prototype.drShiftTo=bnpDRShiftTo;BigInteger$4.prototype.lShiftTo=bnpLShiftTo;BigInteger$4.prototype.rShiftTo=bnpRShiftTo;BigInteger$4.prototype.subTo=bnpSubTo;BigInteger$4.prototype.multiplyTo=bnpMultiplyTo;BigInteger$4.prototype.squareTo=bnpSquareTo;BigInteger$4.prototype.divRemTo=bnpDivRemTo;BigInteger$4.prototype.invDigit=bnpInvDigit;BigInteger$4.prototype.isEven=bnpIsEven;BigInteger$4.prototype.exp=bnpExp;BigInteger$4.prototype.toString=bnToString;BigInteger$4.prototype.negate=bnNegate;BigInteger$4.prototype.abs=bnAbs;BigInteger$4.prototype.compareTo=bnCompareTo;BigInteger$4.prototype.bitLength=bnBitLength;BigInteger$4.prototype.mod=bnMod;BigInteger$4.prototype.modPowInt=bnModPowInt;BigInteger$4.ZERO=nbv(0);BigInteger$4.ONE=nbv(1);function bnClone(){var n=nbi();return this.copyTo(n),n}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16}function bnpChunkSize(n){return Math.floor(Math.LN2*this.DB/Math.log(n))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function bnpToRadix(n){if(n==null&&(n=10),this.signum()==0||n<2||n>36)return"0";var e=this.chunkSize(n),t=Math.pow(n,e),o=nbv(t),c=nbi(),l=nbi(),h="";for(this.divRemTo(o,c,l);c.signum()>0;)h=(t+l.intValue()).toString(n).substr(1)+h,c.divRemTo(o,c,l);return l.intValue().toString(n)+h}function bnpFromRadix(n,e){this.fromInt(0),e==null&&(e=10);for(var t=this.chunkSize(e),o=Math.pow(e,t),c=!1,l=0,h=0,d=0;d<n.length;++d){var g=intAt(n,d);if(g<0){n.charAt(d)=="-"&&this.signum()==0&&(c=!0);continue}h=e*h+g,++l>=t&&(this.dMultiply(o),this.dAddOffset(h,0),l=0,h=0)}l>0&&(this.dMultiply(Math.pow(e,l)),this.dAddOffset(h,0)),c&&BigInteger$4.ZERO.subTo(this,this)}function bnpFromNumber(n,e,t){if(typeof e=="number")if(n<2)this.fromInt(1);else for(this.fromNumber(n,t),this.testBit(n-1)||this.bitwiseTo(BigInteger$4.ONE.shiftLeft(n-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>n&&this.subTo(BigInteger$4.ONE.shiftLeft(n-1),this);else{var o=new Array,c=n&7;o.length=(n>>3)+1,e.nextBytes(o),c>0?o[0]&=(1<<c)-1:o[0]=0,this.fromString(o,256)}}function bnToByteArray(){var n=this.t,e=new Array;e[0]=this.s;var t=this.DB-n*this.DB%8,o,c=0;if(n-- >0)for(t<this.DB&&(o=this.data[n]>>t)!=(this.s&this.DM)>>t&&(e[c++]=o|this.s<<this.DB-t);n>=0;)t<8?(o=(this.data[n]&(1<<t)-1)<<8-t,o|=this.data[--n]>>(t+=this.DB-8)):(o=this.data[n]>>(t-=8)&255,t<=0&&(t+=this.DB,--n)),o&128&&(o|=-256),c==0&&(this.s&128)!=(o&128)&&++c,(c>0||o!=this.s)&&(e[c++]=o);return e}function bnEquals(n){return this.compareTo(n)==0}function bnMin(n){return this.compareTo(n)<0?this:n}function bnMax(n){return this.compareTo(n)>0?this:n}function bnpBitwiseTo(n,e,t){var o,c,l=Math.min(n.t,this.t);for(o=0;o<l;++o)t.data[o]=e(this.data[o],n.data[o]);if(n.t<this.t){for(c=n.s&this.DM,o=l;o<this.t;++o)t.data[o]=e(this.data[o],c);t.t=this.t}else{for(c=this.s&this.DM,o=l;o<n.t;++o)t.data[o]=e(c,n.data[o]);t.t=n.t}t.s=e(this.s,n.s),t.clamp()}function op_and(n,e){return n&e}function bnAnd(n){var e=nbi();return this.bitwiseTo(n,op_and,e),e}function op_or(n,e){return n|e}function bnOr(n){var e=nbi();return this.bitwiseTo(n,op_or,e),e}function op_xor(n,e){return n^e}function bnXor(n){var e=nbi();return this.bitwiseTo(n,op_xor,e),e}function op_andnot(n,e){return n&~e}function bnAndNot(n){var e=nbi();return this.bitwiseTo(n,op_andnot,e),e}function bnNot(){for(var n=nbi(),e=0;e<this.t;++e)n.data[e]=this.DM&~this.data[e];return n.t=this.t,n.s=~this.s,n}function bnShiftLeft(n){var e=nbi();return n<0?this.rShiftTo(-n,e):this.lShiftTo(n,e),e}function bnShiftRight(n){var e=nbi();return n<0?this.lShiftTo(-n,e):this.rShiftTo(n,e),e}function lbit(n){if(n==0)return-1;var e=0;return n&65535||(n>>=16,e+=16),n&255||(n>>=8,e+=8),n&15||(n>>=4,e+=4),n&3||(n>>=2,e+=2),n&1||++e,e}function bnGetLowestSetBit(){for(var n=0;n<this.t;++n)if(this.data[n]!=0)return n*this.DB+lbit(this.data[n]);return this.s<0?this.t*this.DB:-1}function cbit(n){for(var e=0;n!=0;)n&=n-1,++e;return e}function bnBitCount(){for(var n=0,e=this.s&this.DM,t=0;t<this.t;++t)n+=cbit(this.data[t]^e);return n}function bnTestBit(n){var e=Math.floor(n/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<n%this.DB)!=0}function bnpChangeBit(n,e){var t=BigInteger$4.ONE.shiftLeft(n);return this.bitwiseTo(t,e,t),t}function bnSetBit(n){return this.changeBit(n,op_or)}function bnClearBit(n){return this.changeBit(n,op_andnot)}function bnFlipBit(n){return this.changeBit(n,op_xor)}function bnpAddTo(n,e){for(var t=0,o=0,c=Math.min(n.t,this.t);t<c;)o+=this.data[t]+n.data[t],e.data[t++]=o&this.DM,o>>=this.DB;if(n.t<this.t){for(o+=n.s;t<this.t;)o+=this.data[t],e.data[t++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;t<n.t;)o+=n.data[t],e.data[t++]=o&this.DM,o>>=this.DB;o+=n.s}e.s=o<0?-1:0,o>0?e.data[t++]=o:o<-1&&(e.data[t++]=this.DV+o),e.t=t,e.clamp()}function bnAdd(n){var e=nbi();return this.addTo(n,e),e}function bnSubtract(n){var e=nbi();return this.subTo(n,e),e}function bnMultiply(n){var e=nbi();return this.multiplyTo(n,e),e}function bnDivide(n){var e=nbi();return this.divRemTo(n,e,null),e}function bnRemainder(n){var e=nbi();return this.divRemTo(n,null,e),e}function bnDivideAndRemainder(n){var e=nbi(),t=nbi();return this.divRemTo(n,e,t),new Array(e,t)}function bnpDMultiply(n){this.data[this.t]=this.am(0,n-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(n,e){if(n!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=n;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function NullExp(){}function nNop(n){return n}function nMulTo(n,e,t){n.multiplyTo(e,t)}function nSqrTo(n,e){n.squareTo(e)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(n){return this.exp(n,new NullExp)}function bnpMultiplyLowerTo(n,e,t){var o=Math.min(this.t+n.t,e);for(t.s=0,t.t=o;o>0;)t.data[--o]=0;var c;for(c=t.t-this.t;o<c;++o)t.data[o+this.t]=this.am(0,n.data[o],t,o,0,this.t);for(c=Math.min(n.t,e);o<c;++o)this.am(0,n.data[o],t,o,0,e-o);t.clamp()}function bnpMultiplyUpperTo(n,e,t){--e;var o=t.t=this.t+n.t-e;for(t.s=0;--o>=0;)t.data[o]=0;for(o=Math.max(e-this.t,0);o<n.t;++o)t.data[this.t+o-e]=this.am(e-o,n.data[o],t,0,0,this.t+o-e);t.clamp(),t.drShiftTo(1,t)}function Barrett(n){this.r2=nbi(),this.q3=nbi(),BigInteger$4.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n),this.m=n}function barrettConvert(n){if(n.s<0||n.t>2*this.m.t)return n.mod(this.m);if(n.compareTo(this.m)<0)return n;var e=nbi();return n.copyTo(e),this.reduce(e),e}function barrettRevert(n){return n}function barrettReduce(n){for(n.drShiftTo(this.m.t-1,this.r2),n.t>this.m.t+1&&(n.t=this.m.t+1,n.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);n.compareTo(this.r2)<0;)n.dAddOffset(1,this.m.t+1);for(n.subTo(this.r2,n);n.compareTo(this.m)>=0;)n.subTo(this.m,n)}function barrettSqrTo(n,e){n.squareTo(e),this.reduce(e)}function barrettMulTo(n,e,t){n.multiplyTo(e,t),this.reduce(t)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(n,e){var t=n.bitLength(),o,c=nbv(1),l;if(t<=0)return c;t<18?o=1:t<48?o=3:t<144?o=4:t<768?o=5:o=6,t<8?l=new Classic(e):e.isEven()?l=new Barrett(e):l=new Montgomery(e);var h=new Array,d=3,g=o-1,m=(1<<o)-1;if(h[1]=l.convert(this),o>1){var v=nbi();for(l.sqrTo(h[1],v);d<=m;)h[d]=nbi(),l.mulTo(v,h[d-2],h[d]),d+=2}var _=n.t-1,p,a=!0,u=nbi(),y;for(t=nbits(n.data[_])-1;_>=0;){for(t>=g?p=n.data[_]>>t-g&m:(p=(n.data[_]&(1<<t+1)-1)<<g-t,_>0&&(p|=n.data[_-1]>>this.DB+t-g)),d=o;!(p&1);)p>>=1,--d;if((t-=d)<0&&(t+=this.DB,--_),a)h[p].copyTo(c),a=!1;else{for(;d>1;)l.sqrTo(c,u),l.sqrTo(u,c),d-=2;d>0?l.sqrTo(c,u):(y=c,c=u,u=y),l.mulTo(u,h[p],c)}for(;_>=0&&!(n.data[_]&1<<t);)l.sqrTo(c,u),y=c,c=u,u=y,--t<0&&(t=this.DB-1,--_)}return l.revert(c)}function bnGCD(n){var e=this.s<0?this.negate():this.clone(),t=n.s<0?n.negate():n.clone();if(e.compareTo(t)<0){var o=e;e=t,t=o}var c=e.getLowestSetBit(),l=t.getLowestSetBit();if(l<0)return e;for(c<l&&(l=c),l>0&&(e.rShiftTo(l,e),t.rShiftTo(l,t));e.signum()>0;)(c=e.getLowestSetBit())>0&&e.rShiftTo(c,e),(c=t.getLowestSetBit())>0&&t.rShiftTo(c,t),e.compareTo(t)>=0?(e.subTo(t,e),e.rShiftTo(1,e)):(t.subTo(e,t),t.rShiftTo(1,t));return l>0&&t.lShiftTo(l,t),t}function bnpModInt(n){if(n<=0)return 0;var e=this.DV%n,t=this.s<0?n-1:0;if(this.t>0)if(e==0)t=this.data[0]%n;else for(var o=this.t-1;o>=0;--o)t=(e*t+this.data[o])%n;return t}function bnModInverse(n){var e=n.isEven();if(this.isEven()&&e||n.signum()==0)return BigInteger$4.ZERO;for(var t=n.clone(),o=this.clone(),c=nbv(1),l=nbv(0),h=nbv(0),d=nbv(1);t.signum()!=0;){for(;t.isEven();)t.rShiftTo(1,t),e?((!c.isEven()||!l.isEven())&&(c.addTo(this,c),l.subTo(n,l)),c.rShiftTo(1,c)):l.isEven()||l.subTo(n,l),l.rShiftTo(1,l);for(;o.isEven();)o.rShiftTo(1,o),e?((!h.isEven()||!d.isEven())&&(h.addTo(this,h),d.subTo(n,d)),h.rShiftTo(1,h)):d.isEven()||d.subTo(n,d),d.rShiftTo(1,d);t.compareTo(o)>=0?(t.subTo(o,t),e&&c.subTo(h,c),l.subTo(d,l)):(o.subTo(t,o),e&&h.subTo(c,h),d.subTo(l,d))}if(o.compareTo(BigInteger$4.ONE)!=0)return BigInteger$4.ZERO;if(d.compareTo(n)>=0)return d.subtract(n);if(d.signum()<0)d.addTo(n,d);else return d;return d.signum()<0?d.add(n):d}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(n){var e,t=this.abs();if(t.t==1&&t.data[0]<=lowprimes[lowprimes.length-1]){for(e=0;e<lowprimes.length;++e)if(t.data[0]==lowprimes[e])return!0;return!1}if(t.isEven())return!1;for(e=1;e<lowprimes.length;){for(var o=lowprimes[e],c=e+1;c<lowprimes.length&&o<lplim;)o*=lowprimes[c++];for(o=t.modInt(o);e<c;)if(o%lowprimes[e++]==0)return!1}return t.millerRabin(n)}function bnpMillerRabin(n){var e=this.subtract(BigInteger$4.ONE),t=e.getLowestSetBit();if(t<=0)return!1;for(var o=e.shiftRight(t),c=bnGetPrng(),l,h=0;h<n;++h){do l=new BigInteger$4(this.bitLength(),c);while(l.compareTo(BigInteger$4.ONE)<=0||l.compareTo(e)>=0);var d=l.modPow(o,this);if(d.compareTo(BigInteger$4.ONE)!=0&&d.compareTo(e)!=0){for(var g=1;g++<t&&d.compareTo(e)!=0;)if(d=d.modPowInt(2,this),d.compareTo(BigInteger$4.ONE)==0)return!1;if(d.compareTo(e)!=0)return!1}}return!0}function bnGetPrng(){return{nextBytes:function(n){for(var e=0;e<n.length;++e)n[e]=Math.floor(Math.random()*256)}}}BigInteger$4.prototype.chunkSize=bnpChunkSize;BigInteger$4.prototype.toRadix=bnpToRadix;BigInteger$4.prototype.fromRadix=bnpFromRadix;BigInteger$4.prototype.fromNumber=bnpFromNumber;BigInteger$4.prototype.bitwiseTo=bnpBitwiseTo;BigInteger$4.prototype.changeBit=bnpChangeBit;BigInteger$4.prototype.addTo=bnpAddTo;BigInteger$4.prototype.dMultiply=bnpDMultiply;BigInteger$4.prototype.dAddOffset=bnpDAddOffset;BigInteger$4.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger$4.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger$4.prototype.modInt=bnpModInt;BigInteger$4.prototype.millerRabin=bnpMillerRabin;BigInteger$4.prototype.clone=bnClone;BigInteger$4.prototype.intValue=bnIntValue;BigInteger$4.prototype.byteValue=bnByteValue;BigInteger$4.prototype.shortValue=bnShortValue;BigInteger$4.prototype.signum=bnSigNum;BigInteger$4.prototype.toByteArray=bnToByteArray;BigInteger$4.prototype.equals=bnEquals;BigInteger$4.prototype.min=bnMin;BigInteger$4.prototype.max=bnMax;BigInteger$4.prototype.and=bnAnd;BigInteger$4.prototype.or=bnOr;BigInteger$4.prototype.xor=bnXor;BigInteger$4.prototype.andNot=bnAndNot;BigInteger$4.prototype.not=bnNot;BigInteger$4.prototype.shiftLeft=bnShiftLeft;BigInteger$4.prototype.shiftRight=bnShiftRight;BigInteger$4.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger$4.prototype.bitCount=bnBitCount;BigInteger$4.prototype.testBit=bnTestBit;BigInteger$4.prototype.setBit=bnSetBit;BigInteger$4.prototype.clearBit=bnClearBit;BigInteger$4.prototype.flipBit=bnFlipBit;BigInteger$4.prototype.add=bnAdd;BigInteger$4.prototype.subtract=bnSubtract;BigInteger$4.prototype.multiply=bnMultiply;BigInteger$4.prototype.divide=bnDivide;BigInteger$4.prototype.remainder=bnRemainder;BigInteger$4.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger$4.prototype.modPow=bnModPow;BigInteger$4.prototype.modInverse=bnModInverse;BigInteger$4.prototype.pow=bnPow;BigInteger$4.prototype.gcd=bnGCD;BigInteger$4.prototype.isProbablePrime=bnIsProbablePrime;var forge$m=forge$D,sha1$1=forge$m.sha1=forge$m.sha1||{};forge$m.md.sha1=forge$m.md.algorithms.sha1=sha1$1;sha1$1.create=function(){_initialized$2||_init$2();var n=null,e=forge$m.util.createBuffer(),t=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var c=o.messageLengthSize/4,l=0;l<c;++l)o.fullMessageLength.push(0);return e=forge$m.util.createBuffer(),n={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o},o.start(),o.update=function(c,l){l==="utf8"&&(c=forge$m.util.encodeUtf8(c));var h=c.length;o.messageLength+=h,h=[h/4294967296>>>0,h>>>0];for(var d=o.fullMessageLength.length-1;d>=0;--d)o.fullMessageLength[d]+=h[1],h[1]=h[0]+(o.fullMessageLength[d]/4294967296>>>0),o.fullMessageLength[d]=o.fullMessageLength[d]>>>0,h[0]=h[1]/4294967296>>>0;return e.putBytes(c),_update$2(n,t,e),(e.read>2048||e.length()===0)&&e.compact(),o},o.digest=function(){var c=forge$m.util.createBuffer();c.putBytes(e.bytes());var l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,h=l&o.blockLength-1;c.putBytes(_padding$2.substr(0,o.blockLength-h));for(var d,g,m=o.fullMessageLength[0]*8,v=0;v<o.fullMessageLength.length-1;++v)d=o.fullMessageLength[v+1]*8,g=d/4294967296>>>0,m+=g,c.putInt32(m>>>0),m=d>>>0;c.putInt32(m);var _={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3,h4:n.h4};_update$2(_,t,c);var p=forge$m.util.createBuffer();return p.putInt32(_.h0),p.putInt32(_.h1),p.putInt32(_.h2),p.putInt32(_.h3),p.putInt32(_.h4),p},o};var _padding$2=null,_initialized$2=!1;function _init$2(){_padding$2=String.fromCharCode(128),_padding$2+=forge$m.util.fillString(String.fromCharCode(0),64),_initialized$2=!0}function _update$2(n,e,t){for(var o,c,l,h,d,g,m,v,_=t.length();_>=64;){for(c=n.h0,l=n.h1,h=n.h2,d=n.h3,g=n.h4,v=0;v<16;++v)o=t.getInt32(),e[v]=o,m=d^l&(h^d),o=(c<<5|c>>>27)+m+g+1518500249+o,g=d,d=h,h=(l<<30|l>>>2)>>>0,l=c,c=o;for(;v<20;++v)o=e[v-3]^e[v-8]^e[v-14]^e[v-16],o=o<<1|o>>>31,e[v]=o,m=d^l&(h^d),o=(c<<5|c>>>27)+m+g+1518500249+o,g=d,d=h,h=(l<<30|l>>>2)>>>0,l=c,c=o;for(;v<32;++v)o=e[v-3]^e[v-8]^e[v-14]^e[v-16],o=o<<1|o>>>31,e[v]=o,m=l^h^d,o=(c<<5|c>>>27)+m+g+1859775393+o,g=d,d=h,h=(l<<30|l>>>2)>>>0,l=c,c=o;for(;v<40;++v)o=e[v-6]^e[v-16]^e[v-28]^e[v-32],o=o<<2|o>>>30,e[v]=o,m=l^h^d,o=(c<<5|c>>>27)+m+g+1859775393+o,g=d,d=h,h=(l<<30|l>>>2)>>>0,l=c,c=o;for(;v<60;++v)o=e[v-6]^e[v-16]^e[v-28]^e[v-32],o=o<<2|o>>>30,e[v]=o,m=l&h|d&(l^h),o=(c<<5|c>>>27)+m+g+2400959708+o,g=d,d=h,h=(l<<30|l>>>2)>>>0,l=c,c=o;for(;v<80;++v)o=e[v-6]^e[v-16]^e[v-28]^e[v-32],o=o<<2|o>>>30,e[v]=o,m=l^h^d,o=(c<<5|c>>>27)+m+g+3395469782+o,g=d,d=h,h=(l<<30|l>>>2)>>>0,l=c,c=o;n.h0=n.h0+c|0,n.h1=n.h1+l|0,n.h2=n.h2+h|0,n.h3=n.h3+d|0,n.h4=n.h4+g|0,_-=64}}var forge$l=forge$D,pkcs1=forge$l.pkcs1=forge$l.pkcs1||{};pkcs1.encode_rsa_oaep=function(n,e,t){var o,c,l,h;typeof t=="string"?(o=t,c=arguments[3]||void 0,l=arguments[4]||void 0):t&&(o=t.label||void 0,c=t.seed||void 0,l=t.md||void 0,t.mgf1&&t.mgf1.md&&(h=t.mgf1.md)),l?l.start():l=forge$l.md.sha1.create(),h||(h=l);var d=Math.ceil(n.n.bitLength()/8),g=d-2*l.digestLength-2;if(e.length>g){var m=new Error("RSAES-OAEP input message length is too long.");throw m.length=e.length,m.maxLength=g,m}o||(o=""),l.update(o,"raw");for(var v=l.digest(),_="",p=g-e.length,a=0;a<p;a++)_+="\0";var u=v.getBytes()+_+""+e;if(!c)c=forge$l.random.getBytes(l.digestLength);else if(c.length!==l.digestLength){var m=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw m.seedLength=c.length,m.digestLength=l.digestLength,m}var y=rsa_mgf1(c,d-l.digestLength-1,h),b=forge$l.util.xorBytes(u,y,u.length),w=rsa_mgf1(b,l.digestLength,h),T=forge$l.util.xorBytes(c,w,c.length);return"\0"+T+b};pkcs1.decode_rsa_oaep=function(n,e,t){var o,c,l;typeof t=="string"?(o=t,c=arguments[3]||void 0):t&&(o=t.label||void 0,c=t.md||void 0,t.mgf1&&t.mgf1.md&&(l=t.mgf1.md));var h=Math.ceil(n.n.bitLength()/8);if(e.length!==h){var b=new Error("RSAES-OAEP encoded message length is invalid.");throw b.length=e.length,b.expectedLength=h,b}if(c===void 0?c=forge$l.md.sha1.create():c.start(),l||(l=c),h<2*c.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),c.update(o,"raw");for(var d=c.digest().getBytes(),g=e.charAt(0),m=e.substring(1,c.digestLength+1),v=e.substring(1+c.digestLength),_=rsa_mgf1(v,c.digestLength,l),p=forge$l.util.xorBytes(m,_,m.length),a=rsa_mgf1(p,h-c.digestLength-1,l),u=forge$l.util.xorBytes(v,a,v.length),y=u.substring(0,c.digestLength),b=g!=="\0",w=0;w<c.digestLength;++w)b|=d.charAt(w)!==y.charAt(w);for(var T=1,B=c.digestLength,H=c.digestLength;H<u.length;H++){var J=u.charCodeAt(H),W=J&1^1,fe=T?65534:0;b|=J&fe,T=T&W,B+=T}if(b||u.charCodeAt(B)!==1)throw new Error("Invalid RSAES-OAEP padding.");return u.substring(B+1)};function rsa_mgf1(n,e,t){t||(t=forge$l.md.sha1.create());for(var o="",c=Math.ceil(e/t.digestLength),l=0;l<c;++l){var h=String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,l&255);t.start(),t.update(n+h),o+=t.digest().getBytes()}return o.substring(0,e)}var forge$k=forge$D;(function(){if(forge$k.prime){forge$k.prime;return}var n=forge$k.prime=forge$k.prime||{},e=forge$k.jsbn.BigInteger,t=[6,4,2,4,2,4,6,2],o=new e(null);o.fromInt(30);var c=function(_,p){return _|p};n.generateProbablePrime=function(_,p,a){typeof p=="function"&&(a=p,p={}),p=p||{};var u=p.algorithm||"PRIMEINC";typeof u=="string"&&(u={name:u}),u.options=u.options||{};var y=p.prng||forge$k.random,b={nextBytes:function(w){for(var T=y.getBytesSync(w.length),B=0;B<w.length;++B)w[B]=T.charCodeAt(B)}};if(u.name==="PRIMEINC")return l(_,b,u.options,a);throw new Error("Invalid prime generation algorithm: "+u.name)};function l(_,p,a,u){return"workers"in a?g(_,p,a,u):h(_,p,a,u)}function h(_,p,a,u){var y=m(_,p),b=0,w=v(y.bitLength());"millerRabinTests"in a&&(w=a.millerRabinTests);var T=10;"maxBlockTime"in a&&(T=a.maxBlockTime),d(y,_,p,b,w,T,u)}function d(_,p,a,u,y,b,w){var T=+new Date;do{if(_.bitLength()>p&&(_=m(p,a)),_.isProbablePrime(y))return w(null,_);_.dAddOffset(t[u++%8],0)}while(b<0||+new Date-T<b);forge$k.util.setImmediate(function(){d(_,p,a,u,y,b,w)})}function g(_,p,a,u){if(typeof Worker>"u")return h(_,p,a,u);var y=m(_,p),b=a.workers,w=a.workLoad||100,T=w*30/8,B=a.workerScript||"forge/prime.worker.js";if(b===-1)return forge$k.util.estimateCores(function(J,W){J&&(W=2),b=W-1,H()});H();function H(){b=Math.max(1,b);for(var J=[],W=0;W<b;++W)J[W]=new Worker(B);for(var W=0;W<b;++W)J[W].addEventListener("message",re);var fe=!1;function re(se){if(!fe){var ae=se.data;if(ae.found){for(var ee=0;ee<J.length;++ee)J[ee].terminate();return fe=!0,u(null,new e(ae.prime,16))}y.bitLength()>_&&(y=m(_,p));var P=y.toString(16);se.target.postMessage({hex:P,workLoad:w}),y.dAddOffset(T,0)}}}}function m(_,p){var a=new e(_,p),u=_-1;return a.testBit(u)||a.bitwiseTo(e.ONE.shiftLeft(u),c,a),a.dAddOffset(31-a.mod(o).byteValue(),0),a}function v(_){return _<=100?27:_<=150?18:_<=200?15:_<=250?12:_<=300?9:_<=350?8:_<=400?7:_<=500?6:_<=600?5:_<=800?4:_<=1250?3:2}})();var forge$j=forge$D;if(typeof BigInteger$3>"u")var BigInteger$3=forge$j.jsbn.BigInteger;var _crypto=forge$j.util.isNodejs?require$$0$1:null,asn1$7=forge$j.asn1,util$6=forge$j.util;forge$j.pki=forge$j.pki||{};forge$j.pki.rsa=forge$j.rsa=forge$j.rsa||{};var pki$4=forge$j.pki,GCD_30_DELTA=[6,4,2,4,2,4,6,2],privateKeyValidator$1={name:"PrivateKeyInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rsaPrivateKeyValidator={name:"RSAPrivateKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rsaPublicKeyValidator={name:"RSAPublicKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},publicKeyValidator$2=forge$j.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},digestInfoValidator={name:"DigestInfo",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:asn1$7.Class.UNIVERSAL,type:asn1$7.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},emsaPkcs1v15encode=function(n){var e;if(n.algorithm in pki$4.oids)e=pki$4.oids[n.algorithm];else{var t=new Error("Unknown message digest algorithm.");throw t.algorithm=n.algorithm,t}var o=asn1$7.oidToDer(e).getBytes(),c=asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[]),l=asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[]);l.value.push(asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OID,!1,o)),l.value.push(asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.NULL,!1,""));var h=asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OCTETSTRING,!1,n.digest().getBytes());return c.value.push(l),c.value.push(h),asn1$7.toDer(c).getBytes()},_modPow=function(n,e,t){if(t)return n.modPow(e.e,e.n);if(!e.p||!e.q)return n.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(BigInteger$3.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(BigInteger$3.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var o;do o=new BigInteger$3(forge$j.util.bytesToHex(forge$j.random.getBytes(e.n.bitLength()/8)),16);while(o.compareTo(e.n)>=0||!o.gcd(e.n).equals(BigInteger$3.ONE));n=n.multiply(o.modPow(e.e,e.n)).mod(e.n);for(var c=n.mod(e.p).modPow(e.dP,e.p),l=n.mod(e.q).modPow(e.dQ,e.q);c.compareTo(l)<0;)c=c.add(e.p);var h=c.subtract(l).multiply(e.qInv).mod(e.p).multiply(e.q).add(l);return h=h.multiply(o.modInverse(e.n)).mod(e.n),h};pki$4.rsa.encrypt=function(n,e,t){var o=t,c,l=Math.ceil(e.n.bitLength()/8);t!==!1&&t!==!0?(o=t===2,c=_encodePkcs1_v1_5(n,e,t)):(c=forge$j.util.createBuffer(),c.putBytes(n));for(var h=new BigInteger$3(c.toHex(),16),d=_modPow(h,e,o),g=d.toString(16),m=forge$j.util.createBuffer(),v=l-Math.ceil(g.length/2);v>0;)m.putByte(0),--v;return m.putBytes(forge$j.util.hexToBytes(g)),m.getBytes()};pki$4.rsa.decrypt=function(n,e,t,o){var c=Math.ceil(e.n.bitLength()/8);if(n.length!==c){var l=new Error("Encrypted message length is invalid.");throw l.length=n.length,l.expected=c,l}var h=new BigInteger$3(forge$j.util.createBuffer(n).toHex(),16);if(h.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var d=_modPow(h,e,t),g=d.toString(16),m=forge$j.util.createBuffer(),v=c-Math.ceil(g.length/2);v>0;)m.putByte(0),--v;return m.putBytes(forge$j.util.hexToBytes(g)),o!==!1?_decodePkcs1_v1_5(m.getBytes(),e,t):m.getBytes()};pki$4.rsa.createKeyPairGenerationState=function(n,e,t){typeof n=="string"&&(n=parseInt(n,10)),n=n||2048,t=t||{};var o=t.prng||forge$j.random,c={nextBytes:function(d){for(var g=o.getBytesSync(d.length),m=0;m<d.length;++m)d[m]=g.charCodeAt(m)}},l=t.algorithm||"PRIMEINC",h;if(l==="PRIMEINC")h={algorithm:l,state:0,bits:n,rng:c,eInt:e||65537,e:new BigInteger$3(null),p:null,q:null,qBits:n>>1,pBits:n-(n>>1),pqState:0,num:null,keys:null},h.e.fromInt(h.eInt);else throw new Error("Invalid key generation algorithm: "+l);return h};pki$4.rsa.stepKeyPairGenerationState=function(n,e){"algorithm"in n||(n.algorithm="PRIMEINC");var t=new BigInteger$3(null);t.fromInt(30);for(var o=0,c=function(_,p){return _|p},l=+new Date,h,d=0;n.keys===null&&(e<=0||d<e);){if(n.state===0){var g=n.p===null?n.pBits:n.qBits,m=g-1;n.pqState===0?(n.num=new BigInteger$3(g,n.rng),n.num.testBit(m)||n.num.bitwiseTo(BigInteger$3.ONE.shiftLeft(m),c,n.num),n.num.dAddOffset(31-n.num.mod(t).byteValue(),0),o=0,++n.pqState):n.pqState===1?n.num.bitLength()>g?n.pqState=0:n.num.isProbablePrime(_getMillerRabinTests(n.num.bitLength()))?++n.pqState:n.num.dAddOffset(GCD_30_DELTA[o++%8],0):n.pqState===2?n.pqState=n.num.subtract(BigInteger$3.ONE).gcd(n.e).compareTo(BigInteger$3.ONE)===0?3:0:n.pqState===3&&(n.pqState=0,n.p===null?n.p=n.num:n.q=n.num,n.p!==null&&n.q!==null&&++n.state,n.num=null)}else if(n.state===1)n.p.compareTo(n.q)<0&&(n.num=n.p,n.p=n.q,n.q=n.num),++n.state;else if(n.state===2)n.p1=n.p.subtract(BigInteger$3.ONE),n.q1=n.q.subtract(BigInteger$3.ONE),n.phi=n.p1.multiply(n.q1),++n.state;else if(n.state===3)n.phi.gcd(n.e).compareTo(BigInteger$3.ONE)===0?++n.state:(n.p=null,n.q=null,n.state=0);else if(n.state===4)n.n=n.p.multiply(n.q),n.n.bitLength()===n.bits?++n.state:(n.q=null,n.state=0);else if(n.state===5){var v=n.e.modInverse(n.phi);n.keys={privateKey:pki$4.rsa.setPrivateKey(n.n,n.e,v,n.p,n.q,v.mod(n.p1),v.mod(n.q1),n.q.modInverse(n.p)),publicKey:pki$4.rsa.setPublicKey(n.n,n.e)}}h=+new Date,d+=h-l,l=h}return n.keys!==null};pki$4.rsa.generateKeyPair=function(n,e,t,o){if(arguments.length===1?typeof n=="object"?(t=n,n=void 0):typeof n=="function"&&(o=n,n=void 0):arguments.length===2?typeof n=="number"?typeof e=="function"?(o=e,e=void 0):typeof e!="number"&&(t=e,e=void 0):(t=n,o=e,n=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof t=="function"&&(o=t,t=void 0):(o=t,t=e,e=void 0)),t=t||{},n===void 0&&(n=t.bits||2048),e===void 0&&(e=t.e||65537),!forge$j.options.usePureJavaScript&&!t.prng&&n>=256&&n<=16384&&(e===65537||e===3)){if(o){if(_detectNodeCrypto("generateKeyPair"))return _crypto.generateKeyPair("rsa",{modulusLength:n,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(d,g,m){if(d)return o(d);o(null,{privateKey:pki$4.privateKeyFromPem(m),publicKey:pki$4.publicKeyFromPem(g)})});if(_detectSubtleCrypto("generateKey")&&_detectSubtleCrypto("exportKey"))return util$6.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:n,publicExponent:_intToUint8Array(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(d){return util$6.globalScope.crypto.subtle.exportKey("pkcs8",d.privateKey)}).then(void 0,function(d){o(d)}).then(function(d){if(d){var g=pki$4.privateKeyFromAsn1(asn1$7.fromDer(forge$j.util.createBuffer(d)));o(null,{privateKey:g,publicKey:pki$4.setRsaPublicKey(g.n,g.e)})}});if(_detectSubtleMsCrypto("generateKey")&&_detectSubtleMsCrypto("exportKey")){var c=util$6.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:n,publicExponent:_intToUint8Array(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);c.oncomplete=function(d){var g=d.target.result,m=util$6.globalScope.msCrypto.subtle.exportKey("pkcs8",g.privateKey);m.oncomplete=function(v){var _=v.target.result,p=pki$4.privateKeyFromAsn1(asn1$7.fromDer(forge$j.util.createBuffer(_)));o(null,{privateKey:p,publicKey:pki$4.setRsaPublicKey(p.n,p.e)})},m.onerror=function(v){o(v)}},c.onerror=function(d){o(d)};return}}else if(_detectNodeCrypto("generateKeyPairSync")){var l=_crypto.generateKeyPairSync("rsa",{modulusLength:n,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pki$4.privateKeyFromPem(l.privateKey),publicKey:pki$4.publicKeyFromPem(l.publicKey)}}}var h=pki$4.rsa.createKeyPairGenerationState(n,e,t);if(!o)return pki$4.rsa.stepKeyPairGenerationState(h,0),h.keys;_generateKeyPair(h,t,o)};pki$4.setRsaPublicKey=pki$4.rsa.setPublicKey=function(n,e){var t={n,e};return t.encrypt=function(o,c,l){if(typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSAES-PKCS1-V1_5"),c==="RSAES-PKCS1-V1_5")c={encode:function(d,g,m){return _encodePkcs1_v1_5(d,g,2).getBytes()}};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={encode:function(d,g){return forge$j.pkcs1.encode_rsa_oaep(g,d,l)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={encode:function(d){return d}};else if(typeof c=="string")throw new Error('Unsupported encryption scheme: "'+c+'".');var h=c.encode(o,t,!0);return pki$4.rsa.encrypt(h,t,!0)},t.verify=function(o,c,l,h){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSASSA-PKCS1-V1_5"),h===void 0&&(h={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in h||(h._parseAllDigestBytes=!0),l==="RSASSA-PKCS1-V1_5"?l={verify:function(g,m){m=_decodePkcs1_v1_5(m,t,!0);var v=asn1$7.fromDer(m,{parseAllBytes:h._parseAllDigestBytes}),_={},p=[];if(!asn1$7.validate(v,digestInfoValidator,_,p)){var a=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw a.errors=p,a}var u=asn1$7.derToOid(_.algorithmIdentifier);if(!(u===forge$j.oids.md2||u===forge$j.oids.md5||u===forge$j.oids.sha1||u===forge$j.oids.sha224||u===forge$j.oids.sha256||u===forge$j.oids.sha384||u===forge$j.oids.sha512||u===forge$j.oids["sha512-224"]||u===forge$j.oids["sha512-256"])){var a=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw a.oid=u,a}if((u===forge$j.oids.md2||u===forge$j.oids.md5)&&!("parameters"in _))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return g===_.digest}}:(l==="NONE"||l==="NULL"||l===null)&&(l={verify:function(g,m){return m=_decodePkcs1_v1_5(m,t,!0),g===m}});var d=pki$4.rsa.decrypt(c,t,!0,!1);return l.verify(o,d,t.n.bitLength())},t};pki$4.setRsaPrivateKey=pki$4.rsa.setPrivateKey=function(n,e,t,o,c,l,h,d){var g={n,e,d:t,p:o,q:c,dP:l,dQ:h,qInv:d};return g.decrypt=function(m,v,_){typeof v=="string"?v=v.toUpperCase():v===void 0&&(v="RSAES-PKCS1-V1_5");var p=pki$4.rsa.decrypt(m,g,!1,!1);if(v==="RSAES-PKCS1-V1_5")v={decode:_decodePkcs1_v1_5};else if(v==="RSA-OAEP"||v==="RSAES-OAEP")v={decode:function(a,u){return forge$j.pkcs1.decode_rsa_oaep(u,a,_)}};else if(["RAW","NONE","NULL",null].indexOf(v)!==-1)v={decode:function(a){return a}};else throw new Error('Unsupported encryption scheme: "'+v+'".');return v.decode(p,g,!1)},g.sign=function(m,v){var _=!1;typeof v=="string"&&(v=v.toUpperCase()),v===void 0||v==="RSASSA-PKCS1-V1_5"?(v={encode:emsaPkcs1v15encode},_=1):(v==="NONE"||v==="NULL"||v===null)&&(v={encode:function(){return m}},_=1);var p=v.encode(m,g.n.bitLength());return pki$4.rsa.encrypt(p,g,_)},g};pki$4.wrapRsaPrivateKey=function(n){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,asn1$7.integerToDer(0).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OID,!1,asn1$7.oidToDer(pki$4.oids.rsaEncryption).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.NULL,!1,"")]),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OCTETSTRING,!1,asn1$7.toDer(n).getBytes())])};pki$4.privateKeyFromAsn1=function(n){var e={},t=[];if(asn1$7.validate(n,privateKeyValidator$1,e,t)&&(n=asn1$7.fromDer(forge$j.util.createBuffer(e.privateKey))),e={},t=[],!asn1$7.validate(n,rsaPrivateKeyValidator,e,t)){var o=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw o.errors=t,o}var c,l,h,d,g,m,v,_;return c=forge$j.util.createBuffer(e.privateKeyModulus).toHex(),l=forge$j.util.createBuffer(e.privateKeyPublicExponent).toHex(),h=forge$j.util.createBuffer(e.privateKeyPrivateExponent).toHex(),d=forge$j.util.createBuffer(e.privateKeyPrime1).toHex(),g=forge$j.util.createBuffer(e.privateKeyPrime2).toHex(),m=forge$j.util.createBuffer(e.privateKeyExponent1).toHex(),v=forge$j.util.createBuffer(e.privateKeyExponent2).toHex(),_=forge$j.util.createBuffer(e.privateKeyCoefficient).toHex(),pki$4.setRsaPrivateKey(new BigInteger$3(c,16),new BigInteger$3(l,16),new BigInteger$3(h,16),new BigInteger$3(d,16),new BigInteger$3(g,16),new BigInteger$3(m,16),new BigInteger$3(v,16),new BigInteger$3(_,16))};pki$4.privateKeyToAsn1=pki$4.privateKeyToRSAPrivateKey=function(n){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,asn1$7.integerToDer(0).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(n.n)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(n.e)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(n.d)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(n.p)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(n.q)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(n.dP)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(n.dQ)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(n.qInv))])};pki$4.publicKeyFromAsn1=function(n){var e={},t=[];if(asn1$7.validate(n,publicKeyValidator$2,e,t)){var o=asn1$7.derToOid(e.publicKeyOid);if(o!==pki$4.oids.rsaEncryption){var c=new Error("Cannot read public key. Unknown OID.");throw c.oid=o,c}n=e.rsaPublicKey}if(t=[],!asn1$7.validate(n,rsaPublicKeyValidator,e,t)){var c=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw c.errors=t,c}var l=forge$j.util.createBuffer(e.publicKeyModulus).toHex(),h=forge$j.util.createBuffer(e.publicKeyExponent).toHex();return pki$4.setRsaPublicKey(new BigInteger$3(l,16),new BigInteger$3(h,16))};pki$4.publicKeyToAsn1=pki$4.publicKeyToSubjectPublicKeyInfo=function(n){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.OID,!1,asn1$7.oidToDer(pki$4.oids.rsaEncryption).getBytes()),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.NULL,!1,"")]),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.BITSTRING,!1,[pki$4.publicKeyToRSAPublicKey(n)])])};pki$4.publicKeyToRSAPublicKey=function(n){return asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.SEQUENCE,!0,[asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(n.n)),asn1$7.create(asn1$7.Class.UNIVERSAL,asn1$7.Type.INTEGER,!1,_bnToBytes(n.e))])};function _encodePkcs1_v1_5(n,e,t){var o=forge$j.util.createBuffer(),c=Math.ceil(e.n.bitLength()/8);if(n.length>c-11){var l=new Error("Message is too long for PKCS#1 v1.5 padding.");throw l.length=n.length,l.max=c-11,l}o.putByte(0),o.putByte(t);var h=c-3-n.length,d;if(t===0||t===1){d=t===0?0:255;for(var g=0;g<h;++g)o.putByte(d)}else for(;h>0;){for(var m=0,v=forge$j.random.getBytes(h),g=0;g<h;++g)d=v.charCodeAt(g),d===0?++m:o.putByte(d);h=m}return o.putByte(0),o.putBytes(n),o}function _decodePkcs1_v1_5(n,e,t,o){var c=Math.ceil(e.n.bitLength()/8),l=forge$j.util.createBuffer(n),h=l.getByte(),d=l.getByte();if(h!==0||t&&d!==0&&d!==1||!t&&d!=2||t&&d===0&&typeof o>"u")throw new Error("Encryption block is invalid.");var g=0;if(d===0){g=c-3-o;for(var m=0;m<g;++m)if(l.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(d===1)for(g=0;l.length()>1;){if(l.getByte()!==255){--l.read;break}++g}else if(d===2)for(g=0;l.length()>1;){if(l.getByte()===0){--l.read;break}++g}var v=l.getByte();if(v!==0||g!==c-3-l.length())throw new Error("Encryption block is invalid.");return l.getBytes()}function _generateKeyPair(n,e,t){typeof e=="function"&&(t=e,e={}),e=e||{};var o={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(o.prng=e.prng),c();function c(){l(n.pBits,function(d,g){if(d)return t(d);if(n.p=g,n.q!==null)return h(d,n.q);l(n.qBits,h)})}function l(d,g){forge$j.prime.generateProbablePrime(d,o,g)}function h(d,g){if(d)return t(d);if(n.q=g,n.p.compareTo(n.q)<0){var m=n.p;n.p=n.q,n.q=m}if(n.p.subtract(BigInteger$3.ONE).gcd(n.e).compareTo(BigInteger$3.ONE)!==0){n.p=null,c();return}if(n.q.subtract(BigInteger$3.ONE).gcd(n.e).compareTo(BigInteger$3.ONE)!==0){n.q=null,l(n.qBits,h);return}if(n.p1=n.p.subtract(BigInteger$3.ONE),n.q1=n.q.subtract(BigInteger$3.ONE),n.phi=n.p1.multiply(n.q1),n.phi.gcd(n.e).compareTo(BigInteger$3.ONE)!==0){n.p=n.q=null,c();return}if(n.n=n.p.multiply(n.q),n.n.bitLength()!==n.bits){n.q=null,l(n.qBits,h);return}var v=n.e.modInverse(n.phi);n.keys={privateKey:pki$4.rsa.setPrivateKey(n.n,n.e,v,n.p,n.q,v.mod(n.p1),v.mod(n.q1),n.q.modInverse(n.p)),publicKey:pki$4.rsa.setPublicKey(n.n,n.e)},t(null,n.keys)}}function _bnToBytes(n){var e=n.toString(16);e[0]>="8"&&(e="00"+e);var t=forge$j.util.hexToBytes(e);return t.length>1&&(t.charCodeAt(0)===0&&!(t.charCodeAt(1)&128)||t.charCodeAt(0)===255&&(t.charCodeAt(1)&128)===128)?t.substr(1):t}function _getMillerRabinTests(n){return n<=100?27:n<=150?18:n<=200?15:n<=250?12:n<=300?9:n<=350?8:n<=400?7:n<=500?6:n<=600?5:n<=800?4:n<=1250?3:2}function _detectNodeCrypto(n){return forge$j.util.isNodejs&&typeof _crypto[n]=="function"}function _detectSubtleCrypto(n){return typeof util$6.globalScope<"u"&&typeof util$6.globalScope.crypto=="object"&&typeof util$6.globalScope.crypto.subtle=="object"&&typeof util$6.globalScope.crypto.subtle[n]=="function"}function _detectSubtleMsCrypto(n){return typeof util$6.globalScope<"u"&&typeof util$6.globalScope.msCrypto=="object"&&typeof util$6.globalScope.msCrypto.subtle=="object"&&typeof util$6.globalScope.msCrypto.subtle[n]=="function"}function _intToUint8Array(n){for(var e=forge$j.util.hexToBytes(n.toString(16)),t=new Uint8Array(e.length),o=0;o<e.length;++o)t[o]=e.charCodeAt(o);return t}var forge$i=forge$D;if(typeof BigInteger$2>"u")var BigInteger$2=forge$i.jsbn.BigInteger;var asn1$6=forge$i.asn1,pki$3=forge$i.pki=forge$i.pki||{};pki$3.pbe=forge$i.pbe=forge$i.pbe||{};var oids$1=pki$3.oids,encryptedPrivateKeyValidator={name:"EncryptedPrivateKeyInfo",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},PBES2AlgorithmsValidator={name:"PBES2Algorithms",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkcs12PbeParamsValidator={name:"pkcs-12PbeParams",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:asn1$6.Class.UNIVERSAL,type:asn1$6.Type.INTEGER,constructed:!1,capture:"iterations"}]};pki$3.encryptPrivateKeyInfo=function(n,e,t){t=t||{},t.saltSize=t.saltSize||8,t.count=t.count||2048,t.algorithm=t.algorithm||"aes128",t.prfAlgorithm=t.prfAlgorithm||"sha1";var o=forge$i.random.getBytesSync(t.saltSize),c=t.count,l=asn1$6.integerToDer(c),h,d,g;if(t.algorithm.indexOf("aes")===0||t.algorithm==="des"){var m,v,_;switch(t.algorithm){case"aes128":h=16,m=16,v=oids$1["aes128-CBC"],_=forge$i.aes.createEncryptionCipher;break;case"aes192":h=24,m=16,v=oids$1["aes192-CBC"],_=forge$i.aes.createEncryptionCipher;break;case"aes256":h=32,m=16,v=oids$1["aes256-CBC"],_=forge$i.aes.createEncryptionCipher;break;case"des":h=8,m=8,v=oids$1.desCBC,_=forge$i.des.createEncryptionCipher;break;default:var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=t.algorithm,p}var a="hmacWith"+t.prfAlgorithm.toUpperCase(),u=prfAlgorithmToMessageDigest(a),y=forge$i.pkcs5.pbkdf2(e,o,c,h,u),b=forge$i.random.getBytesSync(m),w=_(y);w.start(b),w.update(asn1$6.toDer(n)),w.finish(),g=w.output.getBytes();var T=createPbkdf2Params(o,l,h,a);d=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(oids$1.pkcs5PBES2).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(oids$1.pkcs5PBKDF2).getBytes()),T]),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(v).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,b)])])])}else if(t.algorithm==="3des"){h=24;var B=new forge$i.util.ByteBuffer(o),y=pki$3.pbe.generatePkcs12Key(e,B,1,c,h),b=pki$3.pbe.generatePkcs12Key(e,B,2,c,h),w=forge$i.des.createEncryptionCipher(y);w.start(b),w.update(asn1$6.toDer(n)),w.finish(),g=w.output.getBytes(),d=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(oids$1["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,o),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.INTEGER,!1,l.getBytes())])])}else{var p=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw p.algorithm=t.algorithm,p}var H=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[d,asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,g)]);return H};pki$3.decryptPrivateKeyInfo=function(n,e){var t=null,o={},c=[];if(!asn1$6.validate(n,encryptedPrivateKeyValidator,o,c)){var l=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=c,l}var h=asn1$6.derToOid(o.encryptionOid),d=pki$3.pbe.getCipher(h,o.encryptionParams,e),g=forge$i.util.createBuffer(o.encryptedData);return d.update(g),d.finish()&&(t=asn1$6.fromDer(d.output)),t};pki$3.encryptedPrivateKeyToPem=function(n,e){var t={type:"ENCRYPTED PRIVATE KEY",body:asn1$6.toDer(n).getBytes()};return forge$i.pem.encode(t,{maxline:e})};pki$3.encryptedPrivateKeyFromPem=function(n){var e=forge$i.pem.decode(n)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var t=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw t.headerType=e.type,t}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return asn1$6.fromDer(e.body)};pki$3.encryptRsaPrivateKey=function(n,e,t){if(t=t||{},!t.legacy){var o=pki$3.wrapRsaPrivateKey(pki$3.privateKeyToAsn1(n));return o=pki$3.encryptPrivateKeyInfo(o,e,t),pki$3.encryptedPrivateKeyToPem(o)}var c,l,h,d;switch(t.algorithm){case"aes128":c="AES-128-CBC",h=16,l=forge$i.random.getBytesSync(16),d=forge$i.aes.createEncryptionCipher;break;case"aes192":c="AES-192-CBC",h=24,l=forge$i.random.getBytesSync(16),d=forge$i.aes.createEncryptionCipher;break;case"aes256":c="AES-256-CBC",h=32,l=forge$i.random.getBytesSync(16),d=forge$i.aes.createEncryptionCipher;break;case"3des":c="DES-EDE3-CBC",h=24,l=forge$i.random.getBytesSync(8),d=forge$i.des.createEncryptionCipher;break;case"des":c="DES-CBC",h=8,l=forge$i.random.getBytesSync(8),d=forge$i.des.createEncryptionCipher;break;default:var g=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+t.algorithm+'".');throw g.algorithm=t.algorithm,g}var m=forge$i.pbe.opensslDeriveBytes(e,l.substr(0,8),h),v=d(m);v.start(l),v.update(asn1$6.toDer(pki$3.privateKeyToAsn1(n))),v.finish();var _={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:c,parameters:forge$i.util.bytesToHex(l).toUpperCase()},body:v.output.getBytes()};return forge$i.pem.encode(_)};pki$3.decryptRsaPrivateKey=function(n,e){var t=null,o=forge$i.pem.decode(n)[0];if(o.type!=="ENCRYPTED PRIVATE KEY"&&o.type!=="PRIVATE KEY"&&o.type!=="RSA PRIVATE KEY"){var c=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw c.headerType=c,c}if(o.procType&&o.procType.type==="ENCRYPTED"){var l,h;switch(o.dekInfo.algorithm){case"DES-CBC":l=8,h=forge$i.des.createDecryptionCipher;break;case"DES-EDE3-CBC":l=24,h=forge$i.des.createDecryptionCipher;break;case"AES-128-CBC":l=16,h=forge$i.aes.createDecryptionCipher;break;case"AES-192-CBC":l=24,h=forge$i.aes.createDecryptionCipher;break;case"AES-256-CBC":l=32,h=forge$i.aes.createDecryptionCipher;break;case"RC2-40-CBC":l=5,h=function(_){return forge$i.rc2.createDecryptionCipher(_,40)};break;case"RC2-64-CBC":l=8,h=function(_){return forge$i.rc2.createDecryptionCipher(_,64)};break;case"RC2-128-CBC":l=16,h=function(_){return forge$i.rc2.createDecryptionCipher(_,128)};break;default:var c=new Error('Could not decrypt private key; unsupported encryption algorithm "'+o.dekInfo.algorithm+'".');throw c.algorithm=o.dekInfo.algorithm,c}var d=forge$i.util.hexToBytes(o.dekInfo.parameters),g=forge$i.pbe.opensslDeriveBytes(e,d.substr(0,8),l),m=h(g);if(m.start(d),m.update(forge$i.util.createBuffer(o.body)),m.finish())t=m.output.getBytes();else return t}else t=o.body;return o.type==="ENCRYPTED PRIVATE KEY"?t=pki$3.decryptPrivateKeyInfo(asn1$6.fromDer(t),e):t=asn1$6.fromDer(t),t!==null&&(t=pki$3.privateKeyFromAsn1(t)),t};pki$3.pbe.generatePkcs12Key=function(n,e,t,o,c,l){var h,d;if(typeof l>"u"||l===null){if(!("sha1"in forge$i.md))throw new Error('"sha1" hash algorithm unavailable.');l=forge$i.md.sha1.create()}var g=l.digestLength,m=l.blockLength,v=new forge$i.util.ByteBuffer,_=new forge$i.util.ByteBuffer;if(n!=null){for(d=0;d<n.length;d++)_.putInt16(n.charCodeAt(d));_.putInt16(0)}var p=_.length(),a=e.length(),u=new forge$i.util.ByteBuffer;u.fillWithByte(t,m);var y=m*Math.ceil(a/m),b=new forge$i.util.ByteBuffer;for(d=0;d<y;d++)b.putByte(e.at(d%a));var w=m*Math.ceil(p/m),T=new forge$i.util.ByteBuffer;for(d=0;d<w;d++)T.putByte(_.at(d%p));var B=b;B.putBuffer(T);for(var H=Math.ceil(c/g),J=1;J<=H;J++){var W=new forge$i.util.ByteBuffer;W.putBytes(u.bytes()),W.putBytes(B.bytes());for(var fe=0;fe<o;fe++)l.start(),l.update(W.getBytes()),W=l.digest();var re=new forge$i.util.ByteBuffer;for(d=0;d<m;d++)re.putByte(W.at(d%g));var se=Math.ceil(a/m)+Math.ceil(p/m),ae=new forge$i.util.ByteBuffer;for(h=0;h<se;h++){var ee=new forge$i.util.ByteBuffer(B.getBytes(m)),P=511;for(d=re.length()-1;d>=0;d--)P=P>>8,P+=re.at(d)+ee.at(d),ee.setAt(d,P&255);ae.putBuffer(ee)}B=ae,v.putBuffer(W)}return v.truncate(v.length()-c),v};pki$3.pbe.getCipher=function(n,e,t){switch(n){case pki$3.oids.pkcs5PBES2:return pki$3.pbe.getCipherForPBES2(n,e,t);case pki$3.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pki$3.oids["pbewithSHAAnd40BitRC2-CBC"]:return pki$3.pbe.getCipherForPKCS12PBE(n,e,t);default:var o=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw o.oid=n,o.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],o}};pki$3.pbe.getCipherForPBES2=function(n,e,t){var o={},c=[];if(!asn1$6.validate(e,PBES2AlgorithmsValidator,o,c)){var l=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=c,l}if(n=asn1$6.derToOid(o.kdfOid),n!==pki$3.oids.pkcs5PBKDF2){var l=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw l.oid=n,l.supportedOids=["pkcs5PBKDF2"],l}if(n=asn1$6.derToOid(o.encOid),n!==pki$3.oids["aes128-CBC"]&&n!==pki$3.oids["aes192-CBC"]&&n!==pki$3.oids["aes256-CBC"]&&n!==pki$3.oids["des-EDE3-CBC"]&&n!==pki$3.oids.desCBC){var l=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw l.oid=n,l.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],l}var h=o.kdfSalt,d=forge$i.util.createBuffer(o.kdfIterationCount);d=d.getInt(d.length()<<3);var g,m;switch(pki$3.oids[n]){case"aes128-CBC":g=16,m=forge$i.aes.createDecryptionCipher;break;case"aes192-CBC":g=24,m=forge$i.aes.createDecryptionCipher;break;case"aes256-CBC":g=32,m=forge$i.aes.createDecryptionCipher;break;case"des-EDE3-CBC":g=24,m=forge$i.des.createDecryptionCipher;break;case"desCBC":g=8,m=forge$i.des.createDecryptionCipher;break}var v=prfOidToMessageDigest(o.prfOid),_=forge$i.pkcs5.pbkdf2(t,h,d,g,v),p=o.encIv,a=m(_);return a.start(p),a};pki$3.pbe.getCipherForPKCS12PBE=function(n,e,t){var o={},c=[];if(!asn1$6.validate(e,pkcs12PbeParamsValidator,o,c)){var l=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=c,l}var h=forge$i.util.createBuffer(o.salt),d=forge$i.util.createBuffer(o.iterations);d=d.getInt(d.length()<<3);var g,m,v;switch(n){case pki$3.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:g=24,m=8,v=forge$i.des.startDecrypting;break;case pki$3.oids["pbewithSHAAnd40BitRC2-CBC"]:g=5,m=8,v=function(y,b){var w=forge$i.rc2.createDecryptionCipher(y,40);return w.start(b,null),w};break;default:var l=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw l.oid=n,l}var _=prfOidToMessageDigest(o.prfOid),p=pki$3.pbe.generatePkcs12Key(t,h,1,d,g,_);_.start();var a=pki$3.pbe.generatePkcs12Key(t,h,2,d,m,_);return v(p,a)};pki$3.pbe.opensslDeriveBytes=function(n,e,t,o){if(typeof o>"u"||o===null){if(!("md5"in forge$i.md))throw new Error('"md5" hash algorithm unavailable.');o=forge$i.md.md5.create()}e===null&&(e="");for(var c=[hash$5(o,n+e)],l=16,h=1;l<t;++h,l+=16)c.push(hash$5(o,c[h-1]+n+e));return c.join("").substr(0,t)};function hash$5(n,e){return n.start().update(e).digest().getBytes()}function prfOidToMessageDigest(n){var e;if(!n)e="hmacWithSHA1";else if(e=pki$3.oids[asn1$6.derToOid(n)],!e){var t=new Error("Unsupported PRF OID.");throw t.oid=n,t.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],t}return prfAlgorithmToMessageDigest(e)}function prfAlgorithmToMessageDigest(n){var e=forge$i.md;switch(n){case"hmacWithSHA224":e=forge$i.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":n=n.substr(8).toLowerCase();break;default:var t=new Error("Unsupported PRF algorithm.");throw t.algorithm=n,t.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],t}if(!e||!(n in e))throw new Error("Unknown hash algorithm: "+n);return e[n].create()}function createPbkdf2Params(n,e,t,o){var c=asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OCTETSTRING,!1,n),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.INTEGER,!1,e.getBytes())]);return o!=="hmacWithSHA1"&&c.value.push(asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.INTEGER,!1,forge$i.util.hexToBytes(t.toString(16))),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.SEQUENCE,!0,[asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.OID,!1,asn1$6.oidToDer(pki$3.oids[o]).getBytes()),asn1$6.create(asn1$6.Class.UNIVERSAL,asn1$6.Type.NULL,!1,"")])),c}const PUBLIC_KEY_BYTE_LENGTH$1=32,PRIVATE_KEY_BYTE_LENGTH$1=64,KEYS_BYTE_LENGTH$1=32;async function generateKey$5(){const n=ed25519$1.utils.randomPrivateKey(),e=ed25519$1.getPublicKey(n);return{privateKey:concatKeys$1(n,e),publicKey:e}}async function generateKeyFromSeed$1(n){if(n.length!==KEYS_BYTE_LENGTH$1)throw new TypeError('"seed" must be 32 bytes in length.');if(!(n instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=n,t=ed25519$1.getPublicKey(e);return{privateKey:concatKeys$1(e,t),publicKey:t}}async function hashAndSign$5(n,e){const t=n.subarray(0,KEYS_BYTE_LENGTH$1);return ed25519$1.sign(e,t)}async function hashAndVerify$5(n,e,t){return ed25519$1.verify(e,t,n)}function concatKeys$1(n,e){const t=new Uint8Array(PRIVATE_KEY_BYTE_LENGTH$1);for(let o=0;o<KEYS_BYTE_LENGTH$1;o++)t[o]=n[o],t[KEYS_BYTE_LENGTH$1+o]=e[o];return t}const webcrypto$1={get(n=globalThis){const e=n.crypto;if(e==null||e.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}},derivedEmptyPasswordKey$1={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function create$3(n){const e=n?.algorithm??"AES-GCM";let t=n?.keyLength??16;const o=n?.nonceLength??12,c=n?.digest??"SHA-256",l=n?.saltLength??16,h=n?.iterations??32767,d=webcrypto$1.get();t*=8;async function g(_,p){const a=d.getRandomValues(new Uint8Array(l)),u=d.getRandomValues(new Uint8Array(o)),y={name:e,iv:u};typeof p=="string"&&(p=fromString$2(p));let b;if(p.length===0){b=await d.subtle.importKey("jwk",derivedEmptyPasswordKey$1,{name:"AES-GCM"},!0,["encrypt"]);try{const T={name:"PBKDF2",salt:a,iterations:h,hash:{name:c}},B=await d.subtle.importKey("raw",p,{name:"PBKDF2"},!1,["deriveKey"]);b=await d.subtle.deriveKey(T,B,{name:e,length:t},!0,["encrypt"])}catch{b=await d.subtle.importKey("jwk",derivedEmptyPasswordKey$1,{name:"AES-GCM"},!0,["encrypt"])}}else{const T={name:"PBKDF2",salt:a,iterations:h,hash:{name:c}},B=await d.subtle.importKey("raw",p,{name:"PBKDF2"},!1,["deriveKey"]);b=await d.subtle.deriveKey(T,B,{name:e,length:t},!0,["encrypt"])}const w=await d.subtle.encrypt(y,b,_);return concat$2([a,y.iv,new Uint8Array(w)])}async function m(_,p){const a=_.subarray(0,l),u=_.subarray(l,l+o),y=_.subarray(l+o),b={name:e,iv:u};typeof p=="string"&&(p=fromString$2(p));let w;if(p.length===0)try{const B={name:"PBKDF2",salt:a,iterations:h,hash:{name:c}},H=await d.subtle.importKey("raw",p,{name:"PBKDF2"},!1,["deriveKey"]);w=await d.subtle.deriveKey(B,H,{name:e,length:t},!0,["decrypt"])}catch{w=await d.subtle.importKey("jwk",derivedEmptyPasswordKey$1,{name:"AES-GCM"},!0,["decrypt"])}else{const B={name:"PBKDF2",salt:a,iterations:h,hash:{name:c}},H=await d.subtle.importKey("raw",p,{name:"PBKDF2"},!1,["deriveKey"]);w=await d.subtle.deriveKey(B,H,{name:e,length:t},!0,["decrypt"])}const T=await d.subtle.decrypt(b,w,y);return new Uint8Array(T)}return{encrypt:g,decrypt:m}}async function exporter$1(n,e){const o=await create$3().encrypt(n,e);return base64$2.encode(o)}var minimal$1={},aspromise=asPromise;function asPromise(n,e){for(var t=new Array(arguments.length-1),o=0,c=2,l=!0;c<arguments.length;)t[o++]=arguments[c++];return new Promise(function(d,g){t[o]=function(v){if(l)if(l=!1,v)g(v);else{for(var _=new Array(arguments.length-1),p=0;p<_.length;)_[p++]=arguments[p];d.apply(null,_)}};try{n.apply(e||null,t)}catch(m){l&&(l=!1,g(m))}})}var base64$1={};(function(n){var e=n;e.length=function(d){var g=d.length;if(!g)return 0;for(var m=0;--g%4>1&&d.charAt(g)==="=";)++m;return Math.ceil(d.length*3)/4-m};for(var t=new Array(64),o=new Array(123),c=0;c<64;)o[t[c]=c<26?c+65:c<52?c+71:c<62?c-4:c-59|43]=c++;e.encode=function(d,g,m){for(var v=null,_=[],p=0,a=0,u;g<m;){var y=d[g++];switch(a){case 0:_[p++]=t[y>>2],u=(y&3)<<4,a=1;break;case 1:_[p++]=t[u|y>>4],u=(y&15)<<2,a=2;break;case 2:_[p++]=t[u|y>>6],_[p++]=t[y&63],a=0;break}p>8191&&((v||(v=[])).push(String.fromCharCode.apply(String,_)),p=0)}return a&&(_[p++]=t[u],_[p++]=61,a===1&&(_[p++]=61)),v?(p&&v.push(String.fromCharCode.apply(String,_.slice(0,p))),v.join("")):String.fromCharCode.apply(String,_.slice(0,p))};var l="invalid encoding";e.decode=function(d,g,m){for(var v=m,_=0,p,a=0;a<d.length;){var u=d.charCodeAt(a++);if(u===61&&_>1)break;if((u=o[u])===void 0)throw Error(l);switch(_){case 0:p=u,_=1;break;case 1:g[m++]=p<<2|(u&48)>>4,p=u,_=2;break;case 2:g[m++]=(p&15)<<4|(u&60)>>2,p=u,_=3;break;case 3:g[m++]=(p&3)<<6|u,_=0;break}}if(_===1)throw Error(l);return m-v},e.test=function(d){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(d)}})(base64$1);var eventemitter=EventEmitter$3;function EventEmitter$3(){this._listeners={}}EventEmitter$3.prototype.on=function(e,t,o){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:o||this}),this};EventEmitter$3.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var o=this._listeners[e],c=0;c<o.length;)o[c].fn===t?o.splice(c,1):++c;return this};EventEmitter$3.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var o=[],c=1;c<arguments.length;)o.push(arguments[c++]);for(c=0;c<t.length;)t[c].fn.apply(t[c++].ctx,o)}return this};var float=factory(factory);function factory(n){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),o=t[3]===128;function c(g,m,v){e[0]=g,m[v]=t[0],m[v+1]=t[1],m[v+2]=t[2],m[v+3]=t[3]}function l(g,m,v){e[0]=g,m[v]=t[3],m[v+1]=t[2],m[v+2]=t[1],m[v+3]=t[0]}n.writeFloatLE=o?c:l,n.writeFloatBE=o?l:c;function h(g,m){return t[0]=g[m],t[1]=g[m+1],t[2]=g[m+2],t[3]=g[m+3],e[0]}function d(g,m){return t[3]=g[m],t[2]=g[m+1],t[1]=g[m+2],t[0]=g[m+3],e[0]}n.readFloatLE=o?h:d,n.readFloatBE=o?d:h}():function(){function e(o,c,l,h){var d=c<0?1:0;if(d&&(c=-c),c===0)o(1/c>0?0:2147483648,l,h);else if(isNaN(c))o(2143289344,l,h);else if(c>34028234663852886e22)o((d<<31|2139095040)>>>0,l,h);else if(c<11754943508222875e-54)o((d<<31|Math.round(c/1401298464324817e-60))>>>0,l,h);else{var g=Math.floor(Math.log(c)/Math.LN2),m=Math.round(c*Math.pow(2,-g)*8388608)&8388607;o((d<<31|g+127<<23|m)>>>0,l,h)}}n.writeFloatLE=e.bind(null,writeUintLE),n.writeFloatBE=e.bind(null,writeUintBE);function t(o,c,l){var h=o(c,l),d=(h>>31)*2+1,g=h>>>23&255,m=h&8388607;return g===255?m?NaN:d*(1/0):g===0?d*1401298464324817e-60*m:d*Math.pow(2,g-150)*(m+8388608)}n.readFloatLE=t.bind(null,readUintLE),n.readFloatBE=t.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),o=t[7]===128;function c(g,m,v){e[0]=g,m[v]=t[0],m[v+1]=t[1],m[v+2]=t[2],m[v+3]=t[3],m[v+4]=t[4],m[v+5]=t[5],m[v+6]=t[6],m[v+7]=t[7]}function l(g,m,v){e[0]=g,m[v]=t[7],m[v+1]=t[6],m[v+2]=t[5],m[v+3]=t[4],m[v+4]=t[3],m[v+5]=t[2],m[v+6]=t[1],m[v+7]=t[0]}n.writeDoubleLE=o?c:l,n.writeDoubleBE=o?l:c;function h(g,m){return t[0]=g[m],t[1]=g[m+1],t[2]=g[m+2],t[3]=g[m+3],t[4]=g[m+4],t[5]=g[m+5],t[6]=g[m+6],t[7]=g[m+7],e[0]}function d(g,m){return t[7]=g[m],t[6]=g[m+1],t[5]=g[m+2],t[4]=g[m+3],t[3]=g[m+4],t[2]=g[m+5],t[1]=g[m+6],t[0]=g[m+7],e[0]}n.readDoubleLE=o?h:d,n.readDoubleBE=o?d:h}():function(){function e(o,c,l,h,d,g){var m=h<0?1:0;if(m&&(h=-h),h===0)o(0,d,g+c),o(1/h>0?0:2147483648,d,g+l);else if(isNaN(h))o(0,d,g+c),o(2146959360,d,g+l);else if(h>17976931348623157e292)o(0,d,g+c),o((m<<31|2146435072)>>>0,d,g+l);else{var v;if(h<22250738585072014e-324)v=h/5e-324,o(v>>>0,d,g+c),o((m<<31|v/4294967296)>>>0,d,g+l);else{var _=Math.floor(Math.log(h)/Math.LN2);_===1024&&(_=1023),v=h*Math.pow(2,-_),o(v*4503599627370496>>>0,d,g+c),o((m<<31|_+1023<<20|v*1048576&1048575)>>>0,d,g+l)}}}n.writeDoubleLE=e.bind(null,writeUintLE,0,4),n.writeDoubleBE=e.bind(null,writeUintBE,4,0);function t(o,c,l,h,d){var g=o(h,d+c),m=o(h,d+l),v=(m>>31)*2+1,_=m>>>20&2047,p=4294967296*(m&1048575)+g;return _===2047?p?NaN:v*(1/0):_===0?v*5e-324*p:v*Math.pow(2,_-1075)*(p+4503599627370496)}n.readDoubleLE=t.bind(null,readUintLE,0,4),n.readDoubleBE=t.bind(null,readUintBE,4,0)}(),n}function writeUintLE(n,e,t){e[t]=n&255,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}function writeUintBE(n,e,t){e[t]=n>>>24,e[t+1]=n>>>16&255,e[t+2]=n>>>8&255,e[t+3]=n&255}function readUintLE(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0}function readUintBE(n,e){return(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}var utf8$2={};(function(n){var e=n;e.length=function(o){for(var c=0,l=0,h=0;h<o.length;++h)l=o.charCodeAt(h),l<128?c+=1:l<2048?c+=2:(l&64512)===55296&&(o.charCodeAt(h+1)&64512)===56320?(++h,c+=4):c+=3;return c},e.read=function(o,c,l){var h=l-c;if(h<1)return"";for(var d=null,g=[],m=0,v;c<l;)v=o[c++],v<128?g[m++]=v:v>191&&v<224?g[m++]=(v&31)<<6|o[c++]&63:v>239&&v<365?(v=((v&7)<<18|(o[c++]&63)<<12|(o[c++]&63)<<6|o[c++]&63)-65536,g[m++]=55296+(v>>10),g[m++]=56320+(v&1023)):g[m++]=(v&15)<<12|(o[c++]&63)<<6|o[c++]&63,m>8191&&((d||(d=[])).push(String.fromCharCode.apply(String,g)),m=0);return d?(m&&d.push(String.fromCharCode.apply(String,g.slice(0,m))),d.join("")):String.fromCharCode.apply(String,g.slice(0,m))},e.write=function(o,c,l){for(var h=l,d,g,m=0;m<o.length;++m)d=o.charCodeAt(m),d<128?c[l++]=d:d<2048?(c[l++]=d>>6|192,c[l++]=d&63|128):(d&64512)===55296&&((g=o.charCodeAt(m+1))&64512)===56320?(d=65536+((d&1023)<<10)+(g&1023),++m,c[l++]=d>>18|240,c[l++]=d>>12&63|128,c[l++]=d>>6&63|128,c[l++]=d&63|128):(c[l++]=d>>12|224,c[l++]=d>>6&63|128,c[l++]=d&63|128);return l-h}})(utf8$2);var pool_1=pool;function pool(n,e,t){var o=t||8192,c=o>>>1,l=null,h=o;return function(g){if(g<1||g>c)return n(g);h+g>o&&(l=n(o),h=0);var m=e.call(l,h,h+=g);return h&7&&(h=(h|7)+1),m}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var n=requireMinimal();function e(l,h){this.lo=l>>>0,this.hi=h>>>0}var t=e.zero=new e(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var o=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(h){if(h===0)return t;var d=h<0;d&&(h=-h);var g=h>>>0,m=(h-g)/4294967296>>>0;return d&&(m=~m>>>0,g=~g>>>0,++g>4294967295&&(g=0,++m>4294967295&&(m=0))),new e(g,m)},e.from=function(h){if(typeof h=="number")return e.fromNumber(h);if(n.isString(h))if(n.Long)h=n.Long.fromString(h);else return e.fromNumber(parseInt(h,10));return h.low||h.high?new e(h.low>>>0,h.high>>>0):t},e.prototype.toNumber=function(h){if(!h&&this.hi>>>31){var d=~this.lo+1>>>0,g=~this.hi>>>0;return d||(g=g+1>>>0),-(d+g*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(h){return n.Long?new n.Long(this.lo|0,this.hi|0,!!h):{low:this.lo|0,high:this.hi|0,unsigned:!!h}};var c=String.prototype.charCodeAt;return e.fromHash=function(h){return h===o?t:new e((c.call(h,0)|c.call(h,1)<<8|c.call(h,2)<<16|c.call(h,3)<<24)>>>0,(c.call(h,4)|c.call(h,5)<<8|c.call(h,6)<<16|c.call(h,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var h=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^h)>>>0,this.lo=(this.lo<<1^h)>>>0,this},e.prototype.zzDecode=function(){var h=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^h)>>>0,this.hi=(this.hi>>>1^h)>>>0,this},e.prototype.length=function(){var h=this.lo,d=(this.lo>>>28|this.hi<<4)>>>0,g=this.hi>>>24;return g===0?d===0?h<16384?h<128?1:2:h<2097152?3:4:d<16384?d<128?5:6:d<2097152?7:8:g<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(n){var e=n;e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l},e.isString=function(l){return typeof l=="string"||l instanceof String},e.isObject=function(l){return l&&typeof l=="object"},e.isset=e.isSet=function(l,h){var d=l[h];return d!=null&&l.hasOwnProperty(h)?typeof d!="object"||(Array.isArray(d)?d.length:Object.keys(d).length)>0:!1},e.Buffer=function(){try{var c=e.inquire("buffer").Buffer;return c.prototype.utf8Write?c:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(l){return typeof l=="number"?e.Buffer?e._Buffer_allocUnsafe(l):new e.Array(l):e.Buffer?e._Buffer_from(l):typeof Uint8Array>"u"?l:new Uint8Array(l)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(l){return l?e.LongBits.from(l).toHash():e.LongBits.zeroHash},e.longFromHash=function(l,h){var d=e.LongBits.fromHash(l);return e.Long?e.Long.fromBits(d.lo,d.hi,h):d.toNumber(!!h)};function t(c,l,h){for(var d=Object.keys(l),g=0;g<d.length;++g)(c[d[g]]===void 0||!h)&&(c[d[g]]=l[d[g]]);return c}e.merge=t,e.lcFirst=function(l){return l.charAt(0).toLowerCase()+l.substring(1)};function o(c){function l(h,d){if(!(this instanceof l))return new l(h,d);Object.defineProperty(this,"message",{get:function(){return h}}),Error.captureStackTrace?Error.captureStackTrace(this,l):Object.defineProperty(this,"stack",{value:new Error().stack||""}),d&&t(this,d)}return l.prototype=Object.create(Error.prototype,{constructor:{value:l,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return c},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),l}e.newError=o,e.ProtocolError=o("ProtocolError"),e.oneOfGetter=function(l){for(var h={},d=0;d<l.length;++d)h[l[d]]=1;return function(){for(var g=Object.keys(this),m=g.length-1;m>-1;--m)if(h[g[m]]===1&&this[g[m]]!==void 0&&this[g[m]]!==null)return g[m]}},e.oneOfSetter=function(l){return function(h){for(var d=0;d<l.length;++d)l[d]!==h&&delete this[l[d]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var c=e.Buffer;if(!c){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=c.from!==Uint8Array.from&&c.from||function(h,d){return new c(h,d)},e._Buffer_allocUnsafe=c.allocUnsafe||function(h){return new c(h)}}}(minimal$1)),minimal$1}var reader$2=Reader$2,util$5=requireMinimal(),BufferReader$1,LongBits$1=util$5.LongBits,utf8$1=util$5.utf8;function indexOutOfRange(n,e){return RangeError("index out of range: "+n.pos+" + "+(e||1)+" > "+n.len)}function Reader$2(n){this.buf=n,this.pos=0,this.len=n.length}var create_array=typeof Uint8Array<"u"?function n(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$2(e);throw Error("illegal buffer")}:function n(e){if(Array.isArray(e))return new Reader$2(e);throw Error("illegal buffer")},create$2=function n(){return util$5.Buffer?function(t){return(Reader$2.create=function(c){return util$5.Buffer.isBuffer(c)?new BufferReader$1(c):create_array(c)})(t)}:create_array};Reader$2.create=create$2();Reader$2.prototype._slice=util$5.Array.prototype.subarray||util$5.Array.prototype.slice;Reader$2.prototype.uint32=function n(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$2.prototype.int32=function n(){return this.uint32()|0};Reader$2.prototype.sint32=function n(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var n=new LongBits$1(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n;if(n.lo=(n.lo|(this.buf[this.pos]&127)<<28)>>>0,n.hi=(n.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return n;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n}return n.lo=(n.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,n}if(this.len-this.pos>4){for(;e<5;++e)if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}throw Error("invalid varint encoding")}Reader$2.prototype.bool=function n(){return this.uint32()!==0};function readFixed32_end(n,e){return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0}Reader$2.prototype.fixed32=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$2.prototype.sfixed32=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$1(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$2.prototype.float=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$5.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$2.prototype.double=function n(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$5.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$2.prototype.bytes=function n(){var e=this.uint32(),t=this.pos,o=this.pos+e;if(o>this.len)throw indexOutOfRange(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,o);if(t===o){var c=util$5.Buffer;return c?c.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,o)};Reader$2.prototype.string=function n(){var e=this.bytes();return utf8$1.read(e,0,e.length)};Reader$2.prototype.skip=function n(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$2.prototype.skipType=function(n){switch(n){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(n=this.uint32()&7)!==4;)this.skipType(n);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+n+" at offset "+this.pos)}return this};Reader$2._configure=function(n){BufferReader$1=n,Reader$2.create=create$2(),BufferReader$1._configure();var e=util$5.Long?"toLong":"toNumber";util$5.merge(Reader$2.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};const ReaderClass=getDefaultExportFromCjs(reader$2);var reader_buffer=BufferReader,Reader$1=reader$2;(BufferReader.prototype=Object.create(Reader$1.prototype)).constructor=BufferReader;var util$4=requireMinimal();function BufferReader(n){Reader$1.call(this,n)}BufferReader._configure=function(){util$4.Buffer&&(BufferReader.prototype._slice=util$4.Buffer.prototype.slice)};BufferReader.prototype.string=function n(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();const ReaderBufferClass=getDefaultExportFromCjs(reader_buffer);var minimalExports=requireMinimal();const util$3=getDefaultExportFromCjs(minimalExports);var writer$1=Writer$2,util$2=requireMinimal(),BufferWriter$1,LongBits=util$2.LongBits,base64=util$2.base64,utf8=util$2.utf8;function Op(n,e,t){this.fn=n,this.len=e,this.next=void 0,this.val=t}function noop$2(){}function State(n){this.head=n.head,this.tail=n.tail,this.len=n.len,this.next=n.states}function Writer$2(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create$1=function n(){return util$2.Buffer?function(){return(Writer$2.create=function(){return new BufferWriter$1})()}:function(){return new Writer$2}};Writer$2.create=create$1();Writer$2.alloc=function n(e){return new util$2.Array(e)};util$2.Array!==Array&&(Writer$2.alloc=util$2.pool(Writer$2.alloc,util$2.Array.prototype.subarray));Writer$2.prototype._push=function n(e,t,o){return this.tail=this.tail.next=new Op(e,t,o),this.len+=t,this};function writeByte(n,e,t){e[t]=n&255}function writeVarint32(n,e,t){for(;n>127;)e[t++]=n&127|128,n>>>=7;e[t]=n}function VarintOp(n,e){this.len=n,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$2.prototype.uint32=function n(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$2.prototype.int32=function n(e){return e<0?this._push(writeVarint64,10,LongBits.fromNumber(e)):this.uint32(e)};Writer$2.prototype.sint32=function n(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(n,e,t){for(;n.hi;)e[t++]=n.lo&127|128,n.lo=(n.lo>>>7|n.hi<<25)>>>0,n.hi>>>=7;for(;n.lo>127;)e[t++]=n.lo&127|128,n.lo=n.lo>>>7;e[t++]=n.lo}Writer$2.prototype.uint64=function n(e){var t=LongBits.from(e);return this._push(writeVarint64,t.length(),t)};Writer$2.prototype.int64=Writer$2.prototype.uint64;Writer$2.prototype.sint64=function n(e){var t=LongBits.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer$2.prototype.bool=function n(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(n,e,t){e[t]=n&255,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}Writer$2.prototype.fixed32=function n(e){return this._push(writeFixed32,4,e>>>0)};Writer$2.prototype.sfixed32=Writer$2.prototype.fixed32;Writer$2.prototype.fixed64=function n(e){var t=LongBits.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer$2.prototype.sfixed64=Writer$2.prototype.fixed64;Writer$2.prototype.float=function n(e){return this._push(util$2.float.writeFloatLE,4,e)};Writer$2.prototype.double=function n(e){return this._push(util$2.float.writeDoubleLE,8,e)};var writeBytes=util$2.Array.prototype.set?function n(e,t,o){t.set(e,o)}:function n(e,t,o){for(var c=0;c<e.length;++c)t[o+c]=e[c]};Writer$2.prototype.bytes=function n(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$2.isString(e)){var o=Writer$2.alloc(t=base64.length(e));base64.decode(e,o,0),e=o}return this.uint32(t)._push(writeBytes,t,e)};Writer$2.prototype.string=function n(e){var t=utf8.length(e);return t?this.uint32(t)._push(utf8.write,t,e):this._push(writeByte,1,0)};Writer$2.prototype.fork=function n(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$2.prototype.reset=function n(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$2.prototype.ldelim=function n(){var e=this.head,t=this.tail,o=this.len;return this.reset().uint32(o),o&&(this.tail.next=e.next,this.tail=t,this.len+=o),this};Writer$2.prototype.finish=function n(){for(var e=this.head.next,t=this.constructor.alloc(this.len),o=0;e;)e.fn(e.val,t,o),o+=e.len,e=e.next;return t};Writer$2._configure=function(n){BufferWriter$1=n,Writer$2.create=create$1(),BufferWriter$1._configure()};const WriterClass=getDefaultExportFromCjs(writer$1);var writer_buffer=BufferWriter,Writer$1=writer$1;(BufferWriter.prototype=Object.create(Writer$1.prototype)).constructor=BufferWriter;var util$1=requireMinimal();function BufferWriter(){Writer$1.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$1._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$1.Buffer&&util$1.Buffer.prototype instanceof Uint8Array&&util$1.Buffer.prototype.set.name==="set"?function(e,t,o){t.set(e,o)}:function(e,t,o){if(e.copy)e.copy(t,o,0,e.length);else for(var c=0;c<e.length;)t[o++]=e[c++]}};BufferWriter.prototype.bytes=function n(e){util$1.isString(e)&&(e=util$1._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this};function writeStringBuffer(n,e,t){n.length<40?util$1.utf8.write(n,e,t):e.utf8Write?e.utf8Write(n,t):e.write(n,t)}BufferWriter.prototype.string=function n(e){var t=util$1.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this};BufferWriter._configure();const WriterBufferClass=getDefaultExportFromCjs(writer_buffer);function configure(){util$3._configure(),ReaderClass._configure(ReaderBufferClass),WriterClass._configure(WriterBufferClass)}configure();const methods=["uint64","int64","sint64","fixed64","sfixed64"];function patchReader(n){for(const e of methods){if(n[e]==null)continue;const t=n[e];n[e]=function(){return BigInt(t.call(this).toString())}}return n}function reader$1(n){return patchReader(new ReaderClass(n))}function patchWriter(n){for(const e of methods){if(n[e]==null)continue;const t=n[e];n[e]=function(o){return t.call(this,o.toString())}}return n}function writer(){return patchWriter(WriterClass.create())}function decodeMessage$1(n,e){const t=reader$1(n instanceof Uint8Array?n:n.subarray());return e.decode(t)}function encodeMessage(n,e){const t=writer();return e.encode(n,t,{lengthDelimited:!1}),t.finish()}var CODEC_TYPES;(function(n){n[n.VARINT=0]="VARINT",n[n.BIT64=1]="BIT64",n[n.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",n[n.START_GROUP=3]="START_GROUP",n[n.END_GROUP=4]="END_GROUP",n[n.BIT32=5]="BIT32"})(CODEC_TYPES||(CODEC_TYPES={}));function createCodec(n,e,t,o){return{name:n,type:e,encode:t,decode:o}}function enumeration(n){function e(c){if(n[c.toString()]==null)throw new Error("Invalid enum value");return n[c]}const t=function(l,h){const d=e(l);h.int32(d)},o=function(l){const h=l.int32();return e(h)};return createCodec("enum",CODEC_TYPES.VARINT,t,o)}function message(n,e){return createCodec("message",CODEC_TYPES.LENGTH_DELIMITED,n,e)}var KeyType$2;(function(n){n.RSA="RSA",n.Ed25519="Ed25519",n.Secp256k1="Secp256k1"})(KeyType$2||(KeyType$2={}));var __KeyTypeValues$2;(function(n){n[n.RSA=0]="RSA",n[n.Ed25519=1]="Ed25519",n[n.Secp256k1=2]="Secp256k1"})(__KeyTypeValues$2||(__KeyTypeValues$2={}));(function(n){n.codec=()=>enumeration(__KeyTypeValues$2)})(KeyType$2||(KeyType$2={}));var PublicKey$4;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),t.Type!=null&&(o.uint32(8),KeyType$2.codec().encode(t.Type,o)),t.Data!=null&&(o.uint32(18),o.bytes(t.Data)),c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.Type=KeyType$2.codec().decode(t);break;case 2:c.Data=t.bytes();break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(PublicKey$4||(PublicKey$4={}));var PrivateKey$4;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),t.Type!=null&&(o.uint32(8),KeyType$2.codec().encode(t.Type,o)),t.Data!=null&&(o.uint32(18),o.bytes(t.Data)),c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.Type=KeyType$2.codec().decode(t);break;case 2:c.Data=t.bytes();break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(PrivateKey$4||(PrivateKey$4={}));let Ed25519PublicKey$2=class{constructor(e){me(this,"_key");this._key=ensureKey$1(e,PUBLIC_KEY_BYTE_LENGTH$1)}async verify(e,t){return hashAndVerify$5(this._key,t,e)}marshal(){return this._key}get bytes(){return PublicKey$4.encode({Type:KeyType$2.Ed25519,Data:this.marshal()}).subarray()}equals(e){return equals(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}},Ed25519PrivateKey$2=class{constructor(e,t){me(this,"_key");me(this,"_publicKey");this._key=ensureKey$1(e,PRIVATE_KEY_BYTE_LENGTH$1),this._publicKey=ensureKey$1(t,PUBLIC_KEY_BYTE_LENGTH$1)}async sign(e){return hashAndSign$5(this._key,e)}get public(){return new Ed25519PublicKey$2(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey$4.encode({Type:KeyType$2.Ed25519,Data:this.marshal()}).subarray()}equals(e){return equals(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}async id(){const e=identity.digest(this.public.bytes);return base58btc.encode(e.bytes).substring(1)}async export(e,t="libp2p-key"){if(t==="libp2p-key")return exporter$1(this.bytes,e);throw new CodeError$1(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function unmarshalEd25519PrivateKey$1(n){if(n.length>PRIVATE_KEY_BYTE_LENGTH$1){n=ensureKey$1(n,PRIVATE_KEY_BYTE_LENGTH$1+PUBLIC_KEY_BYTE_LENGTH$1);const o=n.subarray(0,PRIVATE_KEY_BYTE_LENGTH$1),c=n.subarray(PRIVATE_KEY_BYTE_LENGTH$1,n.length);return new Ed25519PrivateKey$2(o,c)}n=ensureKey$1(n,PRIVATE_KEY_BYTE_LENGTH$1);const e=n.subarray(0,PRIVATE_KEY_BYTE_LENGTH$1),t=n.subarray(PUBLIC_KEY_BYTE_LENGTH$1);return new Ed25519PrivateKey$2(e,t)}function unmarshalEd25519PublicKey$1(n){return n=ensureKey$1(n,PUBLIC_KEY_BYTE_LENGTH$1),new Ed25519PublicKey$2(n)}async function generateKeyPair$6(){const{privateKey:n,publicKey:e}=await generateKey$5();return new Ed25519PrivateKey$2(n,e)}async function generateKeyPairFromSeed$1(n){const{privateKey:e,publicKey:t}=await generateKeyFromSeed$1(n);return new Ed25519PrivateKey$2(e,t)}function ensureKey$1(n,e){if(n=Uint8Array.from(n??[]),n.length!==e)throw new CodeError$1(`Key must be a Uint8Array of length ${e}, got ${n.length}`,"ERR_INVALID_KEY_TYPE");return n}const Ed25519$1=Object.freeze(Object.defineProperty({__proto__:null,Ed25519PrivateKey:Ed25519PrivateKey$2,Ed25519PublicKey:Ed25519PublicKey$2,generateKeyPair:generateKeyPair$6,generateKeyPairFromSeed:generateKeyPairFromSeed$1,unmarshalEd25519PrivateKey:unmarshalEd25519PrivateKey$1,unmarshalEd25519PublicKey:unmarshalEd25519PublicKey$1},Symbol.toStringTag,{value:"Module"}));function bigIntegerToUintBase64url$1(n,e){let t=Uint8Array.from(n.abs().toByteArray());if(t=t[0]===0?t.subarray(1):t,e!=null){if(t.length>e)throw new Error("byte array longer than desired length");t=concat$2([new Uint8Array(e-t.length),t])}return toString$2(t,"base64url")}function base64urlToBigInteger$1(n){const e=base64urlToBuffer$1(n);return new forge$E.jsbn.BigInteger(toString$2(e,"base16"),16)}function base64urlToBuffer$1(n,e){let t=fromString$2(n,"base64urlpad");if(e!=null){if(t.length>e)throw new Error("byte array longer than desired length");t=concat$2([new Uint8Array(e-t.length),t])}return t}const bits$2={"P-256":256,"P-384":384,"P-521":521},curveTypes$2=Object.keys(bits$2);curveTypes$2.join(" / ");async function importer(n,e){const t=base64$2.decode(n);return create$3().decrypt(t,e)}var forge$h=forge$D,sha512$2=forge$h.sha512=forge$h.sha512||{};forge$h.md.sha512=forge$h.md.algorithms.sha512=sha512$2;var sha384$1=forge$h.sha384=forge$h.sha512.sha384=forge$h.sha512.sha384||{};sha384$1.create=function(){return sha512$2.create("SHA-384")};forge$h.md.sha384=forge$h.md.algorithms.sha384=sha384$1;forge$h.sha512.sha256=forge$h.sha512.sha256||{create:function(){return sha512$2.create("SHA-512/256")}};forge$h.md["sha512/256"]=forge$h.md.algorithms["sha512/256"]=forge$h.sha512.sha256;forge$h.sha512.sha224=forge$h.sha512.sha224||{create:function(){return sha512$2.create("SHA-512/224")}};forge$h.md["sha512/224"]=forge$h.md.algorithms["sha512/224"]=forge$h.sha512.sha224;sha512$2.create=function(n){if(_initialized$1||_init$1(),typeof n>"u"&&(n="SHA-512"),!(n in _states))throw new Error("Invalid SHA-512 algorithm: "+n);for(var e=_states[n],t=null,o=forge$h.util.createBuffer(),c=new Array(80),l=0;l<80;++l)c[l]=new Array(2);var h=64;switch(n){case"SHA-384":h=48;break;case"SHA-512/256":h=32;break;case"SHA-512/224":h=28;break}var d={algorithm:n.replace("-","").toLowerCase(),blockLength:128,digestLength:h,messageLength:0,fullMessageLength:null,messageLengthSize:16};return d.start=function(){d.messageLength=0,d.fullMessageLength=d.messageLength128=[];for(var g=d.messageLengthSize/4,m=0;m<g;++m)d.fullMessageLength.push(0);o=forge$h.util.createBuffer(),t=new Array(e.length);for(var m=0;m<e.length;++m)t[m]=e[m].slice(0);return d},d.start(),d.update=function(g,m){m==="utf8"&&(g=forge$h.util.encodeUtf8(g));var v=g.length;d.messageLength+=v,v=[v/4294967296>>>0,v>>>0];for(var _=d.fullMessageLength.length-1;_>=0;--_)d.fullMessageLength[_]+=v[1],v[1]=v[0]+(d.fullMessageLength[_]/4294967296>>>0),d.fullMessageLength[_]=d.fullMessageLength[_]>>>0,v[0]=v[1]/4294967296>>>0;return o.putBytes(g),_update$1(t,c,o),(o.read>2048||o.length()===0)&&o.compact(),d},d.digest=function(){var g=forge$h.util.createBuffer();g.putBytes(o.bytes());var m=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize,v=m&d.blockLength-1;g.putBytes(_padding$1.substr(0,d.blockLength-v));for(var _,p,a=d.fullMessageLength[0]*8,u=0;u<d.fullMessageLength.length-1;++u)_=d.fullMessageLength[u+1]*8,p=_/4294967296>>>0,a+=p,g.putInt32(a>>>0),a=_>>>0;g.putInt32(a);for(var y=new Array(t.length),u=0;u<t.length;++u)y[u]=t[u].slice(0);_update$1(y,c,g);var b=forge$h.util.createBuffer(),w;n==="SHA-512"?w=y.length:n==="SHA-384"?w=y.length-2:w=y.length-4;for(var u=0;u<w;++u)b.putInt32(y[u][0]),(u!==w-1||n!=="SHA-512/224")&&b.putInt32(y[u][1]);return b},d};var _padding$1=null,_initialized$1=!1,_k$1=null,_states=null;function _init$1(){_padding$1=String.fromCharCode(128),_padding$1+=forge$h.util.fillString(String.fromCharCode(0),128),_k$1=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_states={},_states["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_states["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_states["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_states["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],_initialized$1=!0}function _update$1(n,e,t){for(var o,c,l,h,d,g,m,v,_,p,a,u,y,b,w,T,B,H,J,W,fe,re,se,ae,ee,P,C,E,k,F,j,Q,G,U,$,O=t.length();O>=128;){for(k=0;k<16;++k)e[k][0]=t.getInt32()>>>0,e[k][1]=t.getInt32()>>>0;for(;k<80;++k)Q=e[k-2],F=Q[0],j=Q[1],o=((F>>>19|j<<13)^(j>>>29|F<<3)^F>>>6)>>>0,c=((F<<13|j>>>19)^(j<<3|F>>>29)^(F<<26|j>>>6))>>>0,U=e[k-15],F=U[0],j=U[1],l=((F>>>1|j<<31)^(F>>>8|j<<24)^F>>>7)>>>0,h=((F<<31|j>>>1)^(F<<24|j>>>8)^(F<<25|j>>>7))>>>0,G=e[k-7],$=e[k-16],j=c+G[1]+h+$[1],e[k][0]=o+G[0]+l+$[0]+(j/4294967296>>>0)>>>0,e[k][1]=j>>>0;for(y=n[0][0],b=n[0][1],w=n[1][0],T=n[1][1],B=n[2][0],H=n[2][1],J=n[3][0],W=n[3][1],fe=n[4][0],re=n[4][1],se=n[5][0],ae=n[5][1],ee=n[6][0],P=n[6][1],C=n[7][0],E=n[7][1],k=0;k<80;++k)m=((fe>>>14|re<<18)^(fe>>>18|re<<14)^(re>>>9|fe<<23))>>>0,v=((fe<<18|re>>>14)^(fe<<14|re>>>18)^(re<<23|fe>>>9))>>>0,_=(ee^fe&(se^ee))>>>0,p=(P^re&(ae^P))>>>0,d=((y>>>28|b<<4)^(b>>>2|y<<30)^(b>>>7|y<<25))>>>0,g=((y<<4|b>>>28)^(b<<30|y>>>2)^(b<<25|y>>>7))>>>0,a=(y&w|B&(y^w))>>>0,u=(b&T|H&(b^T))>>>0,j=E+v+p+_k$1[k][1]+e[k][1],o=C+m+_+_k$1[k][0]+e[k][0]+(j/4294967296>>>0)>>>0,c=j>>>0,j=g+u,l=d+a+(j/4294967296>>>0)>>>0,h=j>>>0,C=ee,E=P,ee=se,P=ae,se=fe,ae=re,j=W+c,fe=J+o+(j/4294967296>>>0)>>>0,re=j>>>0,J=B,W=H,B=w,H=T,w=y,T=b,j=c+h,y=o+l+(j/4294967296>>>0)>>>0,b=j>>>0;j=n[0][1]+b,n[0][0]=n[0][0]+y+(j/4294967296>>>0)>>>0,n[0][1]=j>>>0,j=n[1][1]+T,n[1][0]=n[1][0]+w+(j/4294967296>>>0)>>>0,n[1][1]=j>>>0,j=n[2][1]+H,n[2][0]=n[2][0]+B+(j/4294967296>>>0)>>>0,n[2][1]=j>>>0,j=n[3][1]+W,n[3][0]=n[3][0]+J+(j/4294967296>>>0)>>>0,n[3][1]=j>>>0,j=n[4][1]+re,n[4][0]=n[4][0]+fe+(j/4294967296>>>0)>>>0,n[4][1]=j>>>0,j=n[5][1]+ae,n[5][0]=n[5][0]+se+(j/4294967296>>>0)>>>0,n[5][1]=j>>>0,j=n[6][1]+P,n[6][0]=n[6][0]+ee+(j/4294967296>>>0)>>>0,n[6][1]=j>>>0,j=n[7][1]+E,n[7][0]=n[7][0]+C+(j/4294967296>>>0)>>>0,n[7][1]=j>>>0,O-=128}}function randomBytes$2(n){if(isNaN(n)||n<=0)throw new CodeError$1("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return randomBytes$3(n)}function convert$2(n,e){return e.map(t=>base64urlToBigInteger$1(n[t]))}function jwk2priv$1(n){return forge$E.pki.setRsaPrivateKey(...convert$2(n,["n","e","d","p","q","dp","dq","qi"]))}function jwk2pub$1(n){return forge$E.pki.setRsaPublicKey(...convert$2(n,["n","e"]))}function pkcs1ToJwk$1(n){const e=forge$E.asn1.fromDer(toString$2(n,"ascii")),t=forge$E.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:bigIntegerToUintBase64url$1(t.n),e:bigIntegerToUintBase64url$1(t.e),d:bigIntegerToUintBase64url$1(t.d),p:bigIntegerToUintBase64url$1(t.p),q:bigIntegerToUintBase64url$1(t.q),dp:bigIntegerToUintBase64url$1(t.dP),dq:bigIntegerToUintBase64url$1(t.dQ),qi:bigIntegerToUintBase64url$1(t.qInv),alg:"RS256"}}function jwkToPkcs1$1(n){if(n.n==null||n.e==null||n.d==null||n.p==null||n.q==null||n.dp==null||n.dq==null||n.qi==null)throw new CodeError$1("JWK was missing components","ERR_INVALID_PARAMETERS");const e=forge$E.pki.privateKeyToAsn1({n:base64urlToBigInteger$1(n.n),e:base64urlToBigInteger$1(n.e),d:base64urlToBigInteger$1(n.d),p:base64urlToBigInteger$1(n.p),q:base64urlToBigInteger$1(n.q),dP:base64urlToBigInteger$1(n.dp),dQ:base64urlToBigInteger$1(n.dq),qInv:base64urlToBigInteger$1(n.qi)});return fromString$2(forge$E.asn1.toDer(e).getBytes(),"ascii")}function pkixToJwk$1(n){const e=forge$E.asn1.fromDer(toString$2(n,"ascii")),t=forge$E.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:bigIntegerToUintBase64url$1(t.n),e:bigIntegerToUintBase64url$1(t.e)}}function jwkToPkix$1(n){if(n.n==null||n.e==null)throw new CodeError$1("JWK was missing components","ERR_INVALID_PARAMETERS");const e=forge$E.pki.publicKeyToAsn1({n:base64urlToBigInteger$1(n.n),e:base64urlToBigInteger$1(n.e)});return fromString$2(forge$E.asn1.toDer(e).getBytes(),"ascii")}async function generateKey$4(n){const e=await webcrypto$1.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:n,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),t=await exportKey$1(e);return{privateKey:t[0],publicKey:t[1]}}async function unmarshalPrivateKey$3(n){const t=[await webcrypto$1.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await derivePublicFromPrivate$1(n)],o=await exportKey$1({privateKey:t[0],publicKey:t[1]});return{privateKey:o[0],publicKey:o[1]}}async function hashAndSign$4(n,e){const t=await webcrypto$1.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),o=await webcrypto$1.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},t,Uint8Array.from(e));return new Uint8Array(o,0,o.byteLength)}async function hashAndVerify$4(n,e,t){const o=await webcrypto$1.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return webcrypto$1.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},o,e,t)}async function exportKey$1(n){if(n.privateKey==null||n.publicKey==null)throw new CodeError$1("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([webcrypto$1.get().subtle.exportKey("jwk",n.privateKey),webcrypto$1.get().subtle.exportKey("jwk",n.publicKey)])}async function derivePublicFromPrivate$1(n){return webcrypto$1.get().subtle.importKey("jwk",{kty:n.kty,n:n.n,e:n.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function convertKey$1(n,e,t,o){const c=e?jwk2pub$1(n):jwk2priv$1(n),l=toString$2(Uint8Array.from(t),"ascii"),h=o(l,c);return fromString$2(h,"ascii")}function encrypt$2(n,e){return convertKey$1(n,!0,e,(t,o)=>o.encrypt(t))}function decrypt$3(n,e){return convertKey$1(n,!1,e,(t,o)=>o.decrypt(t))}function keySize$1(n){if(n.kty!=="RSA")throw new CodeError$1("invalid key type","ERR_INVALID_KEY_TYPE");if(n.n==null)throw new CodeError$1("invalid key modulus","ERR_INVALID_KEY_MODULUS");return fromString$2(n.n,"base64url").length*8}const MAX_KEY_SIZE$1=8192;let RsaPublicKey$1=class{constructor(e){me(this,"_key");this._key=e}async verify(e,t){return hashAndVerify$4(this._key,t,e)}marshal(){return jwkToPkix$1(this._key)}get bytes(){return PublicKey$4.encode({Type:KeyType$2.RSA,Data:this.marshal()}).subarray()}encrypt(e){return encrypt$2(this._key,e)}equals(e){return equals(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}},RsaPrivateKey$1=class{constructor(e,t){me(this,"_key");me(this,"_publicKey");this._key=e,this._publicKey=t}genSecret(){return randomBytes$2(16)}async sign(e){return hashAndSign$4(this._key,e)}get public(){if(this._publicKey==null)throw new CodeError$1("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new RsaPublicKey$1(this._publicKey)}decrypt(e){return decrypt$3(this._key,e)}marshal(){return jwkToPkcs1$1(this._key)}get bytes(){return PrivateKey$4.encode({Type:KeyType$2.RSA,Data:this.marshal()}).subarray()}equals(e){return equals(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}async id(){const e=await this.public.hash();return toString$2(e,"base58btc")}async export(e,t="pkcs-8"){if(t==="pkcs-8"){const o=new forge$E.util.ByteBuffer(this.marshal()),c=forge$E.asn1.fromDer(o),l=forge$E.pki.privateKeyFromAsn1(c),h={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return forge$E.pki.encryptRsaPrivateKey(l,e,h)}else{if(t==="libp2p-key")return exporter$1(this.bytes,e);throw new CodeError$1(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function unmarshalRsaPrivateKey$1(n){const e=pkcs1ToJwk$1(n);if(keySize$1(e)>MAX_KEY_SIZE$1)throw new CodeError$1("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await unmarshalPrivateKey$3(e);return new RsaPrivateKey$1(t.privateKey,t.publicKey)}function unmarshalRsaPublicKey$1(n){const e=pkixToJwk$1(n);if(keySize$1(e)>MAX_KEY_SIZE$1)throw new CodeError$1("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new RsaPublicKey$1(e)}async function fromJwk$1(n){if(keySize$1(n)>MAX_KEY_SIZE$1)throw new CodeError$1("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await unmarshalPrivateKey$3(n);return new RsaPrivateKey$1(e.privateKey,e.publicKey)}async function generateKeyPair$5(n){if(n>MAX_KEY_SIZE$1)throw new CodeError$1("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await generateKey$4(n);return new RsaPrivateKey$1(e.privateKey,e.publicKey)}const RSA$1=Object.freeze(Object.defineProperty({__proto__:null,MAX_KEY_SIZE:MAX_KEY_SIZE$1,RsaPrivateKey:RsaPrivateKey$1,RsaPublicKey:RsaPublicKey$1,fromJwk:fromJwk$1,generateKeyPair:generateKeyPair$5,unmarshalRsaPrivateKey:unmarshalRsaPrivateKey$1,unmarshalRsaPublicKey:unmarshalRsaPublicKey$1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(n){const e=validateBasic(n);validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:o,a:c}=e;if(t){if(!o.eql(c,o.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=DER;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],o=n.subarray(2,t+2);if(!t||o.length!==t)throw new e("Invalid signature integer: wrong length");if(o[0]&128)throw new e("Invalid signature integer: negative");if(o[0]===0&&!(o[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:b2n(o),l:n.subarray(t+2)}},toSig(n){const{Err:e}=DER,t=typeof n=="string"?h2b(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let o=t.length;if(o<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==o-2)throw new e("Invalid signature: incorrect length");const{d:c,l}=DER._parseInt(t.subarray(2)),{d:h,l:d}=DER._parseInt(l);if(d.length)throw new e("Invalid signature: left bytes after parsing");return{r:c,s:h}},hexFromSig(n){const e=m=>Number.parseInt(m[0],16)&8?"00"+m:m,t=m=>{const v=m.toString(16);return v.length&1?`0${v}`:v},o=e(t(n.s)),c=e(t(n.r)),l=o.length/2,h=c.length/2,d=t(l),g=t(h);return`30${t(h+l+4)}02${g}${c}02${d}${o}`}},_0n=BigInt(0),_1n$1=BigInt(1);BigInt(2);const _3n=BigInt(3);BigInt(4);function weierstrassPoints(n){const e=validatePointOpts(n),{Fp:t}=e,o=e.toBytes||((u,y,b)=>{const w=y.toAffine();return concatBytes(Uint8Array.from([4]),t.toBytes(w.x),t.toBytes(w.y))}),c=e.fromBytes||(u=>{const y=u.subarray(1),b=t.fromBytes(y.subarray(0,t.BYTES)),w=t.fromBytes(y.subarray(t.BYTES,2*t.BYTES));return{x:b,y:w}});function l(u){const{a:y,b}=e,w=t.sqr(u),T=t.mul(w,u);return t.add(t.add(T,t.mul(u,y)),b)}if(!t.eql(t.sqr(e.Gy),l(e.Gx)))throw new Error("bad generator point: equation left != right");function h(u){return typeof u=="bigint"&&_0n<u&&u<e.n}function d(u){if(!h(u))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function g(u){const{allowedPrivateKeyLengths:y,nByteLength:b,wrapPrivateKey:w,n:T}=e;if(y&&typeof u!="bigint"){if(u instanceof Uint8Array&&(u=bytesToHex(u)),typeof u!="string"||!y.includes(u.length))throw new Error("Invalid key");u=u.padStart(b*2,"0")}let B;try{B=typeof u=="bigint"?u:bytesToNumberBE(ensureBytes("private key",u,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof u}`)}return w&&(B=mod(B,T)),d(B),B}const m=new Map;function v(u){if(!(u instanceof _))throw new Error("ProjectivePoint expected")}class _{constructor(y,b,w){if(this.px=y,this.py=b,this.pz=w,y==null||!t.isValid(y))throw new Error("x required");if(b==null||!t.isValid(b))throw new Error("y required");if(w==null||!t.isValid(w))throw new Error("z required")}static fromAffine(y){const{x:b,y:w}=y||{};if(!y||!t.isValid(b)||!t.isValid(w))throw new Error("invalid affine point");if(y instanceof _)throw new Error("projective point not allowed");const T=B=>t.eql(B,t.ZERO);return T(b)&&T(w)?_.ZERO:new _(b,w,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const b=t.invertBatch(y.map(w=>w.pz));return y.map((w,T)=>w.toAffine(b[T])).map(_.fromAffine)}static fromHex(y){const b=_.fromAffine(c(ensureBytes("pointHex",y)));return b.assertValidity(),b}static fromPrivateKey(y){return _.BASE.multiply(g(y))}_setWindowSize(y){this._WINDOW_SIZE=y,m.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:y,y:b}=this.toAffine();if(!t.isValid(y)||!t.isValid(b))throw new Error("bad point: x or y not FE");const w=t.sqr(b),T=l(y);if(!t.eql(w,T))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y}=this.toAffine();if(t.isOdd)return!t.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){v(y);const{px:b,py:w,pz:T}=this,{px:B,py:H,pz:J}=y,W=t.eql(t.mul(b,J),t.mul(B,T)),fe=t.eql(t.mul(w,J),t.mul(H,T));return W&&fe}negate(){return new _(this.px,t.neg(this.py),this.pz)}double(){const{a:y,b}=e,w=t.mul(b,_3n),{px:T,py:B,pz:H}=this;let J=t.ZERO,W=t.ZERO,fe=t.ZERO,re=t.mul(T,T),se=t.mul(B,B),ae=t.mul(H,H),ee=t.mul(T,B);return ee=t.add(ee,ee),fe=t.mul(T,H),fe=t.add(fe,fe),J=t.mul(y,fe),W=t.mul(w,ae),W=t.add(J,W),J=t.sub(se,W),W=t.add(se,W),W=t.mul(J,W),J=t.mul(ee,J),fe=t.mul(w,fe),ae=t.mul(y,ae),ee=t.sub(re,ae),ee=t.mul(y,ee),ee=t.add(ee,fe),fe=t.add(re,re),re=t.add(fe,re),re=t.add(re,ae),re=t.mul(re,ee),W=t.add(W,re),ae=t.mul(B,H),ae=t.add(ae,ae),re=t.mul(ae,ee),J=t.sub(J,re),fe=t.mul(ae,se),fe=t.add(fe,fe),fe=t.add(fe,fe),new _(J,W,fe)}add(y){v(y);const{px:b,py:w,pz:T}=this,{px:B,py:H,pz:J}=y;let W=t.ZERO,fe=t.ZERO,re=t.ZERO;const se=e.a,ae=t.mul(e.b,_3n);let ee=t.mul(b,B),P=t.mul(w,H),C=t.mul(T,J),E=t.add(b,w),k=t.add(B,H);E=t.mul(E,k),k=t.add(ee,P),E=t.sub(E,k),k=t.add(b,T);let F=t.add(B,J);return k=t.mul(k,F),F=t.add(ee,C),k=t.sub(k,F),F=t.add(w,T),W=t.add(H,J),F=t.mul(F,W),W=t.add(P,C),F=t.sub(F,W),re=t.mul(se,k),W=t.mul(ae,C),re=t.add(W,re),W=t.sub(P,re),re=t.add(P,re),fe=t.mul(W,re),P=t.add(ee,ee),P=t.add(P,ee),C=t.mul(se,C),k=t.mul(ae,k),P=t.add(P,C),C=t.sub(ee,C),C=t.mul(se,C),k=t.add(k,C),ee=t.mul(P,k),fe=t.add(fe,ee),ee=t.mul(F,k),W=t.mul(E,W),W=t.sub(W,ee),ee=t.mul(E,P),re=t.mul(F,re),re=t.add(re,ee),new _(W,fe,re)}subtract(y){return this.add(y.negate())}is0(){return this.equals(_.ZERO)}wNAF(y){return a.wNAFCached(this,m,y,b=>{const w=t.invertBatch(b.map(T=>T.pz));return b.map((T,B)=>T.toAffine(w[B])).map(_.fromAffine)})}multiplyUnsafe(y){const b=_.ZERO;if(y===_0n)return b;if(d(y),y===_1n$1)return this;const{endo:w}=e;if(!w)return a.unsafeLadder(this,y);let{k1neg:T,k1:B,k2neg:H,k2:J}=w.splitScalar(y),W=b,fe=b,re=this;for(;B>_0n||J>_0n;)B&_1n$1&&(W=W.add(re)),J&_1n$1&&(fe=fe.add(re)),re=re.double(),B>>=_1n$1,J>>=_1n$1;return T&&(W=W.negate()),H&&(fe=fe.negate()),fe=new _(t.mul(fe.px,w.beta),fe.py,fe.pz),W.add(fe)}multiply(y){d(y);let b=y,w,T;const{endo:B}=e;if(B){const{k1neg:H,k1:J,k2neg:W,k2:fe}=B.splitScalar(b);let{p:re,f:se}=this.wNAF(J),{p:ae,f:ee}=this.wNAF(fe);re=a.constTimeNegate(H,re),ae=a.constTimeNegate(W,ae),ae=new _(t.mul(ae.px,B.beta),ae.py,ae.pz),w=re.add(ae),T=se.add(ee)}else{const{p:H,f:J}=this.wNAF(b);w=H,T=J}return _.normalizeZ([w,T])[0]}multiplyAndAddUnsafe(y,b,w){const T=_.BASE,B=(J,W)=>W===_0n||W===_1n$1||!J.equals(T)?J.multiplyUnsafe(W):J.multiply(W),H=B(this,b).add(B(y,w));return H.is0()?void 0:H}toAffine(y){const{px:b,py:w,pz:T}=this,B=this.is0();y==null&&(y=B?t.ONE:t.inv(T));const H=t.mul(b,y),J=t.mul(w,y),W=t.mul(T,y);if(B)return{x:t.ZERO,y:t.ZERO};if(!t.eql(W,t.ONE))throw new Error("invZ was invalid");return{x:H,y:J}}isTorsionFree(){const{h:y,isTorsionFree:b}=e;if(y===_1n$1)return!0;if(b)return b(_,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:b}=e;return y===_1n$1?this:b?b(_,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return this.assertValidity(),o(_,this,y)}toHex(y=!0){return bytesToHex(this.toRawBytes(y))}}_.BASE=new _(e.Gx,e.Gy,t.ONE),_.ZERO=new _(t.ZERO,t.ONE,t.ZERO);const p=e.nBitLength,a=wNAF(_,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:_,normPrivateKeyToScalar:g,weierstrassEquation:l,isWithinCurveOrder:h}}function validateOpts(n){const e=validateBasic(n);return validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function weierstrass(n){const e=validateOpts(n),{Fp:t,n:o}=e,c=t.BYTES+1,l=2*t.BYTES+1;function h(k){return _0n<k&&k<t.ORDER}function d(k){return mod(k,o)}function g(k){return invert(k,o)}const{ProjectivePoint:m,normPrivateKeyToScalar:v,weierstrassEquation:_,isWithinCurveOrder:p}=weierstrassPoints({...e,toBytes(k,F,j){const Q=F.toAffine(),G=t.toBytes(Q.x),U=concatBytes;return j?U(Uint8Array.from([F.hasEvenY()?2:3]),G):U(Uint8Array.from([4]),G,t.toBytes(Q.y))},fromBytes(k){const F=k.length,j=k[0],Q=k.subarray(1);if(F===c&&(j===2||j===3)){const G=bytesToNumberBE(Q);if(!h(G))throw new Error("Point is not on curve");const U=_(G);let $=t.sqrt(U);const O=($&_1n$1)===_1n$1;return(j&1)===1!==O&&($=t.neg($)),{x:G,y:$}}else if(F===l&&j===4){const G=t.fromBytes(Q.subarray(0,t.BYTES)),U=t.fromBytes(Q.subarray(t.BYTES,2*t.BYTES));return{x:G,y:U}}else throw new Error(`Point of length ${F} was invalid. Expected ${c} compressed bytes or ${l} uncompressed bytes`)}}),a=k=>bytesToHex(numberToBytesBE(k,e.nByteLength));function u(k){const F=o>>_1n$1;return k>F}function y(k){return u(k)?d(-k):k}const b=(k,F,j)=>bytesToNumberBE(k.slice(F,j));class w{constructor(F,j,Q){this.r=F,this.s=j,this.recovery=Q,this.assertValidity()}static fromCompact(F){const j=e.nByteLength;return F=ensureBytes("compactSignature",F,j*2),new w(b(F,0,j),b(F,j,2*j))}static fromDER(F){const{r:j,s:Q}=DER.toSig(ensureBytes("DER",F));return new w(j,Q)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(F){return new w(this.r,this.s,F)}recoverPublicKey(F){const{r:j,s:Q,recovery:G}=this,U=fe(ensureBytes("msgHash",F));if(G==null||![0,1,2,3].includes(G))throw new Error("recovery id invalid");const $=G===2||G===3?j+e.n:j;if($>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const O=G&1?"03":"02",oe=m.fromHex(O+a($)),ue=g($),q=d(-U*ue),pe=d(Q*ue),be=m.BASE.multiplyAndAddUnsafe(oe,q,pe);if(!be)throw new Error("point at infinify");return be.assertValidity(),be}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,d(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return a(this.r)+a(this.s)}}const T={isValidPrivateKey(k){try{return v(k),!0}catch{return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{const k=getMinHashLength(e.n);return mapHashToField(e.randomBytes(k),e.n)},precompute(k=8,F=m.BASE){return F._setWindowSize(k),F.multiply(BigInt(3)),F}};function B(k,F=!0){return m.fromPrivateKey(k).toRawBytes(F)}function H(k){const F=k instanceof Uint8Array,j=typeof k=="string",Q=(F||j)&&k.length;return F?Q===c||Q===l:j?Q===2*c||Q===2*l:k instanceof m}function J(k,F,j=!0){if(H(k))throw new Error("first arg must be private key");if(!H(F))throw new Error("second arg must be public key");return m.fromHex(F).multiply(v(k)).toRawBytes(j)}const W=e.bits2int||function(k){const F=bytesToNumberBE(k),j=k.length*8-e.nBitLength;return j>0?F>>BigInt(j):F},fe=e.bits2int_modN||function(k){return d(W(k))},re=bitMask(e.nBitLength);function se(k){if(typeof k!="bigint")throw new Error("bigint expected");if(!(_0n<=k&&k<re))throw new Error(`bigint expected < 2^${e.nBitLength}`);return numberToBytesBE(k,e.nByteLength)}function ae(k,F,j=ee){if(["recovered","canonical"].some(we=>we in j))throw new Error("sign() legacy options not supported");const{hash:Q,randomBytes:G}=e;let{lowS:U,prehash:$,extraEntropy:O}=j;U==null&&(U=!0),k=ensureBytes("msgHash",k),$&&(k=ensureBytes("prehashed msgHash",Q(k)));const oe=fe(k),ue=v(F),q=[se(ue),se(oe)];if(O!=null){const we=O===!0?G(t.BYTES):O;q.push(ensureBytes("extraEntropy",we))}const pe=concatBytes(...q),be=oe;function ve(we){const Ce=W(we);if(!p(Ce))return;const Re=g(Ce),Se=m.BASE.multiply(Ce).toAffine(),$e=d(Se.x);if($e===_0n)return;const De=d(Re*d(be+$e*ue));if(De===_0n)return;let Ne=(Se.x===$e?0:2)|Number(Se.y&_1n$1),pt=De;return U&&u(De)&&(pt=y(De),Ne^=1),new w($e,pt,Ne)}return{seed:pe,k2sig:ve}}const ee={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function C(k,F,j=ee){const{seed:Q,k2sig:G}=ae(k,F,j),U=e;return createHmacDrbg(U.hash.outputLen,U.nByteLength,U.hmac)(Q,G)}m.BASE._setWindowSize(8);function E(k,F,j,Q=P){const G=k;if(F=ensureBytes("msgHash",F),j=ensureBytes("publicKey",j),"strict"in Q)throw new Error("options.strict was renamed to lowS");const{lowS:U,prehash:$}=Q;let O,oe;try{if(typeof G=="string"||G instanceof Uint8Array)try{O=w.fromDER(G)}catch(Se){if(!(Se instanceof DER.Err))throw Se;O=w.fromCompact(G)}else if(typeof G=="object"&&typeof G.r=="bigint"&&typeof G.s=="bigint"){const{r:Se,s:$e}=G;O=new w(Se,$e)}else throw new Error("PARSE");oe=m.fromHex(j)}catch(Se){if(Se.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(U&&O.hasHighS())return!1;$&&(F=e.hash(F));const{r:ue,s:q}=O,pe=fe(F),be=g(q),ve=d(pe*be),we=d(ue*be),Ce=m.BASE.multiplyAndAddUnsafe(oe,ve,we)?.toAffine();return Ce?d(Ce.x)===ue:!1}return{CURVE:e,getPublicKey:B,getSharedSecret:J,sign:C,verify:E,ProjectivePoint:m,Signature:w,utils:T}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(n){return{hash:n,hmac:(e,...t)=>hmac$3(n,e,concatBytes$1(...t)),randomBytes:randomBytes$3}}function createCurve(n,e){const t=o=>weierstrass({...n,...getHash(o)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n=BigInt(1),_2n=BigInt(2),divNearest=(n,e)=>(n+e/_2n)/e;function sqrtMod(n){const e=secp256k1P,t=BigInt(3),o=BigInt(6),c=BigInt(11),l=BigInt(22),h=BigInt(23),d=BigInt(44),g=BigInt(88),m=n*n*n%e,v=m*m*n%e,_=pow2(v,t,e)*v%e,p=pow2(_,t,e)*v%e,a=pow2(p,_2n,e)*m%e,u=pow2(a,c,e)*a%e,y=pow2(u,l,e)*u%e,b=pow2(y,d,e)*y%e,w=pow2(b,g,e)*b%e,T=pow2(w,d,e)*y%e,B=pow2(T,t,e)*v%e,H=pow2(B,h,e)*u%e,J=pow2(H,o,e)*m%e,W=pow2(J,_2n,e);if(!Fp.eql(Fp.sqr(W),n))throw new Error("Cannot find square root");return W}const Fp=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1$3=createCurve({a:BigInt(0),b:BigInt(7),Fp,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=secp256k1N,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),c=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),l=t,h=BigInt("0x100000000000000000000000000000000"),d=divNearest(l*n,e),g=divNearest(-o*n,e);let m=mod(n-d*t-g*c,e),v=mod(-d*o-g*l,e);const _=m>h,p=v>h;if(_&&(m=e-m),p&&(v=e-v),m>h||v>h)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:_,k1:m,k2neg:p,k2:v}}}},sha256$3);BigInt(0);secp256k1$3.ProjectivePoint;function generateKey$3(){return secp256k1$3.utils.randomPrivateKey()}async function hashAndSign$3(n,e){const{digest:t}=await sha256$4.digest(e);try{return secp256k1$3.sign(t,n).toDERRawBytes()}catch(o){throw new CodeError$1(String(o),"ERR_INVALID_INPUT")}}async function hashAndVerify$3(n,e,t){try{const{digest:o}=await sha256$4.digest(t);return secp256k1$3.verify(e,o,n)}catch(o){throw new CodeError$1(String(o),"ERR_INVALID_INPUT")}}function compressPublicKey$1(n){return secp256k1$3.ProjectivePoint.fromHex(n).toRawBytes(!0)}function validatePrivateKey$1(n){try{secp256k1$3.getPublicKey(n,!0)}catch(e){throw new CodeError$1(String(e),"ERR_INVALID_PRIVATE_KEY")}}function validatePublicKey$1(n){try{secp256k1$3.ProjectivePoint.fromHex(n)}catch(e){throw new CodeError$1(String(e),"ERR_INVALID_PUBLIC_KEY")}}function computePublicKey$2(n){try{return secp256k1$3.getPublicKey(n,!0)}catch(e){throw new CodeError$1(String(e),"ERR_INVALID_PRIVATE_KEY")}}let Secp256k1PublicKey$1=class{constructor(e){me(this,"_key");validatePublicKey$1(e),this._key=e}async verify(e,t){return hashAndVerify$3(this._key,t,e)}marshal(){return compressPublicKey$1(this._key)}get bytes(){return PublicKey$4.encode({Type:KeyType$2.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return equals(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}},Secp256k1PrivateKey$1=class{constructor(e,t){me(this,"_key");me(this,"_publicKey");this._key=e,this._publicKey=t??computePublicKey$2(e),validatePrivateKey$1(this._key),validatePublicKey$1(this._publicKey)}async sign(e){return hashAndSign$3(this._key,e)}get public(){return new Secp256k1PublicKey$1(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey$4.encode({Type:KeyType$2.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return equals(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}async id(){const e=await this.public.hash();return toString$2(e,"base58btc")}async export(e,t="libp2p-key"){if(t==="libp2p-key")return exporter$1(this.bytes,e);throw new CodeError$1(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function unmarshalSecp256k1PrivateKey$1(n){return new Secp256k1PrivateKey$1(n)}function unmarshalSecp256k1PublicKey$1(n){return new Secp256k1PublicKey$1(n)}async function generateKeyPair$4(){const n=generateKey$3();return new Secp256k1PrivateKey$1(n)}const Secp256k1$1=Object.freeze(Object.defineProperty({__proto__:null,Secp256k1PrivateKey:Secp256k1PrivateKey$1,Secp256k1PublicKey:Secp256k1PublicKey$1,generateKeyPair:generateKeyPair$4,unmarshalSecp256k1PrivateKey:unmarshalSecp256k1PrivateKey$1,unmarshalSecp256k1PublicKey:unmarshalSecp256k1PublicKey$1},Symbol.toStringTag,{value:"Module"})),supportedKeys$1={rsa:RSA$1,ed25519:Ed25519$1,secp256k1:Secp256k1$1};function unsupportedKey$1(n){const e=Object.keys(supportedKeys$1).join(" / ");return new CodeError$1(`invalid or unsupported key type ${n}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function typeToKey$1(n){if(n=n.toLowerCase(),n==="rsa"||n==="ed25519"||n==="secp256k1")return supportedKeys$1[n];throw unsupportedKey$1(n)}async function generateKeyPair$3(n,e){return typeToKey$1(n).generateKeyPair(e??2048)}function unmarshalPublicKey$1(n){const e=PublicKey$4.decode(n),t=e.Data??new Uint8Array;switch(e.Type){case KeyType$2.RSA:return supportedKeys$1.rsa.unmarshalRsaPublicKey(t);case KeyType$2.Ed25519:return supportedKeys$1.ed25519.unmarshalEd25519PublicKey(t);case KeyType$2.Secp256k1:return supportedKeys$1.secp256k1.unmarshalSecp256k1PublicKey(t);default:throw unsupportedKey$1(e.Type??"RSA")}}function marshalPublicKey$1(n,e){return e=(e??"rsa").toLowerCase(),typeToKey$1(e),n.bytes}async function unmarshalPrivateKey$2(n){const e=PrivateKey$4.decode(n),t=e.Data??new Uint8Array;switch(e.Type){case KeyType$2.RSA:return supportedKeys$1.rsa.unmarshalRsaPrivateKey(t);case KeyType$2.Ed25519:return supportedKeys$1.ed25519.unmarshalEd25519PrivateKey(t);case KeyType$2.Secp256k1:return supportedKeys$1.secp256k1.unmarshalSecp256k1PrivateKey(t);default:throw unsupportedKey$1(e.Type??"RSA")}}function marshalPrivateKey(n,e){return e=(e??"rsa").toLowerCase(),typeToKey$1(e),n.bytes}async function importKey(n,e){try{const c=await importer(n,e);return await unmarshalPrivateKey$2(c)}catch{}const t=forge$E.pki.decryptRsaPrivateKey(n,e);if(t===null)throw new CodeError$1("Cannot read the key, most likely the password is wrong or not a RSA key","ERR_CANNOT_DECRYPT_PEM");let o=forge$E.asn1.toDer(forge$E.pki.privateKeyToAsn1(t));return o=fromString$2(o.getBytes(),"ascii"),supportedKeys$1.rsa.unmarshalRsaPrivateKey(o)}const symbol$2=Symbol.for("@libp2p/peer-id");function isPeerId(n){return n!=null&&!!n[symbol$2]}const inspect$1=Symbol.for("nodejs.util.inspect.custom"),baseDecoder$1=Object.values(bases).map(n=>n.decoder).reduce((n,e)=>n.or(e),bases.identity.decoder),LIBP2P_KEY_CODE$1=114,MARSHALLED_ED225519_PUBLIC_KEY_LENGTH$1=36,MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH$1=37;var Ur;let PeerIdImpl$1=class{constructor(e){me(this,"type");me(this,"multihash");me(this,"privateKey");me(this,"publicKey");me(this,"string");me(this,Ur,!0);this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=base58btc.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return CID.createV1(LIBP2P_KEY_CODE$1,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return equals(this.multihash.bytes,e);if(typeof e=="string")return peerIdFromString$1(e).equals(this);if(e?.multihash?.bytes!=null)return equals(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[(Ur=symbol$2,inspect$1)](){return`PeerId(${this.toString()})`}},RSAPeerIdImpl$1=class extends PeerIdImpl$1{constructor(t){super({...t,type:"RSA"});me(this,"type","RSA");me(this,"publicKey");this.publicKey=t.publicKey}},Ed25519PeerIdImpl$1=class extends PeerIdImpl$1{constructor(t){super({...t,type:"Ed25519"});me(this,"type","Ed25519");me(this,"publicKey");this.publicKey=t.multihash.digest}},Secp256k1PeerIdImpl$1=class extends PeerIdImpl$1{constructor(t){super({...t,type:"secp256k1"});me(this,"type","secp256k1");me(this,"publicKey");this.publicKey=t.multihash.digest}};function peerIdFromPeerId(n){if(n.type==="RSA")return new RSAPeerIdImpl$1(n);if(n.type==="Ed25519")return new Ed25519PeerIdImpl$1(n);if(n.type==="secp256k1")return new Secp256k1PeerIdImpl$1(n);throw new CodeError$1("Not a PeerId","ERR_INVALID_PARAMETERS")}function peerIdFromString$1(n,e){if(n.charAt(0)==="1"||n.charAt(0)==="Q"){const t=decode$c(base58btc.decode(`z${n}`));return n.startsWith("12D")?new Ed25519PeerIdImpl$1({multihash:t}):n.startsWith("16U")?new Secp256k1PeerIdImpl$1({multihash:t}):new RSAPeerIdImpl$1({multihash:t})}return peerIdFromBytes$1(baseDecoder$1.decode(n))}function peerIdFromBytes$1(n){try{const e=decode$c(n);if(e.code===identity.code){if(e.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH$1)return new Ed25519PeerIdImpl$1({multihash:e});if(e.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH$1)return new Secp256k1PeerIdImpl$1({multihash:e})}if(e.code===sha256$4.code)return new RSAPeerIdImpl$1({multihash:e})}catch{return peerIdFromCID$1(CID.decode(n))}throw new Error("Supplied PeerID CID is invalid")}function peerIdFromCID$1(n){if(n==null||n.multihash==null||n.version==null||n.version===1&&n.code!==LIBP2P_KEY_CODE$1)throw new Error("Supplied PeerID CID is invalid");const e=n.multihash;if(e.code===sha256$4.code)return new RSAPeerIdImpl$1({multihash:n.multihash});if(e.code===identity.code){if(e.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH$1)return new Ed25519PeerIdImpl$1({multihash:n.multihash});if(e.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH$1)return new Secp256k1PeerIdImpl$1({multihash:n.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function peerIdFromKeys(n,e){return n.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH$1?new Ed25519PeerIdImpl$1({multihash:create$4(identity.code,n),privateKey:e}):n.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH$1?new Secp256k1PeerIdImpl$1({multihash:create$4(identity.code,n),privateKey:e}):new RSAPeerIdImpl$1({multihash:await sha256$4.digest(n),publicKey:n,privateKey:e})}var NoiseExtensions;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{if(c.lengthDelimited!==!1&&o.fork(),t.webtransportCerthashes!=null)for(const l of t.webtransportCerthashes)o.uint32(10),o.bytes(l);c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={webtransportCerthashes:[]},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.webtransportCerthashes.push(t.bytes());break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(NoiseExtensions||(NoiseExtensions={}));var NoiseHandshakePayload;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),(c.writeDefaults===!0||t.identityKey!=null&&t.identityKey.byteLength>0)&&(o.uint32(10),o.bytes(t.identityKey??new Uint8Array(0))),(c.writeDefaults===!0||t.identitySig!=null&&t.identitySig.byteLength>0)&&(o.uint32(18),o.bytes(t.identitySig??new Uint8Array(0))),t.extensions!=null&&(o.uint32(34),NoiseExtensions.codec().encode(t.extensions,o,{writeDefaults:!1})),c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={identityKey:new Uint8Array(0),identitySig:new Uint8Array(0)},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.identityKey=t.bytes();break;case 2:c.identitySig=t.bytes();break;case 4:c.extensions=NoiseExtensions.codec().decode(t,t.uint32());break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(NoiseHandshakePayload||(NoiseHandshakePayload={}));async function getPayload(n,e,t){const o=await signPayload(n,getHandshakePayload(e));if(n.publicKey==null)throw new Error("PublicKey was missing from local PeerId");return createHandshakePayload(n.publicKey,o,t)}function createHandshakePayload(n,e,t){return NoiseHandshakePayload.encode({identityKey:n,identitySig:e,extensions:t??{webtransportCerthashes:[]}}).subarray()}async function signPayload(n,e){if(n.privateKey==null)throw new Error("PrivateKey was missing from PeerId");return(await unmarshalPrivateKey$2(n.privateKey)).sign(e)}async function getPeerIdFromPayload(n){return peerIdFromKeys(n.identityKey)}function decodePayload(n){return NoiseHandshakePayload.decode(n)}function getHandshakePayload(n){const e=fromString$2("noise-libp2p-static-key:");return concat$2([e,n],e.length+n.length)}async function verifySignedPayload(n,e,t){const o=await peerIdFromKeys(e.identityKey);if(!o.equals(t))throw new Error(`Payload identity key ${o.toString()} does not match expected remote peer ${t.toString()}`);const c=getHandshakePayload(n);if(o.publicKey==null)throw new Error("PublicKey was missing from PeerId");if(e.identitySig==null)throw new Error("Signature was missing from message");if(!await unmarshalPublicKey$1(o.publicKey).verify(c,e.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return o}function isValidPublicKey(n){return!(!(n instanceof Uint8Array)||n.length!==32)}var browser$2={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var n=1e3,e=n*60,t=e*60,o=t*24,c=o*7,l=o*365.25;ms=function(v,_){_=_||{};var p=typeof v;if(p==="string"&&v.length>0)return h(v);if(p==="number"&&isFinite(v))return _.long?g(v):d(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function h(v){if(v=String(v),!(v.length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(v);if(_){var p=parseFloat(_[1]),a=(_[2]||"ms").toLowerCase();switch(a){case"years":case"year":case"yrs":case"yr":case"y":return p*l;case"weeks":case"week":case"w":return p*c;case"days":case"day":case"d":return p*o;case"hours":case"hour":case"hrs":case"hr":case"h":return p*t;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function d(v){var _=Math.abs(v);return _>=o?Math.round(v/o)+"d":_>=t?Math.round(v/t)+"h":_>=e?Math.round(v/e)+"m":_>=n?Math.round(v/n)+"s":v+"ms"}function g(v){var _=Math.abs(v);return _>=o?m(v,_,o,"day"):_>=t?m(v,_,t,"hour"):_>=e?m(v,_,e,"minute"):_>=n?m(v,_,n,"second"):v+" ms"}function m(v,_,p,a){var u=_>=p*1.5;return Math.round(v/p)+" "+a+(u?"s":"")}return ms}function setup(n){t.debug=t,t.default=t,t.coerce=g,t.disable=l,t.enable=c,t.enabled=h,t.humanize=requireMs(),t.destroy=m,Object.keys(n).forEach(v=>{t[v]=n[v]}),t.names=[],t.skips=[],t.formatters={};function e(v){let _=0;for(let p=0;p<v.length;p++)_=(_<<5)-_+v.charCodeAt(p),_|=0;return t.colors[Math.abs(_)%t.colors.length]}t.selectColor=e;function t(v){let _,p=null,a,u;function y(...b){if(!y.enabled)return;const w=y,T=Number(new Date),B=T-(_||T);w.diff=B,w.prev=_,w.curr=T,_=T,b[0]=t.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let H=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(W,fe)=>{if(W==="%%")return"%";H++;const re=t.formatters[fe];if(typeof re=="function"){const se=b[H];W=re.call(w,se),b.splice(H,1),H--}return W}),t.formatArgs.call(w,b),(w.log||t.log).apply(w,b)}return y.namespace=v,y.useColors=t.useColors(),y.color=t.selectColor(v),y.extend=o,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(a!==t.namespaces&&(a=t.namespaces,u=t.enabled(v)),u),set:b=>{p=b}}),typeof t.init=="function"&&t.init(y),y}function o(v,_){const p=t(this.namespace+(typeof _>"u"?":":_)+v);return p.log=this.log,p}function c(v){t.save(v),t.namespaces=v,t.names=[],t.skips=[];let _;const p=(typeof v=="string"?v:"").split(/[\s,]+/),a=p.length;for(_=0;_<a;_++)p[_]&&(v=p[_].replace(/\*/g,".*?"),v[0]==="-"?t.skips.push(new RegExp("^"+v.slice(1)+"$")):t.names.push(new RegExp("^"+v+"$")))}function l(){const v=[...t.names.map(d),...t.skips.map(d).map(_=>"-"+_)].join(",");return t.enable(""),v}function h(v){if(v[v.length-1]==="*")return!0;let _,p;for(_=0,p=t.skips.length;_<p;_++)if(t.skips[_].test(v))return!1;for(_=0,p=t.names.length;_<p;_++)if(t.names[_].test(v))return!0;return!1}function d(v){return v.toString().substring(2,v.toString().length-2).replace(/\.\*\?$/,"*")}function g(v){return v instanceof Error?v.stack||v.message:v}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var common$6=setup;(function(n,e){e.formatArgs=o,e.save=c,e.load=l,e.useColors=t,e.storage=h(),e.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;g.splice(1,0,m,"color: inherit");let v=0,_=0;g[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(v++,p==="%c"&&(_=v))}),g.splice(_,0,m)}e.log=console.debug||console.log||(()=>{});function c(g){try{g?e.storage.setItem("debug",g):e.storage.removeItem("debug")}catch{}}function l(){let g;try{g=e.storage.getItem("debug")}catch{}return!g&&typeof process<"u"&&"env"in process&&(g={}.DEBUG),g}function h(){try{return localStorage}catch{}}n.exports=common$6(e);const{formatters:d}=n.exports;d.j=function(g){try{return JSON.stringify(g)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}})(browser$2,browser$2.exports);var browserExports=browser$2.exports;const debug=getDefaultExportFromCjs(browserExports);debug.formatters.b=n=>n==null?"undefined":base58btc.baseEncode(n);debug.formatters.t=n=>n==null?"undefined":base32.baseEncode(n);debug.formatters.m=n=>n==null?"undefined":base64$2.baseEncode(n);debug.formatters.p=n=>n==null?"undefined":n.toString();debug.formatters.c=n=>n==null?"undefined":n.toString();debug.formatters.k=n=>n==null?"undefined":n.toString();debug.formatters.a=n=>n==null?"undefined":n.toString();function createDisabledLogger(n){const e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=n,e.destroy=()=>!0,e.extend=()=>e,e}function logger$v(n){let e=createDisabledLogger(`${n}:trace`);return debug.enabled(`${n}:trace`)&&debug.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(e=debug(`${n}:trace`)),Object.assign(debug(n),{error:debug(`${n}:error`),trace:e})}const log$n=logger$v("libp2p:noise");let keyLogger;DUMP_SESSION_KEYS?keyLogger=log$n:keyLogger=Object.assign(()=>{},{enabled:!1,trace:()=>{},error:()=>{}});function logLocalStaticKeys(n){keyLogger(`LOCAL_STATIC_PUBLIC_KEY ${toString$2(n.publicKey,"hex")}`),keyLogger(`LOCAL_STATIC_PRIVATE_KEY ${toString$2(n.privateKey,"hex")}`)}function logLocalEphemeralKeys(n){n?(keyLogger(`LOCAL_PUBLIC_EPHEMERAL_KEY ${toString$2(n.publicKey,"hex")}`),keyLogger(`LOCAL_PRIVATE_EPHEMERAL_KEY ${toString$2(n.privateKey,"hex")}`)):keyLogger("Missing local ephemeral keys.")}function logRemoteStaticKey(n){keyLogger(`REMOTE_STATIC_PUBLIC_KEY ${toString$2(n,"hex")}`)}function logRemoteEphemeralKey(n){keyLogger(`REMOTE_EPHEMERAL_PUBLIC_KEY ${toString$2(n,"hex")}`)}function logCipherState(n){n.cs1&&n.cs2?(keyLogger(`CIPHER_STATE_1 ${n.cs1.n.getUint64()} ${toString$2(n.cs1.k,"hex")}`),keyLogger(`CIPHER_STATE_2 ${n.cs2.n.getUint64()} ${toString$2(n.cs2.k,"hex")}`)):keyLogger("Missing cipher state.")}const MIN_NONCE=0,MAX_NONCE=4294967295,ERR_MAX_NONCE="Cipherstate has reached maximum n, a new handshake must be performed";class Nonce{constructor(e=MIN_NONCE){me(this,"n");me(this,"bytes");me(this,"view");this.n=e,this.bytes=new Uint8Array(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>MAX_NONCE)throw new Error(ERR_MAX_NONCE)}}class AbstractHandshake{constructor(e){me(this,"crypto");this.crypto=e}encryptWithAd(e,t,o){const c=this.encrypt(e.k,e.n,t,o);return e.n.increment(),c}decryptWithAd(e,t,o,c){const{plaintext:l,valid:h}=this.decrypt(e.k,e.n,t,o,c);return h&&e.n.increment(),{plaintext:l,valid:h}}hasKey(e){return!this.isEmptyKey(e.k)}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(e){const t=this.createEmptyKey();return equals(t,e)}encrypt(e,t,o,c){return t.assertValue(),this.crypto.chaCha20Poly1305Encrypt(c,t.getBytes(),o,e)}encryptAndHash(e,t){let o;return this.hasKey(e.cs)?o=this.encryptWithAd(e.cs,e.h,t):o=t,this.mixHash(e,o),o}decrypt(e,t,o,c,l){t.assertValue();const h=this.crypto.chaCha20Poly1305Decrypt(c,t.getBytes(),o,e,l);return h?{plaintext:h,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(e,t){let o,c=!0;return this.hasKey(e.cs)?{plaintext:o,valid:c}=this.decryptWithAd(e.cs,e.h,t):o=t,this.mixHash(e,t),{plaintext:o,valid:c}}dh(e,t){try{const o=this.crypto.generateX25519SharedKey(e,t);return o.length===32?o:o.subarray(0,32)}catch(o){const c=o;return log$n.error(c),new Uint8Array(32)}}mixHash(e,t){e.h=this.getHash(e.h,t)}getHash(e,t){return this.crypto.hashSHA256(concat$2([e,t],e.length+t.length))}mixKey(e,t){const[o,c]=this.crypto.getHKDF(e.ck,t);e.cs=this.initializeKey(c),e.ck=o}initializeKey(e){return{k:e,n:new Nonce}}initializeSymmetric(e){const t=fromString$2(e,"utf-8"),o=this.hashProtocolName(t),c=o,l=this.createEmptyKey();return{cs:this.initializeKey(l),ck:c,h:o}}hashProtocolName(e){if(e.length<=32){const t=new Uint8Array(32);return t.set(e),t}else return this.getHash(e,new Uint8Array(0))}split(e){const[t,o]=this.crypto.getHKDF(e.ck,new Uint8Array(0)),c=this.initializeKey(t),l=this.initializeKey(o);return{cs1:c,cs2:l}}writeMessageRegular(e,t){const o=this.encryptWithAd(e,new Uint8Array(0),t),c=this.createEmptyKey(),l=new Uint8Array(0);return{ne:c,ns:l,ciphertext:o}}readMessageRegular(e,t){return this.decryptWithAd(e,new Uint8Array(0),t.ciphertext)}}class XX extends AbstractHandshake{initializeInitiator(e,t,o,c){const l="Noise_XX_25519_ChaChaPoly_SHA256",h=this.initializeSymmetric(l);this.mixHash(h,e);const d=new Uint8Array(32);return{ss:h,s:t,rs:o,psk:c,re:d}}initializeResponder(e,t,o,c){const l="Noise_XX_25519_ChaChaPoly_SHA256",h=this.initializeSymmetric(l);this.mixHash(h,e);const d=new Uint8Array(32);return{ss:h,s:t,rs:o,psk:c,re:d}}writeMessageA(e,t,o){const c=new Uint8Array(0);o!==void 0?e.e=o:e.e=this.crypto.generateX25519KeyPair();const l=e.e.publicKey;this.mixHash(e.ss,l);const h=this.encryptAndHash(e.ss,t);return{ne:l,ns:c,ciphertext:h}}writeMessageB(e,t){e.e=this.crypto.generateX25519KeyPair();const o=e.e.publicKey;this.mixHash(e.ss,o),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const c=e.s.publicKey,l=this.encryptAndHash(e.ss,c);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));const h=this.encryptAndHash(e.ss,t);return{ne:o,ns:l,ciphertext:h}}writeMessageC(e,t){const o=e.s.publicKey,c=this.encryptAndHash(e.ss,o);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));const l=this.encryptAndHash(e.ss,t),d={ne:this.createEmptyKey(),ns:c,ciphertext:l},{cs1:g,cs2:m}=this.split(e.ss);return{h:e.ss.h,messageBuffer:d,cs1:g,cs2:m}}readMessageA(e,t){return isValidPublicKey(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,t.ciphertext)}readMessageB(e,t){if(isValidPublicKey(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const{plaintext:o,valid:c}=this.decryptAndHash(e.ss,t.ns);c&&isValidPublicKey(o)&&(e.rs=o),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:l,valid:h}=this.decryptAndHash(e.ss,t.ciphertext);return{plaintext:l,valid:c&&h}}readMessageC(e,t){const{plaintext:o,valid:c}=this.decryptAndHash(e.ss,t.ns);if(c&&isValidPublicKey(o)&&(e.rs=o),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:l,valid:h}=this.decryptAndHash(e.ss,t.ciphertext),{cs1:d,cs2:g}=this.split(e.ss);return{h:e.ss.h,plaintext:l,valid:c&&h,cs1:d,cs2:g}}initSession(e,t,o){const c=this.createEmptyKey(),l=new Uint8Array(32);let h;return e?h=this.initializeInitiator(t,o,l,c):h=this.initializeResponder(t,o,l,c),{hs:h,i:e,mc:0}}sendMessage(e,t,o){let c;if(e.mc===0)c=this.writeMessageA(e.hs,t,o);else if(e.mc===1)c=this.writeMessageB(e.hs,t);else if(e.mc===2){const{h:l,messageBuffer:h,cs1:d,cs2:g}=this.writeMessageC(e.hs,t);c=h,e.h=l,e.cs1=d,e.cs2=g}else if(e.mc>2)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");c=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");c=this.writeMessageRegular(e.cs2,t)}else throw new Error("Session invalid.");return e.mc++,c}recvMessage(e,t){let o=new Uint8Array(0),c=!1;if(e.mc===0)({plaintext:o,valid:c}=this.readMessageA(e.hs,t));else if(e.mc===1)({plaintext:o,valid:c}=this.readMessageB(e.hs,t));else if(e.mc===2){const{h:l,plaintext:h,valid:d,cs1:g,cs2:m}=this.readMessageC(e.hs,t);o=h,c=d,e.h=l,e.cs1=g,e.cs2=m}return e.mc++,{plaintext:o,valid:c}}}class XXHandshake{constructor(e,t,o,c,l,h,d,g){me(this,"isInitiator");me(this,"session");me(this,"remotePeer");me(this,"remoteExtensions",{webtransportCerthashes:[]});me(this,"payload");me(this,"connection");me(this,"xx");me(this,"staticKeypair");me(this,"prologue");this.isInitiator=e,this.payload=t,this.prologue=o,this.staticKeypair=l,this.connection=h,d&&(this.remotePeer=d),this.xx=g??new XX(c),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair)}async propose(){if(logLocalStaticKeys(this.session.hs.s),this.isInitiator){log$n.trace("Stage 0 - Initiator starting to send first message.");const e=this.xx.sendMessage(this.session,new Uint8Array(0));await this.connection.write(encode0(e)),log$n.trace("Stage 0 - Initiator finished sending first message."),logLocalEphemeralKeys(this.session.hs.e)}else{log$n.trace("Stage 0 - Responder waiting to receive first message...");const e=decode0((await this.connection.read()).subarray()),{valid:t}=this.xx.recvMessage(this.session,e);if(!t)throw new InvalidCryptoExchangeError("xx handshake stage 0 validation fail");log$n.trace("Stage 0 - Responder received first message."),logRemoteEphemeralKey(this.session.hs.re)}}async exchange(){if(this.isInitiator){log$n.trace("Stage 1 - Initiator waiting to receive first message from responder...");const e=decode1((await this.connection.read()).subarray()),{plaintext:t,valid:o}=this.xx.recvMessage(this.session,e);if(!o)throw new InvalidCryptoExchangeError("xx handshake stage 1 validation fail");log$n.trace("Stage 1 - Initiator received the message."),logRemoteEphemeralKey(this.session.hs.re),logRemoteStaticKey(this.session.hs.rs),log$n.trace("Initiator going to check remote's signature...");try{const c=decodePayload(t);this.remotePeer=this.remotePeer||await getPeerIdFromPayload(c),await verifySignedPayload(this.session.hs.rs,c,this.remotePeer),this.setRemoteNoiseExtension(c.extensions)}catch(c){const l=c;throw new UnexpectedPeerError(`Error occurred while verifying signed payload: ${l.message}`)}log$n.trace("All good with the signature!")}else{log$n.trace("Stage 1 - Responder sending out first message with signed payload and static key.");const e=this.xx.sendMessage(this.session,this.payload);await this.connection.write(encode1(e)),log$n.trace("Stage 1 - Responder sent the second handshake message with signed payload."),logLocalEphemeralKeys(this.session.hs.e)}}async finish(){if(this.isInitiator){log$n.trace("Stage 2 - Initiator sending third handshake message.");const e=this.xx.sendMessage(this.session,this.payload);await this.connection.write(encode2(e)),log$n.trace("Stage 2 - Initiator sent message with signed payload.")}else{log$n.trace("Stage 2 - Responder waiting for third handshake message...");const e=decode2((await this.connection.read()).subarray()),{plaintext:t,valid:o}=this.xx.recvMessage(this.session,e);if(!o)throw new InvalidCryptoExchangeError("xx handshake stage 2 validation fail");log$n.trace("Stage 2 - Responder received the message, finished handshake.");try{const c=decodePayload(t);this.remotePeer=this.remotePeer||await getPeerIdFromPayload(c),await verifySignedPayload(this.session.hs.rs,c,this.remotePeer),this.setRemoteNoiseExtension(c.extensions)}catch(c){const l=c;throw new UnexpectedPeerError(`Error occurred while verifying signed payload: ${l.message}`)}}logCipherState(this.session)}encrypt(e,t){const o=this.getCS(t);return this.xx.encryptWithAd(o,new Uint8Array(0),e)}decrypt(e,t,o){const c=this.getCS(t,!1);return this.xx.decryptWithAd(c,new Uint8Array(0),e,o)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,t=!0){if(!e.cs1||!e.cs2)throw new InvalidCryptoExchangeError("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}setRemoteNoiseExtension(e){e&&(this.remoteExtensions=e)}}function registerMetrics(n){return{xxHandshakeSuccesses:n.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:n.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:n.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:n.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:n.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}class Noise{constructor(e={}){me(this,"protocol","/noise");me(this,"crypto");me(this,"prologue");me(this,"staticKeys");me(this,"extensions");me(this,"metrics");const{staticNoiseKey:t,extensions:o,crypto:c,prologueBytes:l,metrics:h}=e;this.crypto=c??pureJsCrypto,this.extensions=o,this.metrics=h?registerMetrics(h):void 0,t?this.staticKeys=this.crypto.generateX25519KeyPairFromSeed(t):this.staticKeys=this.crypto.generateX25519KeyPair(),this.prologue=l??new Uint8Array(0)}async secureOutbound(e,t,o){const c=lpStream(t,{lengthEncoder:uint16BEEncode,lengthDecoder:uint16BEDecode,maxDataLength:NOISE_MSG_MAX_LENGTH_BYTES}),l=await this.performHandshake({connection:c,isInitiator:!0,localPeer:e,remotePeer:o});return{conn:await this.createSecureConnection(c,l),remoteExtensions:l.remoteExtensions,remotePeer:l.remotePeer}}async secureInbound(e,t,o){const c=lpStream(t,{lengthEncoder:uint16BEEncode,lengthDecoder:uint16BEDecode,maxDataLength:NOISE_MSG_MAX_LENGTH_BYTES}),l=await this.performHandshake({connection:c,isInitiator:!1,localPeer:e,remotePeer:o});return{conn:await this.createSecureConnection(c,l),remotePeer:l.remotePeer,remoteExtensions:l.remoteExtensions}}async performHandshake(e){const t=await getPayload(e.localPeer,this.staticKeys.publicKey,this.extensions);return this.performXXHandshake(e,t)}async performXXHandshake(e,t){const{isInitiator:o,remotePeer:c,connection:l}=e,h=new XXHandshake(o,t,this.prologue,this.crypto,this.staticKeys,l,c);try{await h.propose(),await h.exchange(),await h.finish(),this.metrics?.xxHandshakeSuccesses.increment()}catch(d){if(this.metrics?.xxHandshakeErrors.increment(),d instanceof Error)throw d.message=`Error occurred during XX handshake: ${d.message}`,d}return h}async createSecureConnection(e,t){const[o,c]=duplexPair(),l=e.unwrap();return await pipe(o,encryptStream(t,this.metrics),l,h=>decode$9(h,{lengthDecoder:uint16BEDecode}),decryptStream(t,this.metrics),o),c}}function noise(n={}){return()=>new Noise(n)}var events$1={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function n(e,t,o){return Function.prototype.apply.call(e,t,o)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(n){console&&console.warn&&console.warn(n)}var NumberIsNaN=Number.isNaN||function n(e){return e!==e};function EventEmitter$2(){EventEmitter$2.init.call(this)}events$1.exports=EventEmitter$2;events$1.exports.once=once;EventEmitter$2.EventEmitter=EventEmitter$2;EventEmitter$2.prototype._events=void 0;EventEmitter$2.prototype._eventsCount=0;EventEmitter$2.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(EventEmitter$2,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(n){if(typeof n!="number"||n<0||NumberIsNaN(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");defaultMaxListeners=n}});EventEmitter$2.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$2.prototype.setMaxListeners=function n(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(n){return n._maxListeners===void 0?EventEmitter$2.defaultMaxListeners:n._maxListeners}EventEmitter$2.prototype.getMaxListeners=function n(){return _getMaxListeners(this)};EventEmitter$2.prototype.emit=function n(e){for(var t=[],o=1;o<arguments.length;o++)t.push(arguments[o]);var c=e==="error",l=this._events;if(l!==void 0)c=c&&l.error===void 0;else if(!c)return!1;if(c){var h;if(t.length>0&&(h=t[0]),h instanceof Error)throw h;var d=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw d.context=h,d}var g=l[e];if(g===void 0)return!1;if(typeof g=="function")ReflectApply(g,this,t);else for(var m=g.length,v=arrayClone(g,m),o=0;o<m;++o)ReflectApply(v[o],this,t);return!0};function _addListener(n,e,t,o){var c,l,h;if(checkListener(t),l=n._events,l===void 0?(l=n._events=Object.create(null),n._eventsCount=0):(l.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),l=n._events),h=l[e]),h===void 0)h=l[e]=t,++n._eventsCount;else if(typeof h=="function"?h=l[e]=o?[t,h]:[h,t]:o?h.unshift(t):h.push(t),c=_getMaxListeners(n),c>0&&h.length>c&&!h.warned){h.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=n,d.type=e,d.count=h.length,ProcessEmitWarning(d)}return n}EventEmitter$2.prototype.addListener=function n(e,t){return _addListener(this,e,t,!1)};EventEmitter$2.prototype.on=EventEmitter$2.prototype.addListener;EventEmitter$2.prototype.prependListener=function n(e,t){return _addListener(this,e,t,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(n,e,t){var o={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},c=onceWrapper.bind(o);return c.listener=t,o.wrapFn=c,c}EventEmitter$2.prototype.once=function n(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this};EventEmitter$2.prototype.prependOnceListener=function n(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this};EventEmitter$2.prototype.removeListener=function n(e,t){var o,c,l,h,d;if(checkListener(t),c=this._events,c===void 0)return this;if(o=c[e],o===void 0)return this;if(o===t||o.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete c[e],c.removeListener&&this.emit("removeListener",e,o.listener||t));else if(typeof o!="function"){for(l=-1,h=o.length-1;h>=0;h--)if(o[h]===t||o[h].listener===t){d=o[h].listener,l=h;break}if(l<0)return this;l===0?o.shift():spliceOne(o,l),o.length===1&&(c[e]=o[0]),c.removeListener!==void 0&&this.emit("removeListener",e,d||t)}return this};EventEmitter$2.prototype.off=EventEmitter$2.prototype.removeListener;EventEmitter$2.prototype.removeAllListeners=function n(e){var t,o,c;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[e]),this;if(arguments.length===0){var l=Object.keys(o),h;for(c=0;c<l.length;++c)h=l[c],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=o[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(c=t.length-1;c>=0;c--)this.removeListener(e,t[c]);return this};function _listeners(n,e,t){var o=n._events;if(o===void 0)return[];var c=o[e];return c===void 0?[]:typeof c=="function"?t?[c.listener||c]:[c]:t?unwrapListeners(c):arrayClone(c,c.length)}EventEmitter$2.prototype.listeners=function n(e){return _listeners(this,e,!0)};EventEmitter$2.prototype.rawListeners=function n(e){return _listeners(this,e,!1)};EventEmitter$2.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):listenerCount.call(n,e)};EventEmitter$2.prototype.listenerCount=listenerCount;function listenerCount(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}EventEmitter$2.prototype.eventNames=function n(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(n,e){for(var t=new Array(e),o=0;o<e;++o)t[o]=n[o];return t}function spliceOne(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function unwrapListeners(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function once(n,e){return new Promise(function(t,o){function c(h){n.removeListener(e,l),o(h)}function l(){typeof n.removeListener=="function"&&n.removeListener("error",c),t([].slice.call(arguments))}eventTargetAgnosticAddListener(n,e,l,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(n,c,{once:!0})})}function addErrorHandlerIfEventEmitter(n,e,t){typeof n.on=="function"&&eventTargetAgnosticAddListener(n,"error",e,t)}function eventTargetAgnosticAddListener(n,e,t,o){if(typeof n.on=="function")o.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function c(l){o.once&&n.removeEventListener(e,c),t(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var eventsExports=events$1.exports;const contentRouting=Symbol.for("@libp2p/content-routing");var ur,$r;let EventEmitter$1=($r=class extends EventTarget{constructor(){super(...arguments);nr(this,ur,new Map)}listenerCount(t){const o=Ut(this,ur).get(t);return o==null?0:o.length}addEventListener(t,o,c){super.addEventListener(t,o,c);let l=Ut(this,ur).get(t);l==null&&(l=[],Ut(this,ur).set(t,l)),l.push({callback:o,once:(c!==!0&&c!==!1&&c?.once)??!1})}removeEventListener(t,o,c){super.removeEventListener(t.toString(),o??null,c);let l=Ut(this,ur).get(t);l!=null&&(l=l.filter(({callback:h})=>h!==o),Ut(this,ur).set(t,l))}dispatchEvent(t){const o=super.dispatchEvent(t);let c=Ut(this,ur).get(t.type);return c==null||(c=c.filter(({once:l})=>!l),Ut(this,ur).set(t.type,c)),o}safeDispatchEvent(t,o){return this.dispatchEvent(new CustomEvent$1(t,o))}},ur=new WeakMap,$r),CustomEventPolyfill$1=class extends Event{constructor(t,o){super(t,o);me(this,"detail");this.detail=o?.detail}};const CustomEvent$1=globalThis.CustomEvent??CustomEventPolyfill$1,peerDiscovery=Symbol.for("@libp2p/peer-discovery"),peerRouting=Symbol.for("@libp2p/peer-routing"),hashName={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function pbkdf2$3(n,e,t,o,c){if(c!=="sha1"&&c!=="sha2-256"&&c!=="sha2-512"){const d=Object.keys(hashName).join(" / ");throw new CodeError$1(`Hash '${c}' is unknown or not supported. Must be ${d}`,"ERR_UNSUPPORTED_HASH_TYPE")}const l=hashName[c],h=forgePbkdf2(n,e,t,o,l);return forgeUtil.encode64(h,null)}let nanoid=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");const pathSepS="/",pathSepB=new TextEncoder().encode(pathSepS),pathSep=pathSepB[0];let Key$2=class sr{constructor(e,t){me(this,"_buf");if(typeof e=="string")this._buf=fromString$2(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==pathSep)throw new Error("Invalid key")}toString(e="utf8"){return toString$2(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new sr(e.join(pathSepS))}static random(){return new sr(nanoid().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new sr(e):typeof e.uint8Array=="function"?new sr(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=pathSepB),this._buf[0]!==pathSep){const e=new Uint8Array(this._buf.byteLength+1);e.fill(pathSep,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===pathSep;)this._buf=this._buf.subarray(0,-1)}less(e){const t=this.list(),o=e.list();for(let c=0;c<t.length;c++){if(o.length<c+1)return!1;const l=t[c],h=o[c];if(l<h)return!0;if(l>h)return!1}return t.length<o.length}reverse(){return sr.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(pathSepS).slice(1)}type(){return namespaceType(this.baseNamespace())}name(){return namespaceValue(this.baseNamespace())}instance(e){return new sr(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(pathSepS)||(e+=pathSepS),e+=this.type(),new sr(e)}parent(){const e=this.list();return e.length===1?new sr(pathSepS):new sr(e.slice(0,-1).join(pathSepS))}child(e){return this.toString()===pathSepS?e:e.toString()===pathSepS?this:new sr(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return sr.withNamespaces([...this.namespaces(),...flatten(e.map(t=>t.namespaces()))])}};function namespaceType(n){const e=n.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function namespaceValue(n){const e=n.split(":");return e[e.length-1]}function flatten(n){return[].concat(...n)}var isPlainObj=n=>{if(Object.prototype.toString.call(n)!=="[object Object]")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty:hasOwnProperty$1}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=n=>{const e=[];for(const t in n)hasOwnProperty$1.call(n,t)&&e.push(t);if(Object.getOwnPropertySymbols){const t=Object.getOwnPropertySymbols(n);for(const o of t)propertyIsEnumerable.call(n,o)&&e.push(o)}return e};function clone$1(n){return Array.isArray(n)?cloneArray(n):isOptionObject(n)?cloneOptionObject(n):n}function cloneArray(n){const e=n.slice(0,0);return getEnumerableOwnPropertyKeys(n).forEach(t=>{defineProperty(e,t,clone$1(n[t]))}),e}function cloneOptionObject(n){const e=Object.getPrototypeOf(n)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(n).forEach(t=>{defineProperty(e,t,clone$1(n[t]))}),e}const mergeKeys=(n,e,t,o)=>(t.forEach(c=>{typeof e[c]>"u"&&o.ignoreUndefined||(c in n&&n[c]!==Object.getPrototypeOf(n)?defineProperty(n,c,merge$1(n[c],e[c],o)):defineProperty(n,c,clone$1(e[c])))}),n),concatArrays=(n,e,t)=>{let o=n.slice(0,0),c=0;return[n,e].forEach(l=>{const h=[];for(let d=0;d<l.length;d++)hasOwnProperty$1.call(l,d)&&(h.push(String(d)),l===n?defineProperty(o,c++,l[d]):defineProperty(o,c++,clone$1(l[d])));o=mergeKeys(o,l,getEnumerableOwnPropertyKeys(l).filter(d=>!h.includes(d)),t)}),o};function merge$1(n,e,t){return t.concatArrays&&Array.isArray(n)&&Array.isArray(e)?concatArrays(n,e,t):!isOptionObject(e)||!isOptionObject(n)?clone$1(e):mergeKeys(n,e,getEnumerableOwnPropertyKeys(e),t)}var mergeOptions=function(...n){const e=merge$1(clone$1(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let t={_:{}};for(const o of n)if(o!==void 0){if(!isOptionObject(o))throw new TypeError("`"+o+"` is not an Option Object");t=merge$1(t,{_:o},e)}return t._};const mergeOptions$1=getDefaultExportFromCjs(mergeOptions);function isHighSurrogate$1(n){return n>=55296&&n<=56319}function isLowSurrogate$1(n){return n>=56320&&n<=57343}var truncate$2=function n(e,t,o){if(typeof t!="string")throw new Error("Input must be string");for(var c=t.length,l=0,h,d,g=0;g<c;g+=1){if(h=t.charCodeAt(g),d=t[g],isHighSurrogate$1(h)&&isLowSurrogate$1(t.charCodeAt(g+1))&&(g+=1,d+=t[g]),l+=e(d),l===o)return t.slice(0,g+1);if(l>o)return t.slice(0,g-d.length+1)}return t};function isHighSurrogate(n){return n>=55296&&n<=56319}function isLowSurrogate(n){return n>=56320&&n<=57343}var browser$1=function n(e){if(typeof e!="string")throw new Error("Input must be string");for(var t=e.length,o=0,c=null,l=null,h=0;h<t;h++)c=e.charCodeAt(h),isLowSurrogate(c)?l!=null&&isHighSurrogate(l)?o+=1:o+=3:c<=127?o+=1:c>=128&&c<=2047?o+=2:c>=2048&&c<=65535&&(o+=3),l=c;return o},truncate$1=truncate$2,getLength$2=browser$1,browser=truncate$1.bind(null,getLength$2),truncate=browser,illegalRe=/[\/\?<>\\:\*\|"]/g,controlRe=/[\x00-\x1f\x80-\x9f]/g,reservedRe=/^\.+$/,windowsReservedRe=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,windowsTrailingRe=/[\. ]+$/;function sanitize(n,e){if(typeof n!="string")throw new Error("Input must be string");var t=n.replace(illegalRe,e).replace(controlRe,e).replace(reservedRe,e).replace(windowsReservedRe,e).replace(windowsTrailingRe,e);return truncate(t,255)}var sanitizeFilename=function(n,e){var t=e&&e.replacement||"",o=sanitize(n,t);return t===""?o:sanitize(o,"")};const sanitize$1=getDefaultExportFromCjs(sanitizeFilename);var codes$3;(function(n){n.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",n.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",n.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",n.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",n.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",n.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",n.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",n.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",n.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",n.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",n.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",n.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",n.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",n.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",n.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH"})(codes$3||(codes$3={}));const log$m=logger$v("libp2p:keychain"),keyPrefix="/pkcs8/",infoPrefix="/info/",privates=new WeakMap,NIST={minKeyLength:112/8,minSaltLength:128/8,minIterationCount:1e3},defaultOptions$6={dek:{keyLength:512/8,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function validateKeyName(n){return n==null||typeof n!="string"?!1:n===sanitize$1(n.trim())&&n.length>0}async function randomDelay(){const t=Math.random()*800+200;await new Promise(o=>setTimeout(o,t))}function DsName(n){return new Key$2(keyPrefix+n)}function DsInfoName(n){return new Key$2(infoPrefix+n)}class DefaultKeyChain{constructor(e,t){me(this,"components");me(this,"init");if(this.components=e,this.init=mergeOptions$1(defaultOptions$6,t),this.init.pass!=null&&this.init.pass?.length<20)throw new Error("pass must be least 20 characters");if(this.init.dek?.keyLength!=null&&this.init.dek.keyLength<NIST.minKeyLength)throw new Error(`dek.keyLength must be least ${NIST.minKeyLength} bytes`);if(this.init.dek?.salt?.length!=null&&this.init.dek.salt.length<NIST.minSaltLength)throw new Error(`dek.saltLength must be least ${NIST.minSaltLength} bytes`);if(this.init.dek?.iterationCount!=null&&this.init.dek.iterationCount<NIST.minIterationCount)throw new Error(`dek.iterationCount must be least ${NIST.minIterationCount}`);const o=this.init.pass!=null&&this.init.dek?.salt!=null?pbkdf2$3(this.init.pass,this.init.dek?.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";privates.set(this,{dek:o})}static generateOptions(){const e=Object.assign({},defaultOptions$6),t=Math.ceil(NIST.minSaltLength/3)*3;return e.dek.salt=toString$2(randomBytes$2(t),"base64"),e}static get options(){return defaultOptions$6}async createKey(e,t,o=2048){if(!validateKeyName(e)||e==="self")throw await randomDelay(),new CodeError$1("Invalid key name",codes$3.ERR_INVALID_KEY_NAME);if(typeof t!="string")throw await randomDelay(),new CodeError$1("Invalid key type",codes$3.ERR_INVALID_KEY_TYPE);const c=DsName(e);if(await this.components.datastore.has(c))throw await randomDelay(),new CodeError$1("Key name already exists",codes$3.ERR_KEY_ALREADY_EXISTS);switch(t.toLowerCase()){case"rsa":if(!Number.isSafeInteger(o)||o<2048)throw await randomDelay(),new CodeError$1("Invalid RSA key size",codes$3.ERR_INVALID_KEY_SIZE);break}let h;try{const d=await generateKeyPair$3(t,o),g=await d.id(),m=privates.get(this);if(m==null)throw new CodeError$1("dek missing",codes$3.ERR_INVALID_PARAMETERS);const v=m.dek,_=await d.export(v);h={name:e,id:g};const p=this.components.datastore.batch();p.put(c,fromString$2(_)),p.put(DsInfoName(e),fromString$2(JSON.stringify(h))),await p.commit()}catch(d){throw await randomDelay(),d}return h}async listKeys(){const e={prefix:infoPrefix},t=[];for await(const o of this.components.datastore.query(e))t.push(JSON.parse(toString$2(o.value)));return t}async findKeyById(e){try{const o=(await this.listKeys()).find(c=>c.id===e);if(o==null)throw new CodeError$1(`Key with id '${e}' does not exist.`,codes$3.ERR_KEY_NOT_FOUND);return o}catch(t){throw await randomDelay(),t}}async findKeyByName(e){if(!validateKeyName(e))throw await randomDelay(),new CodeError$1(`Invalid key name '${e}'`,codes$3.ERR_INVALID_KEY_NAME);const t=DsInfoName(e);try{const o=await this.components.datastore.get(t);return JSON.parse(toString$2(o))}catch(o){throw await randomDelay(),log$m.error(o),new CodeError$1(`Key '${e}' does not exist.`,codes$3.ERR_KEY_NOT_FOUND)}}async removeKey(e){if(!validateKeyName(e)||e==="self")throw await randomDelay(),new CodeError$1(`Invalid key name '${e}'`,codes$3.ERR_INVALID_KEY_NAME);const t=DsName(e),o=await this.findKeyByName(e),c=this.components.datastore.batch();return c.delete(t),c.delete(DsInfoName(e)),await c.commit(),o}async renameKey(e,t){if(!validateKeyName(e)||e==="self")throw await randomDelay(),new CodeError$1(`Invalid old key name '${e}'`,codes$3.ERR_OLD_KEY_NAME_INVALID);if(!validateKeyName(t)||t==="self")throw await randomDelay(),new CodeError$1(`Invalid new key name '${t}'`,codes$3.ERR_NEW_KEY_NAME_INVALID);const o=DsName(e),c=DsName(t),l=DsInfoName(e),h=DsInfoName(t);if(await this.components.datastore.has(c))throw await randomDelay(),new CodeError$1(`Key '${t}' already exists`,codes$3.ERR_KEY_ALREADY_EXISTS);try{const g=await this.components.datastore.get(o),m=await this.components.datastore.get(l),v=JSON.parse(toString$2(m));v.name=t;const _=this.components.datastore.batch();return _.put(c,g),_.put(h,fromString$2(JSON.stringify(v))),_.delete(o),_.delete(l),await _.commit(),v}catch(g){throw await randomDelay(),g}}async exportKey(e,t){if(!validateKeyName(e))throw await randomDelay(),new CodeError$1(`Invalid key name '${e}'`,codes$3.ERR_INVALID_KEY_NAME);if(t==null)throw await randomDelay(),new CodeError$1("Password is required",codes$3.ERR_PASSWORD_REQUIRED);const o=DsName(e);try{const c=await this.components.datastore.get(o),l=toString$2(c),h=privates.get(this);if(h==null)throw new CodeError$1("dek missing",codes$3.ERR_INVALID_PARAMETERS);const d=h.dek;return await(await importKey(l,d)).export(t)}catch(c){throw await randomDelay(),c}}async exportPeerId(e){const t="temporary-password",o=await this.exportKey(e,t),c=await importKey(o,t);return peerIdFromKeys(c.public.bytes,c.bytes)}async importKey(e,t,o){if(!validateKeyName(e)||e==="self")throw await randomDelay(),new CodeError$1(`Invalid key name '${e}'`,codes$3.ERR_INVALID_KEY_NAME);if(t==null)throw await randomDelay(),new CodeError$1("PEM encoded key is required",codes$3.ERR_PEM_REQUIRED);const c=DsName(e);if(await this.components.datastore.has(c))throw await randomDelay(),new CodeError$1(`Key '${e}' already exists`,codes$3.ERR_KEY_ALREADY_EXISTS);let h;try{h=await importKey(t,o)}catch{throw await randomDelay(),new CodeError$1("Cannot read the key, most likely the password is wrong",codes$3.ERR_CANNOT_READ_KEY)}let d;try{d=await h.id();const v=privates.get(this);if(v==null)throw new CodeError$1("dek missing",codes$3.ERR_INVALID_PARAMETERS);const _=v.dek;t=await h.export(_)}catch(v){throw await randomDelay(),v}const g={name:e,id:d},m=this.components.datastore.batch();return m.put(c,fromString$2(t)),m.put(DsInfoName(e),fromString$2(JSON.stringify(g))),await m.commit(),g}async importPeer(e,t){try{if(!validateKeyName(e))throw new CodeError$1(`Invalid key name '${e}'`,codes$3.ERR_INVALID_KEY_NAME);if(t==null)throw new CodeError$1("PeerId is required",codes$3.ERR_MISSING_PRIVATE_KEY);if(t.privateKey==null)throw new CodeError$1("PeerId.privKey is required",codes$3.ERR_MISSING_PRIVATE_KEY);const o=await unmarshalPrivateKey$2(t.privateKey),c=DsName(e);if(await this.components.datastore.has(c))throw await randomDelay(),new CodeError$1(`Key '${e}' already exists`,codes$3.ERR_KEY_ALREADY_EXISTS);const h=privates.get(this);if(h==null)throw new CodeError$1("dek missing",codes$3.ERR_INVALID_PARAMETERS);const d=h.dek,g=await o.export(d),m={name:e,id:t.toString()},v=this.components.datastore.batch();return v.put(c,fromString$2(g)),v.put(DsInfoName(e),fromString$2(JSON.stringify(m))),await v.commit(),m}catch(o){throw await randomDelay(),o}}async getPrivateKey(e){if(!validateKeyName(e))throw await randomDelay(),new CodeError$1(`Invalid key name '${e}'`,codes$3.ERR_INVALID_KEY_NAME);try{const t=DsName(e),o=await this.components.datastore.get(t);return toString$2(o)}catch(t){throw await randomDelay(),log$m.error(t),new CodeError$1(`Key '${e}' does not exist.`,codes$3.ERR_KEY_NOT_FOUND)}}async rotateKeychainPass(e,t){if(typeof e!="string")throw await randomDelay(),new CodeError$1(`Invalid old pass type '${typeof e}'`,codes$3.ERR_INVALID_OLD_PASS_TYPE);if(typeof t!="string")throw await randomDelay(),new CodeError$1(`Invalid new pass type '${typeof t}'`,codes$3.ERR_INVALID_NEW_PASS_TYPE);if(t.length<20)throw await randomDelay(),new CodeError$1(`Invalid pass length ${t.length}`,codes$3.ERR_INVALID_PASS_LENGTH);log$m("recreating keychain");const o=privates.get(this);if(o==null)throw new CodeError$1("dek missing",codes$3.ERR_INVALID_PARAMETERS);const c=o.dek;this.init.pass=t;const l=t!=null&&this.init.dek?.salt!=null?pbkdf2$3(t,this.init.dek.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";privates.set(this,{dek:l});const h=await this.listKeys();for(const d of h){const g=await this.components.datastore.get(DsName(d.name)),m=toString$2(g),v=await importKey(m,c),_=l.toString(),p=await v.export(_),a=this.components.datastore.batch(),u={name:d.name,id:d.id};a.put(DsName(d.name),fromString$2(p)),a.put(DsInfoName(d.name),fromString$2(JSON.stringify(u))),await a.commit()}log$m("keychain reconstructed")}}function mapIterable(n,e){const t={[Symbol.iterator]:()=>t,next:()=>{const o=n.next(),c=o.value;return o.done===!0||c==null?{done:!0,value:void 0}:{done:!1,value:e(c)}}};return t}class PeerMap{constructor(e){me(this,"map");if(this.map=new Map,e!=null)for(const[t,o]of e.entries())this.map.set(t.toString(),o)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(e){this.map.delete(e.toString())}entries(){return mapIterable(this.map.entries(),e=>[peerIdFromString$1(e[0]),e[1]])}forEach(e){this.map.forEach((t,o)=>{e(t,peerIdFromString$1(o),this)})}get(e){return this.map.get(e.toString())}has(e){return this.map.has(e.toString())}set(e,t){this.map.set(e.toString(),t)}keys(){return mapIterable(this.map.keys(),e=>peerIdFromString$1(e))}values(){return this.map.values()}get size(){return this.map.size}}class PeerSet{constructor(e){me(this,"set");if(this.set=new Set,e!=null)for(const t of e)this.set.add(t.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(e){this.set.add(e.toString())}clear(){this.set.clear()}delete(e){this.set.delete(e.toString())}entries(){return mapIterable(this.set.entries(),e=>{const t=peerIdFromString$1(e[0]);return[t,t]})}forEach(e){this.set.forEach(t=>{const o=peerIdFromString$1(t);e(o,o,this)})}has(e){return this.set.has(e.toString())}values(){return mapIterable(this.set.values(),e=>peerIdFromString$1(e))}intersection(e){const t=new PeerSet;for(const o of e)this.has(o)&&t.add(o);return t}difference(e){const t=new PeerSet;for(const o of this)e.has(o)||t.add(o);return t}union(e){const t=new PeerSet;for(const o of e)t.add(o);for(const o of this)t.add(o);return t}}var PeerIdProto;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),t.id!=null&&(o.uint32(10),o.bytes(t.id)),t.pubKey!=null&&(o.uint32(18),o.bytes(t.pubKey)),t.privKey!=null&&(o.uint32(26),o.bytes(t.privKey)),c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.id=t.bytes();break;case 2:c.pubKey=t.bytes();break;case 3:c.privKey=t.bytes();break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(PeerIdProto||(PeerIdProto={}));const createEd25519PeerId=async()=>{const n=await generateKeyPair$3("Ed25519"),e=await createFromPrivKey(n);if(e.type==="Ed25519")return e;throw new Error(`Generated unexpected PeerId type "${e.type}"`)};async function createFromPrivKey(n){return peerIdFromKeys(marshalPublicKey$1(n.public),marshalPrivateKey(n))}const codes$2={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};var Envelope;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),t.publicKey!=null&&t.publicKey.byteLength>0&&(o.uint32(10),o.bytes(t.publicKey)),t.payloadType!=null&&t.payloadType.byteLength>0&&(o.uint32(18),o.bytes(t.payloadType)),t.payload!=null&&t.payload.byteLength>0&&(o.uint32(26),o.bytes(t.payload)),t.signature!=null&&t.signature.byteLength>0&&(o.uint32(42),o.bytes(t.signature)),c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.publicKey=t.bytes();break;case 2:c.payloadType=t.bytes();break;case 3:c.payload=t.bytes();break;case 5:c.signature=t.bytes();break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(Envelope||(Envelope={}));const gr=class gr{constructor(e){me(this,"peerId");me(this,"payloadType");me(this,"payload");me(this,"signature");me(this,"marshaled");const{peerId:t,payloadType:o,payload:c,signature:l}=e;this.peerId=t,this.payloadType=o,this.payload=c,this.signature=l}marshal(){if(this.peerId.publicKey==null)throw new Error("Missing public key");return this.marshaled==null&&(this.marshaled=Envelope.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(e){return equals(this.marshal(),e.marshal())}async validate(e){const t=formatSignaturePayload(e,this.payloadType,this.payload);if(this.peerId.publicKey==null)throw new Error("Missing public key");return unmarshalPublicKey$1(this.peerId.publicKey).verify(t.subarray(),this.signature)}};me(gr,"createFromProtobuf",async e=>{const t=Envelope.decode(e),o=await peerIdFromKeys(t.publicKey);return new gr({peerId:o,payloadType:t.payloadType,payload:t.payload,signature:t.signature})}),me(gr,"seal",async(e,t)=>{if(t.privateKey==null)throw new Error("Missing private key");const o=e.domain,c=e.codec,l=e.marshal(),h=formatSignaturePayload(o,c,l),g=await(await unmarshalPrivateKey$2(t.privateKey)).sign(h.subarray());return new gr({peerId:t,payloadType:c,payload:l,signature:g})}),me(gr,"openAndCertify",async(e,t)=>{const o=await gr.createFromProtobuf(e);if(!await o.validate(t))throw new CodeError$1("envelope signature is not valid for the given domain",codes$2.ERR_SIGNATURE_NOT_VALID);return o});let RecordEnvelope=gr;const formatSignaturePayload=(n,e,t)=>{const o=fromString$2(n),c=encode$b(o.byteLength),l=encode$b(e.length),h=encode$b(t.length);return new Uint8ArrayList(c,o,l,e,h,t)};function arrayEquals(n,e){const t=(o,c)=>o.toString().localeCompare(c.toString());return n.length!==e.length?!1:(e.sort(t),n.sort(t).every((o,c)=>e[c].equals(o)))}const ENVELOPE_DOMAIN_PEER_RECORD="libp2p-peer-record",ENVELOPE_PAYLOAD_TYPE_PEER_RECORD=Uint8Array.from([3,1]);var PeerRecord$1;(function(n){(function(t){let o;t.codec=()=>(o==null&&(o=message((c,l,h={})=>{h.lengthDelimited!==!1&&l.fork(),c.multiaddr!=null&&c.multiaddr.byteLength>0&&(l.uint32(10),l.bytes(c.multiaddr)),h.lengthDelimited!==!1&&l.ldelim()},(c,l)=>{const h={multiaddr:new Uint8Array(0)},d=l==null?c.len:c.pos+l;for(;c.pos<d;){const g=c.uint32();switch(g>>>3){case 1:h.multiaddr=c.bytes();break;default:c.skipType(g&7);break}}return h})),o),t.encode=c=>encodeMessage(c,t.codec()),t.decode=c=>decodeMessage$1(c,t.codec())})(n.AddressInfo||(n.AddressInfo={}));let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{if(c.lengthDelimited!==!1&&o.fork(),t.peerId!=null&&t.peerId.byteLength>0&&(o.uint32(10),o.bytes(t.peerId)),t.seq!=null&&t.seq!==0n&&(o.uint32(16),o.uint64(t.seq)),t.addresses!=null)for(const l of t.addresses)o.uint32(26),n.AddressInfo.codec().encode(l,o);c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={peerId:new Uint8Array(0),seq:0n,addresses:[]},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.peerId=t.bytes();break;case 2:c.seq=t.uint64();break;case 3:c.addresses.push(n.AddressInfo.codec().decode(t,t.uint32()));break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(PeerRecord$1||(PeerRecord$1={}));const fr=class fr{constructor(e){me(this,"peerId");me(this,"multiaddrs");me(this,"seqNumber");me(this,"domain",fr.DOMAIN);me(this,"codec",fr.CODEC);me(this,"marshaled");const{peerId:t,multiaddrs:o,seqNumber:c}=e;this.peerId=t,this.multiaddrs=o??[],this.seqNumber=c??BigInt(Date.now())}marshal(){return this.marshaled==null&&(this.marshaled=PeerRecord$1.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(e=>({multiaddr:e.bytes}))})),this.marshaled}equals(e){return!(!(e instanceof fr)||!this.peerId.equals(e.peerId)||this.seqNumber!==e.seqNumber||!arrayEquals(this.multiaddrs,e.multiaddrs))}};me(fr,"createFromProtobuf",e=>{const t=PeerRecord$1.decode(e),o=peerIdFromBytes$1(t.peerId),c=(t.addresses??[]).map(h=>multiaddr(h.multiaddr)),l=t.seq;return new fr({peerId:o,multiaddrs:c,seqNumber:l})}),me(fr,"DOMAIN",ENVELOPE_DOMAIN_PEER_RECORD),me(fr,"CODEC",ENVELOPE_PAYLOAD_TYPE_PEER_RECORD);let PeerRecord=fr;function isAsyncIterable$6(n){return n[Symbol.asyncIterator]!=null}function all$1(n){if(isAsyncIterable$6(n))return(async()=>{const t=[];for await(const o of n)t.push(o);return t})();const e=[];for(const t of n)e.push(t);return e}var eventemitter3={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(t=!1));function c(g,m,v){this.fn=g,this.context=m,this.once=v||!1}function l(g,m,v,_,p){if(typeof v!="function")throw new TypeError("The listener must be a function");var a=new c(v,_||g,p),u=t?t+m:m;return g._events[u]?g._events[u].fn?g._events[u]=[g._events[u],a]:g._events[u].push(a):(g._events[u]=a,g._eventsCount++),g}function h(g,m){--g._eventsCount===0?g._events=new o:delete g._events[m]}function d(){this._events=new o,this._eventsCount=0}d.prototype.eventNames=function(){var m=[],v,_;if(this._eventsCount===0)return m;for(_ in v=this._events)e.call(v,_)&&m.push(t?_.slice(1):_);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(v)):m},d.prototype.listeners=function(m){var v=t?t+m:m,_=this._events[v];if(!_)return[];if(_.fn)return[_.fn];for(var p=0,a=_.length,u=new Array(a);p<a;p++)u[p]=_[p].fn;return u},d.prototype.listenerCount=function(m){var v=t?t+m:m,_=this._events[v];return _?_.fn?1:_.length:0},d.prototype.emit=function(m,v,_,p,a,u){var y=t?t+m:m;if(!this._events[y])return!1;var b=this._events[y],w=arguments.length,T,B;if(b.fn){switch(b.once&&this.removeListener(m,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,v),!0;case 3:return b.fn.call(b.context,v,_),!0;case 4:return b.fn.call(b.context,v,_,p),!0;case 5:return b.fn.call(b.context,v,_,p,a),!0;case 6:return b.fn.call(b.context,v,_,p,a,u),!0}for(B=1,T=new Array(w-1);B<w;B++)T[B-1]=arguments[B];b.fn.apply(b.context,T)}else{var H=b.length,J;for(B=0;B<H;B++)switch(b[B].once&&this.removeListener(m,b[B].fn,void 0,!0),w){case 1:b[B].fn.call(b[B].context);break;case 2:b[B].fn.call(b[B].context,v);break;case 3:b[B].fn.call(b[B].context,v,_);break;case 4:b[B].fn.call(b[B].context,v,_,p);break;default:if(!T)for(J=1,T=new Array(w-1);J<w;J++)T[J-1]=arguments[J];b[B].fn.apply(b[B].context,T)}}return!0},d.prototype.on=function(m,v,_){return l(this,m,v,_,!1)},d.prototype.once=function(m,v,_){return l(this,m,v,_,!0)},d.prototype.removeListener=function(m,v,_,p){var a=t?t+m:m;if(!this._events[a])return this;if(!v)return h(this,a),this;var u=this._events[a];if(u.fn)u.fn===v&&(!p||u.once)&&(!_||u.context===_)&&h(this,a);else{for(var y=0,b=[],w=u.length;y<w;y++)(u[y].fn!==v||p&&!u[y].once||_&&u[y].context!==_)&&b.push(u[y]);b.length?this._events[a]=b.length===1?b[0]:b:h(this,a)}return this},d.prototype.removeAllListeners=function(m){var v;return m?(v=t?t+m:m,this._events[v]&&h(this,v)):(this._events=new o,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,n.exports=d})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);let TimeoutError$1=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},AbortError$3=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}};const getDOMException$1=n=>globalThis.DOMException===void 0?new AbortError$3(n):new DOMException(n),getAbortedReason$1=n=>{const e=n.reason===void 0?getDOMException$1("This operation was aborted."):n.reason;return e instanceof Error?e:getDOMException$1(e)};function pTimeout$1(n,e,t,o){let c;const l=new Promise((h,d)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){h(n);return}if(o={customTimers:{setTimeout,clearTimeout},...o},o.signal){const{signal:g}=o;g.aborted&&d(getAbortedReason$1(g)),g.addEventListener("abort",()=>{d(getAbortedReason$1(g))})}c=o.customTimers.setTimeout.call(void 0,()=>{if(typeof t=="function"){try{h(t())}catch(v){d(v)}return}const g=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,m=t instanceof Error?t:new TimeoutError$1(g);typeof n.cancel=="function"&&n.cancel(),d(m)},e),(async()=>{try{h(await n)}catch(g){d(g)}finally{o.customTimers.clearTimeout.call(void 0,c)}})()});return l.clear=()=>{clearTimeout(c),c=void 0},l}function lowerBound$1(n,e,t){let o=0,c=n.length;for(;c>0;){const l=Math.trunc(c/2);let h=o+l;t(n[h],e)<=0?(o=++h,c-=l+1):c=l}return o}var __classPrivateFieldGet$1=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,o){if(t==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?o:t==="a"?o.call(n):o?o.value:e.get(n)},_PriorityQueue_queue;class PriorityQueue{constructor(){_PriorityQueue_queue.set(this,[])}enqueue(e,t){t={priority:0,...t};const o={priority:t.priority,run:e};if(this.size&&__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f")[this.size-1].priority>=t.priority){__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").push(o);return}const c=lowerBound$1(__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f"),o,(l,h)=>h.priority-l.priority);__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").splice(c,0,o)}dequeue(){const e=__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").shift();return e?.run}filter(e){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").length}}_PriorityQueue_queue=new WeakMap;var __classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,o,c){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!c:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?c.call(n,t):c?c.value=t:e.set(n,t),t},__classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,o){if(t==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?o:t==="a"?o.call(n):o?o.value:e.get(n)},_PQueue_instances,_PQueue_carryoverConcurrencyCount,_PQueue_isIntervalIgnored,_PQueue_intervalCount,_PQueue_intervalCap,_PQueue_interval,_PQueue_intervalEnd,_PQueue_intervalId,_PQueue_timeoutId,_PQueue_queue,_PQueue_queueClass,_PQueue_pending,_PQueue_concurrency,_PQueue_isPaused,_PQueue_throwOnTimeout,_PQueue_doesIntervalAllowAnother_get,_PQueue_doesConcurrentAllowAnother_get,_PQueue_next,_PQueue_onResumeInterval,_PQueue_isIntervalPaused_get,_PQueue_tryToStartAnother,_PQueue_initializeIntervalIfNeeded,_PQueue_onInterval,_PQueue_processQueue,_PQueue_throwOnAbort,_PQueue_onEvent;let AbortError$2=class extends Error{};class PQueue extends EventEmitter{constructor(e){var t,o,c,l;if(super(),_PQueue_instances.add(this),_PQueue_carryoverConcurrencyCount.set(this,void 0),_PQueue_isIntervalIgnored.set(this,void 0),_PQueue_intervalCount.set(this,0),_PQueue_intervalCap.set(this,void 0),_PQueue_interval.set(this,void 0),_PQueue_intervalEnd.set(this,0),_PQueue_intervalId.set(this,void 0),_PQueue_timeoutId.set(this,void 0),_PQueue_queue.set(this,void 0),_PQueue_queueClass.set(this,void 0),_PQueue_pending.set(this,0),_PQueue_concurrency.set(this,void 0),_PQueue_isPaused.set(this,void 0),_PQueue_throwOnTimeout.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(o=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&o!==void 0?o:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(l=(c=e.interval)===null||c===void 0?void 0:c.toString())!==null&&l!==void 0?l:""}\` (${typeof e.interval})`);__classPrivateFieldSet(this,_PQueue_carryoverConcurrencyCount,e.carryoverConcurrencyCount,"f"),__classPrivateFieldSet(this,_PQueue_isIntervalIgnored,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),__classPrivateFieldSet(this,_PQueue_intervalCap,e.intervalCap,"f"),__classPrivateFieldSet(this,_PQueue_interval,e.interval,"f"),__classPrivateFieldSet(this,_PQueue_queue,new e.queueClass,"f"),__classPrivateFieldSet(this,_PQueue_queueClass,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,__classPrivateFieldSet(this,_PQueue_throwOnTimeout,e.throwOnTimeout===!0,"f"),__classPrivateFieldSet(this,_PQueue_isPaused,e.autoStart===!1,"f")}get concurrency(){return __classPrivateFieldGet(this,_PQueue_concurrency,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);__classPrivateFieldSet(this,_PQueue_concurrency,e,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:__classPrivateFieldGet(this,_PQueue_throwOnTimeout,"f"),...t},new Promise((o,c)=>{__classPrivateFieldGet(this,_PQueue_queue,"f").enqueue(async()=>{var l,h,d;__classPrivateFieldSet(this,_PQueue_pending,(h=__classPrivateFieldGet(this,_PQueue_pending,"f"),h++,h),"f"),__classPrivateFieldSet(this,_PQueue_intervalCount,(d=__classPrivateFieldGet(this,_PQueue_intervalCount,"f"),d++,d),"f");try{if(!((l=t.signal)===null||l===void 0)&&l.aborted)throw new AbortError$2("The task was aborted.");let g=e({signal:t.signal});t.timeout&&(g=pTimeout$1(Promise.resolve(g),t.timeout)),t.signal&&(g=Promise.race([g,__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_throwOnAbort).call(this,t.signal)]));const m=await g;o(m),this.emit("completed",m)}catch(g){if(g instanceof TimeoutError$1&&!t.throwOnTimeout){o();return}c(g),this.emit("error",g)}finally{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_next).call(this)}},t),this.emit("add"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this)})}async addAll(e,t){return Promise.all(e.map(async o=>this.add(o,t)))}start(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")?(__classPrivateFieldSet(this,_PQueue_isPaused,!1,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this),this):this}pause(){__classPrivateFieldSet(this,_PQueue_isPaused,!0,"f")}clear(){__classPrivateFieldSet(this,_PQueue_queue,new(__classPrivateFieldGet(this,_PQueue_queueClass,"f")),"f")}async onEmpty(){__classPrivateFieldGet(this,_PQueue_queue,"f").size!==0&&await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"empty")}async onSizeLessThan(e){__classPrivateFieldGet(this,_PQueue_queue,"f").size<e||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"next",()=>__classPrivateFieldGet(this,_PQueue_queue,"f").size<e)}async onIdle(){__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&__classPrivateFieldGet(this,_PQueue_queue,"f").size===0||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"idle")}get size(){return __classPrivateFieldGet(this,_PQueue_queue,"f").size}sizeBy(e){return __classPrivateFieldGet(this,_PQueue_queue,"f").filter(e).length}get pending(){return __classPrivateFieldGet(this,_PQueue_pending,"f")}get isPaused(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")}}_PQueue_carryoverConcurrencyCount=new WeakMap,_PQueue_isIntervalIgnored=new WeakMap,_PQueue_intervalCount=new WeakMap,_PQueue_intervalCap=new WeakMap,_PQueue_interval=new WeakMap,_PQueue_intervalEnd=new WeakMap,_PQueue_intervalId=new WeakMap,_PQueue_timeoutId=new WeakMap,_PQueue_queue=new WeakMap,_PQueue_queueClass=new WeakMap,_PQueue_pending=new WeakMap,_PQueue_concurrency=new WeakMap,_PQueue_isPaused=new WeakMap,_PQueue_throwOnTimeout=new WeakMap,_PQueue_instances=new WeakSet,_PQueue_doesIntervalAllowAnother_get=function n(){return __classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalCount,"f")<__classPrivateFieldGet(this,_PQueue_intervalCap,"f")},_PQueue_doesConcurrentAllowAnother_get=function n(){return __classPrivateFieldGet(this,_PQueue_pending,"f")<__classPrivateFieldGet(this,_PQueue_concurrency,"f")},_PQueue_next=function n(){var e;__classPrivateFieldSet(this,_PQueue_pending,(e=__classPrivateFieldGet(this,_PQueue_pending,"f"),e--,e),"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("next")},_PQueue_onResumeInterval=function n(){__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),__classPrivateFieldSet(this,_PQueue_timeoutId,void 0,"f")},_PQueue_isIntervalPaused_get=function n(){const e=Date.now();if(__classPrivateFieldGet(this,_PQueue_intervalId,"f")===void 0){const t=__classPrivateFieldGet(this,_PQueue_intervalEnd,"f")-e;if(t<0)__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pending,"f"):0,"f");else return __classPrivateFieldGet(this,_PQueue_timeoutId,"f")===void 0&&__classPrivateFieldSet(this,_PQueue_timeoutId,setTimeout(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onResumeInterval).call(this)},t),"f"),!0}return!1},_PQueue_tryToStartAnother=function n(){if(__classPrivateFieldGet(this,_PQueue_queue,"f").size===0)return __classPrivateFieldGet(this,_PQueue_intervalId,"f")&&clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f"),this.emit("empty"),__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&this.emit("idle"),!1;if(!__classPrivateFieldGet(this,_PQueue_isPaused,"f")){const e=!__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_isIntervalPaused_get);if(__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesIntervalAllowAnother_get)&&__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesConcurrentAllowAnother_get)){const t=__classPrivateFieldGet(this,_PQueue_queue,"f").dequeue();return t?(this.emit("active"),t(),e&&__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),!0):!1}}return!1},_PQueue_initializeIntervalIfNeeded=function n(){__classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalId,"f")!==void 0||(__classPrivateFieldSet(this,_PQueue_intervalId,setInterval(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this)},__classPrivateFieldGet(this,_PQueue_interval,"f")),"f"),__classPrivateFieldSet(this,_PQueue_intervalEnd,Date.now()+__classPrivateFieldGet(this,_PQueue_interval,"f"),"f"))},_PQueue_onInterval=function n(){__classPrivateFieldGet(this,_PQueue_intervalCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&__classPrivateFieldGet(this,_PQueue_intervalId,"f")&&(clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f")),__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pending,"f"):0,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)},_PQueue_processQueue=function n(){for(;__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this););},_PQueue_throwOnAbort=async function n(e){return new Promise((t,o)=>{e.addEventListener("abort",()=>{o(new AbortError$2("The task was aborted."))},{once:!0})})},_PQueue_onEvent=async function n(e,t){return new Promise(o=>{const c=()=>{t&&!t()||(this.off(e,c),o())};this.on(e,c)})};class TimeoutError extends Error{constructor(e){super(e),this.name="TimeoutError"}}let AbortError$1=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}};const getDOMException=n=>globalThis.DOMException===void 0?new AbortError$1(n):new DOMException(n),getAbortedReason=n=>{const e=n.reason===void 0?getDOMException("This operation was aborted."):n.reason;return e instanceof Error?e:getDOMException(e)};function pTimeout(n,e){const{milliseconds:t,fallback:o,message:c,customTimers:l={setTimeout,clearTimeout}}=e;let h;const g=new Promise((m,v)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(e.signal){const{signal:p}=e;p.aborted&&v(getAbortedReason(p)),p.addEventListener("abort",()=>{v(getAbortedReason(p))})}if(t===Number.POSITIVE_INFINITY){n.then(m,v);return}const _=new TimeoutError;h=l.setTimeout.call(void 0,()=>{if(o){try{m(o())}catch(p){v(p)}return}typeof n.cancel=="function"&&n.cancel(),c===!1?m():c instanceof Error?v(c):(_.message=c??`Promise timed out after ${t} milliseconds`,v(_))},t),(async()=>{try{m(await n)}catch(p){v(p)}})()}).finally(()=>{g.clear()});return g.clear=()=>{l.clearTimeout.call(void 0,h),h=void 0},g}const WORKER_REQUEST_READ_LOCK="lock:worker:request-read",WORKER_RELEASE_READ_LOCK="lock:worker:release-read",MASTER_GRANT_READ_LOCK="lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK="lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK="lock:worker:release-write",MASTER_GRANT_WRITE_LOCK="lock:master:grant-write",events={},observable=n=>{n.addEventListener("message",e=>{observable.dispatchEvent("message",n,e)}),n.port!=null&&n.port.addEventListener("message",e=>{observable.dispatchEvent("message",n,e)})};observable.addEventListener=(n,e)=>{events[n]==null&&(events[n]=[]),events[n].push(e)};observable.removeEventListener=(n,e)=>{events[n]!=null&&(events[n]=events[n].filter(t=>t===e))};observable.dispatchEvent=function(n,e,t){events[n]!=null&&events[n].forEach(o=>o(e,t))};const handleWorkerLockRequest=(n,e,t,o,c)=>(l,h)=>{if(h.data.type!==t)return;const d={type:h.data.type,name:h.data.name,identifier:h.data.identifier};n.dispatchEvent(new MessageEvent(e,{data:{name:d.name,handler:async()=>(l.postMessage({type:c,name:d.name,identifier:d.identifier}),await new Promise(g=>{const m=v=>{if(v==null||v.data==null)return;const _={type:v.data.type,name:v.data.name,identifier:v.data.identifier};_.type===o&&_.identifier===d.identifier&&(l.removeEventListener("message",m),g())};l.addEventListener("message",m)}))}}))},makeWorkerLockRequest=(n,e,t,o)=>async()=>{const c=nanoid();return globalThis.postMessage({type:e,identifier:c,name:n}),await new Promise(l=>{const h=d=>{if(d==null||d.data==null)return;const g={type:d.data.type,identifier:d.data.identifier};g.type===t&&g.identifier===c&&(globalThis.removeEventListener("message",h),l(()=>{globalThis.postMessage({type:o,identifier:c,name:n})}))};globalThis.addEventListener("message",h)})},defaultOptions$5={singleProcess:!1},impl=n=>{if(n=Object.assign({},defaultOptions$5,n),!!globalThis.document||n.singleProcess){const t=new EventTarget;return observable.addEventListener("message",handleWorkerLockRequest(t,"requestReadLock",WORKER_REQUEST_READ_LOCK,WORKER_RELEASE_READ_LOCK,MASTER_GRANT_READ_LOCK)),observable.addEventListener("message",handleWorkerLockRequest(t,"requestWriteLock",WORKER_REQUEST_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK)),t}return{isWorker:!0,readLock:t=>makeWorkerLockRequest(t,WORKER_REQUEST_READ_LOCK,MASTER_GRANT_READ_LOCK,WORKER_RELEASE_READ_LOCK),writeLock:t=>makeWorkerLockRequest(t,WORKER_REQUEST_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK)}},mutexes={};let implementation;async function createReleaseable(n,e){let t;const o=new Promise(c=>{t=c});return n.add(async()=>await pTimeout((async()=>await new Promise(c=>{t(()=>{c()})}))(),{milliseconds:e.timeout})),await o}const createMutex=(n,e)=>{if(implementation.isWorker===!0)return{readLock:implementation.readLock(n,e),writeLock:implementation.writeLock(n,e)};const t=new PQueue({concurrency:1});let o;return{async readLock(){if(o!=null)return await createReleaseable(o,e);o=new PQueue({concurrency:e.concurrency,autoStart:!1});const c=o,l=createReleaseable(o,e);return t.add(async()=>(c.start(),await c.onIdle().then(()=>{o===c&&(o=null)}))),await l},async writeLock(){return o=null,await createReleaseable(t,e)}}},defaultOptions$4={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function createMortice(n){const e=Object.assign({},defaultOptions$4,n);return implementation==null&&(implementation=impl(e),implementation.isWorker!==!0&&(implementation.addEventListener("requestReadLock",t=>{mutexes[t.data.name]!=null&&mutexes[t.data.name].readLock().then(async o=>await t.data.handler().finally(()=>o()))}),implementation.addEventListener("requestWriteLock",async t=>{mutexes[t.data.name]!=null&&mutexes[t.data.name].writeLock().then(async o=>await t.data.handler().finally(()=>o()))}))),mutexes[e.name]==null&&(mutexes[e.name]=createMutex(e.name,e)),mutexes[e.name]}const codes$1={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS"};var Peer;(function(n){(function(t){let o;t.codec=()=>(o==null&&(o=message((c,l,h={})=>{h.lengthDelimited!==!1&&l.fork(),c.key!=null&&c.key!==""&&(l.uint32(10),l.string(c.key)),c.value!=null&&c.value.byteLength>0&&(l.uint32(18),l.bytes(c.value)),h.lengthDelimited!==!1&&l.ldelim()},(c,l)=>{const h={key:"",value:new Uint8Array(0)},d=l==null?c.len:c.pos+l;for(;c.pos<d;){const g=c.uint32();switch(g>>>3){case 1:h.key=c.string();break;case 2:h.value=c.bytes();break;default:c.skipType(g&7);break}}return h})),o),t.encode=c=>encodeMessage(c,t.codec()),t.decode=c=>decodeMessage$1(c,t.codec())})(n.Peer$metadataEntry||(n.Peer$metadataEntry={})),function(t){let o;t.codec=()=>(o==null&&(o=message((c,l,h={})=>{h.lengthDelimited!==!1&&l.fork(),c.key!=null&&c.key!==""&&(l.uint32(10),l.string(c.key)),c.value!=null&&(l.uint32(18),Tag.codec().encode(c.value,l)),h.lengthDelimited!==!1&&l.ldelim()},(c,l)=>{const h={key:""},d=l==null?c.len:c.pos+l;for(;c.pos<d;){const g=c.uint32();switch(g>>>3){case 1:h.key=c.string();break;case 2:h.value=Tag.codec().decode(c,c.uint32());break;default:c.skipType(g&7);break}}return h})),o),t.encode=c=>encodeMessage(c,t.codec()),t.decode=c=>decodeMessage$1(c,t.codec())}(n.Peer$tagsEntry||(n.Peer$tagsEntry={}));let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{if(c.lengthDelimited!==!1&&o.fork(),t.addresses!=null)for(const l of t.addresses)o.uint32(10),Address.codec().encode(l,o);if(t.protocols!=null)for(const l of t.protocols)o.uint32(18),o.string(l);if(t.publicKey!=null&&(o.uint32(34),o.bytes(t.publicKey)),t.peerRecordEnvelope!=null&&(o.uint32(42),o.bytes(t.peerRecordEnvelope)),t.metadata!=null&&t.metadata.size!==0)for(const[l,h]of t.metadata.entries())o.uint32(50),n.Peer$metadataEntry.codec().encode({key:l,value:h},o);if(t.tags!=null&&t.tags.size!==0)for(const[l,h]of t.tags.entries())o.uint32(58),n.Peer$tagsEntry.codec().encode({key:l,value:h},o);c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={addresses:[],protocols:[],metadata:new Map,tags:new Map},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.addresses.push(Address.codec().decode(t,t.uint32()));break;case 2:c.protocols.push(t.string());break;case 4:c.publicKey=t.bytes();break;case 5:c.peerRecordEnvelope=t.bytes();break;case 6:{const d=n.Peer$metadataEntry.codec().decode(t,t.uint32());c.metadata.set(d.key,d.value);break}case 7:{const d=n.Peer$tagsEntry.codec().decode(t,t.uint32());c.tags.set(d.key,d.value);break}default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(Peer||(Peer={}));var Address;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),t.multiaddr!=null&&t.multiaddr.byteLength>0&&(o.uint32(10),o.bytes(t.multiaddr)),t.isCertified!=null&&(o.uint32(16),o.bool(t.isCertified)),c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={multiaddr:new Uint8Array(0)},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.multiaddr=t.bytes();break;case 2:c.isCertified=t.bool();break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(Address||(Address={}));var Tag;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),t.value!=null&&t.value!==0&&(o.uint32(8),o.uint32(t.value)),t.expiry!=null&&(o.uint32(16),o.uint64(t.expiry)),c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={value:0},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.value=t.uint32();break;case 2:c.expiry=t.uint64();break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(Tag||(Tag={}));function bytesToPeer(n,e){const t=Peer.decode(e);t.publicKey!=null&&n.publicKey==null&&(n=peerIdFromPeerId({...n,publicKey:n.publicKey}));const o=new Map,c=BigInt(Date.now());for(const[l,h]of t.tags.entries())h.expiry!=null&&h.expiry<c||o.set(l,h);return{...t,id:n,addresses:t.addresses.map(({multiaddr:l,isCertified:h})=>({multiaddr:multiaddr(l),isCertified:h??!1})),metadata:t.metadata,peerRecordEnvelope:t.peerRecordEnvelope??void 0,tags:o}}const NAMESPACE_COMMON="/peers/";function peerIdToDatastoreKey(n){if(!isPeerId(n)||n.type==null)throw new CodeError$1("Invalid PeerId",codes$1.ERR_INVALID_PARAMETERS);const e=n.toCID().toString();return new Key$2(`${NAMESPACE_COMMON}${e}`)}async function dedupeFilterAndSortAddresses(n,e,t){const o=new Map;for(const c of t){if(c==null)continue;if(c.multiaddr instanceof Uint8Array&&(c.multiaddr=multiaddr(c.multiaddr)),!isMultiaddr(c.multiaddr))throw new CodeError$1("Multiaddr was invalid",codes$1.ERR_INVALID_PARAMETERS);if(!await e(n,c.multiaddr))continue;const l=c.isCertified??!1,h=c.multiaddr.toString(),d=o.get(h);d!=null?c.isCertified=d.isCertified||l:o.set(h,{multiaddr:c.multiaddr,isCertified:l})}return[...o.values()].sort((c,l)=>c.multiaddr.toString().localeCompare(l.multiaddr.toString())).map(({isCertified:c,multiaddr:l})=>({isCertified:c,multiaddr:l.bytes}))}async function toPeerPB(n,e,t,o){if(e==null)throw new CodeError$1("Invalid PeerData",codes$1.ERR_INVALID_PARAMETERS);if(e.publicKey!=null&&n.publicKey!=null&&!equals(e.publicKey,n.publicKey))throw new CodeError$1("publicKey bytes do not match peer id publicKey bytes",codes$1.ERR_INVALID_PARAMETERS);const c=o.existingPeer;if(c!=null&&!n.equals(c.id))throw new CodeError$1("peer id did not match existing peer id",codes$1.ERR_INVALID_PARAMETERS);let l=c?.addresses??[],h=new Set(c?.protocols??[]),d=c?.metadata??new Map,g=c?.tags??new Map,m=c?.peerRecordEnvelope;if(t==="patch"){if((e.multiaddrs!=null||e.addresses!=null)&&(l=[],e.multiaddrs!=null&&l.push(...e.multiaddrs.map(_=>({isCertified:!1,multiaddr:_}))),e.addresses!=null&&l.push(...e.addresses)),e.protocols!=null&&(h=new Set(e.protocols)),e.metadata!=null){const _=e.metadata instanceof Map?[...e.metadata.entries()]:Object.entries(e.metadata);d=createSortedMap(_,{validate:validateMetadata})}if(e.tags!=null){const _=e.tags instanceof Map?[...e.tags.entries()]:Object.entries(e.tags);g=createSortedMap(_,{validate:validateTag,map:mapTag})}e.peerRecordEnvelope!=null&&(m=e.peerRecordEnvelope)}if(t==="merge"){if(e.multiaddrs!=null&&l.push(...e.multiaddrs.map(_=>({isCertified:!1,multiaddr:_}))),e.addresses!=null&&l.push(...e.addresses),e.protocols!=null&&(h=new Set([...h,...e.protocols])),e.metadata!=null){const _=e.metadata instanceof Map?[...e.metadata.entries()]:Object.entries(e.metadata);for(const[p,a]of _)a==null?d.delete(p):d.set(p,a);d=createSortedMap([...d.entries()],{validate:validateMetadata})}if(e.tags!=null){const _=e.tags instanceof Map?[...e.tags.entries()]:Object.entries(e.tags),p=new Map(g);for(const[a,u]of _)u==null?p.delete(a):p.set(a,u);g=createSortedMap([...p.entries()],{validate:validateTag,map:mapTag})}e.peerRecordEnvelope!=null&&(m=e.peerRecordEnvelope)}const v={addresses:await dedupeFilterAndSortAddresses(n,o.addressFilter??(async()=>!0),l),protocols:[...h.values()].sort((_,p)=>_.localeCompare(p)),metadata:d,tags:g,publicKey:c?.id.publicKey??e.publicKey??n.publicKey,peerRecordEnvelope:m};return n.type!=="RSA"&&delete v.publicKey,v}function createSortedMap(n,e){const t=new Map;for(const[o,c]of n)c!=null&&e.validate(o,c);for(const[o,c]of n.sort(([l],[h])=>l.localeCompare(h)))c!=null&&t.set(o,e.map?.(o,c)??c);return t}function validateMetadata(n,e){if(typeof n!="string")throw new CodeError$1("Metadata key must be a string",codes$1.ERR_INVALID_PARAMETERS);if(!(e instanceof Uint8Array))throw new CodeError$1("Metadata value must be a Uint8Array",codes$1.ERR_INVALID_PARAMETERS)}function validateTag(n,e){if(typeof n!="string")throw new CodeError$1("Tag name must be a string",codes$1.ERR_INVALID_PARAMETERS);if(e.value!=null){if(parseInt(`${e.value}`,10)!==e.value)throw new CodeError$1("Tag value must be an integer",codes$1.ERR_INVALID_PARAMETERS);if(e.value<0||e.value>100)throw new CodeError$1("Tag value must be between 0-100",codes$1.ERR_INVALID_PARAMETERS)}if(e.ttl!=null){if(parseInt(`${e.ttl}`,10)!==e.ttl)throw new CodeError$1("Tag ttl must be an integer",codes$1.ERR_INVALID_PARAMETERS);if(e.ttl<0)throw new CodeError$1("Tag ttl must be between greater than 0",codes$1.ERR_INVALID_PARAMETERS)}}function mapTag(n,e){let t;return e.expiry!=null&&(t=e.expiry),e.ttl!=null&&(t=BigInt(Date.now()+Number(e.ttl))),{value:e.value??0,expiry:t}}function decodePeer(n,e,t){const o=n.toString().split("/")[2],c=base32.decode(o),l=peerIdFromBytes$1(c),h=t.get(l);if(h!=null)return h;const d=bytesToPeer(l,e);return t.set(l,d),d}function mapQuery(n,e){return n==null?{}:{prefix:NAMESPACE_COMMON,filters:(n.filters??[]).map(t=>({key:o,value:c})=>t(decodePeer(o,c,e))),orders:(n.orders??[]).map(t=>(o,c)=>t(decodePeer(o.key,o.value,e),decodePeer(c.key,c.value,e)))}}var wr,kr,Ar,Cr;class PersistentStore{constructor(e,t={}){nr(this,wr);nr(this,Ar);me(this,"peerId");me(this,"datastore");me(this,"lock");me(this,"addressFilter");this.peerId=e.peerId,this.datastore=e.datastore,this.addressFilter=t.addressFilter,this.lock=createMortice({name:"peer-store",singleProcess:!0})}async has(e){return this.datastore.has(peerIdToDatastoreKey(e))}async delete(e){if(this.peerId.equals(e))throw new CodeError$1("Cannot delete self peer",codes$1.ERR_INVALID_PARAMETERS);await this.datastore.delete(peerIdToDatastoreKey(e))}async load(e){const t=await this.datastore.get(peerIdToDatastoreKey(e));return bytesToPeer(e,t)}async save(e,t){const{existingBuf:o,existingPeer:c}=await ir(this,wr,kr).call(this,e),l=await toPeerPB(e,t,"patch",{addressFilter:this.addressFilter});return ir(this,Ar,Cr).call(this,e,l,o,c)}async patch(e,t){const{existingBuf:o,existingPeer:c}=await ir(this,wr,kr).call(this,e),l=await toPeerPB(e,t,"patch",{addressFilter:this.addressFilter,existingPeer:c});return ir(this,Ar,Cr).call(this,e,l,o,c)}async merge(e,t){const{existingBuf:o,existingPeer:c}=await ir(this,wr,kr).call(this,e),l=await toPeerPB(e,t,"merge",{addressFilter:this.addressFilter,existingPeer:c});return ir(this,Ar,Cr).call(this,e,l,o,c)}async*all(e){const t=new PeerMap;for await(const{key:o,value:c}of this.datastore.query(mapQuery(e??{},t))){const l=decodePeer(o,c,t);l.id.equals(this.peerId)||(yield l)}}}wr=new WeakSet,kr=async function(e){try{const t=await this.datastore.get(peerIdToDatastoreKey(e)),o=bytesToPeer(e,t);return{existingBuf:t,existingPeer:o}}catch(t){if(t.code!=="ERR_NOT_FOUND")throw t}return{}},Ar=new WeakSet,Cr=async function(e,t,o,c){const l=Peer.encode(t);return o!=null&&equals(l,o)?{peer:bytesToPeer(e,l),previous:c,updated:!1}:(await this.datastore.put(peerIdToDatastoreKey(e),l),{peer:bytesToPeer(e,l),previous:c,updated:!0})};const log$l=logger$v("libp2p:peer-store");var Ir,Rr;class PersistentPeerStore{constructor(e,t={}){nr(this,Ir);me(this,"store");me(this,"events");me(this,"peerId");this.events=e.events,this.peerId=e.peerId,this.store=new PersistentStore(e,t)}async forEach(e,t){log$l.trace("forEach await read lock");const o=await this.store.lock.readLock();log$l.trace("forEach got read lock");try{for await(const c of this.store.all(t))e(c)}finally{log$l.trace("forEach release read lock"),o()}}async all(e){log$l.trace("all await read lock");const t=await this.store.lock.readLock();log$l.trace("all got read lock");try{return await all$1(this.store.all(e))}finally{log$l.trace("all release read lock"),t()}}async delete(e){log$l.trace("delete await write lock");const t=await this.store.lock.writeLock();log$l.trace("delete got write lock");try{await this.store.delete(e)}finally{log$l.trace("delete release write lock"),t()}}async has(e){log$l.trace("has await read lock");const t=await this.store.lock.readLock();log$l.trace("has got read lock");try{return await this.store.has(e)}finally{log$l.trace("has release read lock"),t()}}async get(e){log$l.trace("get await read lock");const t=await this.store.lock.readLock();log$l.trace("get got read lock");try{return await this.store.load(e)}finally{log$l.trace("get release read lock"),t()}}async save(e,t){log$l.trace("save await write lock");const o=await this.store.lock.writeLock();log$l.trace("save got write lock");try{const c=await this.store.save(e,t);return ir(this,Ir,Rr).call(this,e,c),c.peer}finally{log$l.trace("save release write lock"),o()}}async patch(e,t){log$l.trace("patch await write lock");const o=await this.store.lock.writeLock();log$l.trace("patch got write lock");try{const c=await this.store.patch(e,t);return ir(this,Ir,Rr).call(this,e,c),c.peer}finally{log$l.trace("patch release write lock"),o()}}async merge(e,t){log$l.trace("merge await write lock");const o=await this.store.lock.writeLock();log$l.trace("merge got write lock");try{const c=await this.store.merge(e,t);return ir(this,Ir,Rr).call(this,e,c),c.peer}finally{log$l.trace("merge release write lock"),o()}}async consumePeerRecord(e,t){const o=await RecordEnvelope.openAndCertify(e,PeerRecord.DOMAIN);if(t?.equals(o.peerId)===!1)return log$l("envelope peer id was not the expected peer id - expected: %p received: %p",t,o.peerId),!1;const c=PeerRecord.createFromProtobuf(o.payload);let l;try{l=await this.get(o.peerId)}catch(h){if(h.code!=="ERR_NOT_FOUND")throw h}if(l?.peerRecordEnvelope!=null){const h=await RecordEnvelope.createFromProtobuf(l.peerRecordEnvelope),d=PeerRecord.createFromProtobuf(h.payload);if(d.seqNumber>=c.seqNumber)return log$l("sequence number was lower or equal to existing sequence number - stored: %d received: %d",d.seqNumber,c.seqNumber),!1}return await this.patch(c.peerId,{peerRecordEnvelope:e,addresses:c.multiaddrs.map(h=>({isCertified:!0,multiaddr:h}))}),!0}}Ir=new WeakSet,Rr=function(e,t){t.updated&&(this.peerId.equals(e)?this.events.safeDispatchEvent("self:peer:update",{detail:t}):this.events.safeDispatchEvent("peer:update",{detail:t}))};function isAsyncIterable$5(n){return n[Symbol.asyncIterator]!=null}function drain(n){if(isAsyncIterable$5(n))return(async()=>{for await(const e of n);})();for(const e of n);}function peekable(n){const[e,t]=n[Symbol.asyncIterator]!=null?[n[Symbol.asyncIterator](),Symbol.asyncIterator]:[n[Symbol.iterator](),Symbol.iterator],o=[];return{peek:()=>e.next(),push:c=>{o.push(c)},next:()=>o.length>0?{done:!1,value:o.shift()}:e.next(),[t](){return this}}}function isAsyncIterable$4(n){return n[Symbol.asyncIterator]!=null}function filter(n,e){if(isAsyncIterable$4(n))return async function*(){for await(const d of n)await e(d)&&(yield d)}();const t=peekable(n),{value:o,done:c}=t.next();if(c===!0)return function*(){}();const l=e(o);if(typeof l.then=="function")return async function*(){await l&&(yield o);for await(const d of t)await e(d)&&(yield d)}();const h=e;return function*(){l===!0&&(yield o);for(const d of t)h(d)&&(yield d)}()}function isAsyncIterable$3(n){return n[Symbol.asyncIterator]!=null}function sort(n,e){return isAsyncIterable$3(n)?async function*(){yield*(await all$1(n)).sort(e)}():function*(){yield*all$1(n).sort(e)}()}function isAsyncIterable$2(n){return n[Symbol.asyncIterator]!=null}function take(n,e){return isAsyncIterable$2(n)?async function*(){let t=0;if(!(e<1)){for await(const o of n)if(yield o,t++,t===e)return}}():function*(){let t=0;if(!(e<1)){for(const o of n)if(yield o,t++,t===e)return}}()}class BaseDatastore{put(e,t,o){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:o,value:c}of e)await this.put(o,c,t),yield o}async*getMany(e,t={}){for await(const o of e)yield{key:o,value:await this.get(o,t)}}async*deleteMany(e,t={}){for await(const o of e)await this.delete(o,t),yield o}batch(){let e=[],t=[];return{put(o,c){e.push({key:o,value:c})},delete(o){t.push(o)},commit:async o=>{await drain(this.putMany(e,o)),e=[],await drain(this.deleteMany(t,o)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let o=this._all(e,t);if(e.prefix!=null){const c=e.prefix;o=filter(o,l=>l.key.toString().startsWith(c))}if(Array.isArray(e.filters)&&(o=e.filters.reduce((c,l)=>filter(c,l),o)),Array.isArray(e.orders)&&(o=e.orders.reduce((c,l)=>sort(c,l),o)),e.offset!=null){let c=0;const l=e.offset;o=filter(o,()=>c++>=l)}return e.limit!=null&&(o=take(o,e.limit)),o}queryKeys(e,t){let o=this._allKeys(e,t);if(e.prefix!=null){const c=e.prefix;o=filter(o,l=>l.toString().startsWith(c))}if(Array.isArray(e.filters)&&(o=e.filters.reduce((c,l)=>filter(c,l),o)),Array.isArray(e.orders)&&(o=e.orders.reduce((c,l)=>sort(c,l),o)),e.offset!=null){const c=e.offset;let l=0;o=filter(o,()=>l++>=c)}return e.limit!=null&&(o=take(o,e.limit)),o}}function notFoundError(n){return n=n??new Error("Not Found"),errCode$1(n,"ERR_NOT_FOUND")}class MemoryDatastore extends BaseDatastore{constructor(){super();me(this,"data");this.data=new Map}put(t,o){return this.data.set(t.toString(),o),t}get(t){const o=this.data.get(t.toString());if(o==null)throw notFoundError();return o}has(t){return this.data.has(t.toString())}delete(t){this.data.delete(t.toString())}*_all(){for(const[t,o]of this.data.entries())yield{key:new Key$2(t),value:o}}*_allKeys(){for(const t of this.data.keys())yield new Key$2(t)}}function debounce(n,e){let t;return function(){const o=function(){t=void 0,n()};clearTimeout(t),t=setTimeout(o,e)}}const log$k=logger$v("libp2p:address-manager"),defaultAddressFilter=n=>n;function stripPeerId(n,e){const t=n.getPeerId();return t!=null&&peerIdFromString$1(t).equals(e)&&(n=n.decapsulate(multiaddr(`/p2p/${e.toString()}`))),n}class DefaultAddressManager{constructor(e,t={}){me(this,"components");me(this,"listen");me(this,"announce");me(this,"observed");me(this,"announceFilter");const{listen:o=[],announce:c=[]}=t;this.components=e,this.listen=o.map(l=>l.toString()),this.announce=new Set(c.map(l=>l.toString())),this.observed=new Map,this.announceFilter=t.announceFilter??defaultAddressFilter,this._updatePeerStoreAddresses=debounce(this._updatePeerStoreAddresses.bind(this),1e3),e.events.addEventListener("transport:listening",()=>{this._updatePeerStoreAddresses()}),e.events.addEventListener("transport:close",()=>{this._updatePeerStoreAddresses()})}_updatePeerStoreAddresses(){const e=this.getAnnounceAddrs().concat(this.components.transportManager.getAddrs()).concat([...this.observed.entries()].filter(([t,o])=>o.confident).map(([t])=>multiaddr(t))).map(t=>t.getPeerId()===this.components.peerId.toString()?t.decapsulate(`/p2p/${this.components.peerId.toString()}`):t);this.components.peerStore.patch(this.components.peerId,{multiaddrs:e}).catch(t=>{log$k.error("error updating addresses",t)})}getListenAddrs(){return Array.from(this.listen).map(e=>multiaddr(e))}getAnnounceAddrs(){return Array.from(this.announce).map(e=>multiaddr(e))}getObservedAddrs(){return Array.from(this.observed).map(([e])=>multiaddr(e))}addObservedAddr(e){e=stripPeerId(e,this.components.peerId);const t=e.toString();this.observed.has(t)||this.observed.set(t,{confident:!1})}confirmObservedAddr(e){e=stripPeerId(e,this.components.peerId);const t=e.toString(),c=(this.observed.get(t)??{confident:!1}).confident;this.observed.set(t,{confident:!0}),c||this._updatePeerStoreAddresses()}removeObservedAddr(e){e=stripPeerId(e,this.components.peerId);const t=e.toString();this.observed.delete(t)}getAddresses(){let e=this.getAnnounceAddrs().map(o=>o.toString());e.length===0&&(e=this.components.transportManager.getAddrs().map(o=>o.toString())),e=e.concat(Array.from(this.observed).filter(([o,c])=>c.confident).map(([o])=>o));const t=new Set(e);return this.announceFilter(Array.from(t).map(o=>multiaddr(o))).map(o=>o.protos().pop()?.path===!0||o.getPeerId()===this.components.peerId.toString()?o:o.encapsulate(`/p2p/${this.components.peerId.toString()}`))}}function isStartable(n){return n!=null&&typeof n.start=="function"&&typeof n.stop=="function"}class DefaultComponents{constructor(e={}){me(this,"components",{});me(this,"_started",!1);this.components={};for(const[t,o]of Object.entries(e))this.components[t]=o}isStarted(){return this._started}async _invokeStartableMethod(e){await Promise.all(Object.values(this.components).filter(t=>isStartable(t)).map(async t=>{await t[e]?.()}))}async beforeStart(){await this._invokeStartableMethod("beforeStart")}async start(){await this._invokeStartableMethod("start"),this._started=!0}async afterStart(){await this._invokeStartableMethod("afterStart")}async beforeStop(){await this._invokeStartableMethod("beforeStop")}async stop(){await this._invokeStartableMethod("stop"),this._started=!1}async afterStop(){await this._invokeStartableMethod("afterStop")}}const OPTIONAL_SERVICES=["metrics","connectionProtector"],NON_SERVICE_PROPERTIES=["components","isStarted","beforeStart","start","afterStart","beforeStop","stop","afterStop","then","_invokeStartableMethod"];function defaultComponents(n={}){const e=new DefaultComponents(n);return new Proxy(e,{get(o,c,l){if(typeof c=="string"&&!NON_SERVICE_PROPERTIES.includes(c)){const h=e.components[c];if(h==null&&!OPTIONAL_SERVICES.includes(c))throw new CodeError$1(`${c} not set`,"ERR_SERVICE_MISSING");return h}return Reflect.get(o,c,l)},set(o,c,l){return typeof c=="string"?e.components[c]=l:Reflect.set(o,c,l),!0}})}var Netmask_1;(function(){var n,e,t,o,c,l,h,d;d=function(g){var m,v,_,p;return m=(g&255<<24)>>>24,v=(g&255<<16)>>>16,_=(g&65280)>>>8,p=g&255,[m,v,_,p].join(".")},h=function(g){var m,v,_,p,a,u;for(m=[],_=p=0;p<=3&&g.length!==0;_=++p){if(_>0){if(g[0]!==".")throw new Error("Invalid IP");g=g.substring(1)}u=e(g),a=u[0],v=u[1],g=g.substring(v),m.push(a)}if(g.length!==0)throw new Error("Invalid IP");switch(m.length){case 1:if(m[0]>4294967295)throw new Error("Invalid IP");return m[0]>>>0;case 2:if(m[0]>255||m[1]>16777215)throw new Error("Invalid IP");return(m[0]<<24|m[1])>>>0;case 3:if(m[0]>255||m[1]>255||m[2]>65535)throw new Error("Invalid IP");return(m[0]<<24|m[1]<<16|m[2])>>>0;case 4:if(m[0]>255||m[1]>255||m[2]>255||m[3]>255)throw new Error("Invalid IP");return(m[0]<<24|m[1]<<16|m[2]<<8|m[3])>>>0;default:throw new Error("Invalid IP")}},t=function(g){return g.charCodeAt(0)},o=t("0"),l=t("a"),c=t("A"),e=function(g){var m,v,_,p,a;for(p=0,m=10,v="9",_=0,g.length>1&&g[_]==="0"&&(g[_+1]==="x"||g[_+1]==="X"?(_+=2,m=16):"0"<=g[_+1]&&g[_+1]<="9"&&(_++,m=8,v="7")),a=_;_<g.length;){if("0"<=g[_]&&g[_]<=v)p=p*m+(t(g[_])-o)>>>0;else if(m===16)if("a"<=g[_]&&g[_]<="f")p=p*m+(10+t(g[_])-l)>>>0;else if("A"<=g[_]&&g[_]<="F")p=p*m+(10+t(g[_])-c)>>>0;else break;else break;if(p>4294967295)throw new Error("too large");_++}if(_===a)throw new Error("empty octet");return[p,_]},n=function(){function g(m,v){var _,p,a;if(typeof m!="string")throw new Error("Missing `net' parameter");if(v||(a=m.split("/",2),m=a[0],v=a[1]),v||(v=32),typeof v=="string"&&v.indexOf(".")>-1){try{this.maskLong=h(v)}catch{throw new Error("Invalid mask: "+v)}for(_=p=32;p>=0;_=--p)if(this.maskLong===4294967295<<32-_>>>0){this.bitmask=_;break}}else if(v||v===0)this.bitmask=parseInt(v,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(h(m)&this.maskLong)>>>0}catch{throw new Error("Invalid net address: "+m)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+v);this.size=Math.pow(2,32-this.bitmask),this.base=d(this.netLong),this.mask=d(this.maskLong),this.hostmask=d(~this.maskLong),this.first=this.bitmask<=30?d(this.netLong+1):this.base,this.last=this.bitmask<=30?d(this.netLong+this.size-2):d(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?d(this.netLong+this.size-1):void 0}return g.prototype.contains=function(m){return typeof m=="string"&&(m.indexOf("/")>0||m.split(".").length!==4)&&(m=new g(m)),m instanceof g?this.contains(m.base)&&this.contains(m.broadcast||m.last):(h(m)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},g.prototype.next=function(m){return m==null&&(m=1),new g(d(this.netLong+this.size*m),this.mask)},g.prototype.forEach=function(m){var v,_,p;for(p=h(this.first),_=h(this.last),v=0;p<=_;)m(d(p),p,v),v++,p++},g.prototype.toString=function(){return this.base+"/"+this.bitmask},g}(),Netmask_1=n}).call(commonjsGlobal);const word="[a-fA-F\\d:]",boundry=n=>n&&n.includeBoundaries?`(?:(?<=\\s|^)(?=${word})|(?<=${word})(?=\\s|$))`:"",v4="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v6segment="[a-fA-F\\d]{1,4}",v6=`
(?:
(?:${v6segment}:){7}(?:${v6segment}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${v6segment}:){6}(?:${v4}|:${v6segment}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${v6segment}:){5}(?::${v4}|(?::${v6segment}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${v6segment}:){4}(?:(?::${v6segment}){0,1}:${v4}|(?::${v6segment}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${v6segment}:){3}(?:(?::${v6segment}){0,2}:${v4}|(?::${v6segment}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${v6segment}:){2}(?:(?::${v6segment}){0,3}:${v4}|(?::${v6segment}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${v6segment}:){1}(?:(?::${v6segment}){0,4}:${v4}|(?::${v6segment}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${v6segment}){0,5}:${v4}|(?::${v6segment}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),v46Exact=new RegExp(`(?:^${v4}$)|(?:^${v6}$)`),v4exact=new RegExp(`^${v4}$`),v6exact=new RegExp(`^${v6}$`),ipRegex=n=>n&&n.exact?v46Exact:new RegExp(`(?:${boundry(n)}${v4}${boundry(n)})|(?:${boundry(n)}${v6}${boundry(n)})`,"g");ipRegex.v4=n=>n&&n.exact?v4exact:new RegExp(`${boundry(n)}${v4}${boundry(n)}`,"g");ipRegex.v6=n=>n&&n.exact?v6exact:new RegExp(`${boundry(n)}${v6}${boundry(n)}`,"g");var ipaddr$1={exports:{}};(function(n){(function(e){const t="(0?\\d+|0x[a-f0-9]+)",o={fourOctet:new RegExp(`^${t}\\.${t}\\.${t}\\.${t}$`,"i"),threeOctet:new RegExp(`^${t}\\.${t}\\.${t}$`,"i"),twoOctet:new RegExp(`^${t}\\.${t}$`,"i"),longValue:new RegExp(`^${t}$`,"i")},c=new RegExp("^0[0-7]+$","i"),l=new RegExp("^0x[a-f0-9]+$","i"),h="%[0-9a-z]{1,}",d="(?:[0-9a-f]+::?)+",g={zoneIndex:new RegExp(h,"i"),native:new RegExp(`^(::)?(${d})?([0-9a-f]+)?(::)?(${h})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${t}\\.${t}\\.${t}\\.${t}(${h})?)$`,"i"),transitional:new RegExp(`^((?:${d})|(?:::)(?:${d})?)${t}\\.${t}\\.${t}\\.${t}(${h})?$`,"i")};function m(u,y){if(u.indexOf("::")!==u.lastIndexOf("::"))return null;let b=0,w=-1,T=(u.match(g.zoneIndex)||[])[0],B,H;for(T&&(T=T.substring(1),u=u.replace(/%.+$/,""));(w=u.indexOf(":",w+1))>=0;)b++;if(u.substr(0,2)==="::"&&b--,u.substr(-2,2)==="::"&&b--,b>y)return null;for(H=y-b,B=":";H--;)B+="0:";return u=u.replace("::",B),u[0]===":"&&(u=u.slice(1)),u[u.length-1]===":"&&(u=u.slice(0,-1)),y=function(){const J=u.split(":"),W=[];for(let fe=0;fe<J.length;fe++)W.push(parseInt(J[fe],16));return W}(),{parts:y,zoneId:T}}function v(u,y,b,w){if(u.length!==y.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let T=0,B;for(;w>0;){if(B=b-w,B<0&&(B=0),u[T]>>B!==y[T]>>B)return!1;w-=b,T+=1}return!0}function _(u){if(l.test(u))return parseInt(u,16);if(u[0]==="0"&&!isNaN(parseInt(u[1],10))){if(c.test(u))return parseInt(u,8);throw new Error(`ipaddr: cannot parse ${u} as octal`)}return parseInt(u,10)}function p(u,y){for(;u.length<y;)u=`0${u}`;return u}const a={};a.IPv4=function(){function u(y){if(y.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let b,w;for(b=0;b<y.length;b++)if(w=y[b],!(0<=w&&w<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=y}return u.prototype.SpecialRanges={unspecified:[[new u([0,0,0,0]),8]],broadcast:[[new u([255,255,255,255]),32]],multicast:[[new u([224,0,0,0]),4]],linkLocal:[[new u([169,254,0,0]),16]],loopback:[[new u([127,0,0,0]),8]],carrierGradeNat:[[new u([100,64,0,0]),10]],private:[[new u([10,0,0,0]),8],[new u([172,16,0,0]),12],[new u([192,168,0,0]),16]],reserved:[[new u([192,0,0,0]),24],[new u([192,0,2,0]),24],[new u([192,88,99,0]),24],[new u([198,18,0,0]),15],[new u([198,51,100,0]),24],[new u([203,0,113,0]),24],[new u([240,0,0,0]),4]]},u.prototype.kind=function(){return"ipv4"},u.prototype.match=function(y,b){let w;if(b===void 0&&(w=y,y=w[0],b=w[1]),y.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return v(this.octets,y.octets,8,b)},u.prototype.prefixLengthFromSubnetMask=function(){let y=0,b=!1;const w={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let T,B,H;for(T=3;T>=0;T-=1)if(B=this.octets[T],B in w){if(H=w[B],b&&H!==0)return null;H!==8&&(b=!0),y+=H}else return null;return 32-y},u.prototype.range=function(){return a.subnetMatch(this,this.SpecialRanges)},u.prototype.toByteArray=function(){return this.octets.slice(0)},u.prototype.toIPv4MappedAddress=function(){return a.IPv6.parse(`::ffff:${this.toString()}`)},u.prototype.toNormalizedString=function(){return this.toString()},u.prototype.toString=function(){return this.octets.join(".")},u}(),a.IPv4.broadcastAddressFromCIDR=function(u){try{const y=this.parseCIDR(u),b=y[0].toByteArray(),w=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),T=[];let B=0;for(;B<4;)T.push(parseInt(b[B],10)|parseInt(w[B],10)^255),B++;return new this(T)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},a.IPv4.isIPv4=function(u){return this.parser(u)!==null},a.IPv4.isValid=function(u){try{return new this(this.parser(u)),!0}catch{return!1}},a.IPv4.isValidFourPartDecimal=function(u){return!!(a.IPv4.isValid(u)&&u.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},a.IPv4.networkAddressFromCIDR=function(u){let y,b,w,T,B;try{for(y=this.parseCIDR(u),w=y[0].toByteArray(),B=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),T=[],b=0;b<4;)T.push(parseInt(w[b],10)&parseInt(B[b],10)),b++;return new this(T)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},a.IPv4.parse=function(u){const y=this.parser(u);if(y===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(y)},a.IPv4.parseCIDR=function(u){let y;if(y=u.match(/^(.+)\/(\d+)$/)){const b=parseInt(y[2]);if(b>=0&&b<=32){const w=[this.parse(y[1]),b];return Object.defineProperty(w,"toString",{value:function(){return this.join("/")}}),w}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},a.IPv4.parser=function(u){let y,b,w;if(y=u.match(o.fourOctet))return function(){const T=y.slice(1,6),B=[];for(let H=0;H<T.length;H++)b=T[H],B.push(_(b));return B}();if(y=u.match(o.longValue)){if(w=_(y[1]),w>4294967295||w<0)throw new Error("ipaddr: address outside defined range");return function(){const T=[];let B;for(B=0;B<=24;B+=8)T.push(w>>B&255);return T}().reverse()}else return(y=u.match(o.twoOctet))?function(){const T=y.slice(1,4),B=[];if(w=_(T[1]),w>16777215||w<0)throw new Error("ipaddr: address outside defined range");return B.push(_(T[0])),B.push(w>>16&255),B.push(w>>8&255),B.push(w&255),B}():(y=u.match(o.threeOctet))?function(){const T=y.slice(1,5),B=[];if(w=_(T[2]),w>65535||w<0)throw new Error("ipaddr: address outside defined range");return B.push(_(T[0])),B.push(_(T[1])),B.push(w>>8&255),B.push(w&255),B}():null},a.IPv4.subnetMaskFromPrefixLength=function(u){if(u=parseInt(u),u<0||u>32)throw new Error("ipaddr: invalid IPv4 prefix length");const y=[0,0,0,0];let b=0;const w=Math.floor(u/8);for(;b<w;)y[b]=255,b++;return w<4&&(y[w]=Math.pow(2,u%8)-1<<8-u%8),new this(y)},a.IPv6=function(){function u(y,b){let w,T;if(y.length===16)for(this.parts=[],w=0;w<=14;w+=2)this.parts.push(y[w]<<8|y[w+1]);else if(y.length===8)this.parts=y;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(w=0;w<this.parts.length;w++)if(T=this.parts[w],!(0<=T&&T<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");b&&(this.zoneId=b)}return u.prototype.SpecialRanges={unspecified:[new u([0,0,0,0,0,0,0,0]),128],linkLocal:[new u([65152,0,0,0,0,0,0,0]),10],multicast:[new u([65280,0,0,0,0,0,0,0]),8],loopback:[new u([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new u([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new u([0,0,0,0,0,65535,0,0]),96],rfc6145:[new u([0,0,0,0,65535,0,0,0]),96],rfc6052:[new u([100,65435,0,0,0,0,0,0]),96],"6to4":[new u([8194,0,0,0,0,0,0,0]),16],teredo:[new u([8193,0,0,0,0,0,0,0]),32],reserved:[[new u([8193,3512,0,0,0,0,0,0]),32]],benchmarking:[new u([8193,2,0,0,0,0,0,0]),48],amt:[new u([8193,3,0,0,0,0,0,0]),32],as112v6:[new u([8193,4,274,0,0,0,0,0]),48],deprecated:[new u([8193,16,0,0,0,0,0,0]),28],orchid2:[new u([8193,32,0,0,0,0,0,0]),28]},u.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},u.prototype.kind=function(){return"ipv6"},u.prototype.match=function(y,b){let w;if(b===void 0&&(w=y,y=w[0],b=w[1]),y.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return v(this.parts,y.parts,16,b)},u.prototype.prefixLengthFromSubnetMask=function(){let y=0,b=!1;const w={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let T,B;for(let H=7;H>=0;H-=1)if(T=this.parts[H],T in w){if(B=w[T],b&&B!==0)return null;B!==16&&(b=!0),y+=B}else return null;return 128-y},u.prototype.range=function(){return a.subnetMatch(this,this.SpecialRanges)},u.prototype.toByteArray=function(){let y;const b=[],w=this.parts;for(let T=0;T<w.length;T++)y=w[T],b.push(y>>8),b.push(y&255);return b},u.prototype.toFixedLengthString=function(){const y=function(){const w=[];for(let T=0;T<this.parts.length;T++)w.push(p(this.parts[T].toString(16),4));return w}.call(this).join(":");let b="";return this.zoneId&&(b=`%${this.zoneId}`),y+b},u.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const y=this.parts.slice(-2),b=y[0],w=y[1];return new a.IPv4([b>>8,b&255,w>>8,w&255])},u.prototype.toNormalizedString=function(){const y=function(){const w=[];for(let T=0;T<this.parts.length;T++)w.push(this.parts[T].toString(16));return w}.call(this).join(":");let b="";return this.zoneId&&(b=`%${this.zoneId}`),y+b},u.prototype.toRFC5952String=function(){const y=/((^|:)(0(:|$)){2,})/g,b=this.toNormalizedString();let w=0,T=-1,B;for(;B=y.exec(b);)B[0].length>T&&(w=B.index,T=B[0].length);return T<0?b:`${b.substring(0,w)}::${b.substring(w+T)}`},u.prototype.toString=function(){return this.toRFC5952String()},u}(),a.IPv6.broadcastAddressFromCIDR=function(u){try{const y=this.parseCIDR(u),b=y[0].toByteArray(),w=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),T=[];let B=0;for(;B<16;)T.push(parseInt(b[B],10)|parseInt(w[B],10)^255),B++;return new this(T)}catch(y){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${y})`)}},a.IPv6.isIPv6=function(u){return this.parser(u)!==null},a.IPv6.isValid=function(u){if(typeof u=="string"&&u.indexOf(":")===-1)return!1;try{const y=this.parser(u);return new this(y.parts,y.zoneId),!0}catch{return!1}},a.IPv6.networkAddressFromCIDR=function(u){let y,b,w,T,B;try{for(y=this.parseCIDR(u),w=y[0].toByteArray(),B=this.subnetMaskFromPrefixLength(y[1]).toByteArray(),T=[],b=0;b<16;)T.push(parseInt(w[b],10)&parseInt(B[b],10)),b++;return new this(T)}catch(H){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${H})`)}},a.IPv6.parse=function(u){const y=this.parser(u);if(y.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(y.parts,y.zoneId)},a.IPv6.parseCIDR=function(u){let y,b,w;if((b=u.match(/^(.+)\/(\d+)$/))&&(y=parseInt(b[2]),y>=0&&y<=128))return w=[this.parse(b[1]),y],Object.defineProperty(w,"toString",{value:function(){return this.join("/")}}),w;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},a.IPv6.parser=function(u){let y,b,w,T,B,H;if(w=u.match(g.deprecatedTransitional))return this.parser(`::ffff:${w[1]}`);if(g.native.test(u))return m(u,8);if((w=u.match(g.transitional))&&(H=w[6]||"",y=m(w[1].slice(0,-1)+H,6),y.parts)){for(B=[parseInt(w[2]),parseInt(w[3]),parseInt(w[4]),parseInt(w[5])],b=0;b<B.length;b++)if(T=B[b],!(0<=T&&T<=255))return null;return y.parts.push(B[0]<<8|B[1]),y.parts.push(B[2]<<8|B[3]),{parts:y.parts,zoneId:y.zoneId}}return null},a.IPv6.subnetMaskFromPrefixLength=function(u){if(u=parseInt(u),u<0||u>128)throw new Error("ipaddr: invalid IPv6 prefix length");const y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let b=0;const w=Math.floor(u/8);for(;b<w;)y[b]=255,b++;return w<16&&(y[w]=Math.pow(2,u%8)-1<<8-u%8),new this(y)},a.fromByteArray=function(u){const y=u.length;if(y===4)return new a.IPv4(u);if(y===16)return new a.IPv6(u);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},a.isValid=function(u){return a.IPv6.isValid(u)||a.IPv4.isValid(u)},a.parse=function(u){if(a.IPv6.isValid(u))return a.IPv6.parse(u);if(a.IPv4.isValid(u))return a.IPv4.parse(u);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},a.parseCIDR=function(u){try{return a.IPv6.parseCIDR(u)}catch{try{return a.IPv4.parseCIDR(u)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},a.process=function(u){const y=this.parse(u);return y.kind()==="ipv6"&&y.isIPv4MappedAddress()?y.toIPv4Address():y},a.subnetMatch=function(u,y,b){let w,T,B,H;b==null&&(b="unicast");for(T in y)if(Object.prototype.hasOwnProperty.call(y,T)){for(B=y[T],B[0]&&!(B[0]instanceof Array)&&(B=[B]),w=0;w<B.length;w++)if(H=B[w],u.kind()===H[0].kind()&&u.match.apply(u,H))return T}return b},n.exports?n.exports=a:e.ipaddr=a})(commonjsGlobal)})(ipaddr$1);var ipaddrExports=ipaddr$1.exports;const ipaddr=getDefaultExportFromCjs(ipaddrExports),{isValid:is_valid,parse:parse$1}=ipaddr,PRIVATE_IP_RANGES=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],NETMASK_RANGES=PRIVATE_IP_RANGES.map(n=>new Netmask_1(n));function ipv4_check(n){for(let e of NETMASK_RANGES)if(e.contains(n))return!0;return!1}function ipv6_check(n){return/^::$/.test(n)||/^::1$/.test(n)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(n)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(n)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(n)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(n)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(n)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(n)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(n)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(n)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(n)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(n)||/^ff([0-9a-fA-F]{2,2}):/i.test(n)}const is_ip_private=n=>{if(is_valid(n)){const e=parse$1(n);if(e.kind()==="ipv4")return ipv4_check(e.toNormalizedString());if(e.kind()==="ipv6")return ipv6_check(n)}else if(isIP(n)&&ipRegex.v6().test(n))return ipv6_check(n)};function connectionGater(n={}){return{denyDialPeer:async()=>!1,denyDialMultiaddr:async e=>{const t=e.stringTuples();return t[0][0]===4||t[0][0]===41?!!is_ip_private(`${t[0][1]}`):!1},denyInboundConnection:async()=>!1,denyOutboundConnection:async()=>!1,denyInboundEncryptedConnection:async()=>!1,denyOutboundEncryptedConnection:async()=>!1,denyInboundUpgradedConnection:async()=>!1,denyOutboundUpgradedConnection:async()=>!1,filterMultiaddrForPeer:async()=>!0,...n}}const symbol$1=Symbol.for("@libp2p/transport");var FaultTolerance$2;(function(n){n[n.FATAL_ALL=0]="FATAL_ALL",n[n.NO_FATAL=1]="NO_FATAL"})(FaultTolerance$2||(FaultTolerance$2={}));const toParts=n=>n.toString().split("/").slice(1),func=n=>({match:e=>e.length<1?!1:n(e[0])?e.slice(1):!1,pattern:"fn"}),literal=n=>({match:e=>func(t=>t===n).match(e),pattern:n}),string=()=>({match:n=>func(e=>typeof e=="string").match(n),pattern:"{string}"}),number=()=>({match:n=>func(e=>!isNaN(parseInt(e))).match(n),pattern:"{number}"}),peerId=()=>({match:n=>{if(n.length<2||n[0]!=="p2p"&&n[0]!=="ipfs")return!1;if(n[1].startsWith("Q")||n[1].startsWith("1"))try{base58btc.decode(`z${n[1]}`)}catch{return!1}else return!1;return n.slice(2)},pattern:"/p2p/{peerid}"}),certhash=()=>({match:n=>{if(n.length<2||n[0]!=="certhash")return!1;try{base64url.decode(n[1])}catch{return!1}return n.slice(2)},pattern:"/certhash/{certhash}"}),optional=n=>({match:e=>{const t=n.match(e);return t===!1?e:t},pattern:`optional(${n.pattern})`}),or$1=(...n)=>({match:e=>{let t;for(const o of n){const c=o.match(e);c!==!1&&(t==null||c.length<t.length)&&(t=c)}return t??!1},pattern:`or(${n.map(e=>e.pattern).join(", ")})`}),and$1=(...n)=>({match:e=>{for(const t of n){const o=t.match(e);if(o===!1)return!1;e=o}return e},pattern:`and(${n.map(e=>e.pattern).join(", ")})`});function fmt(...n){function e(c){let l=toParts(c);for(const h of n){const d=h.match(l);if(d===!1)return!1;l=d}return l}function t(c){return e(c)!==!1}function o(c){const l=e(c);return l===!1?!1:l.length===0}return{matches:t,exactMatch:o}}const _DNS4=and$1(literal("dns4"),string()),_DNS6=and$1(literal("dns6"),string()),_DNSADDR=and$1(literal("dnsaddr"),string()),_DNS=and$1(literal("dns"),string());fmt(or$1(_DNS,_DNSADDR,_DNS4,_DNS6));const _IP4=and$1(literal("ip4"),func(isIPv4)),_IP6=and$1(literal("ip6"),func(isIPv6)),_IP=or$1(_IP4,_IP6),_IP_OR_DOMAIN=or$1(_IP,_DNS,_DNS4,_DNS6,_DNSADDR),_TCP=and$1(_IP_OR_DOMAIN,literal("tcp"),number()),_UDP=and$1(_IP_OR_DOMAIN,literal("udp"),number()),TCP_OR_UDP=or$1(_TCP,_UDP),_QUIC=and$1(_UDP,literal("quic")),_QUICV1=and$1(_UDP,literal("quic-v1")),QUIC_V0_OR_V1=or$1(_QUIC,_QUICV1),_WEB=or$1(_IP_OR_DOMAIN,_TCP,_UDP,_QUIC,_QUICV1),_WebSockets$1=or$1(and$1(_WEB,literal("ws"),optional(peerId()))),_WebSocketsSecure$1=or$1(and$1(_WEB,literal("wss"),optional(peerId())),and$1(_WEB,literal("tls"),literal("ws"),optional(peerId()))),_WebRTCDirect=and$1(TCP_OR_UDP,literal("webrtc-direct"),certhash(),optional(certhash()),optional(peerId())),_WebTransport=and$1(_QUICV1,literal("webtransport"),certhash(),certhash(),optional(peerId())),_P2P=or$1(_WebSockets$1,_WebSocketsSecure$1,and$1(_TCP,optional(peerId())),and$1(QUIC_V0_OR_V1,optional(peerId())),and$1(_IP_OR_DOMAIN,optional(peerId())),_WebRTCDirect,_WebTransport,peerId()),_Circuit=and$1(_P2P,literal("p2p-circuit"),peerId()),Circuit=fmt(_Circuit);or$1(and$1(_P2P,literal("p2p-circuit"),literal("webrtc"),peerId()),and$1(_P2P,literal("webrtc"),optional(peerId())),literal("webrtc"));function isPrivate(n){try{const{address:e}=n.nodeAddress();return!!is_ip_private(e)}catch{return!0}}function publicAddressesFirst(n,e){const t=isPrivate(n.multiaddr),o=isPrivate(e.multiaddr);return t&&!o?1:!t&&o?-1:0}function certifiedAddressesFirst(n,e){return n.isCertified&&!e.isCertified?-1:!n.isCertified&&e.isCertified?1:0}function circuitRelayAddressesLast(n,e){const t=Circuit.exactMatch(n.multiaddr),o=Circuit.exactMatch(e.multiaddr);return t&&!o?1:!t&&o?-1:0}function defaultAddressSort(n,e){const t=publicAddressesFirst(n,e);if(t!==0)return t;const o=circuitRelayAddressesLast(n,e);return o!==0?o:certifiedAddressesFirst(n,e)}var receptacle=Receptacle,toMS=requireMs(),cache=Receptacle.prototype,counter=new Date%1e9;function getUID(){return(Math.random()*1e9>>>0)+counter++}function Receptacle(n){n=n||{},this.id=n.id||getUID(),this.max=n.max||1/0,this.items=n.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(n.lastModified||new Date);for(var e,t,o=this.items.length;o--;)e=this.items[o],t=new Date(e.expires)-new Date,this._lookup[e.key]=e,t>0?this.expire(e.key,t):t<=0&&this.delete(e.key)}cache.has=function(n){return n in this._lookup};cache.get=function(n){if(!this.has(n))return null;var e=this._lookup[n];return e.refresh&&this.expire(n,e.refresh),this.items.splice(this.items.indexOf(e),1),this.items.push(e),e.value};cache.meta=function(n){if(!this.has(n))return null;var e=this._lookup[n];return"meta"in e?e.meta:null};cache.set=function(n,e,t){var o=this._lookup[n],c=this._lookup[n]={key:n,value:e};return this.lastModified=new Date,o?(clearTimeout(o.timeout),this.items.splice(this.items.indexOf(o),1,c)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(c),this.size++),t&&("ttl"in t&&this.expire(n,t.ttl),"meta"in t&&(c.meta=t.meta),t.refresh&&(c.refresh=t.ttl)),this};cache.delete=function(n){var e=this._lookup[n];return e?(this.lastModified=new Date,this.items.splice(this.items.indexOf(e),1),clearTimeout(e.timeout),delete this._lookup[n],this.size--,this):!1};cache.expire=function(n,e){var t=e||0,o=this._lookup[n];if(!o)return this;if(typeof t=="string"&&(t=toMS(e)),typeof t!="number")throw new TypeError("Expiration time must be a string or number.");return clearTimeout(o.timeout),o.timeout=setTimeout(this.delete.bind(this,o.key),t),o.expires=Number(new Date)+t,this};cache.clear=function(){for(var n=this.items.length;n--;)this.delete(this.items[n].key);return this};cache.toJSON=function(){for(var n=new Array(this.items.length),e,t=n.length;t--;)e=this.items[t],n[t]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:n}};const Receptacle$1=getDefaultExportFromCjs(receptacle);function buildResource(n,e,t){return`${n}?name=${e}&type=${t}`}async function request(n,e){return await(await fetch(n,{headers:new Headers({accept:"application/dns-json"}),signal:e})).json()}function getCacheKey(n,e){return`${e}_${n}`}const log$j=Object.assign(debug("dns-over-http-resolver"),{error:debug("dns-over-http-resolver:error")});let Resolver$1=class{constructor(e={}){me(this,"_cache");me(this,"_TXTcache");me(this,"_servers");me(this,"_request");me(this,"_abortControllers");this._cache=new Receptacle$1({max:e?.maxCache??100}),this._TXTcache=new Receptacle$1({max:e?.maxCache??100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=e.request??request,this._abortControllers=[]}cancel(){this._abortControllers.forEach(e=>{e.abort()})}getServers(){return this._servers}_getShuffledServers(){const e=[...this._servers];for(let t=e.length-1;t>0;t--){const o=Math.floor(Math.random()*t),c=e[t];e[t]=e[o],e[o]=c}return e}setServers(e){this._servers=e}async resolve(e,t="A"){switch(t){case"A":return this.resolve4(e);case"AAAA":return this.resolve6(e);case"TXT":return this.resolveTxt(e);default:throw new Error(`${t} is not supported`)}}async resolve4(e){const t="A",o=this._cache.get(getCacheKey(e,t));if(o!=null)return o;let c=!1;for(const l of this._getShuffledServers()){const h=new AbortController;this._abortControllers.push(h);try{const d=await this._request(buildResource(l,e,t),h.signal),g=d.Answer.map(v=>v.data),m=Math.min(...d.Answer.map(v=>v.TTL));return this._cache.set(getCacheKey(e,t),g,{ttl:m}),g}catch{h.signal.aborted&&(c=!0),log$j.error(`${l} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter(d=>d!==h)}}throw c?Object.assign(new Error("queryA ECANCELLED"),{code:"ECANCELLED"}):new Error(`Could not resolve ${e} record ${t}`)}async resolve6(e){const t="AAAA",o=this._cache.get(getCacheKey(e,t));if(o!=null)return o;let c=!1;for(const l of this._getShuffledServers()){const h=new AbortController;this._abortControllers.push(h);try{const d=await this._request(buildResource(l,e,t),h.signal),g=d.Answer.map(v=>v.data),m=Math.min(...d.Answer.map(v=>v.TTL));return this._cache.set(getCacheKey(e,t),g,{ttl:m}),g}catch{h.signal.aborted&&(c=!0),log$j.error(`${l} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter(d=>d!==h)}}throw c?Object.assign(new Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"}):new Error(`Could not resolve ${e} record ${t}`)}async resolveTxt(e){const t="TXT",o=this._TXTcache.get(getCacheKey(e,t));if(o!=null)return o;let c=!1;for(const l of this._getShuffledServers()){const h=new AbortController;this._abortControllers.push(h);try{const d=await this._request(buildResource(l,e,t),h.signal),g=d.Answer.map(v=>[v.data.replace(/['"]+/g,"")]),m=Math.min(...d.Answer.map(v=>v.TTL));return this._TXTcache.set(getCacheKey(e,t),g,{ttl:m}),g}catch{h.signal.aborted&&(c=!0),log$j.error(`${l} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter(d=>d!==h)}}throw c?Object.assign(new Error("queryTxt ECANCELLED"),{code:"ECANCELLED"}):new Error(`Could not resolve ${e} record ${t}`)}clearCache(){this._cache.clear(),this._TXTcache.clear()}};const{code:dnsaddrCode}=getProtocol("dnsaddr");async function dnsaddrResolver(n,e={}){const t=new Resolver$1;e.signal!=null&&e.signal.addEventListener("abort",()=>{t.cancel()});const o=n.getPeerId(),[,c]=n.stringTuples().find(([d])=>d===dnsaddrCode)??[];if(c==null)throw new Error("No hostname found in multiaddr");let h=(await t.resolveTxt(`_dnsaddr.${c}`)).flat().map(d=>d.split("=")[1]).filter(Boolean);return o!=null&&(h=h.filter(d=>d.includes(o))),h}var messages;(function(n){n.NOT_STARTED_YET="The libp2p node is not started yet",n.DHT_DISABLED="DHT is not available",n.PUBSUB_DISABLED="PubSub is not available",n.CONN_ENCRYPTION_REQUIRED="At least one connection encryption module is required",n.ERR_TRANSPORTS_REQUIRED="At least one transport module is required",n.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",n.NOT_FOUND="Not found"})(messages||(messages={}));var codes;(function(n){n.DHT_DISABLED="ERR_DHT_DISABLED",n.ERR_PUBSUB_DISABLED="ERR_PUBSUB_DISABLED",n.PUBSUB_NOT_STARTED="ERR_PUBSUB_NOT_STARTED",n.DHT_NOT_STARTED="ERR_DHT_NOT_STARTED",n.CONN_ENCRYPTION_REQUIRED="ERR_CONN_ENCRYPTION_REQUIRED",n.ERR_TRANSPORTS_REQUIRED="ERR_TRANSPORTS_REQUIRED",n.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",n.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",n.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",n.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",n.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",n.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",n.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",n.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",n.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",n.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",n.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",n.ERR_DIALED_SELF="ERR_DIALED_SELF",n.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",n.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",n.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",n.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",n.ERR_INVALID_KEY="ERR_INVALID_KEY",n.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",n.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",n.ERR_INVALID_PEER="ERR_INVALID_PEER",n.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",n.ERR_NOT_FOUND="ERR_NOT_FOUND",n.ERR_TIMEOUT="ERR_TIMEOUT",n.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",n.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",n.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",n.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",n.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",n.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",n.ERR_FIND_SELF="ERR_FIND_SELF",n.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",n.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",n.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",n.ERR_KEYCHAIN_REQUIRED="ERR_KEYCHAIN_REQUIRED",n.ERR_INVALID_CMS="ERR_INVALID_CMS",n.ERR_MISSING_KEYS="ERR_MISSING_KEYS",n.ERR_NO_KEY="ERR_NO_KEY",n.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",n.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",n.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",n.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",n.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",n.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",n.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",n.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",n.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",n.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",n.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",n.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",n.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",n.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",n.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",n.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",n.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",n.ERR_INVALID_RECORD="ERR_INVALID_RECORD",n.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED",n.ERR_NO_HANDLER_FOR_PROTOCOL="ERR_NO_HANDLER_FOR_PROTOCOL",n.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",n.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",n.ERR_CONNECTION_DENIED="ERR_CONNECTION_DENIED",n.ERR_TRANSFER_LIMIT_EXCEEDED="ERR_TRANSFER_LIMIT_EXCEEDED"})(codes||(codes={}));const DefaultConfig={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:n=>n},connectionManager:{resolvers:{dnsaddr:dnsaddrResolver},addressSorter:defaultAddressSort},transportManager:{faultTolerance:FaultTolerance$2.FATAL_ALL}};function validateConfig(n){const e=mergeOptions$1(DefaultConfig,n);if(e.transports==null||e.transports.length<1)throw new CodeError$1(messages.ERR_TRANSPORTS_REQUIRED,codes.ERR_TRANSPORTS_REQUIRED);if(e.connectionProtector===null&&globalThis.process?.env?.LIBP2P_FORCE_PNET!=null)throw new CodeError$1(messages.ERR_PROTECTOR_REQUIRED,codes.ERR_PROTECTOR_REQUIRED);return e}const KEEP_ALIVE="keep-alive";var RateLimiterAbstract_1=class{constructor(e={}){this.points=e.points,this.duration=e.duration,this.blockDuration=e.blockDuration,this.execEvenly=e.execEvenly,this.execEvenlyMinDelayMs=e.execEvenlyMinDelayMs,this.keyPrefix=e.keyPrefix}get points(){return this._points}set points(e){this._points=e>=0?e:4}get duration(){return this._duration}set duration(e){this._duration=typeof e>"u"?1:e}get msDuration(){return this.duration*1e3}get blockDuration(){return this._blockDuration}set blockDuration(e){this._blockDuration=typeof e>"u"?0:e}get msBlockDuration(){return this.blockDuration*1e3}get execEvenly(){return this._execEvenly}set execEvenly(e){this._execEvenly=typeof e>"u"?!1:!!e}get execEvenlyMinDelayMs(){return this._execEvenlyMinDelayMs}set execEvenlyMinDelayMs(e){this._execEvenlyMinDelayMs=typeof e>"u"?Math.ceil(this.msDuration/this.points):e}get keyPrefix(){return this._keyPrefix}set keyPrefix(e){if(typeof e>"u"&&(e="rlflx"),typeof e!="string")throw new Error("keyPrefix must be string");this._keyPrefix=e}_getKeySecDuration(e={}){return e&&e.customDuration>=0?e.customDuration:this.duration}getKey(e){return this.keyPrefix.length>0?`${this.keyPrefix}:${e}`:e}parseKey(e){return e.substring(this.keyPrefix.length)}consume(){throw new Error("You have to implement the method 'consume'!")}penalty(){throw new Error("You have to implement the method 'penalty'!")}reward(){throw new Error("You have to implement the method 'reward'!")}get(){throw new Error("You have to implement the method 'get'!")}set(){throw new Error("You have to implement the method 'set'!")}block(){throw new Error("You have to implement the method 'block'!")}delete(){throw new Error("You have to implement the method 'delete'!")}},BlockedKeys_1$1=class{constructor(){this._keys={},this._addedKeysAmount=0}collectExpired(){const e=Date.now();Object.keys(this._keys).forEach(t=>{this._keys[t]<=e&&delete this._keys[t]}),this._addedKeysAmount=Object.keys(this._keys).length}add(e,t){this.addMs(e,t*1e3)}addMs(e,t){this._keys[e]=Date.now()+t,this._addedKeysAmount++,this._addedKeysAmount>999&&this.collectExpired()}msBeforeExpire(e){const t=this._keys[e];if(t&&t>=Date.now()){this.collectExpired();const o=Date.now();return t>=o?t-o:0}return 0}delete(e){e?delete this._keys[e]:Object.keys(this._keys).forEach(t=>{delete this._keys[t]})}};const BlockedKeys$1=BlockedKeys_1$1;var BlockedKeys_1=BlockedKeys$1,RateLimiterRes_1=class{constructor(e,t,o,c){this.remainingPoints=typeof e>"u"?0:e,this.msBeforeNext=typeof t>"u"?0:t,this.consumedPoints=typeof o>"u"?0:o,this.isFirstInDuration=typeof c>"u"?!1:c}get msBeforeNext(){return this._msBeforeNext}set msBeforeNext(e){return this._msBeforeNext=e,this}get remainingPoints(){return this._remainingPoints}set remainingPoints(e){return this._remainingPoints=e,this}get consumedPoints(){return this._consumedPoints}set consumedPoints(e){return this._consumedPoints=e,this}get isFirstInDuration(){return this._isFirstInDuration}set isFirstInDuration(e){this._isFirstInDuration=!!e}_getDecoratedProperties(){return{remainingPoints:this.remainingPoints,msBeforeNext:this.msBeforeNext,consumedPoints:this.consumedPoints,isFirstInDuration:this.isFirstInDuration}}[Symbol.for("nodejs.util.inspect.custom")](){return this._getDecoratedProperties()}toString(){return JSON.stringify(this._getDecoratedProperties())}toJSON(){return this._getDecoratedProperties()}};const RateLimiterAbstract$3=RateLimiterAbstract_1,BlockedKeys=BlockedKeys_1,RateLimiterRes$b=RateLimiterRes_1;var RateLimiterStoreAbstract_1=class extends RateLimiterAbstract$3{constructor(e={}){super(e),this.inMemoryBlockOnConsumed=e.inMemoryBlockOnConsumed,this.inMemoryBlockDuration=e.inMemoryBlockDuration,this.insuranceLimiter=e.insuranceLimiter,this._inMemoryBlockedKeys=new BlockedKeys}get client(){return this._client}set client(e){if(typeof e>"u")throw new Error("storeClient is not set");this._client=e}_afterConsume(e,t,o,c,l,h={}){const d=this._getRateLimiterRes(o,c,l);if(this.inMemoryBlockOnConsumed>0&&!(this.inMemoryBlockDuration>0)&&d.consumedPoints>=this.inMemoryBlockOnConsumed)return this._inMemoryBlockedKeys.addMs(o,d.msBeforeNext),d.consumedPoints>this.points?t(d):e(d);if(d.consumedPoints>this.points){let g=Promise.resolve();this.blockDuration>0&&d.consumedPoints<=this.points+c&&(d.msBeforeNext=this.msBlockDuration,g=this._block(o,d.consumedPoints,this.msBlockDuration,h)),this.inMemoryBlockOnConsumed>0&&d.consumedPoints>=this.inMemoryBlockOnConsumed&&(this._inMemoryBlockedKeys.add(o,this.inMemoryBlockDuration),d.msBeforeNext=this.msInMemoryBlockDuration),g.then(()=>{t(d)}).catch(m=>{t(m)})}else if(this.execEvenly&&d.msBeforeNext>0&&!d.isFirstInDuration){let g=Math.ceil(d.msBeforeNext/(d.remainingPoints+2));g<this.execEvenlyMinDelayMs&&(g=d.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(e,g,d)}else e(d)}_handleError(e,t,o,c,l,h=!1,d={}){this.insuranceLimiter instanceof RateLimiterAbstract$3?this.insuranceLimiter[t](l,h,d).then(g=>{o(g)}).catch(g=>{c(g)}):c(e)}getInMemoryBlockMsBeforeExpire(e){return this.inMemoryBlockOnConsumed>0?this._inMemoryBlockedKeys.msBeforeExpire(e):0}get inMemoryBlockOnConsumed(){return this._inMemoryBlockOnConsumed}set inMemoryBlockOnConsumed(e){if(this._inMemoryBlockOnConsumed=e?parseInt(e):0,this.inMemoryBlockOnConsumed>0&&this.points>this.inMemoryBlockOnConsumed)throw new Error('inMemoryBlockOnConsumed option must be greater or equal "points" option')}get inMemoryBlockDuration(){return this._inMemoryBlockDuration}set inMemoryBlockDuration(e){if(this._inMemoryBlockDuration=e?parseInt(e):0,this.inMemoryBlockDuration>0&&this.inMemoryBlockOnConsumed===0)throw new Error("inMemoryBlockOnConsumed option must be set up")}get msInMemoryBlockDuration(){return this._inMemoryBlockDuration*1e3}get insuranceLimiter(){return this._insuranceLimiter}set insuranceLimiter(e){if(typeof e<"u"&&!(e instanceof RateLimiterAbstract$3))throw new Error("insuranceLimiter must be instance of RateLimiterAbstract");this._insuranceLimiter=e,this._insuranceLimiter&&(this._insuranceLimiter.blockDuration=this.blockDuration,this._insuranceLimiter.execEvenly=this.execEvenly)}block(e,t,o={}){const c=t*1e3;return this._block(this.getKey(e),this.points+1,c,o)}set(e,t,o,c={}){const l=(o>=0?o:this.duration)*1e3;return this._block(this.getKey(e),t,l,c)}consume(e,t=1,o={}){return new Promise((c,l)=>{const h=this.getKey(e),d=this.getInMemoryBlockMsBeforeExpire(h);if(d>0)return l(new RateLimiterRes$b(0,d));this._upsert(h,t,this._getKeySecDuration(o)*1e3,!1,o).then(g=>{this._afterConsume(c,l,h,t,g)}).catch(g=>{this._handleError(g,"consume",c,l,e,t,o)})})}penalty(e,t=1,o={}){const c=this.getKey(e);return new Promise((l,h)=>{this._upsert(c,t,this._getKeySecDuration(o)*1e3,!1,o).then(d=>{l(this._getRateLimiterRes(c,t,d))}).catch(d=>{this._handleError(d,"penalty",l,h,e,t,o)})})}reward(e,t=1,o={}){const c=this.getKey(e);return new Promise((l,h)=>{this._upsert(c,-t,this._getKeySecDuration(o)*1e3,!1,o).then(d=>{l(this._getRateLimiterRes(c,-t,d))}).catch(d=>{this._handleError(d,"reward",l,h,e,t,o)})})}get(e,t={}){const o=this.getKey(e);return new Promise((c,l)=>{this._get(o,t).then(h=>{c(h===null||typeof h>"u"?null:this._getRateLimiterRes(o,0,h))}).catch(h=>{this._handleError(h,"get",c,l,e,t)})})}delete(e,t={}){const o=this.getKey(e);return new Promise((c,l)=>{this._delete(o,t).then(h=>{this._inMemoryBlockedKeys.delete(o),c(h)}).catch(h=>{this._handleError(h,"delete",c,l,e,t)})})}deleteInMemoryBlockedAll(){this._inMemoryBlockedKeys.delete()}_getRateLimiterRes(e,t,o){throw new Error("You have to implement the method '_getRateLimiterRes'!")}_block(e,t,o,c={}){return new Promise((l,h)=>{this._upsert(e,t,o,!0,c).then(()=>{l(new RateLimiterRes$b(0,o>0?o:-1,t))}).catch(d=>{this._handleError(d,"block",l,h,this.parseKey(e),o/1e3,c)})})}_get(e,t={}){throw new Error("You have to implement the method '_get'!")}_delete(e,t={}){throw new Error("You have to implement the method '_delete'!")}_upsert(e,t,o,c=!1,l={}){throw new Error("You have to implement the method '_upsert'!")}};const RateLimiterStoreAbstract$4=RateLimiterStoreAbstract_1,RateLimiterRes$a=RateLimiterRes_1,incrTtlLuaScript="redis.call('set', KEYS[1], 0, 'EX', ARGV[2], 'NX') local consumed = redis.call('incrby', KEYS[1], ARGV[1]) local ttl = redis.call('pttl', KEYS[1]) if ttl == -1 then   redis.call('expire', KEYS[1], ARGV[2])   ttl = 1000 * ARGV[2] end return {consumed, ttl} ";let RateLimiterRedis$1=class extends RateLimiterStoreAbstract$4{constructor(e){super(e),this.client=e.storeClient,this._rejectIfRedisNotReady=!!e.rejectIfRedisNotReady,this.useRedisPackage=e.useRedisPackage,this.useRedis3AndLowerPackage=e.useRedis3AndLowerPackage,typeof this.client.defineCommand=="function"&&this.client.defineCommand("rlflxIncr",{numberOfKeys:1,lua:incrTtlLuaScript})}_isRedisReady(){return this._rejectIfRedisNotReady?!(this.client.status&&this.client.status!=="ready"||typeof this.client.isReady=="function"&&!this.client.isReady()):!0}_getRateLimiterRes(e,t,o){let[c,l]=o;Array.isArray(c)&&([,c]=c,[,l]=l);const h=new RateLimiterRes$a;return h.consumedPoints=parseInt(c),h.isFirstInDuration=h.consumedPoints===t,h.remainingPoints=Math.max(this.points-h.consumedPoints,0),h.msBeforeNext=l,h}async _upsert(e,t,o,c=!1){if(!this._isRedisReady())throw new Error("Redis connection is not ready");const l=Math.floor(o/1e3),h=this.client.multi();return c?(l>0?!this.useRedisPackage&&!this.useRedis3AndLowerPackage?h.set(e,t,"EX",l):h.set(e,t,{EX:l}):h.set(e,t),!this.useRedisPackage&&!this.useRedis3AndLowerPackage?h.pttl(e).exec(!0):h.pTTL(e).exec(!0)):l>0?!this.useRedisPackage&&!this.useRedis3AndLowerPackage?this.client.rlflxIncr([e].concat([String(t),String(l)])):this.useRedis3AndLowerPackage?new Promise((d,g)=>{const m=function(v,_){return v?g(v):d(_)};typeof this.client.rlflxIncr=="function"?this.client.rlflxIncr(e,t,l,m):this.client.eval(incrTtlLuaScript,1,e,t,l,m)}):this.client.eval(incrTtlLuaScript,{keys:[e],arguments:[String(t),String(l)]}):!this.useRedisPackage&&!this.useRedis3AndLowerPackage?h.incrby(e,t).pttl(e).exec(!0):h.incrBy(e,t).pTTL(e).exec(!0)}async _get(e){if(!this._isRedisReady())throw new Error("Redis connection is not ready");return!this.useRedisPackage&&!this.useRedis3AndLowerPackage?this.client.multi().get(e).pttl(e).exec().then(t=>{const[[,o]]=t;return o===null?null:t}):this.client.multi().get(e).pTTL(e).exec(!0).then(t=>{const[o]=t;return o===null?null:t})}_delete(e){return this.client.del(e).then(t=>t>0)}};var RateLimiterRedis_1=RateLimiterRedis$1;const RateLimiterStoreAbstract$3=RateLimiterStoreAbstract_1,RateLimiterRes$9=RateLimiterRes_1;function getDriverVersion(n){try{const e=n.client?n.client:n,{version:t}=e.topology.s.options.metadata.driver,o=t.split(".").map(c=>parseInt(c));return{major:o[0],feature:o[1],patch:o[2]}}catch{return{major:0,feature:0,patch:0}}}let RateLimiterMongo$1=class Or extends RateLimiterStoreAbstract$3{constructor(e){super(e),this.dbName=e.dbName,this.tableName=e.tableName,this.indexKeyPrefix=e.indexKeyPrefix,e.mongo?this.client=e.mongo:this.client=e.storeClient,typeof this.client.then=="function"?this.client.then(t=>{this.client=t,this._initCollection(),this._driverVersion=getDriverVersion(this.client)}):(this._initCollection(),this._driverVersion=getDriverVersion(this.client))}get dbName(){return this._dbName}set dbName(e){this._dbName=typeof e>"u"?Or.getDbName():e}static getDbName(){return"node-rate-limiter-flexible"}get tableName(){return this._tableName}set tableName(e){this._tableName=typeof e>"u"?this.keyPrefix:e}get client(){return this._client}set client(e){if(typeof e>"u")throw new Error("mongo is not set");this._client=e}get indexKeyPrefix(){return this._indexKeyPrefix}set indexKeyPrefix(e){this._indexKeyPrefix=e||{}}_initCollection(){const t=(typeof this.client.db=="function"?this.client.db(this.dbName):this.client).collection(this.tableName);t.createIndex({expire:-1},{expireAfterSeconds:0}),t.createIndex(Object.assign({},this.indexKeyPrefix,{key:1}),{unique:!0}),this._collection=t}_getRateLimiterRes(e,t,o){const c=new RateLimiterRes$9;let l;return typeof o.value>"u"?l=o:l=o.value,c.isFirstInDuration=l.points===t,c.consumedPoints=l.points,c.remainingPoints=Math.max(this.points-c.consumedPoints,0),c.msBeforeNext=l.expire!==null?Math.max(new Date(l.expire).getTime()-Date.now(),0):-1,c}_upsert(e,t,o,c=!1,l={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const h=l.attrs||{};let d,g;c?(d={key:e},d=Object.assign(d,h),g={$set:{key:e,points:t,expire:o>0?new Date(Date.now()+o):null}},g.$set=Object.assign(g.$set,h)):(d={$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}],key:e},d=Object.assign(d,h),g={$setOnInsert:{key:e,expire:o>0?new Date(Date.now()+o):null},$inc:{points:t}},g.$setOnInsert=Object.assign(g.$setOnInsert,h));const m={upsert:!0};return this._driverVersion.major>=4||this._driverVersion.major===3&&this._driverVersion.feature>=7||this._driverVersion.feature>=6&&this._driverVersion.patch>=7?m.returnDocument="after":m.returnOriginal=!1,new Promise((v,_)=>{this._collection.findOneAndUpdate(d,g,m).then(p=>{v(p)}).catch(p=>{if(p&&p.code===11e3){const a=Object.assign({$or:[{expire:{$lte:new Date}},{expire:{$eq:null}}],key:e},h),u={$set:Object.assign({key:e,points:t,expire:o>0?new Date(Date.now()+o):null},h)};this._collection.findOneAndUpdate(a,u,m).then(y=>{v(y)}).catch(y=>{y&&y.code===11e3?this._upsert(e,t,o,c).then(b=>v(b)).catch(b=>_(b)):_(y)})}else _(p)})})}_get(e,t={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const o=t.attrs||{},c=Object.assign({key:e,$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}]},o);return this._collection.findOne(c)}_delete(e,t={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const o=t.attrs||{},c=Object.assign({key:e},o);return this._collection.deleteOne(c).then(l=>l.deletedCount>0)}};var RateLimiterMongo_1=RateLimiterMongo$1;const RateLimiterStoreAbstract$2=RateLimiterStoreAbstract_1,RateLimiterRes$8=RateLimiterRes_1;let RateLimiterMySQL$1=class extends RateLimiterStoreAbstract$2{constructor(e,t=null){super(e),this.client=e.storeClient,this.clientType=e.storeType,this.dbName=e.dbName,this.tableName=e.tableName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?(this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),typeof t=="function"&&t()):this._createDbAndTable().then(()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),typeof t=="function"&&t()}).catch(o=>{if(typeof t=="function")t(o);else throw o})}clearExpired(e){return new Promise(t=>{this._getConnection().then(o=>{o.query("DELETE FROM ??.?? WHERE expire < ?",[this.dbName,this.tableName,e],()=>{this._releaseConnection(o),t()})}).catch(()=>{t()})})}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout(()=>{this.clearExpired(Date.now()-36e5).then(()=>{this._clearExpiredHourAgo()})},3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return new Promise((e,t)=>{this.client.getConnection((o,c)=>{if(o)return t(o);e(c)})});case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();default:return Promise.resolve(this.client)}}_releaseConnection(e){switch(this.clientType){case"pool":return e.release();case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);default:return!0}}_createDbAndTable(){return new Promise((e,t)=>{this._getConnection().then(o=>{o.query(`CREATE DATABASE IF NOT EXISTS \`${this.dbName}\`;`,c=>{if(c)return this._releaseConnection(o),t(c);o.query(this._getCreateTableStmt(),l=>{if(l)return this._releaseConnection(o),t(l);this._releaseConnection(o),e()})})}).catch(o=>{t(o)})})}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS \`${this.dbName}\`.\`${this.tableName}\` (\`key\` VARCHAR(255) CHARACTER SET utf8 NOT NULL,\`points\` INT(9) NOT NULL default 0,\`expire\` BIGINT UNSIGNED,PRIMARY KEY (\`key\`)) ENGINE = INNODB;`}get clientType(){return this._clientType}set clientType(e){if(typeof e>"u")if(this.client.constructor.name==="Connection")e="connection";else if(this.client.constructor.name==="Pool")e="pool";else if(this.client.constructor.name==="Sequelize")e="sequelize";else throw new Error("storeType is not defined");this._clientType=e.toLowerCase()}get dbName(){return this._dbName}set dbName(e){this._dbName=typeof e>"u"?"rtlmtrflx":e}get tableName(){return this._tableName}set tableName(e){this._tableName=typeof e>"u"?this.keyPrefix:e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated=typeof e>"u"?!1:!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout=typeof e>"u"?!0:!!e}_getRateLimiterRes(e,t,o){const c=new RateLimiterRes$8,[l]=o;return c.isFirstInDuration=t===l.points,c.consumedPoints=c.isFirstInDuration?t:l.points,c.remainingPoints=Math.max(this.points-c.consumedPoints,0),c.msBeforeNext=l.expire?Math.max(l.expire-Date.now(),0):-1,c}_upsertTransaction(e,t,o,c,l){return new Promise((h,d)=>{e.query("BEGIN",g=>{if(g)return e.rollback(),d(g);const m=Date.now(),v=c>0?m+c:null;let _,p;l?(_=`INSERT INTO ??.?? VALUES (?, ?, ?)
          ON DUPLICATE KEY UPDATE 
            points = ?, 
            expire = ?;`,p=[this.dbName,this.tableName,t,o,v,o,v]):(_=`INSERT INTO ??.?? VALUES (?, ?, ?)
          ON DUPLICATE KEY UPDATE 
            points = IF(expire <= ?, ?, points + (?)), 
            expire = IF(expire <= ?, ?, expire);`,p=[this.dbName,this.tableName,t,o,v,m,o,o,m,v]),e.query(_,p,a=>{if(a)return e.rollback(),d(a);e.query("SELECT points, expire FROM ??.?? WHERE `key` = ?;",[this.dbName,this.tableName,t],(u,y)=>{if(u)return e.rollback(),d(u);e.query("COMMIT",b=>{if(b)return e.rollback(),d(b);h(y)})})})})})}_upsert(e,t,o,c=!1){return this.tableCreated?new Promise((l,h)=>{this._getConnection().then(d=>{this._upsertTransaction(d,e,t,o,c).then(g=>{l(g),this._releaseConnection(d)}).catch(g=>{h(g),this._releaseConnection(d)})}).catch(d=>{h(d)})}):Promise.reject(Error("Table is not created yet"))}_get(e){return this.tableCreated?new Promise((t,o)=>{this._getConnection().then(c=>{c.query("SELECT points, expire FROM ??.?? WHERE `key` = ? AND (`expire` > ? OR `expire` IS NULL)",[this.dbName,this.tableName,e,Date.now()],(l,h)=>{l?o(l):h.length===0?t(null):t(h),this._releaseConnection(c)})}).catch(c=>{o(c)})}):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?new Promise((t,o)=>{this._getConnection().then(c=>{c.query("DELETE FROM ??.?? WHERE `key` = ?",[this.dbName,this.tableName,e],(l,h)=>{l?o(l):t(h.affectedRows>0),this._releaseConnection(c)})}).catch(c=>{o(c)})}):Promise.reject(Error("Table is not created yet"))}};var RateLimiterMySQL_1=RateLimiterMySQL$1;const RateLimiterStoreAbstract$1=RateLimiterStoreAbstract_1,RateLimiterRes$7=RateLimiterRes_1;let RateLimiterPostgres$1=class extends RateLimiterStoreAbstract$1{constructor(e,t=null){super(e),this.client=e.storeClient,this.clientType=e.storeType,this.tableName=e.tableName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?typeof t=="function"&&t():this._createTable().then(()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),typeof t=="function"&&t()}).catch(o=>{if(typeof t=="function")t(o);else throw o})}clearExpired(e){return new Promise(t=>{const o={name:"rlflx-clear-expired",text:`DELETE FROM ${this.tableName} WHERE expire < $1`,values:[e]};this._query(o).then(()=>{t()}).catch(()=>{t()})})}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout(()=>{this.clearExpired(Date.now()-36e5).then(()=>{this._clearExpiredHourAgo()})},3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return Promise.resolve(this.client);case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();case"typeorm":return Promise.resolve(this.client.driver.master);default:return Promise.resolve(this.client)}}_releaseConnection(e){switch(this.clientType){case"pool":return!0;case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);case"typeorm":return!0;default:return!0}}_createTable(){return new Promise((e,t)=>{this._query({text:this._getCreateTableStmt()}).then(()=>{e()}).catch(o=>{o.code==="23505"?e():t(o)})})}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS ${this.tableName} ( 
      key varchar(255) PRIMARY KEY,
      points integer NOT NULL DEFAULT 0,
      expire bigint
    );`}get clientType(){return this._clientType}set clientType(e){const t=this.client.constructor.name;if(typeof e>"u")if(t==="Client")e="client";else if(t==="Pool"||t==="BoundPool")e="pool";else if(t==="Sequelize")e="sequelize";else throw new Error("storeType is not defined");this._clientType=e.toLowerCase()}get tableName(){return this._tableName}set tableName(e){this._tableName=typeof e>"u"?this.keyPrefix:e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated=typeof e>"u"?!1:!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout=typeof e>"u"?!0:!!e}_getRateLimiterRes(e,t,o){const c=new RateLimiterRes$7,l=o.rows[0];return c.isFirstInDuration=t===l.points,c.consumedPoints=c.isFirstInDuration?t:l.points,c.remainingPoints=Math.max(this.points-c.consumedPoints,0),c.msBeforeNext=l.expire?Math.max(l.expire-Date.now(),0):-1,c}_query(e){const o={name:`${this.tableName.toLowerCase()}:${e.name}`,text:e.text,values:e.values};return new Promise((c,l)=>{this._getConnection().then(h=>{h.query(o).then(d=>{c(d),this._releaseConnection(h)}).catch(d=>{l(d),this._releaseConnection(h)})}).catch(h=>{l(h)})})}_upsert(e,t,o,c=!1){if(!this.tableCreated)return Promise.reject(Error("Table is not created yet"));const l=o>0?Date.now()+o:null,h=c?" $3 ":` CASE
             WHEN ${this.tableName}.expire <= $4 THEN $3
             ELSE ${this.tableName}.expire
            END `;return this._query({name:c?"rlflx-upsert-force":"rlflx-upsert",text:`
            INSERT INTO ${this.tableName} VALUES ($1, $2, $3)
              ON CONFLICT(key) DO UPDATE SET
                points = CASE
                          WHEN (${this.tableName}.expire <= $4 OR 1=${c?1:0}) THEN $2
                          ELSE ${this.tableName}.points + ($2)
                         END,
                expire = ${h}
            RETURNING points, expire;`,values:[e,t,l,Date.now()]})}_get(e){return this.tableCreated?new Promise((t,o)=>{this._query({name:"rlflx-get",text:`
            SELECT points, expire FROM ${this.tableName} WHERE key = $1 AND (expire > $2 OR expire IS NULL);`,values:[e,Date.now()]}).then(c=>{c.rowCount===0&&(c=null),t(c)}).catch(c=>{o(c)})}):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?this._query({name:"rlflx-delete",text:`DELETE FROM ${this.tableName} WHERE key = $1`,values:[e]}).then(t=>t.rowCount>0):Promise.reject(Error("Table is not created yet"))}};var RateLimiterPostgres_1=RateLimiterPostgres$1,Record_1=class{constructor(e,t,o=null){this.value=e,this.expiresAt=t,this.timeoutId=o}get value(){return this._value}set value(e){this._value=parseInt(e)}get expiresAt(){return this._expiresAt}set expiresAt(e){!(e instanceof Date)&&Number.isInteger(e)&&(e=new Date(e)),this._expiresAt=e}get timeoutId(){return this._timeoutId}set timeoutId(e){this._timeoutId=e}};const Record=Record_1,RateLimiterRes$6=RateLimiterRes_1;var MemoryStorage_1=class{constructor(){this._storage={}}incrby(e,t,o){if(this._storage[e]){const c=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-new Date().getTime():-1;return c!==0?(this._storage[e].value=this._storage[e].value+t,new RateLimiterRes$6(0,c,this._storage[e].value,!1)):this.set(e,t,o)}return this.set(e,t,o)}set(e,t,o){const c=o*1e3;return this._storage[e]&&this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),this._storage[e]=new Record(t,c>0?new Date(Date.now()+c):null),c>0&&(this._storage[e].timeoutId=setTimeout(()=>{delete this._storage[e]},c),this._storage[e].timeoutId.unref&&this._storage[e].timeoutId.unref()),new RateLimiterRes$6(0,c===0?-1:c,this._storage[e].value,!0)}get(e){if(this._storage[e]){const t=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-new Date().getTime():-1;return new RateLimiterRes$6(0,t,this._storage[e].value,!1)}return null}delete(e){return this._storage[e]?(this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),delete this._storage[e],!0):!1}};const RateLimiterAbstract$2=RateLimiterAbstract_1,MemoryStorage=MemoryStorage_1,RateLimiterRes$5=RateLimiterRes_1;let RateLimiterMemory$2=class extends RateLimiterAbstract$2{constructor(e={}){super(e),this._memoryStorage=new MemoryStorage}consume(e,t=1,o={}){return new Promise((c,l)=>{const h=this.getKey(e),d=this._getKeySecDuration(o);let g=this._memoryStorage.incrby(h,t,d);if(g.remainingPoints=Math.max(this.points-g.consumedPoints,0),g.consumedPoints>this.points)this.blockDuration>0&&g.consumedPoints<=this.points+t&&(g=this._memoryStorage.set(h,g.consumedPoints,this.blockDuration)),l(g);else if(this.execEvenly&&g.msBeforeNext>0&&!g.isFirstInDuration){let m=Math.ceil(g.msBeforeNext/(g.remainingPoints+2));m<this.execEvenlyMinDelayMs&&(m=g.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(c,m,g)}else c(g)})}penalty(e,t=1,o={}){const c=this.getKey(e);return new Promise(l=>{const h=this._getKeySecDuration(o),d=this._memoryStorage.incrby(c,t,h);d.remainingPoints=Math.max(this.points-d.consumedPoints,0),l(d)})}reward(e,t=1,o={}){const c=this.getKey(e);return new Promise(l=>{const h=this._getKeySecDuration(o),d=this._memoryStorage.incrby(c,-t,h);d.remainingPoints=Math.max(this.points-d.consumedPoints,0),l(d)})}block(e,t){const o=t*1e3,c=this.points+1;return this._memoryStorage.set(this.getKey(e),c,t),Promise.resolve(new RateLimiterRes$5(0,o===0?-1:o,c))}set(e,t,o){const c=(o>=0?o:this.duration)*1e3;return this._memoryStorage.set(this.getKey(e),t,o),Promise.resolve(new RateLimiterRes$5(0,c===0?-1:c,t))}get(e){const t=this._memoryStorage.get(this.getKey(e));return t!==null&&(t.remainingPoints=Math.max(this.points-t.consumedPoints,0)),Promise.resolve(t)}delete(e){return Promise.resolve(this._memoryStorage.delete(this.getKey(e)))}};var RateLimiterMemory_1=RateLimiterMemory$2;const cluster=require$$0$1,crypto$3=require$$0$1,RateLimiterAbstract$1=RateLimiterAbstract_1,RateLimiterMemory$1=RateLimiterMemory_1,RateLimiterRes$4=RateLimiterRes_1,channel="rate_limiter_flexible";let masterInstance=null;const masterSendToWorker=function(n,e,t,o){let c;o===null||o===!0||o===!1?c=o:c={remainingPoints:o.remainingPoints,msBeforeNext:o.msBeforeNext,consumedPoints:o.consumedPoints,isFirstInDuration:o.isFirstInDuration},n.send({channel,keyPrefix:e.keyPrefix,promiseId:e.promiseId,type:t,data:c})},workerWaitInit=function(n){setTimeout(()=>{this._initiated?process.send(n):typeof this._promises[n.promiseId]<"u"&&workerWaitInit.call(this,n)},30)},workerSendToMaster=function(n,e,t,o,c){const l={channel,keyPrefix:this.keyPrefix,func:n,promiseId:e,data:{key:t,arg:o,opts:c}};this._initiated?process.send(l):workerWaitInit.call(this,l)},masterProcessMsg=function(n,e){if(!e||e.channel!==channel||typeof this._rateLimiters[e.keyPrefix]>"u")return!1;let t;switch(e.func){case"consume":t=this._rateLimiters[e.keyPrefix].consume(e.data.key,e.data.arg,e.data.opts);break;case"penalty":t=this._rateLimiters[e.keyPrefix].penalty(e.data.key,e.data.arg,e.data.opts);break;case"reward":t=this._rateLimiters[e.keyPrefix].reward(e.data.key,e.data.arg,e.data.opts);break;case"block":t=this._rateLimiters[e.keyPrefix].block(e.data.key,e.data.arg,e.data.opts);break;case"get":t=this._rateLimiters[e.keyPrefix].get(e.data.key,e.data.opts);break;case"delete":t=this._rateLimiters[e.keyPrefix].delete(e.data.key,e.data.opts);break;default:return!1}t&&t.then(o=>{masterSendToWorker(n,e,"resolve",o)}).catch(o=>{masterSendToWorker(n,e,"reject",o)})},workerProcessMsg=function(n){if(!n||n.channel!==channel||n.keyPrefix!==this.keyPrefix)return!1;if(this._promises[n.promiseId]){clearTimeout(this._promises[n.promiseId].timeoutId);let e;switch(n.data===null||n.data===!0||n.data===!1?e=n.data:e=new RateLimiterRes$4(n.data.remainingPoints,n.data.msBeforeNext,n.data.consumedPoints,n.data.isFirstInDuration),n.type){case"resolve":this._promises[n.promiseId].resolve(e);break;case"reject":this._promises[n.promiseId].reject(e);break;default:throw new Error(`RateLimiterCluster: no such message type '${n.type}'`)}delete this._promises[n.promiseId]}},getOpts=function(){return{points:this.points,duration:this.duration,blockDuration:this.blockDuration,execEvenly:this.execEvenly,execEvenlyMinDelayMs:this.execEvenlyMinDelayMs,keyPrefix:this.keyPrefix}},savePromise=function(n,e){const t=process.hrtime();let o=t[0].toString()+t[1].toString();return typeof this._promises[o]<"u"&&(o+=crypto$3.randomBytes(12).toString("base64")),this._promises[o]={resolve:n,reject:e,timeoutId:setTimeout(()=>{delete this._promises[o],e(new Error("RateLimiterCluster timeout: no answer from master in time"))},this.timeoutMs)},o};let RateLimiterClusterMaster$1=class{constructor(){if(masterInstance)return masterInstance;this._rateLimiters={},cluster.setMaxListeners(0),cluster.on("message",(e,t)=>{t&&t.channel===channel&&t.type==="init"?(typeof this._rateLimiters[t.opts.keyPrefix]>"u"&&(this._rateLimiters[t.opts.keyPrefix]=new RateLimiterMemory$1(t.opts)),e.send({channel,type:"init",keyPrefix:t.opts.keyPrefix})):masterProcessMsg.call(this,e,t)}),masterInstance=this}},RateLimiterClusterMasterPM2$1=class{constructor(e){if(masterInstance)return masterInstance;this._rateLimiters={},e.launchBus((t,o)=>{o.on("process:msg",c=>{const l=c.raw;if(l&&l.channel===channel&&l.type==="init")typeof this._rateLimiters[l.opts.keyPrefix]>"u"&&(this._rateLimiters[l.opts.keyPrefix]=new RateLimiterMemory$1(l.opts)),e.sendDataToProcessId(c.process.pm_id,{data:{},topic:channel,channel,type:"init",keyPrefix:l.opts.keyPrefix},(h,d)=>{h&&console.log(h,d)});else{const h={send:d=>{const g=d;g.topic=channel,typeof g.data>"u"&&(g.data={}),e.sendDataToProcessId(c.process.pm_id,g,(m,v)=>{m&&console.log(m,v)})}};masterProcessMsg.call(this,h,l)}})}),masterInstance=this}};class RateLimiterClusterWorker extends RateLimiterAbstract$1{get timeoutMs(){return this._timeoutMs}set timeoutMs(e){this._timeoutMs=typeof e>"u"?5e3:Math.abs(parseInt(e))}constructor(e={}){super(e),process.setMaxListeners(0),this.timeoutMs=e.timeoutMs,this._initiated=!1,process.on("message",t=>{t&&t.channel===channel&&t.type==="init"&&t.keyPrefix===this.keyPrefix?this._initiated=!0:workerProcessMsg.call(this,t)}),process.send({channel,type:"init",opts:getOpts.call(this)}),this._promises={}}consume(e,t=1,o={}){return new Promise((c,l)=>{const h=savePromise.call(this,c,l);workerSendToMaster.call(this,"consume",h,e,t,o)})}penalty(e,t=1,o={}){return new Promise((c,l)=>{const h=savePromise.call(this,c,l);workerSendToMaster.call(this,"penalty",h,e,t,o)})}reward(e,t=1,o={}){return new Promise((c,l)=>{const h=savePromise.call(this,c,l);workerSendToMaster.call(this,"reward",h,e,t,o)})}block(e,t,o={}){return new Promise((c,l)=>{const h=savePromise.call(this,c,l);workerSendToMaster.call(this,"block",h,e,t,o)})}get(e,t={}){return new Promise((o,c)=>{const l=savePromise.call(this,o,c);workerSendToMaster.call(this,"get",l,e,t)})}delete(e,t={}){return new Promise((o,c)=>{const l=savePromise.call(this,o,c);workerSendToMaster.call(this,"delete",l,e,t)})}}var RateLimiterCluster$1={RateLimiterClusterMaster:RateLimiterClusterMaster$1,RateLimiterClusterMasterPM2:RateLimiterClusterMasterPM2$1,RateLimiterCluster:RateLimiterClusterWorker};const RateLimiterStoreAbstract=RateLimiterStoreAbstract_1,RateLimiterRes$3=RateLimiterRes_1;let RateLimiterMemcache$1=class extends RateLimiterStoreAbstract{constructor(e){super(e),this.client=e.storeClient}_getRateLimiterRes(e,t,o){const c=new RateLimiterRes$3;return c.consumedPoints=parseInt(o.consumedPoints),c.isFirstInDuration=o.consumedPoints===t,c.remainingPoints=Math.max(this.points-c.consumedPoints,0),c.msBeforeNext=o.msBeforeNext,c}_upsert(e,t,o,c=!1,l={}){return new Promise((h,d)=>{const g=Date.now(),m=Math.floor(o/1e3);c?this.client.set(e,t,m,v=>{v?d(v):this.client.set(`${e}_expire`,m>0?g+m*1e3:-1,m,()=>{const _={consumedPoints:t,msBeforeNext:m>0?m*1e3:-1};h(_)})}):this.client.incr(e,t,(v,_)=>{v||_===!1?this.client.add(e,t,m,(p,a)=>{if(p||!a)if(typeof l.attemptNumber>"u"||l.attemptNumber<3){const u=Object.assign({},l);u.attemptNumber=u.attemptNumber?u.attemptNumber+1:1,this._upsert(e,t,o,c,u).then(y=>h(y)).catch(y=>d(y))}else d(new Error("Can not add key"));else this.client.add(`${e}_expire`,m>0?g+m*1e3:-1,m,()=>{const u={consumedPoints:t,msBeforeNext:m>0?m*1e3:-1};h(u)})}):this.client.get(`${e}_expire`,(p,a)=>{if(p)d(p);else{const u=a===!1?0:a,y={consumedPoints:_,msBeforeNext:u>=0?Math.max(u-g,0):-1};h(y)}})})})}_get(e){return new Promise((t,o)=>{const c=Date.now();this.client.get(e,(l,h)=>{h?this.client.get(`${e}_expire`,(d,g)=>{if(d)o(d);else{const m=g===!1?0:g,v={consumedPoints:h,msBeforeNext:m>=0?Math.max(m-c,0):-1};t(v)}}):t(null)})})}_delete(e){return new Promise((t,o)=>{this.client.del(e,(c,l)=>{c?o(c):l===!1?t(l):this.client.del(`${e}_expire`,h=>{h?o(h):t(l)})})})}};var RateLimiterMemcache_1=RateLimiterMemcache$1;const RateLimiterRes$2=RateLimiterRes_1;var RLWrapperBlackAndWhite_1=class{constructor(e={}){this.limiter=e.limiter,this.blackList=e.blackList,this.whiteList=e.whiteList,this.isBlackListed=e.isBlackListed,this.isWhiteListed=e.isWhiteListed,this.runActionAnyway=e.runActionAnyway}get limiter(){return this._limiter}set limiter(e){if(typeof e>"u")throw new Error("limiter is not set");this._limiter=e}get runActionAnyway(){return this._runActionAnyway}set runActionAnyway(e){this._runActionAnyway=typeof e>"u"?!1:e}get blackList(){return this._blackList}set blackList(e){this._blackList=Array.isArray(e)?e:[]}get isBlackListed(){return this._isBlackListed}set isBlackListed(e){if(typeof e>"u"&&(e=()=>!1),typeof e!="function")throw new Error("isBlackListed must be function");this._isBlackListed=e}get whiteList(){return this._whiteList}set whiteList(e){this._whiteList=Array.isArray(e)?e:[]}get isWhiteListed(){return this._isWhiteListed}set isWhiteListed(e){if(typeof e>"u"&&(e=()=>!1),typeof e!="function")throw new Error("isWhiteListed must be function");this._isWhiteListed=e}isBlackListedSomewhere(e){return this.blackList.indexOf(e)>=0||this.isBlackListed(e)}isWhiteListedSomewhere(e){return this.whiteList.indexOf(e)>=0||this.isWhiteListed(e)}getBlackRes(){return new RateLimiterRes$2(0,Number.MAX_SAFE_INTEGER,0,!1)}getWhiteRes(){return new RateLimiterRes$2(Number.MAX_SAFE_INTEGER,0,0,!1)}rejectBlack(){return Promise.reject(this.getBlackRes())}resolveBlack(){return Promise.resolve(this.getBlackRes())}resolveWhite(){return Promise.resolve(this.getWhiteRes())}consume(e,t=1){let o;return this.isWhiteListedSomewhere(e)?o=this.resolveWhite():this.isBlackListedSomewhere(e)&&(o=this.rejectBlack()),typeof o>"u"?this.limiter.consume(e,t):(this.runActionAnyway&&this.limiter.consume(e,t).catch(()=>{}),o)}block(e,t){let o;return this.isWhiteListedSomewhere(e)?o=this.resolveWhite():this.isBlackListedSomewhere(e)&&(o=this.resolveBlack()),typeof o>"u"?this.limiter.block(e,t):(this.runActionAnyway&&this.limiter.block(e,t).catch(()=>{}),o)}penalty(e,t){let o;return this.isWhiteListedSomewhere(e)?o=this.resolveWhite():this.isBlackListedSomewhere(e)&&(o=this.resolveBlack()),typeof o>"u"?this.limiter.penalty(e,t):(this.runActionAnyway&&this.limiter.penalty(e,t).catch(()=>{}),o)}reward(e,t){let o;return this.isWhiteListedSomewhere(e)?o=this.resolveWhite():this.isBlackListedSomewhere(e)&&(o=this.resolveBlack()),typeof o>"u"?this.limiter.reward(e,t):(this.runActionAnyway&&this.limiter.reward(e,t).catch(()=>{}),o)}get(e){let t;return this.isWhiteListedSomewhere(e)?t=this.resolveWhite():this.isBlackListedSomewhere(e)&&(t=this.resolveBlack()),typeof t>"u"||this.runActionAnyway?this.limiter.get(e):t}delete(e){return this.limiter.delete(e)}};const RateLimiterAbstract=RateLimiterAbstract_1;var RateLimiterUnion_1=class{constructor(...e){if(e.length<1)throw new Error("RateLimiterUnion: at least one limiter have to be passed");e.forEach(t=>{if(!(t instanceof RateLimiterAbstract))throw new Error("RateLimiterUnion: all limiters have to be instance of RateLimiterAbstract")}),this._limiters=e}consume(e,t=1){return new Promise((o,c)=>{const l=[];this._limiters.forEach(h=>{l.push(h.consume(e,t).catch(d=>({rejected:!0,rej:d})))}),Promise.all(l).then(h=>{const d={};let g=!1;h.forEach(m=>{m.rejected===!0&&(g=!0)});for(let m=0;m<h.length;m++)g&&h[m].rejected===!0?d[this._limiters[m].keyPrefix]=h[m].rej:g||(d[this._limiters[m].keyPrefix]=h[m]);g?c(d):o(d)})})}},RateLimiterQueueError_1=class extends Error{constructor(e,t){super(),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="CustomError",this.message=e,t&&(this.extra=t)}};const RateLimiterQueueError=RateLimiterQueueError_1,MAX_QUEUE_SIZE=4294967295,KEY_DEFAULT="limiter";var RateLimiterQueue_1=class{constructor(e,t={maxQueueSize:MAX_QUEUE_SIZE}){this._queueLimiters={KEY_DEFAULT:new RateLimiterQueueInternal(e,t)},this._limiterFlexible=e,this._maxQueueSize=t.maxQueueSize}getTokensRemaining(e=KEY_DEFAULT){return this._queueLimiters[e]?this._queueLimiters[e].getTokensRemaining():Promise.resolve(this._limiterFlexible.points)}removeTokens(e,t=KEY_DEFAULT){return this._queueLimiters[t]||(this._queueLimiters[t]=new RateLimiterQueueInternal(this._limiterFlexible,{key:t,maxQueueSize:this._maxQueueSize})),this._queueLimiters[t].removeTokens(e)}};class RateLimiterQueueInternal{constructor(e,t={maxQueueSize:MAX_QUEUE_SIZE,key:KEY_DEFAULT}){this._key=t.key,this._waitTimeout=null,this._queue=[],this._limiterFlexible=e,this._maxQueueSize=t.maxQueueSize}getTokensRemaining(){return this._limiterFlexible.get(this._key).then(e=>e!==null?e.remainingPoints:this._limiterFlexible.points)}removeTokens(e){const t=this;return new Promise((o,c)=>{if(e>t._limiterFlexible.points){c(new RateLimiterQueueError(`Requested tokens ${e} exceeds maximum ${t._limiterFlexible.points} tokens per interval`));return}t._queue.length>0?t._queueRequest.call(t,o,c,e):t._limiterFlexible.consume(t._key,e).then(l=>{o(l.remainingPoints)}).catch(l=>{l instanceof Error?c(l):(t._queueRequest.call(t,o,c,e),t._waitTimeout===null&&(t._waitTimeout=setTimeout(t._processFIFO.bind(t),l.msBeforeNext)))})})}_queueRequest(e,t,o){const c=this;c._queue.length<c._maxQueueSize?c._queue.push({resolve:e,reject:t,tokens:o}):t(new RateLimiterQueueError(`Number of requests reached it's maximum ${c._maxQueueSize}`))}_processFIFO(){const e=this;if(e._waitTimeout!==null&&(clearTimeout(e._waitTimeout),e._waitTimeout=null),e._queue.length===0)return;const t=e._queue.shift();e._limiterFlexible.consume(e._key,t.tokens).then(o=>{t.resolve(o.remainingPoints),e._processFIFO.call(e)}).catch(o=>{o instanceof Error?(t.reject(o),e._processFIFO.call(e)):(e._queue.unshift(t),e._waitTimeout===null&&(e._waitTimeout=setTimeout(e._processFIFO.bind(e),o.msBeforeNext)))})}}const RateLimiterRes$1=RateLimiterRes_1;var BurstyRateLimiter_1=class{constructor(e,t){this._rateLimiter=e,this._burstLimiter=t}_combineRes(e,t){return e?new RateLimiterRes$1(e.remainingPoints,Math.min(e.msBeforeNext,t?t.msBeforeNext:0),e.consumedPoints,e.isFirstInDuration):null}consume(e,t=1,o={}){return this._rateLimiter.consume(e,t,o).catch(c=>c instanceof RateLimiterRes$1?this._burstLimiter.consume(e,t,o).then(l=>Promise.resolve(this._combineRes(c,l))).catch(l=>l instanceof RateLimiterRes$1?Promise.reject(this._combineRes(c,l)):Promise.reject(l)):Promise.reject(c))}get(e){return Promise.all([this._rateLimiter.get(e),this._burstLimiter.get(e)]).then(([t,o])=>this._combineRes(t,o))}get points(){return this._rateLimiter.points}};const RateLimiterRedis=RateLimiterRedis_1,RateLimiterMongo=RateLimiterMongo_1,RateLimiterMySQL=RateLimiterMySQL_1,RateLimiterPostgres=RateLimiterPostgres_1,{RateLimiterClusterMaster,RateLimiterClusterMasterPM2,RateLimiterCluster}=RateLimiterCluster$1,RateLimiterMemory=RateLimiterMemory_1,RateLimiterMemcache=RateLimiterMemcache_1,RLWrapperBlackAndWhite=RLWrapperBlackAndWhite_1,RateLimiterUnion=RateLimiterUnion_1,RateLimiterQueue=RateLimiterQueue_1,BurstyRateLimiter=BurstyRateLimiter_1,RateLimiterRes=RateLimiterRes_1;var rateLimiterFlexible={RateLimiterRedis,RateLimiterMongo,RateLimiterMySQL,RateLimiterPostgres,RateLimiterMemory,RateLimiterMemcache,RateLimiterClusterMaster,RateLimiterClusterMasterPM2,RateLimiterCluster,RLWrapperBlackAndWhite,RateLimiterUnion,RateLimiterQueue,BurstyRateLimiter,RateLimiterRes};const log$i=logger$v("libp2p:get-peer");function getPeerAddress(n){if(isPeerId(n))return{peerId:n,multiaddrs:[]};Array.isArray(n)||(n=[n]);let e;if(n.length>0){const t=n[0].getPeerId();e=t==null?void 0:peerIdFromString$1(t),n.forEach(o=>{if(!isMultiaddr(o))throw log$i.error("multiaddr %s was invalid",o),new CodeError$1("Invalid Multiaddr",codes.ERR_INVALID_MULTIADDR);const c=o.getPeerId();if(c==null){if(e!=null)throw new CodeError$1("Multiaddrs must all have the same peer id or have no peer id",codes.ERR_INVALID_PARAMETERS)}else{const l=peerIdFromString$1(c);if(e==null||!e.equals(l))throw new CodeError$1("Multiaddrs must all have the same peer id or have no peer id",codes.ERR_INVALID_PARAMETERS)}})}return{peerId:e,multiaddrs:n}}function lowerBound(n,e,t){let o=0,c=n.length;for(;c>0;){const l=Math.trunc(c/2);let h=o+l;t(n[h],e)<=0?(o=++h,c-=l+1):c=l}return o}var cr;class PeerPriorityQueue{constructor(){nr(this,cr,[])}enqueue(e,t){const o=t?.peerId,c=t?.priority??0;if(o==null)throw new CodeError$1("missing peer id",codes.ERR_INVALID_PARAMETERS);const l={priority:c,peerId:o,run:e};if(this.size>0&&Ut(this,cr)[this.size-1].priority>=c){Ut(this,cr).push(l);return}const h=lowerBound(Ut(this,cr),l,(d,g)=>g.priority-d.priority);Ut(this,cr).splice(h,0,l)}dequeue(){return Ut(this,cr).shift()?.run}filter(e){if(e.peerId!=null){const t=e.peerId;return Ut(this,cr).filter(o=>t.equals(o.peerId)).map(o=>o.run)}return Ut(this,cr).filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return Ut(this,cr).length}}cr=new WeakMap;class PeerJobQueue extends PQueue{constructor(e={}){super({...e,queueClass:PeerPriorityQueue})}hasJob(e){return this.sizeBy({peerId:e})>0}}const DIAL_TIMEOUT=3e4,INBOUND_UPGRADE_TIMEOUT=3e4,MAX_PEER_ADDRS_TO_DIAL=25,MAX_PARALLEL_DIALS_PER_PEER=1,AUTO_DIAL_INTERVAL=5e3,AUTO_DIAL_CONCURRENCY=25,AUTO_DIAL_PRIORITY=0,AUTO_DIAL_MAX_QUEUE_LENGTH=100,AUTO_DIAL_DISCOVERED_PEERS_DEBOUNCE=10,INBOUND_CONNECTION_THRESHOLD=5,MAX_INCOMING_PENDING_CONNECTIONS=10,LAST_DIAL_FAILURE_KEY="last-dial-failure",MIN_CONNECTIONS=5,MAX_CONNECTIONS=100,MAX_PARALLEL_DIALS=50,AUTO_DIAL_PEER_RETRY_THRESHOLD=1e3*60*7,log$h=logger$v("libp2p:connection-manager:auto-dial"),defaultOptions$3={minConnections:MIN_CONNECTIONS,maxQueueLength:AUTO_DIAL_MAX_QUEUE_LENGTH,autoDialConcurrency:AUTO_DIAL_CONCURRENCY,autoDialPriority:AUTO_DIAL_PRIORITY,autoDialInterval:AUTO_DIAL_INTERVAL,autoDialPeerRetryThreshold:AUTO_DIAL_PEER_RETRY_THRESHOLD,autoDialDiscoveredPeersDebounce:AUTO_DIAL_DISCOVERED_PEERS_DEBOUNCE};class AutoDial{constructor(e,t){me(this,"connectionManager");me(this,"peerStore");me(this,"queue");me(this,"minConnections");me(this,"autoDialPriority");me(this,"autoDialIntervalMs");me(this,"autoDialMaxQueueLength");me(this,"autoDialPeerRetryThresholdMs");me(this,"autoDialDiscoveredPeersDebounce");me(this,"autoDialInterval");me(this,"started");me(this,"running");this.connectionManager=e.connectionManager,this.peerStore=e.peerStore,this.minConnections=t.minConnections??defaultOptions$3.minConnections,this.autoDialPriority=t.autoDialPriority??defaultOptions$3.autoDialPriority,this.autoDialIntervalMs=t.autoDialInterval??defaultOptions$3.autoDialInterval,this.autoDialMaxQueueLength=t.maxQueueLength??defaultOptions$3.maxQueueLength,this.autoDialPeerRetryThresholdMs=t.autoDialPeerRetryThreshold??defaultOptions$3.autoDialPeerRetryThreshold,this.autoDialDiscoveredPeersDebounce=t.autoDialDiscoveredPeersDebounce??defaultOptions$3.autoDialDiscoveredPeersDebounce,this.started=!1,this.running=!1,this.queue=new PeerJobQueue({concurrency:t.autoDialConcurrency??defaultOptions$3.autoDialConcurrency}),this.queue.addListener("error",c=>{log$h.error("error during auto-dial",c)}),e.events.addEventListener("connection:close",()=>{this.autoDial().catch(c=>{log$h.error(c)})});let o;e.events.addEventListener("peer:discovery",()=>{clearTimeout(o),o=setTimeout(()=>{this.autoDial().catch(c=>{log$h.error(c)})},this.autoDialDiscoveredPeersDebounce)})}isStarted(){return this.started}start(){this.autoDialInterval=setTimeout(()=>{this.autoDial().catch(e=>{log$h.error("error while autodialing",e)})},this.autoDialIntervalMs),this.started=!0}afterStart(){this.autoDial().catch(e=>{log$h.error("error while autodialing",e)})}stop(){this.queue.clear(),clearTimeout(this.autoDialInterval),this.started=!1,this.running=!1}async autoDial(){if(!this.started)return;const e=this.connectionManager.getConnectionsMap(),t=e.size;if(t>=this.minConnections){this.minConnections>0&&log$h.trace("have enough connections %d/%d",t,this.minConnections);return}if(this.queue.size>this.autoDialMaxQueueLength){log$h("not enough connections %d/%d but auto dial queue is full",t,this.minConnections);return}if(this.running){log$h("not enough connections %d/%d - but skipping autodial as it is already running",t,this.minConnections);return}this.running=!0,log$h("not enough connections %d/%d - will dial peers to increase the number of connections",t,this.minConnections);const o=new PeerSet(this.connectionManager.getDialQueue().map(m=>m.peerId).filter(Boolean)),c=await this.peerStore.all({filters:[m=>m.addresses.length===0?(log$h.trace("not autodialing %p because they have no addresses"),!1):e.has(m.id)?(log$h.trace("not autodialing %p because they are already connected"),!1):o.has(m.id)?(log$h.trace("not autodialing %p because they are already being dialed"),!1):this.queue.hasJob(m.id)?(log$h.trace("not autodialing %p because they are already being autodialed"),!1):!0]}),l=c.sort(()=>Math.random()>.5?1:-1),h=new PeerMap;for(const m of l)h.has(m.id)||h.set(m.id,[...m.tags.values()].reduce((v,_)=>v+_.value,0));const g=l.sort((m,v)=>{const _=h.get(m.id)??0,p=h.get(v.id)??0;return _>p?-1:_<p?1:0}).filter(m=>{const v=m.metadata.get(LAST_DIAL_FAILURE_KEY);if(v==null)return!0;const _=parseInt(toString$2(v));return isNaN(_)?!0:Date.now()-_>this.autoDialPeerRetryThresholdMs});log$h("selected %d/%d peers to dial",g.length,c.length);for(const m of g)this.queue.add(async()=>{const v=this.connectionManager.getConnectionsMap().size;if(v>=this.minConnections){log$h("got enough connections now %d/%d",v,this.minConnections),this.queue.clear();return}log$h("connecting to a peerStore stored peer %p",m.id),await this.connectionManager.openConnection(m.id,{priority:this.autoDialPriority})},{peerId:m.id}).catch(v=>{log$h.error("could not connect to peerStore stored peer",v)});this.running=!1,this.started&&(this.autoDialInterval=setTimeout(()=>{this.autoDial().catch(m=>{log$h.error("error while autodialing",m)})},this.autoDialIntervalMs))}}const log$g=logger$v("libp2p:connection-manager:connection-pruner"),defaultOptions$2={maxConnections:MAX_CONNECTIONS,allow:[]};class ConnectionPruner{constructor(e,t={}){me(this,"maxConnections");me(this,"connectionManager");me(this,"peerStore");me(this,"allow");me(this,"events");this.maxConnections=t.maxConnections??defaultOptions$2.maxConnections,this.allow=t.allow??defaultOptions$2.allow,this.connectionManager=e.connectionManager,this.peerStore=e.peerStore,this.events=e.events,e.events.addEventListener("connection:open",()=>{this.maybePruneConnections().catch(o=>{log$g.error(o)})})}async maybePruneConnections(){const e=this.connectionManager.getConnections(),t=e.length,o=Math.max(t-this.maxConnections,0);if(log$g("checking max connections limit %d/%d",t,this.maxConnections),t<=this.maxConnections)return;log$g("max connections limit exceeded %d/%d, pruning %d connection(s)",t,this.maxConnections,o);const c=new PeerMap;for(const d of e){const g=d.remotePeer;if(!c.has(g)){c.set(g,0);try{const m=await this.peerStore.get(g);c.set(g,[...m.tags.values()].reduce((v,_)=>v+_.value,0))}catch(m){m.code!=="ERR_NOT_FOUND"&&log$g.error("error loading peer tags",m)}}}const l=e.sort((d,g)=>{const m=c.get(d.remotePeer)??0,v=c.get(g.remotePeer)??0;if(m>v)return 1;if(m<v)return-1;const _=d.timeline.open,p=g.timeline.open;return _<p?1:_>p?-1:0}),h=[];for(const d of l)if(log$g("too many connections open - closing a connection to %p",d.remotePeer),this.allow.some(m=>d.remoteAddr.toString().startsWith(m.toString()))||h.push(d),h.length===o)break;await Promise.all(h.map(async d=>{try{await d.close()}catch(g){log$g.error(g)}})),this.events.safeDispatchEvent("connection:prune",{detail:h})}}function anySignal(n){const e=new globalThis.AbortController;function t(){e.abort();for(const l of n)l?.removeEventListener!=null&&l.removeEventListener("abort",t)}for(const l of n){if(l?.aborted===!0){t();break}l?.addEventListener!=null&&l.addEventListener("abort",t)}function o(){for(const l of n)l?.removeEventListener!=null&&l.removeEventListener("abort",t)}const c=e.signal;return c.clear=o,c}const log$f=logger$v("libp2p:connection-manager:utils");async function resolveMultiaddrs(n,e){if(!n.protoNames().includes("dnsaddr"))return[n];const o=await resolveRecord(n,e),h=(await Promise.all(o.map(async d=>resolveMultiaddrs(d,e)))).flat().reduce((d,g)=>(d.find(m=>m.equals(g))==null&&d.push(g),d),[]);return log$f("resolved %s to",n,h.map(d=>d.toString())),h}async function resolveRecord(n,e){try{return n=multiaddr(n.toString()),await n.resolve(e)}catch(t){return log$f.error(`multiaddr ${n.toString()} could not be resolved`,t),[]}}function combineSignals(...n){const e=[];for(const o of n)if(o!=null){try{eventsExports.setMaxListeners?.(1/0,o)}catch{}e.push(o)}const t=anySignal(e);try{eventsExports.setMaxListeners?.(1/0,t)}catch{}return t}const log$e=logger$v("libp2p:connection-manager:dial-queue"),defaultOptions$1={addressSorter:defaultAddressSort,maxParallelDials:MAX_PARALLEL_DIALS,maxPeerAddrsToDial:MAX_PEER_ADDRS_TO_DIAL,maxParallelDialsPerPeer:MAX_PARALLEL_DIALS_PER_PEER,dialTimeout:DIAL_TIMEOUT,resolvers:{dnsaddr:dnsaddrResolver}};class DialQueue{constructor(e,t={}){me(this,"pendingDials");me(this,"queue");me(this,"peerId");me(this,"peerStore");me(this,"connectionGater");me(this,"transportManager");me(this,"addressSorter");me(this,"maxPeerAddrsToDial");me(this,"maxParallelDialsPerPeer");me(this,"dialTimeout");me(this,"inProgressDialCount");me(this,"pendingDialCount");me(this,"shutDownController");this.addressSorter=t.addressSorter??defaultOptions$1.addressSorter,this.maxPeerAddrsToDial=t.maxPeerAddrsToDial??defaultOptions$1.maxPeerAddrsToDial,this.maxParallelDialsPerPeer=t.maxParallelDialsPerPeer??defaultOptions$1.maxParallelDialsPerPeer,this.dialTimeout=t.dialTimeout??defaultOptions$1.dialTimeout,this.peerId=e.peerId,this.peerStore=e.peerStore,this.connectionGater=e.connectionGater,this.transportManager=e.transportManager,this.shutDownController=new AbortController;try{eventsExports.setMaxListeners?.(1/0,this.shutDownController.signal)}catch{}this.pendingDialCount=e.metrics?.registerMetric("libp2p_dialler_pending_dials"),this.inProgressDialCount=e.metrics?.registerMetric("libp2p_dialler_in_progress_dials"),this.pendingDials=[];for(const[o,c]of Object.entries(t.resolvers??{}))resolvers.set(o,c);this.queue=new PQueue({concurrency:t.maxParallelDials??defaultOptions$1.maxParallelDials}),this.queue.on("add",()=>{this.pendingDialCount?.update(this.queue.size),this.inProgressDialCount?.update(this.queue.pending)}),this.queue.on("active",()=>{this.pendingDialCount?.update(this.queue.size),this.inProgressDialCount?.update(this.queue.pending)}),this.queue.on("completed",()=>{this.pendingDialCount?.update(this.queue.size),this.inProgressDialCount?.update(this.queue.pending)}),this.queue.on("error",o=>{log$e.error("error in dial queue",o),this.pendingDialCount?.update(this.queue.size),this.inProgressDialCount?.update(this.queue.pending)}),this.queue.on("empty",()=>{this.pendingDialCount?.update(this.queue.size),this.inProgressDialCount?.update(this.queue.pending)}),this.queue.on("idle",()=>{this.pendingDialCount?.update(this.queue.size),this.inProgressDialCount?.update(this.queue.pending)})}stop(){this.shutDownController.abort()}async dial(e,t={}){const{peerId:o,multiaddrs:c}=getPeerAddress(e),l=c.map(v=>({multiaddr:v,isCertified:!1})),h=this.createDialAbortControllers(t.signal);let d;try{d=await this.calculateMultiaddrs(o,l,{...t,signal:h})}catch(v){throw h.clear(),v}const g=this.pendingDials.find(v=>!!(v.peerId!=null&&o!=null&&v.peerId.equals(o)||d.map(({multiaddr:_})=>_.toString()).join()===v.multiaddrs.map(_=>_.toString()).join()));if(g!=null)return log$e("joining existing dial target for %p",o),h.clear(),g.promise;log$e("creating dial target for",d.map(({multiaddr:v})=>v.toString()));const m={id:randomId(),status:"queued",peerId:o,multiaddrs:d.map(({multiaddr:v})=>v)};return m.promise=this.performDial(m,{...t,signal:h}).finally(()=>{this.pendingDials=this.pendingDials.filter(v=>v.id!==m.id),h.clear()}).catch(async v=>{if(log$e.error("dial failed to %s",m.multiaddrs.map(_=>_.toString()).join(", "),v),o!=null)try{await this.peerStore.patch(o,{metadata:{[LAST_DIAL_FAILURE_KEY]:fromString$2(Date.now().toString())}})}catch(_){log$e.error("could not update last dial failure key for %p",o,_)}throw h.aborted?new CodeError$1(v.message,codes.ERR_TIMEOUT):v}),this.pendingDials.push(m),m.promise}createDialAbortControllers(e){const t=anySignal([AbortSignal.timeout(this.dialTimeout),this.shutDownController.signal,e]);try{eventsExports.setMaxListeners?.(1/0,t)}catch{}return t}async calculateMultiaddrs(e,t=[],o={}){if(e!=null){if(this.peerId.equals(e))throw new CodeError$1("Tried to dial self",codes.ERR_DIALED_SELF);if(await this.connectionGater.denyDialPeer?.(e)===!0)throw new CodeError$1("The dial request is blocked by gater.allowDialPeer",codes.ERR_PEER_DIAL_INTERCEPTED);if(t.length===0){log$e("loading multiaddrs for %p",e);try{const v=await this.peerStore.get(e);t.push(...v.addresses),log$e("loaded multiaddrs for %p",e,t.map(({multiaddr:_})=>_.toString()))}catch(v){if(v.code!==codes.ERR_NOT_FOUND)throw v}}}const c=(await Promise.all(t.map(async v=>{const _=await resolveMultiaddrs(v.multiaddr,o);return _.length===1&&_[0].equals(v.multiaddr)?v:_.map(p=>({multiaddr:p,isCertified:!1}))}))).flat(),l=c.filter(v=>{if(this.transportManager.transportForMultiaddr(v.multiaddr)==null)return!1;const _=v.multiaddr.getPeerId();return e!=null&&_!=null?e.equals(_):!0}),h=new Map;for(const v of l){const _=v.multiaddr.toString(),p=h.get(_);if(p!=null){p.isCertified=p.isCertified||v.isCertified||!1;continue}h.set(_,v)}let d=[...h.values()];if((d.length===0||d.length>this.maxPeerAddrsToDial)&&(log$e("addresses for %p before filtering",e??"unknown peer",c.map(({multiaddr:v})=>v.toString())),log$e("addresses for %p after filtering",e??"unknown peer",d.map(({multiaddr:v})=>v.toString()))),d.length===0)throw new CodeError$1("The dial request has no valid addresses",codes.ERR_NO_VALID_ADDRESSES);if(d.length>this.maxPeerAddrsToDial)throw new CodeError$1("dial with more addresses than allowed",codes.ERR_TOO_MANY_ADDRESSES);if(e!=null){const v=`/p2p/${e.toString()}`;d=d.map(_=>{const p=_.multiaddr.getPeerId();return _.multiaddr.protos().pop()?.path===!0?_:p!==e.toString()?{multiaddr:_.multiaddr.encapsulate(v),isCertified:_.isCertified}:_})}const g=[];for(const v of d)this.connectionGater.denyDialMultiaddr!=null&&await this.connectionGater.denyDialMultiaddr(v.multiaddr)||g.push(v);const m=g.sort(this.addressSorter);if(m.length===0)throw new CodeError$1("The connection gater denied all addresses in the dial request",codes.ERR_NO_VALID_ADDRESSES);return m}async performDial(e,t={}){const o=e.multiaddrs.map(()=>new AbortController);try{const c=new PQueue({concurrency:this.maxParallelDialsPerPeer});c.on("error",h=>{log$e.error("error dialling",h)});const l=await Promise.any(e.multiaddrs.map(async(h,d)=>{const g=o[d];if(g==null)throw new CodeError$1("dialAction did not come with an AbortController",codes.ERR_INVALID_PARAMETERS);const m=combineSignals(g.signal,t.signal);m.addEventListener("abort",()=>{log$e("dial to %a aborted",h)});const v=pDefer();return await c.add(async()=>{if(m.aborted){log$e("dial to %a was aborted before reaching the head of the peer dial queue",h),v.reject(new AbortError$4);return}await this.queue.add(async()=>{try{if(m.aborted){log$e("dial to %a was aborted before reaching the head of the dial queue",h),v.reject(new AbortError$4);return}e.status="active";const _=await this.transportManager.dial(h,{...t,signal:m});if(g.signal.aborted){log$e("multiple dials succeeded, closing superfluous connection"),_.close().catch(p=>{log$e.error("error closing superfluous connection",p)}),v.reject(new AbortError$4);return}o[d]=void 0,o.forEach(p=>{p!==void 0&&p.abort()}),log$e("dial to %a succeeded",h),v.resolve(_)}catch(_){log$e.error("error during dial of %a",h,_),v.reject(_)}},{...t,signal:m}).catch(_=>{v.reject(_)})},{signal:m}).catch(_=>{v.reject(_)}).finally(()=>{m.clear()}),v.promise}));if(l==null)throw new CodeError$1("successful dial led to empty object returned from peer dial queue",codes.ERR_TRANSPORT_DIAL_FAILED);return e.status="success",l}catch(c){throw e.status="error",e.multiaddrs.length===1&&c.name==="AggregateError"?c.errors[0]:c}}}function randomId(){return`${parseInt(String(Math.random()*1e9),10).toString()}${Date.now()}`}const log$d=logger$v("libp2p:connection-manager"),DEFAULT_DIAL_PRIORITY=50,defaultOptions={minConnections:MIN_CONNECTIONS,maxConnections:MAX_CONNECTIONS,inboundConnectionThreshold:INBOUND_CONNECTION_THRESHOLD,maxIncomingPendingConnections:MAX_INCOMING_PENDING_CONNECTIONS,autoDialConcurrency:AUTO_DIAL_CONCURRENCY,autoDialPriority:AUTO_DIAL_PRIORITY,autoDialMaxQueueLength:AUTO_DIAL_MAX_QUEUE_LENGTH};class DefaultConnectionManager{constructor(e,t={}){me(this,"started");me(this,"connections");me(this,"allow");me(this,"deny");me(this,"maxIncomingPendingConnections");me(this,"incomingPendingConnections");me(this,"maxConnections");me(this,"dialQueue");me(this,"autoDial");me(this,"connectionPruner");me(this,"inboundConnectionRateLimiter");me(this,"peerStore");me(this,"metrics");me(this,"events");this.maxConnections=t.maxConnections??defaultOptions.maxConnections;const o=t.minConnections??defaultOptions.minConnections;if(this.maxConnections<o)throw new CodeError$1("Connection Manager maxConnections must be greater than minConnections",codes.ERR_INVALID_PARAMETERS);this.connections=new PeerMap,this.started=!1,this.peerStore=e.peerStore,this.metrics=e.metrics,this.events=e.events,this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.events.addEventListener("connection:open",this.onConnect),this.events.addEventListener("connection:close",this.onDisconnect),this.allow=(t.allow??[]).map(c=>multiaddr(c)),this.deny=(t.deny??[]).map(c=>multiaddr(c)),this.incomingPendingConnections=0,this.maxIncomingPendingConnections=t.maxIncomingPendingConnections??defaultOptions.maxIncomingPendingConnections,this.inboundConnectionRateLimiter=new rateLimiterFlexible.RateLimiterMemory({points:t.inboundConnectionThreshold??defaultOptions.inboundConnectionThreshold,duration:1}),this.autoDial=new AutoDial({connectionManager:this,peerStore:e.peerStore,events:e.events},{minConnections:o,autoDialConcurrency:t.autoDialConcurrency??defaultOptions.autoDialConcurrency,autoDialPriority:t.autoDialPriority??defaultOptions.autoDialPriority,maxQueueLength:t.autoDialMaxQueueLength??defaultOptions.autoDialMaxQueueLength}),this.connectionPruner=new ConnectionPruner({connectionManager:this,peerStore:e.peerStore,events:e.events},{maxConnections:this.maxConnections,allow:this.allow}),this.dialQueue=new DialQueue({peerId:e.peerId,metrics:e.metrics,peerStore:e.peerStore,transportManager:e.transportManager,connectionGater:e.connectionGater},{addressSorter:t.addressSorter??defaultAddressSort,maxParallelDials:t.maxParallelDials??MAX_PARALLEL_DIALS,maxPeerAddrsToDial:t.maxPeerAddrsToDial??MAX_PEER_ADDRS_TO_DIAL,maxParallelDialsPerPeer:t.maxParallelDialsPerPeer??MAX_PARALLEL_DIALS_PER_PEER,dialTimeout:t.dialTimeout??DIAL_TIMEOUT,resolvers:t.resolvers??{dnsaddr:dnsaddrResolver}})}isStarted(){return this.started}async start(){this.metrics?.registerMetricGroup("libp2p_connection_manager_connections",{calculate:()=>{const e={inbound:0,outbound:0};for(const t of this.connections.values())for(const o of t)o.direction==="inbound"?e.inbound++:e.outbound++;return e}}),this.metrics?.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:()=>{const e={};for(const t of this.connections.values())for(const o of t)for(const c of o.streams){const l=`${c.direction} ${c.protocol??"unnegotiated"}`;e[l]=(e[l]??0)+1}return e}}),this.metrics?.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:()=>{const e={};for(const o of this.connections.values())for(const c of o){const l={};for(const h of c.streams){const d=`${h.direction} ${h.protocol??"unnegotiated"}`;l[d]=(l[d]??0)+1}for(const[h,d]of Object.entries(l))e[h]=e[h]??[],e[h].push(d)}const t={};for(let[o,c]of Object.entries(e)){c=c.sort((h,d)=>h-d);const l=Math.floor(c.length*.9);t[o]=c[l]}return t}}),this.autoDial.start(),this.started=!0,log$d("started")}async afterStart(){Promise.resolve().then(async()=>{const e=await this.peerStore.all({filters:[t=>t.tags.has(KEEP_ALIVE)]});await Promise.all(e.map(async t=>{await this.openConnection(t.id).catch(o=>{log$d.error(o)})}))}).catch(e=>{log$d.error(e)}),this.autoDial.afterStart()}async stop(){this.dialQueue.stop(),this.autoDial.stop();const e=[];for(const t of this.connections.values())for(const o of t)e.push((async()=>{try{await o.close()}catch(c){log$d.error(c)}})());log$d("closing %d connections",e.length),await Promise.all(e),this.connections.clear(),log$d("stopped")}onConnect(e){this._onConnect(e).catch(t=>{log$d.error(t)})}async _onConnect(e){const{detail:t}=e;if(!this.started){await t.close();return}const o=t.remotePeer,c=this.connections.get(o);let l=!1;c!=null?c.push(t):(l=!0,this.connections.set(o,[t])),o.publicKey!=null&&o.type==="RSA"&&await this.peerStore.patch(o,{publicKey:o.publicKey}),l&&this.events.safeDispatchEvent("peer:connect",{detail:t.remotePeer})}onDisconnect(e){const{detail:t}=e;if(!this.started)return;const o=t.remotePeer;let c=this.connections.get(o);c!=null&&c.length>1?(c=c.filter(l=>l.id!==t.id),this.connections.set(o,c)):c!=null&&(this.connections.delete(o),this.events.safeDispatchEvent("peer:disconnect",{detail:t.remotePeer}))}getConnections(e){if(e!=null)return this.connections.get(e)??[];let t=[];for(const o of this.connections.values())t=t.concat(o);return t}getConnectionsMap(){return this.connections}async openConnection(e,t={}){if(!this.isStarted())throw new CodeError$1("Not started",codes.ERR_NODE_NOT_STARTED);t.signal?.throwIfAborted();const{peerId:o}=getPeerAddress(e);if(o!=null&&t.force!==!0){log$d("dial %p",o);const d=this.getConnections(o);if(d.length>0)return log$d("had an existing connection to %p",o),d[0]}const c=await this.dialQueue.dial(e,{...t,priority:t.priority??DEFAULT_DIAL_PRIORITY});let l=this.connections.get(c.remotePeer);l==null&&(l=[],this.connections.set(c.remotePeer,l));let h=!1;for(const d of l)d.id===c.id&&(h=!0);return h||l.push(c),c}async closeConnections(e,t={}){const o=this.connections.get(e)??[];await Promise.all(o.map(async c=>{try{await c.close(t)}catch(l){c.abort(l)}}))}async acceptIncomingConnection(e){if(this.deny.some(c=>e.remoteAddr.toString().startsWith(c.toString())))return log$d("connection from %a refused - connection remote address was in deny list",e.remoteAddr),!1;if(this.allow.some(c=>e.remoteAddr.toString().startsWith(c.toString())))return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.maxIncomingPendingConnections)return log$d("connection from %a refused - incomingPendingConnections exceeded by host",e.remoteAddr),!1;if(e.remoteAddr.isThinWaistAddress()){const c=e.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(c,1)}catch{return log$d("connection from %a refused - inboundConnectionThreshold exceeded by host %s",e.remoteAddr,c),!1}}return this.getConnections().length<this.maxConnections?(this.incomingPendingConnections++,!0):(log$d("connection from %a refused - maxConnections exceeded",e.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}getDialQueue(){return this.dialQueue.pendingDials}}function isAsyncIterable$1(n){return n[Symbol.asyncIterator]!=null}function map$1(n,e){if(isAsyncIterable$1(n))return async function*(){for await(const d of n)yield e(d)}();const t=peekable(n),{value:o,done:c}=t.next();if(c===!0)return function*(){}();const l=e(o);if(typeof l.then=="function")return async function*(){yield await l;for await(const d of t)yield e(d)}();const h=e;return function*(){yield l;for(const d of t)yield h(d)}()}async function*storeAddresses(n,e){yield*map$1(n,async t=>(await e.merge(t.id,{multiaddrs:t.multiaddrs}),t))}function uniquePeers(n){const e=new Set;return filter(n,t=>e.has(t.id.toString())?!1:(e.add(t.id.toString()),!0))}async function*requirePeers(n,e=1){let t=0;for await(const o of n)t++,yield o;if(t<e)throw new CodeError$1(`more peers required, seen: ${t}  min: ${e}`,"NOT_FOUND")}class CompoundContentRouting{constructor(e,t){me(this,"routers");me(this,"started");me(this,"components");this.routers=t.routers??[],this.started=!1,this.components=e}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(e,t={}){if(this.routers.length===0)throw new CodeError$1("No content routers available",codes.ERR_NO_ROUTERS_AVAILABLE);yield*pipe(merge$2(...this.routers.map(o=>o.findProviders(e,t))),o=>storeAddresses(o,this.components.peerStore),o=>uniquePeers(o),o=>requirePeers(o))}async provide(e,t={}){if(this.routers.length===0)throw new CodeError$1("No content routers available",codes.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map(async o=>{await o.provide(e,t)}))}async put(e,t,o){if(!this.isStarted())throw new CodeError$1(messages.NOT_STARTED_YET,codes.DHT_NOT_STARTED);await Promise.all(this.routers.map(async c=>{await c.put(e,t,o)}))}async get(e,t){if(!this.isStarted())throw new CodeError$1(messages.NOT_STARTED_YET,codes.DHT_NOT_STARTED);return Promise.any(this.routers.map(async o=>o.get(e,t)))}}function isAsyncIterable(n){return n[Symbol.asyncIterator]!=null}function first(n){if(isAsyncIterable(n))return(async()=>{for await(const e of n)return e})();for(const e of n)return e}const log$c=logger$v("libp2p:peer-routing");class DefaultPeerRouting{constructor(e,t){me(this,"components");me(this,"routers");this.components=e,this.routers=t.routers??[]}async findPeer(e,t){if(this.routers.length===0)throw new CodeError$1("No peer routers available",codes.ERR_NO_ROUTERS_AVAILABLE);if(e.toString()===this.components.peerId.toString())throw new CodeError$1("Should not try to find self",codes.ERR_FIND_SELF);const o=await pipe(merge$2(...this.routers.map(c=>async function*(){try{yield await c.findPeer(e,t)}catch(l){log$c.error(l)}}())),c=>filter(c,Boolean),c=>storeAddresses(c,this.components.peerStore),async c=>first(c));if(o!=null)return o;throw new CodeError$1(messages.NOT_FOUND,codes.ERR_NOT_FOUND)}async*getClosestPeers(e,t){if(this.routers.length===0)throw new CodeError$1("No peer routers available",codes.ERR_NO_ROUTERS_AVAILABLE);yield*pipe(merge$2(...this.routers.map(o=>o.getClosestPeers(e,t))),o=>storeAddresses(o,this.components.peerStore),o=>uniquePeers(o),o=>requirePeers(o))}}const log$b=logger$v("libp2p:registrar"),DEFAULT_MAX_INBOUND_STREAMS=32,DEFAULT_MAX_OUTBOUND_STREAMS=64;class DefaultRegistrar{constructor(e){me(this,"topologies");me(this,"handlers");me(this,"components");this.topologies=new Map,this.handlers=new Map,this.components=e,this._onDisconnect=this._onDisconnect.bind(this),this._onPeerUpdate=this._onPeerUpdate.bind(this),this._onConnect=this._onConnect.bind(this),this.components.events.addEventListener("peer:disconnect",this._onDisconnect),this.components.events.addEventListener("peer:connect",this._onConnect),this.components.events.addEventListener("peer:update",this._onPeerUpdate)}getProtocols(){return Array.from(new Set([...this.handlers.keys()])).sort()}getHandler(e){const t=this.handlers.get(e);if(t==null)throw new CodeError$1(`No handler registered for protocol ${e}`,codes.ERR_NO_HANDLER_FOR_PROTOCOL);return t}getTopologies(e){const t=this.topologies.get(e);return t==null?[]:[...t.values()]}async handle(e,t,o){if(this.handlers.has(e))throw new CodeError$1(`Handler already registered for protocol ${e}`,codes.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);const c=mergeOptions$1.bind({ignoreUndefined:!0})({maxInboundStreams:DEFAULT_MAX_INBOUND_STREAMS,maxOutboundStreams:DEFAULT_MAX_OUTBOUND_STREAMS},o);this.handlers.set(e,{handler:t,options:c}),await this.components.peerStore.merge(this.components.peerId,{protocols:[e]})}async unhandle(e){(Array.isArray(e)?e:[e]).forEach(o=>{this.handlers.delete(o)}),await this.components.peerStore.patch(this.components.peerId,{protocols:this.getProtocols()})}async register(e,t){if(t==null)throw new CodeError$1("invalid topology",codes.ERR_INVALID_PARAMETERS);const o=`${(Math.random()*1e9).toString(36)}${Date.now()}`;let c=this.topologies.get(e);return c==null&&(c=new Map,this.topologies.set(e,c)),c.set(o,t),o}unregister(e){for(const[t,o]of this.topologies.entries())o.has(e)&&(o.delete(e),o.size===0&&this.topologies.delete(t))}_onDisconnect(e){const t=e.detail;this.components.peerStore.get(t).then(o=>{for(const c of o.protocols){const l=this.topologies.get(c);if(l!=null)for(const h of l.values())h.onDisconnect?.(t)}}).catch(o=>{o.code!==codes.ERR_NOT_FOUND&&log$b.error("could not inform topologies of disconnecting peer %p",t,o)})}_onConnect(e){const t=e.detail;this.components.peerStore.get(t).then(o=>{const c=this.components.connectionManager.getConnections(o.id)[0];if(c==null){log$b("peer %p connected but the connection manager did not have a connection",o);return}for(const l of o.protocols){const h=this.topologies.get(l);if(h!=null)for(const d of h.values())d.onConnect?.(t,c)}}).catch(o=>{o.code!==codes.ERR_NOT_FOUND&&log$b.error("could not inform topologies of connecting peer %p",t,o)})}_onPeerUpdate(e){const{peer:t,previous:o}=e.detail,c=(o?.protocols??[]).filter(h=>!t.protocols.includes(h)),l=t.protocols.filter(h=>!(o?.protocols??[]).includes(h));for(const h of c){const d=this.topologies.get(h);if(d!=null)for(const g of d.values())g.onDisconnect?.(t.id)}for(const h of l){const d=this.topologies.get(h);if(d!=null)for(const g of d.values()){const m=this.components.connectionManager.getConnections(t.id)[0];m!=null&&g.onConnect?.(t.id,m)}}}}class TrackedMap extends Map{constructor(t){super();me(this,"metric");const{name:o,metrics:c}=t;this.metric=c.registerMetric(o),this.updateComponentMetric()}set(t,o){return super.set(t,o),this.updateComponentMetric(),this}delete(t){const o=super.delete(t);return this.updateComponentMetric(),o}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function trackedMap(n){const{name:e,metrics:t}=n;let o;return t!=null?o=new TrackedMap({name:e,metrics:t}):o=new Map,o}const log$a=logger$v("libp2p:transports");class DefaultTransportManager{constructor(e,t={}){me(this,"components");me(this,"transports");me(this,"listeners");me(this,"faultTolerance");me(this,"started");this.components=e,this.started=!1,this.transports=new Map,this.listeners=trackedMap({name:"libp2p_transport_manager_listeners",metrics:this.components.metrics}),this.faultTolerance=t.faultTolerance??FaultTolerance$2.FATAL_ALL}add(e){const t=e[Symbol.toStringTag];if(t==null)throw new CodeError$1("Transport must have a valid tag",codes.ERR_INVALID_KEY);if(this.transports.has(t))throw new CodeError$1(`There is already a transport with the tag ${t}`,codes.ERR_DUPLICATE_TRANSPORT);log$a("adding transport %s",t),this.transports.set(t,e),this.listeners.has(t)||this.listeners.set(t,[])}isStarted(){return this.started}start(){this.started=!0}async afterStart(){const e=this.components.addressManager.getListenAddrs();await this.listen(e)}async stop(){const e=[];for(const[t,o]of this.listeners)for(log$a("closing listeners for %s",t);o.length>0;){const c=o.pop();c!=null&&e.push(c.close())}await Promise.all(e),log$a("all listeners closed");for(const t of this.listeners.keys())this.listeners.set(t,[]);this.started=!1}async dial(e,t){const o=this.transportForMultiaddr(e);if(o==null)throw new CodeError$1(`No transport available for address ${String(e)}`,codes.ERR_TRANSPORT_UNAVAILABLE);try{return await o.dial(e,{...t,upgrader:this.components.upgrader})}catch(c){throw c.code==null&&(c.code=codes.ERR_TRANSPORT_DIAL_FAILED),c}}getAddrs(){let e=[];for(const t of this.listeners.values())for(const o of t)e=[...e,...o.getAddrs()];return e}getTransports(){return Array.of(...this.transports.values())}getListeners(){return Array.of(...this.listeners.values()).flat()}transportForMultiaddr(e){for(const t of this.transports.values())if(t.filter([e]).length>0)return t}async listen(e){if(!this.isStarted())throw new CodeError$1("Not started",codes.ERR_NODE_NOT_STARTED);if(e==null||e.length===0){log$a("no addresses were provided for listening, this node is dial only");return}const t=[];for(const[o,c]of this.transports.entries()){const l=c.filter(e),h=[];for(const m of l){log$a("creating listener for %s on %a",o,m);const v=c.createListener({upgrader:this.components.upgrader});let _=this.listeners.get(o)??[];_==null&&(_=[],this.listeners.set(o,_)),_.push(v),v.addEventListener("listening",()=>{this.components.events.safeDispatchEvent("transport:listening",{detail:v})}),v.addEventListener("close",()=>{const p=_.findIndex(a=>a===v);_.splice(p,1),this.components.events.safeDispatchEvent("transport:close",{detail:v})}),h.push(v.listen(m))}if(h.length===0){t.push(o);continue}if((await Promise.allSettled(h)).find(m=>m.status==="fulfilled")==null&&this.faultTolerance!==FaultTolerance$2.NO_FATAL)throw new CodeError$1(`Transport (${o}) could not listen on any available address`,codes.ERR_NO_VALID_ADDRESSES)}if(t.length===this.transports.size){const o=`no valid addresses were provided for transports [${t.join(", ")}]`;if(this.faultTolerance===FaultTolerance$2.FATAL_ALL)throw new CodeError$1(o,codes.ERR_NO_VALID_ADDRESSES);log$a(`libp2p in dial mode only: ${o}`)}}async remove(e){log$a("removing %s",e);for(const t of this.listeners.get(e)??[])await t.close();this.transports.delete(e),this.listeners.delete(e)}async removeAll(){const e=[];for(const t of this.transports.keys())e.push(this.remove(t));await Promise.all(e)}}const PROTOCOL_ID="/multistream/1.0.0",MAX_PROTOCOL_LENGTH=1024;function reader(n){const e=async function*(){let t=yield,o=new Uint8ArrayList;for await(const c of n){if(t==null){o.append(c),t=yield o,o=new Uint8ArrayList;continue}for(o.append(c);o.length>=t;){const l=o.sublist(0,t);if(o.consume(t),t=yield l,t==null){o.length>0&&(t=yield o,o=new Uint8ArrayList);break}}}if(t!=null)throw Object.assign(new Error(`stream ended before ${t} bytes became available`),{code:"ERR_UNDER_READ",buffer:o})}();return e.next(),e}function handshake(n){const e=pushable(),t=reader(n.source),o=pDefer();let c;const l=n.sink(async function*(){yield*e,yield*await o.promise}());return l.catch(d=>{c=d}),{reader:t,writer:e,stream:{sink:async d=>{if(c!=null){await Promise.reject(c);return}o.resolve(d),await l},source:t},rest:()=>e.end(),write:e.push,read:async()=>{const d=await t.next();if(d.value!=null)return d.value}}}class AbortError extends Error{constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function getIterator(n){if(n!=null){if(typeof n[Symbol.iterator]=="function")return n[Symbol.iterator]();if(typeof n[Symbol.asyncIterator]=="function")return n[Symbol.asyncIterator]();if(typeof n.next=="function")return n}throw new Error("argument is not an iterator or iterable")}function abortableSource(n,e,t){const o=t??{},c=getIterator(n);async function*l(){let h;const d=()=>{h?.()};for(e.addEventListener("abort",d);;){let g;try{if(e.aborted){const{abortMessage:v,abortCode:_}=o;throw new AbortError(v,_)}const m=new Promise((v,_)=>{h=()=>{const{abortMessage:p,abortCode:a}=o;_(new AbortError(p,a))}});g=await Promise.race([m,c.next()]),h=null}catch(m){e.removeEventListener("abort",d);const v=m.type==="aborted"&&e.aborted;if(v&&o.onAbort!=null&&o.onAbort(n),typeof c.return=="function")try{const _=c.return();_ instanceof Promise&&_.catch(p=>{o.onReturnError!=null&&o.onReturnError(p)})}catch(_){o.onReturnError!=null&&o.onReturnError(_)}if(v&&o.returnOnAbort===!0)return;throw m}if(g.done===!0)break;yield g.value}e.removeEventListener("abort",d)}return l()}const log$9=logger$v("libp2p:mss"),NewLine=fromString$2(`
`);function encode$9(n){const e=new Uint8ArrayList(n,NewLine);return encode$a.single(e)}function write(n,e,t={}){const o=encode$9(e);t.writeBytes===!0?n.push(o.subarray()):n.push(o)}function writeAll(n,e,t={}){const o=new Uint8ArrayList;for(const c of e)o.append(encode$9(c));t.writeBytes===!0?n.push(o.subarray()):n.push(o)}async function read$1(n,e){let t=1;const o={[Symbol.asyncIterator]:()=>o,next:async()=>n.next(t)};let c=o;e?.signal!=null&&(c=abortableSource(o,e.signal));const l=d=>{t=d},h=await pipe(c,d=>decode$9(d,{onLength:l,maxDataLength:MAX_PROTOCOL_LENGTH}),async d=>first(d));if(h==null||h.length===0)throw new CodeError$1("no buffer returned","ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");if(h.get(h.byteLength-1)!==NewLine[0])throw log$9.error("Invalid mss message - missing newline - %s",h.subarray()),new CodeError$1("missing newline","ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return h.sublist(0,-1)}async function readString(n,e){const t=await read$1(n,e);return toString$2(t.subarray())}const log$8=logger$v("libp2p:mss:select");async function select(n,e,t={}){e=Array.isArray(e)?[...e]:[e];const{reader:o,writer:c,rest:l,stream:h}=handshake(n),d=e.shift();if(d==null)throw new Error("At least one protocol must be specified");log$8.trace('select: write ["%s", "%s"]',PROTOCOL_ID,d);const g=fromString$2(PROTOCOL_ID),m=fromString$2(d);writeAll(c,[g,m],t);let v=await readString(o,t);if(log$8.trace('select: read "%s"',v),v===PROTOCOL_ID&&(v=await readString(o,t),log$8.trace('select: read "%s"',v)),v===d)return l(),{stream:h,protocol:d};for(const _ of e){log$8.trace('select: write "%s"',_),write(c,fromString$2(_),t);const p=await readString(o,t);if(log$8.trace('select: read "%s" for "%s"',p,_),p===_)return l(),{stream:h,protocol:_}}throw l(),new CodeError$1("protocol selection failed","ERR_UNSUPPORTED_PROTOCOL")}const log$7=logger$v("libp2p:mss:handle");async function handle(n,e,t){e=Array.isArray(e)?e:[e];const{writer:o,reader:c,rest:l,stream:h}=handshake(n);for(;;){const d=await readString(c,t);if(log$7.trace('read "%s"',d),d===PROTOCOL_ID){log$7.trace('respond with "%s" for "%s"',PROTOCOL_ID,d),write(o,fromString$2(PROTOCOL_ID),t);continue}if(e.includes(d))return write(o,fromString$2(d),t),log$7.trace('respond with "%s" for "%s"',d,d),l(),{stream:h,protocol:d};if(d==="ls"){write(o,new Uint8ArrayList(...e.map(g=>encode$9(fromString$2(g)))),t),log$7.trace('respond with "%s" for %s',e,d);continue}write(o,fromString$2("na"),t),log$7('respond with "na" for "%s"',d)}}const symbol=Symbol.for("@libp2p/connection"),log$6=logger$v("libp2p:connection"),CLOSE_TIMEOUT$1=500;var Kr,Gr;class ConnectionImpl{constructor(e){me(this,"id");me(this,"remoteAddr");me(this,"remotePeer");me(this,"direction");me(this,"timeline");me(this,"multiplexer");me(this,"encryption");me(this,"status");me(this,"transient");me(this,"tags");me(this,"_newStream");me(this,"_close");me(this,"_abort");me(this,"_getStreams");me(this,Kr,"Connection");me(this,Gr,!0);const{remoteAddr:t,remotePeer:o,newStream:c,close:l,abort:h,getStreams:d}=e;this.id=`${parseInt(String(Math.random()*1e9)).toString(36)}${Date.now()}`,this.remoteAddr=t,this.remotePeer=o,this.direction=e.direction,this.status="open",this.timeline=e.timeline,this.multiplexer=e.multiplexer,this.encryption=e.encryption,this.transient=e.transient??!1,this._newStream=c,this._close=l,this._abort=h,this._getStreams=d,this.tags=[]}get streams(){return this._getStreams()}async newStream(e,t){if(this.status==="closing")throw new CodeError$1("the connection is being closed","ERR_CONNECTION_BEING_CLOSED");if(this.status==="closed")throw new CodeError$1("the connection is closed","ERR_CONNECTION_CLOSED");if(Array.isArray(e)||(e=[e]),this.transient&&t?.runOnTransientConnection!==!0)throw new CodeError$1("Cannot open protocol stream on transient connection","ERR_TRANSIENT_CONNECTION");const o=await this._newStream(e,t);return o.direction="outbound",o}async close(e={}){if(!(this.status==="closed"||this.status==="closing")){log$6("closing connection to %a",this.remoteAddr),this.status="closing",e.signal=e?.signal??AbortSignal.timeout(CLOSE_TIMEOUT$1);try{eventsExports.setMaxListeners?.(1/0,e.signal)}catch{}try{await Promise.all(this.streams.map(async t=>t.close(e))),await this._close(e),this.timeline.close=Date.now(),this.status="closed"}catch(t){log$6.error("error encountered during graceful close of connection to %a",this.remoteAddr,t),this.abort(t)}}}abort(e){log$6.error("aborting connection to %a due to error",this.remoteAddr,e),this.status="closing",this.streams.forEach(t=>{t.abort(e)}),log$6.error("all streams aborted",this.streams.length),this._abort(e),this.timeline.close=Date.now(),this.status="closed"}}Kr=Symbol.toStringTag,Gr=symbol;function createConnection(n){return new ConnectionImpl(n)}const log$5=logger$v("libp2p:upgrader");function findIncomingStreamLimit(n,e){try{const{options:t}=e.getHandler(n);return t.maxInboundStreams}catch(t){if(t.code!==codes.ERR_NO_HANDLER_FOR_PROTOCOL)throw t}return DEFAULT_MAX_INBOUND_STREAMS}function findOutgoingStreamLimit(n,e,t={}){try{const{options:o}=e.getHandler(n);if(o.maxOutboundStreams!=null)return o.maxOutboundStreams}catch(o){if(o.code!==codes.ERR_NO_HANDLER_FOR_PROTOCOL)throw o}return t.maxOutboundStreams??DEFAULT_MAX_OUTBOUND_STREAMS}function countStreams(n,e,t){let o=0;return t.streams.forEach(c=>{c.direction===e&&c.protocol===n&&o++}),o}class DefaultUpgrader{constructor(e,t){me(this,"components");me(this,"connectionEncryption");me(this,"muxers");me(this,"inboundUpgradeTimeout");me(this,"events");this.components=e,this.connectionEncryption=new Map,t.connectionEncryption.forEach(o=>{this.connectionEncryption.set(o.protocol,o)}),this.muxers=new Map,t.muxers.forEach(o=>{this.muxers.set(o.protocol,o)}),this.inboundUpgradeTimeout=t.inboundUpgradeTimeout??INBOUND_UPGRADE_TIMEOUT,this.events=e.events}async shouldBlockConnection(e,t,o){const c=this.components.connectionGater[o];if(c!==void 0&&await c(e,t))throw new CodeError$1(`The multiaddr connection is blocked by gater.${o}`,codes.ERR_CONNECTION_INTERCEPTED)}async upgradeInbound(e,t){if(!await this.components.connectionManager.acceptIncomingConnection(e))throw new CodeError$1("connection denied",codes.ERR_CONNECTION_DENIED);let c,l,h,d,g;const m=AbortSignal.timeout(this.inboundUpgradeTimeout),v=()=>{e.abort(new CodeError$1("inbound upgrade timeout",codes.ERR_TIMEOUT))};m.addEventListener("abort",v,{once:!0});try{eventsExports.setMaxListeners?.(1/0,m)}catch{}try{if(await this.components.connectionGater.denyInboundConnection?.(e)===!0)throw new CodeError$1("The multiaddr connection is blocked by gater.acceptConnection",codes.ERR_CONNECTION_INTERCEPTED);this.components.metrics?.trackMultiaddrConnection(e),log$5("starting the inbound connection upgrade");let _=e;if(t?.skipProtection!==!0){const p=this.components.connectionProtector;p!=null&&(log$5("protecting the inbound connection"),_=await p.protect(e))}try{if(c=_,t?.skipEncryption!==!0){({conn:c,remotePeer:l,protocol:g}=await this._encryptInbound(_));const p={..._,...c};await this.shouldBlockConnection(l,p,"denyInboundEncryptedConnection")}else{const p=e.remoteAddr.getPeerId();if(p==null)throw new CodeError$1("inbound connection that skipped encryption must have a peer id",codes.ERR_INVALID_MULTIADDR);const a=peerIdFromString$1(p);g="native",l=a}if(h=c,t?.muxerFactory!=null)d=t.muxerFactory;else if(this.muxers.size>0){const p=await this._multiplexInbound({..._,...c},this.muxers);d=p.muxerFactory,h=p.stream}}catch(p){throw log$5.error("Failed to upgrade inbound connection",p),p}return await this.shouldBlockConnection(l,e,"denyInboundUpgradedConnection"),log$5("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:g,direction:"inbound",maConn:e,upgradedConn:h,muxerFactory:d,remotePeer:l,transient:t?.transient})}finally{m.removeEventListener("abort",v),this.components.connectionManager.afterUpgradeInbound()}}async upgradeOutbound(e,t){const o=e.remoteAddr.getPeerId();let c;o!=null&&(c=peerIdFromString$1(o),await this.shouldBlockConnection(c,e,"denyOutboundConnection"));let l,h,d,g,m;this.components.metrics?.trackMultiaddrConnection(e),log$5("Starting the outbound connection upgrade");let v=e;if(t?.skipProtection!==!0){const _=this.components.connectionProtector;_!=null&&(v=await _.protect(e))}try{if(l=v,t?.skipEncryption!==!0){({conn:l,remotePeer:h,protocol:g}=await this._encryptOutbound(v,c));const _={...v,...l};await this.shouldBlockConnection(h,_,"denyOutboundEncryptedConnection")}else{if(c==null)throw new CodeError$1("Encryption was skipped but no peer id was passed",codes.ERR_INVALID_PEER);g="native",h=c}if(d=l,t?.muxerFactory!=null)m=t.muxerFactory;else if(this.muxers.size>0){const _=await this._multiplexOutbound({...v,...l},this.muxers);m=_.muxerFactory,d=_.stream}}catch(_){throw log$5.error("Failed to upgrade outbound connection",_),await e.close(_),_}return await this.shouldBlockConnection(h,e,"denyOutboundUpgradedConnection"),log$5("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:g,direction:"outbound",maConn:e,upgradedConn:d,muxerFactory:m,remotePeer:h,transient:t?.transient})}_createConnection(e){const{cryptoProtocol:t,direction:o,maConn:c,upgradedConn:l,remotePeer:h,muxerFactory:d,transient:g}=e;let m,v,_;d!=null&&(m=d.createStreamMuxer({direction:o,onIncomingStream:u=>{_!=null&&Promise.resolve().then(async()=>{const y=this.components.registrar.getProtocols(),{stream:b,protocol:w}=await handle(u,y);if(log$5("%s: incoming stream opened on %s",o,w),_==null)return;const T=findIncomingStreamLimit(w,this.components.registrar);if(countStreams(w,"inbound",_)===T){const H=new CodeError$1(`Too many inbound protocol streams for protocol "${w}" - limit ${T}`,codes.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS);throw u.abort(H),H}u.source=b.source,u.sink=b.sink,u.protocol=w,await this.components.peerStore.merge(h,{protocols:[w]}),this.components.metrics?.trackProtocolStream(u,_),this._onStream({connection:_,stream:u,protocol:w})}).catch(async y=>{log$5.error(y),u.timeline.close==null&&await u.close()})}}),v=async(u,y={})=>{if(m==null)throw new CodeError$1("Stream is not multiplexed",codes.ERR_MUXER_UNAVAILABLE);log$5("%s: starting new stream on %s",o,u);const b=await m.newStream();try{if(y.signal==null){log$5("No abort signal was passed while trying to negotiate protocols %s falling back to default timeout",u),y.signal=AbortSignal.timeout(3e4);try{eventsExports.setMaxListeners?.(1/0,y.signal)}catch{}}const{stream:w,protocol:T}=await select(b,u,y),B=findOutgoingStreamLimit(T,this.components.registrar,y);if(countStreams(T,"outbound",_)>=B){const J=new CodeError$1(`Too many outbound protocol streams for protocol "${T}" - limit ${B}`,codes.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS);throw b.abort(J),J}return await this.components.peerStore.merge(h,{protocols:[T]}),b.source=w.source,b.sink=w.sink,b.protocol=T,this.components.metrics?.trackProtocolStream(b,_),b}catch(w){throw log$5.error("could not create new stream",w),b.timeline.close==null&&b.abort(w),w.code!=null?w:new CodeError$1(String(w),codes.ERR_UNSUPPORTED_PROTOCOL)}},Promise.all([m.sink(l.source),l.sink(m.source)]).catch(u=>{log$5.error(u)}));const p=c.timeline;c.timeline=new Proxy(p,{set:(...u)=>(_!=null&&u[1]==="close"&&u[2]!=null&&p.close==null&&(async()=>{try{_.status==="open"&&await _.close()}catch(y){log$5.error(y)}finally{this.events.safeDispatchEvent("connection:close",{detail:_})}})().catch(y=>{log$5.error(y)}),Reflect.set(...u))}),c.timeline.upgraded=Date.now();const a=()=>{throw new CodeError$1("connection is not multiplexed",codes.ERR_CONNECTION_NOT_MULTIPLEXED)};return _=createConnection({remoteAddr:c.remoteAddr,remotePeer:h,status:"open",direction:o,timeline:c.timeline,multiplexer:m?.protocol,encryption:t,transient:g,newStream:v??a,getStreams:()=>m!=null?m.streams:[],close:async u=>{await c.close(u),m!=null&&await m.close(u)},abort:u=>{c.abort(u),m?.abort(u)}}),this.events.safeDispatchEvent("connection:open",{detail:_}),_}_onStream(e){const{connection:t,stream:o,protocol:c}=e,{handler:l,options:h}=this.components.registrar.getHandler(c);if(t.transient&&h.runOnTransientConnection!==!0)throw new CodeError$1("Cannot open protocol stream on transient connection","ERR_TRANSIENT_CONNECTION");l({connection:t,stream:o})}async _encryptInbound(e){const t=Array.from(this.connectionEncryption.keys());log$5("handling inbound crypto protocol selection",t);try{const{stream:o,protocol:c}=await handle(e,t,{writeBytes:!0}),l=this.connectionEncryption.get(c);if(l==null)throw new Error(`no crypto module found for ${c}`);return log$5("encrypting inbound connection..."),{...await l.secureInbound(this.components.peerId,o),protocol:c}}catch(o){throw new CodeError$1(String(o),codes.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,t){const o=Array.from(this.connectionEncryption.keys());log$5("selecting outbound crypto protocol",o);try{const{stream:c,protocol:l}=await select(e,o,{writeBytes:!0}),h=this.connectionEncryption.get(l);if(h==null)throw new Error(`no crypto module found for ${l}`);return log$5("encrypting outbound connection to %p",t),{...await h.secureOutbound(this.components.peerId,c,t),protocol:l}}catch(c){throw new CodeError$1(String(c),codes.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,t){const o=Array.from(t.keys());log$5("outbound selecting muxer %s",o);try{const{stream:c,protocol:l}=await select(e,o,{writeBytes:!0});log$5("%s selected as muxer protocol",l);const h=t.get(l);return{stream:c,muxerFactory:h}}catch(c){throw log$5.error("error multiplexing outbound stream",c),new CodeError$1(String(c),codes.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,t){const o=Array.from(t.keys());log$5("inbound handling muxers %s",o);try{const{stream:c,protocol:l}=await handle(e,o,{writeBytes:!0}),h=t.get(l);return{stream:c,muxerFactory:h}}catch(c){throw log$5.error("error multiplexing inbound stream",c),new CodeError$1(String(c),codes.ERR_MUXER_UNAVAILABLE)}}}const log$4=logger$v("libp2p");var dr,Sr,Nr;class Libp2pNode extends EventEmitter$1{constructor(t){super();nr(this,Sr);me(this,"peerId");me(this,"peerStore");me(this,"contentRouting");me(this,"peerRouting");me(this,"keychain");me(this,"metrics");me(this,"services");me(this,"components");nr(this,dr,void 0);const o=new EventEmitter$1,c=o.dispatchEvent.bind(o);o.dispatchEvent=m=>{const v=c(m),_=this.dispatchEvent(new CustomEvent$1(m.type,{detail:m.detail}));return v||_};try{eventsExports.setMaxListeners?.(1/0,o)}catch{}hr(this,dr,!1),this.peerId=t.peerId,this.services={};const l=this.components=defaultComponents({peerId:t.peerId,events:o,datastore:t.datastore??new MemoryDatastore,connectionGater:connectionGater(t.connectionGater)});this.peerStore=this.configureComponent("peerStore",new PersistentPeerStore(l,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...t.peerStore})),t.metrics!=null&&(this.metrics=this.configureComponent("metrics",t.metrics(this.components))),l.events.addEventListener("peer:update",m=>{if(m.detail.previous==null){const v={id:m.detail.peer.id,multiaddrs:m.detail.peer.addresses.map(_=>_.multiaddr),protocols:m.detail.peer.protocols};l.events.safeDispatchEvent("peer:discovery",{detail:v})}}),t.connectionProtector!=null&&this.configureComponent("connectionProtector",t.connectionProtector(l)),this.components.upgrader=new DefaultUpgrader(this.components,{connectionEncryption:(t.connectionEncryption??[]).map((m,v)=>this.configureComponent(`connection-encryption-${v}`,m(this.components))),muxers:(t.streamMuxers??[]).map((m,v)=>this.configureComponent(`stream-muxers-${v}`,m(this.components))),inboundUpgradeTimeout:t.connectionManager.inboundUpgradeTimeout}),this.configureComponent("transportManager",new DefaultTransportManager(this.components,t.transportManager)),this.configureComponent("connectionManager",new DefaultConnectionManager(this.components,t.connectionManager)),this.configureComponent("registrar",new DefaultRegistrar(this.components)),this.configureComponent("addressManager",new DefaultAddressManager(this.components,t.addresses));const h=DefaultKeyChain.generateOptions();this.keychain=this.configureComponent("keyChain",new DefaultKeyChain(this.components,{...h,...t.keychain}));const d=(t.peerRouters??[]).map((m,v)=>this.configureComponent(`peer-router-${v}`,m(this.components)));this.peerRouting=this.components.peerRouting=this.configureComponent("peerRouting",new DefaultPeerRouting(this.components,{routers:d}));const g=(t.contentRouters??[]).map((m,v)=>this.configureComponent(`content-router-${v}`,m(this.components)));if(this.contentRouting=this.components.contentRouting=this.configureComponent("contentRouting",new CompoundContentRouting(this.components,{routers:g})),(t.peerDiscovery??[]).forEach((m,v)=>{this.configureComponent(`peer-discovery-${v}`,m(this.components)).addEventListener("peer",p=>{ir(this,Sr,Nr).call(this,p)})}),t.transports.forEach((m,v)=>{this.components.transportManager.add(this.configureComponent(`transport-${v}`,m(this.components)))}),t.services!=null)for(const m of Object.keys(t.services)){const v=t.services[m],_=v(this.components);if(_==null){log$4.error("service factory %s returned null or undefined instance",m);continue}this.services[m]=_,this.configureComponent(m,_),_[contentRouting]!=null&&(log$4("registering service %s for content routing",m),g.push(_[contentRouting])),_[peerRouting]!=null&&(log$4("registering service %s for peer routing",m),d.push(_[peerRouting])),_[peerDiscovery]!=null&&(log$4("registering service %s for peer discovery",m),_[peerDiscovery].addEventListener("peer",p=>{ir(this,Sr,Nr).call(this,p)}))}}configureComponent(t,o){return o==null&&log$4.error("component %s was null or undefined",t),this.components[t]=o,o}async start(){if(Ut(this,dr))return;hr(this,dr,!0),log$4("libp2p is starting"),(await this.keychain.listKeys()).find(o=>o.name==="self")==null&&(log$4("importing self key into keychain"),await this.keychain.importPeer("self",this.components.peerId));try{await this.components.beforeStart?.(),await this.components.start(),await this.components.afterStart?.(),this.safeDispatchEvent("start",{detail:this}),log$4("libp2p has started")}catch(o){throw log$4.error("An error occurred starting libp2p",o),await this.stop(),o}}async stop(){Ut(this,dr)&&(log$4("libp2p is stopping"),hr(this,dr,!1),await this.components.beforeStop?.(),await this.components.stop(),await this.components.afterStop?.(),this.safeDispatchEvent("stop",{detail:this}),log$4("libp2p has stopped"))}isStarted(){return Ut(this,dr)}getConnections(t){return this.components.connectionManager.getConnections(t)}getDialQueue(){return this.components.connectionManager.getDialQueue()}getPeers(){const t=new PeerSet;for(const o of this.components.connectionManager.getConnections())t.add(o.remotePeer);return Array.from(t)}async dial(t,o={}){return this.components.connectionManager.openConnection(t,o)}async dialProtocol(t,o,c={}){if(o==null)throw new CodeError$1("no protocols were provided to open a stream",codes.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(o=Array.isArray(o)?o:[o],o.length===0)throw new CodeError$1("no protocols were provided to open a stream",codes.ERR_INVALID_PROTOCOLS_FOR_STREAM);return(await this.dial(t,c)).newStream(o,c)}getMultiaddrs(){return this.components.addressManager.getAddresses()}getProtocols(){return this.components.registrar.getProtocols()}async hangUp(t,o={}){isMultiaddr(t)&&(t=peerIdFromString$1(t.getPeerId()??"")),await this.components.connectionManager.closeConnections(t,o)}async getPublicKey(t,o={}){if(log$4("getPublicKey %p",t),t.publicKey!=null)return t.publicKey;const c=await this.peerStore.get(t);if(c.id.publicKey!=null)return c.id.publicKey;const l=concat$2([fromString$2("/pk/"),t.multihash.digest]),h=await this.contentRouting.get(l,o);return unmarshalPublicKey$1(h),await this.peerStore.patch(t,{publicKey:h}),h}async handle(t,o,c){Array.isArray(t)||(t=[t]),await Promise.all(t.map(async l=>{await this.components.registrar.handle(l,o,c)}))}async unhandle(t){Array.isArray(t)||(t=[t]),await Promise.all(t.map(async o=>{await this.components.registrar.unhandle(o)}))}async register(t,o){return this.components.registrar.register(t,o)}unregister(t){this.components.registrar.unregister(t)}}dr=new WeakMap,Sr=new WeakSet,Nr=function(t){const{detail:o}=t;if(o.id.toString()===this.peerId.toString()){log$4.error(new Error(codes.ERR_DISCOVERED_SELF));return}this.components.peerStore.merge(o.id,{multiaddrs:o.multiaddrs,protocols:o.protocols}).catch(c=>{log$4.error(c)})};async function createLibp2pNode(n){if(n.peerId==null){const e=n.datastore;if(e!=null)try{const t=new DefaultKeyChain({datastore:e},mergeOptions$1(DefaultKeyChain.generateOptions(),n.keychain));n.peerId=await t.exportPeerId("self")}catch(t){if(t.code!=="ERR_NOT_FOUND")throw t}}return n.peerId==null&&(n.peerId=await createEd25519PeerId()),new Libp2pNode(validateConfig(n))}async function createLibp2p(n){const e=await createLibp2pNode(n);return n.start!==!1&&await e.start(),e}const log$3=logger$v("libp2p:webtransport:stream");async function webtransportBiDiStreamToStream(n,e,t,o,c){const l=n.writable.getWriter(),h=n.readable.getReader();await l.ready;function d(){const p=o.findIndex(a=>a===_);p!==-1&&(o.splice(p,1),_.timeline.close=Date.now(),c?.(_))}let g=!1,m=!1;(async function(){const p=await l.closed.catch(a=>a);if(p!=null){const a=p.message;a.includes("aborted by the remote server")||a.includes("STOP_SENDING")||log$3.error(`WebTransport writer closed unexpectedly: streamId=${e} err=${p.message}`)}g=!0,g&&m&&d()})().catch(()=>{log$3.error("WebTransport failed to cleanup closed stream")}),async function(){const p=await h.closed.catch(a=>a);p!=null&&log$3.error(`WebTransport reader closed unexpectedly: streamId=${e} err=${p.message}`),m=!0,g&&m&&d()}().catch(()=>{log$3.error("WebTransport failed to cleanup closed stream")});let v=!1;const _={id:e,status:"open",writeStatus:"ready",readStatus:"ready",abort(p){g||(l.abort(p).catch(a=>{log$3.error("could not abort stream",a)}),g=!0),m=!0,this.status="aborted",this.writeStatus="closed",this.readStatus="closed",this.timeline.reset=this.timeline.close=this.timeline.closeRead=this.timeline.closeWrite=Date.now(),d()},async close(p){this.status="closing",await Promise.all([_.closeRead(p),_.closeWrite(p)]),d(),this.status="closed",this.timeline.close=Date.now()},async closeRead(p){if(!m){this.readStatus="closing";try{await h.cancel()}catch(a){a.toString().includes("RESET_STREAM")===!0&&(g=!0)}this.timeline.closeRead=Date.now(),this.readStatus="closed",m=!0}g&&d()},async closeWrite(p){if(!g){g=!0,this.writeStatus="closing";try{await l.close()}catch(a){a.toString().includes("RESET_STREAM")===!0&&(m=!0)}this.timeline.closeWrite=Date.now(),this.writeStatus="closed"}m&&d()},direction:t,timeline:{open:Date.now()},metadata:{},source:async function*(){for(;;){const p=await h.read();if(p.done){m=!0,g&&d();return}yield new Uint8ArrayList(p.value)}}(),sink:async function(p){if(v)throw new Error("sink already called on stream");v=!0;try{this.writeStatus="writing";for await(const a of p)if(a instanceof Uint8Array)await l.write(a);else for(const u of a)await l.write(u);this.writeStatus="done"}finally{this.timeline.closeWrite=Date.now(),this.writeStatus="closed",await _.closeWrite()}}};return _}function inertDuplex(){return{source:{[Symbol.asyncIterator](){return{async next(){return new Promise(()=>{})}}}},sink:async n=>new Promise(()=>{})}}function isSubset(n,e){return e.filter(o=>!!n.find(c=>equals(o,c))).length===e.length}const multibaseDecoder=Object.values(bases).map(n=>n.decoder).reduce((n,e)=>n.or(e));function decodeCerthashStr(n){return decode$c(multibaseDecoder.decode(n))}function parseMultiaddr(n){const e=n.stringTuples(),{url:t,certhashes:o,remotePeer:c}=e.reduce((l,[h,d])=>{switch(h){case getProtocol("ip6").code:case getProtocol("dns6").code:d?.includes(":")===!0&&(d=`[${d}]`);case getProtocol("ip4").code:case getProtocol("dns4").code:if(l.seenHost||l.seenPort)throw new Error("Invalid multiaddr, saw host and already saw the host or port");return{...l,url:`${l.url}${d??""}`,seenHost:!0};case getProtocol("quic").code:case getProtocol("quic-v1").code:case getProtocol("webtransport").code:if(!l.seenHost||!l.seenPort)throw new Error("Invalid multiaddr, Didn't see host and port, but saw quic/webtransport");return l;case getProtocol("udp").code:if(l.seenPort)throw new Error("Invalid multiaddr, saw port but already saw the port");return{...l,url:`${l.url}:${d??""}`,seenPort:!0};case getProtocol("certhash").code:if(!l.seenHost||!l.seenPort)throw new Error("Invalid multiaddr, saw the certhash before seeing the host and port");return{...l,certhashes:l.certhashes.concat([decodeCerthashStr(d??"")])};case getProtocol("p2p").code:return{...l,remotePeer:peerIdFromString$1(d??"")};default:throw new Error(`unexpected component in multiaddr: ${h} ${getProtocol(h).name} ${d??""} `)}},{url:"https://",seenHost:!1,seenPort:!1,certhashes:[]});return{url:t,certhashes:o,remotePeer:c}}const log$2=logger$v("libp2p:webtransport");var Hr,Vr;class WebTransportTransport{constructor(e,t={}){me(this,"components");me(this,"config");me(this,Hr,"@libp2p/webtransport");me(this,Vr,!0);this.components=e,this.config={maxInboundStreams:t.maxInboundStreams??1e3}}async dial(e,t){t?.signal?.throwIfAborted(),log$2("dialing %s",e);const o=this.components.peerId;if(o===void 0)throw new Error("Need a local peerid");t=t??{};const{url:c,certhashes:l,remotePeer:h}=parseMultiaddr(e);if(h==null)throw new Error("Need a target peerid");if(l.length===0)throw new Error("Expected multiaddr to contain certhashes");let d,g,m=()=>{};try{let v=!1;const _=new WebTransport(`${c}/.well-known/libp2p-webtransport?type=noise`,{serverCertificateHashes:l.map(p=>({algorithm:"sha-256",value:p.digest}))});if(m=p=>{try{if(g!=null){if(g.timeline.close!=null)return;g.timeline.close=Date.now()}if(v)return;_.close(p)}catch(a){log$2.error("error closing wt session",a)}finally{v=!0}},_.closed.then(async()=>{await g?.close()}).catch(p=>{log$2.error("error on remote wt session close",p),g?.abort(p)}).finally(()=>{g==null&&m()}),d=()=>{d!=null&&t.signal?.removeEventListener("abort",d),m()},t.signal?.addEventListener("abort",d),await _.ready,!await this.authenticateWebTransport(_,o,h,l))throw new Error("Failed to authenticate webtransport");return g={close:async p=>{log$2("Closing webtransport"),m()},abort:p=>{log$2("aborting webtransport due to passed err",p),m({closeCode:0,reason:p.message})},remoteAddr:e,timeline:{open:Date.now()},...inertDuplex()},t?.signal?.throwIfAborted(),await t.upgrader.upgradeOutbound(g,{skipEncryption:!0,muxerFactory:this.webtransportMuxer(_,m),skipProtection:!0})}catch(v){throw log$2.error("caught wt session err",v),m({closeCode:0,reason:v.message}),v}finally{d!=null&&t.signal?.removeEventListener("abort",d)}}async authenticateWebTransport(e,t,o,c){const l=await e.createBidirectionalStream(),h=l.writable.getWriter(),d=l.readable.getReader();await h.ready;const g={source:async function*(){for(;;){const _=await d.read();if(_.value!=null&&(yield _.value),_.done)break}}(),sink:async function(_){for await(const p of _)await h.write(p)}},m=noise()(),{remoteExtensions:v}=await m.secureOutbound(t,g,o);if(h.close().catch(_=>{log$2.error(`Failed to close authentication stream writer: ${_.message}`)}),d.cancel().catch(_=>{log$2.error(`Failed to close authentication stream reader: ${_.message}`)}),!isSubset(v?.webtransportCerthashes??[],c.map(_=>_.bytes)))throw new Error("Our certhashes are not a subset of the remote's reported certhashes");return!0}webtransportMuxer(e,t){let o=0;const c=this.config;return{protocol:"webtransport",createStreamMuxer:l=>{typeof l=="function"&&(l={onIncomingStream:l});const h=[];return async function(){//! TODO unclear how to add backpressure here?
const g=e.incomingBidirectionalStreams.getReader();for(;;){const{done:m,value:v}=await g.read();if(m)break;if(h.length>=c.maxInboundStreams)v.writable.close().catch(_=>{log$2.error(`Failed to close inbound stream that crossed our maxInboundStream limit: ${_.message}`)}),v.readable.cancel().catch(_=>{log$2.error(`Failed to close inbound stream that crossed our maxInboundStream limit: ${_.message}`)});else{const _=await webtransportBiDiStreamToStream(v,String(o++),"inbound",h,l?.onStreamEnd);h.push(_),l?.onIncomingStream?.(_)}}}().catch(()=>{log$2.error("WebTransport failed to receive incoming stream")}),{protocol:"webtransport",streams:h,newStream:async g=>{const m=await e.createBidirectionalStream(),v=await webtransportBiDiStreamToStream(m,String(o++),l?.direction??"outbound",h,l?.onStreamEnd);return h.push(v),v},close:async g=>{log$2("Closing webtransport muxer"),t()},abort:g=>{log$2("Aborting webtransport muxer with err:",g),t({closeCode:0,reason:g.message})},...inertDuplex()}}}}createListener(e){throw new Error("Webtransport servers are not supported in Node or the browser")}filter(e){return e.filter(t=>t.protoNames().includes("webtransport"))}}Hr=Symbol.toStringTag,Vr=symbol$1;function webTransport(n={}){return e=>new WebTransportTransport(e,n)}function extractSNI(n){let e;try{e=getProtocol("sni").code}catch{return null}for(const[t,o]of n)if(t===e&&o!==void 0)return o;return null}function hasTLS(n){return n.some(([e,t])=>e===getProtocol("tls").code)}function interpretNext(n,e,t){const o=interpreters[getProtocol(n).name];if(o===void 0)throw new Error(`Can't interpret protocol ${getProtocol(n).name}`);const c=o(e,t);return n===getProtocol("ip6").code?`[${c}]`:c}const interpreters={ip4:(n,e)=>n,ip6:(n,e)=>e.length===0?n:`[${n}]`,tcp:(n,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`tcp://${interpretNext(t[0],t[1]??"",e)}:${n}`},udp:(n,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`udp://${interpretNext(t[0],t[1]??"",e)}:${n}`},dnsaddr:(n,e)=>n,dns4:(n,e)=>n,dns6:(n,e)=>n,dns:(n,e)=>n,ipfs:(n,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(t[0],t[1]??"",e)}/ipfs/${n}`},p2p:(n,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(t[0],t[1]??"",e)}/p2p/${n}`},http:(n,e)=>{const t=hasTLS(e),o=extractSNI(e);if(t&&o!==null)return`https://${o}`;const c=t?"https://":"http://",l=e.pop();if(l===void 0)throw new Error("Unexpected end of multiaddr");let h=interpretNext(l[0],l[1]??"",e);return h=h.replace("tcp://",""),`${c}${h}`},tls:(n,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return interpretNext(t[0],t[1]??"",e)},sni:(n,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return interpretNext(t[0],t[1]??"",e)},https:(n,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");let o=interpretNext(t[0],t[1]??"",e);return o=o.replace("tcp://",""),`https://${o}`},ws:(n,e)=>{const t=hasTLS(e),o=extractSNI(e);if(t&&o!==null)return`wss://${o}`;const c=t?"wss://":"ws://",l=e.pop();if(l===void 0)throw new Error("Unexpected end of multiaddr");let h=interpretNext(l[0],l[1]??"",e);return h=h.replace("tcp://",""),`${c}${h}`},wss:(n,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");let o=interpretNext(t[0],t[1]??"",e);return o=o.replace("tcp://",""),`wss://${o}`},"p2p-websocket-star":(n,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(t[0],t[1]??"",e)}/p2p-websocket-star`},"p2p-webrtc-star":(n,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(t[0],t[1]??"",e)}/p2p-webrtc-star`},"p2p-webrtc-direct":(n,e)=>{const t=e.pop();if(t===void 0)throw new Error("Unexpected end of multiaddr");return`${interpretNext(t[0],t[1]??"",e)}/p2p-webrtc-direct`}};function multiaddrToUri(n,e){const o=multiaddr(n).stringTuples(),c=o.pop();if(c===void 0)throw new Error("Unexpected end of multiaddr");const l=getProtocol(c[0]),h=interpreters[l.name];if(h==null)throw new Error(`No interpreter found for ${l.name}`);let d=h(c[1]??"",o);return e?.assumeHttp!==!1&&c[0]===getProtocol("tcp").code&&(d=d.replace("tcp://","http://"),(c[1]==="443"||c[1]==="80")&&(c[1]==="443"&&(d=d.replace("http://","https://")),d=d.substring(0,d.lastIndexOf(":")))),d}const ready=async n=>{if(n.readyState>=2)throw new Error("socket closed");n.readyState!==1&&await new Promise((e,t)=>{function o(){n.removeEventListener("open",c),n.removeEventListener("error",l)}function c(){o(),e()}function l(h){o(),t(h.error??new Error(`connect ECONNREFUSED ${n.url}`))}n.addEventListener("open",c),n.addEventListener("error",l)})},sink=(n,e)=>(e=e??{},e.closeOnEnd=e.closeOnEnd!==!1,async o=>{for await(const c of o){try{await ready(n)}catch(l){if(l.message==="socket closed")break;throw l}if(n.readyState===n.CLOSING||n.readyState===n.CLOSED)break;n.send(c)}e.closeOnEnd!=null&&n.readyState<=1&&await new Promise((c,l)=>{n.addEventListener("close",h=>{if(h.wasClean||h.code===1006)c();else{const d=Object.assign(new Error("ws error"),{event:h});l(d)}}),setTimeout(()=>{n.close()})})});var dom={},eventIterator={};Object.defineProperty(eventIterator,"__esModule",{value:!0});class EventQueue{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;const t={value:e,done:!1};if(this.pullQueue.length){const o=this.pullQueue.shift();o&&o.resolve(t)}else this.pushQueue.push(Promise.resolve(t)),this.highWaterMark!==void 0&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const t of this.pullQueue)t.reject(e);this.pullQueue.length=0}else{const t=Promise.reject(e);t.catch(()=>{}),this.pushQueue.push(t)}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:e=>{const t=this.pushQueue.shift();return t?(this.lowWaterMark!==void 0&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),t):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((o,c)=>{this.pullQueue.push({resolve:o,reject:c})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}let EventIterator$1=class{constructor(e,{highWaterMark:t=100,lowWaterMark:o=1}={}){const c=new EventQueue;c.highWaterMark=t,c.lowWaterMark=o,c.removeCallback=e({push:l=>c.push(l),stop:()=>c.stop(),fail:l=>c.fail(l),on:(l,h)=>{c.eventHandlers[l]=h}})||(()=>{}),this[Symbol.asyncIterator]=()=>c[Symbol.asyncIterator](),Object.freeze(this)}};eventIterator.EventIterator=EventIterator$1;eventIterator.default=EventIterator$1;Object.defineProperty(dom,"__esModule",{value:!0});const event_iterator_1=eventIterator;var EventIterator=dom.EventIterator=event_iterator_1.EventIterator;function subscribe(n,e,t){return new event_iterator_1.EventIterator(({push:o})=>(this.addEventListener(n,o,e),()=>this.removeEventListener(n,o,e)),t)}dom.subscribe=subscribe;dom.default=event_iterator_1.EventIterator;function isArrayBuffer$1(n){return n instanceof ArrayBuffer||n?.constructor?.name==="ArrayBuffer"&&typeof n?.byteLength=="number"}const source=n=>{n.binaryType="arraybuffer";const e=async()=>{await new Promise((l,h)=>{if(o){l();return}if(c!=null){h(c);return}const d=v=>{n.removeEventListener("open",g),n.removeEventListener("error",m),v()},g=()=>{d(l)},m=v=>{d(()=>{h(v.error??new Error(`connect ECONNREFUSED ${n.url}`))})};n.addEventListener("open",g),n.addEventListener("error",m)})},t=async function*(){const l=new EventIterator(({push:h,stop:d,fail:g})=>{const m=_=>{let p=null;typeof _.data=="string"&&(p=fromString$2(_.data)),isArrayBuffer$1(_.data)&&(p=new Uint8Array(_.data)),_.data instanceof Uint8Array&&(p=_.data),p!=null&&h(p)},v=_=>{g(_.error??new Error("Socket error"))};return n.addEventListener("message",m),n.addEventListener("error",v),n.addEventListener("close",d),()=>{n.removeEventListener("message",m),n.removeEventListener("error",v),n.removeEventListener("close",d)}},{highWaterMark:1/0});await e();for await(const h of l)yield isArrayBuffer$1(h)?new Uint8Array(h):h}();let o=n.readyState===1,c;return n.addEventListener("open",()=>{o=!0,c=null}),n.addEventListener("close",()=>{o=!1,c=null}),n.addEventListener("error",l=>{o||(c=l.error??new Error(`connect ECONNREFUSED ${n.url}`))}),Object.assign(t,{connected:e})},duplex=(n,e)=>{e=e??{};const t=source(n);let o=e.remoteAddress,c=e.remotePort;if(n.url!=null)try{const h=new URL(n.url);o=h.hostname,c=parseInt(h.port,10)}catch{}if(o==null||c==null)throw new Error("Remote connection did not have address and/or port");return{sink:sink(n,e),source:t,connected:async()=>{await t.connected()},close:async()=>{(n.readyState===n.CONNECTING||n.readyState===n.OPEN)&&await new Promise(h=>{n.addEventListener("close",()=>{h()}),n.close()})},destroy:()=>{n.terminate!=null?n.terminate():n.close()},remoteAddress:o,remotePort:c,socket:n}},WebSocket$1=WebSocket,isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";function getDefaultBase(){return isReactNative?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const URL$1=self.URL,defaultBase$1=getDefaultBase();let URLWithLegacySupport$2=class{constructor(e="",t=defaultBase$1){this.super=new URL$1(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return URL$1.createObjectURL(e)}static revokeObjectURL(e){URL$1.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function format$4(n){if(typeof n=="string")return new URL$1(n).toString();if(!(n instanceof URL$1)){const e=n.username&&n.password?`${n.username}:${n.password}@`:"",t=n.auth?n.auth+"@":"",o=n.port?":"+n.port:"",c=n.protocol?n.protocol+"//":"",l=n.host||"",h=n.hostname||"",d=n.search||(n.query?"?"+n.query:""),g=n.hash||"",m=n.pathname||"",v=n.path||m+d;return`${c}${e||t}${l||h+o}${v}${g}`}}var urlBrowser={URLWithLegacySupport:URLWithLegacySupport$2,URLSearchParams:self.URLSearchParams,defaultBase:defaultBase$1,format:format$4};const{URLWithLegacySupport:URLWithLegacySupport$1,format:format$3}=urlBrowser;var relative$1=(n,e={},t={},o)=>{let c=e.protocol?e.protocol.replace(":",""):"http";c=(t[c]||o||c)+":";let l;try{l=new URLWithLegacySupport$1(n)}catch{l={}}const h=Object.assign({},e,{protocol:c||l.protocol,host:e.host||l.host});return new URLWithLegacySupport$1(n,format$3(h)).toString()};const{URLWithLegacySupport,format:format$2,URLSearchParams:URLSearchParams$2,defaultBase}=urlBrowser,relative=relative$1;var isoUrl={URL:URLWithLegacySupport,URLSearchParams:URLSearchParams$2,format:format$2,relative,defaultBase};const map={http:"ws",https:"wss"},def="ws",wsurl=(n,e)=>isoUrl.relative(n,e,map,def);function connect(n,e){const t=typeof window>"u"?"":window.location;e=e??{};const o=wsurl(n,t.toString()),c=new WebSocket$1(o,e.websocket);return duplex(c,e)}function isElectron$1(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var isElectron_1=isElectron$1;const detectElectron=getDefaultExportFromCjs(isElectron_1),isEnvWithDom=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,isElectron=detectElectron(),isBrowser=isEnvWithDom&&!isElectron;typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name;const isWebWorker=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+(()=>"_")()+"ENV"];const DNS4=base$2("dns4"),DNS6=base$2("dns6"),DNSADDR=base$2("dnsaddr"),DNS=or(base$2("dns"),DNSADDR,DNS4,DNS6),IP=or(base$2("ip4"),base$2("ip6")),TCP=or(and(IP,base$2("tcp")),and(DNS,base$2("tcp"))),_WebSockets=or(and(TCP,base$2("ws")),and(DNS,base$2("ws"))),WebSockets$1=or(and(_WebSockets,base$2("p2p")),_WebSockets),_WebSocketsSecure=or(and(TCP,base$2("wss")),and(DNS,base$2("wss")),and(TCP,base$2("tls"),base$2("ws")),and(DNS,base$2("tls"),base$2("ws"))),WebSocketsSecure=or(and(_WebSocketsSecure,base$2("p2p")),_WebSocketsSecure);function makeMatchesFunction(n){function e(t){let o;try{o=multiaddr(t)}catch{return!1}const c=n(o.protoNames());return c===null?!1:c===!0||c===!1?c:c.length===0}return e}function and(...n){function e(t){if(t.length<n.length)return null;let o=t;return n.some(c=>(o=typeof c=="function"?c().partialMatch(t):c.partialMatch(t),Array.isArray(o)&&(t=o),o===null)),o}return{toString:function(){return"{ "+n.join(" ")+" }"},input:n,matches:makeMatchesFunction(e),partialMatch:e}}function or(...n){function e(o){let c=null;return n.some(l=>{const h=typeof l=="function"?l().partialMatch(o):l.partialMatch(o);return h!=null?(c=h,!0):!1}),c}return{toString:function(){return"{ "+n.join(" ")+" }"},input:n,matches:makeMatchesFunction(e),partialMatch:e}}function base$2(n){const e=n;function t(c){let l;try{l=multiaddr(c)}catch{return!1}const h=l.protoNames();return h.length===1&&h[0]===e}function o(c){return c.length===0?null:c[0]===e?c.slice(1):null}return{toString:function(){return e},matches:t,partialMatch:o}}const CODE_P2P=421,CODE_CIRCUIT=290,CLOSE_TIMEOUT=500;function all(n){return n.filter(e=>{if(e.protoCodes().includes(CODE_CIRCUIT))return!1;const t=e.decapsulateCode(CODE_P2P);return WebSockets$1.matches(t)||WebSocketsSecure.matches(t)})}function wss(n){return n.filter(e=>{if(e.protoCodes().includes(CODE_CIRCUIT))return!1;const t=e.decapsulateCode(CODE_P2P);return WebSocketsSecure.matches(t)})}function createListener(){throw new Error("WebSocket Servers can not be created in the browser!")}const log$1=logger$v("libp2p:websockets:socket");function socketToMaConn(n,e,t){t=t??{};const o={async sink(c){t?.signal!=null&&(c=abortableSource(c,t.signal));try{await n.sink(c)}catch(l){l.type!=="aborted"&&log$1.error(l)}},source:t.signal!=null?abortableSource(n.source,t.signal):n.source,remoteAddr:e,timeline:{open:Date.now()},async close(c={}){const l=Date.now();c.signal=c.signal??AbortSignal.timeout(CLOSE_TIMEOUT);const h=()=>{const{host:d,port:g}=o.remoteAddr.toOptions();log$1("timeout closing stream to %s:%s after %dms, destroying it manually",d,g,Date.now()-l),this.abort(new CodeError$1("Socket close timeout","ERR_SOCKET_CLOSE_TIMEOUT"))};c.signal.addEventListener("abort",h);try{await n.close()}catch(d){log$1.error("error closing WebSocket gracefully",d),this.abort(d)}finally{c.signal.removeEventListener("abort",h),o.timeline.close=Date.now()}},abort(c){const{host:l,port:h}=o.remoteAddr.toOptions();log$1("timeout closing stream to %s:%s due to error",l,h,c),n.destroy(),o.timeline.close=Date.now()}};return n.socket.addEventListener("close",()=>{o.timeline.close==null&&(o.timeline.close=Date.now())},{once:!0}),o}const log=logger$v("libp2p:websockets");var jr,zr;class WebSockets{constructor(e){me(this,"init");me(this,jr,"@libp2p/websockets");me(this,zr,!0);this.init=e}async dial(e,t){log("dialing %s",e),t=t??{};const o=await this._connect(e,t),c=socketToMaConn(o,e);log("new outbound connection %s",c.remoteAddr);const l=await t.upgrader.upgradeOutbound(c);return log("outbound connection %s upgraded",c.remoteAddr),l}async _connect(e,t){if(t?.signal?.aborted===!0)throw new AbortError$4;const o=e.toOptions();log("dialing %s:%s",o.host,o.port);const c=pDefer(),l=connect(multiaddrToUri(e),this.init);if(l.socket.addEventListener("error",()=>{const g=new CodeError$1(`Could not connect to ${e.toString()}`,"ERR_CONNECTION_FAILED");log.error("connection error:",g),c.reject(g)}),t.signal==null)return await Promise.race([l.connected(),c.promise]),log("connected %s",e),l;let h;const d=new Promise((g,m)=>{if(h=()=>{m(new AbortError$4),l.close().catch(v=>{log.error("error closing raw socket",v)})},t?.signal?.aborted===!0){h();return}t?.signal?.addEventListener("abort",h)});try{await Promise.race([d,c.promise,l.connected()])}finally{h!=null&&t?.signal?.removeEventListener("abort",h)}return log("connected %s",e),l}createListener(e){return createListener({...this.init,...e})}filter(e){return e=Array.isArray(e)?e:[e],this.init?.filter!=null?this.init?.filter(e):isBrowser||isWebWorker?wss(e):all(e)}}jr=Symbol.toStringTag,zr=symbol$1;function webSockets(n={}){return()=>new WebSockets(n)}const peerIdSymbol=Symbol.for("@libp2p/peer-id"),StrictSign="StrictSign",StrictNoSign="StrictNoSign";var TopicValidatorResult$1;(function(n){n.Accept="accept",n.Ignore="ignore",n.Reject="reject"})(TopicValidatorResult$1||(TopicValidatorResult$1={}));var FaultTolerance$1;(function(n){n[n.FATAL_ALL=0]="FATAL_ALL",n[n.NO_FATAL=1]="NO_FATAL"})(FaultTolerance$1||(FaultTolerance$1={}));class CodeError extends Error{constructor(t,o,c){super(t);me(this,"code");me(this,"props");this.code=o,this.name=c?.name??"CodeError",this.props=c??{}}}var lr;class TypedEventEmitter extends EventTarget{constructor(){super(...arguments);nr(this,lr,new Map)}listenerCount(t){const o=Ut(this,lr).get(t);return o==null?0:o.length}addEventListener(t,o,c){super.addEventListener(t,o,c);let l=Ut(this,lr).get(t);l==null&&(l=[],Ut(this,lr).set(t,l)),l.push({callback:o,once:(c!==!0&&c!==!1&&c?.once)??!1})}removeEventListener(t,o,c){super.removeEventListener(t.toString(),o??null,c);let l=Ut(this,lr).get(t);l!=null&&(l=l.filter(({callback:h})=>h!==o),Ut(this,lr).set(t,l))}dispatchEvent(t){const o=super.dispatchEvent(t);let c=Ut(this,lr).get(t.type);return c==null||(c=c.filter(({once:l})=>!l),Ut(this,lr).set(t.type,c)),o}safeDispatchEvent(t,o){return this.dispatchEvent(new CustomEvent(t,o))}}lr=new WeakMap;class CustomEventPolyfill extends Event{constructor(t,o){super(t,o);me(this,"detail");this.detail=o?.detail}}const CustomEvent=globalThis.CustomEvent??CustomEventPolyfill,inspect=Symbol.for("nodejs.util.inspect.custom"),baseDecoder=Object.values(bases).map(n=>n.decoder).reduce((n,e)=>n.or(e),bases.identity.decoder),LIBP2P_KEY_CODE=114,MARSHALLED_ED225519_PUBLIC_KEY_LENGTH=36,MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH=37;var qr;class PeerIdImpl{constructor(e){me(this,"type");me(this,"multihash");me(this,"privateKey");me(this,"publicKey");me(this,"string");me(this,qr,!0);this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=base58btc.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return CID.createV1(LIBP2P_KEY_CODE,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return equals(this.multihash.bytes,e);if(typeof e=="string")return peerIdFromString(e).equals(this);if(e?.multihash?.bytes!=null)return equals(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[(qr=peerIdSymbol,inspect)](){return`PeerId(${this.toString()})`}}class RSAPeerIdImpl extends PeerIdImpl{constructor(t){super({...t,type:"RSA"});me(this,"type","RSA");me(this,"publicKey");this.publicKey=t.publicKey}}class Ed25519PeerIdImpl extends PeerIdImpl{constructor(t){super({...t,type:"Ed25519"});me(this,"type","Ed25519");me(this,"publicKey");this.publicKey=t.multihash.digest}}class Secp256k1PeerIdImpl extends PeerIdImpl{constructor(t){super({...t,type:"secp256k1"});me(this,"type","secp256k1");me(this,"publicKey");this.publicKey=t.multihash.digest}}function peerIdFromString(n,e){if(n.charAt(0)==="1"||n.charAt(0)==="Q"){const t=decode$c(base58btc.decode(`z${n}`));return n.startsWith("12D")?new Ed25519PeerIdImpl({multihash:t}):n.startsWith("16U")?new Secp256k1PeerIdImpl({multihash:t}):new RSAPeerIdImpl({multihash:t})}return peerIdFromBytes(baseDecoder.decode(n))}function peerIdFromBytes(n){try{const e=decode$c(n);if(e.code===identity.code){if(e.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH)return new Ed25519PeerIdImpl({multihash:e});if(e.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH)return new Secp256k1PeerIdImpl({multihash:e})}if(e.code===sha256$4.code)return new RSAPeerIdImpl({multihash:e})}catch{return peerIdFromCID(CID.decode(n))}throw new Error("Supplied PeerID CID is invalid")}function peerIdFromCID(n){if(n==null||n.multihash==null||n.version==null||n.version===1&&n.code!==LIBP2P_KEY_CODE)throw new Error("Supplied PeerID CID is invalid");const e=n.multihash;if(e.code===sha256$4.code)return new RSAPeerIdImpl({multihash:n.multihash});if(e.code===identity.code){if(e.digest.length===MARSHALLED_ED225519_PUBLIC_KEY_LENGTH)return new Ed25519PeerIdImpl({multihash:n.multihash});if(e.digest.length===MARSHALLED_SECP256K1_PUBLIC_KEY_LENGTH)return new Secp256k1PeerIdImpl({multihash:n.multihash})}throw new Error("Supplied PeerID CID is invalid")}const second=1e3,minute=60*second,FloodsubID="/floodsub/1.0.0",GossipsubIDv10="/meshsub/1.0.0",GossipsubIDv11="/meshsub/1.1.0",GossipsubD=6,GossipsubDlo=4,GossipsubDhi=12,GossipsubDscore=4,GossipsubDout=2,GossipsubHistoryLength=5,GossipsubHistoryGossip=3,GossipsubDlazy=6,GossipsubGossipFactor=.25,GossipsubGossipRetransmission=3,GossipsubHeartbeatInitialDelay=100,GossipsubHeartbeatInterval=second,GossipsubFanoutTTL=minute,GossipsubPrunePeers=16,GossipsubPruneBackoff=minute,GossipsubUnsubscribeBackoff=10*second,GossipsubPruneBackoffTicks=15,GossipsubDirectConnectTicks=300,GossipsubDirectConnectInitialDelay=second,GossipsubOpportunisticGraftTicks=60,GossipsubOpportunisticGraftPeers=2,GossipsubGraftFloodThreshold=10*second,GossipsubMaxIHaveLength=5e3,GossipsubMaxIHaveMessages=10,GossipsubIWantFollowupTime=3*second,GossipsubSeenTTL=2*minute,TimeCacheDuration=120*1e3,ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT",ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE",ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=0,ACCEPT_FROM_WHITELIST_MAX_MESSAGES=128,ACCEPT_FROM_WHITELIST_DURATION_MS=1e3,DEFAULT_METRIC_MESH_MESSAGE_DELIVERIES_WINDOWS=1e3,BACKOFF_SLACK=1;var indexMinimal={},rpc$1={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(n,e,t){if(typeof n!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=n,this.requestDelimited=!!e,this.responseDelimited=!!t}Service.prototype.rpcCall=function n(e,t,o,c,l){if(!c)throw TypeError("request must be specified");var h=this;if(!l)return util.asPromise(n,h,e,t,o,c);if(!h.rpcImpl){setTimeout(function(){l(Error("already ended"))},0);return}try{return h.rpcImpl(e,t[h.requestDelimited?"encodeDelimited":"encode"](c).finish(),function(g,m){if(g)return h.emit("error",g,e),l(g);if(m===null){h.end(!0);return}if(!(m instanceof o))try{m=o[h.responseDelimited?"decodeDelimited":"decode"](m)}catch(v){return h.emit("error",v,e),l(v)}return h.emit("data",m,e),l(null,m)})}catch(d){h.emit("error",d,e),setTimeout(function(){l(d)},0);return}};Service.prototype.end=function n(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(n){var e=n;e.Service=service})(rpc$1);var roots={};(function(n){var e=n;e.build="minimal",e.Writer=writer$1,e.BufferWriter=writer_buffer,e.Reader=reader$2,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc$1,e.roots=roots,e.configure=t;function t(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}t()})(indexMinimal);var minimal=indexMinimal;const protobuf=getDefaultExportFromCjs(minimal),defaultDecodeRpcLimits={maxSubscriptions:1/0,maxMessages:1/0,maxIhaveMessageIDs:1/0,maxIwantMessageIDs:1/0,maxControlMessages:1/0,maxPeerInfos:1/0};function decodeRpc(n,e){e={...e};const t=protobuf.Reader.create(n),o=n.length,c=o===void 0?t.len:t.pos+o,l={};for(;t.pos<c;){const h=t.uint32();switch(h>>>3){case 1:l.subscriptions!=null&&l.subscriptions.length>0||(l.subscriptions=[]),l.subscriptions.length<e.maxSubscriptions?l.subscriptions.push(decodeSubOpts(t,t.uint32())):t.skipType(h&7);break;case 2:l.messages!=null&&l.messages.length>0||(l.messages=[]),l.messages.length<e.maxMessages?l.messages.push(decodeMessage(t,t.uint32())):t.skipType(h&7);break;case 3:l.control=decodeControlMessage(t,t.uint32(),e);break;default:t.skipType(h&7);break}}return l}function decodeSubOpts(n,e){const t=e===void 0?n.len:n.pos+e,o={};for(;n.pos<t;){const c=n.uint32();switch(c>>>3){case 1:o.subscribe=n.bool();break;case 2:o.topic=n.string();break;default:n.skipType(c&7);break}}return o}function decodeMessage(n,e){const t=e===void 0?n.len:n.pos+e,o={};for(;n.pos<t;){const c=n.uint32();switch(c>>>3){case 1:o.from=n.bytes();break;case 2:o.data=n.bytes();break;case 3:o.seqno=n.bytes();break;case 4:o.topic=n.string();break;case 5:o.signature=n.bytes();break;case 6:o.key=n.bytes();break;default:n.skipType(c&7);break}}if(!o.topic)throw Error("missing required 'topic'");return o}function decodeControlMessage(n,e,t){const o=e===void 0?n.len:n.pos+e,c={};for(;n.pos<o;){const l=n.uint32();switch(l>>>3){case 1:c.ihave!=null&&c.ihave.length>0||(c.ihave=[]),c.ihave.length<t.maxControlMessages?c.ihave.push(decodeControlIHave(n,n.uint32(),t)):n.skipType(l&7);break;case 2:c.iwant!=null&&c.iwant.length>0||(c.iwant=[]),c.iwant.length<t.maxControlMessages?c.iwant.push(decodeControlIWant(n,n.uint32(),t)):n.skipType(l&7);break;case 3:c.graft!=null&&c.graft.length>0||(c.graft=[]),c.graft.length<t.maxControlMessages?c.graft.push(decodeControlGraft(n,n.uint32())):n.skipType(l&7);break;case 4:c.prune!=null&&c.prune.length>0||(c.prune=[]),c.prune.length<t.maxControlMessages?c.prune.push(decodeControlPrune(n,n.uint32(),t)):n.skipType(l&7);break;default:n.skipType(l&7);break}}return c}function decodeControlIHave(n,e,t){const o=e===void 0?n.len:n.pos+e,c={};for(;n.pos<o;){const l=n.uint32();switch(l>>>3){case 1:c.topicID=n.string();break;case 2:c.messageIDs!=null&&c.messageIDs.length>0||(c.messageIDs=[]),t.maxIhaveMessageIDs-- >0?c.messageIDs.push(n.bytes()):n.skipType(l&7);break;default:n.skipType(l&7);break}}return c}function decodeControlIWant(n,e,t){const o=e===void 0?n.len:n.pos+e,c={};for(;n.pos<o;){const l=n.uint32();switch(l>>>3){case 1:c.messageIDs!=null&&c.messageIDs.length>0||(c.messageIDs=[]),t.maxIwantMessageIDs-- >0?c.messageIDs.push(n.bytes()):n.skipType(l&7);break;default:n.skipType(l&7);break}}return c}function decodeControlGraft(n,e){const t=e===void 0?n.len:n.pos+e,o={};for(;n.pos<t;){const c=n.uint32();switch(c>>>3){case 1:o.topicID=n.string();break;default:n.skipType(c&7);break}}return o}function decodeControlPrune(n,e,t){const o=e===void 0?n.len:n.pos+e,c={};for(;n.pos<o;){const l=n.uint32();switch(l>>>3){case 1:c.topicID=n.string();break;case 2:c.peers!=null&&c.peers.length>0||(c.peers=[]),t.maxPeerInfos-- >0?c.peers.push(decodePeerInfo(n,n.uint32())):n.skipType(l&7);break;case 3:c.backoff=n.uint64();break;default:n.skipType(l&7);break}}return c}function decodePeerInfo(n,e){const t=e===void 0?n.len:n.pos+e,o={};for(;n.pos<t;){const c=n.uint32();switch(c>>>3){case 1:o.peerID=n.bytes();break;case 2:o.signedPeerRecord=n.bytes();break;default:n.skipType(c&7);break}}return o}function commonjsRequire$1(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rpc={exports:{}};(function(n){(function(e,t){typeof commonjsRequire$1=="function"&&n&&n.exports&&(n.exports=t(minimal))})(commonjsGlobal,function(e){var t=e.Reader,o=e.Writer,c=e.util,l=e.roots.default||(e.roots.default={});return l.RPC=function(){function h(g){if(this.subscriptions=[],this.messages=[],g)for(var m=Object.keys(g),v=0;v<m.length;++v)g[m[v]]!=null&&(this[m[v]]=g[m[v]])}h.prototype.subscriptions=c.emptyArray,h.prototype.messages=c.emptyArray,h.prototype.control=null;var d;return Object.defineProperty(h.prototype,"_control",{get:c.oneOfGetter(d=["control"]),set:c.oneOfSetter(d)}),h.encode=function(m,v){if(v||(v=o.create()),m.subscriptions!=null&&m.subscriptions.length)for(var _=0;_<m.subscriptions.length;++_)l.RPC.SubOpts.encode(m.subscriptions[_],v.uint32(10).fork()).ldelim();if(m.messages!=null&&m.messages.length)for(var _=0;_<m.messages.length;++_)l.RPC.Message.encode(m.messages[_],v.uint32(18).fork()).ldelim();return m.control!=null&&Object.hasOwnProperty.call(m,"control")&&l.RPC.ControlMessage.encode(m.control,v.uint32(26).fork()).ldelim(),v},h.decode=function(m,v){m instanceof t||(m=t.create(m));for(var _=v===void 0?m.len:m.pos+v,p=new l.RPC;m.pos<_;){var a=m.uint32();switch(a>>>3){case 1:p.subscriptions&&p.subscriptions.length||(p.subscriptions=[]),p.subscriptions.push(l.RPC.SubOpts.decode(m,m.uint32()));break;case 2:p.messages&&p.messages.length||(p.messages=[]),p.messages.push(l.RPC.Message.decode(m,m.uint32()));break;case 3:p.control=l.RPC.ControlMessage.decode(m,m.uint32());break;default:m.skipType(a&7);break}}return p},h.fromObject=function(m){if(m instanceof l.RPC)return m;var v=new l.RPC;if(m.subscriptions){if(!Array.isArray(m.subscriptions))throw TypeError(".RPC.subscriptions: array expected");v.subscriptions=[];for(var _=0;_<m.subscriptions.length;++_){if(typeof m.subscriptions[_]!="object")throw TypeError(".RPC.subscriptions: object expected");v.subscriptions[_]=l.RPC.SubOpts.fromObject(m.subscriptions[_])}}if(m.messages){if(!Array.isArray(m.messages))throw TypeError(".RPC.messages: array expected");v.messages=[];for(var _=0;_<m.messages.length;++_){if(typeof m.messages[_]!="object")throw TypeError(".RPC.messages: object expected");v.messages[_]=l.RPC.Message.fromObject(m.messages[_])}}if(m.control!=null){if(typeof m.control!="object")throw TypeError(".RPC.control: object expected");v.control=l.RPC.ControlMessage.fromObject(m.control)}return v},h.toObject=function(m,v){v||(v={});var _={};if((v.arrays||v.defaults)&&(_.subscriptions=[],_.messages=[]),m.subscriptions&&m.subscriptions.length){_.subscriptions=[];for(var p=0;p<m.subscriptions.length;++p)_.subscriptions[p]=l.RPC.SubOpts.toObject(m.subscriptions[p],v)}if(m.messages&&m.messages.length){_.messages=[];for(var p=0;p<m.messages.length;++p)_.messages[p]=l.RPC.Message.toObject(m.messages[p],v)}return m.control!=null&&m.hasOwnProperty("control")&&(_.control=l.RPC.ControlMessage.toObject(m.control,v),v.oneofs&&(_._control="control")),_},h.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},h.SubOpts=function(){function g(v){if(v)for(var _=Object.keys(v),p=0;p<_.length;++p)v[_[p]]!=null&&(this[_[p]]=v[_[p]])}g.prototype.subscribe=null,g.prototype.topic=null;var m;return Object.defineProperty(g.prototype,"_subscribe",{get:c.oneOfGetter(m=["subscribe"]),set:c.oneOfSetter(m)}),Object.defineProperty(g.prototype,"_topic",{get:c.oneOfGetter(m=["topic"]),set:c.oneOfSetter(m)}),g.encode=function(_,p){return p||(p=o.create()),_.subscribe!=null&&Object.hasOwnProperty.call(_,"subscribe")&&p.uint32(8).bool(_.subscribe),_.topic!=null&&Object.hasOwnProperty.call(_,"topic")&&p.uint32(18).string(_.topic),p},g.decode=function(_,p){_ instanceof t||(_=t.create(_));for(var a=p===void 0?_.len:_.pos+p,u=new l.RPC.SubOpts;_.pos<a;){var y=_.uint32();switch(y>>>3){case 1:u.subscribe=_.bool();break;case 2:u.topic=_.string();break;default:_.skipType(y&7);break}}return u},g.fromObject=function(_){if(_ instanceof l.RPC.SubOpts)return _;var p=new l.RPC.SubOpts;return _.subscribe!=null&&(p.subscribe=!!_.subscribe),_.topic!=null&&(p.topic=String(_.topic)),p},g.toObject=function(_,p){p||(p={});var a={};return _.subscribe!=null&&_.hasOwnProperty("subscribe")&&(a.subscribe=_.subscribe,p.oneofs&&(a._subscribe="subscribe")),_.topic!=null&&_.hasOwnProperty("topic")&&(a.topic=_.topic,p.oneofs&&(a._topic="topic")),a},g.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},g}(),h.Message=function(){function g(v){if(v)for(var _=Object.keys(v),p=0;p<_.length;++p)v[_[p]]!=null&&(this[_[p]]=v[_[p]])}g.prototype.from=null,g.prototype.data=null,g.prototype.seqno=null,g.prototype.topic="",g.prototype.signature=null,g.prototype.key=null;var m;return Object.defineProperty(g.prototype,"_from",{get:c.oneOfGetter(m=["from"]),set:c.oneOfSetter(m)}),Object.defineProperty(g.prototype,"_data",{get:c.oneOfGetter(m=["data"]),set:c.oneOfSetter(m)}),Object.defineProperty(g.prototype,"_seqno",{get:c.oneOfGetter(m=["seqno"]),set:c.oneOfSetter(m)}),Object.defineProperty(g.prototype,"_signature",{get:c.oneOfGetter(m=["signature"]),set:c.oneOfSetter(m)}),Object.defineProperty(g.prototype,"_key",{get:c.oneOfGetter(m=["key"]),set:c.oneOfSetter(m)}),g.encode=function(_,p){return p||(p=o.create()),_.from!=null&&Object.hasOwnProperty.call(_,"from")&&p.uint32(10).bytes(_.from),_.data!=null&&Object.hasOwnProperty.call(_,"data")&&p.uint32(18).bytes(_.data),_.seqno!=null&&Object.hasOwnProperty.call(_,"seqno")&&p.uint32(26).bytes(_.seqno),p.uint32(34).string(_.topic),_.signature!=null&&Object.hasOwnProperty.call(_,"signature")&&p.uint32(42).bytes(_.signature),_.key!=null&&Object.hasOwnProperty.call(_,"key")&&p.uint32(50).bytes(_.key),p},g.decode=function(_,p){_ instanceof t||(_=t.create(_));for(var a=p===void 0?_.len:_.pos+p,u=new l.RPC.Message;_.pos<a;){var y=_.uint32();switch(y>>>3){case 1:u.from=_.bytes();break;case 2:u.data=_.bytes();break;case 3:u.seqno=_.bytes();break;case 4:u.topic=_.string();break;case 5:u.signature=_.bytes();break;case 6:u.key=_.bytes();break;default:_.skipType(y&7);break}}if(!u.hasOwnProperty("topic"))throw c.ProtocolError("missing required 'topic'",{instance:u});return u},g.fromObject=function(_){if(_ instanceof l.RPC.Message)return _;var p=new l.RPC.Message;return _.from!=null&&(typeof _.from=="string"?c.base64.decode(_.from,p.from=c.newBuffer(c.base64.length(_.from)),0):_.from.length&&(p.from=_.from)),_.data!=null&&(typeof _.data=="string"?c.base64.decode(_.data,p.data=c.newBuffer(c.base64.length(_.data)),0):_.data.length&&(p.data=_.data)),_.seqno!=null&&(typeof _.seqno=="string"?c.base64.decode(_.seqno,p.seqno=c.newBuffer(c.base64.length(_.seqno)),0):_.seqno.length&&(p.seqno=_.seqno)),_.topic!=null&&(p.topic=String(_.topic)),_.signature!=null&&(typeof _.signature=="string"?c.base64.decode(_.signature,p.signature=c.newBuffer(c.base64.length(_.signature)),0):_.signature.length&&(p.signature=_.signature)),_.key!=null&&(typeof _.key=="string"?c.base64.decode(_.key,p.key=c.newBuffer(c.base64.length(_.key)),0):_.key.length&&(p.key=_.key)),p},g.toObject=function(_,p){p||(p={});var a={};return p.defaults&&(a.topic=""),_.from!=null&&_.hasOwnProperty("from")&&(a.from=p.bytes===String?c.base64.encode(_.from,0,_.from.length):p.bytes===Array?Array.prototype.slice.call(_.from):_.from,p.oneofs&&(a._from="from")),_.data!=null&&_.hasOwnProperty("data")&&(a.data=p.bytes===String?c.base64.encode(_.data,0,_.data.length):p.bytes===Array?Array.prototype.slice.call(_.data):_.data,p.oneofs&&(a._data="data")),_.seqno!=null&&_.hasOwnProperty("seqno")&&(a.seqno=p.bytes===String?c.base64.encode(_.seqno,0,_.seqno.length):p.bytes===Array?Array.prototype.slice.call(_.seqno):_.seqno,p.oneofs&&(a._seqno="seqno")),_.topic!=null&&_.hasOwnProperty("topic")&&(a.topic=_.topic),_.signature!=null&&_.hasOwnProperty("signature")&&(a.signature=p.bytes===String?c.base64.encode(_.signature,0,_.signature.length):p.bytes===Array?Array.prototype.slice.call(_.signature):_.signature,p.oneofs&&(a._signature="signature")),_.key!=null&&_.hasOwnProperty("key")&&(a.key=p.bytes===String?c.base64.encode(_.key,0,_.key.length):p.bytes===Array?Array.prototype.slice.call(_.key):_.key,p.oneofs&&(a._key="key")),a},g.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},g}(),h.ControlMessage=function(){function g(m){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],m)for(var v=Object.keys(m),_=0;_<v.length;++_)m[v[_]]!=null&&(this[v[_]]=m[v[_]])}return g.prototype.ihave=c.emptyArray,g.prototype.iwant=c.emptyArray,g.prototype.graft=c.emptyArray,g.prototype.prune=c.emptyArray,g.encode=function(v,_){if(_||(_=o.create()),v.ihave!=null&&v.ihave.length)for(var p=0;p<v.ihave.length;++p)l.RPC.ControlIHave.encode(v.ihave[p],_.uint32(10).fork()).ldelim();if(v.iwant!=null&&v.iwant.length)for(var p=0;p<v.iwant.length;++p)l.RPC.ControlIWant.encode(v.iwant[p],_.uint32(18).fork()).ldelim();if(v.graft!=null&&v.graft.length)for(var p=0;p<v.graft.length;++p)l.RPC.ControlGraft.encode(v.graft[p],_.uint32(26).fork()).ldelim();if(v.prune!=null&&v.prune.length)for(var p=0;p<v.prune.length;++p)l.RPC.ControlPrune.encode(v.prune[p],_.uint32(34).fork()).ldelim();return _},g.decode=function(v,_){v instanceof t||(v=t.create(v));for(var p=_===void 0?v.len:v.pos+_,a=new l.RPC.ControlMessage;v.pos<p;){var u=v.uint32();switch(u>>>3){case 1:a.ihave&&a.ihave.length||(a.ihave=[]),a.ihave.push(l.RPC.ControlIHave.decode(v,v.uint32()));break;case 2:a.iwant&&a.iwant.length||(a.iwant=[]),a.iwant.push(l.RPC.ControlIWant.decode(v,v.uint32()));break;case 3:a.graft&&a.graft.length||(a.graft=[]),a.graft.push(l.RPC.ControlGraft.decode(v,v.uint32()));break;case 4:a.prune&&a.prune.length||(a.prune=[]),a.prune.push(l.RPC.ControlPrune.decode(v,v.uint32()));break;default:v.skipType(u&7);break}}return a},g.fromObject=function(v){if(v instanceof l.RPC.ControlMessage)return v;var _=new l.RPC.ControlMessage;if(v.ihave){if(!Array.isArray(v.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");_.ihave=[];for(var p=0;p<v.ihave.length;++p){if(typeof v.ihave[p]!="object")throw TypeError(".RPC.ControlMessage.ihave: object expected");_.ihave[p]=l.RPC.ControlIHave.fromObject(v.ihave[p])}}if(v.iwant){if(!Array.isArray(v.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");_.iwant=[];for(var p=0;p<v.iwant.length;++p){if(typeof v.iwant[p]!="object")throw TypeError(".RPC.ControlMessage.iwant: object expected");_.iwant[p]=l.RPC.ControlIWant.fromObject(v.iwant[p])}}if(v.graft){if(!Array.isArray(v.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");_.graft=[];for(var p=0;p<v.graft.length;++p){if(typeof v.graft[p]!="object")throw TypeError(".RPC.ControlMessage.graft: object expected");_.graft[p]=l.RPC.ControlGraft.fromObject(v.graft[p])}}if(v.prune){if(!Array.isArray(v.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");_.prune=[];for(var p=0;p<v.prune.length;++p){if(typeof v.prune[p]!="object")throw TypeError(".RPC.ControlMessage.prune: object expected");_.prune[p]=l.RPC.ControlPrune.fromObject(v.prune[p])}}return _},g.toObject=function(v,_){_||(_={});var p={};if((_.arrays||_.defaults)&&(p.ihave=[],p.iwant=[],p.graft=[],p.prune=[]),v.ihave&&v.ihave.length){p.ihave=[];for(var a=0;a<v.ihave.length;++a)p.ihave[a]=l.RPC.ControlIHave.toObject(v.ihave[a],_)}if(v.iwant&&v.iwant.length){p.iwant=[];for(var a=0;a<v.iwant.length;++a)p.iwant[a]=l.RPC.ControlIWant.toObject(v.iwant[a],_)}if(v.graft&&v.graft.length){p.graft=[];for(var a=0;a<v.graft.length;++a)p.graft[a]=l.RPC.ControlGraft.toObject(v.graft[a],_)}if(v.prune&&v.prune.length){p.prune=[];for(var a=0;a<v.prune.length;++a)p.prune[a]=l.RPC.ControlPrune.toObject(v.prune[a],_)}return p},g.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},g}(),h.ControlIHave=function(){function g(v){if(this.messageIDs=[],v)for(var _=Object.keys(v),p=0;p<_.length;++p)v[_[p]]!=null&&(this[_[p]]=v[_[p]])}g.prototype.topicID=null,g.prototype.messageIDs=c.emptyArray;var m;return Object.defineProperty(g.prototype,"_topicID",{get:c.oneOfGetter(m=["topicID"]),set:c.oneOfSetter(m)}),g.encode=function(_,p){if(p||(p=o.create()),_.topicID!=null&&Object.hasOwnProperty.call(_,"topicID")&&p.uint32(10).string(_.topicID),_.messageIDs!=null&&_.messageIDs.length)for(var a=0;a<_.messageIDs.length;++a)p.uint32(18).bytes(_.messageIDs[a]);return p},g.decode=function(_,p){_ instanceof t||(_=t.create(_));for(var a=p===void 0?_.len:_.pos+p,u=new l.RPC.ControlIHave;_.pos<a;){var y=_.uint32();switch(y>>>3){case 1:u.topicID=_.string();break;case 2:u.messageIDs&&u.messageIDs.length||(u.messageIDs=[]),u.messageIDs.push(_.bytes());break;default:_.skipType(y&7);break}}return u},g.fromObject=function(_){if(_ instanceof l.RPC.ControlIHave)return _;var p=new l.RPC.ControlIHave;if(_.topicID!=null&&(p.topicID=String(_.topicID)),_.messageIDs){if(!Array.isArray(_.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");p.messageIDs=[];for(var a=0;a<_.messageIDs.length;++a)typeof _.messageIDs[a]=="string"?c.base64.decode(_.messageIDs[a],p.messageIDs[a]=c.newBuffer(c.base64.length(_.messageIDs[a])),0):_.messageIDs[a].length&&(p.messageIDs[a]=_.messageIDs[a])}return p},g.toObject=function(_,p){p||(p={});var a={};if((p.arrays||p.defaults)&&(a.messageIDs=[]),_.topicID!=null&&_.hasOwnProperty("topicID")&&(a.topicID=_.topicID,p.oneofs&&(a._topicID="topicID")),_.messageIDs&&_.messageIDs.length){a.messageIDs=[];for(var u=0;u<_.messageIDs.length;++u)a.messageIDs[u]=p.bytes===String?c.base64.encode(_.messageIDs[u],0,_.messageIDs[u].length):p.bytes===Array?Array.prototype.slice.call(_.messageIDs[u]):_.messageIDs[u]}return a},g.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},g}(),h.ControlIWant=function(){function g(m){if(this.messageIDs=[],m)for(var v=Object.keys(m),_=0;_<v.length;++_)m[v[_]]!=null&&(this[v[_]]=m[v[_]])}return g.prototype.messageIDs=c.emptyArray,g.encode=function(v,_){if(_||(_=o.create()),v.messageIDs!=null&&v.messageIDs.length)for(var p=0;p<v.messageIDs.length;++p)_.uint32(10).bytes(v.messageIDs[p]);return _},g.decode=function(v,_){v instanceof t||(v=t.create(v));for(var p=_===void 0?v.len:v.pos+_,a=new l.RPC.ControlIWant;v.pos<p;){var u=v.uint32();switch(u>>>3){case 1:a.messageIDs&&a.messageIDs.length||(a.messageIDs=[]),a.messageIDs.push(v.bytes());break;default:v.skipType(u&7);break}}return a},g.fromObject=function(v){if(v instanceof l.RPC.ControlIWant)return v;var _=new l.RPC.ControlIWant;if(v.messageIDs){if(!Array.isArray(v.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");_.messageIDs=[];for(var p=0;p<v.messageIDs.length;++p)typeof v.messageIDs[p]=="string"?c.base64.decode(v.messageIDs[p],_.messageIDs[p]=c.newBuffer(c.base64.length(v.messageIDs[p])),0):v.messageIDs[p].length&&(_.messageIDs[p]=v.messageIDs[p])}return _},g.toObject=function(v,_){_||(_={});var p={};if((_.arrays||_.defaults)&&(p.messageIDs=[]),v.messageIDs&&v.messageIDs.length){p.messageIDs=[];for(var a=0;a<v.messageIDs.length;++a)p.messageIDs[a]=_.bytes===String?c.base64.encode(v.messageIDs[a],0,v.messageIDs[a].length):_.bytes===Array?Array.prototype.slice.call(v.messageIDs[a]):v.messageIDs[a]}return p},g.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},g}(),h.ControlGraft=function(){function g(v){if(v)for(var _=Object.keys(v),p=0;p<_.length;++p)v[_[p]]!=null&&(this[_[p]]=v[_[p]])}g.prototype.topicID=null;var m;return Object.defineProperty(g.prototype,"_topicID",{get:c.oneOfGetter(m=["topicID"]),set:c.oneOfSetter(m)}),g.encode=function(_,p){return p||(p=o.create()),_.topicID!=null&&Object.hasOwnProperty.call(_,"topicID")&&p.uint32(10).string(_.topicID),p},g.decode=function(_,p){_ instanceof t||(_=t.create(_));for(var a=p===void 0?_.len:_.pos+p,u=new l.RPC.ControlGraft;_.pos<a;){var y=_.uint32();switch(y>>>3){case 1:u.topicID=_.string();break;default:_.skipType(y&7);break}}return u},g.fromObject=function(_){if(_ instanceof l.RPC.ControlGraft)return _;var p=new l.RPC.ControlGraft;return _.topicID!=null&&(p.topicID=String(_.topicID)),p},g.toObject=function(_,p){p||(p={});var a={};return _.topicID!=null&&_.hasOwnProperty("topicID")&&(a.topicID=_.topicID,p.oneofs&&(a._topicID="topicID")),a},g.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},g}(),h.ControlPrune=function(){function g(v){if(this.peers=[],v)for(var _=Object.keys(v),p=0;p<_.length;++p)v[_[p]]!=null&&(this[_[p]]=v[_[p]])}g.prototype.topicID=null,g.prototype.peers=c.emptyArray,g.prototype.backoff=null;var m;return Object.defineProperty(g.prototype,"_topicID",{get:c.oneOfGetter(m=["topicID"]),set:c.oneOfSetter(m)}),Object.defineProperty(g.prototype,"_backoff",{get:c.oneOfGetter(m=["backoff"]),set:c.oneOfSetter(m)}),g.encode=function(_,p){if(p||(p=o.create()),_.topicID!=null&&Object.hasOwnProperty.call(_,"topicID")&&p.uint32(10).string(_.topicID),_.peers!=null&&_.peers.length)for(var a=0;a<_.peers.length;++a)l.RPC.PeerInfo.encode(_.peers[a],p.uint32(18).fork()).ldelim();return _.backoff!=null&&Object.hasOwnProperty.call(_,"backoff")&&p.uint32(24).uint64(_.backoff),p},g.decode=function(_,p){_ instanceof t||(_=t.create(_));for(var a=p===void 0?_.len:_.pos+p,u=new l.RPC.ControlPrune;_.pos<a;){var y=_.uint32();switch(y>>>3){case 1:u.topicID=_.string();break;case 2:u.peers&&u.peers.length||(u.peers=[]),u.peers.push(l.RPC.PeerInfo.decode(_,_.uint32()));break;case 3:u.backoff=_.uint64();break;default:_.skipType(y&7);break}}return u},g.fromObject=function(_){if(_ instanceof l.RPC.ControlPrune)return _;var p=new l.RPC.ControlPrune;if(_.topicID!=null&&(p.topicID=String(_.topicID)),_.peers){if(!Array.isArray(_.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");p.peers=[];for(var a=0;a<_.peers.length;++a){if(typeof _.peers[a]!="object")throw TypeError(".RPC.ControlPrune.peers: object expected");p.peers[a]=l.RPC.PeerInfo.fromObject(_.peers[a])}}return _.backoff!=null&&(c.Long?(p.backoff=c.Long.fromValue(_.backoff)).unsigned=!0:typeof _.backoff=="string"?p.backoff=parseInt(_.backoff,10):typeof _.backoff=="number"?p.backoff=_.backoff:typeof _.backoff=="object"&&(p.backoff=new c.LongBits(_.backoff.low>>>0,_.backoff.high>>>0).toNumber(!0))),p},g.toObject=function(_,p){p||(p={});var a={};if((p.arrays||p.defaults)&&(a.peers=[]),_.topicID!=null&&_.hasOwnProperty("topicID")&&(a.topicID=_.topicID,p.oneofs&&(a._topicID="topicID")),_.peers&&_.peers.length){a.peers=[];for(var u=0;u<_.peers.length;++u)a.peers[u]=l.RPC.PeerInfo.toObject(_.peers[u],p)}return _.backoff!=null&&_.hasOwnProperty("backoff")&&(typeof _.backoff=="number"?a.backoff=p.longs===String?String(_.backoff):_.backoff:a.backoff=p.longs===String?c.Long.prototype.toString.call(_.backoff):p.longs===Number?new c.LongBits(_.backoff.low>>>0,_.backoff.high>>>0).toNumber(!0):_.backoff,p.oneofs&&(a._backoff="backoff")),a},g.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},g}(),h.PeerInfo=function(){function g(v){if(v)for(var _=Object.keys(v),p=0;p<_.length;++p)v[_[p]]!=null&&(this[_[p]]=v[_[p]])}g.prototype.peerID=null,g.prototype.signedPeerRecord=null;var m;return Object.defineProperty(g.prototype,"_peerID",{get:c.oneOfGetter(m=["peerID"]),set:c.oneOfSetter(m)}),Object.defineProperty(g.prototype,"_signedPeerRecord",{get:c.oneOfGetter(m=["signedPeerRecord"]),set:c.oneOfSetter(m)}),g.encode=function(_,p){return p||(p=o.create()),_.peerID!=null&&Object.hasOwnProperty.call(_,"peerID")&&p.uint32(10).bytes(_.peerID),_.signedPeerRecord!=null&&Object.hasOwnProperty.call(_,"signedPeerRecord")&&p.uint32(18).bytes(_.signedPeerRecord),p},g.decode=function(_,p){_ instanceof t||(_=t.create(_));for(var a=p===void 0?_.len:_.pos+p,u=new l.RPC.PeerInfo;_.pos<a;){var y=_.uint32();switch(y>>>3){case 1:u.peerID=_.bytes();break;case 2:u.signedPeerRecord=_.bytes();break;default:_.skipType(y&7);break}}return u},g.fromObject=function(_){if(_ instanceof l.RPC.PeerInfo)return _;var p=new l.RPC.PeerInfo;return _.peerID!=null&&(typeof _.peerID=="string"?c.base64.decode(_.peerID,p.peerID=c.newBuffer(c.base64.length(_.peerID)),0):_.peerID.length&&(p.peerID=_.peerID)),_.signedPeerRecord!=null&&(typeof _.signedPeerRecord=="string"?c.base64.decode(_.signedPeerRecord,p.signedPeerRecord=c.newBuffer(c.base64.length(_.signedPeerRecord)),0):_.signedPeerRecord.length&&(p.signedPeerRecord=_.signedPeerRecord)),p},g.toObject=function(_,p){p||(p={});var a={};return _.peerID!=null&&_.hasOwnProperty("peerID")&&(a.peerID=p.bytes===String?c.base64.encode(_.peerID,0,_.peerID.length):p.bytes===Array?Array.prototype.slice.call(_.peerID):_.peerID,p.oneofs&&(a._peerID="peerID")),_.signedPeerRecord!=null&&_.hasOwnProperty("signedPeerRecord")&&(a.signedPeerRecord=p.bytes===String?c.base64.encode(_.signedPeerRecord,0,_.signedPeerRecord.length):p.bytes===Array?Array.prototype.slice.call(_.signedPeerRecord):_.signedPeerRecord,p.oneofs&&(a._signedPeerRecord="signedPeerRecord")),a},g.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},g}(),h}(),l})})(rpc);var rpcExports=rpc.exports;const cjs=getDefaultExportFromCjs(rpcExports),{RPC}=cjs;class MessageCache{constructor(e,t,o){me(this,"gossip");me(this,"msgs",new Map);me(this,"msgIdToStrFn");me(this,"history",[]);me(this,"notValidatedCount",0);this.gossip=e,this.msgIdToStrFn=o;for(let c=0;c<t;c++)this.history[c]=[]}get size(){return this.msgs.size}put(e,t,o=!1){const{msgIdStr:c}=e;return this.msgs.has(c)?!1:(this.msgs.set(c,{message:t,validated:o,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...e,topic:t.topic}),o||this.notValidatedCount++,!0)}observeDuplicate(e,t){const o=this.msgs.get(e);o!=null&&!o.validated&&o.originatingPeers.add(t)}get(e){return this.msgs.get(this.msgIdToStrFn(e))?.message}getWithIWantCount(e,t){const o=this.msgs.get(e);if(o==null)return null;const c=(o.iwantCounts.get(t)??0)+1;return o.iwantCounts.set(t,c),{msg:o.message,count:c}}getGossipIDs(e){const t=new Map;for(let o=0;o<this.gossip;o++)this.history[o].forEach(c=>{if((this.msgs.get(c.msgIdStr)?.validated??!1)&&e.has(c.topic)){let h=t.get(c.topic);h==null&&(h=[],t.set(c.topic,h)),h.push(c.msgId)}});return t}validate(e){const t=this.msgs.get(e);if(t==null)return null;t.validated||this.notValidatedCount--;const{message:o,originatingPeers:c}=t;return t.validated=!0,t.originatingPeers=new Set,{message:o,originatingPeers:c}}shift(){this.history[this.history.length-1].forEach(t=>{const o=this.msgs.get(t.msgIdStr);o!=null&&(this.msgs.delete(t.msgIdStr),o.validated||this.notValidatedCount--)}),this.history.pop(),this.history.unshift([])}remove(e){const t=this.msgs.get(e);return t==null?null:(this.msgs.delete(e),t)}}var SignaturePolicy;(function(n){n.StrictSign="StrictSign",n.StrictNoSign="StrictNoSign"})(SignaturePolicy||(SignaturePolicy={}));var PublishConfigType;(function(n){n[n.Signing=0]="Signing",n[n.Anonymous=1]="Anonymous"})(PublishConfigType||(PublishConfigType={}));var RejectReason;(function(n){n.Error="error",n.Ignore="ignore",n.Reject="reject",n.Blacklisted="blacklisted"})(RejectReason||(RejectReason={}));var ValidateError;(function(n){n.InvalidSignature="invalid_signature",n.InvalidSeqno="invalid_seqno",n.InvalidPeerId="invalid_peerid",n.SignaturePresent="signature_present",n.SeqnoPresent="seqno_present",n.FromPresent="from_present",n.TransformFailed="transform_failed"})(ValidateError||(ValidateError={}));var MessageStatus;(function(n){n.duplicate="duplicate",n.invalid="invalid",n.valid="valid"})(MessageStatus||(MessageStatus={}));function rejectReasonFromAcceptance(n){switch(n){case TopicValidatorResult$1.Ignore:return RejectReason.Ignore;case TopicValidatorResult$1.Reject:return RejectReason.Reject;default:throw new Error("Unreachable")}}var MessageSource;(function(n){n.forward="forward",n.publish="publish"})(MessageSource||(MessageSource={}));var InclusionReason;(function(n){n.Fanout="fanout",n.Random="random",n.Subscribed="subscribed",n.Outbound="outbound",n.NotEnough="not_enough",n.Opportunistic="opportunistic"})(InclusionReason||(InclusionReason={}));var ChurnReason;(function(n){n.Dc="disconnected",n.BadScore="bad_score",n.Prune="prune",n.Excess="excess"})(ChurnReason||(ChurnReason={}));var ScorePenalty;(function(n){n.GraftBackoff="graft_backoff",n.BrokenPromise="broken_promise",n.MessageDeficit="message_deficit",n.IPColocation="IP_colocation"})(ScorePenalty||(ScorePenalty={}));var IHaveIgnoreReason;(function(n){n.LowScore="low_score",n.MaxIhave="max_ihave",n.MaxIasked="max_iasked"})(IHaveIgnoreReason||(IHaveIgnoreReason={}));var ScoreThreshold;(function(n){n.graylist="graylist",n.publish="publish",n.gossip="gossip",n.mesh="mesh"})(ScoreThreshold||(ScoreThreshold={}));function getMetrics(n,e,t){return{protocolsEnabled:n.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:n.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:n.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:n.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEventsFanout:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_fanout_total",help:"Number of times we include peers in a topic mesh for fanout reasons",labelNames:["topic"]}),meshPeerInclusionEventsRandom:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_random_total",help:"Number of times we include peers in a topic mesh for random reasons",labelNames:["topic"]}),meshPeerInclusionEventsSubscribed:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_subscribed_total",help:"Number of times we include peers in a topic mesh for subscribed reasons",labelNames:["topic"]}),meshPeerInclusionEventsOutbound:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_outbound_total",help:"Number of times we include peers in a topic mesh for outbound reasons",labelNames:["topic"]}),meshPeerInclusionEventsNotEnough:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_not_enough_total",help:"Number of times we include peers in a topic mesh for not_enough reasons",labelNames:["topic"]}),meshPeerInclusionEventsOpportunistic:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_opportunistic_total",help:"Number of times we include peers in a topic mesh for opportunistic reasons",labelNames:["topic"]}),meshPeerInclusionEventsUnknown:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_unknown_total",help:"Number of times we include peers in a topic mesh for unknown reasons",labelNames:["topic"]}),meshPeerChurnEventsDisconnected:n.gauge({name:"gossipsub_peer_churn_events_disconnected_total",help:"Number of times we remove peers in a topic mesh for disconnected reasons",labelNames:["topic"]}),meshPeerChurnEventsBadScore:n.gauge({name:"gossipsub_peer_churn_events_bad_score_total",help:"Number of times we remove peers in a topic mesh for bad_score reasons",labelNames:["topic"]}),meshPeerChurnEventsPrune:n.gauge({name:"gossipsub_peer_churn_events_prune_total",help:"Number of times we remove peers in a topic mesh for prune reasons",labelNames:["topic"]}),meshPeerChurnEventsExcess:n.gauge({name:"gossipsub_peer_churn_events_excess_total",help:"Number of times we remove peers in a topic mesh for excess reasons",labelNames:["topic"]}),meshPeerChurnEventsUnknown:n.gauge({name:"gossipsub_peer_churn_events_unknown_total",help:"Number of times we remove peers in a topic mesh for unknown reasons",labelNames:["topic"]}),peersPerProtocol:n.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:n.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:n.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),acceptedMessagesTotal:n.gauge({name:"gossipsub_accepted_messages_total",help:"Total accepted messages for each topic",labelNames:["topic"]}),ignoredMessagesTotal:n.gauge({name:"gossipsub_ignored_messages_total",help:"Total ignored messages for each topic",labelNames:["topic"]}),rejectedMessagesTotal:n.gauge({name:"gossipsub_rejected_messages_total",help:"Total rejected messages for each topic",labelNames:["topic"]}),unknownValidationResultsTotal:n.gauge({name:"gossipsub_unknown_validation_results_total",help:"Total unknown validation results for each topic",labelNames:["topic"]}),asyncValidationMcacheHit:n.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),asyncValidationDelayFromFirstSeenSec:n.histogram({name:"gossipsub_async_validation_delay_from_first_seen",help:"Async validation report delay from first seen in second",labelNames:["topic"],buckets:[.01,.03,.1,.3,1,3,10]}),asyncValidationUnknownFirstSeen:n.gauge({name:"gossipsub_async_validation_unknown_first_seen_count_total",help:"Async validation report unknown first seen value for message"}),peerReadStreamError:n.gauge({name:"gossipsub_peer_read_stream_err_count_total",help:"Peer read stream error"}),rpcRecvBytes:n.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:n.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:n.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:n.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:n.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:n.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:n.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:n.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:n.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcDataError:n.gauge({name:"gossipsub_rpc_data_err_count_total",help:"RPC data error"}),rpcRecvError:n.gauge({name:"gossipsub_rpc_recv_err_count_total",help:"RPC recv error"}),rpcRecvNotAccepted:n.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:n.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:n.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:n.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:n.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:n.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:n.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:n.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:n.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:n.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:n.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeersByTopic:n.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),directPeersPublishedTotal:n.gauge({name:"gossipsub_direct_peers_published_total",help:"Total direct peers that we publish a msg to",labelNames:["topic"]}),floodsubPeersPublishedTotal:n.gauge({name:"gossipsub_floodsub_peers_published_total",help:"Total floodsub peers that we publish a msg to",labelNames:["topic"]}),meshPeersPublishedTotal:n.gauge({name:"gossipsub_mesh_peers_published_total",help:"Total mesh peers that we publish a msg to",labelNames:["topic"]}),fanoutPeersPublishedTotal:n.gauge({name:"gossipsub_fanout_peers_published_total",help:"Total fanout peers that we publish a msg to",labelNames:["topic"]}),msgPublishBytes:n.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgPublishTime:n.histogram({name:"gossipsub_msg_publish_seconds",help:"Total time in seconds to publish a message",buckets:[.001,.002,.005,.01,.1,.5,1],labelNames:["topic"]}),msgForwardCount:n.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:n.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:n.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedError:n.gauge({name:"gossipsub_msg_received_error_total",help:"Total count of recv msgs error",labelNames:["topic"]}),prevalidationInvalidTotal:n.gauge({name:"gossipsub_pre_validation_invalid_total",help:"Total count of invalid messages received",labelNames:["topic"]}),prevalidationValidTotal:n.gauge({name:"gossipsub_pre_validation_valid_total",help:"Total count of valid messages received",labelNames:["topic"]}),prevalidationDuplicateTotal:n.gauge({name:"gossipsub_pre_validation_duplicate_total",help:"Total count of duplicate messages received",labelNames:["topic"]}),prevalidationUnknownTotal:n.gauge({name:"gossipsub_pre_validation_unknown_status_total",help:"Total count of unknown_status messages received",labelNames:["topic"]}),msgReceivedInvalid:n.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["error"]}),msgReceivedInvalidByTopic:n.gauge({name:"gossipsub_msg_received_invalid_by_topic_total",help:"Tracks specific invalid message by topic",labelNames:["topic"]}),duplicateMsgDeliveryDelay:n.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*t.maxMeshMessageDeliveriesWindowSec,.5*t.maxMeshMessageDeliveriesWindowSec,Number(t.maxMeshMessageDeliveriesWindowSec),2*t.maxMeshMessageDeliveriesWindowSec,4*t.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:n.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),duplicateMsgIgnored:n.gauge({name:"gossisub_ignored_published_duplicate_msgs_total",help:"Total count of published duplicate message ignored by topic",labelNames:["topic"]}),scoreFnCalls:n.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:n.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:n.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:n.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:n.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores"}),scoreWeights:n.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:n.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:n.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:n.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*t.behaviourPenaltyThreshold,.5*t.behaviourPenaltyThreshold,Number(t.behaviourPenaltyThreshold),2*t.behaviourPenaltyThreshold,4*t.behaviourPenaltyThreshold]}),ihaveRcvIgnored:n.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:n.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:n.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:n.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:n.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:n.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:n.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedFromDuplicate:n.gauge({name:"gossipsub_iwant_promise_resolved_from_duplicate_total",help:"Total count of resolved IWANT promises from duplicate messages"}),iwantPromiseResolvedPeers:n.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:n.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantMessagePruned:n.gauge({name:"gossipsub_iwant_message_pruned",help:"Total count of pruned IWANT messages"}),iwantPromiseDeliveryTime:n.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*t.gossipPromiseExpireSec,Number(t.gossipPromiseExpireSec),2*t.gossipPromiseExpireSec,4*t.gossipPromiseExpireSec]}),iwantPromiseUntracked:n.gauge({name:"gossip_iwant_promise_untracked",help:"Total count of untracked IWANT promise"}),connectedPeersBackoffSec:n.histogram({name:"gossipsub_connected_peers_backoff_seconds",help:"Backoff time in seconds",buckets:[1,2,4,10,20,60,120]}),cacheSize:n.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:n.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),mcacheNotValidatedCount:n.gauge({name:"gossipsub_mcache_not_validated_count",help:"Current mcache msg count not validated"}),fastMsgIdCacheCollision:n.gauge({name:"gossipsub_fastmsgid_cache_collision_total",help:"Total count of key collisions on fastmsgid cache put"}),newConnectionCount:n.gauge({name:"gossipsub_new_connection_total",help:"Total new connection by status",labelNames:["status"]}),topicStrToLabel:e,toTopic(o){return this.topicStrToLabel.get(o)??o},onJoin(o){this.topicSubscriptionStatus.set({topicStr:o},1),this.meshPeerCounts.set({topicStr:o},0)},onLeave(o){this.topicSubscriptionStatus.set({topicStr:o},0),this.meshPeerCounts.set({topicStr:o},0)},onAddToMesh(o,c,l){const h=this.toTopic(o);switch(c){case InclusionReason.Fanout:this.meshPeerInclusionEventsFanout.inc({topic:h},l);break;case InclusionReason.Random:this.meshPeerInclusionEventsRandom.inc({topic:h},l);break;case InclusionReason.Subscribed:this.meshPeerInclusionEventsSubscribed.inc({topic:h},l);break;case InclusionReason.Outbound:this.meshPeerInclusionEventsOutbound.inc({topic:h},l);break;case InclusionReason.NotEnough:this.meshPeerInclusionEventsNotEnough.inc({topic:h},l);break;case InclusionReason.Opportunistic:this.meshPeerInclusionEventsOpportunistic.inc({topic:h},l);break;default:this.meshPeerInclusionEventsUnknown.inc({topic:h},l);break}},onRemoveFromMesh(o,c,l){const h=this.toTopic(o);switch(c){case ChurnReason.Dc:this.meshPeerChurnEventsDisconnected.inc({topic:h},l);break;case ChurnReason.BadScore:this.meshPeerChurnEventsBadScore.inc({topic:h},l);break;case ChurnReason.Prune:this.meshPeerChurnEventsPrune.inc({topic:h},l);break;case ChurnReason.Excess:this.meshPeerChurnEventsExcess.inc({topic:h},l);break;default:this.meshPeerChurnEventsUnknown.inc({topic:h},l);break}},onReportValidation(o,c,l){if(this.asyncValidationMcacheHit.inc({hit:o!=null?"hit":"miss"}),o!=null){const h=this.toTopic(o.message.topic);switch(c){case TopicValidatorResult$1.Accept:this.acceptedMessagesTotal.inc({topic:h});break;case TopicValidatorResult$1.Ignore:this.ignoredMessagesTotal.inc({topic:h});break;case TopicValidatorResult$1.Reject:this.rejectedMessagesTotal.inc({topic:h});break;default:this.unknownValidationResultsTotal.inc({topic:h});break}}l!=null?this.asyncValidationDelayFromFirstSeenSec.observe((Date.now()-l)/1e3):this.asyncValidationUnknownFirstSeen.inc()},onScorePenalty(o){this.scoringPenalties.inc({penalty:o},1)},onIhaveRcv(o,c,l){const h=this.toTopic(o);this.ihaveRcvMsgids.inc({topic:h},c),this.ihaveRcvNotSeenMsgids.inc({topic:h},l)},onIwantRcv(o,c){for(const[l,h]of o){const d=this.toTopic(l);this.iwantRcvMsgids.inc({topic:d},h)}this.iwantRcvDonthaveMsgids.inc(c)},onForwardMsg(o,c){const l=this.toTopic(o);this.msgForwardCount.inc({topic:l},1),this.msgForwardPeers.inc({topic:l},c)},onPublishMsg(o,c,l,h,d){const g=this.toTopic(o);this.msgPublishCount.inc({topic:g},1),this.msgPublishBytes.inc({topic:g},l*h),this.msgPublishPeersByTopic.inc({topic:g},l),this.directPeersPublishedTotal.inc({topic:g},c.direct),this.floodsubPeersPublishedTotal.inc({topic:g},c.floodsub),this.meshPeersPublishedTotal.inc({topic:g},c.mesh),this.fanoutPeersPublishedTotal.inc({topic:g},c.fanout),this.msgPublishTime.observe({topic:g},d/1e3)},onMsgRecvPreValidation(o){const c=this.toTopic(o);this.msgReceivedPreValidation.inc({topic:c},1)},onMsgRecvError(o){const c=this.toTopic(o);this.msgReceivedError.inc({topic:c},1)},onPrevalidationResult(o,c){const l=this.toTopic(o);switch(c){case MessageStatus.duplicate:this.prevalidationDuplicateTotal.inc({topic:l});break;case MessageStatus.invalid:this.prevalidationInvalidTotal.inc({topic:l});break;case MessageStatus.valid:this.prevalidationValidTotal.inc({topic:l});break;default:this.prevalidationUnknownTotal.inc({topic:l});break}},onMsgRecvInvalid(o,c){const l=this.toTopic(o),h=c.reason===RejectReason.Error?c.error:c.reason;this.msgReceivedInvalid.inc({error:h},1),this.msgReceivedInvalidByTopic.inc({topic:l},1)},onDuplicateMsgDelivery(o,c,l){if(this.duplicateMsgDeliveryDelay.observe(c/1e3),l){const h=this.toTopic(o);this.duplicateMsgLateDelivery.inc({topic:h},1)}},onPublishDuplicateMsg(o){const c=this.toTopic(o);this.duplicateMsgIgnored.inc({topic:c},1)},onPeerReadStreamError(){this.peerReadStreamError.inc(1)},onRpcRecvError(){this.rpcRecvError.inc(1)},onRpcDataError(){this.rpcDataError.inc(1)},onRpcRecv(o,c){this.rpcRecvBytes.inc(c),this.rpcRecvCount.inc(1),o.subscriptions!=null&&this.rpcRecvSubscription.inc(o.subscriptions.length),o.messages!=null&&this.rpcRecvMessage.inc(o.messages.length),o.control!=null&&(this.rpcRecvControl.inc(1),o.control.ihave!=null&&this.rpcRecvIHave.inc(o.control.ihave.length),o.control.iwant!=null&&this.rpcRecvIWant.inc(o.control.iwant.length),o.control.graft!=null&&this.rpcRecvGraft.inc(o.control.graft.length),o.control.prune!=null&&this.rpcRecvPrune.inc(o.control.prune.length))},onRpcSent(o,c){if(this.rpcSentBytes.inc(c),this.rpcSentCount.inc(1),o.subscriptions!=null&&this.rpcSentSubscription.inc(o.subscriptions.length),o.messages!=null&&this.rpcSentMessage.inc(o.messages.length),o.control!=null){const l=o.control.ihave?.length??0,h=o.control.iwant?.length??0,d=o.control.graft?.length??0,g=o.control.prune?.length??0;l>0&&this.rpcSentIHave.inc(l),h>0&&this.rpcSentIWant.inc(h),d>0&&this.rpcSentGraft.inc(d),g>0&&this.rpcSentPrune.inc(g),(l>0||h>0||d>0||g>0)&&this.rpcSentControl.inc(1)}},registerScores(o,c){let l=0,h=0,d=0,g=0;for(const m of o)m>=c.graylistThreshold&&l++,m>=c.publishThreshold&&h++,m>=c.gossipThreshold&&d++,m>=0&&g++;this.peersByScoreThreshold.set({threshold:ScoreThreshold.graylist},l),this.peersByScoreThreshold.set({threshold:ScoreThreshold.publish},h),this.peersByScoreThreshold.set({threshold:ScoreThreshold.gossip},d),this.peersByScoreThreshold.set({threshold:ScoreThreshold.mesh},g),this.score.set(o)},registerScoreWeights(o){for(const[c,l]of o.byTopic)this.scoreWeights.set({topic:c,p:"p1"},l.p1w),this.scoreWeights.set({topic:c,p:"p2"},l.p2w),this.scoreWeights.set({topic:c,p:"p3"},l.p3w),this.scoreWeights.set({topic:c,p:"p3b"},l.p3bw),this.scoreWeights.set({topic:c,p:"p4"},l.p4w);this.scoreWeights.set({p:"p5"},o.p5w),this.scoreWeights.set({p:"p6"},o.p6w),this.scoreWeights.set({p:"p7"},o.p7w)},registerScorePerMesh(o,c){const l=new Map;o.forEach((h,d)=>{const g=this.topicStrToLabel.get(d)??"unknown";let m=l.get(g);m==null&&(m=new Set,l.set(g,m)),h.forEach(v=>m?.add(v))});for(const[h,d]of l){const g=[];d.forEach(m=>{g.push(c.get(m)??0)}),this.scorePerMesh.set({topic:h},g)}}}}const ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS",defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3},defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function createPeerScoreParams(n={}){return{...defaultPeerScoreParams,...n,topics:n.topics!=null?Object.entries(n.topics).reduce((e,[t,o])=>(e[t]=createTopicScoreParams(o),e),{}):{}}}function createTopicScoreParams(n={}){return{...defaultTopicScoreParams,...n}}function validatePeerScoreParams(n){for(const[e,t]of Object.entries(n.topics))try{validateTopicScoreParams(t)}catch(o){throw new CodeError(`invalid score parameters for topic ${e}: ${o.message}`,ERR_INVALID_PEER_SCORE_PARAMS)}if(n.topicScoreCap<0)throw new CodeError("invalid topic score cap; must be positive (or 0 for no cap)",ERR_INVALID_PEER_SCORE_PARAMS);if(n.appSpecificScore===null||n.appSpecificScore===void 0)throw new CodeError("missing application specific score function",ERR_INVALID_PEER_SCORE_PARAMS);if(n.IPColocationFactorWeight>0)throw new CodeError("invalid IPColocationFactorWeight; must be negative (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(n.IPColocationFactorWeight!==0&&n.IPColocationFactorThreshold<1)throw new CodeError("invalid IPColocationFactorThreshold; must be at least 1",ERR_INVALID_PEER_SCORE_PARAMS);if(n.behaviourPenaltyWeight>0)throw new CodeError("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(n.behaviourPenaltyWeight!==0&&(n.behaviourPenaltyDecay<=0||n.behaviourPenaltyDecay>=1))throw new CodeError("invalid BehaviourPenaltyDecay; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS);if(n.decayInterval<1e3)throw new CodeError("invalid DecayInterval; must be at least 1s",ERR_INVALID_PEER_SCORE_PARAMS);if(n.decayToZero<=0||n.decayToZero>=1)throw new CodeError("invalid DecayToZero; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS)}function validateTopicScoreParams(n){if(n.topicWeight<0)throw new CodeError("invalid topic weight; must be >= 0",ERR_INVALID_PEER_SCORE_PARAMS);if(n.timeInMeshQuantum===0)throw new CodeError("invalid TimeInMeshQuantum; must be non zero",ERR_INVALID_PEER_SCORE_PARAMS);if(n.timeInMeshWeight<0)throw new CodeError("invalid TimeInMeshWeight; must be positive (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(n.timeInMeshWeight!==0&&n.timeInMeshQuantum<=0)throw new CodeError("invalid TimeInMeshQuantum; must be positive",ERR_INVALID_PEER_SCORE_PARAMS);if(n.timeInMeshWeight!==0&&n.timeInMeshCap<=0)throw new CodeError("invalid TimeInMeshCap; must be positive",ERR_INVALID_PEER_SCORE_PARAMS);if(n.firstMessageDeliveriesWeight<0)throw new CodeError("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(n.firstMessageDeliveriesWeight!==0&&(n.firstMessageDeliveriesDecay<=0||n.firstMessageDeliveriesDecay>=1))throw new CodeError("invalid FirstMessageDeliveriesDecay; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS);if(n.firstMessageDeliveriesWeight!==0&&n.firstMessageDeliveriesCap<=0)throw new CodeError("invalid FirstMessageDeliveriesCap; must be positive",ERR_INVALID_PEER_SCORE_PARAMS);if(n.meshMessageDeliveriesWeight>0)throw new CodeError("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(n.meshMessageDeliveriesWeight!==0&&(n.meshMessageDeliveriesDecay<=0||n.meshMessageDeliveriesDecay>=1))throw new CodeError("invalid MeshMessageDeliveriesDecay; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS);if(n.meshMessageDeliveriesWeight!==0&&n.meshMessageDeliveriesCap<=0)throw new CodeError("invalid MeshMessageDeliveriesCap; must be positive",ERR_INVALID_PEER_SCORE_PARAMS);if(n.meshMessageDeliveriesWeight!==0&&n.meshMessageDeliveriesThreshold<=0)throw new CodeError("invalid MeshMessageDeliveriesThreshold; must be positive",ERR_INVALID_PEER_SCORE_PARAMS);if(n.meshMessageDeliveriesWindow<0)throw new CodeError("invalid MeshMessageDeliveriesWindow; must be non-negative",ERR_INVALID_PEER_SCORE_PARAMS);if(n.meshMessageDeliveriesWeight!==0&&n.meshMessageDeliveriesActivation<1e3)throw new CodeError("invalid MeshMessageDeliveriesActivation; must be at least 1s",ERR_INVALID_PEER_SCORE_PARAMS);if(n.meshFailurePenaltyWeight>0)throw new CodeError("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(n.meshFailurePenaltyWeight!==0&&(n.meshFailurePenaltyDecay<=0||n.meshFailurePenaltyDecay>=1))throw new CodeError("invalid MeshFailurePenaltyDecay; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS);if(n.invalidMessageDeliveriesWeight>0)throw new CodeError("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)",ERR_INVALID_PEER_SCORE_PARAMS);if(n.invalidMessageDeliveriesDecay<=0||n.invalidMessageDeliveriesDecay>=1)throw new CodeError("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1",ERR_INVALID_PEER_SCORE_PARAMS)}const defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function createPeerScoreThresholds(n={}){return{...defaultPeerScoreThresholds,...n}}function removeItemsFromSet(n,e,t=()=>!0){const o=new Set;if(e<=0)return o;for(const c of n){if(o.size>=e)break;t(c)&&(o.add(c),n.delete(c))}return o}function removeFirstNItemsFromSet(n,e){return removeItemsFromSet(n,e,()=>!0)}class MapDef extends Map{constructor(t){super();me(this,"getDefault");this.getDefault=t}getOrDefault(t){let o=super.get(t);return o===void 0&&(o=this.getDefault(),this.set(t,o)),o}}function computeScore(n,e,t,o){let c=0;Object.entries(e.topics).forEach(([h,d])=>{const g=t.topics[h];if(g===void 0)return;let m=0;if(d.inMesh){let a=d.meshTime/g.timeInMeshQuantum;a>g.timeInMeshCap&&(a=g.timeInMeshCap),m+=a*g.timeInMeshWeight}let v=d.firstMessageDeliveries;if(v>g.firstMessageDeliveriesCap&&(v=g.firstMessageDeliveriesCap),m+=v*g.firstMessageDeliveriesWeight,d.meshMessageDeliveriesActive&&d.meshMessageDeliveries<g.meshMessageDeliveriesThreshold){const a=g.meshMessageDeliveriesThreshold-d.meshMessageDeliveries,u=a*a;m+=u*g.meshMessageDeliveriesWeight}const _=d.meshFailurePenalty;m+=_*g.meshFailurePenaltyWeight;const p=d.invalidMessageDeliveries*d.invalidMessageDeliveries;m+=p*g.invalidMessageDeliveriesWeight,c+=m*g.topicWeight}),t.topicScoreCap>0&&c>t.topicScoreCap&&(c=t.topicScoreCap);const l=t.appSpecificScore(n);if(c+=l*t.appSpecificWeight,e.knownIPs.forEach(h=>{if(t.IPColocationFactorWhitelist.has(h))return;const d=o.get(h),g=d!=null?d.size:0;if(g>t.IPColocationFactorThreshold){const m=g-t.IPColocationFactorThreshold,v=m*m;c+=v*t.IPColocationFactorWeight}}),e.behaviourPenalty>t.behaviourPenaltyThreshold){const h=e.behaviourPenalty-t.behaviourPenaltyThreshold,d=h*h;c+=d*t.behaviourPenaltyWeight}return c}function Denque(n,t){var t=t||{};this._capacity=t.capacity,this._head=0,this._tail=0,Array.isArray(n)?this._fromArray(n):(this._capacityMask=3,this._list=new Array(4))}Denque.prototype.peekAt=function n(e){var t=e;if(t===(t|0)){var o=this.size();if(!(t>=o||t<-o))return t<0&&(t+=o),t=this._head+t&this._capacityMask,this._list[t]}};Denque.prototype.get=function n(e){return this.peekAt(e)};Denque.prototype.peek=function n(){if(this._head!==this._tail)return this._list[this._head]};Denque.prototype.peekFront=function n(){return this.peek()};Denque.prototype.peekBack=function n(){return this.peekAt(-1)};Object.defineProperty(Denque.prototype,"length",{get:function n(){return this.size()}});Denque.prototype.size=function n(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Denque.prototype.unshift=function n(e){if(arguments.length===0)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Denque.prototype.shift=function n(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}};Denque.prototype.push=function n(e){if(arguments.length===0)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Denque.prototype.pop=function n(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var o=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),o}};Denque.prototype.removeOne=function n(e){var t=e;if(t===(t|0)&&this._head!==this._tail){var o=this.size(),c=this._list.length;if(!(t>=o||t<-o)){t<0&&(t+=o),t=this._head+t&this._capacityMask;var l=this._list[t],h;if(e<o/2){for(h=e;h>0;h--)this._list[t]=this._list[t=t-1+c&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+c&this._capacityMask}else{for(h=o-1-e;h>0;h--)this._list[t]=this._list[t=t+1+c&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+c&this._capacityMask}return l}}};Denque.prototype.remove=function n(e,t){var o=e,c,l=t;if(o===(o|0)&&this._head!==this._tail){var h=this.size(),d=this._list.length;if(!(o>=h||o<-h||t<1)){if(o<0&&(o+=h),t===1||!t)return c=new Array(1),c[0]=this.removeOne(o),c;if(o===0&&o+t>=h)return c=this.toArray(),this.clear(),c;o+t>h&&(t=h-o);var g;for(c=new Array(t),g=0;g<t;g++)c[g]=this._list[this._head+o+g&this._capacityMask];if(o=this._head+o&this._capacityMask,e+t===h){for(this._tail=this._tail-t+d&this._capacityMask,g=t;g>0;g--)this._list[o=o+1+d&this._capacityMask]=void 0;return c}if(e===0){for(this._head=this._head+t+d&this._capacityMask,g=t-1;g>0;g--)this._list[o=o+1+d&this._capacityMask]=void 0;return c}if(o<h/2){for(this._head=this._head+e+t+d&this._capacityMask,g=e;g>0;g--)this.unshift(this._list[o=o-1+d&this._capacityMask]);for(o=this._head-1+d&this._capacityMask;l>0;)this._list[o=o-1+d&this._capacityMask]=void 0,l--;e<0&&(this._tail=o)}else{for(this._tail=o,o=o+t+d&this._capacityMask,g=h-(t+e);g>0;g--)this.push(this._list[o++]);for(o=this._tail;l>0;)this._list[o=o+1+d&this._capacityMask]=void 0,l--}return this._head<2&&this._tail>1e4&&this._tail<=d>>>2&&this._shrinkArray(),c}}};Denque.prototype.splice=function n(e,t){var o=e;if(o===(o|0)){var c=this.size();if(o<0&&(o+=c),!(o>c))if(arguments.length>2){var l,h,d,g=arguments.length,m=this._list.length,v=2;if(!c||o<c/2){for(h=new Array(o),l=0;l<o;l++)h[l]=this._list[this._head+l&this._capacityMask];for(t===0?(d=[],o>0&&(this._head=this._head+o+m&this._capacityMask)):(d=this.remove(o,t),this._head=this._head+o+m&this._capacityMask);g>v;)this.unshift(arguments[--g]);for(l=o;l>0;l--)this.unshift(h[l-1])}else{h=new Array(c-(o+t));var _=h.length;for(l=0;l<_;l++)h[l]=this._list[this._head+o+t+l&this._capacityMask];for(t===0?(d=[],o!=c&&(this._tail=this._head+o+m&this._capacityMask)):(d=this.remove(o,t),this._tail=this._tail-_+m&this._capacityMask);v<g;)this.push(arguments[v++]);for(l=0;l<_;l++)this.push(h[l])}return d}else return this.remove(o,t)}};Denque.prototype.clear=function n(){this._list=new Array(this._list.length),this._head=0,this._tail=0};Denque.prototype.isEmpty=function n(){return this._head===this._tail};Denque.prototype.toArray=function n(){return this._copyArray(!1)};Denque.prototype._fromArray=function n(e){var t=e.length,o=this._nextPowerOf2(t);this._list=new Array(o),this._capacityMask=o-1,this._tail=t;for(var c=0;c<t;c++)this._list[c]=e[c]};Denque.prototype._copyArray=function n(e,t){var o=this._list,c=o.length,l=this.length;if(t=t|l,t==l&&this._head<this._tail)return this._list.slice(this._head,this._tail);var h=new Array(t),d=0,g;if(e||this._head>this._tail){for(g=this._head;g<c;g++)h[d++]=o[g];for(g=0;g<this._tail;g++)h[d++]=o[g]}else for(g=this._head;g<this._tail;g++)h[d++]=o[g];return h};Denque.prototype._growArray=function n(){if(this._head!=0){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};Denque.prototype._shrinkArray=function n(){this._list.length>>>=1,this._capacityMask>>>=1};Denque.prototype._nextPowerOf2=function n(e){var t=Math.log(e)/Math.log(2),o=1<<t+1;return Math.max(o,4)};var denque=Denque;const Denque$1=getDefaultExportFromCjs(denque);var DeliveryRecordStatus;(function(n){n[n.unknown=0]="unknown",n[n.valid=1]="valid",n[n.invalid=2]="invalid",n[n.ignored=3]="ignored"})(DeliveryRecordStatus||(DeliveryRecordStatus={}));class MessageDeliveries{constructor(){me(this,"records");me(this,"queue");this.records=new Map,this.queue=new Denque$1}getRecord(e){return this.records.get(e)}ensureRecord(e){let t=this.records.get(e);if(t!=null)return t;t={status:DeliveryRecordStatus.unknown,firstSeenTsMs:Date.now(),validated:0,peers:new Set},this.records.set(e,t);const o={msgId:e,expire:Date.now()+TimeCacheDuration};return this.queue.push(o),t}gc(){const e=Date.now();let t=this.queue.peekFront();for(;t!=null&&t.expire<e;)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}class PeerScore{constructor(e,t,o,c){me(this,"params");me(this,"metrics");me(this,"peerStats",new Map);me(this,"peerIPs",new MapDef(()=>new Set));me(this,"scoreCache",new Map);me(this,"deliveryRecords",new MessageDeliveries);me(this,"_backgroundInterval");me(this,"scoreCacheValidityMs");me(this,"computeScore");me(this,"log");this.params=e,this.metrics=t,validatePeerScoreParams(e),this.scoreCacheValidityMs=c.scoreCacheValidityMs,this.computeScore=c.computeScore??computeScore,this.log=o.forComponent("libp2p:gossipsub:score")}get size(){return this.peerStats.size}start(){if(this._backgroundInterval!=null){this.log("Peer score already running");return}this._backgroundInterval=setInterval(()=>{this.background()},this.params.decayInterval),this.log("started")}stop(){if(this._backgroundInterval==null){this.log("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),this.log("stopped")}background(){this.refreshScores(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map(([e,t])=>[e,t]))}messageFirstSeenTimestampMs(e){const t=this.deliveryRecords.getRecord(e);return t!=null?t.firstSeenTsMs:null}refreshScores(){const e=Date.now(),t=this.params.decayToZero;this.peerStats.forEach((o,c)=>{if(!o.connected){e>o.expire&&(this.removeIPsForPeer(c,o.knownIPs),this.peerStats.delete(c),this.scoreCache.delete(c));return}Object.entries(o.topics).forEach(([l,h])=>{const d=this.params.topics[l];d!==void 0&&(h.firstMessageDeliveries*=d.firstMessageDeliveriesDecay,h.firstMessageDeliveries<t&&(h.firstMessageDeliveries=0),h.meshMessageDeliveries*=d.meshMessageDeliveriesDecay,h.meshMessageDeliveries<t&&(h.meshMessageDeliveries=0),h.meshFailurePenalty*=d.meshFailurePenaltyDecay,h.meshFailurePenalty<t&&(h.meshFailurePenalty=0),h.invalidMessageDeliveries*=d.invalidMessageDeliveriesDecay,h.invalidMessageDeliveries<t&&(h.invalidMessageDeliveries=0),h.inMesh&&(h.meshTime=e-h.graftTime,h.meshTime>d.meshMessageDeliveriesActivation&&(h.meshMessageDeliveriesActive=!0)))}),o.behaviourPenalty*=this.params.behaviourPenaltyDecay,o.behaviourPenalty<t&&(o.behaviourPenalty=0)})}score(e){this.metrics?.scoreFnCalls.inc();const t=this.peerStats.get(e);if(t==null)return 0;const o=Date.now(),c=this.scoreCache.get(e);if(c!=null&&c.cacheUntil>o)return c.score;this.metrics?.scoreFnRuns.inc();const l=this.computeScore(e,t,this.params,this.peerIPs),h=o+this.scoreCacheValidityMs;return c!=null?(this.metrics?.scoreCachedDelta.observe(Math.abs(l-c.score)),c.score=l,c.cacheUntil=h):this.scoreCache.set(e,{score:l,cacheUntil:h}),l}addPenalty(e,t,o){const c=this.peerStats.get(e);c!=null&&(c.behaviourPenalty+=t,this.metrics?.onScorePenalty(o))}addPeer(e){const t={connected:!0,expire:0,topics:{},knownIPs:new Set,behaviourPenalty:0};this.peerStats.set(e,t)}addIP(e,t){const o=this.peerStats.get(e);o?.knownIPs.add(t),this.peerIPs.getOrDefault(t).add(e)}removeIP(e,t){const o=this.peerStats.get(e);o?.knownIPs.delete(t);const c=this.peerIPs.get(t);c!=null&&(c.delete(e),c.size===0&&this.peerIPs.delete(t))}removePeer(e){const t=this.peerStats.get(e);if(t!=null){if(this.score(e)>0){this.removeIPsForPeer(e,t.knownIPs),this.peerStats.delete(e);return}Object.entries(t.topics).forEach(([o,c])=>{c.firstMessageDeliveries=0;const l=this.params.topics[o].meshMessageDeliveriesThreshold;if(c.inMesh&&c.meshMessageDeliveriesActive&&c.meshMessageDeliveries<l){const h=l-c.meshMessageDeliveries;c.meshFailurePenalty+=h*h}c.inMesh=!1,c.meshMessageDeliveriesActive=!1}),t.connected=!1,t.expire=Date.now()+this.params.retainScore}}graft(e,t){const o=this.peerStats.get(e);if(o!=null){const c=this.getPtopicStats(o,t);c!=null&&(c.inMesh=!0,c.graftTime=Date.now(),c.meshTime=0,c.meshMessageDeliveriesActive=!1)}}prune(e,t){const o=this.peerStats.get(e);if(o!=null){const c=this.getPtopicStats(o,t);if(c!=null){const l=this.params.topics[t].meshMessageDeliveriesThreshold;if(c.meshMessageDeliveriesActive&&c.meshMessageDeliveries<l){const h=l-c.meshMessageDeliveries;c.meshFailurePenalty+=h*h}c.meshMessageDeliveriesActive=!1,c.inMesh=!1}}}validateMessage(e){this.deliveryRecords.ensureRecord(e)}deliverMessage(e,t,o){this.markFirstMessageDelivery(e,o);const c=this.deliveryRecords.ensureRecord(t),l=Date.now();if(c.status!==DeliveryRecordStatus.unknown){this.log("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,l-c.firstSeenTsMs,DeliveryRecordStatus[c.status]);return}c.status=DeliveryRecordStatus.valid,c.validated=l,c.peers.forEach(h=>{h!==e.toString()&&this.markDuplicateMessageDelivery(h,o)})}rejectInvalidMessage(e,t){this.markInvalidMessageDelivery(e,t)}rejectMessage(e,t,o,c){switch(c){case RejectReason.Error:this.markInvalidMessageDelivery(e,o);return;case RejectReason.Blacklisted:return}const l=this.deliveryRecords.ensureRecord(t);if(l.status!==DeliveryRecordStatus.unknown){this.log("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-l.firstSeenTsMs,DeliveryRecordStatus[l.status]);return}if(c===RejectReason.Ignore){l.status=DeliveryRecordStatus.ignored,l.peers.clear();return}l.status=DeliveryRecordStatus.invalid,this.markInvalidMessageDelivery(e,o),l.peers.forEach(h=>{this.markInvalidMessageDelivery(h,o)}),l.peers.clear()}duplicateMessage(e,t,o){const c=this.deliveryRecords.ensureRecord(t);if(!c.peers.has(e))switch(c.status){case DeliveryRecordStatus.unknown:c.peers.add(e);break;case DeliveryRecordStatus.valid:c.peers.add(e),this.markDuplicateMessageDelivery(e,o,c.validated);break;case DeliveryRecordStatus.invalid:this.markInvalidMessageDelivery(e,o);break;case DeliveryRecordStatus.ignored:break}}markInvalidMessageDelivery(e,t){const o=this.peerStats.get(e);if(o!=null){const c=this.getPtopicStats(o,t);c!=null&&(c.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(e,t){const o=this.peerStats.get(e);if(o!=null){const c=this.getPtopicStats(o,t);if(c!=null){let l=this.params.topics[t].firstMessageDeliveriesCap;c.firstMessageDeliveries=Math.min(l,c.firstMessageDeliveries+1),c.inMesh&&(l=this.params.topics[t].meshMessageDeliveriesCap,c.meshMessageDeliveries=Math.min(l,c.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(e,t,o){const c=this.peerStats.get(e);if(c!=null){const l=o!==void 0?Date.now():0,h=this.getPtopicStats(c,t);if(h!=null&&h.inMesh){const d=this.params.topics[t];if(o!==void 0){const m=l-o,v=m>d.meshMessageDeliveriesWindow;if(this.metrics?.onDuplicateMsgDelivery(t,m,v),v)return}const g=d.meshMessageDeliveriesCap;h.meshMessageDeliveries=Math.min(g,h.meshMessageDeliveries+1)}}}removeIPsForPeer(e,t){for(const o of t){const c=this.peerIPs.get(o);c!=null&&(c.delete(e),c.size===0&&this.peerIPs.delete(o))}}getPtopicStats(e,t){let o=e.topics[t];return o!==void 0?o:this.params.topics[t]!==void 0?(o={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=o,o):null}}function computeScoreWeights(n,e,t,o,c){let l=0;const h=new Map;if(Object.entries(e.topics).forEach(([p,a])=>{const u=c.get(p)??"unknown",y=t.topics[p];if(y===void 0)return;let b=h.get(u);b==null&&(b={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},h.set(u,b));let w=0,T=0,B=0,H=0,J=0;if(a.inMesh){const se=Math.max(a.meshTime/y.timeInMeshQuantum,y.timeInMeshCap);w+=se*y.timeInMeshWeight}let W=a.firstMessageDeliveries;if(W>y.firstMessageDeliveriesCap&&(W=y.firstMessageDeliveriesCap),T+=W*y.firstMessageDeliveriesWeight,a.meshMessageDeliveriesActive&&a.meshMessageDeliveries<y.meshMessageDeliveriesThreshold){const se=y.meshMessageDeliveriesThreshold-a.meshMessageDeliveries,ae=se*se;B+=ae*y.meshMessageDeliveriesWeight}const fe=a.meshFailurePenalty;H+=fe*y.meshFailurePenaltyWeight;const re=a.invalidMessageDeliveries*a.invalidMessageDeliveries;J+=re*y.invalidMessageDeliveriesWeight,l+=(w+T+B+H+J)*y.topicWeight,b.p1w+=w,b.p2w+=T,b.p3w+=B,b.p3bw+=H,b.p4w+=J}),t.topicScoreCap>0&&l>t.topicScoreCap){l=t.topicScoreCap;const p=t.topicScoreCap/l;for(const a of h.values())a.p1w*=p,a.p2w*=p,a.p3w*=p,a.p3bw*=p,a.p4w*=p}let d=0,g=0,m=0;const v=t.appSpecificScore(n);d+=v*t.appSpecificWeight,e.knownIPs.forEach(p=>{if(t.IPColocationFactorWhitelist.has(p))return;const a=o.get(p),u=a!=null?a.size:0;if(u>t.IPColocationFactorThreshold){const y=u-t.IPColocationFactorThreshold,b=y*y;g+=b*t.IPColocationFactorWeight}});const _=e.behaviourPenalty*e.behaviourPenalty;return m+=_*t.behaviourPenaltyWeight,l+=d+g+m,{byTopic:h,p5w:d,p6w:g,p7w:m,score:l}}function computeAllPeersScoreWeights(n,e,t,o,c){const l={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(const h of n){const d=e.get(h);if(d!=null){const g=computeScoreWeights(h,d,t,o,c);for(const[m,v]of g.byTopic){let _=l.byTopic.get(m);_==null&&(_={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},l.byTopic.set(m,_)),_.p1w.push(v.p1w),_.p2w.push(v.p2w),_.p3w.push(v.p3w),_.p3bw.push(v.p3bw),_.p4w.push(v.p4w)}l.p5w.push(g.p5w),l.p6w.push(g.p6w),l.p7w.push(g.p7w),l.score.push(g.score)}else l.p5w.push(0),l.p6w.push(0),l.p7w.push(0),l.score.push(0)}return l}class OutboundStream{constructor(e,t,o){me(this,"rawStream");me(this,"pushable");me(this,"closeController");me(this,"maxBufferSize");this.rawStream=e,this.pushable=pushable({objectMode:!1}),this.closeController=new AbortController,this.maxBufferSize=o.maxBufferSize??1/0,pipe(abortableSource(this.pushable,this.closeController.signal,{returnOnAbort:!0}),c=>encode$a(c),this.rawStream).catch(t)}get protocol(){return this.rawStream.protocol}push(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(e)}async close(){this.closeController.abort(),await this.pushable.return(),await this.rawStream.close()}}class InboundStream{constructor(e,t={}){me(this,"source");me(this,"rawStream");me(this,"closeController");this.rawStream=e,this.closeController=new AbortController,this.source=abortableSource(pipe(this.rawStream,o=>decode$9(o,t)),this.closeController.signal,{returnOnAbort:!0})}async close(){this.closeController.abort(),await this.rawStream.close()}}class IWantTracer{constructor(e,t,o){me(this,"gossipsubIWantFollowupMs");me(this,"msgIdToStrFn");me(this,"metrics");me(this,"promises",new Map);me(this,"requestMsByMsg",new Map);me(this,"requestMsByMsgExpire");this.gossipsubIWantFollowupMs=e,this.msgIdToStrFn=t,this.metrics=o,this.requestMsByMsgExpire=10*e}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(e,t){const o=Math.floor(Math.random()*t.length),c=t[o],l=this.msgIdToStrFn(c);let h=this.promises.get(l);h==null&&(h=new Map,this.promises.set(l,h));const d=Date.now();h.has(e)||(h.set(e,d+this.gossipsubIWantFollowupMs),this.metrics!=null&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(l)||this.requestMsByMsg.set(l,d)))}getBrokenPromises(){const e=Date.now(),t=new Map;let o=0;return this.promises.forEach((c,l)=>{c.forEach((h,d)=>{h<e&&(t.set(d,(t.get(d)??0)+1),c.delete(d),o++)}),c.size===0&&this.promises.delete(l)}),this.metrics?.iwantPromiseBroken.inc(o),t}deliverMessage(e,t=!1){this.trackMessage(e);const o=this.promises.get(e);o!=null&&(this.promises.delete(e),this.metrics!=null&&(this.metrics.iwantPromiseResolved.inc(1),t&&this.metrics.iwantPromiseResolvedFromDuplicate.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(o.size)))}rejectMessage(e,t){switch(this.trackMessage(e),t){case RejectReason.Error:return}this.promises.delete(e)}clear(){this.promises.clear()}prune(){const e=Date.now()-this.requestMsByMsgExpire;let t=0;for(const[o,c]of this.requestMsByMsg.entries())if(c<e)this.requestMsByMsg.delete(o),t++;else break;this.metrics?.iwantMessagePruned.inc(t)}trackMessage(e){if(this.metrics!=null){const t=this.requestMsByMsg.get(e);t!==void 0&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}}const webcrypto={get(n=globalThis){const e=n.crypto;if(e==null||e.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};function bigIntegerToUintBase64url(n,e){let t=Uint8Array.from(n.abs().toByteArray());if(t=t[0]===0?t.subarray(1):t,e!=null){if(t.length>e)throw new Error("byte array longer than desired length");t=concat$2([new Uint8Array(e-t.length),t])}return toString$2(t,"base64url")}function base64urlToBigInteger(n){const e=base64urlToBuffer(n);return new forge$E.jsbn.BigInteger(toString$2(e,"base16"),16)}function base64urlToBuffer(n,e){let t=fromString$2(n,"base64urlpad");if(e!=null){if(t.length>e)throw new Error("byte array longer than desired length");t=concat$2([new Uint8Array(e-t.length),t])}return t}function isPromise(n){return n==null?!1:typeof n.then=="function"&&typeof n.catch=="function"&&typeof n.finally=="function"}const PUBLIC_KEY_BYTE_LENGTH=32,PRIVATE_KEY_BYTE_LENGTH=64,KEYS_BYTE_LENGTH=32;function generateKey$2(){const n=ed25519$1.utils.randomPrivateKey(),e=ed25519$1.getPublicKey(n);return{privateKey:concatKeys(n,e),publicKey:e}}function generateKeyFromSeed(n){if(n.length!==KEYS_BYTE_LENGTH)throw new TypeError('"seed" must be 32 bytes in length.');if(!(n instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=n,t=ed25519$1.getPublicKey(e);return{privateKey:concatKeys(e,t),publicKey:t}}function hashAndSign$2(n,e){const t=n.subarray(0,KEYS_BYTE_LENGTH);return ed25519$1.sign(e instanceof Uint8Array?e:e.subarray(),t)}function hashAndVerify$2(n,e,t){return ed25519$1.verify(e,t instanceof Uint8Array?t:t.subarray(),n)}function concatKeys(n,e){const t=new Uint8Array(PRIVATE_KEY_BYTE_LENGTH);for(let o=0;o<KEYS_BYTE_LENGTH;o++)t[o]=n[o],t[KEYS_BYTE_LENGTH+o]=e[o];return t}const derivedEmptyPasswordKey={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function create(n){const e=n?.algorithm??"AES-GCM";let t=n?.keyLength??16;const o=n?.nonceLength??12,c=n?.digest??"SHA-256",l=n?.saltLength??16,h=n?.iterations??32767,d=webcrypto.get();t*=8;async function g(_,p){const a=d.getRandomValues(new Uint8Array(l)),u=d.getRandomValues(new Uint8Array(o)),y={name:e,iv:u};typeof p=="string"&&(p=fromString$2(p));let b;if(p.length===0){b=await d.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"]);try{const T={name:"PBKDF2",salt:a,iterations:h,hash:{name:c}},B=await d.subtle.importKey("raw",p,{name:"PBKDF2"},!1,["deriveKey"]);b=await d.subtle.deriveKey(T,B,{name:e,length:t},!0,["encrypt"])}catch{b=await d.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"])}}else{const T={name:"PBKDF2",salt:a,iterations:h,hash:{name:c}},B=await d.subtle.importKey("raw",p,{name:"PBKDF2"},!1,["deriveKey"]);b=await d.subtle.deriveKey(T,B,{name:e,length:t},!0,["encrypt"])}const w=await d.subtle.encrypt(y,b,_);return concat$2([a,y.iv,new Uint8Array(w)])}async function m(_,p){const a=_.subarray(0,l),u=_.subarray(l,l+o),y=_.subarray(l+o),b={name:e,iv:u};typeof p=="string"&&(p=fromString$2(p));let w;if(p.length===0)try{const B={name:"PBKDF2",salt:a,iterations:h,hash:{name:c}},H=await d.subtle.importKey("raw",p,{name:"PBKDF2"},!1,["deriveKey"]);w=await d.subtle.deriveKey(B,H,{name:e,length:t},!0,["decrypt"])}catch{w=await d.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["decrypt"])}else{const B={name:"PBKDF2",salt:a,iterations:h,hash:{name:c}},H=await d.subtle.importKey("raw",p,{name:"PBKDF2"},!1,["deriveKey"]);w=await d.subtle.deriveKey(B,H,{name:e,length:t},!0,["decrypt"])}const T=await d.subtle.decrypt(b,w,y);return new Uint8Array(T)}return{encrypt:g,decrypt:m}}async function exporter(n,e){const o=await create().encrypt(n,e);return base64$2.encode(o)}var KeyType$1;(function(n){n.RSA="RSA",n.Ed25519="Ed25519",n.Secp256k1="Secp256k1"})(KeyType$1||(KeyType$1={}));var __KeyTypeValues$1;(function(n){n[n.RSA=0]="RSA",n[n.Ed25519=1]="Ed25519",n[n.Secp256k1=2]="Secp256k1"})(__KeyTypeValues$1||(__KeyTypeValues$1={}));(function(n){n.codec=()=>enumeration(__KeyTypeValues$1)})(KeyType$1||(KeyType$1={}));var PublicKey$3;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),t.Type!=null&&(o.uint32(8),KeyType$1.codec().encode(t.Type,o)),t.Data!=null&&(o.uint32(18),o.bytes(t.Data)),c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.Type=KeyType$1.codec().decode(t);break;case 2:c.Data=t.bytes();break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(PublicKey$3||(PublicKey$3={}));var PrivateKey$3;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),t.Type!=null&&(o.uint32(8),KeyType$1.codec().encode(t.Type,o)),t.Data!=null&&(o.uint32(18),o.bytes(t.Data)),c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.Type=KeyType$1.codec().decode(t);break;case 2:c.Data=t.bytes();break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(PrivateKey$3||(PrivateKey$3={}));let Ed25519PublicKey$1=class{constructor(e){me(this,"_key");this._key=ensureKey(e,PUBLIC_KEY_BYTE_LENGTH)}verify(e,t){return hashAndVerify$2(this._key,t,e)}marshal(){return this._key}get bytes(){return PublicKey$3.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(e){return equals(this.bytes,e.bytes)}hash(){const e=sha256$4.digest(this.bytes);return isPromise(e)?e.then(({bytes:t})=>t):e.bytes}},Ed25519PrivateKey$1=class{constructor(e,t){me(this,"_key");me(this,"_publicKey");this._key=ensureKey(e,PRIVATE_KEY_BYTE_LENGTH),this._publicKey=ensureKey(t,PUBLIC_KEY_BYTE_LENGTH)}sign(e){return hashAndSign$2(this._key,e)}get public(){return new Ed25519PublicKey$1(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey$3.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(e){return equals(this.bytes,e.bytes)}async hash(){const e=sha256$4.digest(this.bytes);let t;return isPromise(e)?{bytes:t}=await e:t=e.bytes,t}async id(){const e=identity.digest(this.public.bytes);return base58btc.encode(e.bytes).substring(1)}async export(e,t="libp2p-key"){if(t==="libp2p-key")return exporter(this.bytes,e);throw new CodeError(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function unmarshalEd25519PrivateKey(n){if(n.length>PRIVATE_KEY_BYTE_LENGTH){n=ensureKey(n,PRIVATE_KEY_BYTE_LENGTH+PUBLIC_KEY_BYTE_LENGTH);const o=n.subarray(0,PRIVATE_KEY_BYTE_LENGTH),c=n.subarray(PRIVATE_KEY_BYTE_LENGTH,n.length);return new Ed25519PrivateKey$1(o,c)}n=ensureKey(n,PRIVATE_KEY_BYTE_LENGTH);const e=n.subarray(0,PRIVATE_KEY_BYTE_LENGTH),t=n.subarray(PUBLIC_KEY_BYTE_LENGTH);return new Ed25519PrivateKey$1(e,t)}function unmarshalEd25519PublicKey(n){return n=ensureKey(n,PUBLIC_KEY_BYTE_LENGTH),new Ed25519PublicKey$1(n)}async function generateKeyPair$2(){const{privateKey:n,publicKey:e}=generateKey$2();return new Ed25519PrivateKey$1(n,e)}async function generateKeyPairFromSeed(n){const{privateKey:e,publicKey:t}=generateKeyFromSeed(n);return new Ed25519PrivateKey$1(e,t)}function ensureKey(n,e){if(n=Uint8Array.from(n??[]),n.length!==e)throw new CodeError(`Key must be a Uint8Array of length ${e}, got ${n.length}`,"ERR_INVALID_KEY_TYPE");return n}const Ed25519=Object.freeze(Object.defineProperty({__proto__:null,Ed25519PrivateKey:Ed25519PrivateKey$1,Ed25519PublicKey:Ed25519PublicKey$1,generateKeyPair:generateKeyPair$2,generateKeyPairFromSeed,unmarshalEd25519PrivateKey,unmarshalEd25519PublicKey},Symbol.toStringTag,{value:"Module"})),bits$1={"P-256":256,"P-384":384,"P-521":521},curveTypes$1=Object.keys(bits$1);curveTypes$1.join(" / ");function randomBytes$1(n){if(isNaN(n)||n<=0)throw new CodeError("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return randomBytes$3(n)}function convert$1(n,e){return e.map(t=>base64urlToBigInteger(n[t]))}function jwk2priv(n){return forge$E.pki.setRsaPrivateKey(...convert$1(n,["n","e","d","p","q","dp","dq","qi"]))}function jwk2pub(n){return forge$E.pki.setRsaPublicKey(...convert$1(n,["n","e"]))}function pkcs1ToJwk(n){const e=forge$E.asn1.fromDer(toString$2(n,"ascii")),t=forge$E.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:bigIntegerToUintBase64url(t.n),e:bigIntegerToUintBase64url(t.e),d:bigIntegerToUintBase64url(t.d),p:bigIntegerToUintBase64url(t.p),q:bigIntegerToUintBase64url(t.q),dp:bigIntegerToUintBase64url(t.dP),dq:bigIntegerToUintBase64url(t.dQ),qi:bigIntegerToUintBase64url(t.qInv),alg:"RS256"}}function jwkToPkcs1(n){if(n.n==null||n.e==null||n.d==null||n.p==null||n.q==null||n.dp==null||n.dq==null||n.qi==null)throw new CodeError("JWK was missing components","ERR_INVALID_PARAMETERS");const e=forge$E.pki.privateKeyToAsn1({n:base64urlToBigInteger(n.n),e:base64urlToBigInteger(n.e),d:base64urlToBigInteger(n.d),p:base64urlToBigInteger(n.p),q:base64urlToBigInteger(n.q),dP:base64urlToBigInteger(n.dp),dQ:base64urlToBigInteger(n.dq),qInv:base64urlToBigInteger(n.qi)});return fromString$2(forge$E.asn1.toDer(e).getBytes(),"ascii")}function pkixToJwk(n){const e=forge$E.asn1.fromDer(toString$2(n,"ascii")),t=forge$E.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:bigIntegerToUintBase64url(t.n),e:bigIntegerToUintBase64url(t.e)}}function jwkToPkix(n){if(n.n==null||n.e==null)throw new CodeError("JWK was missing components","ERR_INVALID_PARAMETERS");const e=forge$E.pki.publicKeyToAsn1({n:base64urlToBigInteger(n.n),e:base64urlToBigInteger(n.e)});return fromString$2(forge$E.asn1.toDer(e).getBytes(),"ascii")}async function generateKey$1(n){const e=await webcrypto.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:n,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),t=await exportKey(e);return{privateKey:t[0],publicKey:t[1]}}async function unmarshalPrivateKey$1(n){const t=[await webcrypto.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await derivePublicFromPrivate(n)],o=await exportKey({privateKey:t[0],publicKey:t[1]});return{privateKey:o[0],publicKey:o[1]}}async function hashAndSign$1(n,e){const t=await webcrypto.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),o=await webcrypto.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},t,e instanceof Uint8Array?e:e.subarray());return new Uint8Array(o,0,o.byteLength)}async function hashAndVerify$1(n,e,t){const o=await webcrypto.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return webcrypto.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},o,e,t instanceof Uint8Array?t:t.subarray())}async function exportKey(n){if(n.privateKey==null||n.publicKey==null)throw new CodeError("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([webcrypto.get().subtle.exportKey("jwk",n.privateKey),webcrypto.get().subtle.exportKey("jwk",n.publicKey)])}async function derivePublicFromPrivate(n){return webcrypto.get().subtle.importKey("jwk",{kty:n.kty,n:n.n,e:n.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function convertKey(n,e,t,o){const c=e?jwk2pub(n):jwk2priv(n),l=toString$2(t instanceof Uint8Array?t:t.subarray(),"ascii"),h=o(l,c);return fromString$2(h,"ascii")}function encrypt$1(n,e){return convertKey(n,!0,e,(t,o)=>o.encrypt(t))}function decrypt$2(n,e){return convertKey(n,!1,e,(t,o)=>o.decrypt(t))}function keySize(n){if(n.kty!=="RSA")throw new CodeError("invalid key type","ERR_INVALID_KEY_TYPE");if(n.n==null)throw new CodeError("invalid key modulus","ERR_INVALID_KEY_MODULUS");return fromString$2(n.n,"base64url").length*8}const MAX_KEY_SIZE=8192;class RsaPublicKey{constructor(e){me(this,"_key");this._key=e}verify(e,t){return hashAndVerify$1(this._key,t,e)}marshal(){return jwkToPkix(this._key)}get bytes(){return PublicKey$3.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}encrypt(e){return encrypt$1(this._key,e)}equals(e){return equals(this.bytes,e.bytes)}hash(){const e=sha256$4.digest(this.bytes);return isPromise(e)?e.then(({bytes:t})=>t):e.bytes}}class RsaPrivateKey{constructor(e,t){me(this,"_key");me(this,"_publicKey");this._key=e,this._publicKey=t}genSecret(){return randomBytes$1(16)}sign(e){return hashAndSign$1(this._key,e)}get public(){if(this._publicKey==null)throw new CodeError("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new RsaPublicKey(this._publicKey)}decrypt(e){return decrypt$2(this._key,e)}marshal(){return jwkToPkcs1(this._key)}get bytes(){return PrivateKey$3.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}equals(e){return equals(this.bytes,e.bytes)}hash(){const e=sha256$4.digest(this.bytes);return isPromise(e)?e.then(({bytes:t})=>t):e.bytes}async id(){const e=await this.public.hash();return toString$2(e,"base58btc")}async export(e,t="pkcs-8"){if(t==="pkcs-8"){const o=new forge$E.util.ByteBuffer(this.marshal()),c=forge$E.asn1.fromDer(o),l=forge$E.pki.privateKeyFromAsn1(c),h={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return forge$E.pki.encryptRsaPrivateKey(l,e,h)}else{if(t==="libp2p-key")return exporter(this.bytes,e);throw new CodeError(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}}async function unmarshalRsaPrivateKey(n){const e=pkcs1ToJwk(n);if(keySize(e)>MAX_KEY_SIZE)throw new CodeError("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await unmarshalPrivateKey$1(e);return new RsaPrivateKey(t.privateKey,t.publicKey)}function unmarshalRsaPublicKey(n){const e=pkixToJwk(n);if(keySize(e)>MAX_KEY_SIZE)throw new CodeError("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new RsaPublicKey(e)}async function fromJwk(n){if(keySize(n)>MAX_KEY_SIZE)throw new CodeError("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await unmarshalPrivateKey$1(n);return new RsaPrivateKey(e.privateKey,e.publicKey)}async function generateKeyPair$1(n){if(n>MAX_KEY_SIZE)throw new CodeError("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const e=await generateKey$1(n);return new RsaPrivateKey(e.privateKey,e.publicKey)}const RSA=Object.freeze(Object.defineProperty({__proto__:null,MAX_KEY_SIZE,RsaPrivateKey,RsaPublicKey,fromJwk,generateKeyPair:generateKeyPair$1,unmarshalRsaPrivateKey,unmarshalRsaPublicKey},Symbol.toStringTag,{value:"Module"}));function generateKey(){return secp256k1$3.utils.randomPrivateKey()}function hashAndSign(n,e){const t=sha256$4.digest(e instanceof Uint8Array?e:e.subarray());if(isPromise(t))return t.then(({digest:o})=>secp256k1$3.sign(o,n).toDERRawBytes()).catch(o=>{throw new CodeError(String(o),"ERR_INVALID_INPUT")});try{return secp256k1$3.sign(t.digest,n).toDERRawBytes()}catch(o){throw new CodeError(String(o),"ERR_INVALID_INPUT")}}function hashAndVerify(n,e,t){const o=sha256$4.digest(t instanceof Uint8Array?t:t.subarray());if(isPromise(o))return o.then(({digest:c})=>secp256k1$3.verify(e,c,n)).catch(c=>{throw new CodeError(String(c),"ERR_INVALID_INPUT")});try{return secp256k1$3.verify(e,o.digest,n)}catch(c){throw new CodeError(String(c),"ERR_INVALID_INPUT")}}function compressPublicKey(n){return secp256k1$3.ProjectivePoint.fromHex(n).toRawBytes(!0)}function validatePrivateKey(n){try{secp256k1$3.getPublicKey(n,!0)}catch(e){throw new CodeError(String(e),"ERR_INVALID_PRIVATE_KEY")}}function validatePublicKey(n){try{secp256k1$3.ProjectivePoint.fromHex(n)}catch(e){throw new CodeError(String(e),"ERR_INVALID_PUBLIC_KEY")}}function computePublicKey$1(n){try{return secp256k1$3.getPublicKey(n,!0)}catch(e){throw new CodeError(String(e),"ERR_INVALID_PRIVATE_KEY")}}class Secp256k1PublicKey{constructor(e){me(this,"_key");validatePublicKey(e),this._key=e}verify(e,t){return hashAndVerify(this._key,t,e)}marshal(){return compressPublicKey(this._key)}get bytes(){return PublicKey$3.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return equals(this.bytes,e.bytes)}async hash(){const e=sha256$4.digest(this.bytes);let t;return isPromise(e)?{bytes:t}=await e:t=e.bytes,t}}class Secp256k1PrivateKey{constructor(e,t){me(this,"_key");me(this,"_publicKey");this._key=e,this._publicKey=t??computePublicKey$1(e),validatePrivateKey(this._key),validatePublicKey(this._publicKey)}sign(e){return hashAndSign(this._key,e)}get public(){return new Secp256k1PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey$3.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return equals(this.bytes,e.bytes)}hash(){const e=sha256$4.digest(this.bytes);return isPromise(e)?e.then(({bytes:t})=>t):e.bytes}async id(){const e=await this.public.hash();return toString$2(e,"base58btc")}async export(e,t="libp2p-key"){if(t==="libp2p-key")return exporter(this.bytes,e);throw new CodeError(`export format '${t}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalSecp256k1PrivateKey(n){return new Secp256k1PrivateKey(n)}function unmarshalSecp256k1PublicKey(n){return new Secp256k1PublicKey(n)}async function generateKeyPair(){const n=generateKey();return new Secp256k1PrivateKey(n)}const Secp256k1=Object.freeze(Object.defineProperty({__proto__:null,Secp256k1PrivateKey,Secp256k1PublicKey,generateKeyPair,unmarshalSecp256k1PrivateKey,unmarshalSecp256k1PublicKey},Symbol.toStringTag,{value:"Module"})),supportedKeys={rsa:RSA,ed25519:Ed25519,secp256k1:Secp256k1};function unsupportedKey(n){const e=Object.keys(supportedKeys).join(" / ");return new CodeError(`invalid or unsupported key type ${n}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function typeToKey(n){if(n=n.toLowerCase(),n==="rsa"||n==="ed25519"||n==="secp256k1")return supportedKeys[n];throw unsupportedKey(n)}function unmarshalPublicKey(n){const e=PublicKey$3.decode(n),t=e.Data??new Uint8Array;switch(e.Type){case KeyType$1.RSA:return supportedKeys.rsa.unmarshalRsaPublicKey(t);case KeyType$1.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PublicKey(t);case KeyType$1.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PublicKey(t);default:throw unsupportedKey(e.Type??"unknown")}}function marshalPublicKey(n,e){return e=(e??"rsa").toLowerCase(),typeToKey(e),n.bytes}async function unmarshalPrivateKey(n){const e=PrivateKey$3.decode(n),t=e.Data??new Uint8Array;switch(e.Type){case KeyType$1.RSA:return supportedKeys.rsa.unmarshalRsaPrivateKey(t);case KeyType$1.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PrivateKey(t);case KeyType$1.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey(t);default:throw unsupportedKey(e.Type??"RSA")}}const SignPrefix=fromString$2("libp2p-pubsub:");async function buildRawMessage(n,e,t,o){switch(n.type){case PublishConfigType.Signing:{const c={from:n.author.toBytes(),data:o,seqno:randomBytes$1(8),topic:e,signature:void 0,key:void 0},l=concat$2([SignPrefix,RPC.Message.encode(c).finish()]);c.signature=await n.privateKey.sign(l),c.key=n.key;const h={type:"signed",from:n.author,data:t,sequenceNumber:BigInt(`0x${toString$2(c.seqno,"base16")}`),topic:e,signature:c.signature,key:c.key};return{raw:c,msg:h}}case PublishConfigType.Anonymous:return{raw:{from:void 0,data:o,seqno:void 0,topic:e,signature:void 0,key:void 0},msg:{type:"unsigned",data:t,topic:e}};default:throw new Error("Unreachable")}}async function validateToRawMessage(n,e){switch(n){case StrictNoSign:return e.signature!=null?{valid:!1,error:ValidateError.SignaturePresent}:e.seqno!=null?{valid:!1,error:ValidateError.SeqnoPresent}:e.key!=null?{valid:!1,error:ValidateError.FromPresent}:{valid:!0,message:{type:"unsigned",topic:e.topic,data:e.data??new Uint8Array(0)}};case StrictSign:{if(e.seqno==null)return{valid:!1,error:ValidateError.InvalidSeqno};if(e.seqno.length!==8)return{valid:!1,error:ValidateError.InvalidSeqno};if(e.signature==null)return{valid:!1,error:ValidateError.InvalidSignature};if(e.from==null)return{valid:!1,error:ValidateError.InvalidPeerId};let t;try{t=peerIdFromBytes(e.from)}catch{return{valid:!1,error:ValidateError.InvalidPeerId}}let o;if(e.key!=null){if(o=unmarshalPublicKey(e.key),t.publicKey!==void 0&&!equals(o.bytes,t.publicKey))return{valid:!1,error:ValidateError.InvalidPeerId}}else{if(t.publicKey==null)return{valid:!1,error:ValidateError.InvalidPeerId};o=unmarshalPublicKey(t.publicKey)}const c={from:e.from,data:e.data,seqno:e.seqno,topic:e.topic,signature:void 0,key:void 0},l=concat$2([SignPrefix,RPC.Message.encode(c).finish()]);return await o.verify(l,e.signature)?{valid:!0,message:{type:"signed",from:t,data:e.data??new Uint8Array(0),sequenceNumber:BigInt(`0x${toString$2(e.seqno,"base16")}`),topic:e.topic,signature:e.signature,key:e.key??marshalPublicKey(o)}}:{valid:!1,error:ValidateError.InvalidSignature}}default:throw new Error("Unreachable")}}function shuffle$1(n){if(n.length<=1)return n;const e=()=>Math.floor(Math.random()*Math.floor(n.length));for(let t=0;t<n.length;t++){const o=e(),c=n[t];n[t]=n[o],n[o]=c}return n}function messageIdToString(n){return toString$2(n,"base64")}async function getPublishConfigFromPeerId(n,e){switch(n){case StrictSign:{if(e==null)throw Error("Must provide PeerId");if(e.privateKey==null)throw Error("Cannot sign message, no private key present");if(e.publicKey==null)throw Error("Cannot sign message, no public key present");const t=await unmarshalPrivateKey(e.privateKey);return{type:PublishConfigType.Signing,author:e,key:e.publicKey,privateKey:t}}case StrictNoSign:return{type:PublishConfigType.Anonymous};default:throw new Error(`Unknown signature policy "${n}"`)}}var TopicValidatorResult;(function(n){n.Accept="accept",n.Ignore="ignore",n.Reject="reject"})(TopicValidatorResult||(TopicValidatorResult={}));var FaultTolerance;(function(n){n[n.FATAL_ALL=0]="FATAL_ALL",n[n.NO_FATAL=1]="NO_FATAL"})(FaultTolerance||(FaultTolerance={}));var KeyType;(function(n){n.RSA="RSA",n.Ed25519="Ed25519",n.Secp256k1="Secp256k1"})(KeyType||(KeyType={}));var __KeyTypeValues;(function(n){n[n.RSA=0]="RSA",n[n.Ed25519=1]="Ed25519",n[n.Secp256k1=2]="Secp256k1"})(__KeyTypeValues||(__KeyTypeValues={}));(function(n){n.codec=()=>enumeration(__KeyTypeValues)})(KeyType||(KeyType={}));var PublicKey$2;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),t.Type!=null&&(o.uint32(8),KeyType.codec().encode(t.Type,o)),t.Data!=null&&(o.uint32(18),o.bytes(t.Data)),c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.Type=KeyType.codec().decode(t);break;case 2:c.Data=t.bytes();break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(PublicKey$2||(PublicKey$2={}));var PrivateKey$2;(function(n){let e;n.codec=()=>(e==null&&(e=message((t,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),t.Type!=null&&(o.uint32(8),KeyType.codec().encode(t.Type,o)),t.Data!=null&&(o.uint32(18),o.bytes(t.Data)),c.lengthDelimited!==!1&&o.ldelim()},(t,o)=>{const c={},l=o==null?t.len:t.pos+o;for(;t.pos<l;){const h=t.uint32();switch(h>>>3){case 1:c.Type=KeyType.codec().decode(t);break;case 2:c.Data=t.bytes();break;default:t.skipType(h&7);break}}return c})),e),n.encode=t=>encodeMessage(t,n.codec()),n.decode=t=>decodeMessage$1(t,n.codec())})(PrivateKey$2||(PrivateKey$2={}));const bits={"P-256":256,"P-384":384,"P-521":521},curveTypes=Object.keys(bits);curveTypes.join(" / ");Object.values(bases).map(n=>n.decoder).reduce((n,e)=>n.or(e),bases.identity.decoder);const msgId=(n,e)=>{const t=fromString$2(e.toString(16).padStart(16,"0"),"base16"),o=new Uint8Array(n.length+t.length);return o.set(n,0),o.set(t,n.length),o};function msgIdFnStrictSign(n){if(n.type!=="signed")throw new Error("expected signed message type");if(n.sequenceNumber==null)throw Error("missing seqno field");return msgId(n.from.toBytes(),n.sequenceNumber)}async function msgIdFnStrictNoSign(n){return sha256$4.encode(n.data)}var Protocol;(function(n){n[n.ip4=4]="ip4",n[n.ip6=41]="ip6"})(Protocol||(Protocol={}));function multiaddrToIPStr(n){for(const e of n.tuples())switch(e[0]){case Protocol.ip4:case Protocol.ip6:return convertToString(e[0],e[1])}return null}class SimpleTimeCache{constructor(e){me(this,"entries",new Map);me(this,"validityMs");this.validityMs=e.validityMs}get size(){return this.entries.size}put(e,t){return this.entries.has(e)?!0:(this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs}),!1)}prune(){const e=Date.now();for(const[t,o]of this.entries.entries())if(o.validUntilMs<e)this.entries.delete(t);else break}has(e){return this.entries.has(e)}get(e){const t=this.entries.get(e);return t!=null&&t.validUntilMs>=Date.now()?t.value:void 0}clear(){this.entries.clear()}}var GossipStatusCode;(function(n){n[n.started=0]="started",n[n.stopped=1]="stopped"})(GossipStatusCode||(GossipStatusCode={}));class GossipSub extends TypedEventEmitter{constructor(t,o={}){super();me(this,"globalSignaturePolicy");me(this,"multicodecs",[GossipsubIDv11,GossipsubIDv10]);me(this,"publishConfig");me(this,"dataTransform");me(this,"peers",new Set);me(this,"streamsInbound",new Map);me(this,"streamsOutbound",new Map);me(this,"outboundInflightQueue",pushable({objectMode:!0}));me(this,"direct",new Set);me(this,"floodsubPeers",new Set);me(this,"seenCache");me(this,"acceptFromWhitelist",new Map);me(this,"topics",new Map);me(this,"subscriptions",new Set);me(this,"mesh",new Map);me(this,"fanout",new Map);me(this,"fanoutLastpub",new Map);me(this,"gossip",new Map);me(this,"control",new Map);me(this,"peerhave",new Map);me(this,"iasked",new Map);me(this,"backoff",new Map);me(this,"outbound",new Map);me(this,"msgIdFn");me(this,"fastMsgIdFn");me(this,"msgIdToStrFn");me(this,"fastMsgIdCache");me(this,"publishedMessageIds");me(this,"mcache");me(this,"score");me(this,"topicValidators",new Map);me(this,"log");me(this,"heartbeatTicks",0);me(this,"gossipTracer");me(this,"components");me(this,"directPeerInitial",null);me(this,"opts");me(this,"decodeRpcLimits");me(this,"metrics");me(this,"status",{code:GossipStatusCode.stopped});me(this,"maxInboundStreams");me(this,"maxOutboundStreams");me(this,"allowedTopics");me(this,"heartbeatTimer",null);me(this,"runHeartbeat",()=>{const t=this.metrics?.heartbeatDuration.startTimer();this.heartbeat().catch(o=>{this.log("Error running heartbeat",o)}).finally(()=>{if(t?.(),this.status.code===GossipStatusCode.started){clearTimeout(this.status.heartbeatTimeout);let o=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;o<this.opts.heartbeatInterval*.25&&(o+=this.opts.heartbeatInterval,this.metrics?.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,o)}})});const c={fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:GossipsubD,Dlo:GossipsubDlo,Dhi:GossipsubDhi,Dscore:GossipsubDscore,Dout:GossipsubDout,Dlazy:GossipsubDlazy,heartbeatInterval:GossipsubHeartbeatInterval,fanoutTTL:GossipsubFanoutTTL,mcacheLength:GossipsubHistoryLength,mcacheGossip:GossipsubHistoryGossip,seenTTL:GossipsubSeenTTL,gossipsubIWantFollowupMs:GossipsubIWantFollowupTime,prunePeers:GossipsubPrunePeers,pruneBackoff:GossipsubPruneBackoff,unsubcribeBackoff:GossipsubUnsubscribeBackoff,graftFloodThreshold:GossipsubGraftFloodThreshold,opportunisticGraftPeers:GossipsubOpportunisticGraftPeers,opportunisticGraftTicks:GossipsubOpportunisticGraftTicks,directConnectTicks:GossipsubDirectConnectTicks,...o,scoreParams:createPeerScoreParams(o.scoreParams),scoreThresholds:createPeerScoreThresholds(o.scoreThresholds)};if(this.components=t,this.decodeRpcLimits=c.decodeRpcLimits??defaultDecodeRpcLimits,this.globalSignaturePolicy=c.globalSignaturePolicy??StrictSign,c.fallbackToFloodsub&&this.multicodecs.push(FloodsubID),this.log=t.logger.forComponent(c.debugName??"libp2p:gossipsub"),this.opts=c,this.direct=new Set(c.directPeers.map(l=>l.id.toString())),this.seenCache=new SimpleTimeCache({validityMs:c.seenTTL}),this.publishedMessageIds=new SimpleTimeCache({validityMs:c.seenTTL}),o.msgIdFn!=null)this.msgIdFn=o.msgIdFn;else switch(this.globalSignaturePolicy){case StrictSign:this.msgIdFn=msgIdFnStrictSign;break;case StrictNoSign:this.msgIdFn=msgIdFnStrictNoSign;break;default:throw new Error(`Invalid globalSignaturePolicy: ${this.globalSignaturePolicy}`)}if(o.fastMsgIdFn!=null&&(this.fastMsgIdFn=o.fastMsgIdFn,this.fastMsgIdCache=new SimpleTimeCache({validityMs:c.seenTTL})),this.msgIdToStrFn=o.msgIdToStrFn??messageIdToString,this.mcache=o.messageCache??new MessageCache(c.mcacheGossip,c.mcacheLength,this.msgIdToStrFn),o.dataTransform!=null&&(this.dataTransform=o.dataTransform),o.metricsRegister!=null){if(o.metricsTopicStrToLabel==null)throw Error("Must set metricsTopicStrToLabel with metrics");const l=Math.max(...Object.values(c.scoreParams.topics).map(d=>d.meshMessageDeliveriesWindow),DEFAULT_METRIC_MESH_MESSAGE_DELIVERIES_WINDOWS),h=getMetrics(o.metricsRegister,o.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:c.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:l/1e3});h.mcacheSize.addCollect(()=>{this.onScrapeMetrics(h)});for(const d of this.multicodecs)h.protocolsEnabled.set({protocol:d},1);this.metrics=h}else this.metrics=null;this.gossipTracer=new IWantTracer(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new PeerScore(this.opts.scoreParams,this.metrics,this.components.logger,{scoreCacheValidityMs:c.heartbeatInterval}),this.maxInboundStreams=o.maxInboundStreams,this.maxOutboundStreams=o.maxOutboundStreams,this.allowedTopics=c.allowedTopics!=null?new Set(c.allowedTopics):null}getPeers(){return[...this.peers.keys()].map(t=>peerIdFromString(t))}isStarted(){return this.status.code===GossipStatusCode.started}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=await getPublishConfigFromPeerId(this.globalSignaturePolicy,this.components.peerId),this.outboundInflightQueue=pushable({objectMode:!0}),pipe(this.outboundInflightQueue,async h=>{for await(const{peerId:d,connection:g}of h)await this.createOutboundStream(d,g)}).catch(h=>{this.log.error("outbound inflight queue error",h)}),await Promise.all(this.opts.directPeers.map(async h=>{await this.components.peerStore.merge(h.id,{multiaddrs:h.addrs})}));const t=this.components.registrar;await Promise.all(this.multicodecs.map(async h=>t.handle(h,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams})));const o={onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)},c=await Promise.all(this.multicodecs.map(async h=>t.register(h,o))),l=setTimeout(this.runHeartbeat,GossipsubHeartbeatInitialDelay);this.status={code:GossipStatusCode.started,registrarTopologyIds:c,heartbeatTimeout:l,hearbeatStartMs:Date.now()+GossipsubHeartbeatInitialDelay},this.score.start(),this.directPeerInitial=setTimeout(()=>{Promise.resolve().then(async()=>{await Promise.all(Array.from(this.direct).map(async h=>this.connect(h)))}).catch(h=>{this.log(h)})},GossipsubDirectConnectInitialDelay),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==GossipStatusCode.started)return;const{registrarTopologyIds:t}=this.status;this.status={code:GossipStatusCode.stopped};const o=this.components.registrar;await Promise.all(this.multicodecs.map(async l=>o.unhandle(l))),t.forEach(l=>{o.unregister(l)}),this.outboundInflightQueue.end();const c=[];for(const l of this.streamsOutbound.values())c.push(l.close());this.streamsOutbound.clear();for(const l of this.streamsInbound.values())c.push(l.close());this.streamsInbound.clear(),await Promise.all(c),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer!=null&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache!=null&&this.fastMsgIdCache.clear(),this.directPeerInitial!=null&&clearTimeout(this.directPeerInitial),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({stream:t,connection:o}){if(!this.isStarted())return;const c=o.remotePeer;this.addPeer(c,o.direction,o.remoteAddr),this.createInboundStream(c,t),this.outboundInflightQueue.push({peerId:c,connection:o})}onPeerConnected(t,o){this.metrics?.newConnectionCount.inc({status:o.status}),!(!this.isStarted()||o.status!=="open")&&(this.addPeer(t,o.direction,o.remoteAddr),this.outboundInflightQueue.push({peerId:t,connection:o}))}onPeerDisconnected(t){this.log("connection ended %p",t),this.removePeer(t)}async createOutboundStream(t,o){if(!this.isStarted())return;const c=t.toString();if(this.peers.has(c)&&!this.streamsOutbound.has(c))try{const l=new OutboundStream(await o.newStream(this.multicodecs),d=>{this.log.error("outbound pipe error",d)},{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",t),this.streamsOutbound.set(c,l);const h=l.protocol;h===FloodsubID&&this.floodsubPeers.add(c),this.metrics?.peersPerProtocol.inc({protocol:h},1),this.subscriptions.size>0&&(this.log("send subscriptions to",c),this.sendSubscriptions(c,Array.from(this.subscriptions),!0))}catch(l){this.log.error("createOutboundStream error",l)}}createInboundStream(t,o){if(!this.isStarted())return;const c=t.toString();if(!this.peers.has(c))return;const l=this.streamsInbound.get(c);l!==void 0&&(this.log("replacing existing inbound steam %s",c),l.close().catch(d=>{this.log.error(d)})),this.log("create inbound stream %s",c);const h=new InboundStream(o,{maxDataLength:this.opts.maxInboundDataLength});this.streamsInbound.set(c,h),this.pipePeerReadStream(t,h.source).catch(d=>{this.log(d)})}addPeer(t,o,c){const l=t.toString();if(!this.peers.has(l)){this.log("new peer %p",t),this.peers.add(l),this.score.addPeer(l);const h=multiaddrToIPStr(c);h!==null?this.score.addIP(l,h):this.log("Added peer has no IP in current address %s %s",l,c.toString()),this.outbound.has(l)||this.outbound.set(l,o==="outbound")}}removePeer(t){const o=t.toString();if(!this.peers.has(o))return;this.log("delete peer %p",t),this.peers.delete(o);const c=this.streamsOutbound.get(o),l=this.streamsInbound.get(o);c!=null&&this.metrics?.peersPerProtocol.inc({protocol:c.protocol},-1),c?.close().catch(h=>{this.log.error(h)}),l?.close().catch(h=>{this.log.error(h)}),this.streamsOutbound.delete(o),this.streamsInbound.delete(o);for(const h of this.topics.values())h.delete(o);for(const[h,d]of this.mesh)d.delete(o)&&this.metrics?.onRemoveFromMesh(h,ChurnReason.Dc,1);for(const h of this.fanout.values())h.delete(o);this.floodsubPeers.delete(o),this.gossip.delete(o),this.control.delete(o),this.outbound.delete(o),this.score.removePeer(o),this.acceptFromWhitelist.delete(o)}get started(){return this.status.code===GossipStatusCode.started}getMeshPeers(t){const o=this.mesh.get(t);return o!=null?Array.from(o):[]}getSubscribers(t){const o=this.topics.get(t);return(o!=null?Array.from(o):[]).map(c=>peerIdFromString(c))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(t,o){try{await pipe(o,async c=>{for await(const l of c)try{const h=l.subarray(),d=decodeRpc(h,this.decodeRpcLimits);if(this.metrics?.onRpcRecv(d,h.length),this.opts.awaitRpcHandler)try{await this.handleReceivedRpc(t,d)}catch(g){this.metrics?.onRpcRecvError(),this.log(g)}else this.handleReceivedRpc(t,d).catch(g=>{this.metrics?.onRpcRecvError(),this.log(g)})}catch(h){this.metrics?.onRpcDataError(),this.log(h)}})}catch(c){this.metrics?.onPeerReadStreamError(),this.handlePeerReadStreamError(c,t)}}handlePeerReadStreamError(t,o){this.log.error(t),this.onPeerDisconnected(o)}async handleReceivedRpc(t,o){if(!this.acceptFrom(t.toString())){this.log("received message from unacceptable peer %p",t),this.metrics?.rpcRecvNotAccepted.inc();return}const c=o.subscriptions!=null?o.subscriptions.length:0,l=o.messages!=null?o.messages.length:0;let h=0,d=0,g=0,m=0;if(o.control!=null&&(o.control.ihave!=null&&(h=o.control.ihave.length),o.control.iwant!=null&&(d=o.control.iwant.length),o.control.graft!=null&&(g=o.control.graft.length),o.control.prune!=null&&(m=o.control.prune.length)),this.log(`rpc.from ${t.toString()} subscriptions ${c} messages ${l} ihave ${h} iwant ${d} graft ${g} prune ${m}`),o.subscriptions!=null&&o.subscriptions.length>0){const v=[];o.subscriptions.forEach(_=>{const p=_.topic,a=_.subscribe===!0;if(p!=null){if(this.allowedTopics!=null&&!this.allowedTopics.has(p))return;this.handleReceivedSubscription(t,p,a),v.push({topic:p,subscribe:a})}}),this.safeDispatchEvent("subscription-change",{detail:{peerId:t,subscriptions:v}})}if(o.messages!=null)for(const v of o.messages){if(this.allowedTopics!=null&&!this.allowedTopics.has(v.topic))continue;const _=this.handleReceivedMessage(t,v).catch(p=>{this.metrics?.onMsgRecvError(v.topic),this.log(p)});this.opts.awaitRpcMessageHandler&&await _}o.control!=null&&await this.handleControlMessage(t.toString(),o.control)}handleReceivedSubscription(t,o,c){this.log("subscription update from %p topic %s",t,o);let l=this.topics.get(o);l==null&&(l=new Set,this.topics.set(o,l)),c?l.add(t.toString()):l.delete(t.toString())}async handleReceivedMessage(t,o){this.metrics?.onMsgRecvPreValidation(o.topic);const c=await this.validateReceivedMessage(t,o);this.metrics?.onPrevalidationResult(o.topic,c.code);const l=c.code;switch(l){case MessageStatus.duplicate:this.score.duplicateMessage(t.toString(),c.msgIdStr,o.topic),this.gossipTracer.deliverMessage(c.msgIdStr,!0),this.mcache.observeDuplicate(c.msgIdStr,t.toString());return;case MessageStatus.invalid:if(c.msgIdStr!=null){const h=c.msgIdStr;this.score.rejectMessage(t.toString(),h,o.topic,c.reason),this.gossipTracer.rejectMessage(h,c.reason)}else this.score.rejectInvalidMessage(t.toString(),o.topic);this.metrics?.onMsgRecvInvalid(o.topic,c);return;case MessageStatus.valid:this.score.validateMessage(c.messageId.msgIdStr),this.gossipTracer.deliverMessage(c.messageId.msgIdStr),this.mcache.put(c.messageId,o,!this.opts.asyncValidation),this.subscriptions.has(o.topic)&&(!this.components.peerId.equals(t)||this.opts.emitSelf)&&(super.dispatchEvent(new CustomEvent("gossipsub:message",{detail:{propagationSource:t,msgId:c.messageId.msgIdStr,msg:c.msg}})),super.dispatchEvent(new CustomEvent("message",{detail:c.msg}))),this.opts.asyncValidation||this.forwardMessage(c.messageId.msgIdStr,o,t.toString());break;default:throw new Error(`Invalid validation result: ${l}`)}}async validateReceivedMessage(t,o){const c=this.fastMsgIdFn?.(o),l=c!==void 0?this.fastMsgIdCache?.get(c):void 0;if(l!=null)return{code:MessageStatus.duplicate,msgIdStr:l};const h=await validateToRawMessage(this.globalSignaturePolicy,o);if(!h.valid)return{code:MessageStatus.invalid,reason:RejectReason.Error,error:h.error};const d=h.message;try{this.dataTransform!=null&&(d.data=this.dataTransform.inboundTransform(o.topic,d.data))}catch(p){return this.log("Invalid message, transform failed",p),{code:MessageStatus.invalid,reason:RejectReason.Error,error:ValidateError.TransformFailed}}const g=await this.msgIdFn(d),m=this.msgIdToStrFn(g),v={msgId:g,msgIdStr:m};if(c!==void 0&&this.fastMsgIdCache!=null&&this.fastMsgIdCache.put(c,m)&&this.metrics?.fastMsgIdCacheCollision.inc(),this.seenCache.has(m))return{code:MessageStatus.duplicate,msgIdStr:m};this.seenCache.put(m);const _=this.topicValidators.get(o.topic);if(_!=null){let p;try{p=await _(t,d)}catch(a){const u=a.code;u===ERR_TOPIC_VALIDATOR_IGNORE&&(p=TopicValidatorResult$1.Ignore),u===ERR_TOPIC_VALIDATOR_REJECT?p=TopicValidatorResult$1.Reject:p=TopicValidatorResult$1.Ignore}if(p!==TopicValidatorResult$1.Accept)return{code:MessageStatus.invalid,reason:rejectReasonFromAcceptance(p),msgIdStr:m}}return{code:MessageStatus.valid,messageId:v,msg:d}}getScore(t){return this.score.score(t)}sendSubscriptions(t,o,c){this.sendRpc(t,{subscriptions:o.map(l=>({topic:l,subscribe:c}))})}async handleControlMessage(t,o){if(o===void 0)return;const c=o.ihave!=null?this.handleIHave(t,o.ihave):[],l=o.iwant!=null?this.handleIWant(t,o.iwant):[],h=o.graft!=null?await this.handleGraft(t,o.graft):[];if(o.prune!=null&&await this.handlePrune(t,o.prune),c.length===0&&l.length===0&&h.length===0)return;const d=this.sendRpc(t,{messages:l,control:{iwant:c,prune:h}}),g=c[0]?.messageIDs;g!=null&&(d?this.gossipTracer.addPromise(t,g):this.metrics?.iwantPromiseUntracked.inc(1))}acceptFrom(t){if(this.direct.has(t))return!0;const o=Date.now(),c=this.acceptFromWhitelist.get(t);if(c!=null&&c.messagesAccepted<ACCEPT_FROM_WHITELIST_MAX_MESSAGES&&c.acceptUntil>=o)return c.messagesAccepted+=1,!0;const l=this.score.score(t);return l>=ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE?this.acceptFromWhitelist.set(t,{messagesAccepted:0,acceptUntil:o+ACCEPT_FROM_WHITELIST_DURATION_MS}):this.acceptFromWhitelist.delete(t),l>=this.opts.scoreThresholds.graylistThreshold}handleIHave(t,o){if(o.length===0)return[];const c=this.score.score(t);if(c<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",t,c),this.metrics?.ihaveRcvIgnored.inc({reason:IHaveIgnoreReason.LowScore}),[];const l=(this.peerhave.get(t)??0)+1;if(this.peerhave.set(t,l),l>GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",t,l),this.metrics?.ihaveRcvIgnored.inc({reason:IHaveIgnoreReason.MaxIhave}),[];const h=this.iasked.get(t)??0;if(h>=GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",t,h),this.metrics?.ihaveRcvIgnored.inc({reason:IHaveIgnoreReason.MaxIasked}),[];const d=new Map;if(o.forEach(({topicID:v,messageIDs:_})=>{if(v==null||_==null||!this.mesh.has(v))return;let p=0;_.forEach(a=>{const u=this.msgIdToStrFn(a);this.seenCache.has(u)||(d.set(u,a),p++)}),this.metrics?.onIhaveRcv(v,_.length,p)}),d.size===0)return[];let g=d.size;g+h>GossipsubMaxIHaveLength&&(g=GossipsubMaxIHaveLength-h),this.log("IHAVE: Asking for %d out of %d messages from %s",g,d.size,t);let m=Array.from(d.values());return shuffle$1(m),m=m.slice(0,g),this.iasked.set(t,h+g),[{messageIDs:m}]}handleIWant(t,o){if(o.length===0)return[];const c=this.score.score(t);if(c<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",t,c),[];const l=new Map,h=new Map;let d=0;return o.forEach(({messageIDs:g})=>{g?.forEach(m=>{const v=this.msgIdToStrFn(m),_=this.mcache.getWithIWantCount(v,t);if(_==null){d++;return}if(h.set(_.msg.topic,1+(h.get(_.msg.topic)??0)),_.count>GossipsubGossipRetransmission){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",t,m);return}l.set(v,_.msg)})}),this.metrics?.onIwantRcv(h,d),l.size===0?(this.log("IWANT: Could not provide any wanted messages to %s",t),[]):(this.log("IWANT: Sending %d messages to %s",l.size,t),Array.from(l.values()))}async handleGraft(t,o){const c=[],l=this.score.score(t),h=Date.now();let d=this.opts.doPX;if(o.forEach(({topicID:m})=>{if(m==null)return;const v=this.mesh.get(m);if(v==null){d=!1;return}if(v.has(t))return;if(this.direct.has(t)){this.log("GRAFT: ignoring request from direct peer %s",t),c.push(m),d=!1;return}const _=this.backoff.get(m)?.get(t);if(typeof _=="number"&&h<_){this.log("GRAFT: ignoring backed off peer %s",t),this.score.addPenalty(t,1,ScorePenalty.GraftBackoff),d=!1;const p=_+this.opts.graftFloodThreshold-this.opts.pruneBackoff;h<p&&this.score.addPenalty(t,1,ScorePenalty.GraftBackoff),this.addBackoff(t,m),c.push(m);return}if(l<0){this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",t,l,m),c.push(m),d=!1,this.addBackoff(t,m);return}if(v.size>=this.opts.Dhi&&!(this.outbound.get(t)??!1)){c.push(m),this.addBackoff(t,m);return}this.log("GRAFT: Add mesh link from %s in %s",t,m),this.score.graft(t,m),v.add(t),this.metrics?.onAddToMesh(m,InclusionReason.Subscribed,1)}),c.length===0)return[];const g=!1;return Promise.all(c.map(async m=>this.makePrune(t,m,d,g)))}async handlePrune(t,o){const c=this.score.score(t);for(const{topicID:l,backoff:h,peers:d}of o){if(l==null)continue;const g=this.mesh.get(l);if(g==null)return;if(this.log("PRUNE: Remove mesh link to %s in %s",t,l),this.score.prune(t,l),g.has(t)&&(g.delete(t),this.metrics?.onRemoveFromMesh(l,ChurnReason.Prune,1)),typeof h=="number"&&h>0?this.doAddBackoff(t,l,h*1e3):this.addBackoff(t,l),d!=null&&d.length>0){if(c<this.opts.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",t,c,l);continue}await this.pxConnect(d)}}}addBackoff(t,o){this.doAddBackoff(t,o,this.opts.pruneBackoff)}doAddBackoff(t,o,c){let l=this.backoff.get(o);l==null&&(l=new Map,this.backoff.set(o,l));const h=Date.now()+c;(l.get(t)??0)<h&&l.set(t,h)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((t,o)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",o,t),this.score.addPenalty(o,t,ScorePenalty.BrokenPromise)})}clearBackoff(){if(this.heartbeatTicks%GossipsubPruneBackoffTicks!==0)return;const t=Date.now();this.backoff.forEach((o,c)=>{o.forEach((l,h)=>{l+BACKOFF_SLACK*this.opts.heartbeatInterval<t&&o.delete(h)}),o.size===0&&this.backoff.delete(c)})}async directConnect(){const t=[];this.direct.forEach(o=>{this.streamsOutbound.has(o)||t.push(o)}),await Promise.all(t.map(async o=>this.connect(o)))}async pxConnect(t){t.length>this.opts.prunePeers&&(shuffle$1(t),t=t.slice(0,this.opts.prunePeers));const o=[];await Promise.all(t.map(async c=>{if(c.peerID==null)return;const l=peerIdFromBytes(c.peerID),h=l.toString();if(!this.peers.has(h)){if(c.signedPeerRecord==null){o.push(h);return}try{if(!await this.components.peerStore.consumePeerRecord(c.signedPeerRecord,l)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}o.push(h)}catch{this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}})),o.length!==0&&await Promise.all(o.map(async c=>this.connect(c)))}async connect(t){this.log("Initiating connection with %s",t);const o=peerIdFromString(t),c=await this.components.connectionManager.openConnection(o);for(const l of this.multicodecs)for(const h of this.components.registrar.getTopologies(l))h.onConnect?.(o,c)}subscribe(t){if(this.status.code!==GossipStatusCode.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(t)){this.subscriptions.add(t);for(const o of this.peers.keys())this.sendSubscriptions(o,[t],!0)}this.join(t)}unsubscribe(t){if(this.status.code!==GossipStatusCode.started)throw new Error("Pubsub is not started");const o=this.subscriptions.delete(t);if(this.log("unsubscribe from %s - am subscribed %s",t,o),o)for(const c of this.peers.keys())this.sendSubscriptions(c,[t],!1);this.leave(t)}join(t){if(this.status.code!==GossipStatusCode.started)throw new Error("Gossipsub has not started");if(this.mesh.has(t))return;this.log("JOIN %s",t),this.metrics?.onJoin(t);const o=new Set,c=this.backoff.get(t),l=this.fanout.get(t);if(l!=null&&(this.fanout.delete(t),this.fanoutLastpub.delete(t),l.forEach(h=>{!this.direct.has(h)&&this.score.score(h)>=0&&(c==null||!c.has(h))&&o.add(h)}),this.metrics?.onAddToMesh(t,InclusionReason.Fanout,o.size)),o.size<this.opts.D){const h=o.size;this.getRandomGossipPeers(t,this.opts.D,g=>!o.has(g)&&!this.direct.has(g)&&this.score.score(g)>=0&&(c==null||!c.has(g))).forEach(g=>{o.add(g)}),this.metrics?.onAddToMesh(t,InclusionReason.Random,o.size-h)}this.mesh.set(t,o),o.forEach(h=>{this.log("JOIN: Add mesh link to %s in %s",h,t),this.sendGraft(h,t)})}leave(t){if(this.status.code!==GossipStatusCode.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",t),this.metrics?.onLeave(t);const o=this.mesh.get(t);o!=null&&(Promise.all(Array.from(o).map(async c=>{this.log("LEAVE: Remove mesh link to %s in %s",c,t),await this.sendPrune(c,t)})).catch(c=>{this.log("Error sending prunes to mesh peers",c)}),this.mesh.delete(t))}selectPeersToForward(t,o,c){const l=new Set,h=this.topics.get(t);h!=null&&(this.direct.forEach(g=>{h.has(g)&&o!==g&&!(c?.has(g)??!1)&&l.add(g)}),this.floodsubPeers.forEach(g=>{h.has(g)&&o!==g&&!(c?.has(g)??!1)&&this.score.score(g)>=this.opts.scoreThresholds.publishThreshold&&l.add(g)}));const d=this.mesh.get(t);return d!=null&&d.size>0&&d.forEach(g=>{o!==g&&!(c?.has(g)??!1)&&l.add(g)}),l}selectPeersToPublish(t){const o=new Set,c={direct:0,floodsub:0,mesh:0,fanout:0},l=this.topics.get(t);if(l!=null)if(this.opts.floodPublish)l.forEach(h=>{this.direct.has(h)?(o.add(h),c.direct++):this.score.score(h)>=this.opts.scoreThresholds.publishThreshold&&(o.add(h),c.floodsub++)});else{this.direct.forEach(d=>{l.has(d)&&(o.add(d),c.direct++)}),this.floodsubPeers.forEach(d=>{l.has(d)&&this.score.score(d)>=this.opts.scoreThresholds.publishThreshold&&(o.add(d),c.floodsub++)});const h=this.mesh.get(t);if(h!=null&&h.size>0)h.forEach(d=>{o.add(d),c.mesh++});else{const d=this.fanout.get(t);if(d!=null&&d.size>0)d.forEach(g=>{o.add(g),c.fanout++});else{const g=this.getRandomGossipPeers(t,this.opts.D,m=>this.score.score(m)>=this.opts.scoreThresholds.publishThreshold);g.size>0&&(this.fanout.set(t,g),g.forEach(m=>{o.add(m),c.fanout++}))}this.fanoutLastpub.set(t,Date.now())}}return{tosend:o,tosendCount:c}}forwardMessage(t,o,c,l){c!=null&&this.score.deliverMessage(c,t,o.topic);const h=this.selectPeersToForward(o.topic,c,l);h.forEach(d=>{this.sendRpc(d,{messages:[o]})}),this.metrics?.onForwardMsg(o.topic,h.size)}async publish(t,o,c){const l=Date.now(),h=this.dataTransform!=null?this.dataTransform.outboundTransform(t,o):o;if(this.publishConfig==null)throw Error("PublishError.Uninitialized");const{raw:d,msg:g}=await buildRawMessage(this.publishConfig,t,o,h),m=await this.msgIdFn(g),v=this.msgIdToStrFn(m),_=c?.ignoreDuplicatePublishError??this.opts.ignoreDuplicatePublishError;if(this.seenCache.has(v)){if(_)return this.metrics?.onPublishDuplicateMsg(t),{recipients:[]};throw Error("PublishError.Duplicate")}const{tosend:p,tosendCount:a}=this.selectPeersToPublish(t),u=this.opts.emitSelf&&this.subscriptions.has(t),y=c?.allowPublishToZeroPeers??this.opts.allowPublishToZeroPeers;if(p.size===0&&!y&&!u)throw Error("PublishError.InsufficientPeers");this.seenCache.put(v),this.mcache.put({msgId:m,msgIdStr:v},d,!0),this.publishedMessageIds.put(v);for(const w of p)this.sendRpc(w,{messages:[d]})||p.delete(w);const b=Date.now()-l;return this.metrics?.onPublishMsg(t,a,p.size,d.data!=null?d.data.length:0,b),u&&(p.add(this.components.peerId.toString()),super.dispatchEvent(new CustomEvent("gossipsub:message",{detail:{propagationSource:this.components.peerId,msgId:v,msg:g}})),super.dispatchEvent(new CustomEvent("message",{detail:g}))),{recipients:Array.from(p.values()).map(w=>peerIdFromString(w))}}reportMessageValidationResult(t,o,c){let l;if(c===TopicValidatorResult$1.Accept){if(l=this.mcache.validate(t),l!=null){const{message:d,originatingPeers:g}=l;this.score.deliverMessage(o,t,d.topic),this.forwardMessage(t,l.message,o,g)}}else if(l=this.mcache.remove(t),l!=null){const d=rejectReasonFromAcceptance(c),{message:g,originatingPeers:m}=l;this.score.rejectMessage(o,t,g.topic,d);for(const v of m)this.score.rejectMessage(v,t,g.topic,d)}const h=this.score.messageFirstSeenTimestampMs(t);this.metrics?.onReportValidation(l,c,h)}sendGraft(t,o){const c=[{topicID:o}];this.sendRpc(t,{control:{graft:c}})}async sendPrune(t,o){const l=[await this.makePrune(t,o,this.opts.doPX,!0)];this.sendRpc(t,{control:{prune:l}})}sendRpc(t,o){const c=this.streamsOutbound.get(t);if(c==null)return this.log(`Cannot send RPC to ${t} as there is no open stream to it available`),!1;const l=this.control.get(t);l!=null&&(this.piggybackControl(t,o,l),this.control.delete(t));const h=this.gossip.get(t);h!=null&&(this.piggybackGossip(t,o,h),this.gossip.delete(t));const d=RPC.encode(o).finish();try{c.push(d)}catch(g){return this.log.error(`Cannot send rpc to ${t}`,g),l!=null&&this.control.set(t,l),h!=null&&this.gossip.set(t,h),!1}return this.metrics?.onRpcSent(o,d.length),!0}piggybackControl(t,o,c){if(c.graft!=null){o.control==null&&(o.control={}),o.control.graft==null&&(o.control.graft=[]);for(const l of c.graft)l.topicID!=null&&(this.mesh.get(l.topicID)?.has(t)??!1)&&o.control.graft.push(l)}if(c.prune!=null){o.control==null&&(o.control={}),o.control.prune==null&&(o.control.prune=[]);for(const l of c.prune)l.topicID!=null&&!(this.mesh.get(l.topicID)?.has(t)??!1)&&o.control.prune.push(l)}}piggybackGossip(t,o,c){o.control==null&&(o.control={}),o.control.ihave=c}async sendGraftPrune(t,o,c){const l=this.opts.doPX,h=!1;for(const[d,g]of t){const m=g.map(p=>({topicID:p}));let v=[];const _=o.get(d);_!=null&&(v=await Promise.all(_.map(async p=>this.makePrune(d,p,l&&!(c.get(d)??!1),h))),o.delete(d)),this.sendRpc(d,{control:{graft:m,prune:v}})}for(const[d,g]of o){const m=await Promise.all(g.map(async v=>this.makePrune(d,v,l&&!(c.get(d)??!1),h)));this.sendRpc(d,{control:{prune:m}})}}emitGossip(t){const o=this.mcache.getGossipIDs(new Set(t.keys()));for(const[c,l]of t)this.doEmitGossip(c,l,o.get(c)??[])}doEmitGossip(t,o,c){if(c.length===0||(shuffle$1(c),c.length>GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",c.length),o.size===0))return;let l=this.opts.Dlazy;const h=GossipsubGossipFactor*o.size;let d=o;h>l&&(l=h),l>d.size?l=d.size:d=shuffle$1(Array.from(d)).slice(0,l),d.forEach(g=>{let m=c;c.length>GossipsubMaxIHaveLength&&(m=shuffle$1(m.slice()).slice(0,GossipsubMaxIHaveLength)),this.pushGossip(g,{topicID:t,messageIDs:m})})}flush(){for(const[t,o]of this.gossip.entries())this.gossip.delete(t),this.sendRpc(t,{control:{ihave:o}});for(const[t,o]of this.control.entries())this.control.delete(t),this.sendRpc(t,{control:{graft:o.graft,prune:o.prune}})}pushGossip(t,o){this.log("Add gossip to %s",t);const c=this.gossip.get(t)??[];this.gossip.set(t,c.concat(o))}async makePrune(t,o,c,l){if(this.score.prune(t,o),this.streamsOutbound.get(t)?.protocol===GossipsubIDv10)return{topicID:o,peers:[]};const h=l?this.opts.unsubcribeBackoff:this.opts.pruneBackoff,d=h/1e3;if(this.doAddBackoff(t,o,h),!c)return{topicID:o,peers:[],backoff:d};const g=this.getRandomGossipPeers(o,this.opts.prunePeers,v=>v!==t&&this.score.score(v)>=0),m=await Promise.all(Array.from(g).map(async v=>{const _=peerIdFromString(v);let p;try{p=await this.components.peerStore.get(_)}catch(a){if(a.code!=="ERR_NOT_FOUND")throw a}return{peerID:_.toBytes(),signedPeerRecord:p?.peerRecordEnvelope}}));return{topicID:o,peers:m,backoff:d}}async heartbeat(){const{D:t,Dlo:o,Dhi:c,Dscore:l,Dout:h,fanoutTTL:d}=this.opts;this.heartbeatTicks++;const g=new Map,m=y=>{let b=g.get(y);return b===void 0&&(b=this.score.score(y),g.set(y,b)),b},v=new Map,_=new Map,p=new Map;this.clearBackoff(),this.peerhave.clear(),this.metrics?.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks===0&&await this.directConnect(),this.fastMsgIdCache?.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();const a=new Map;this.mesh.forEach((y,b)=>{const w=this.topics.get(b),T=new Set,B=new Set;if(a.set(b,B),w!=null){const W=shuffle$1(Array.from(w)),fe=this.backoff.get(b);for(const re of W){const se=this.streamsOutbound.get(re);if(se!=null&&this.multicodecs.includes(se.protocol)&&!y.has(re)&&!this.direct.has(re)){const ae=m(re);(fe==null||!fe.has(re))&&ae>=0&&T.add(re),ae>=this.opts.scoreThresholds.gossipThreshold&&B.add(re)}}}const H=(W,fe)=>{this.log("HEARTBEAT: Remove mesh link to %s in %s",W,b),this.addBackoff(W,b),y.delete(W),m(W)>=this.opts.scoreThresholds.gossipThreshold&&B.add(W),this.metrics?.onRemoveFromMesh(b,fe,1);const re=_.get(W);re==null?_.set(W,[b]):re.push(b)},J=(W,fe)=>{this.log("HEARTBEAT: Add mesh link to %s in %s",W,b),this.score.graft(W,b),y.add(W),B.delete(W),this.metrics?.onAddToMesh(b,fe,1);const re=v.get(W);re==null?v.set(W,[b]):re.push(b)};if(y.forEach(W=>{const fe=m(W);fe<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",W,fe,b),H(W,ChurnReason.BadScore),p.set(W,!0))}),y.size<o){const W=t-y.size;removeFirstNItemsFromSet(T,W).forEach(re=>{J(re,InclusionReason.NotEnough)})}if(y.size>c){let W=Array.from(y);W.sort((re,se)=>m(se)-m(re)),W=W.slice(0,l).concat(shuffle$1(W.slice(l)));let fe=0;if(W.slice(0,t).forEach(re=>{(this.outbound.get(re)??!1)&&fe++}),fe<h){const re=ae=>{const ee=W[ae];for(let P=ae;P>0;P--)W[P]=W[P-1];W[0]=ee};if(fe>0){let ae=fe;for(let ee=1;ee<t&&ae>0;ee++)(this.outbound.get(W[ee])??!1)&&(re(ee),ae--)}let se=t-fe;for(let ae=t;ae<W.length&&se>0;ae++)(this.outbound.get(W[ae])??!1)&&(re(ae),se--)}W.slice(t).forEach(re=>{H(re,ChurnReason.Excess)})}if(y.size>=o){let W=0;if(y.forEach(fe=>{(this.outbound.get(fe)??!1)&&W++}),W<h){const fe=h-W;removeItemsFromSet(T,fe,se=>this.outbound.get(se)===!0).forEach(se=>{J(se,InclusionReason.Outbound)})}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks===0&&y.size>1){const W=Array.from(y).sort((se,ae)=>m(se)-m(ae)),fe=Math.floor(y.size/2),re=m(W[fe]);if(re<this.opts.scoreThresholds.opportunisticGraftThreshold){const se=this.opts.opportunisticGraftPeers,ae=removeItemsFromSet(T,se,ee=>m(ee)>re);for(const ee of ae)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",ee,b),J(ee,InclusionReason.Opportunistic)}}});const u=Date.now();this.fanoutLastpub.forEach((y,b)=>{y+d<u&&(this.fanout.delete(b),this.fanoutLastpub.delete(b))}),this.fanout.forEach((y,b)=>{const w=this.topics.get(b);y.forEach(J=>{(!(w?.has(J)??!1)||m(J)<this.opts.scoreThresholds.publishThreshold)&&y.delete(J)});const T=this.topics.get(b),B=[],H=new Set;if(a.set(b,H),T!=null){const J=shuffle$1(Array.from(T));for(const W of J){const fe=this.streamsOutbound.get(W);if(fe!=null&&this.multicodecs.includes(fe.protocol)&&!y.has(W)&&!this.direct.has(W)){const re=m(W);re>=this.opts.scoreThresholds.publishThreshold&&B.push(W),re>=this.opts.scoreThresholds.gossipThreshold&&H.add(W)}}}if(y.size<t){const J=t-y.size;B.slice(0,J).forEach(W=>{y.add(W),H?.delete(W)})}}),this.emitGossip(a),await this.sendGraftPrune(v,_,p),this.flush(),this.mcache.shift(),this.dispatchEvent(new CustomEvent("gossipsub:heartbeat"))}getRandomGossipPeers(t,o,c=()=>!0){const l=this.topics.get(t);if(l==null)return new Set;let h=[];return l.forEach(d=>{const g=this.streamsOutbound.get(d);g!=null&&this.multicodecs.includes(g.protocol)&&c(d)&&h.push(d)}),h=shuffle$1(h),o>0&&h.length>o&&(h=h.slice(0,o)),new Set(h)}onScrapeMetrics(t){t.mcacheSize.set(this.mcache.size),t.mcacheNotValidatedCount.set(this.mcache.notValidatedCount),t.cacheSize.set({cache:"direct"},this.direct.size),t.cacheSize.set({cache:"seenCache"},this.seenCache.size),t.cacheSize.set({cache:"fastMsgIdCache"},this.fastMsgIdCache?.size??0),t.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),t.cacheSize.set({cache:"mcache"},this.mcache.size),t.cacheSize.set({cache:"score"},this.score.size),t.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),t.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),t.cacheSize.set({cache:"topics"},this.topics.size),t.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),t.cacheSize.set({cache:"mesh"},this.mesh.size),t.cacheSize.set({cache:"fanout"},this.fanout.size),t.cacheSize.set({cache:"peers"},this.peers.size),t.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),t.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),t.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),t.cacheSize.set({cache:"gossip"},this.gossip.size),t.cacheSize.set({cache:"control"},this.control.size),t.cacheSize.set({cache:"peerhave"},this.peerhave.size),t.cacheSize.set({cache:"outbound"},this.outbound.size);let o=0;const c=Date.now();t.connectedPeersBackoffSec.reset();for(const g of this.backoff.values()){o+=g.size;for(const[m,v]of g.entries())this.peers.has(m)&&t.connectedPeersBackoffSec.observe(Math.max(0,v-c)/1e3)}t.cacheSize.set({cache:"backoff"},o);for(const[g,m]of this.topics)t.topicPeersCount.set({topicStr:g},m.size);for(const[g,m]of this.mesh)t.meshPeerCounts.set({topicStr:g},m.size);const l=[],h=new Map;t.behaviourPenalty.reset();for(const g of this.peers.keys()){const m=this.score.score(g);l.push(m),h.set(g,m),t.behaviourPenalty.observe(this.score.peerStats.get(g)?.behaviourPenalty??0)}t.registerScores(l,this.opts.scoreThresholds),t.registerScorePerMesh(this.mesh,h);const d=computeAllPeersScoreWeights(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,t.topicStrToLabel);t.registerScoreWeights(d)}}me(GossipSub,"multicodec",GossipsubIDv11);function gossipsub(n={}){return e=>new GossipSub(e,n)}async function setupLibp2p(){const n=await createLibp2p({transports:[webSockets(),webTransport()],services:{pubsub:gossipsub()},connectionEncryption:[noise()],connectionGater:{denyDialMultiaddr:async()=>!1}});return await n.start(),{libp2p:n}}const abi=[{inputs:[],name:"getPeerArraySize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"hederaAddressToPeer",outputs:[{internalType:"string",name:"peerID",type:"string"},{internalType:"uint64",name:"aliveTopic",type:"uint64"},{internalType:"uint64",name:"inVoiceTopic",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"peerList",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint64",name:"aliveTopic",type:"uint64"},{internalType:"uint64",name:"inVoiceTopic",type:"uint64"},{internalType:"string",name:"peerID",type:"string"}],name:"putPeerAvailableSelf",outputs:[],stateMutability:"nonpayable",type:"function"}];var bn$1={exports:{}};bn$1.exports;(function(n){(function(e,t){function o(C,E){if(!C)throw new Error(E||"Assertion failed")}function c(C,E){C.super_=E;var k=function(){};k.prototype=E.prototype,C.prototype=new k,C.prototype.constructor=C}function l(C,E,k){if(l.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,C!==null&&((E==="le"||E==="be")&&(k=E,E=10),this._init(C||0,E||10,k||"be"))}typeof e=="object"?e.exports=l:t.BN=l,l.BN=l,l.wordSize=26;var h;try{typeof window<"u"&&typeof window.Buffer<"u"?h=window.Buffer:h=require$$0$1.Buffer}catch{}l.isBN=function(E){return E instanceof l?!0:E!==null&&typeof E=="object"&&E.constructor.wordSize===l.wordSize&&Array.isArray(E.words)},l.max=function(E,k){return E.cmp(k)>0?E:k},l.min=function(E,k){return E.cmp(k)<0?E:k},l.prototype._init=function(E,k,F){if(typeof E=="number")return this._initNumber(E,k,F);if(typeof E=="object")return this._initArray(E,k,F);k==="hex"&&(k=16),o(k===(k|0)&&k>=2&&k<=36),E=E.toString().replace(/\s+/g,"");var j=0;E[0]==="-"&&(j++,this.negative=1),j<E.length&&(k===16?this._parseHex(E,j,F):(this._parseBase(E,k,j),F==="le"&&this._initArray(this.toArray(),k,F)))},l.prototype._initNumber=function(E,k,F){E<0&&(this.negative=1,E=-E),E<67108864?(this.words=[E&67108863],this.length=1):E<4503599627370496?(this.words=[E&67108863,E/67108864&67108863],this.length=2):(o(E<9007199254740992),this.words=[E&67108863,E/67108864&67108863,1],this.length=3),F==="le"&&this._initArray(this.toArray(),k,F)},l.prototype._initArray=function(E,k,F){if(o(typeof E.length=="number"),E.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(E.length/3),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var Q,G,U=0;if(F==="be")for(j=E.length-1,Q=0;j>=0;j-=3)G=E[j]|E[j-1]<<8|E[j-2]<<16,this.words[Q]|=G<<U&67108863,this.words[Q+1]=G>>>26-U&67108863,U+=24,U>=26&&(U-=26,Q++);else if(F==="le")for(j=0,Q=0;j<E.length;j+=3)G=E[j]|E[j+1]<<8|E[j+2]<<16,this.words[Q]|=G<<U&67108863,this.words[Q+1]=G>>>26-U&67108863,U+=24,U>=26&&(U-=26,Q++);return this._strip()};function d(C,E){var k=C.charCodeAt(E);if(k>=48&&k<=57)return k-48;if(k>=65&&k<=70)return k-55;if(k>=97&&k<=102)return k-87;o(!1,"Invalid character in "+C)}function g(C,E,k){var F=d(C,k);return k-1>=E&&(F|=d(C,k-1)<<4),F}l.prototype._parseHex=function(E,k,F){this.length=Math.ceil((E.length-k)/6),this.words=new Array(this.length);for(var j=0;j<this.length;j++)this.words[j]=0;var Q=0,G=0,U;if(F==="be")for(j=E.length-1;j>=k;j-=2)U=g(E,k,j)<<Q,this.words[G]|=U&67108863,Q>=18?(Q-=18,G+=1,this.words[G]|=U>>>26):Q+=8;else{var $=E.length-k;for(j=$%2===0?k+1:k;j<E.length;j+=2)U=g(E,k,j)<<Q,this.words[G]|=U&67108863,Q>=18?(Q-=18,G+=1,this.words[G]|=U>>>26):Q+=8}this._strip()};function m(C,E,k,F){for(var j=0,Q=0,G=Math.min(C.length,k),U=E;U<G;U++){var $=C.charCodeAt(U)-48;j*=F,$>=49?Q=$-49+10:$>=17?Q=$-17+10:Q=$,o($>=0&&Q<F,"Invalid character"),j+=Q}return j}l.prototype._parseBase=function(E,k,F){this.words=[0],this.length=1;for(var j=0,Q=1;Q<=67108863;Q*=k)j++;j--,Q=Q/k|0;for(var G=E.length-F,U=G%j,$=Math.min(G,G-U)+F,O=0,oe=F;oe<$;oe+=j)O=m(E,oe,oe+j,k),this.imuln(Q),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O);if(U!==0){var ue=1;for(O=m(E,oe,E.length,k),oe=0;oe<U;oe++)ue*=k;this.imuln(ue),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O)}this._strip()},l.prototype.copy=function(E){E.words=new Array(this.length);for(var k=0;k<this.length;k++)E.words[k]=this.words[k];E.length=this.length,E.negative=this.negative,E.red=this.red};function v(C,E){C.words=E.words,C.length=E.length,C.negative=E.negative,C.red=E.red}if(l.prototype._move=function(E){v(E,this)},l.prototype.clone=function(){var E=new l(null);return this.copy(E),E},l.prototype._expand=function(E){for(;this.length<E;)this.words[this.length++]=0;return this},l.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{l.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{l.prototype.inspect=_}else l.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(E,k){E=E||10,k=k|0||1;var F;if(E===16||E==="hex"){F="";for(var j=0,Q=0,G=0;G<this.length;G++){var U=this.words[G],$=((U<<j|Q)&16777215).toString(16);Q=U>>>24-j&16777215,j+=2,j>=26&&(j-=26,G--),Q!==0||G!==this.length-1?F=p[6-$.length]+$+F:F=$+F}for(Q!==0&&(F=Q.toString(16)+F);F.length%k!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}if(E===(E|0)&&E>=2&&E<=36){var O=a[E],oe=u[E];F="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var q=ue.modrn(oe).toString(E);ue=ue.idivn(oe),ue.isZero()?F=q+F:F=p[O-q.length]+q+F}for(this.isZero()&&(F="0"+F);F.length%k!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}o(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var E=this.words[0];return this.length===2?E+=this.words[1]*67108864:this.length===3&&this.words[2]===1?E+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-E:E},l.prototype.toJSON=function(){return this.toString(16,2)},h&&(l.prototype.toBuffer=function(E,k){return this.toArrayLike(h,E,k)}),l.prototype.toArray=function(E,k){return this.toArrayLike(Array,E,k)};var y=function(E,k){return E.allocUnsafe?E.allocUnsafe(k):new E(k)};l.prototype.toArrayLike=function(E,k,F){this._strip();var j=this.byteLength(),Q=F||Math.max(1,j);o(j<=Q,"byte array longer than desired length"),o(Q>0,"Requested array length <= 0");var G=y(E,Q),U=k==="le"?"LE":"BE";return this["_toArrayLike"+U](G,j),G},l.prototype._toArrayLikeLE=function(E,k){for(var F=0,j=0,Q=0,G=0;Q<this.length;Q++){var U=this.words[Q]<<G|j;E[F++]=U&255,F<E.length&&(E[F++]=U>>8&255),F<E.length&&(E[F++]=U>>16&255),G===6?(F<E.length&&(E[F++]=U>>24&255),j=0,G=0):(j=U>>>24,G+=2)}if(F<E.length)for(E[F++]=j;F<E.length;)E[F++]=0},l.prototype._toArrayLikeBE=function(E,k){for(var F=E.length-1,j=0,Q=0,G=0;Q<this.length;Q++){var U=this.words[Q]<<G|j;E[F--]=U&255,F>=0&&(E[F--]=U>>8&255),F>=0&&(E[F--]=U>>16&255),G===6?(F>=0&&(E[F--]=U>>24&255),j=0,G=0):(j=U>>>24,G+=2)}if(F>=0)for(E[F--]=j;F>=0;)E[F--]=0},Math.clz32?l.prototype._countBits=function(E){return 32-Math.clz32(E)}:l.prototype._countBits=function(E){var k=E,F=0;return k>=4096&&(F+=13,k>>>=13),k>=64&&(F+=7,k>>>=7),k>=8&&(F+=4,k>>>=4),k>=2&&(F+=2,k>>>=2),F+k},l.prototype._zeroBits=function(E){if(E===0)return 26;var k=E,F=0;return k&8191||(F+=13,k>>>=13),k&127||(F+=7,k>>>=7),k&15||(F+=4,k>>>=4),k&3||(F+=2,k>>>=2),k&1||F++,F},l.prototype.bitLength=function(){var E=this.words[this.length-1],k=this._countBits(E);return(this.length-1)*26+k};function b(C){for(var E=new Array(C.bitLength()),k=0;k<E.length;k++){var F=k/26|0,j=k%26;E[k]=C.words[F]>>>j&1}return E}l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var E=0,k=0;k<this.length;k++){var F=this._zeroBits(this.words[k]);if(E+=F,F!==26)break}return E},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(E){return this.negative!==0?this.abs().inotn(E).iaddn(1):this.clone()},l.prototype.fromTwos=function(E){return this.testn(E-1)?this.notn(E).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(E){for(;this.length<E.length;)this.words[this.length++]=0;for(var k=0;k<E.length;k++)this.words[k]=this.words[k]|E.words[k];return this._strip()},l.prototype.ior=function(E){return o((this.negative|E.negative)===0),this.iuor(E)},l.prototype.or=function(E){return this.length>E.length?this.clone().ior(E):E.clone().ior(this)},l.prototype.uor=function(E){return this.length>E.length?this.clone().iuor(E):E.clone().iuor(this)},l.prototype.iuand=function(E){var k;this.length>E.length?k=E:k=this;for(var F=0;F<k.length;F++)this.words[F]=this.words[F]&E.words[F];return this.length=k.length,this._strip()},l.prototype.iand=function(E){return o((this.negative|E.negative)===0),this.iuand(E)},l.prototype.and=function(E){return this.length>E.length?this.clone().iand(E):E.clone().iand(this)},l.prototype.uand=function(E){return this.length>E.length?this.clone().iuand(E):E.clone().iuand(this)},l.prototype.iuxor=function(E){var k,F;this.length>E.length?(k=this,F=E):(k=E,F=this);for(var j=0;j<F.length;j++)this.words[j]=k.words[j]^F.words[j];if(this!==k)for(;j<k.length;j++)this.words[j]=k.words[j];return this.length=k.length,this._strip()},l.prototype.ixor=function(E){return o((this.negative|E.negative)===0),this.iuxor(E)},l.prototype.xor=function(E){return this.length>E.length?this.clone().ixor(E):E.clone().ixor(this)},l.prototype.uxor=function(E){return this.length>E.length?this.clone().iuxor(E):E.clone().iuxor(this)},l.prototype.inotn=function(E){o(typeof E=="number"&&E>=0);var k=Math.ceil(E/26)|0,F=E%26;this._expand(k),F>0&&k--;for(var j=0;j<k;j++)this.words[j]=~this.words[j]&67108863;return F>0&&(this.words[j]=~this.words[j]&67108863>>26-F),this._strip()},l.prototype.notn=function(E){return this.clone().inotn(E)},l.prototype.setn=function(E,k){o(typeof E=="number"&&E>=0);var F=E/26|0,j=E%26;return this._expand(F+1),k?this.words[F]=this.words[F]|1<<j:this.words[F]=this.words[F]&~(1<<j),this._strip()},l.prototype.iadd=function(E){var k;if(this.negative!==0&&E.negative===0)return this.negative=0,k=this.isub(E),this.negative^=1,this._normSign();if(this.negative===0&&E.negative!==0)return E.negative=0,k=this.isub(E),E.negative=1,k._normSign();var F,j;this.length>E.length?(F=this,j=E):(F=E,j=this);for(var Q=0,G=0;G<j.length;G++)k=(F.words[G]|0)+(j.words[G]|0)+Q,this.words[G]=k&67108863,Q=k>>>26;for(;Q!==0&&G<F.length;G++)k=(F.words[G]|0)+Q,this.words[G]=k&67108863,Q=k>>>26;if(this.length=F.length,Q!==0)this.words[this.length]=Q,this.length++;else if(F!==this)for(;G<F.length;G++)this.words[G]=F.words[G];return this},l.prototype.add=function(E){var k;return E.negative!==0&&this.negative===0?(E.negative=0,k=this.sub(E),E.negative^=1,k):E.negative===0&&this.negative!==0?(this.negative=0,k=E.sub(this),this.negative=1,k):this.length>E.length?this.clone().iadd(E):E.clone().iadd(this)},l.prototype.isub=function(E){if(E.negative!==0){E.negative=0;var k=this.iadd(E);return E.negative=1,k._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(E),this.negative=1,this._normSign();var F=this.cmp(E);if(F===0)return this.negative=0,this.length=1,this.words[0]=0,this;var j,Q;F>0?(j=this,Q=E):(j=E,Q=this);for(var G=0,U=0;U<Q.length;U++)k=(j.words[U]|0)-(Q.words[U]|0)+G,G=k>>26,this.words[U]=k&67108863;for(;G!==0&&U<j.length;U++)k=(j.words[U]|0)+G,G=k>>26,this.words[U]=k&67108863;if(G===0&&U<j.length&&j!==this)for(;U<j.length;U++)this.words[U]=j.words[U];return this.length=Math.max(this.length,U),j!==this&&(this.negative=1),this._strip()},l.prototype.sub=function(E){return this.clone().isub(E)};function w(C,E,k){k.negative=E.negative^C.negative;var F=C.length+E.length|0;k.length=F,F=F-1|0;var j=C.words[0]|0,Q=E.words[0]|0,G=j*Q,U=G&67108863,$=G/67108864|0;k.words[0]=U;for(var O=1;O<F;O++){for(var oe=$>>>26,ue=$&67108863,q=Math.min(O,E.length-1),pe=Math.max(0,O-C.length+1);pe<=q;pe++){var be=O-pe|0;j=C.words[be]|0,Q=E.words[pe]|0,G=j*Q+ue,oe+=G/67108864|0,ue=G&67108863}k.words[O]=ue|0,$=oe|0}return $!==0?k.words[O]=$|0:k.length--,k._strip()}var T=function(E,k,F){var j=E.words,Q=k.words,G=F.words,U=0,$,O,oe,ue=j[0]|0,q=ue&8191,pe=ue>>>13,be=j[1]|0,ve=be&8191,we=be>>>13,Ce=j[2]|0,Re=Ce&8191,Se=Ce>>>13,$e=j[3]|0,De=$e&8191,Ne=$e>>>13,pt=j[4]|0,xt=pt&8191,Xe=pt>>>13,yt=j[5]|0,gt=yt&8191,ze=yt>>>13,et=j[6]|0,at=et&8191,Ye=et>>>13,lt=j[7]|0,dt=lt&8191,le=lt>>>13,ne=j[8]|0,ie=ne&8191,ge=ne>>>13,_e=j[9]|0,Ee=_e&8191,Te=_e>>>13,Qe=Q[0]|0,ot=Qe&8191,je=Qe>>>13,ct=Q[1]|0,tt=ct&8191,mt=ct>>>13,$t=Q[2]|0,Kt=$t&8191,It=$t>>>13,Vt=Q[3]|0,Pt=Vt&8191,ft=Vt>>>13,Nt=Q[4]|0,Ot=Nt&8191,wt=Nt>>>13,Lt=Q[5]|0,jt=Lt&8191,nt=Lt>>>13,St=Q[6]|0,ce=St&8191,de=St>>>13,he=Q[7]|0,te=he&8191,ye=he>>>13,Ae=Q[8]|0,Ie=Ae&8191,ke=Ae>>>13,Oe=Q[9]|0,Ge=Oe&8191,Ue=Oe>>>13;F.negative=E.negative^k.negative,F.length=19,$=Math.imul(q,ot),O=Math.imul(q,je),O=O+Math.imul(pe,ot)|0,oe=Math.imul(pe,je);var Tt=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,$=Math.imul(ve,ot),O=Math.imul(ve,je),O=O+Math.imul(we,ot)|0,oe=Math.imul(we,je),$=$+Math.imul(q,tt)|0,O=O+Math.imul(q,mt)|0,O=O+Math.imul(pe,tt)|0,oe=oe+Math.imul(pe,mt)|0;var Ve=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,$=Math.imul(Re,ot),O=Math.imul(Re,je),O=O+Math.imul(Se,ot)|0,oe=Math.imul(Se,je),$=$+Math.imul(ve,tt)|0,O=O+Math.imul(ve,mt)|0,O=O+Math.imul(we,tt)|0,oe=oe+Math.imul(we,mt)|0,$=$+Math.imul(q,Kt)|0,O=O+Math.imul(q,It)|0,O=O+Math.imul(pe,Kt)|0,oe=oe+Math.imul(pe,It)|0;var it=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(it>>>26)|0,it&=67108863,$=Math.imul(De,ot),O=Math.imul(De,je),O=O+Math.imul(Ne,ot)|0,oe=Math.imul(Ne,je),$=$+Math.imul(Re,tt)|0,O=O+Math.imul(Re,mt)|0,O=O+Math.imul(Se,tt)|0,oe=oe+Math.imul(Se,mt)|0,$=$+Math.imul(ve,Kt)|0,O=O+Math.imul(ve,It)|0,O=O+Math.imul(we,Kt)|0,oe=oe+Math.imul(we,It)|0,$=$+Math.imul(q,Pt)|0,O=O+Math.imul(q,ft)|0,O=O+Math.imul(pe,Pt)|0,oe=oe+Math.imul(pe,ft)|0;var st=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(st>>>26)|0,st&=67108863,$=Math.imul(xt,ot),O=Math.imul(xt,je),O=O+Math.imul(Xe,ot)|0,oe=Math.imul(Xe,je),$=$+Math.imul(De,tt)|0,O=O+Math.imul(De,mt)|0,O=O+Math.imul(Ne,tt)|0,oe=oe+Math.imul(Ne,mt)|0,$=$+Math.imul(Re,Kt)|0,O=O+Math.imul(Re,It)|0,O=O+Math.imul(Se,Kt)|0,oe=oe+Math.imul(Se,It)|0,$=$+Math.imul(ve,Pt)|0,O=O+Math.imul(ve,ft)|0,O=O+Math.imul(we,Pt)|0,oe=oe+Math.imul(we,ft)|0,$=$+Math.imul(q,Ot)|0,O=O+Math.imul(q,wt)|0,O=O+Math.imul(pe,Ot)|0,oe=oe+Math.imul(pe,wt)|0;var ht=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(ht>>>26)|0,ht&=67108863,$=Math.imul(gt,ot),O=Math.imul(gt,je),O=O+Math.imul(ze,ot)|0,oe=Math.imul(ze,je),$=$+Math.imul(xt,tt)|0,O=O+Math.imul(xt,mt)|0,O=O+Math.imul(Xe,tt)|0,oe=oe+Math.imul(Xe,mt)|0,$=$+Math.imul(De,Kt)|0,O=O+Math.imul(De,It)|0,O=O+Math.imul(Ne,Kt)|0,oe=oe+Math.imul(Ne,It)|0,$=$+Math.imul(Re,Pt)|0,O=O+Math.imul(Re,ft)|0,O=O+Math.imul(Se,Pt)|0,oe=oe+Math.imul(Se,ft)|0,$=$+Math.imul(ve,Ot)|0,O=O+Math.imul(ve,wt)|0,O=O+Math.imul(we,Ot)|0,oe=oe+Math.imul(we,wt)|0,$=$+Math.imul(q,jt)|0,O=O+Math.imul(q,nt)|0,O=O+Math.imul(pe,jt)|0,oe=oe+Math.imul(pe,nt)|0;var Et=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(Et>>>26)|0,Et&=67108863,$=Math.imul(at,ot),O=Math.imul(at,je),O=O+Math.imul(Ye,ot)|0,oe=Math.imul(Ye,je),$=$+Math.imul(gt,tt)|0,O=O+Math.imul(gt,mt)|0,O=O+Math.imul(ze,tt)|0,oe=oe+Math.imul(ze,mt)|0,$=$+Math.imul(xt,Kt)|0,O=O+Math.imul(xt,It)|0,O=O+Math.imul(Xe,Kt)|0,oe=oe+Math.imul(Xe,It)|0,$=$+Math.imul(De,Pt)|0,O=O+Math.imul(De,ft)|0,O=O+Math.imul(Ne,Pt)|0,oe=oe+Math.imul(Ne,ft)|0,$=$+Math.imul(Re,Ot)|0,O=O+Math.imul(Re,wt)|0,O=O+Math.imul(Se,Ot)|0,oe=oe+Math.imul(Se,wt)|0,$=$+Math.imul(ve,jt)|0,O=O+Math.imul(ve,nt)|0,O=O+Math.imul(we,jt)|0,oe=oe+Math.imul(we,nt)|0,$=$+Math.imul(q,ce)|0,O=O+Math.imul(q,de)|0,O=O+Math.imul(pe,ce)|0,oe=oe+Math.imul(pe,de)|0;var bt=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(bt>>>26)|0,bt&=67108863,$=Math.imul(dt,ot),O=Math.imul(dt,je),O=O+Math.imul(le,ot)|0,oe=Math.imul(le,je),$=$+Math.imul(at,tt)|0,O=O+Math.imul(at,mt)|0,O=O+Math.imul(Ye,tt)|0,oe=oe+Math.imul(Ye,mt)|0,$=$+Math.imul(gt,Kt)|0,O=O+Math.imul(gt,It)|0,O=O+Math.imul(ze,Kt)|0,oe=oe+Math.imul(ze,It)|0,$=$+Math.imul(xt,Pt)|0,O=O+Math.imul(xt,ft)|0,O=O+Math.imul(Xe,Pt)|0,oe=oe+Math.imul(Xe,ft)|0,$=$+Math.imul(De,Ot)|0,O=O+Math.imul(De,wt)|0,O=O+Math.imul(Ne,Ot)|0,oe=oe+Math.imul(Ne,wt)|0,$=$+Math.imul(Re,jt)|0,O=O+Math.imul(Re,nt)|0,O=O+Math.imul(Se,jt)|0,oe=oe+Math.imul(Se,nt)|0,$=$+Math.imul(ve,ce)|0,O=O+Math.imul(ve,de)|0,O=O+Math.imul(we,ce)|0,oe=oe+Math.imul(we,de)|0,$=$+Math.imul(q,te)|0,O=O+Math.imul(q,ye)|0,O=O+Math.imul(pe,te)|0,oe=oe+Math.imul(pe,ye)|0;var _t=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(_t>>>26)|0,_t&=67108863,$=Math.imul(ie,ot),O=Math.imul(ie,je),O=O+Math.imul(ge,ot)|0,oe=Math.imul(ge,je),$=$+Math.imul(dt,tt)|0,O=O+Math.imul(dt,mt)|0,O=O+Math.imul(le,tt)|0,oe=oe+Math.imul(le,mt)|0,$=$+Math.imul(at,Kt)|0,O=O+Math.imul(at,It)|0,O=O+Math.imul(Ye,Kt)|0,oe=oe+Math.imul(Ye,It)|0,$=$+Math.imul(gt,Pt)|0,O=O+Math.imul(gt,ft)|0,O=O+Math.imul(ze,Pt)|0,oe=oe+Math.imul(ze,ft)|0,$=$+Math.imul(xt,Ot)|0,O=O+Math.imul(xt,wt)|0,O=O+Math.imul(Xe,Ot)|0,oe=oe+Math.imul(Xe,wt)|0,$=$+Math.imul(De,jt)|0,O=O+Math.imul(De,nt)|0,O=O+Math.imul(Ne,jt)|0,oe=oe+Math.imul(Ne,nt)|0,$=$+Math.imul(Re,ce)|0,O=O+Math.imul(Re,de)|0,O=O+Math.imul(Se,ce)|0,oe=oe+Math.imul(Se,de)|0,$=$+Math.imul(ve,te)|0,O=O+Math.imul(ve,ye)|0,O=O+Math.imul(we,te)|0,oe=oe+Math.imul(we,ye)|0,$=$+Math.imul(q,Ie)|0,O=O+Math.imul(q,ke)|0,O=O+Math.imul(pe,Ie)|0,oe=oe+Math.imul(pe,ke)|0;var vt=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(vt>>>26)|0,vt&=67108863,$=Math.imul(Ee,ot),O=Math.imul(Ee,je),O=O+Math.imul(Te,ot)|0,oe=Math.imul(Te,je),$=$+Math.imul(ie,tt)|0,O=O+Math.imul(ie,mt)|0,O=O+Math.imul(ge,tt)|0,oe=oe+Math.imul(ge,mt)|0,$=$+Math.imul(dt,Kt)|0,O=O+Math.imul(dt,It)|0,O=O+Math.imul(le,Kt)|0,oe=oe+Math.imul(le,It)|0,$=$+Math.imul(at,Pt)|0,O=O+Math.imul(at,ft)|0,O=O+Math.imul(Ye,Pt)|0,oe=oe+Math.imul(Ye,ft)|0,$=$+Math.imul(gt,Ot)|0,O=O+Math.imul(gt,wt)|0,O=O+Math.imul(ze,Ot)|0,oe=oe+Math.imul(ze,wt)|0,$=$+Math.imul(xt,jt)|0,O=O+Math.imul(xt,nt)|0,O=O+Math.imul(Xe,jt)|0,oe=oe+Math.imul(Xe,nt)|0,$=$+Math.imul(De,ce)|0,O=O+Math.imul(De,de)|0,O=O+Math.imul(Ne,ce)|0,oe=oe+Math.imul(Ne,de)|0,$=$+Math.imul(Re,te)|0,O=O+Math.imul(Re,ye)|0,O=O+Math.imul(Se,te)|0,oe=oe+Math.imul(Se,ye)|0,$=$+Math.imul(ve,Ie)|0,O=O+Math.imul(ve,ke)|0,O=O+Math.imul(we,Ie)|0,oe=oe+Math.imul(we,ke)|0,$=$+Math.imul(q,Ge)|0,O=O+Math.imul(q,Ue)|0,O=O+Math.imul(pe,Ge)|0,oe=oe+Math.imul(pe,Ue)|0;var We=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(We>>>26)|0,We&=67108863,$=Math.imul(Ee,tt),O=Math.imul(Ee,mt),O=O+Math.imul(Te,tt)|0,oe=Math.imul(Te,mt),$=$+Math.imul(ie,Kt)|0,O=O+Math.imul(ie,It)|0,O=O+Math.imul(ge,Kt)|0,oe=oe+Math.imul(ge,It)|0,$=$+Math.imul(dt,Pt)|0,O=O+Math.imul(dt,ft)|0,O=O+Math.imul(le,Pt)|0,oe=oe+Math.imul(le,ft)|0,$=$+Math.imul(at,Ot)|0,O=O+Math.imul(at,wt)|0,O=O+Math.imul(Ye,Ot)|0,oe=oe+Math.imul(Ye,wt)|0,$=$+Math.imul(gt,jt)|0,O=O+Math.imul(gt,nt)|0,O=O+Math.imul(ze,jt)|0,oe=oe+Math.imul(ze,nt)|0,$=$+Math.imul(xt,ce)|0,O=O+Math.imul(xt,de)|0,O=O+Math.imul(Xe,ce)|0,oe=oe+Math.imul(Xe,de)|0,$=$+Math.imul(De,te)|0,O=O+Math.imul(De,ye)|0,O=O+Math.imul(Ne,te)|0,oe=oe+Math.imul(Ne,ye)|0,$=$+Math.imul(Re,Ie)|0,O=O+Math.imul(Re,ke)|0,O=O+Math.imul(Se,Ie)|0,oe=oe+Math.imul(Se,ke)|0,$=$+Math.imul(ve,Ge)|0,O=O+Math.imul(ve,Ue)|0,O=O+Math.imul(we,Ge)|0,oe=oe+Math.imul(we,Ue)|0;var rt=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(rt>>>26)|0,rt&=67108863,$=Math.imul(Ee,Kt),O=Math.imul(Ee,It),O=O+Math.imul(Te,Kt)|0,oe=Math.imul(Te,It),$=$+Math.imul(ie,Pt)|0,O=O+Math.imul(ie,ft)|0,O=O+Math.imul(ge,Pt)|0,oe=oe+Math.imul(ge,ft)|0,$=$+Math.imul(dt,Ot)|0,O=O+Math.imul(dt,wt)|0,O=O+Math.imul(le,Ot)|0,oe=oe+Math.imul(le,wt)|0,$=$+Math.imul(at,jt)|0,O=O+Math.imul(at,nt)|0,O=O+Math.imul(Ye,jt)|0,oe=oe+Math.imul(Ye,nt)|0,$=$+Math.imul(gt,ce)|0,O=O+Math.imul(gt,de)|0,O=O+Math.imul(ze,ce)|0,oe=oe+Math.imul(ze,de)|0,$=$+Math.imul(xt,te)|0,O=O+Math.imul(xt,ye)|0,O=O+Math.imul(Xe,te)|0,oe=oe+Math.imul(Xe,ye)|0,$=$+Math.imul(De,Ie)|0,O=O+Math.imul(De,ke)|0,O=O+Math.imul(Ne,Ie)|0,oe=oe+Math.imul(Ne,ke)|0,$=$+Math.imul(Re,Ge)|0,O=O+Math.imul(Re,Ue)|0,O=O+Math.imul(Se,Ge)|0,oe=oe+Math.imul(Se,Ue)|0;var qe=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(qe>>>26)|0,qe&=67108863,$=Math.imul(Ee,Pt),O=Math.imul(Ee,ft),O=O+Math.imul(Te,Pt)|0,oe=Math.imul(Te,ft),$=$+Math.imul(ie,Ot)|0,O=O+Math.imul(ie,wt)|0,O=O+Math.imul(ge,Ot)|0,oe=oe+Math.imul(ge,wt)|0,$=$+Math.imul(dt,jt)|0,O=O+Math.imul(dt,nt)|0,O=O+Math.imul(le,jt)|0,oe=oe+Math.imul(le,nt)|0,$=$+Math.imul(at,ce)|0,O=O+Math.imul(at,de)|0,O=O+Math.imul(Ye,ce)|0,oe=oe+Math.imul(Ye,de)|0,$=$+Math.imul(gt,te)|0,O=O+Math.imul(gt,ye)|0,O=O+Math.imul(ze,te)|0,oe=oe+Math.imul(ze,ye)|0,$=$+Math.imul(xt,Ie)|0,O=O+Math.imul(xt,ke)|0,O=O+Math.imul(Xe,Ie)|0,oe=oe+Math.imul(Xe,ke)|0,$=$+Math.imul(De,Ge)|0,O=O+Math.imul(De,Ue)|0,O=O+Math.imul(Ne,Ge)|0,oe=oe+Math.imul(Ne,Ue)|0;var Ze=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,$=Math.imul(Ee,Ot),O=Math.imul(Ee,wt),O=O+Math.imul(Te,Ot)|0,oe=Math.imul(Te,wt),$=$+Math.imul(ie,jt)|0,O=O+Math.imul(ie,nt)|0,O=O+Math.imul(ge,jt)|0,oe=oe+Math.imul(ge,nt)|0,$=$+Math.imul(dt,ce)|0,O=O+Math.imul(dt,de)|0,O=O+Math.imul(le,ce)|0,oe=oe+Math.imul(le,de)|0,$=$+Math.imul(at,te)|0,O=O+Math.imul(at,ye)|0,O=O+Math.imul(Ye,te)|0,oe=oe+Math.imul(Ye,ye)|0,$=$+Math.imul(gt,Ie)|0,O=O+Math.imul(gt,ke)|0,O=O+Math.imul(ze,Ie)|0,oe=oe+Math.imul(ze,ke)|0,$=$+Math.imul(xt,Ge)|0,O=O+Math.imul(xt,Ue)|0,O=O+Math.imul(Xe,Ge)|0,oe=oe+Math.imul(Xe,Ue)|0;var Je=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(Je>>>26)|0,Je&=67108863,$=Math.imul(Ee,jt),O=Math.imul(Ee,nt),O=O+Math.imul(Te,jt)|0,oe=Math.imul(Te,nt),$=$+Math.imul(ie,ce)|0,O=O+Math.imul(ie,de)|0,O=O+Math.imul(ge,ce)|0,oe=oe+Math.imul(ge,de)|0,$=$+Math.imul(dt,te)|0,O=O+Math.imul(dt,ye)|0,O=O+Math.imul(le,te)|0,oe=oe+Math.imul(le,ye)|0,$=$+Math.imul(at,Ie)|0,O=O+Math.imul(at,ke)|0,O=O+Math.imul(Ye,Ie)|0,oe=oe+Math.imul(Ye,ke)|0,$=$+Math.imul(gt,Ge)|0,O=O+Math.imul(gt,Ue)|0,O=O+Math.imul(ze,Ge)|0,oe=oe+Math.imul(ze,Ue)|0;var He=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(He>>>26)|0,He&=67108863,$=Math.imul(Ee,ce),O=Math.imul(Ee,de),O=O+Math.imul(Te,ce)|0,oe=Math.imul(Te,de),$=$+Math.imul(ie,te)|0,O=O+Math.imul(ie,ye)|0,O=O+Math.imul(ge,te)|0,oe=oe+Math.imul(ge,ye)|0,$=$+Math.imul(dt,Ie)|0,O=O+Math.imul(dt,ke)|0,O=O+Math.imul(le,Ie)|0,oe=oe+Math.imul(le,ke)|0,$=$+Math.imul(at,Ge)|0,O=O+Math.imul(at,Ue)|0,O=O+Math.imul(Ye,Ge)|0,oe=oe+Math.imul(Ye,Ue)|0;var Pe=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,$=Math.imul(Ee,te),O=Math.imul(Ee,ye),O=O+Math.imul(Te,te)|0,oe=Math.imul(Te,ye),$=$+Math.imul(ie,Ie)|0,O=O+Math.imul(ie,ke)|0,O=O+Math.imul(ge,Ie)|0,oe=oe+Math.imul(ge,ke)|0,$=$+Math.imul(dt,Ge)|0,O=O+Math.imul(dt,Ue)|0,O=O+Math.imul(le,Ge)|0,oe=oe+Math.imul(le,Ue)|0;var Be=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(Be>>>26)|0,Be&=67108863,$=Math.imul(Ee,Ie),O=Math.imul(Ee,ke),O=O+Math.imul(Te,Ie)|0,oe=Math.imul(Te,ke),$=$+Math.imul(ie,Ge)|0,O=O+Math.imul(ie,Ue)|0,O=O+Math.imul(ge,Ge)|0,oe=oe+Math.imul(ge,Ue)|0;var Fe=(U+$|0)+((O&8191)<<13)|0;U=(oe+(O>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,$=Math.imul(Ee,Ge),O=Math.imul(Ee,Ue),O=O+Math.imul(Te,Ge)|0,oe=Math.imul(Te,Ue);var Le=(U+$|0)+((O&8191)<<13)|0;return U=(oe+(O>>>13)|0)+(Le>>>26)|0,Le&=67108863,G[0]=Tt,G[1]=Ve,G[2]=it,G[3]=st,G[4]=ht,G[5]=Et,G[6]=bt,G[7]=_t,G[8]=vt,G[9]=We,G[10]=rt,G[11]=qe,G[12]=Ze,G[13]=Je,G[14]=He,G[15]=Pe,G[16]=Be,G[17]=Fe,G[18]=Le,U!==0&&(G[19]=U,F.length++),F};Math.imul||(T=w);function B(C,E,k){k.negative=E.negative^C.negative,k.length=C.length+E.length;for(var F=0,j=0,Q=0;Q<k.length-1;Q++){var G=j;j=0;for(var U=F&67108863,$=Math.min(Q,E.length-1),O=Math.max(0,Q-C.length+1);O<=$;O++){var oe=Q-O,ue=C.words[oe]|0,q=E.words[O]|0,pe=ue*q,be=pe&67108863;G=G+(pe/67108864|0)|0,be=be+U|0,U=be&67108863,G=G+(be>>>26)|0,j+=G>>>26,G&=67108863}k.words[Q]=U,F=G,G=j}return F!==0?k.words[Q]=F:k.length--,k._strip()}function H(C,E,k){return B(C,E,k)}l.prototype.mulTo=function(E,k){var F,j=this.length+E.length;return this.length===10&&E.length===10?F=T(this,E,k):j<63?F=w(this,E,k):j<1024?F=B(this,E,k):F=H(this,E,k),F},l.prototype.mul=function(E){var k=new l(null);return k.words=new Array(this.length+E.length),this.mulTo(E,k)},l.prototype.mulf=function(E){var k=new l(null);return k.words=new Array(this.length+E.length),H(this,E,k)},l.prototype.imul=function(E){return this.clone().mulTo(E,this)},l.prototype.imuln=function(E){var k=E<0;k&&(E=-E),o(typeof E=="number"),o(E<67108864);for(var F=0,j=0;j<this.length;j++){var Q=(this.words[j]|0)*E,G=(Q&67108863)+(F&67108863);F>>=26,F+=Q/67108864|0,F+=G>>>26,this.words[j]=G&67108863}return F!==0&&(this.words[j]=F,this.length++),k?this.ineg():this},l.prototype.muln=function(E){return this.clone().imuln(E)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(E){var k=b(E);if(k.length===0)return new l(1);for(var F=this,j=0;j<k.length&&k[j]===0;j++,F=F.sqr());if(++j<k.length)for(var Q=F.sqr();j<k.length;j++,Q=Q.sqr())k[j]!==0&&(F=F.mul(Q));return F},l.prototype.iushln=function(E){o(typeof E=="number"&&E>=0);var k=E%26,F=(E-k)/26,j=67108863>>>26-k<<26-k,Q;if(k!==0){var G=0;for(Q=0;Q<this.length;Q++){var U=this.words[Q]&j,$=(this.words[Q]|0)-U<<k;this.words[Q]=$|G,G=U>>>26-k}G&&(this.words[Q]=G,this.length++)}if(F!==0){for(Q=this.length-1;Q>=0;Q--)this.words[Q+F]=this.words[Q];for(Q=0;Q<F;Q++)this.words[Q]=0;this.length+=F}return this._strip()},l.prototype.ishln=function(E){return o(this.negative===0),this.iushln(E)},l.prototype.iushrn=function(E,k,F){o(typeof E=="number"&&E>=0);var j;k?j=(k-k%26)/26:j=0;var Q=E%26,G=Math.min((E-Q)/26,this.length),U=67108863^67108863>>>Q<<Q,$=F;if(j-=G,j=Math.max(0,j),$){for(var O=0;O<G;O++)$.words[O]=this.words[O];$.length=G}if(G!==0)if(this.length>G)for(this.length-=G,O=0;O<this.length;O++)this.words[O]=this.words[O+G];else this.words[0]=0,this.length=1;var oe=0;for(O=this.length-1;O>=0&&(oe!==0||O>=j);O--){var ue=this.words[O]|0;this.words[O]=oe<<26-Q|ue>>>Q,oe=ue&U}return $&&oe!==0&&($.words[$.length++]=oe),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},l.prototype.ishrn=function(E,k,F){return o(this.negative===0),this.iushrn(E,k,F)},l.prototype.shln=function(E){return this.clone().ishln(E)},l.prototype.ushln=function(E){return this.clone().iushln(E)},l.prototype.shrn=function(E){return this.clone().ishrn(E)},l.prototype.ushrn=function(E){return this.clone().iushrn(E)},l.prototype.testn=function(E){o(typeof E=="number"&&E>=0);var k=E%26,F=(E-k)/26,j=1<<k;if(this.length<=F)return!1;var Q=this.words[F];return!!(Q&j)},l.prototype.imaskn=function(E){o(typeof E=="number"&&E>=0);var k=E%26,F=(E-k)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=F)return this;if(k!==0&&F++,this.length=Math.min(F,this.length),k!==0){var j=67108863^67108863>>>k<<k;this.words[this.length-1]&=j}return this._strip()},l.prototype.maskn=function(E){return this.clone().imaskn(E)},l.prototype.iaddn=function(E){return o(typeof E=="number"),o(E<67108864),E<0?this.isubn(-E):this.negative!==0?this.length===1&&(this.words[0]|0)<=E?(this.words[0]=E-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(E),this.negative=1,this):this._iaddn(E)},l.prototype._iaddn=function(E){this.words[0]+=E;for(var k=0;k<this.length&&this.words[k]>=67108864;k++)this.words[k]-=67108864,k===this.length-1?this.words[k+1]=1:this.words[k+1]++;return this.length=Math.max(this.length,k+1),this},l.prototype.isubn=function(E){if(o(typeof E=="number"),o(E<67108864),E<0)return this.iaddn(-E);if(this.negative!==0)return this.negative=0,this.iaddn(E),this.negative=1,this;if(this.words[0]-=E,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var k=0;k<this.length&&this.words[k]<0;k++)this.words[k]+=67108864,this.words[k+1]-=1;return this._strip()},l.prototype.addn=function(E){return this.clone().iaddn(E)},l.prototype.subn=function(E){return this.clone().isubn(E)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(E,k,F){var j=E.length+F,Q;this._expand(j);var G,U=0;for(Q=0;Q<E.length;Q++){G=(this.words[Q+F]|0)+U;var $=(E.words[Q]|0)*k;G-=$&67108863,U=(G>>26)-($/67108864|0),this.words[Q+F]=G&67108863}for(;Q<this.length-F;Q++)G=(this.words[Q+F]|0)+U,U=G>>26,this.words[Q+F]=G&67108863;if(U===0)return this._strip();for(o(U===-1),U=0,Q=0;Q<this.length;Q++)G=-(this.words[Q]|0)+U,U=G>>26,this.words[Q]=G&67108863;return this.negative=1,this._strip()},l.prototype._wordDiv=function(E,k){var F=this.length-E.length,j=this.clone(),Q=E,G=Q.words[Q.length-1]|0,U=this._countBits(G);F=26-U,F!==0&&(Q=Q.ushln(F),j.iushln(F),G=Q.words[Q.length-1]|0);var $=j.length-Q.length,O;if(k!=="mod"){O=new l(null),O.length=$+1,O.words=new Array(O.length);for(var oe=0;oe<O.length;oe++)O.words[oe]=0}var ue=j.clone()._ishlnsubmul(Q,1,$);ue.negative===0&&(j=ue,O&&(O.words[$]=1));for(var q=$-1;q>=0;q--){var pe=(j.words[Q.length+q]|0)*67108864+(j.words[Q.length+q-1]|0);for(pe=Math.min(pe/G|0,67108863),j._ishlnsubmul(Q,pe,q);j.negative!==0;)pe--,j.negative=0,j._ishlnsubmul(Q,1,q),j.isZero()||(j.negative^=1);O&&(O.words[q]=pe)}return O&&O._strip(),j._strip(),k!=="div"&&F!==0&&j.iushrn(F),{div:O||null,mod:j}},l.prototype.divmod=function(E,k,F){if(o(!E.isZero()),this.isZero())return{div:new l(0),mod:new l(0)};var j,Q,G;return this.negative!==0&&E.negative===0?(G=this.neg().divmod(E,k),k!=="mod"&&(j=G.div.neg()),k!=="div"&&(Q=G.mod.neg(),F&&Q.negative!==0&&Q.iadd(E)),{div:j,mod:Q}):this.negative===0&&E.negative!==0?(G=this.divmod(E.neg(),k),k!=="mod"&&(j=G.div.neg()),{div:j,mod:G.mod}):this.negative&E.negative?(G=this.neg().divmod(E.neg(),k),k!=="div"&&(Q=G.mod.neg(),F&&Q.negative!==0&&Q.isub(E)),{div:G.div,mod:Q}):E.length>this.length||this.cmp(E)<0?{div:new l(0),mod:this}:E.length===1?k==="div"?{div:this.divn(E.words[0]),mod:null}:k==="mod"?{div:null,mod:new l(this.modrn(E.words[0]))}:{div:this.divn(E.words[0]),mod:new l(this.modrn(E.words[0]))}:this._wordDiv(E,k)},l.prototype.div=function(E){return this.divmod(E,"div",!1).div},l.prototype.mod=function(E){return this.divmod(E,"mod",!1).mod},l.prototype.umod=function(E){return this.divmod(E,"mod",!0).mod},l.prototype.divRound=function(E){var k=this.divmod(E);if(k.mod.isZero())return k.div;var F=k.div.negative!==0?k.mod.isub(E):k.mod,j=E.ushrn(1),Q=E.andln(1),G=F.cmp(j);return G<0||Q===1&&G===0?k.div:k.div.negative!==0?k.div.isubn(1):k.div.iaddn(1)},l.prototype.modrn=function(E){var k=E<0;k&&(E=-E),o(E<=67108863);for(var F=(1<<26)%E,j=0,Q=this.length-1;Q>=0;Q--)j=(F*j+(this.words[Q]|0))%E;return k?-j:j},l.prototype.modn=function(E){return this.modrn(E)},l.prototype.idivn=function(E){var k=E<0;k&&(E=-E),o(E<=67108863);for(var F=0,j=this.length-1;j>=0;j--){var Q=(this.words[j]|0)+F*67108864;this.words[j]=Q/E|0,F=Q%E}return this._strip(),k?this.ineg():this},l.prototype.divn=function(E){return this.clone().idivn(E)},l.prototype.egcd=function(E){o(E.negative===0),o(!E.isZero());var k=this,F=E.clone();k.negative!==0?k=k.umod(E):k=k.clone();for(var j=new l(1),Q=new l(0),G=new l(0),U=new l(1),$=0;k.isEven()&&F.isEven();)k.iushrn(1),F.iushrn(1),++$;for(var O=F.clone(),oe=k.clone();!k.isZero();){for(var ue=0,q=1;!(k.words[0]&q)&&ue<26;++ue,q<<=1);if(ue>0)for(k.iushrn(ue);ue-- >0;)(j.isOdd()||Q.isOdd())&&(j.iadd(O),Q.isub(oe)),j.iushrn(1),Q.iushrn(1);for(var pe=0,be=1;!(F.words[0]&be)&&pe<26;++pe,be<<=1);if(pe>0)for(F.iushrn(pe);pe-- >0;)(G.isOdd()||U.isOdd())&&(G.iadd(O),U.isub(oe)),G.iushrn(1),U.iushrn(1);k.cmp(F)>=0?(k.isub(F),j.isub(G),Q.isub(U)):(F.isub(k),G.isub(j),U.isub(Q))}return{a:G,b:U,gcd:F.iushln($)}},l.prototype._invmp=function(E){o(E.negative===0),o(!E.isZero());var k=this,F=E.clone();k.negative!==0?k=k.umod(E):k=k.clone();for(var j=new l(1),Q=new l(0),G=F.clone();k.cmpn(1)>0&&F.cmpn(1)>0;){for(var U=0,$=1;!(k.words[0]&$)&&U<26;++U,$<<=1);if(U>0)for(k.iushrn(U);U-- >0;)j.isOdd()&&j.iadd(G),j.iushrn(1);for(var O=0,oe=1;!(F.words[0]&oe)&&O<26;++O,oe<<=1);if(O>0)for(F.iushrn(O);O-- >0;)Q.isOdd()&&Q.iadd(G),Q.iushrn(1);k.cmp(F)>=0?(k.isub(F),j.isub(Q)):(F.isub(k),Q.isub(j))}var ue;return k.cmpn(1)===0?ue=j:ue=Q,ue.cmpn(0)<0&&ue.iadd(E),ue},l.prototype.gcd=function(E){if(this.isZero())return E.abs();if(E.isZero())return this.abs();var k=this.clone(),F=E.clone();k.negative=0,F.negative=0;for(var j=0;k.isEven()&&F.isEven();j++)k.iushrn(1),F.iushrn(1);do{for(;k.isEven();)k.iushrn(1);for(;F.isEven();)F.iushrn(1);var Q=k.cmp(F);if(Q<0){var G=k;k=F,F=G}else if(Q===0||F.cmpn(1)===0)break;k.isub(F)}while(!0);return F.iushln(j)},l.prototype.invm=function(E){return this.egcd(E).a.umod(E)},l.prototype.isEven=function(){return(this.words[0]&1)===0},l.prototype.isOdd=function(){return(this.words[0]&1)===1},l.prototype.andln=function(E){return this.words[0]&E},l.prototype.bincn=function(E){o(typeof E=="number");var k=E%26,F=(E-k)/26,j=1<<k;if(this.length<=F)return this._expand(F+1),this.words[F]|=j,this;for(var Q=j,G=F;Q!==0&&G<this.length;G++){var U=this.words[G]|0;U+=Q,Q=U>>>26,U&=67108863,this.words[G]=U}return Q!==0&&(this.words[G]=Q,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(E){var k=E<0;if(this.negative!==0&&!k)return-1;if(this.negative===0&&k)return 1;this._strip();var F;if(this.length>1)F=1;else{k&&(E=-E),o(E<=67108863,"Number is too big");var j=this.words[0]|0;F=j===E?0:j<E?-1:1}return this.negative!==0?-F|0:F},l.prototype.cmp=function(E){if(this.negative!==0&&E.negative===0)return-1;if(this.negative===0&&E.negative!==0)return 1;var k=this.ucmp(E);return this.negative!==0?-k|0:k},l.prototype.ucmp=function(E){if(this.length>E.length)return 1;if(this.length<E.length)return-1;for(var k=0,F=this.length-1;F>=0;F--){var j=this.words[F]|0,Q=E.words[F]|0;if(j!==Q){j<Q?k=-1:j>Q&&(k=1);break}}return k},l.prototype.gtn=function(E){return this.cmpn(E)===1},l.prototype.gt=function(E){return this.cmp(E)===1},l.prototype.gten=function(E){return this.cmpn(E)>=0},l.prototype.gte=function(E){return this.cmp(E)>=0},l.prototype.ltn=function(E){return this.cmpn(E)===-1},l.prototype.lt=function(E){return this.cmp(E)===-1},l.prototype.lten=function(E){return this.cmpn(E)<=0},l.prototype.lte=function(E){return this.cmp(E)<=0},l.prototype.eqn=function(E){return this.cmpn(E)===0},l.prototype.eq=function(E){return this.cmp(E)===0},l.red=function(E){return new ee(E)},l.prototype.toRed=function(E){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),E.convertTo(this)._forceRed(E)},l.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(E){return this.red=E,this},l.prototype.forceRed=function(E){return o(!this.red,"Already a number in reduction context"),this._forceRed(E)},l.prototype.redAdd=function(E){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,E)},l.prototype.redIAdd=function(E){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,E)},l.prototype.redSub=function(E){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,E)},l.prototype.redISub=function(E){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,E)},l.prototype.redShl=function(E){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,E)},l.prototype.redMul=function(E){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.mul(this,E)},l.prototype.redIMul=function(E){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.imul(this,E)},l.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(E){return o(this.red&&!E.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,E)};var J={k256:null,p224:null,p192:null,p25519:null};function W(C,E){this.name=C,this.p=new l(E,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}W.prototype._tmp=function(){var E=new l(null);return E.words=new Array(Math.ceil(this.n/13)),E},W.prototype.ireduce=function(E){var k=E,F;do this.split(k,this.tmp),k=this.imulK(k),k=k.iadd(this.tmp),F=k.bitLength();while(F>this.n);var j=F<this.n?-1:k.ucmp(this.p);return j===0?(k.words[0]=0,k.length=1):j>0?k.isub(this.p):k.strip!==void 0?k.strip():k._strip(),k},W.prototype.split=function(E,k){E.iushrn(this.n,0,k)},W.prototype.imulK=function(E){return E.imul(this.k)};function fe(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(fe,W),fe.prototype.split=function(E,k){for(var F=4194303,j=Math.min(E.length,9),Q=0;Q<j;Q++)k.words[Q]=E.words[Q];if(k.length=j,E.length<=9){E.words[0]=0,E.length=1;return}var G=E.words[9];for(k.words[k.length++]=G&F,Q=10;Q<E.length;Q++){var U=E.words[Q]|0;E.words[Q-10]=(U&F)<<4|G>>>22,G=U}G>>>=22,E.words[Q-10]=G,G===0&&E.length>10?E.length-=10:E.length-=9},fe.prototype.imulK=function(E){E.words[E.length]=0,E.words[E.length+1]=0,E.length+=2;for(var k=0,F=0;F<E.length;F++){var j=E.words[F]|0;k+=j*977,E.words[F]=k&67108863,k=j*64+(k/67108864|0)}return E.words[E.length-1]===0&&(E.length--,E.words[E.length-1]===0&&E.length--),E};function re(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(re,W);function se(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(se,W);function ae(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(ae,W),ae.prototype.imulK=function(E){for(var k=0,F=0;F<E.length;F++){var j=(E.words[F]|0)*19+k,Q=j&67108863;j>>>=26,E.words[F]=Q,k=j}return k!==0&&(E.words[E.length++]=k),E},l._prime=function(E){if(J[E])return J[E];var k;if(E==="k256")k=new fe;else if(E==="p224")k=new re;else if(E==="p192")k=new se;else if(E==="p25519")k=new ae;else throw new Error("Unknown prime "+E);return J[E]=k,k};function ee(C){if(typeof C=="string"){var E=l._prime(C);this.m=E.p,this.prime=E}else o(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}ee.prototype._verify1=function(E){o(E.negative===0,"red works only with positives"),o(E.red,"red works only with red numbers")},ee.prototype._verify2=function(E,k){o((E.negative|k.negative)===0,"red works only with positives"),o(E.red&&E.red===k.red,"red works only with red numbers")},ee.prototype.imod=function(E){return this.prime?this.prime.ireduce(E)._forceRed(this):(v(E,E.umod(this.m)._forceRed(this)),E)},ee.prototype.neg=function(E){return E.isZero()?E.clone():this.m.sub(E)._forceRed(this)},ee.prototype.add=function(E,k){this._verify2(E,k);var F=E.add(k);return F.cmp(this.m)>=0&&F.isub(this.m),F._forceRed(this)},ee.prototype.iadd=function(E,k){this._verify2(E,k);var F=E.iadd(k);return F.cmp(this.m)>=0&&F.isub(this.m),F},ee.prototype.sub=function(E,k){this._verify2(E,k);var F=E.sub(k);return F.cmpn(0)<0&&F.iadd(this.m),F._forceRed(this)},ee.prototype.isub=function(E,k){this._verify2(E,k);var F=E.isub(k);return F.cmpn(0)<0&&F.iadd(this.m),F},ee.prototype.shl=function(E,k){return this._verify1(E),this.imod(E.ushln(k))},ee.prototype.imul=function(E,k){return this._verify2(E,k),this.imod(E.imul(k))},ee.prototype.mul=function(E,k){return this._verify2(E,k),this.imod(E.mul(k))},ee.prototype.isqr=function(E){return this.imul(E,E.clone())},ee.prototype.sqr=function(E){return this.mul(E,E)},ee.prototype.sqrt=function(E){if(E.isZero())return E.clone();var k=this.m.andln(3);if(o(k%2===1),k===3){var F=this.m.add(new l(1)).iushrn(2);return this.pow(E,F)}for(var j=this.m.subn(1),Q=0;!j.isZero()&&j.andln(1)===0;)Q++,j.iushrn(1);o(!j.isZero());var G=new l(1).toRed(this),U=G.redNeg(),$=this.m.subn(1).iushrn(1),O=this.m.bitLength();for(O=new l(2*O*O).toRed(this);this.pow(O,$).cmp(U)!==0;)O.redIAdd(U);for(var oe=this.pow(O,j),ue=this.pow(E,j.addn(1).iushrn(1)),q=this.pow(E,j),pe=Q;q.cmp(G)!==0;){for(var be=q,ve=0;be.cmp(G)!==0;ve++)be=be.redSqr();o(ve<pe);var we=this.pow(oe,new l(1).iushln(pe-ve-1));ue=ue.redMul(we),oe=we.redSqr(),q=q.redMul(oe),pe=ve}return ue},ee.prototype.invm=function(E){var k=E._invmp(this.m);return k.negative!==0?(k.negative=0,this.imod(k).redNeg()):this.imod(k)},ee.prototype.pow=function(E,k){if(k.isZero())return new l(1).toRed(this);if(k.cmpn(1)===0)return E.clone();var F=4,j=new Array(1<<F);j[0]=new l(1).toRed(this),j[1]=E;for(var Q=2;Q<j.length;Q++)j[Q]=this.mul(j[Q-1],E);var G=j[0],U=0,$=0,O=k.bitLength()%26;for(O===0&&(O=26),Q=k.length-1;Q>=0;Q--){for(var oe=k.words[Q],ue=O-1;ue>=0;ue--){var q=oe>>ue&1;if(G!==j[0]&&(G=this.sqr(G)),q===0&&U===0){$=0;continue}U<<=1,U|=q,$++,!($!==F&&(Q!==0||ue!==0))&&(G=this.mul(G,j[U]),$=0,U=0)}O=26}return G},ee.prototype.convertTo=function(E){var k=E.umod(this.m);return k===E?k.clone():k},ee.prototype.convertFrom=function(E){var k=E.clone();return k.red=null,k},l.mont=function(E){return new P(E)};function P(C){ee.call(this,C),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(P,ee),P.prototype.convertTo=function(E){return this.imod(E.ushln(this.shift))},P.prototype.convertFrom=function(E){var k=this.imod(E.mul(this.rinv));return k.red=null,k},P.prototype.imul=function(E,k){if(E.isZero()||k.isZero())return E.words[0]=0,E.length=1,E;var F=E.imul(k),j=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Q=F.isub(j).iushrn(this.shift),G=Q;return Q.cmp(this.m)>=0?G=Q.isub(this.m):Q.cmpn(0)<0&&(G=Q.iadd(this.m)),G._forceRed(this)},P.prototype.mul=function(E,k){if(E.isZero()||k.isZero())return new l(0)._forceRed(this);var F=E.mul(k),j=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Q=F.isub(j).iushrn(this.shift),G=Q;return Q.cmp(this.m)>=0?G=Q.isub(this.m):Q.cmpn(0)<0&&(G=Q.iadd(this.m)),G._forceRed(this)},P.prototype.invm=function(E){var k=this.imod(E._invmp(this.m).mul(this.r2));return k._forceRed(this)}})(n,commonjsGlobal)})(bn$1);var bnExports$1=bn$1.exports;const BN$9=getDefaultExportFromCjs(bnExports$1),version$n="logger/5.7.0";let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{n.push(e)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}const _normalizeError=_checkNormalize();var LogLevel$1;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(LogLevel$1||(LogLevel$1={}));var ErrorCode;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const o=e.toLowerCase();LogLevels[o]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(_logLevel>LogLevels[o])&&console.log.apply(console,t)}debug(...e){this._log(Logger.levels.DEBUG,e)}info(...e){this._log(Logger.levels.INFO,e)}warn(...e){this._log(Logger.levels.WARNING,e)}makeError(e,t,o){if(_censorErrors)return this.makeError("censored error",t,{});t||(t=Logger.errors.UNKNOWN_ERROR),o||(o={});const c=[];Object.keys(o).forEach(g=>{const m=o[g];try{if(m instanceof Uint8Array){let v="";for(let _=0;_<m.length;_++)v+=HEX[m[_]>>4],v+=HEX[m[_]&15];c.push(g+"=Uint8Array(0x"+v+")")}else c.push(g+"="+JSON.stringify(m))}catch{c.push(g+"="+JSON.stringify(o[g].toString()))}}),c.push(`code=${t}`),c.push(`version=${this.version}`);const l=e;let h="";switch(t){case ErrorCode.NUMERIC_FAULT:{h="NUMERIC_FAULT";const g=e;switch(g){case"overflow":case"underflow":case"division-by-zero":h+="-"+g;break;case"negative-power":case"negative-width":h+="-unsupported";break;case"unbound-bitwise-result":h+="-unbound-result";break}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:h=t;break}h&&(e+=" [ See: https://links.ethers.org/v5-errors-"+h+" ]"),c.length&&(e+=" ("+c.join(", ")+")");const d=new Error(e);return d.reason=l,d.code=t,Object.keys(o).forEach(function(g){d[g]=o[g]}),d}throwError(e,t,o){throw this.makeError(e,t,o)}throwArgumentError(e,t,o){return this.throwError(e,Logger.errors.INVALID_ARGUMENT,{argument:t,value:o})}assert(e,t,o,c){e||this.throwError(t,o,c)}assertArgument(e,t,o,c){e||this.throwArgumentError(t,o,c)}checkNormalize(e){_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,o){o?o=": "+o:o="",e<t&&this.throwError("missing argument"+o,Logger.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+o,Logger.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger(version$n)),_globalLogger}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!e)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!e,_permanentCensorErrors=!!t}static setLogLevel(e){const t=LogLevels[e.toLowerCase()];if(t==null){Logger.globalLogger().warn("invalid log level - "+e);return}_logLevel=t}static from(e){return new Logger(e)}}Logger.errors=ErrorCode;Logger.levels=LogLevel$1;const version$m="bytes/5.7.0",logger$u=new Logger(version$m);function isHexable(n){return!!n.toHexString}function addSlice(n){return n.slice||(n.slice=function(){const e=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(n,e)))}),n}function isBytesLike(n){return isHexString(n)&&!(n.length%2)||isBytes(n)}function isInteger(n){return typeof n=="number"&&n==n&&n%1===0}function isBytes(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!isInteger(n.length)||n.length<0)return!1;for(let e=0;e<n.length;e++){const t=n[e];if(!isInteger(t)||t<0||t>=256)return!1}return!0}function arrayify(n,e){if(e||(e={}),typeof n=="number"){logger$u.checkSafeUint53(n,"invalid arrayify value");const t=[];for(;n;)t.unshift(n&255),n=parseInt(String(n/256));return t.length===0&&t.push(0),addSlice(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),isHexable(n)&&(n=n.toHexString()),isHexString(n)){let t=n.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":logger$u.throwArgumentError("hex data is odd-length","value",n));const o=[];for(let c=0;c<t.length;c+=2)o.push(parseInt(t.substring(c,c+2),16));return addSlice(new Uint8Array(o))}return isBytes(n)?addSlice(new Uint8Array(n)):logger$u.throwArgumentError("invalid arrayify value","value",n)}function concat$1(n){const e=n.map(c=>arrayify(c)),t=e.reduce((c,l)=>c+l.length,0),o=new Uint8Array(t);return e.reduce((c,l)=>(o.set(l,c),c+l.length),0),addSlice(o)}function stripZeros(n){let e=arrayify(n);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function zeroPad(n,e){n=arrayify(n),n.length>e&&logger$u.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(n,e-n.length),addSlice(t)}function isHexString(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||e&&n.length!==2+2*e)}const HexCharacters="0123456789abcdef";function hexlify(n,e){if(e||(e={}),typeof n=="number"){logger$u.checkSafeUint53(n,"invalid hexlify value");let t="";for(;n;)t=HexCharacters[n&15]+t,n=Math.floor(n/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),isHexable(n))return n.toHexString();if(isHexString(n))return n.length%2&&(e.hexPad==="left"?n="0x0"+n.substring(2):e.hexPad==="right"?n+="0":logger$u.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(isBytes(n)){let t="0x";for(let o=0;o<n.length;o++){let c=n[o];t+=HexCharacters[(c&240)>>4]+HexCharacters[c&15]}return t}return logger$u.throwArgumentError("invalid hexlify value","value",n)}function hexDataLength(n){if(typeof n!="string")n=hexlify(n);else if(!isHexString(n)||n.length%2)return null;return(n.length-2)/2}function hexDataSlice(n,e,t){return typeof n!="string"?n=hexlify(n):(!isHexString(n)||n.length%2)&&logger$u.throwArgumentError("invalid hexData","value",n),e=2+2*e,t!=null?"0x"+n.substring(e,2+2*t):"0x"+n.substring(e)}function hexConcat(n){let e="0x";return n.forEach(t=>{e+=hexlify(t).substring(2)}),e}function hexValue(n){const e=hexStripZeros(hexlify(n,{hexPad:"left"}));return e==="0x"?"0x0":e}function hexStripZeros(n){typeof n!="string"&&(n=hexlify(n)),isHexString(n)||logger$u.throwArgumentError("invalid hex string","value",n),n=n.substring(2);let e=0;for(;e<n.length&&n[e]==="0";)e++;return"0x"+n.substring(e)}function hexZeroPad(n,e){for(typeof n!="string"?n=hexlify(n):isHexString(n)||logger$u.throwArgumentError("invalid hex string","value",n),n.length>2*e+2&&logger$u.throwArgumentError("value out of range","value",arguments[1]);n.length<2*e+2;)n="0x0"+n.substring(2);return n}function splitSignature(n){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike(n)){let t=arrayify(n);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=hexlify(t.slice(0,32)),e.s=hexlify(t.slice(32,64))):t.length===65?(e.r=hexlify(t.slice(0,32)),e.s=hexlify(t.slice(32,64)),e.v=t[64]):logger$u.throwArgumentError("invalid signature string","signature",n),e.v<27&&(e.v===0||e.v===1?e.v+=27:logger$u.throwArgumentError("signature invalid v byte","signature",n)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=hexlify(t.slice(32,64))}else{if(e.r=n.r,e.s=n.s,e.v=n.v,e.recoveryParam=n.recoveryParam,e._vs=n._vs,e._vs!=null){const c=zeroPad(arrayify(e._vs),32);e._vs=hexlify(c);const l=c[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=l:e.recoveryParam!==l&&logger$u.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),c[0]&=127;const h=hexlify(c);e.s==null?e.s=h:e.s!==h&&logger$u.throwArgumentError("signature v mismatch _vs","signature",n)}if(e.recoveryParam==null)e.v==null?logger$u.throwArgumentError("signature missing v and recoveryParam","signature",n):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const c=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==c&&logger$u.throwArgumentError("signature recoveryParam mismatch v","signature",n)}e.r==null||!isHexString(e.r)?logger$u.throwArgumentError("signature missing or invalid r","signature",n):e.r=hexZeroPad(e.r,32),e.s==null||!isHexString(e.s)?logger$u.throwArgumentError("signature missing or invalid s","signature",n):e.s=hexZeroPad(e.s,32);const t=arrayify(e.s);t[0]>=128&&logger$u.throwArgumentError("signature s out of range","signature",n),e.recoveryParam&&(t[0]|=128);const o=hexlify(t);e._vs&&(isHexString(e._vs)||logger$u.throwArgumentError("signature invalid _vs","signature",n),e._vs=hexZeroPad(e._vs,32)),e._vs==null?e._vs=o:e._vs!==o&&logger$u.throwArgumentError("signature _vs mismatch v and s","signature",n)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function joinSignature(n){return n=splitSignature(n),hexlify(concat$1([n.r,n.s,n.recoveryParam?"0x1c":"0x1b"]))}const version$l="bignumber/5.7.0";var BN$8=BN$9.BN;const logger$t=new Logger(version$l),_constructorGuard$3={},MAX_SAFE=9007199254740991;let _warnedToStringRadix=!1,BigNumber$1=class ar{constructor(e,t){e!==_constructorGuard$3&&logger$t.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return toBigNumber(toBN(this).fromTwos(e))}toTwos(e){return toBigNumber(toBN(this).toTwos(e))}abs(){return this._hex[0]==="-"?ar.from(this._hex.substring(1)):this}add(e){return toBigNumber(toBN(this).add(toBN(e)))}sub(e){return toBigNumber(toBN(this).sub(toBN(e)))}div(e){return ar.from(e).isZero()&&throwFault("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(e)))}mul(e){return toBigNumber(toBN(this).mul(toBN(e)))}mod(e){const t=toBN(e);return t.isNeg()&&throwFault("division-by-zero","mod"),toBigNumber(toBN(this).umod(t))}pow(e){const t=toBN(e);return t.isNeg()&&throwFault("negative-power","pow"),toBigNumber(toBN(this).pow(t))}and(e){const t=toBN(e);return(this.isNegative()||t.isNeg())&&throwFault("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(t))}or(e){const t=toBN(e);return(this.isNegative()||t.isNeg())&&throwFault("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(t))}xor(e){const t=toBN(e);return(this.isNegative()||t.isNeg())&&throwFault("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&throwFault("negative-width","mask"),toBigNumber(toBN(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&throwFault("negative-width","shl"),toBigNumber(toBN(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&throwFault("negative-width","shr"),toBigNumber(toBN(this).shrn(e))}eq(e){return toBN(this).eq(toBN(e))}lt(e){return toBN(this).lt(toBN(e))}lte(e){return toBN(this).lte(toBN(e))}gt(e){return toBN(this).gt(toBN(e))}gte(e){return toBN(this).gte(toBN(e))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch{throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return logger$t.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_warnedToStringRadix||(_warnedToStringRadix=!0,logger$t.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?logger$t.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{}):logger$t.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof ar)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new ar(_constructorGuard$3,toHex$1(e)):e.match(/^-?[0-9]+$/)?new ar(_constructorGuard$3,toHex$1(new BN$8(e))):logger$t.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&throwFault("underflow","BigNumber.from",e),(e>=MAX_SAFE||e<=-MAX_SAFE)&&throwFault("overflow","BigNumber.from",e),ar.from(String(e));const t=e;if(typeof t=="bigint")return ar.from(t.toString());if(isBytes(t))return ar.from(hexlify(t));if(t)if(t.toHexString){const o=t.toHexString();if(typeof o=="string")return ar.from(o)}else{let o=t._hex;if(o==null&&t.type==="BigNumber"&&(o=t.hex),typeof o=="string"&&(isHexString(o)||o[0]==="-"&&isHexString(o.substring(1))))return ar.from(o)}return logger$t.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}};function toHex$1(n){if(typeof n!="string")return toHex$1(n.toString(16));if(n[0]==="-")return n=n.substring(1),n[0]==="-"&&logger$t.throwArgumentError("invalid hex","value",n),n=toHex$1(n),n==="0x00"?n:"-"+n;if(n.substring(0,2)!=="0x"&&(n="0x"+n),n==="0x")return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&n.substring(0,4)==="0x00";)n="0x"+n.substring(4);return n}function toBigNumber(n){return BigNumber$1.from(toHex$1(n))}function toBN(n){const e=BigNumber$1.from(n).toHexString();return e[0]==="-"?new BN$8("-"+e.substring(3),16):new BN$8(e.substring(2),16)}function throwFault(n,e,t){const o={fault:n,operation:e};return t!=null&&(o.value=t),logger$t.throwError(n,Logger.errors.NUMERIC_FAULT,o)}function _base36To16(n){return new BN$8(n,36).toString(16)}const version$k="properties/5.7.0";var __awaiter$a=globalThis&&globalThis.__awaiter||function(n,e,t,o){function c(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(v){try{m(o.next(v))}catch(_){h(_)}}function g(v){try{m(o.throw(v))}catch(_){h(_)}}function m(v){v.done?l(v.value):c(v.value).then(d,g)}m((o=o.apply(n,e||[])).next())})};const logger$s=new Logger(version$k);function defineReadOnly(n,e,t){Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!1})}function getStatic(n,e){for(let t=0;t<32;t++){if(n[e])return n[e];if(!n.prototype||typeof n.prototype!="object")break;n=Object.getPrototypeOf(n.prototype).constructor}return null}function resolveProperties(n){return __awaiter$a(this,void 0,void 0,function*(){const e=Object.keys(n).map(o=>{const c=n[o];return Promise.resolve(c).then(l=>({key:o,value:l}))});return(yield Promise.all(e)).reduce((o,c)=>(o[c.key]=c.value,o),{})})}function checkProperties(n,e){(!n||typeof n!="object")&&logger$s.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(t=>{e[t]||logger$s.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)})}function shallowCopy(n){const e={};for(const t in n)e[t]=n[t];return e}const opaque={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function _isFrozen(n){if(n==null||opaque[typeof n])return!0;if(Array.isArray(n)||typeof n=="object"){if(!Object.isFrozen(n))return!1;const e=Object.keys(n);for(let t=0;t<e.length;t++){let o=null;try{o=n[e[t]]}catch{continue}if(!_isFrozen(o))return!1}return!0}return logger$s.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function _deepCopy(n){if(_isFrozen(n))return n;if(Array.isArray(n))return Object.freeze(n.map(e=>deepCopy(e)));if(typeof n=="object"){const e={};for(const t in n){const o=n[t];o!==void 0&&defineReadOnly(e,t,deepCopy(o))}return e}return logger$s.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function deepCopy(n){return _deepCopy(n)}class Description{constructor(e){for(const t in e)this[t]=deepCopy(e[t])}}const version$j="abi/5.7.0",logger$r=new Logger(version$j),_constructorGuard$2={};let ModifiersBytes={calldata:!0,memory:!0,storage:!0},ModifiersNest={calldata:!0,memory:!0};function checkModifier(n,e){if(n==="bytes"||n==="string"){if(ModifiersBytes[e])return!0}else if(n==="address"){if(e==="payable")return!0}else if((n.indexOf("[")>=0||n==="tuple")&&ModifiersNest[e])return!0;return(ModifiersBytes[e]||e==="payable")&&logger$r.throwArgumentError("invalid modifier","name",e),!1}function parseParamType(n,e){let t=n;function o(d){logger$r.throwArgumentError(`unexpected character at position ${d}`,"param",n)}n=n.replace(/\s/g," ");function c(d){let g={type:"",name:"",parent:d,state:{allowType:!0}};return e&&(g.indexed=!1),g}let l={type:"",name:"",state:{allowType:!0}},h=l;for(let d=0;d<n.length;d++){let g=n[d];switch(g){case"(":h.state.allowType&&h.type===""?h.type="tuple":h.state.allowParams||o(d),h.state.allowType=!1,h.type=verifyType(h.type),h.components=[c(h)],h=h.components[0];break;case")":delete h.state,h.name==="indexed"&&(e||o(d),h.indexed=!0,h.name=""),checkModifier(h.type,h.name)&&(h.name=""),h.type=verifyType(h.type);let m=h;h=h.parent,h||o(d),delete m.parent,h.state.allowParams=!1,h.state.allowName=!0,h.state.allowArray=!0;break;case",":delete h.state,h.name==="indexed"&&(e||o(d),h.indexed=!0,h.name=""),checkModifier(h.type,h.name)&&(h.name=""),h.type=verifyType(h.type);let v=c(h.parent);h.parent.components.push(v),delete h.parent,h=v;break;case" ":h.state.allowType&&h.type!==""&&(h.type=verifyType(h.type),delete h.state.allowType,h.state.allowName=!0,h.state.allowParams=!0),h.state.allowName&&h.name!==""&&(h.name==="indexed"?(e||o(d),h.indexed&&o(d),h.indexed=!0,h.name=""):checkModifier(h.type,h.name)?h.name="":h.state.allowName=!1);break;case"[":h.state.allowArray||o(d),h.type+=g,h.state.allowArray=!1,h.state.allowName=!1,h.state.readArray=!0;break;case"]":h.state.readArray||o(d),h.type+=g,h.state.readArray=!1,h.state.allowArray=!0,h.state.allowName=!0;break;default:h.state.allowType?(h.type+=g,h.state.allowParams=!0,h.state.allowArray=!0):h.state.allowName?(h.name+=g,delete h.state.allowArray):h.state.readArray?h.type+=g:o(d)}}return h.parent&&logger$r.throwArgumentError("unexpected eof","param",n),delete l.state,h.name==="indexed"?(e||o(t.length-7),h.indexed&&o(t.length-7),h.indexed=!0,h.name=""):checkModifier(h.type,h.name)&&(h.name=""),l.type=verifyType(l.type),l}function populate(n,e){for(let t in e)defineReadOnly(n,t,e[t])}const FormatTypes=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),paramTypeArray=new RegExp(/^(.*)\[([0-9]*)\]$/);class ParamType{constructor(e,t){e!==_constructorGuard$2&&logger$r.throwError("use fromString",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),populate(this,t);let o=this.type.match(paramTypeArray);o?populate(this,{arrayLength:parseInt(o[2]||"-1"),arrayChildren:ParamType.fromObject({type:o[1],components:this.components}),baseType:"array"}):populate(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=FormatTypes.sighash),FormatTypes[e]||logger$r.throwArgumentError("invalid format type","format",e),e===FormatTypes.json){let o={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(o.indexed=this.indexed),this.components&&(o.components=this.components.map(c=>JSON.parse(c.format(e)))),JSON.stringify(o)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==FormatTypes.sighash&&(t+=this.type),t+="("+this.components.map(o=>o.format(e)).join(e===FormatTypes.full?", ":",")+")"):t+=this.type,e!==FormatTypes.sighash&&(this.indexed===!0&&(t+=" indexed"),e===FormatTypes.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?ParamType.fromString(e,t):ParamType.fromObject(e)}static fromObject(e){return ParamType.isParamType(e)?e:new ParamType(_constructorGuard$2,{name:e.name||null,type:verifyType(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(ParamType.fromObject):null})}static fromString(e,t){function o(c){return ParamType.fromObject({name:c.name,type:c.type,indexed:c.indexed,components:c.components})}return o(parseParamType(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function parseParams(n,e){return splitNesting(n).map(t=>ParamType.fromString(t,e))}class Fragment{constructor(e,t){e!==_constructorGuard$2&&logger$r.throwError("use a static from method",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),populate(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Fragment.isFragment(e)?e:typeof e=="string"?Fragment.fromString(e):Fragment.fromObject(e)}static fromObject(e){if(Fragment.isFragment(e))return e;switch(e.type){case"function":return FunctionFragment.fromObject(e);case"event":return EventFragment.fromObject(e);case"constructor":return ConstructorFragment.fromObject(e);case"error":return ErrorFragment.fromObject(e);case"fallback":case"receive":return null}return logger$r.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?EventFragment.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?FunctionFragment.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?ConstructorFragment.fromString(e.trim()):e.split(" ")[0]==="error"?ErrorFragment.fromString(e.substring(5).trim()):logger$r.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class EventFragment extends Fragment{format(e){if(e||(e=FormatTypes.sighash),FormatTypes[e]||logger$r.throwArgumentError("invalid format type","format",e),e===FormatTypes.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(o=>JSON.parse(o.format(e)))});let t="";return e!==FormatTypes.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(o=>o.format(e)).join(e===FormatTypes.full?", ":",")+") ",e!==FormatTypes.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?EventFragment.fromString(e):EventFragment.fromObject(e)}static fromObject(e){if(EventFragment.isEventFragment(e))return e;e.type!=="event"&&logger$r.throwArgumentError("invalid event object","value",e);const t={name:verifyIdentifier(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(ParamType.fromObject):[],type:"event"};return new EventFragment(_constructorGuard$2,t)}static fromString(e){let t=e.match(regexParen);t||logger$r.throwArgumentError("invalid event string","value",e);let o=!1;return t[3].split(" ").forEach(c=>{switch(c.trim()){case"anonymous":o=!0;break;case"":break;default:logger$r.warn("unknown modifier: "+c)}}),EventFragment.fromObject({name:t[1].trim(),anonymous:o,inputs:parseParams(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function parseGas(n,e){e.gas=null;let t=n.split("@");return t.length!==1?(t.length>2&&logger$r.throwArgumentError("invalid human-readable ABI signature","value",n),t[1].match(/^[0-9]+$/)||logger$r.throwArgumentError("invalid human-readable ABI signature gas","value",n),e.gas=BigNumber$1.from(t[1]),t[0]):n}function parseModifiers(n,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",n.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function verifyState(n){let e={constant:!1,payable:!0,stateMutability:"payable"};return n.stateMutability!=null?(e.stateMutability=n.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",n.constant!=null&&!!n.constant!==e.constant&&logger$r.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",n),e.payable=e.stateMutability==="payable",n.payable!=null&&!!n.payable!==e.payable&&logger$r.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",n)):n.payable!=null?(e.payable=!!n.payable,n.constant==null&&!e.payable&&n.type!=="constructor"&&logger$r.throwArgumentError("unable to determine stateMutability","value",n),e.constant=!!n.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&logger$r.throwArgumentError("cannot have constant payable function","value",n)):n.constant!=null?(e.constant=!!n.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):n.type!=="constructor"&&logger$r.throwArgumentError("unable to determine stateMutability","value",n),e}class ConstructorFragment extends Fragment{format(e){if(e||(e=FormatTypes.sighash),FormatTypes[e]||logger$r.throwArgumentError("invalid format type","format",e),e===FormatTypes.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(o=>JSON.parse(o.format(e)))});e===FormatTypes.sighash&&logger$r.throwError("cannot format a constructor for sighash",Logger.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(o=>o.format(e)).join(e===FormatTypes.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?ConstructorFragment.fromString(e):ConstructorFragment.fromObject(e)}static fromObject(e){if(ConstructorFragment.isConstructorFragment(e))return e;e.type!=="constructor"&&logger$r.throwArgumentError("invalid constructor object","value",e);let t=verifyState(e);t.constant&&logger$r.throwArgumentError("constructor cannot be constant","value",e);const o={name:null,type:e.type,inputs:e.inputs?e.inputs.map(ParamType.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?BigNumber$1.from(e.gas):null};return new ConstructorFragment(_constructorGuard$2,o)}static fromString(e){let t={type:"constructor"};e=parseGas(e,t);let o=e.match(regexParen);return(!o||o[1].trim()!=="constructor")&&logger$r.throwArgumentError("invalid constructor string","value",e),t.inputs=parseParams(o[2].trim(),!1),parseModifiers(o[3].trim(),t),ConstructorFragment.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class FunctionFragment extends ConstructorFragment{format(e){if(e||(e=FormatTypes.sighash),FormatTypes[e]||logger$r.throwArgumentError("invalid format type","format",e),e===FormatTypes.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(o=>JSON.parse(o.format(e))),outputs:this.outputs.map(o=>JSON.parse(o.format(e)))});let t="";return e!==FormatTypes.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(o=>o.format(e)).join(e===FormatTypes.full?", ":",")+") ",e!==FormatTypes.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(o=>o.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?FunctionFragment.fromString(e):FunctionFragment.fromObject(e)}static fromObject(e){if(FunctionFragment.isFunctionFragment(e))return e;e.type!=="function"&&logger$r.throwArgumentError("invalid function object","value",e);let t=verifyState(e);const o={type:e.type,name:verifyIdentifier(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(ParamType.fromObject):[],outputs:e.outputs?e.outputs.map(ParamType.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?BigNumber$1.from(e.gas):null};return new FunctionFragment(_constructorGuard$2,o)}static fromString(e){let t={type:"function"};e=parseGas(e,t);let o=e.split(" returns ");o.length>2&&logger$r.throwArgumentError("invalid function string","value",e);let c=o[0].match(regexParen);if(c||logger$r.throwArgumentError("invalid function signature","value",e),t.name=c[1].trim(),t.name&&verifyIdentifier(t.name),t.inputs=parseParams(c[2],!1),parseModifiers(c[3].trim(),t),o.length>1){let l=o[1].match(regexParen);(l[1].trim()!=""||l[3].trim()!="")&&logger$r.throwArgumentError("unexpected tokens","value",e),t.outputs=parseParams(l[2],!1)}else t.outputs=[];return FunctionFragment.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function checkForbidden(n){const e=n.format();return(e==="Error(string)"||e==="Panic(uint256)")&&logger$r.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",n),n}class ErrorFragment extends Fragment{format(e){if(e||(e=FormatTypes.sighash),FormatTypes[e]||logger$r.throwArgumentError("invalid format type","format",e),e===FormatTypes.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(o=>JSON.parse(o.format(e)))});let t="";return e!==FormatTypes.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(o=>o.format(e)).join(e===FormatTypes.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?ErrorFragment.fromString(e):ErrorFragment.fromObject(e)}static fromObject(e){if(ErrorFragment.isErrorFragment(e))return e;e.type!=="error"&&logger$r.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:verifyIdentifier(e.name),inputs:e.inputs?e.inputs.map(ParamType.fromObject):[]};return checkForbidden(new ErrorFragment(_constructorGuard$2,t))}static fromString(e){let t={type:"error"},o=e.match(regexParen);return o||logger$r.throwArgumentError("invalid error signature","value",e),t.name=o[1].trim(),t.name&&verifyIdentifier(t.name),t.inputs=parseParams(o[2],!1),checkForbidden(ErrorFragment.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function verifyType(n){return n.match(/^uint($|[^1-9])/)?n="uint256"+n.substring(4):n.match(/^int($|[^1-9])/)&&(n="int256"+n.substring(3)),n}const regexIdentifier=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function verifyIdentifier(n){return(!n||!n.match(regexIdentifier))&&logger$r.throwArgumentError(`invalid identifier "${n}"`,"value",n),n}const regexParen=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function splitNesting(n){n=n.trim();let e=[],t="",o=0;for(let c=0;c<n.length;c++){let l=n[c];l===","&&o===0?(e.push(t),t=""):(t+=l,l==="("?o++:l===")"&&(o--,o===-1&&logger$r.throwArgumentError("unbalanced parenthesis","value",n)))}return t&&e.push(t),e}const logger$q=new Logger(version$j);function checkResultErrors(n){const e=[],t=function(o,c){if(Array.isArray(c))for(let l in c){const h=o.slice();h.push(l);try{t(h,c[l])}catch(d){e.push({path:h,error:d})}}};return t([],n),e}class Coder{constructor(e,t,o,c){this.name=e,this.type=t,this.localName=o,this.dynamic=c}_throwError(e,t){logger$q.throwArgumentError(e,this.localName,t)}}class Writer{constructor(e){defineReadOnly(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return hexConcat(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(concat$1(e._data))}writeBytes(e){let t=arrayify(e);const o=t.length%this.wordSize;return o&&(t=concat$1([t,this._padding.slice(o)])),this._writeData(t)}_getValue(e){let t=arrayify(BigNumber$1.from(e));return t.length>this.wordSize&&logger$q.throwError("value out-of-bounds",Logger.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=concat$1([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class Reader{constructor(e,t,o,c){defineReadOnly(this,"_data",arrayify(e)),defineReadOnly(this,"wordSize",t||32),defineReadOnly(this,"_coerceFunc",o),defineReadOnly(this,"allowLoose",c),this._offset=0}get data(){return hexlify(this._data)}get consumed(){return this._offset}static coerce(e,t){let o=e.match("^u?int([0-9]+)$");return o&&parseInt(o[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Reader.coerce(e,t)}_peekBytes(e,t,o){let c=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+c>this._data.length&&(this.allowLoose&&o&&this._offset+t<=this._data.length?c=t:logger$q.throwError("data out-of-bounds",Logger.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+c})),this._data.slice(this._offset,this._offset+c)}subReader(e){return new Reader(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let o=this._peekBytes(0,e,!!t);return this._offset+=o.length,o.slice(0,e)}readValue(){return BigNumber$1.from(this.readBytes(this.wordSize))}}var sha3$2={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(n){(function(){var e="input is invalid type",t="finalize already called",o=typeof window=="object",c=o?window:{};c.JS_SHA3_NO_WINDOW&&(o=!1);var l=!o&&typeof self=="object",h=!c.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;h?c=commonjsGlobal:l&&(c=self);var d=!c.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,g=!c.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",m="0123456789abcdef".split(""),v=[31,7936,2031616,520093696],_=[4,1024,262144,67108864],p=[1,256,65536,16777216],a=[6,1536,393216,100663296],u=[0,8,16,24],y=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],b=[224,256,384,512],w=[128,256],T=["hex","buffer","arrayBuffer","array","digest"],B={128:168,256:136};(c.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(q){return Object.prototype.toString.call(q)==="[object Array]"}),g&&(c.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(q){return typeof q=="object"&&q.buffer&&q.buffer.constructor===ArrayBuffer});for(var H=function(q,pe,be){return function(ve){return new O(q,pe,q).update(ve)[be]()}},J=function(q,pe,be){return function(ve,we){return new O(q,pe,we).update(ve)[be]()}},W=function(q,pe,be){return function(ve,we,Ce,Re){return E["cshake"+q].update(ve,we,Ce,Re)[be]()}},fe=function(q,pe,be){return function(ve,we,Ce,Re){return E["kmac"+q].update(ve,we,Ce,Re)[be]()}},re=function(q,pe,be,ve){for(var we=0;we<T.length;++we){var Ce=T[we];q[Ce]=pe(be,ve,Ce)}return q},se=function(q,pe){var be=H(q,pe,"hex");return be.create=function(){return new O(q,pe,q)},be.update=function(ve){return be.create().update(ve)},re(be,H,q,pe)},ae=function(q,pe){var be=J(q,pe,"hex");return be.create=function(ve){return new O(q,pe,ve)},be.update=function(ve,we){return be.create(we).update(ve)},re(be,J,q,pe)},ee=function(q,pe){var be=B[q],ve=W(q,pe,"hex");return ve.create=function(we,Ce,Re){return!Ce&&!Re?E["shake"+q].create(we):new O(q,pe,we).bytepad([Ce,Re],be)},ve.update=function(we,Ce,Re,Se){return ve.create(Ce,Re,Se).update(we)},re(ve,W,q,pe)},P=function(q,pe){var be=B[q],ve=fe(q,pe,"hex");return ve.create=function(we,Ce,Re){return new oe(q,pe,Ce).bytepad(["KMAC",Re],be).bytepad([we],be)},ve.update=function(we,Ce,Re,Se){return ve.create(we,Re,Se).update(Ce)},re(ve,fe,q,pe)},C=[{name:"keccak",padding:p,bits:b,createMethod:se},{name:"sha3",padding:a,bits:b,createMethod:se},{name:"shake",padding:v,bits:w,createMethod:ae},{name:"cshake",padding:_,bits:w,createMethod:ee},{name:"kmac",padding:_,bits:w,createMethod:P}],E={},k=[],F=0;F<C.length;++F)for(var j=C[F],Q=j.bits,G=0;G<Q.length;++G){var U=j.name+"_"+Q[G];if(k.push(U),E[U]=j.createMethod(Q[G],j.padding),j.name!=="sha3"){var $=j.name+Q[G];k.push($),E[$]=E[U]}}function O(q,pe,be){this.blocks=[],this.s=[],this.padding=pe,this.outputBits=be,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(q<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=be>>5,this.extraBytes=(be&31)>>3;for(var ve=0;ve<50;++ve)this.s[ve]=0}O.prototype.update=function(q){if(this.finalized)throw new Error(t);var pe,be=typeof q;if(be!=="string"){if(be==="object"){if(q===null)throw new Error(e);if(g&&q.constructor===ArrayBuffer)q=new Uint8Array(q);else if(!Array.isArray(q)&&(!g||!ArrayBuffer.isView(q)))throw new Error(e)}else throw new Error(e);pe=!0}for(var ve=this.blocks,we=this.byteCount,Ce=q.length,Re=this.blockCount,Se=0,$e=this.s,De,Ne;Se<Ce;){if(this.reset)for(this.reset=!1,ve[0]=this.block,De=1;De<Re+1;++De)ve[De]=0;if(pe)for(De=this.start;Se<Ce&&De<we;++Se)ve[De>>2]|=q[Se]<<u[De++&3];else for(De=this.start;Se<Ce&&De<we;++Se)Ne=q.charCodeAt(Se),Ne<128?ve[De>>2]|=Ne<<u[De++&3]:Ne<2048?(ve[De>>2]|=(192|Ne>>6)<<u[De++&3],ve[De>>2]|=(128|Ne&63)<<u[De++&3]):Ne<55296||Ne>=57344?(ve[De>>2]|=(224|Ne>>12)<<u[De++&3],ve[De>>2]|=(128|Ne>>6&63)<<u[De++&3],ve[De>>2]|=(128|Ne&63)<<u[De++&3]):(Ne=65536+((Ne&1023)<<10|q.charCodeAt(++Se)&1023),ve[De>>2]|=(240|Ne>>18)<<u[De++&3],ve[De>>2]|=(128|Ne>>12&63)<<u[De++&3],ve[De>>2]|=(128|Ne>>6&63)<<u[De++&3],ve[De>>2]|=(128|Ne&63)<<u[De++&3]);if(this.lastByteIndex=De,De>=we){for(this.start=De-we,this.block=ve[Re],De=0;De<Re;++De)$e[De]^=ve[De];ue($e),this.reset=!0}else this.start=De}return this},O.prototype.encode=function(q,pe){var be=q&255,ve=1,we=[be];for(q=q>>8,be=q&255;be>0;)we.unshift(be),q=q>>8,be=q&255,++ve;return pe?we.push(ve):we.unshift(ve),this.update(we),we.length},O.prototype.encodeString=function(q){var pe,be=typeof q;if(be!=="string"){if(be==="object"){if(q===null)throw new Error(e);if(g&&q.constructor===ArrayBuffer)q=new Uint8Array(q);else if(!Array.isArray(q)&&(!g||!ArrayBuffer.isView(q)))throw new Error(e)}else throw new Error(e);pe=!0}var ve=0,we=q.length;if(pe)ve=we;else for(var Ce=0;Ce<q.length;++Ce){var Re=q.charCodeAt(Ce);Re<128?ve+=1:Re<2048?ve+=2:Re<55296||Re>=57344?ve+=3:(Re=65536+((Re&1023)<<10|q.charCodeAt(++Ce)&1023),ve+=4)}return ve+=this.encode(ve*8),this.update(q),ve},O.prototype.bytepad=function(q,pe){for(var be=this.encode(pe),ve=0;ve<q.length;++ve)be+=this.encodeString(q[ve]);var we=pe-be%pe,Ce=[];return Ce.length=we,this.update(Ce),this},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var q=this.blocks,pe=this.lastByteIndex,be=this.blockCount,ve=this.s;if(q[pe>>2]|=this.padding[pe&3],this.lastByteIndex===this.byteCount)for(q[0]=q[be],pe=1;pe<be+1;++pe)q[pe]=0;for(q[be-1]|=2147483648,pe=0;pe<be;++pe)ve[pe]^=q[pe];ue(ve)}},O.prototype.toString=O.prototype.hex=function(){this.finalize();for(var q=this.blockCount,pe=this.s,be=this.outputBlocks,ve=this.extraBytes,we=0,Ce=0,Re="",Se;Ce<be;){for(we=0;we<q&&Ce<be;++we,++Ce)Se=pe[we],Re+=m[Se>>4&15]+m[Se&15]+m[Se>>12&15]+m[Se>>8&15]+m[Se>>20&15]+m[Se>>16&15]+m[Se>>28&15]+m[Se>>24&15];Ce%q===0&&(ue(pe),we=0)}return ve&&(Se=pe[we],Re+=m[Se>>4&15]+m[Se&15],ve>1&&(Re+=m[Se>>12&15]+m[Se>>8&15]),ve>2&&(Re+=m[Se>>20&15]+m[Se>>16&15])),Re},O.prototype.arrayBuffer=function(){this.finalize();var q=this.blockCount,pe=this.s,be=this.outputBlocks,ve=this.extraBytes,we=0,Ce=0,Re=this.outputBits>>3,Se;ve?Se=new ArrayBuffer(be+1<<2):Se=new ArrayBuffer(Re);for(var $e=new Uint32Array(Se);Ce<be;){for(we=0;we<q&&Ce<be;++we,++Ce)$e[Ce]=pe[we];Ce%q===0&&ue(pe)}return ve&&($e[we]=pe[we],Se=Se.slice(0,Re)),Se},O.prototype.buffer=O.prototype.arrayBuffer,O.prototype.digest=O.prototype.array=function(){this.finalize();for(var q=this.blockCount,pe=this.s,be=this.outputBlocks,ve=this.extraBytes,we=0,Ce=0,Re=[],Se,$e;Ce<be;){for(we=0;we<q&&Ce<be;++we,++Ce)Se=Ce<<2,$e=pe[we],Re[Se]=$e&255,Re[Se+1]=$e>>8&255,Re[Se+2]=$e>>16&255,Re[Se+3]=$e>>24&255;Ce%q===0&&ue(pe)}return ve&&(Se=Ce<<2,$e=pe[we],Re[Se]=$e&255,ve>1&&(Re[Se+1]=$e>>8&255),ve>2&&(Re[Se+2]=$e>>16&255)),Re};function oe(q,pe,be){O.call(this,q,pe,be)}oe.prototype=new O,oe.prototype.finalize=function(){return this.encode(this.outputBits,!0),O.prototype.finalize.call(this)};var ue=function(q){var pe,be,ve,we,Ce,Re,Se,$e,De,Ne,pt,xt,Xe,yt,gt,ze,et,at,Ye,lt,dt,le,ne,ie,ge,_e,Ee,Te,Qe,ot,je,ct,tt,mt,$t,Kt,It,Vt,Pt,ft,Nt,Ot,wt,Lt,jt,nt,St,ce,de,he,te,ye,Ae,Ie,ke,Oe,Ge,Ue,Tt,Ve,it,st,ht;for(ve=0;ve<48;ve+=2)we=q[0]^q[10]^q[20]^q[30]^q[40],Ce=q[1]^q[11]^q[21]^q[31]^q[41],Re=q[2]^q[12]^q[22]^q[32]^q[42],Se=q[3]^q[13]^q[23]^q[33]^q[43],$e=q[4]^q[14]^q[24]^q[34]^q[44],De=q[5]^q[15]^q[25]^q[35]^q[45],Ne=q[6]^q[16]^q[26]^q[36]^q[46],pt=q[7]^q[17]^q[27]^q[37]^q[47],xt=q[8]^q[18]^q[28]^q[38]^q[48],Xe=q[9]^q[19]^q[29]^q[39]^q[49],pe=xt^(Re<<1|Se>>>31),be=Xe^(Se<<1|Re>>>31),q[0]^=pe,q[1]^=be,q[10]^=pe,q[11]^=be,q[20]^=pe,q[21]^=be,q[30]^=pe,q[31]^=be,q[40]^=pe,q[41]^=be,pe=we^($e<<1|De>>>31),be=Ce^(De<<1|$e>>>31),q[2]^=pe,q[3]^=be,q[12]^=pe,q[13]^=be,q[22]^=pe,q[23]^=be,q[32]^=pe,q[33]^=be,q[42]^=pe,q[43]^=be,pe=Re^(Ne<<1|pt>>>31),be=Se^(pt<<1|Ne>>>31),q[4]^=pe,q[5]^=be,q[14]^=pe,q[15]^=be,q[24]^=pe,q[25]^=be,q[34]^=pe,q[35]^=be,q[44]^=pe,q[45]^=be,pe=$e^(xt<<1|Xe>>>31),be=De^(Xe<<1|xt>>>31),q[6]^=pe,q[7]^=be,q[16]^=pe,q[17]^=be,q[26]^=pe,q[27]^=be,q[36]^=pe,q[37]^=be,q[46]^=pe,q[47]^=be,pe=Ne^(we<<1|Ce>>>31),be=pt^(Ce<<1|we>>>31),q[8]^=pe,q[9]^=be,q[18]^=pe,q[19]^=be,q[28]^=pe,q[29]^=be,q[38]^=pe,q[39]^=be,q[48]^=pe,q[49]^=be,yt=q[0],gt=q[1],nt=q[11]<<4|q[10]>>>28,St=q[10]<<4|q[11]>>>28,Te=q[20]<<3|q[21]>>>29,Qe=q[21]<<3|q[20]>>>29,Ve=q[31]<<9|q[30]>>>23,it=q[30]<<9|q[31]>>>23,Ot=q[40]<<18|q[41]>>>14,wt=q[41]<<18|q[40]>>>14,mt=q[2]<<1|q[3]>>>31,$t=q[3]<<1|q[2]>>>31,ze=q[13]<<12|q[12]>>>20,et=q[12]<<12|q[13]>>>20,ce=q[22]<<10|q[23]>>>22,de=q[23]<<10|q[22]>>>22,ot=q[33]<<13|q[32]>>>19,je=q[32]<<13|q[33]>>>19,st=q[42]<<2|q[43]>>>30,ht=q[43]<<2|q[42]>>>30,Ie=q[5]<<30|q[4]>>>2,ke=q[4]<<30|q[5]>>>2,Kt=q[14]<<6|q[15]>>>26,It=q[15]<<6|q[14]>>>26,at=q[25]<<11|q[24]>>>21,Ye=q[24]<<11|q[25]>>>21,he=q[34]<<15|q[35]>>>17,te=q[35]<<15|q[34]>>>17,ct=q[45]<<29|q[44]>>>3,tt=q[44]<<29|q[45]>>>3,ie=q[6]<<28|q[7]>>>4,ge=q[7]<<28|q[6]>>>4,Oe=q[17]<<23|q[16]>>>9,Ge=q[16]<<23|q[17]>>>9,Vt=q[26]<<25|q[27]>>>7,Pt=q[27]<<25|q[26]>>>7,lt=q[36]<<21|q[37]>>>11,dt=q[37]<<21|q[36]>>>11,ye=q[47]<<24|q[46]>>>8,Ae=q[46]<<24|q[47]>>>8,Lt=q[8]<<27|q[9]>>>5,jt=q[9]<<27|q[8]>>>5,_e=q[18]<<20|q[19]>>>12,Ee=q[19]<<20|q[18]>>>12,Ue=q[29]<<7|q[28]>>>25,Tt=q[28]<<7|q[29]>>>25,ft=q[38]<<8|q[39]>>>24,Nt=q[39]<<8|q[38]>>>24,le=q[48]<<14|q[49]>>>18,ne=q[49]<<14|q[48]>>>18,q[0]=yt^~ze&at,q[1]=gt^~et&Ye,q[10]=ie^~_e&Te,q[11]=ge^~Ee&Qe,q[20]=mt^~Kt&Vt,q[21]=$t^~It&Pt,q[30]=Lt^~nt&ce,q[31]=jt^~St&de,q[40]=Ie^~Oe&Ue,q[41]=ke^~Ge&Tt,q[2]=ze^~at&lt,q[3]=et^~Ye&dt,q[12]=_e^~Te&ot,q[13]=Ee^~Qe&je,q[22]=Kt^~Vt&ft,q[23]=It^~Pt&Nt,q[32]=nt^~ce&he,q[33]=St^~de&te,q[42]=Oe^~Ue&Ve,q[43]=Ge^~Tt&it,q[4]=at^~lt&le,q[5]=Ye^~dt&ne,q[14]=Te^~ot&ct,q[15]=Qe^~je&tt,q[24]=Vt^~ft&Ot,q[25]=Pt^~Nt&wt,q[34]=ce^~he&ye,q[35]=de^~te&Ae,q[44]=Ue^~Ve&st,q[45]=Tt^~it&ht,q[6]=lt^~le&yt,q[7]=dt^~ne&gt,q[16]=ot^~ct&ie,q[17]=je^~tt&ge,q[26]=ft^~Ot&mt,q[27]=Nt^~wt&$t,q[36]=he^~ye&Lt,q[37]=te^~Ae&jt,q[46]=Ve^~st&Ie,q[47]=it^~ht&ke,q[8]=le^~yt&ze,q[9]=ne^~gt&et,q[18]=ct^~ie&_e,q[19]=tt^~ge&Ee,q[28]=Ot^~mt&Kt,q[29]=wt^~$t&It,q[38]=ye^~Lt&nt,q[39]=Ae^~jt&St,q[48]=st^~Ie&Oe,q[49]=ht^~ke&Ge,q[0]^=y[ve],q[1]^=y[ve+1]};if(d)n.exports=E;else for(F=0;F<k.length;++F)c[k[F]]=E[k[F]]})()})(sha3$2);var sha3Exports=sha3$2.exports;const sha3$1=getDefaultExportFromCjs(sha3Exports);function keccak256$2(n){return"0x"+sha3$1.keccak_256(arrayify(n))}const version$i="rlp/5.7.0",logger$p=new Logger(version$i);function arrayifyInteger(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function unarrayifyInteger(n,e,t){let o=0;for(let c=0;c<t;c++)o=o*256+n[e+c];return o}function _encode(n){if(Array.isArray(n)){let o=[];if(n.forEach(function(l){o=o.concat(_encode(l))}),o.length<=55)return o.unshift(192+o.length),o;const c=arrayifyInteger(o.length);return c.unshift(247+c.length),c.concat(o)}isBytesLike(n)||logger$p.throwArgumentError("RLP object must be BytesLike","object",n);const e=Array.prototype.slice.call(arrayify(n));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=arrayifyInteger(e.length);return t.unshift(183+t.length),t.concat(e)}function encode$8(n){return hexlify(_encode(n))}function _decodeChildren(n,e,t,o){const c=[];for(;t<e+1+o;){const l=_decode(n,t);c.push(l.result),t+=l.consumed,t>e+1+o&&logger$p.throwError("child data too short",Logger.errors.BUFFER_OVERRUN,{})}return{consumed:1+o,result:c}}function _decode(n,e){if(n.length===0&&logger$p.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{}),n[e]>=248){const t=n[e]-247;e+1+t>n.length&&logger$p.throwError("data short segment too short",Logger.errors.BUFFER_OVERRUN,{});const o=unarrayifyInteger(n,e+1,t);return e+1+t+o>n.length&&logger$p.throwError("data long segment too short",Logger.errors.BUFFER_OVERRUN,{}),_decodeChildren(n,e,e+1+t,t+o)}else if(n[e]>=192){const t=n[e]-192;return e+1+t>n.length&&logger$p.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{}),_decodeChildren(n,e,e+1,t)}else if(n[e]>=184){const t=n[e]-183;e+1+t>n.length&&logger$p.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{});const o=unarrayifyInteger(n,e+1,t);e+1+t+o>n.length&&logger$p.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{});const c=hexlify(n.slice(e+1+t,e+1+t+o));return{consumed:1+t+o,result:c}}else if(n[e]>=128){const t=n[e]-128;e+1+t>n.length&&logger$p.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{});const o=hexlify(n.slice(e+1,e+1+t));return{consumed:1+t,result:o}}return{consumed:1,result:hexlify(n[e])}}function decode$8(n){const e=arrayify(n),t=_decode(e,0);return t.consumed!==e.length&&logger$p.throwArgumentError("invalid rlp data","data",n),t.result}const version$h="address/5.7.0",logger$o=new Logger(version$h);function getChecksumAddress(n){isHexString(n,20)||logger$o.throwArgumentError("invalid address","address",n),n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let c=0;c<40;c++)t[c]=e[c].charCodeAt(0);const o=arrayify(keccak256$2(t));for(let c=0;c<40;c+=2)o[c>>1]>>4>=8&&(e[c]=e[c].toUpperCase()),(o[c>>1]&15)>=8&&(e[c+1]=e[c+1].toUpperCase());return"0x"+e.join("")}const MAX_SAFE_INTEGER$1=9007199254740991;function log10(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}const ibanLookup={};for(let n=0;n<10;n++)ibanLookup[String(n)]=String(n);for(let n=0;n<26;n++)ibanLookup[String.fromCharCode(65+n)]=String(10+n);const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER$1));function ibanChecksum(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(o=>ibanLookup[o]).join("");for(;e.length>=safeDigits;){let o=e.substring(0,safeDigits);e=parseInt(o,10)%97+e.substring(o.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function getAddress(n){let e=null;if(typeof n!="string"&&logger$o.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),e=getChecksumAddress(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==n&&logger$o.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==ibanChecksum(n)&&logger$o.throwArgumentError("bad icap checksum","address",n),e=_base36To16(n.substring(4));e.length<40;)e="0"+e;e=getChecksumAddress("0x"+e)}else logger$o.throwArgumentError("invalid address","address",n);return e}function getContractAddress(n){let e=null;try{e=getAddress(n.from)}catch{logger$o.throwArgumentError("missing from address","transaction",n)}const t=stripZeros(arrayify(BigNumber$1.from(n.nonce).toHexString()));return getAddress(hexDataSlice(keccak256$2(encode$8([e,t])),12))}class AddressCoder extends Coder{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=getAddress(t)}catch(o){this._throwError(o.message,t)}return e.writeValue(t)}decode(e){return getAddress(hexZeroPad(e.readValue().toHexString(),20))}}class AnonymousCoder extends Coder{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const logger$n=new Logger(version$j);function pack$1(n,e,t){let o=null;if(Array.isArray(t))o=t;else if(t&&typeof t=="object"){let g={};o=e.map(m=>{const v=m.localName;return v||logger$n.throwError("cannot encode object for signature with missing names",Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:m,value:t}),g[v]&&logger$n.throwError("cannot encode object for signature with duplicate names",Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:m,value:t}),g[v]=!0,t[v]})}else logger$n.throwArgumentError("invalid tuple value","tuple",t);e.length!==o.length&&logger$n.throwArgumentError("types/value length mismatch","tuple",t);let c=new Writer(n.wordSize),l=new Writer(n.wordSize),h=[];e.forEach((g,m)=>{let v=o[m];if(g.dynamic){let _=l.length;g.encode(l,v);let p=c.writeUpdatableValue();h.push(a=>{p(a+_)})}else g.encode(c,v)}),h.forEach(g=>{g(c.length)});let d=n.appendWriter(c);return d+=n.appendWriter(l),d}function unpack(n,e){let t=[],o=n.subReader(0);e.forEach(l=>{let h=null;if(l.dynamic){let d=n.readValue(),g=o.subReader(d.toNumber());try{h=l.decode(g)}catch(m){if(m.code===Logger.errors.BUFFER_OVERRUN)throw m;h=m,h.baseType=l.name,h.name=l.localName,h.type=l.type}}else try{h=l.decode(n)}catch(d){if(d.code===Logger.errors.BUFFER_OVERRUN)throw d;h=d,h.baseType=l.name,h.name=l.localName,h.type=l.type}h!=null&&t.push(h)});const c=e.reduce((l,h)=>{const d=h.localName;return d&&(l[d]||(l[d]=0),l[d]++),l},{});e.forEach((l,h)=>{let d=l.localName;if(!d||c[d]!==1||(d==="length"&&(d="_length"),t[d]!=null))return;const g=t[h];g instanceof Error?Object.defineProperty(t,d,{enumerable:!0,get:()=>{throw g}}):t[d]=g});for(let l=0;l<t.length;l++){const h=t[l];h instanceof Error&&Object.defineProperty(t,l,{enumerable:!0,get:()=>{throw h}})}return Object.freeze(t)}class ArrayCoder extends Coder{constructor(e,t,o){const c=e.type+"["+(t>=0?t:"")+"]",l=t===-1||e.dynamic;super("array",c,o,l),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let o=0;o<this.length;o++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let o=this.length;o===-1&&(o=t.length,e.writeValue(t.length)),logger$n.checkArgumentCount(t.length,o,"coder array"+(this.localName?" "+this.localName:""));let c=[];for(let l=0;l<t.length;l++)c.push(this.coder);return pack$1(e,c,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&logger$n.throwError("insufficient data length",Logger.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let o=[];for(let c=0;c<t;c++)o.push(new AnonymousCoder(this.coder));return e.coerce(this.name,unpack(e,o))}}class BooleanCoder extends Coder{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class DynamicBytesCoder extends Coder{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=arrayify(t);let o=e.writeValue(t.length);return o+=e.writeBytes(t),o}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class BytesCoder extends DynamicBytesCoder{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,hexlify(super.decode(e)))}}class FixedBytesCoder extends Coder{constructor(e,t){let o="bytes"+String(e);super(o,o,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let o=arrayify(t);return o.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(o)}decode(e){return e.coerce(this.name,hexlify(e.readBytes(this.size)))}}class NullCoder extends Coder{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const AddressZero="0x0000000000000000000000000000000000000000",NegativeOne$1=BigNumber$1.from(-1),Zero$1=BigNumber$1.from(0),One$1=BigNumber$1.from(1),MaxUint256$1=BigNumber$1.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),HashZero="0x0000000000000000000000000000000000000000000000000000000000000000";class NumberCoder extends Coder{constructor(e,t,o){const c=(t?"int":"uint")+e*8;super(c,c,o,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let o=BigNumber$1.from(t),c=MaxUint256$1.mask(e.wordSize*8);if(this.signed){let l=c.mask(this.size*8-1);(o.gt(l)||o.lt(l.add(One$1).mul(NegativeOne$1)))&&this._throwError("value out-of-bounds",t)}else(o.lt(Zero$1)||o.gt(c.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return o=o.toTwos(this.size*8).mask(this.size*8),this.signed&&(o=o.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(o)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}const version$g="strings/5.7.0",logger$m=new Logger(version$g);var UnicodeNormalizationForm;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(UnicodeNormalizationForm||(UnicodeNormalizationForm={}));var Utf8ErrorReason;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})(Utf8ErrorReason||(Utf8ErrorReason={}));function errorFunc(n,e,t,o,c){return logger$m.throwArgumentError(`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function ignoreFunc(n,e,t,o,c){if(n===Utf8ErrorReason.BAD_PREFIX||n===Utf8ErrorReason.UNEXPECTED_CONTINUE){let l=0;for(let h=e+1;h<t.length&&t[h]>>6===2;h++)l++;return l}return n===Utf8ErrorReason.OVERRUN?t.length-e-1:0}function replaceFunc(n,e,t,o,c){return n===Utf8ErrorReason.OVERLONG?(o.push(c),0):(o.push(65533),ignoreFunc(n,e,t))}const Utf8ErrorFuncs=Object.freeze({error:errorFunc,ignore:ignoreFunc,replace:replaceFunc});function getUtf8CodePoints(n,e){e==null&&(e=Utf8ErrorFuncs.error),n=arrayify(n);const t=[];let o=0;for(;o<n.length;){const c=n[o++];if(!(c>>7)){t.push(c);continue}let l=null,h=null;if((c&224)===192)l=1,h=127;else if((c&240)===224)l=2,h=2047;else if((c&248)===240)l=3,h=65535;else{(c&192)===128?o+=e(Utf8ErrorReason.UNEXPECTED_CONTINUE,o-1,n,t):o+=e(Utf8ErrorReason.BAD_PREFIX,o-1,n,t);continue}if(o-1+l>=n.length){o+=e(Utf8ErrorReason.OVERRUN,o-1,n,t);continue}let d=c&(1<<8-l-1)-1;for(let g=0;g<l;g++){let m=n[o];if((m&192)!=128){o+=e(Utf8ErrorReason.MISSING_CONTINUE,o,n,t),d=null;break}d=d<<6|m&63,o++}if(d!==null){if(d>1114111){o+=e(Utf8ErrorReason.OUT_OF_RANGE,o-1-l,n,t,d);continue}if(d>=55296&&d<=57343){o+=e(Utf8ErrorReason.UTF16_SURROGATE,o-1-l,n,t,d);continue}if(d<=h){o+=e(Utf8ErrorReason.OVERLONG,o-1-l,n,t,d);continue}t.push(d)}}return t}function toUtf8Bytes(n,e=UnicodeNormalizationForm.current){e!=UnicodeNormalizationForm.current&&(logger$m.checkNormalize(),n=n.normalize(e));let t=[];for(let o=0;o<n.length;o++){const c=n.charCodeAt(o);if(c<128)t.push(c);else if(c<2048)t.push(c>>6|192),t.push(c&63|128);else if((c&64512)==55296){o++;const l=n.charCodeAt(o);if(o>=n.length||(l&64512)!==56320)throw new Error("invalid utf-8 string");const h=65536+((c&1023)<<10)+(l&1023);t.push(h>>18|240),t.push(h>>12&63|128),t.push(h>>6&63|128),t.push(h&63|128)}else t.push(c>>12|224),t.push(c>>6&63|128),t.push(c&63|128)}return arrayify(t)}function _toUtf8String(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function toUtf8String(n,e){return _toUtf8String(getUtf8CodePoints(n,e))}function toUtf8CodePoints(n,e=UnicodeNormalizationForm.current){return getUtf8CodePoints(toUtf8Bytes(n,e))}class StringCoder extends DynamicBytesCoder{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,toUtf8Bytes(t))}decode(e){return toUtf8String(super.decode(e))}}class TupleCoder extends Coder{constructor(e,t){let o=!1;const c=[];e.forEach(h=>{h.dynamic&&(o=!0),c.push(h.type)});const l="tuple("+c.join(",")+")";super("tuple",l,t,o),this.coders=e}defaultValue(){const e=[];this.coders.forEach(o=>{e.push(o.defaultValue())});const t=this.coders.reduce((o,c)=>{const l=c.localName;return l&&(o[l]||(o[l]=0),o[l]++),o},{});return this.coders.forEach((o,c)=>{let l=o.localName;!l||t[l]!==1||(l==="length"&&(l="_length"),e[l]==null&&(e[l]=e[c]))}),Object.freeze(e)}encode(e,t){return pack$1(e,this.coders,t)}decode(e){return e.coerce(this.name,unpack(e,this.coders))}}const logger$l=new Logger(version$j),paramTypeBytes=new RegExp(/^bytes([0-9]*)$/),paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/);class AbiCoder{constructor(e){defineReadOnly(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new AddressCoder(e.name);case"bool":return new BooleanCoder(e.name);case"string":return new StringCoder(e.name);case"bytes":return new BytesCoder(e.name);case"array":return new ArrayCoder(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new TupleCoder((e.components||[]).map(o=>this._getCoder(o)),e.name);case"":return new NullCoder(e.name)}let t=e.type.match(paramTypeNumber);if(t){let o=parseInt(t[2]||"256");return(o===0||o>256||o%8!==0)&&logger$l.throwArgumentError("invalid "+t[1]+" bit length","param",e),new NumberCoder(o/8,t[1]==="int",e.name)}if(t=e.type.match(paramTypeBytes),t){let o=parseInt(t[1]);return(o===0||o>32)&&logger$l.throwArgumentError("invalid bytes length","param",e),new FixedBytesCoder(o,e.name)}return logger$l.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Reader(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Writer(this._getWordSize())}getDefaultValue(e){const t=e.map(c=>this._getCoder(ParamType.from(c)));return new TupleCoder(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&logger$l.throwError("types/values length mismatch",Logger.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const o=e.map(h=>this._getCoder(ParamType.from(h))),c=new TupleCoder(o,"_"),l=this._getWriter();return c.encode(l,t),l.data}decode(e,t,o){const c=e.map(h=>this._getCoder(ParamType.from(h)));return new TupleCoder(c,"_").decode(this._getReader(arrayify(t),o))}}const defaultAbiCoder=new AbiCoder;function id(n){return keccak256$2(toUtf8Bytes(n))}const version$f="hash/5.7.0";function decode$7(n){n=atob(n);const e=[];for(let t=0;t<n.length;t++)e.push(n.charCodeAt(t));return arrayify(e)}function encode$7(n){n=arrayify(n);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return btoa(e)}function flat(n,e){e==null&&(e=1);const t=[],o=t.forEach,c=function(l,h){o.call(l,function(d){h>0&&Array.isArray(d)?c(d,h-1):t.push(d)})};return c(n,e),t}function fromEntries(n){const e={};for(let t=0;t<n.length;t++){const o=n[t];e[o[0]]=o[1]}return e}function decode_arithmetic(n){let e=0;function t(){return n[e++]<<8|n[e++]}let o=t(),c=1,l=[0,1];for(let J=1;J<o;J++)l.push(c+=t());let h=t(),d=e;e+=h;let g=0,m=0;function v(){return g==0&&(m=m<<8|n[e++],g=8),m>>--g&1}const _=31,p=Math.pow(2,_),a=p>>>1,u=a>>1,y=p-1;let b=0;for(let J=0;J<_;J++)b=b<<1|v();let w=[],T=0,B=p;for(;;){let J=Math.floor(((b-T+1)*c-1)/B),W=0,fe=o;for(;fe-W>1;){let ae=W+fe>>>1;J<l[ae]?fe=ae:W=ae}if(W==0)break;w.push(W);let re=T+Math.floor(B*l[W]/c),se=T+Math.floor(B*l[W+1]/c)-1;for(;!((re^se)&a);)b=b<<1&y|v(),re=re<<1&y,se=se<<1&y|1;for(;re&~se&u;)b=b&a|b<<1&y>>>1|v(),re=re<<1^a,se=(se^a)<<1|a|1;T=re,B=1+se-re}let H=o-4;return w.map(J=>{switch(J-H){case 3:return H+65792+(n[d++]<<16|n[d++]<<8|n[d++]);case 2:return H+256+(n[d++]<<8|n[d++]);case 1:return H+n[d++];default:return J-1}})}function read_payload(n){let e=0;return()=>n[e++]}function read_compressed_payload(n){return read_payload(decode_arithmetic(n))}function signed(n){return n&1?~n>>1:n>>1}function read_counts(n,e){let t=Array(n);for(let o=0;o<n;o++)t[o]=1+e();return t}function read_ascending(n,e){let t=Array(n);for(let o=0,c=-1;o<n;o++)t[o]=c+=1+e();return t}function read_deltas(n,e){let t=Array(n);for(let o=0,c=0;o<n;o++)t[o]=c+=signed(e());return t}function read_member_array(n,e){let t=read_ascending(n(),n),o=n(),c=read_ascending(o,n),l=read_counts(o,n);for(let h=0;h<o;h++)for(let d=0;d<l[h];d++)t.push(c[h]+d);return e?t.map(h=>e[h]):t}function read_mapped_map(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(read_linear_table(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(read_replacement_table(t,n))}return fromEntries(flat(e))}function read_zero_terminated_array(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(t)}return e}function read_transposed(n,e,t){let o=Array(n).fill(void 0).map(()=>[]);for(let c=0;c<e;c++)read_deltas(n,t).forEach((l,h)=>o[h].push(l));return o}function read_linear_table(n,e){let t=1+e(),o=e(),c=read_zero_terminated_array(e),l=read_transposed(c.length,1+n,e);return flat(l.map((h,d)=>{const g=h[0],m=h.slice(1);return Array(c[d]).fill(void 0).map((v,_)=>{let p=_*o;return[g+_*t,m.map(a=>a+p)]})}))}function read_replacement_table(n,e){let t=1+e();return read_transposed(t,1+n,e).map(c=>[c[0],c.slice(1)])}function read_emoji_trie(n){let e=read_member_array(n).sort((o,c)=>o-c);return t();function t(){let o=[];for(;;){let m=read_member_array(n,e);if(m.length==0)break;o.push({set:new Set(m),node:t()})}o.sort((m,v)=>v.set.size-m.set.size);let c=n(),l=c%3;c=c/3|0;let h=!!(c&1);c>>=1;let d=c==1,g=c==2;return{branches:o,valid:l,fe0f:h,save:d,check:g}}}function getData(){return read_compressed_payload(decode$7("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const r$2=getData(),VALID=new Set(read_member_array(r$2)),IGNORED=new Set(read_member_array(r$2)),MAPPED=read_mapped_map(r$2),EMOJI_ROOT=read_emoji_trie(r$2),HYPHEN=45,UNDERSCORE=95;function explode_cp(n){return toUtf8CodePoints(n)}function filter_fe0f(n){return n.filter(e=>e!=65039)}function ens_normalize_post_check(n){for(let e of n.split(".")){let t=explode_cp(e);try{for(let o=t.lastIndexOf(UNDERSCORE)-1;o>=0;o--)if(t[o]!==UNDERSCORE)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(o=>o<128)&&t[2]===HYPHEN&&t[3]===HYPHEN)throw new Error("invalid label extension")}catch(o){throw new Error(`Invalid label "${e}": ${o.message}`)}}return n}function ens_normalize(n){return ens_normalize_post_check(normalize(n,filter_fe0f))}function normalize(n,e){let t=explode_cp(n).reverse(),o=[];for(;t.length;){let c=consume_emoji_reversed(t);if(c){o.push(...e(c));continue}let l=t.pop();if(VALID.has(l)){o.push(l);continue}if(IGNORED.has(l))continue;let h=MAPPED[l];if(h){o.push(...h);continue}throw new Error(`Disallowed codepoint: 0x${l.toString(16).toUpperCase()}`)}return ens_normalize_post_check(nfc(String.fromCodePoint(...o)))}function nfc(n){return n.normalize("NFC")}function consume_emoji_reversed(n,e){var t;let o=EMOJI_ROOT,c,l,h=[],d=n.length;for(e&&(e.length=0);d;){let g=n[--d];if(o=(t=o.branches.find(m=>m.set.has(g)))===null||t===void 0?void 0:t.node,!o)break;if(o.save)l=g;else if(o.check&&g===l)break;h.push(g),o.fe0f&&(h.push(65039),d>0&&n[d-1]==65039&&d--),o.valid&&(c=h.slice(),o.valid==2&&c.splice(1,1),e&&e.push(...n.slice(d).reverse()),n.length=d)}return c}const logger$k=new Logger(version$f),Zeros=new Uint8Array(32);Zeros.fill(0);function checkComponent(n){if(n.length===0)throw new Error("invalid ENS name; empty component");return n}function ensNameSplit(n){const e=toUtf8Bytes(ens_normalize(n)),t=[];if(n.length===0)return t;let o=0;for(let c=0;c<e.length;c++)e[c]===46&&(t.push(checkComponent(e.slice(o,c))),o=c+1);if(o>=e.length)throw new Error("invalid ENS name; empty component");return t.push(checkComponent(e.slice(o))),t}function namehash(n){typeof n!="string"&&logger$k.throwArgumentError("invalid ENS name; not a string","name",n);let e=Zeros;const t=ensNameSplit(n);for(;t.length;)e=keccak256$2(concat$1([e,keccak256$2(t.pop())]));return hexlify(e)}function dnsEncode(n){return hexlify(concat$1(ensNameSplit(n).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}const messagePrefix=`Ethereum Signed Message:
`;function hashMessage(n){return typeof n=="string"&&(n=toUtf8Bytes(n)),keccak256$2(concat$1([toUtf8Bytes(messagePrefix),toUtf8Bytes(String(n.length)),n]))}var __awaiter$9=globalThis&&globalThis.__awaiter||function(n,e,t,o){function c(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(v){try{m(o.next(v))}catch(_){h(_)}}function g(v){try{m(o.throw(v))}catch(_){h(_)}}function m(v){v.done?l(v.value):c(v.value).then(d,g)}m((o=o.apply(n,e||[])).next())})};const logger$j=new Logger(version$f),padding=new Uint8Array(32);padding.fill(0);const NegativeOne=BigNumber$1.from(-1),Zero=BigNumber$1.from(0),One=BigNumber$1.from(1),MaxUint256=BigNumber$1.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(n){const e=arrayify(n),t=e.length%32;return t?hexConcat([e,padding.slice(t)]):hexlify(e)}const hexTrue=hexZeroPad(One.toHexString(),32),hexFalse=hexZeroPad(Zero.toHexString(),32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(n){return function(e){return typeof e!="string"&&logger$j.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(n){try{return BigNumber$1.from(n).toString()}catch{}return logger$j.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return getAddress(n).toLowerCase()}catch{}return logger$j.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const e=arrayify(n);if(e.length!==32)throw new Error("bad length");return hexlify(e)}catch{}return logger$j.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function getBaseEncoder(n){{const e=n.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",o=parseInt(e[2]||"256");(o%8!==0||o>256||e[2]&&e[2]!==String(o))&&logger$j.throwArgumentError("invalid numeric width","type",n);const c=MaxUint256.mask(t?o-1:o),l=t?c.add(One).mul(NegativeOne):Zero;return function(h){const d=BigNumber$1.from(h);return(d.lt(l)||d.gt(c))&&logger$j.throwArgumentError(`value out-of-bounds for ${n}`,"value",h),hexZeroPad(d.toTwos(256).toHexString(),32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&logger$j.throwArgumentError("invalid bytes width","type",n),function(o){return arrayify(o).length!==t&&logger$j.throwArgumentError(`invalid length for ${n}`,"value",o),hexPadRight(o)}}}switch(n){case"address":return function(e){return hexZeroPad(getAddress(e),32)};case"bool":return function(e){return e?hexTrue:hexFalse};case"bytes":return function(e){return keccak256$2(e)};case"string":return function(e){return id(e)}}return null}function encodeType(n,e){return`${n}(${e.map(({name:t,type:o})=>o+" "+t).join(",")})`}class TypedDataEncoder{constructor(e){defineReadOnly(this,"types",Object.freeze(deepCopy(e))),defineReadOnly(this,"_encoderCache",{}),defineReadOnly(this,"_types",{});const t={},o={},c={};Object.keys(e).forEach(d=>{t[d]={},o[d]=[],c[d]={}});for(const d in e){const g={};e[d].forEach(m=>{g[m.name]&&logger$j.throwArgumentError(`duplicate variable name ${JSON.stringify(m.name)} in ${JSON.stringify(d)}`,"types",e),g[m.name]=!0;const v=m.type.match(/^([^\x5b]*)(\x5b|$)/)[1];v===d&&logger$j.throwArgumentError(`circular type reference to ${JSON.stringify(v)}`,"types",e),!getBaseEncoder(v)&&(o[v]||logger$j.throwArgumentError(`unknown type ${JSON.stringify(v)}`,"types",e),o[v].push(d),t[d][v]=!0)})}const l=Object.keys(o).filter(d=>o[d].length===0);l.length===0?logger$j.throwArgumentError("missing primary type","types",e):l.length>1&&logger$j.throwArgumentError(`ambiguous primary types or unused types: ${l.map(d=>JSON.stringify(d)).join(", ")}`,"types",e),defineReadOnly(this,"primaryType",l[0]);function h(d,g){g[d]&&logger$j.throwArgumentError(`circular type reference to ${JSON.stringify(d)}`,"types",e),g[d]=!0,Object.keys(t[d]).forEach(m=>{o[m]&&(h(m,g),Object.keys(g).forEach(v=>{c[v][m]=!0}))}),delete g[d]}h(this.primaryType,{});for(const d in c){const g=Object.keys(c[d]);g.sort(),this._types[d]=encodeType(d,e[d])+g.map(m=>encodeType(m,e[m])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const c=getBaseEncoder(e);if(c)return c}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const c=t[1],l=this.getEncoder(c),h=parseInt(t[3]);return d=>{h>=0&&d.length!==h&&logger$j.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",d);let g=d.map(l);return this._types[c]&&(g=g.map(keccak256$2)),keccak256$2(hexConcat(g))}}const o=this.types[e];if(o){const c=id(this._types[e]);return l=>{const h=o.map(({name:d,type:g})=>{const m=this.getEncoder(g)(l[d]);return this._types[g]?keccak256$2(m):m});return h.unshift(c),hexConcat(h)}}return logger$j.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||logger$j.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return keccak256$2(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,o){if(getBaseEncoder(e))return o(e,t);const c=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(c){const h=c[1],d=parseInt(c[3]);return d>=0&&t.length!==d&&logger$j.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(g=>this._visit(h,g,o))}const l=this.types[e];return l?l.reduce((h,{name:d,type:g})=>(h[d]=this._visit(g,t[d],o),h),{}):logger$j.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new TypedDataEncoder(e)}static getPrimaryType(e){return TypedDataEncoder.from(e).primaryType}static hashStruct(e,t,o){return TypedDataEncoder.from(t).hashStruct(e,o)}static hashDomain(e){const t=[];for(const o in e){const c=domainFieldTypes[o];c||logger$j.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(o)}`,"domain",e),t.push({name:o,type:c})}return t.sort((o,c)=>domainFieldNames.indexOf(o.name)-domainFieldNames.indexOf(c.name)),TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,o){return hexConcat(["0x1901",TypedDataEncoder.hashDomain(e),TypedDataEncoder.from(t).hash(o)])}static hash(e,t,o){return keccak256$2(TypedDataEncoder.encode(e,t,o))}static resolveNames(e,t,o,c){return __awaiter$9(this,void 0,void 0,function*(){e=shallowCopy(e);const l={};e.verifyingContract&&!isHexString(e.verifyingContract,20)&&(l[e.verifyingContract]="0x");const h=TypedDataEncoder.from(t);h.visit(o,(d,g)=>(d==="address"&&!isHexString(g,20)&&(l[g]="0x"),g));for(const d in l)l[d]=yield c(d);return e.verifyingContract&&l[e.verifyingContract]&&(e.verifyingContract=l[e.verifyingContract]),o=h.visit(o,(d,g)=>d==="address"&&l[g]?l[g]:g),{domain:e,value:o}})}static getPayload(e,t,o){TypedDataEncoder.hashDomain(e);const c={},l=[];domainFieldNames.forEach(g=>{const m=e[g];m!=null&&(c[g]=domainChecks[g](m),l.push({name:g,type:domainFieldTypes[g]}))});const h=TypedDataEncoder.from(t),d=shallowCopy(t);return d.EIP712Domain?logger$j.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):d.EIP712Domain=l,h.encode(o),{types:d,domain:c,primaryType:h.primaryType,message:h.visit(o,(g,m)=>{if(g.match(/^bytes(\d*)/))return hexlify(arrayify(m));if(g.match(/^u?int/))return BigNumber$1.from(m).toString();switch(g){case"address":return m.toLowerCase();case"bool":return!!m;case"string":return typeof m!="string"&&logger$j.throwArgumentError("invalid string","value",m),m}return logger$j.throwArgumentError("unsupported type","type",g)})}}}const logger$i=new Logger(version$j);class LogDescription extends Description{}class TransactionDescription extends Description{}class ErrorDescription extends Description{}class Indexed extends Description{static isIndexed(e){return!!(e&&e._isIndexed)}}const BuiltinErrors={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function wrapAccessError(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);return t.error=e,t}class Interface{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,defineReadOnly(this,"fragments",t.map(o=>Fragment.from(o)).filter(o=>o!=null)),defineReadOnly(this,"_abiCoder",getStatic(new.target,"getAbiCoder")()),defineReadOnly(this,"functions",{}),defineReadOnly(this,"errors",{}),defineReadOnly(this,"events",{}),defineReadOnly(this,"structs",{}),this.fragments.forEach(o=>{let c=null;switch(o.type){case"constructor":if(this.deploy){logger$i.warn("duplicate definition - constructor");return}defineReadOnly(this,"deploy",o);return;case"function":c=this.functions;break;case"event":c=this.events;break;case"error":c=this.errors;break;default:return}let l=o.format();if(c[l]){logger$i.warn("duplicate definition - "+l);return}c[l]=o}),this.deploy||defineReadOnly(this,"deploy",ConstructorFragment.from({payable:!1,type:"constructor"})),defineReadOnly(this,"_isInterface",!0)}format(e){e||(e=FormatTypes.full),e===FormatTypes.sighash&&logger$i.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(o=>o.format(e));return e===FormatTypes.json?JSON.stringify(t.map(o=>JSON.parse(o))):t}static getAbiCoder(){return defaultAbiCoder}static getAddress(e){return getAddress(e)}static getSighash(e){return hexDataSlice(id(e.format()),0,4)}static getEventTopic(e){return id(e.format())}getFunction(e){if(isHexString(e)){for(const o in this.functions)if(e===this.getSighash(o))return this.functions[o];logger$i.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const o=e.trim(),c=Object.keys(this.functions).filter(l=>l.split("(")[0]===o);return c.length===0?logger$i.throwArgumentError("no matching function","name",o):c.length>1&&logger$i.throwArgumentError("multiple matching functions","name",o),this.functions[c[0]]}const t=this.functions[FunctionFragment.fromString(e).format()];return t||logger$i.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(isHexString(e)){const o=e.toLowerCase();for(const c in this.events)if(o===this.getEventTopic(c))return this.events[c];logger$i.throwArgumentError("no matching event","topichash",o)}if(e.indexOf("(")===-1){const o=e.trim(),c=Object.keys(this.events).filter(l=>l.split("(")[0]===o);return c.length===0?logger$i.throwArgumentError("no matching event","name",o):c.length>1&&logger$i.throwArgumentError("multiple matching events","name",o),this.events[c[0]]}const t=this.events[EventFragment.fromString(e).format()];return t||logger$i.throwArgumentError("no matching event","signature",e),t}getError(e){if(isHexString(e)){const o=getStatic(this.constructor,"getSighash");for(const c in this.errors){const l=this.errors[c];if(e===o(l))return this.errors[c]}logger$i.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const o=e.trim(),c=Object.keys(this.errors).filter(l=>l.split("(")[0]===o);return c.length===0?logger$i.throwArgumentError("no matching error","name",o):c.length>1&&logger$i.throwArgumentError("multiple matching errors","name",o),this.errors[c[0]]}const t=this.errors[FunctionFragment.fromString(e).format()];return t||logger$i.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return getStatic(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),getStatic(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const o=arrayify(t);return hexlify(o.slice(0,4))!==this.getSighash(e)&&logger$i.throwArgumentError(`data signature does not match error ${e.name}.`,"data",hexlify(o)),this._decodeParams(e.inputs,o.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),hexlify(concat$1([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const o=arrayify(t);return hexlify(o.slice(0,4))!==this.getSighash(e)&&logger$i.throwArgumentError(`data signature does not match function ${e.name}.`,"data",hexlify(o)),this._decodeParams(e.inputs,o.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),hexlify(concat$1([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let o=arrayify(t),c=null,l="",h=null,d=null,g=null;switch(o.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,o)}catch{}break;case 4:{const m=hexlify(o.slice(0,4)),v=BuiltinErrors[m];if(v)h=this._abiCoder.decode(v.inputs,o.slice(4)),d=v.name,g=v.signature,v.reason&&(c=h[0]),d==="Error"?l=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(h[0])}`:d==="Panic"&&(l=`; VM Exception while processing transaction: reverted with panic code ${h[0]}`);else try{const _=this.getError(m);h=this._abiCoder.decode(_.inputs,o.slice(4)),d=_.name,g=_.format()}catch{}break}}return logger$i.throwError("call revert exception"+l,Logger.errors.CALL_EXCEPTION,{method:e.format(),data:hexlify(t),errorArgs:h,errorName:d,errorSignature:g,reason:c})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),hexlify(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&logger$i.throwError("too many arguments for "+e.format(),Logger.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let o=[];e.anonymous||o.push(this.getEventTopic(e));const c=(l,h)=>l.type==="string"?id(h):l.type==="bytes"?keccak256$2(hexlify(h)):(l.type==="bool"&&typeof h=="boolean"&&(h=h?"0x01":"0x00"),l.type.match(/^u?int/)&&(h=BigNumber$1.from(h).toHexString()),l.type==="address"&&this._abiCoder.encode(["address"],[h]),hexZeroPad(hexlify(h),32));for(t.forEach((l,h)=>{let d=e.inputs[h];if(!d.indexed){l!=null&&logger$i.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+d.name,l);return}l==null?o.push(null):d.baseType==="array"||d.baseType==="tuple"?logger$i.throwArgumentError("filtering with tuples or arrays not supported","contract."+d.name,l):Array.isArray(l)?o.push(l.map(g=>c(d,g))):o.push(c(d,l))});o.length&&o[o.length-1]===null;)o.pop();return o}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const o=[],c=[],l=[];return e.anonymous||o.push(this.getEventTopic(e)),t.length!==e.inputs.length&&logger$i.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((h,d)=>{const g=t[d];if(h.indexed)if(h.type==="string")o.push(id(g));else if(h.type==="bytes")o.push(keccak256$2(g));else{if(h.baseType==="tuple"||h.baseType==="array")throw new Error("not implemented");o.push(this._abiCoder.encode([h.type],[g]))}else c.push(h),l.push(g)}),{data:this._abiCoder.encode(c,l),topics:o}}decodeEventLog(e,t,o){if(typeof e=="string"&&(e=this.getEvent(e)),o!=null&&!e.anonymous){let p=this.getEventTopic(e);(!isHexString(o[0],32)||o[0].toLowerCase()!==p)&&logger$i.throwError("fragment/topic mismatch",Logger.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:p,value:o[0]}),o=o.slice(1)}let c=[],l=[],h=[];e.inputs.forEach((p,a)=>{p.indexed?p.type==="string"||p.type==="bytes"||p.baseType==="tuple"||p.baseType==="array"?(c.push(ParamType.fromObject({type:"bytes32",name:p.name})),h.push(!0)):(c.push(p),h.push(!1)):(l.push(p),h.push(!1))});let d=o!=null?this._abiCoder.decode(c,concat$1(o)):null,g=this._abiCoder.decode(l,t,!0),m=[],v=0,_=0;e.inputs.forEach((p,a)=>{if(p.indexed)if(d==null)m[a]=new Indexed({_isIndexed:!0,hash:null});else if(h[a])m[a]=new Indexed({_isIndexed:!0,hash:d[_++]});else try{m[a]=d[_++]}catch(u){m[a]=u}else try{m[a]=g[v++]}catch(u){m[a]=u}if(p.name&&m[p.name]==null){const u=m[a];u instanceof Error?Object.defineProperty(m,p.name,{enumerable:!0,get:()=>{throw wrapAccessError(`property ${JSON.stringify(p.name)}`,u)}}):m[p.name]=u}});for(let p=0;p<m.length;p++){const a=m[p];a instanceof Error&&Object.defineProperty(m,p,{enumerable:!0,get:()=>{throw wrapAccessError(`index ${p}`,a)}})}return Object.freeze(m)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new TransactionDescription({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:BigNumber$1.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new LogDescription({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=hexlify(e);let o=this.getError(t.substring(0,10).toLowerCase());return o?new ErrorDescription({args:this._abiCoder.decode(o.inputs,"0x"+t.substring(10)),errorFragment:o,name:o.name,signature:o.format(),sighash:this.getSighash(o)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const version$e="abstract-provider/5.7.0";var __awaiter$8=globalThis&&globalThis.__awaiter||function(n,e,t,o){function c(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(v){try{m(o.next(v))}catch(_){h(_)}}function g(v){try{m(o.throw(v))}catch(_){h(_)}}function m(v){v.done?l(v.value):c(v.value).then(d,g)}m((o=o.apply(n,e||[])).next())})};const logger$h=new Logger(version$e);class ForkEvent extends Description{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class Provider{constructor(){logger$h.checkAbstract(new.target,Provider),defineReadOnly(this,"_isProvider",!0)}getFeeData(){return __awaiter$8(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield resolveProperties({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(h=>null)});let o=null,c=null,l=null;return e&&e.baseFeePerGas&&(o=e.baseFeePerGas,l=BigNumber$1.from("1500000000"),c=e.baseFeePerGas.mul(2).add(l)),{lastBaseFeePerGas:o,maxFeePerGas:c,maxPriorityFeePerGas:l,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const version$d="abstract-signer/5.7.0";var __awaiter$7=globalThis&&globalThis.__awaiter||function(n,e,t,o){function c(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(v){try{m(o.next(v))}catch(_){h(_)}}function g(v){try{m(o.throw(v))}catch(_){h(_)}}function m(v){v.done?l(v.value):c(v.value).then(d,g)}m((o=o.apply(n,e||[])).next())})};const logger$g=new Logger(version$d),allowedTransactionKeys$2=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],forwardErrors=[Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED];class Signer{constructor(){logger$g.checkAbstract(new.target,Signer),defineReadOnly(this,"_isSigner",!0)}getBalance(e){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return __awaiter$7(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield resolveProperties(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return __awaiter$7(this,void 0,void 0,function*(){this._checkProvider("call");const o=yield resolveProperties(this.checkTransaction(e));return yield this.provider.call(o,t)})}sendTransaction(e){return __awaiter$7(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),o=yield this.signTransaction(t);return yield this.provider.sendTransaction(o)})}getChainId(){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return __awaiter$7(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const o in e)allowedTransactionKeys$2.indexOf(o)===-1&&logger$g.throwArgumentError("invalid transaction key: "+o,"transaction",e);const t=shallowCopy(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(o=>(o[0].toLowerCase()!==o[1].toLowerCase()&&logger$g.throwArgumentError("from address mismatch","transaction",e),o[0])),t}populateTransaction(e){return __awaiter$7(this,void 0,void 0,function*(){const t=yield resolveProperties(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(c=>__awaiter$7(this,void 0,void 0,function*(){if(c==null)return null;const l=yield this.resolveName(c);return l==null&&logger$g.throwArgumentError("provided ENS name resolves to null","tx.to",c),l})),t.to.catch(c=>{}));const o=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||o)?logger$g.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&o&&logger$g.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const c=yield this.getFeeData();if(t.type==null)if(c.maxFeePerGas!=null&&c.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const l=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=l,t.maxPriorityFeePerGas=l}else t.maxFeePerGas==null&&(t.maxFeePerGas=c.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=c.maxPriorityFeePerGas);else c.gasPrice!=null?(o&&logger$g.throwError("network does not support EIP-1559",Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=c.gasPrice),t.type=0):logger$g.throwError("failed to get consistent fee data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=c.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=c.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(c=>{if(forwardErrors.indexOf(c.code)>=0)throw c;return logger$g.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:c,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(c=>(c[1]!==0&&c[0]!==c[1]&&logger$g.throwArgumentError("chainId address mismatch","transaction",e),c[0])),yield resolveProperties(t)})}_checkProvider(e){this.provider||logger$g.throwError("missing provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class VoidSigner extends Signer{constructor(e,t){super(),defineReadOnly(this,"address",e),defineReadOnly(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{logger$g.throwError(e,Logger.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,o){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new VoidSigner(this.address,e)}}var hash$4={},utils$o={},minimalisticAssert$1=assert$g;function assert$g(n,e){if(!n)throw new Error(e||"Assertion failed")}assert$g.equal=function n(e,t,o){if(e!=t)throw new Error(o||"Assertion failed: "+e+" != "+t)};var inherits_browser$1={exports:{}};typeof Object.create=="function"?inherits_browser$1.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser$1.exports=function(e,t){if(t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}};var inherits_browserExports=inherits_browser$1.exports,assert$f=minimalisticAssert$1,inherits$4=inherits_browserExports;utils$o.inherits=inherits$4;function isSurrogatePair(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function toArray$1(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),c=0;c<n.length;c+=2)t.push(parseInt(n[c]+n[c+1],16))}else for(var o=0,c=0;c<n.length;c++){var l=n.charCodeAt(c);l<128?t[o++]=l:l<2048?(t[o++]=l>>6|192,t[o++]=l&63|128):isSurrogatePair(n,c)?(l=65536+((l&1023)<<10)+(n.charCodeAt(++c)&1023),t[o++]=l>>18|240,t[o++]=l>>12&63|128,t[o++]=l>>6&63|128,t[o++]=l&63|128):(t[o++]=l>>12|224,t[o++]=l>>6&63|128,t[o++]=l&63|128)}else for(c=0;c<n.length;c++)t[c]=n[c]|0;return t}utils$o.toArray=toArray$1;function toHex(n){for(var e="",t=0;t<n.length;t++)e+=zero2(n[t].toString(16));return e}utils$o.toHex=toHex;function htonl(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}utils$o.htonl=htonl;function toHex32(n,e){for(var t="",o=0;o<n.length;o++){var c=n[o];e==="little"&&(c=htonl(c)),t+=zero8(c.toString(16))}return t}utils$o.toHex32=toHex32;function zero2(n){return n.length===1?"0"+n:n}utils$o.zero2=zero2;function zero8(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}utils$o.zero8=zero8;function join32(n,e,t,o){var c=t-e;assert$f(c%4===0);for(var l=new Array(c/4),h=0,d=e;h<l.length;h++,d+=4){var g;o==="big"?g=n[d]<<24|n[d+1]<<16|n[d+2]<<8|n[d+3]:g=n[d+3]<<24|n[d+2]<<16|n[d+1]<<8|n[d],l[h]=g>>>0}return l}utils$o.join32=join32;function split32(n,e){for(var t=new Array(n.length*4),o=0,c=0;o<n.length;o++,c+=4){var l=n[o];e==="big"?(t[c]=l>>>24,t[c+1]=l>>>16&255,t[c+2]=l>>>8&255,t[c+3]=l&255):(t[c+3]=l>>>24,t[c+2]=l>>>16&255,t[c+1]=l>>>8&255,t[c]=l&255)}return t}utils$o.split32=split32;function rotr32$1(n,e){return n>>>e|n<<32-e}utils$o.rotr32=rotr32$1;function rotl32$2(n,e){return n<<e|n>>>32-e}utils$o.rotl32=rotl32$2;function sum32$3(n,e){return n+e>>>0}utils$o.sum32=sum32$3;function sum32_3$1(n,e,t){return n+e+t>>>0}utils$o.sum32_3=sum32_3$1;function sum32_4$2(n,e,t,o){return n+e+t+o>>>0}utils$o.sum32_4=sum32_4$2;function sum32_5$2(n,e,t,o,c){return n+e+t+o+c>>>0}utils$o.sum32_5=sum32_5$2;function sum64$1(n,e,t,o){var c=n[e],l=n[e+1],h=o+l>>>0,d=(h<o?1:0)+t+c;n[e]=d>>>0,n[e+1]=h}utils$o.sum64=sum64$1;function sum64_hi$1(n,e,t,o){var c=e+o>>>0,l=(c<e?1:0)+n+t;return l>>>0}utils$o.sum64_hi=sum64_hi$1;function sum64_lo$1(n,e,t,o){var c=e+o;return c>>>0}utils$o.sum64_lo=sum64_lo$1;function sum64_4_hi$1(n,e,t,o,c,l,h,d){var g=0,m=e;m=m+o>>>0,g+=m<e?1:0,m=m+l>>>0,g+=m<l?1:0,m=m+d>>>0,g+=m<d?1:0;var v=n+t+c+h+g;return v>>>0}utils$o.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(n,e,t,o,c,l,h,d){var g=e+o+l+d;return g>>>0}utils$o.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(n,e,t,o,c,l,h,d,g,m){var v=0,_=e;_=_+o>>>0,v+=_<e?1:0,_=_+l>>>0,v+=_<l?1:0,_=_+d>>>0,v+=_<d?1:0,_=_+m>>>0,v+=_<m?1:0;var p=n+t+c+h+g+v;return p>>>0}utils$o.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(n,e,t,o,c,l,h,d,g,m){var v=e+o+l+d+m;return v>>>0}utils$o.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(n,e,t){var o=e<<32-t|n>>>t;return o>>>0}utils$o.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(n,e,t){var o=n<<32-t|e>>>t;return o>>>0}utils$o.rotr64_lo=rotr64_lo$1;function shr64_hi$1(n,e,t){return n>>>t}utils$o.shr64_hi=shr64_hi$1;function shr64_lo$1(n,e,t){var o=n<<32-t|e>>>t;return o>>>0}utils$o.shr64_lo=shr64_lo$1;var common$5={},utils$n=utils$o,assert$e=minimalisticAssert$1;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function n(e,t){if(e=utils$n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var o=e.length%this._delta8;this.pending=e.slice(e.length-o,e.length),this.pending.length===0&&(this.pending=null),e=utils$n.join32(e,0,e.length-o,this.endian);for(var c=0;c<e.length;c+=this._delta32)this._update(e,c,c+this._delta32)}return this};BlockHash$4.prototype.digest=function n(e){return this.update(this._pad()),assert$e(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function n(){var e=this.pendingTotal,t=this._delta8,o=t-(e+this.padLength)%t,c=new Array(o+this.padLength);c[0]=128;for(var l=1;l<o;l++)c[l]=0;if(e<<=3,this.endian==="big"){for(var h=8;h<this.padLength;h++)c[l++]=0;c[l++]=0,c[l++]=0,c[l++]=0,c[l++]=0,c[l++]=e>>>24&255,c[l++]=e>>>16&255,c[l++]=e>>>8&255,c[l++]=e&255}else for(c[l++]=e&255,c[l++]=e>>>8&255,c[l++]=e>>>16&255,c[l++]=e>>>24&255,c[l++]=0,c[l++]=0,c[l++]=0,c[l++]=0,h=8;h<this.padLength;h++)c[l++]=0;return c};var sha={},common$4={},utils$m=utils$o,rotr32=utils$m.rotr32;function ft_1$1(n,e,t,o){if(n===0)return ch32$1(e,t,o);if(n===1||n===3)return p32(e,t,o);if(n===2)return maj32$1(e,t,o)}common$4.ft_1=ft_1$1;function ch32$1(n,e,t){return n&e^~n&t}common$4.ch32=ch32$1;function maj32$1(n,e,t){return n&e^n&t^e&t}common$4.maj32=maj32$1;function p32(n,e,t){return n^e^t}common$4.p32=p32;function s0_256$1(n){return rotr32(n,2)^rotr32(n,13)^rotr32(n,22)}common$4.s0_256=s0_256$1;function s1_256$1(n){return rotr32(n,6)^rotr32(n,11)^rotr32(n,25)}common$4.s1_256=s1_256$1;function g0_256$1(n){return rotr32(n,7)^rotr32(n,18)^n>>>3}common$4.g0_256=g0_256$1;function g1_256$1(n){return rotr32(n,17)^rotr32(n,19)^n>>>10}common$4.g1_256=g1_256$1;var utils$l=utils$o,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$l.rotl32,sum32$2=utils$l.sum32,sum32_5$1=utils$l.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$l.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function n(e,t){for(var o=this.W,c=0;c<16;c++)o[c]=e[t+c];for(;c<o.length;c++)o[c]=rotl32$1(o[c-3]^o[c-8]^o[c-14]^o[c-16],1);var l=this.h[0],h=this.h[1],d=this.h[2],g=this.h[3],m=this.h[4];for(c=0;c<o.length;c++){var v=~~(c/20),_=sum32_5$1(rotl32$1(l,5),ft_1(v,h,d,g),m,o[c],sha1_K[v]);m=g,g=d,d=rotl32$1(h,30),h=l,l=_}this.h[0]=sum32$2(this.h[0],l),this.h[1]=sum32$2(this.h[1],h),this.h[2]=sum32$2(this.h[2],d),this.h[3]=sum32$2(this.h[3],g),this.h[4]=sum32$2(this.h[4],m)};SHA1.prototype._digest=function n(e){return e==="hex"?utils$l.toHex32(this.h,"big"):utils$l.split32(this.h,"big")};var utils$k=utils$o,common$2=common$5,shaCommon=common$4,assert$d=minimalisticAssert$1,sum32$1=utils$k.sum32,sum32_4$1=utils$k.sum32_4,sum32_5=utils$k.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$k.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function n(e,t){for(var o=this.W,c=0;c<16;c++)o[c]=e[t+c];for(;c<o.length;c++)o[c]=sum32_4$1(g1_256(o[c-2]),o[c-7],g0_256(o[c-15]),o[c-16]);var l=this.h[0],h=this.h[1],d=this.h[2],g=this.h[3],m=this.h[4],v=this.h[5],_=this.h[6],p=this.h[7];for(assert$d(this.k.length===o.length),c=0;c<o.length;c++){var a=sum32_5(p,s1_256(m),ch32(m,v,_),this.k[c],o[c]),u=sum32$1(s0_256(l),maj32(l,h,d));p=_,_=v,v=m,m=sum32$1(g,a),g=d,d=h,h=l,l=sum32$1(a,u)}this.h[0]=sum32$1(this.h[0],l),this.h[1]=sum32$1(this.h[1],h),this.h[2]=sum32$1(this.h[2],d),this.h[3]=sum32$1(this.h[3],g),this.h[4]=sum32$1(this.h[4],m),this.h[5]=sum32$1(this.h[5],v),this.h[6]=sum32$1(this.h[6],_),this.h[7]=sum32$1(this.h[7],p)};SHA256$1.prototype._digest=function n(e){return e==="hex"?utils$k.toHex32(this.h,"big"):utils$k.split32(this.h,"big")};var utils$j=utils$o,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$j.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function n(e){return e==="hex"?utils$j.toHex32(this.h.slice(0,7),"big"):utils$j.split32(this.h.slice(0,7),"big")};var utils$i=utils$o,common$1=common$5,assert$c=minimalisticAssert$1,rotr64_hi=utils$i.rotr64_hi,rotr64_lo=utils$i.rotr64_lo,shr64_hi=utils$i.shr64_hi,shr64_lo=utils$i.shr64_lo,sum64=utils$i.sum64,sum64_hi=utils$i.sum64_hi,sum64_lo=utils$i.sum64_lo,sum64_4_hi=utils$i.sum64_4_hi,sum64_4_lo=utils$i.sum64_4_lo,sum64_5_hi=utils$i.sum64_5_hi,sum64_5_lo=utils$i.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$i.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function n(e,t){for(var o=this.W,c=0;c<32;c++)o[c]=e[t+c];for(;c<o.length;c+=2){var l=g1_512_hi(o[c-4],o[c-3]),h=g1_512_lo(o[c-4],o[c-3]),d=o[c-14],g=o[c-13],m=g0_512_hi(o[c-30],o[c-29]),v=g0_512_lo(o[c-30],o[c-29]),_=o[c-32],p=o[c-31];o[c]=sum64_4_hi(l,h,d,g,m,v,_,p),o[c+1]=sum64_4_lo(l,h,d,g,m,v,_,p)}};SHA512$1.prototype._update=function n(e,t){this._prepareBlock(e,t);var o=this.W,c=this.h[0],l=this.h[1],h=this.h[2],d=this.h[3],g=this.h[4],m=this.h[5],v=this.h[6],_=this.h[7],p=this.h[8],a=this.h[9],u=this.h[10],y=this.h[11],b=this.h[12],w=this.h[13],T=this.h[14],B=this.h[15];assert$c(this.k.length===o.length);for(var H=0;H<o.length;H+=2){var J=T,W=B,fe=s1_512_hi(p,a),re=s1_512_lo(p,a),se=ch64_hi(p,a,u,y,b),ae=ch64_lo(p,a,u,y,b,w),ee=this.k[H],P=this.k[H+1],C=o[H],E=o[H+1],k=sum64_5_hi(J,W,fe,re,se,ae,ee,P,C,E),F=sum64_5_lo(J,W,fe,re,se,ae,ee,P,C,E);J=s0_512_hi(c,l),W=s0_512_lo(c,l),fe=maj64_hi(c,l,h,d,g),re=maj64_lo(c,l,h,d,g,m);var j=sum64_hi(J,W,fe,re),Q=sum64_lo(J,W,fe,re);T=b,B=w,b=u,w=y,u=p,y=a,p=sum64_hi(v,_,k,F),a=sum64_lo(_,_,k,F),v=g,_=m,g=h,m=d,h=c,d=l,c=sum64_hi(k,F,j,Q),l=sum64_lo(k,F,j,Q)}sum64(this.h,0,c,l),sum64(this.h,2,h,d),sum64(this.h,4,g,m),sum64(this.h,6,v,_),sum64(this.h,8,p,a),sum64(this.h,10,u,y),sum64(this.h,12,b,w),sum64(this.h,14,T,B)};SHA512$1.prototype._digest=function n(e){return e==="hex"?utils$i.toHex32(this.h,"big"):utils$i.split32(this.h,"big")};function ch64_hi(n,e,t,o,c){var l=n&t^~n&c;return l<0&&(l+=4294967296),l}function ch64_lo(n,e,t,o,c,l){var h=e&o^~e&l;return h<0&&(h+=4294967296),h}function maj64_hi(n,e,t,o,c){var l=n&t^n&c^t&c;return l<0&&(l+=4294967296),l}function maj64_lo(n,e,t,o,c,l){var h=e&o^e&l^o&l;return h<0&&(h+=4294967296),h}function s0_512_hi(n,e){var t=rotr64_hi(n,e,28),o=rotr64_hi(e,n,2),c=rotr64_hi(e,n,7),l=t^o^c;return l<0&&(l+=4294967296),l}function s0_512_lo(n,e){var t=rotr64_lo(n,e,28),o=rotr64_lo(e,n,2),c=rotr64_lo(e,n,7),l=t^o^c;return l<0&&(l+=4294967296),l}function s1_512_hi(n,e){var t=rotr64_hi(n,e,14),o=rotr64_hi(n,e,18),c=rotr64_hi(e,n,9),l=t^o^c;return l<0&&(l+=4294967296),l}function s1_512_lo(n,e){var t=rotr64_lo(n,e,14),o=rotr64_lo(n,e,18),c=rotr64_lo(e,n,9),l=t^o^c;return l<0&&(l+=4294967296),l}function g0_512_hi(n,e){var t=rotr64_hi(n,e,1),o=rotr64_hi(n,e,8),c=shr64_hi(n,e,7),l=t^o^c;return l<0&&(l+=4294967296),l}function g0_512_lo(n,e){var t=rotr64_lo(n,e,1),o=rotr64_lo(n,e,8),c=shr64_lo(n,e,7),l=t^o^c;return l<0&&(l+=4294967296),l}function g1_512_hi(n,e){var t=rotr64_hi(n,e,19),o=rotr64_hi(e,n,29),c=shr64_hi(n,e,6),l=t^o^c;return l<0&&(l+=4294967296),l}function g1_512_lo(n,e){var t=rotr64_lo(n,e,19),o=rotr64_lo(e,n,29),c=shr64_lo(n,e,6),l=t^o^c;return l<0&&(l+=4294967296),l}var utils$h=utils$o,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$h.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function n(e){return e==="hex"?utils$h.toHex32(this.h.slice(0,12),"big"):utils$h.split32(this.h.slice(0,12),"big")};sha.sha1=_1;sha.sha224=_224;sha.sha256=_256;sha.sha384=_384;sha.sha512=_512;var ripemd={},utils$g=utils$o,common=common$5,rotl32=utils$g.rotl32,sum32=utils$g.sum32,sum32_3=utils$g.sum32_3,sum32_4=utils$g.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$g.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function n(e,t){for(var o=this.h[0],c=this.h[1],l=this.h[2],h=this.h[3],d=this.h[4],g=o,m=c,v=l,_=h,p=d,a=0;a<80;a++){var u=sum32(rotl32(sum32_4(o,f$3(a,c,l,h),e[r$1[a]+t],K(a)),s[a]),d);o=d,d=h,h=rotl32(l,10),l=c,c=u,u=sum32(rotl32(sum32_4(g,f$3(79-a,m,v,_),e[rh[a]+t],Kh(a)),sh[a]),p),g=p,p=_,_=rotl32(v,10),v=m,m=u}u=sum32_3(this.h[1],l,_),this.h[1]=sum32_3(this.h[2],h,p),this.h[2]=sum32_3(this.h[3],d,g),this.h[3]=sum32_3(this.h[4],o,m),this.h[4]=sum32_3(this.h[0],c,v),this.h[0]=u};RIPEMD160.prototype._digest=function n(e){return e==="hex"?utils$g.toHex32(this.h,"little"):utils$g.split32(this.h,"little")};function f$3(n,e,t,o){return n<=15?e^t^o:n<=31?e&t|~e&o:n<=47?(e|~t)^o:n<=63?e&o|t&~o:e^(t|~o)}function K(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function Kh(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var r$1=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$f=utils$o,assert$b=minimalisticAssert$1;function Hmac(n,e,t){if(!(this instanceof Hmac))return new Hmac(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(utils$f.toArray(e,t))}var hmac$1=Hmac;Hmac.prototype._init=function n(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert$b(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function n(e,t){return this.inner.update(e,t),this};Hmac.prototype.digest=function n(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=utils$o,e.common=common$5,e.sha=sha,e.ripemd=ripemd,e.hmac=hmac$1,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash$4);const hash$3=getDefaultExportFromCjs(hash$4);function createCommonjsModule(n,e,t){return t={path:e,exports:{},require:function(o,c){return commonjsRequire(o,c??t.path)}},n(t,t.exports),t.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert$a;function assert$a(n,e){if(!n)throw new Error(e||"Assertion failed")}assert$a.equal=function n(e,t,o){if(e!=t)throw new Error(o||"Assertion failed: "+e+" != "+t)};var utils_1=createCommonjsModule(function(n,e){var t=e;function o(h,d){if(Array.isArray(h))return h.slice();if(!h)return[];var g=[];if(typeof h!="string"){for(var m=0;m<h.length;m++)g[m]=h[m]|0;return g}if(d==="hex"){h=h.replace(/[^a-z0-9]+/ig,""),h.length%2!==0&&(h="0"+h);for(var m=0;m<h.length;m+=2)g.push(parseInt(h[m]+h[m+1],16))}else for(var m=0;m<h.length;m++){var v=h.charCodeAt(m),_=v>>8,p=v&255;_?g.push(_,p):g.push(p)}return g}t.toArray=o;function c(h){return h.length===1?"0"+h:h}t.zero2=c;function l(h){for(var d="",g=0;g<h.length;g++)d+=c(h[g].toString(16));return d}t.toHex=l,t.encode=function(d,g){return g==="hex"?l(d):d}}),utils_1$1=createCommonjsModule(function(n,e){var t=e;t.assert=minimalisticAssert,t.toArray=utils_1.toArray,t.zero2=utils_1.zero2,t.toHex=utils_1.toHex,t.encode=utils_1.encode;function o(g,m,v){var _=new Array(Math.max(g.bitLength(),v)+1);_.fill(0);for(var p=1<<m+1,a=g.clone(),u=0;u<_.length;u++){var y,b=a.andln(p-1);a.isOdd()?(b>(p>>1)-1?y=(p>>1)-b:y=b,a.isubn(y)):y=0,_[u]=y,a.iushrn(1)}return _}t.getNAF=o;function c(g,m){var v=[[],[]];g=g.clone(),m=m.clone();for(var _=0,p=0,a;g.cmpn(-_)>0||m.cmpn(-p)>0;){var u=g.andln(3)+_&3,y=m.andln(3)+p&3;u===3&&(u=-1),y===3&&(y=-1);var b;u&1?(a=g.andln(7)+_&7,(a===3||a===5)&&y===2?b=-u:b=u):b=0,v[0].push(b);var w;y&1?(a=m.andln(7)+p&7,(a===3||a===5)&&u===2?w=-y:w=y):w=0,v[1].push(w),2*_===b+1&&(_=1-_),2*p===w+1&&(p=1-p),g.iushrn(1),m.iushrn(1)}return v}t.getJSF=c;function l(g,m,v){var _="_"+m;g.prototype[m]=function(){return this[_]!==void 0?this[_]:this[_]=v.call(this)}}t.cachedProperty=l;function h(g){return typeof g=="string"?t.toArray(g,"hex"):g}t.parseBytes=h;function d(g){return new BN$9(g,"hex","le")}t.intFromLE=d}),getNAF$1=utils_1$1.getNAF,getJSF$1=utils_1$1.getJSF,assert$1$1=utils_1$1.assert;function BaseCurve$1(n,e){this.type=n,this.p=new BN$9(e.p,16),this.red=e.prime?BN$9.red(e.prime):BN$9.mont(this.p),this.zero=new BN$9(0).toRed(this.red),this.one=new BN$9(1).toRed(this.red),this.two=new BN$9(2).toRed(this.red),this.n=e.n&&new BN$9(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$1=BaseCurve$1;BaseCurve$1.prototype.point=function n(){throw new Error("Not implemented")};BaseCurve$1.prototype.validate=function n(){throw new Error("Not implemented")};BaseCurve$1.prototype._fixedNafMul=function n(e,t){assert$1$1(e.precomputed);var o=e._getDoubles(),c=getNAF$1(t,1,this._bitLength),l=(1<<o.step+1)-(o.step%2===0?2:1);l/=3;var h=[],d,g;for(d=0;d<c.length;d+=o.step){g=0;for(var m=d+o.step-1;m>=d;m--)g=(g<<1)+c[m];h.push(g)}for(var v=this.jpoint(null,null,null),_=this.jpoint(null,null,null),p=l;p>0;p--){for(d=0;d<h.length;d++)g=h[d],g===p?_=_.mixedAdd(o.points[d]):g===-p&&(_=_.mixedAdd(o.points[d].neg()));v=v.add(_)}return v.toP()};BaseCurve$1.prototype._wnafMul=function n(e,t){var o=4,c=e._getNAFPoints(o);o=c.wnd;for(var l=c.points,h=getNAF$1(t,o,this._bitLength),d=this.jpoint(null,null,null),g=h.length-1;g>=0;g--){for(var m=0;g>=0&&h[g]===0;g--)m++;if(g>=0&&m++,d=d.dblp(m),g<0)break;var v=h[g];assert$1$1(v!==0),e.type==="affine"?v>0?d=d.mixedAdd(l[v-1>>1]):d=d.mixedAdd(l[-v-1>>1].neg()):v>0?d=d.add(l[v-1>>1]):d=d.add(l[-v-1>>1].neg())}return e.type==="affine"?d.toP():d};BaseCurve$1.prototype._wnafMulAdd=function n(e,t,o,c,l){var h=this._wnafT1,d=this._wnafT2,g=this._wnafT3,m=0,v,_,p;for(v=0;v<c;v++){p=t[v];var a=p._getNAFPoints(e);h[v]=a.wnd,d[v]=a.points}for(v=c-1;v>=1;v-=2){var u=v-1,y=v;if(h[u]!==1||h[y]!==1){g[u]=getNAF$1(o[u],h[u],this._bitLength),g[y]=getNAF$1(o[y],h[y],this._bitLength),m=Math.max(g[u].length,m),m=Math.max(g[y].length,m);continue}var b=[t[u],null,null,t[y]];t[u].y.cmp(t[y].y)===0?(b[1]=t[u].add(t[y]),b[2]=t[u].toJ().mixedAdd(t[y].neg())):t[u].y.cmp(t[y].y.redNeg())===0?(b[1]=t[u].toJ().mixedAdd(t[y]),b[2]=t[u].add(t[y].neg())):(b[1]=t[u].toJ().mixedAdd(t[y]),b[2]=t[u].toJ().mixedAdd(t[y].neg()));var w=[-3,-1,-5,-7,0,7,5,1,3],T=getJSF$1(o[u],o[y]);for(m=Math.max(T[0].length,m),g[u]=new Array(m),g[y]=new Array(m),_=0;_<m;_++){var B=T[0][_]|0,H=T[1][_]|0;g[u][_]=w[(B+1)*3+(H+1)],g[y][_]=0,d[u]=b}}var J=this.jpoint(null,null,null),W=this._wnafT4;for(v=m;v>=0;v--){for(var fe=0;v>=0;){var re=!0;for(_=0;_<c;_++)W[_]=g[_][v]|0,W[_]!==0&&(re=!1);if(!re)break;fe++,v--}if(v>=0&&fe++,J=J.dblp(fe),v<0)break;for(_=0;_<c;_++){var se=W[_];se!==0&&(se>0?p=d[_][se-1>>1]:se<0&&(p=d[_][-se-1>>1].neg()),p.type==="affine"?J=J.mixedAdd(p):J=J.add(p))}}for(v=0;v<c;v++)d[v]=null;return l?J:J.toP()};function BasePoint$1(n,e){this.curve=n,this.type=e,this.precomputed=null}BaseCurve$1.BasePoint=BasePoint$1;BasePoint$1.prototype.eq=function n(){throw new Error("Not implemented")};BasePoint$1.prototype.validate=function n(){return this.curve.validate(this)};BaseCurve$1.prototype.decodePoint=function n(e,t){e=utils_1$1.toArray(e,t);var o=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*o){e[0]===6?assert$1$1(e[e.length-1]%2===0):e[0]===7&&assert$1$1(e[e.length-1]%2===1);var c=this.point(e.slice(1,1+o),e.slice(1+o,1+2*o));return c}else if((e[0]===2||e[0]===3)&&e.length-1===o)return this.pointFromX(e.slice(1,1+o),e[0]===3);throw new Error("Unknown point format")};BasePoint$1.prototype.encodeCompressed=function n(e){return this.encode(e,!0)};BasePoint$1.prototype._encode=function n(e){var t=this.curve.p.byteLength(),o=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(o):[4].concat(o,this.getY().toArray("be",t))};BasePoint$1.prototype.encode=function n(e,t){return utils_1$1.encode(this._encode(t),e)};BasePoint$1.prototype.precompute=function n(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};BasePoint$1.prototype._hasDoubles=function n(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};BasePoint$1.prototype._getDoubles=function n(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var o=[this],c=this,l=0;l<t;l+=e){for(var h=0;h<e;h++)c=c.dbl();o.push(c)}return{step:e,points:o}};BasePoint$1.prototype._getNAFPoints=function n(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],o=(1<<e)-1,c=o===1?null:this.dbl(),l=1;l<o;l++)t[l]=t[l-1].add(c);return{wnd:e,points:t}};BasePoint$1.prototype._getBeta=function n(){return null};BasePoint$1.prototype.dblp=function n(e){for(var t=this,o=0;o<e;o++)t=t.dbl();return t};var inherits_browser=createCommonjsModule(function(n){typeof Object.create=="function"?n.exports=function(t,o){o&&(t.super_=o,t.prototype=Object.create(o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,o){if(o){t.super_=o;var c=function(){};c.prototype=o.prototype,t.prototype=new c,t.prototype.constructor=t}}}),assert$2$1=utils_1$1.assert;function ShortCurve$1(n){base$1.call(this,"short",n),this.a=new BN$9(n.a,16).toRed(this.red),this.b=new BN$9(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve$1,base$1);var short_1=ShortCurve$1;ShortCurve$1.prototype._getEndomorphism=function n(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,o;if(e.beta)t=new BN$9(e.beta,16).toRed(this.red);else{var c=this._getEndoRoots(this.p);t=c[0].cmp(c[1])<0?c[0]:c[1],t=t.toRed(this.red)}if(e.lambda)o=new BN$9(e.lambda,16);else{var l=this._getEndoRoots(this.n);this.g.mul(l[0]).x.cmp(this.g.x.redMul(t))===0?o=l[0]:(o=l[1],assert$2$1(this.g.mul(o).x.cmp(this.g.x.redMul(t))===0))}var h;return e.basis?h=e.basis.map(function(d){return{a:new BN$9(d.a,16),b:new BN$9(d.b,16)}}):h=this._getEndoBasis(o),{beta:t,lambda:o,basis:h}}};ShortCurve$1.prototype._getEndoRoots=function n(e){var t=e===this.p?this.red:BN$9.mont(e),o=new BN$9(2).toRed(t).redInvm(),c=o.redNeg(),l=new BN$9(3).toRed(t).redNeg().redSqrt().redMul(o),h=c.redAdd(l).fromRed(),d=c.redSub(l).fromRed();return[h,d]};ShortCurve$1.prototype._getEndoBasis=function n(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),o=e,c=this.n.clone(),l=new BN$9(1),h=new BN$9(0),d=new BN$9(0),g=new BN$9(1),m,v,_,p,a,u,y,b=0,w,T;o.cmpn(0)!==0;){var B=c.div(o);w=c.sub(B.mul(o)),T=d.sub(B.mul(l));var H=g.sub(B.mul(h));if(!_&&w.cmp(t)<0)m=y.neg(),v=l,_=w.neg(),p=T;else if(_&&++b===2)break;y=w,c=o,o=w,d=l,l=T,g=h,h=H}a=w.neg(),u=T;var J=_.sqr().add(p.sqr()),W=a.sqr().add(u.sqr());return W.cmp(J)>=0&&(a=m,u=v),_.negative&&(_=_.neg(),p=p.neg()),a.negative&&(a=a.neg(),u=u.neg()),[{a:_,b:p},{a,b:u}]};ShortCurve$1.prototype._endoSplit=function n(e){var t=this.endo.basis,o=t[0],c=t[1],l=c.b.mul(e).divRound(this.n),h=o.b.neg().mul(e).divRound(this.n),d=l.mul(o.a),g=h.mul(c.a),m=l.mul(o.b),v=h.mul(c.b),_=e.sub(d).sub(g),p=m.add(v).neg();return{k1:_,k2:p}};ShortCurve$1.prototype.pointFromX=function n(e,t){e=new BN$9(e,16),e.red||(e=e.toRed(this.red));var o=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),c=o.redSqrt();if(c.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var l=c.fromRed().isOdd();return(t&&!l||!t&&l)&&(c=c.redNeg()),this.point(e,c)};ShortCurve$1.prototype.validate=function n(e){if(e.inf)return!0;var t=e.x,o=e.y,c=this.a.redMul(t),l=t.redSqr().redMul(t).redIAdd(c).redIAdd(this.b);return o.redSqr().redISub(l).cmpn(0)===0};ShortCurve$1.prototype._endoWnafMulAdd=function n(e,t,o){for(var c=this._endoWnafT1,l=this._endoWnafT2,h=0;h<e.length;h++){var d=this._endoSplit(t[h]),g=e[h],m=g._getBeta();d.k1.negative&&(d.k1.ineg(),g=g.neg(!0)),d.k2.negative&&(d.k2.ineg(),m=m.neg(!0)),c[h*2]=g,c[h*2+1]=m,l[h*2]=d.k1,l[h*2+1]=d.k2}for(var v=this._wnafMulAdd(1,c,l,h*2,o),_=0;_<h*2;_++)c[_]=null,l[_]=null;return v};function Point$3(n,e,t,o){base$1.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$9(e,16),this.y=new BN$9(t,16),o&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits_browser(Point$3,base$1.BasePoint);ShortCurve$1.prototype.point=function n(e,t,o){return new Point$3(this,e,t,o)};ShortCurve$1.prototype.pointFromJSON=function n(e,t){return Point$3.fromJSON(this,e,t)};Point$3.prototype._getBeta=function n(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var o=this.curve,c=function(l){return o.point(l.x.redMul(o.endo.beta),l.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(c)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(c)}}}return t}};Point$3.prototype.toJSON=function n(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$3.fromJSON=function n(e,t,o){typeof t=="string"&&(t=JSON.parse(t));var c=e.point(t[0],t[1],o);if(!t[2])return c;function l(d){return e.point(d[0],d[1],o)}var h=t[2];return c.precomputed={beta:null,doubles:h.doubles&&{step:h.doubles.step,points:[c].concat(h.doubles.points.map(l))},naf:h.naf&&{wnd:h.naf.wnd,points:[c].concat(h.naf.points.map(l))}},c};Point$3.prototype.inspect=function n(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$3.prototype.isInfinity=function n(){return this.inf};Point$3.prototype.add=function n(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var o=t.redSqr().redISub(this.x).redISub(e.x),c=t.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,c)};Point$3.prototype.dbl=function n(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,o=this.x.redSqr(),c=e.redInvm(),l=o.redAdd(o).redIAdd(o).redIAdd(t).redMul(c),h=l.redSqr().redISub(this.x.redAdd(this.x)),d=l.redMul(this.x.redSub(h)).redISub(this.y);return this.curve.point(h,d)};Point$3.prototype.getX=function n(){return this.x.fromRed()};Point$3.prototype.getY=function n(){return this.y.fromRed()};Point$3.prototype.mul=function n(e){return e=new BN$9(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$3.prototype.mulAdd=function n(e,t,o){var c=[this,t],l=[e,o];return this.curve.endo?this.curve._endoWnafMulAdd(c,l):this.curve._wnafMulAdd(1,c,l,2)};Point$3.prototype.jmulAdd=function n(e,t,o){var c=[this,t],l=[e,o];return this.curve.endo?this.curve._endoWnafMulAdd(c,l,!0):this.curve._wnafMulAdd(1,c,l,2,!0)};Point$3.prototype.eq=function n(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$3.prototype.neg=function n(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var o=this.precomputed,c=function(l){return l.neg()};t.precomputed={naf:o.naf&&{wnd:o.naf.wnd,points:o.naf.points.map(c)},doubles:o.doubles&&{step:o.doubles.step,points:o.doubles.points.map(c)}}}return t};Point$3.prototype.toJ=function n(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint$1(n,e,t,o){base$1.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&o===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$9(0)):(this.x=new BN$9(e,16),this.y=new BN$9(t,16),this.z=new BN$9(o,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits_browser(JPoint$1,base$1.BasePoint);ShortCurve$1.prototype.jpoint=function n(e,t,o){return new JPoint$1(this,e,t,o)};JPoint$1.prototype.toP=function n(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),o=this.x.redMul(t),c=this.y.redMul(t).redMul(e);return this.curve.point(o,c)};JPoint$1.prototype.neg=function n(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint$1.prototype.add=function n(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),o=this.z.redSqr(),c=this.x.redMul(t),l=e.x.redMul(o),h=this.y.redMul(t.redMul(e.z)),d=e.y.redMul(o.redMul(this.z)),g=c.redSub(l),m=h.redSub(d);if(g.cmpn(0)===0)return m.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=g.redSqr(),_=v.redMul(g),p=c.redMul(v),a=m.redSqr().redIAdd(_).redISub(p).redISub(p),u=m.redMul(p.redISub(a)).redISub(h.redMul(_)),y=this.z.redMul(e.z).redMul(g);return this.curve.jpoint(a,u,y)};JPoint$1.prototype.mixedAdd=function n(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),o=this.x,c=e.x.redMul(t),l=this.y,h=e.y.redMul(t).redMul(this.z),d=o.redSub(c),g=l.redSub(h);if(d.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var m=d.redSqr(),v=m.redMul(d),_=o.redMul(m),p=g.redSqr().redIAdd(v).redISub(_).redISub(_),a=g.redMul(_.redISub(p)).redISub(l.redMul(v)),u=this.z.redMul(d);return this.curve.jpoint(p,a,u)};JPoint$1.prototype.dblp=function n(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var o=this;for(t=0;t<e;t++)o=o.dbl();return o}var c=this.curve.a,l=this.curve.tinv,h=this.x,d=this.y,g=this.z,m=g.redSqr().redSqr(),v=d.redAdd(d);for(t=0;t<e;t++){var _=h.redSqr(),p=v.redSqr(),a=p.redSqr(),u=_.redAdd(_).redIAdd(_).redIAdd(c.redMul(m)),y=h.redMul(p),b=u.redSqr().redISub(y.redAdd(y)),w=y.redISub(b),T=u.redMul(w);T=T.redIAdd(T).redISub(a);var B=v.redMul(g);t+1<e&&(m=m.redMul(a)),h=b,g=B,v=T}return this.curve.jpoint(h,v.redMul(l),g)};JPoint$1.prototype.dbl=function n(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint$1.prototype._zeroDbl=function n(){var e,t,o;if(this.zOne){var c=this.x.redSqr(),l=this.y.redSqr(),h=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(c).redISub(h);d=d.redIAdd(d);var g=c.redAdd(c).redIAdd(c),m=g.redSqr().redISub(d).redISub(d),v=h.redIAdd(h);v=v.redIAdd(v),v=v.redIAdd(v),e=m,t=g.redMul(d.redISub(m)).redISub(v),o=this.y.redAdd(this.y)}else{var _=this.x.redSqr(),p=this.y.redSqr(),a=p.redSqr(),u=this.x.redAdd(p).redSqr().redISub(_).redISub(a);u=u.redIAdd(u);var y=_.redAdd(_).redIAdd(_),b=y.redSqr(),w=a.redIAdd(a);w=w.redIAdd(w),w=w.redIAdd(w),e=b.redISub(u).redISub(u),t=y.redMul(u.redISub(e)).redISub(w),o=this.y.redMul(this.z),o=o.redIAdd(o)}return this.curve.jpoint(e,t,o)};JPoint$1.prototype._threeDbl=function n(){var e,t,o;if(this.zOne){var c=this.x.redSqr(),l=this.y.redSqr(),h=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(c).redISub(h);d=d.redIAdd(d);var g=c.redAdd(c).redIAdd(c).redIAdd(this.curve.a),m=g.redSqr().redISub(d).redISub(d);e=m;var v=h.redIAdd(h);v=v.redIAdd(v),v=v.redIAdd(v),t=g.redMul(d.redISub(m)).redISub(v),o=this.y.redAdd(this.y)}else{var _=this.z.redSqr(),p=this.y.redSqr(),a=this.x.redMul(p),u=this.x.redSub(_).redMul(this.x.redAdd(_));u=u.redAdd(u).redIAdd(u);var y=a.redIAdd(a);y=y.redIAdd(y);var b=y.redAdd(y);e=u.redSqr().redISub(b),o=this.y.redAdd(this.z).redSqr().redISub(p).redISub(_);var w=p.redSqr();w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w),t=u.redMul(y.redISub(e)).redISub(w)}return this.curve.jpoint(e,t,o)};JPoint$1.prototype._dbl=function n(){var e=this.curve.a,t=this.x,o=this.y,c=this.z,l=c.redSqr().redSqr(),h=t.redSqr(),d=o.redSqr(),g=h.redAdd(h).redIAdd(h).redIAdd(e.redMul(l)),m=t.redAdd(t);m=m.redIAdd(m);var v=m.redMul(d),_=g.redSqr().redISub(v.redAdd(v)),p=v.redISub(_),a=d.redSqr();a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);var u=g.redMul(p).redISub(a),y=o.redAdd(o).redMul(c);return this.curve.jpoint(_,u,y)};JPoint$1.prototype.trpl=function n(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),o=this.z.redSqr(),c=t.redSqr(),l=e.redAdd(e).redIAdd(e),h=l.redSqr(),d=this.x.redAdd(t).redSqr().redISub(e).redISub(c);d=d.redIAdd(d),d=d.redAdd(d).redIAdd(d),d=d.redISub(h);var g=d.redSqr(),m=c.redIAdd(c);m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var v=l.redIAdd(d).redSqr().redISub(h).redISub(g).redISub(m),_=t.redMul(v);_=_.redIAdd(_),_=_.redIAdd(_);var p=this.x.redMul(g).redISub(_);p=p.redIAdd(p),p=p.redIAdd(p);var a=this.y.redMul(v.redMul(m.redISub(v)).redISub(d.redMul(g)));a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);var u=this.z.redAdd(d).redSqr().redISub(o).redISub(g);return this.curve.jpoint(p,a,u)};JPoint$1.prototype.mul=function n(e,t){return e=new BN$9(e,t),this.curve._wnafMul(this,e)};JPoint$1.prototype.eq=function n(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),o=e.z.redSqr();if(this.x.redMul(o).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var c=t.redMul(this.z),l=o.redMul(e.z);return this.y.redMul(l).redISub(e.y.redMul(c)).cmpn(0)===0};JPoint$1.prototype.eqXToP=function n(e){var t=this.z.redSqr(),o=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(o)===0)return!0;for(var c=e.clone(),l=this.curve.redN.redMul(t);;){if(c.iadd(this.curve.n),c.cmp(this.curve.p)>=0)return!1;if(o.redIAdd(l),this.x.cmp(o)===0)return!0}};JPoint$1.prototype.inspect=function n(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint$1.prototype.isInfinity=function n(){return this.z.cmpn(0)===0};var curve_1=createCommonjsModule(function(n,e){var t=e;t.base=base$1,t.short=short_1,t.mont=null,t.edwards=null}),curves_1=createCommonjsModule(function(n,e){var t=e,o=utils_1$1.assert;function c(d){d.type==="short"?this.curve=new curve_1.short(d):d.type==="edwards"?this.curve=new curve_1.edwards(d):this.curve=new curve_1.mont(d),this.g=this.curve.g,this.n=this.curve.n,this.hash=d.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=c;function l(d,g){Object.defineProperty(t,d,{configurable:!0,enumerable:!0,get:function(){var m=new c(g);return Object.defineProperty(t,d,{configurable:!0,enumerable:!0,value:m}),m}})}l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash$3.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash$3.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash$3.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash$3.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash$3.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var h;try{h=null.crash()}catch{h=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash$3.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",h]})});function HmacDRBG$2(n){if(!(this instanceof HmacDRBG$2))return new HmacDRBG$2(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils_1.toArray(n.entropy,n.entropyEnc||"hex"),t=utils_1.toArray(n.nonce,n.nonceEnc||"hex"),o=utils_1.toArray(n.pers,n.persEnc||"hex");minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,o)}var hmacDrbg$1=HmacDRBG$2;HmacDRBG$2.prototype._init=function n(e,t,o){var c=e.concat(t).concat(o);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var l=0;l<this.V.length;l++)this.K[l]=0,this.V[l]=1;this._update(c),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$2.prototype._hmac=function n(){return new hash$3.hmac(this.hash,this.K)};HmacDRBG$2.prototype._update=function n(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$2.prototype.reseed=function n(e,t,o,c){typeof t!="string"&&(c=o,o=t,t=null),e=utils_1.toArray(e,t),o=utils_1.toArray(o,c),minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(o||[])),this._reseed=1};HmacDRBG$2.prototype.generate=function n(e,t,o,c){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(c=o,o=t,t=null),o&&(o=utils_1.toArray(o,c||"hex"),this._update(o));for(var l=[];l.length<e;)this.V=this._hmac().update(this.V).digest(),l=l.concat(this.V);var h=l.slice(0,e);return this._update(o),this._reseed++,utils_1.encode(h,t)};var assert$3$1=utils_1$1.assert;function KeyPair$4(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$3=KeyPair$4;KeyPair$4.fromPublic=function n(e,t,o){return t instanceof KeyPair$4?t:new KeyPair$4(e,{pub:t,pubEnc:o})};KeyPair$4.fromPrivate=function n(e,t,o){return t instanceof KeyPair$4?t:new KeyPair$4(e,{priv:t,privEnc:o})};KeyPair$4.prototype.validate=function n(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$4.prototype.getPublic=function n(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};KeyPair$4.prototype.getPrivate=function n(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$4.prototype._importPrivate=function n(e,t){this.priv=new BN$9(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$4.prototype._importPublic=function n(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?assert$3$1(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$3$1(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};KeyPair$4.prototype.derive=function n(e){return e.validate()||assert$3$1(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$4.prototype.sign=function n(e,t,o){return this.ec.sign(e,this,t,o)};KeyPair$4.prototype.verify=function n(e,t){return this.ec.verify(e,t,this)};KeyPair$4.prototype.inspect=function n(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4$1=utils_1$1.assert;function Signature$4(n,e){if(n instanceof Signature$4)return n;this._importDER(n,e)||(assert$4$1(n.r&&n.s,"Signature without r or s"),this.r=new BN$9(n.r,16),this.s=new BN$9(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var signature$2=Signature$4;function Position$1(){this.place=0}function getLength$1(n,e){var t=n[e.place++];if(!(t&128))return t;var o=t&15;if(o===0||o>4)return!1;for(var c=0,l=0,h=e.place;l<o;l++,h++)c<<=8,c|=n[h],c>>>=0;return c<=127?!1:(e.place=h,c)}function rmPadding$1(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}Signature$4.prototype._importDER=function n(e,t){e=utils_1$1.toArray(e,t);var o=new Position$1;if(e[o.place++]!==48)return!1;var c=getLength$1(e,o);if(c===!1||c+o.place!==e.length||e[o.place++]!==2)return!1;var l=getLength$1(e,o);if(l===!1)return!1;var h=e.slice(o.place,l+o.place);if(o.place+=l,e[o.place++]!==2)return!1;var d=getLength$1(e,o);if(d===!1||e.length!==d+o.place)return!1;var g=e.slice(o.place,d+o.place);if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;if(g[0]===0)if(g[1]&128)g=g.slice(1);else return!1;return this.r=new BN$9(h),this.s=new BN$9(g),this.recoveryParam=null,!0};function constructLength$1(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}Signature$4.prototype.toDER=function n(e){var t=this.r.toArray(),o=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),o[0]&128&&(o=[0].concat(o)),t=rmPadding$1(t),o=rmPadding$1(o);!o[0]&&!(o[1]&128);)o=o.slice(1);var c=[2];constructLength$1(c,t.length),c=c.concat(t),c.push(2),constructLength$1(c,o.length);var l=c.concat(o),h=[48];return constructLength$1(h,l.length),h=h.concat(l),utils_1$1.encode(h,e)};var rand$1=function(){throw new Error("unsupported")},assert$5$1=utils_1$1.assert;function EC$1(n){if(!(this instanceof EC$1))return new EC$1(n);typeof n=="string"&&(assert$5$1(Object.prototype.hasOwnProperty.call(curves_1,n),"Unknown curve "+n),n=curves_1[n]),n instanceof curves_1.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var ec$2=EC$1;EC$1.prototype.keyPair=function n(e){return new key$3(this,e)};EC$1.prototype.keyFromPrivate=function n(e,t){return key$3.fromPrivate(this,e,t)};EC$1.prototype.keyFromPublic=function n(e,t){return key$3.fromPublic(this,e,t)};EC$1.prototype.genKeyPair=function n(e){e||(e={});for(var t=new hmacDrbg$1({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rand$1(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),o=this.n.byteLength(),c=this.n.sub(new BN$9(2));;){var l=new BN$9(t.generate(o));if(!(l.cmp(c)>0))return l.iaddn(1),this.keyFromPrivate(l)}};EC$1.prototype._truncateToN=function n(e,t){var o=e.byteLength()*8-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};EC$1.prototype.sign=function n(e,t,o,c){typeof o=="object"&&(c=o,o=null),c||(c={}),t=this.keyFromPrivate(t,o),e=this._truncateToN(new BN$9(e,16));for(var l=this.n.byteLength(),h=t.getPrivate().toArray("be",l),d=e.toArray("be",l),g=new hmacDrbg$1({hash:this.hash,entropy:h,nonce:d,pers:c.pers,persEnc:c.persEnc||"utf8"}),m=this.n.sub(new BN$9(1)),v=0;;v++){var _=c.k?c.k(v):new BN$9(g.generate(this.n.byteLength()));if(_=this._truncateToN(_,!0),!(_.cmpn(1)<=0||_.cmp(m)>=0)){var p=this.g.mul(_);if(!p.isInfinity()){var a=p.getX(),u=a.umod(this.n);if(u.cmpn(0)!==0){var y=_.invm(this.n).mul(u.mul(t.getPrivate()).iadd(e));if(y=y.umod(this.n),y.cmpn(0)!==0){var b=(p.getY().isOdd()?1:0)|(a.cmp(u)!==0?2:0);return c.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),b^=1),new signature$2({r:u,s:y,recoveryParam:b})}}}}}};EC$1.prototype.verify=function n(e,t,o,c){e=this._truncateToN(new BN$9(e,16)),o=this.keyFromPublic(o,c),t=new signature$2(t,"hex");var l=t.r,h=t.s;if(l.cmpn(1)<0||l.cmp(this.n)>=0||h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;var d=h.invm(this.n),g=d.mul(e).umod(this.n),m=d.mul(l).umod(this.n),v;return this.curve._maxwellTrick?(v=this.g.jmulAdd(g,o.getPublic(),m),v.isInfinity()?!1:v.eqXToP(l)):(v=this.g.mulAdd(g,o.getPublic(),m),v.isInfinity()?!1:v.getX().umod(this.n).cmp(l)===0)};EC$1.prototype.recoverPubKey=function(n,e,t,o){assert$5$1((3&t)===t,"The recovery param is more than two bits"),e=new signature$2(e,o);var c=this.n,l=new BN$9(n),h=e.r,d=e.s,g=t&1,m=t>>1;if(h.cmp(this.curve.p.umod(this.curve.n))>=0&&m)throw new Error("Unable to find sencond key candinate");m?h=this.curve.pointFromX(h.add(this.curve.n),g):h=this.curve.pointFromX(h,g);var v=e.r.invm(c),_=c.sub(l).mul(v).umod(c),p=d.mul(v).umod(c);return this.g.mulAdd(_,h,p)};EC$1.prototype.getKeyRecoveryParam=function(n,e,t,o){if(e=new signature$2(e,o),e.recoveryParam!==null)return e.recoveryParam;for(var c=0;c<4;c++){var l;try{l=this.recoverPubKey(n,e,c)}catch{continue}if(l.eq(t))return c}throw new Error("Unable to find valid recovery factor")};var elliptic_1=createCommonjsModule(function(n,e){var t=e;t.version="6.5.4",t.utils=utils_1$1,t.rand=function(){throw new Error("unsupported")},t.curve=curve_1,t.curves=curves_1,t.ec=ec$2,t.eddsa=null}),EC$1$1=elliptic_1.ec;const version$c="signing-key/5.7.0",logger$f=new Logger(version$c);let _curve=null;function getCurve(){return _curve||(_curve=new EC$1$1("secp256k1")),_curve}class SigningKey{constructor(e){defineReadOnly(this,"curve","secp256k1"),defineReadOnly(this,"privateKey",hexlify(e)),hexDataLength(this.privateKey)!==32&&logger$f.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+t.getPublic(!1,"hex")),defineReadOnly(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),defineReadOnly(this,"_isSigningKey",!0)}_addPoint(e){const t=getCurve().keyFromPublic(arrayify(this.publicKey)),o=getCurve().keyFromPublic(arrayify(e));return"0x"+t.pub.add(o.pub).encodeCompressed("hex")}signDigest(e){const t=getCurve().keyFromPrivate(arrayify(this.privateKey)),o=arrayify(e);o.length!==32&&logger$f.throwArgumentError("bad digest length","digest",e);const c=t.sign(o,{canonical:!0});return splitSignature({recoveryParam:c.recoveryParam,r:hexZeroPad("0x"+c.r.toString(16),32),s:hexZeroPad("0x"+c.s.toString(16),32)})}computeSharedSecret(e){const t=getCurve().keyFromPrivate(arrayify(this.privateKey)),o=getCurve().keyFromPublic(arrayify(computePublicKey(e)));return hexZeroPad("0x"+t.derive(o.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function recoverPublicKey(n,e){const t=splitSignature(e),o={r:arrayify(t.r),s:arrayify(t.s)};return"0x"+getCurve().recoverPubKey(arrayify(n),o,t.recoveryParam).encode("hex",!1)}function computePublicKey(n,e){const t=arrayify(n);if(t.length===32){const o=new SigningKey(t);return e?"0x"+getCurve().keyFromPrivate(t).getPublic(!0,"hex"):o.publicKey}else{if(t.length===33)return e?hexlify(t):"0x"+getCurve().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+getCurve().keyFromPublic(t).getPublic(!0,"hex"):hexlify(t)}return logger$f.throwArgumentError("invalid public or private key","key","[REDACTED]")}const version$b="transactions/5.7.0",logger$e=new Logger(version$b);var TransactionTypes;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));function handleAddress(n){return n==="0x"?null:getAddress(n)}function handleNumber(n){return n==="0x"?Zero$1:BigNumber$1.from(n)}const transactionFields=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],allowedTransactionKeys$1={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function computeAddress(n){const e=computePublicKey(n);return getAddress(hexDataSlice(keccak256$2(hexDataSlice(e,1)),12))}function recoverAddress(n,e){return computeAddress(recoverPublicKey(arrayify(n),e))}function formatNumber(n,e){const t=stripZeros(BigNumber$1.from(n).toHexString());return t.length>32&&logger$e.throwArgumentError("invalid length for "+e,"transaction:"+e,n),t}function accessSetify(n,e){return{address:getAddress(n),storageKeys:(e||[]).map((t,o)=>(hexDataLength(t)!==32&&logger$e.throwArgumentError("invalid access list storageKey",`accessList[${n}:${o}]`,t),t.toLowerCase()))}}function accessListify(n){if(Array.isArray(n))return n.map((t,o)=>Array.isArray(t)?(t.length>2&&logger$e.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${o}]`,t),accessSetify(t[0],t[1])):accessSetify(t.address,t.storageKeys));const e=Object.keys(n).map(t=>{const o=n[t].reduce((c,l)=>(c[l]=!0,c),{});return accessSetify(t,Object.keys(o).sort())});return e.sort((t,o)=>t.address.localeCompare(o.address)),e}function formatAccessList(n){return accessListify(n).map(e=>[e.address,e.storageKeys])}function _serializeEip1559(n,e){if(n.gasPrice!=null){const o=BigNumber$1.from(n.gasPrice),c=BigNumber$1.from(n.maxFeePerGas||0);o.eq(c)||logger$e.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:o,maxFeePerGas:c})}const t=[formatNumber(n.chainId||0,"chainId"),formatNumber(n.nonce||0,"nonce"),formatNumber(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(n.maxFeePerGas||0,"maxFeePerGas"),formatNumber(n.gasLimit||0,"gasLimit"),n.to!=null?getAddress(n.to):"0x",formatNumber(n.value||0,"value"),n.data||"0x",formatAccessList(n.accessList||[])];if(e){const o=splitSignature(e);t.push(formatNumber(o.recoveryParam,"recoveryParam")),t.push(stripZeros(o.r)),t.push(stripZeros(o.s))}return hexConcat(["0x02",encode$8(t)])}function _serializeEip2930(n,e){const t=[formatNumber(n.chainId||0,"chainId"),formatNumber(n.nonce||0,"nonce"),formatNumber(n.gasPrice||0,"gasPrice"),formatNumber(n.gasLimit||0,"gasLimit"),n.to!=null?getAddress(n.to):"0x",formatNumber(n.value||0,"value"),n.data||"0x",formatAccessList(n.accessList||[])];if(e){const o=splitSignature(e);t.push(formatNumber(o.recoveryParam,"recoveryParam")),t.push(stripZeros(o.r)),t.push(stripZeros(o.s))}return hexConcat(["0x01",encode$8(t)])}function _serialize(n,e){checkProperties(n,allowedTransactionKeys$1);const t=[];transactionFields.forEach(function(h){let d=n[h.name]||[];const g={};h.numeric&&(g.hexPad="left"),d=arrayify(hexlify(d,g)),h.length&&d.length!==h.length&&d.length>0&&logger$e.throwArgumentError("invalid length for "+h.name,"transaction:"+h.name,d),h.maxLength&&(d=stripZeros(d),d.length>h.maxLength&&logger$e.throwArgumentError("invalid length for "+h.name,"transaction:"+h.name,d)),t.push(hexlify(d))});let o=0;if(n.chainId!=null?(o=n.chainId,typeof o!="number"&&logger$e.throwArgumentError("invalid transaction.chainId","transaction",n)):e&&!isBytesLike(e)&&e.v>28&&(o=Math.floor((e.v-35)/2)),o!==0&&(t.push(hexlify(o)),t.push("0x"),t.push("0x")),!e)return encode$8(t);const c=splitSignature(e);let l=27+c.recoveryParam;return o!==0?(t.pop(),t.pop(),t.pop(),l+=o*2+8,c.v>28&&c.v!==l&&logger$e.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):c.v!==l&&logger$e.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),t.push(hexlify(l)),t.push(stripZeros(arrayify(c.r))),t.push(stripZeros(arrayify(c.s))),encode$8(t)}function serialize(n,e){if(n.type==null||n.type===0)return n.accessList!=null&&logger$e.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",n),_serialize(n,e);switch(n.type){case 1:return _serializeEip2930(n,e);case 2:return _serializeEip1559(n,e)}return logger$e.throwError(`unsupported transaction type: ${n.type}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:n.type})}function _parseEipSignature(n,e,t){try{const o=handleNumber(e[0]).toNumber();if(o!==0&&o!==1)throw new Error("bad recid");n.v=o}catch{logger$e.throwArgumentError("invalid v for transaction type: 1","v",e[0])}n.r=hexZeroPad(e[1],32),n.s=hexZeroPad(e[2],32);try{const o=keccak256$2(t(n));n.from=recoverAddress(o,{r:n.r,s:n.s,recoveryParam:n.v})}catch{}}function _parseEip1559(n){const e=decode$8(n.slice(1));e.length!==9&&e.length!==12&&logger$e.throwArgumentError("invalid component count for transaction type: 2","payload",hexlify(n));const t=handleNumber(e[2]),o=handleNumber(e[3]),c={type:2,chainId:handleNumber(e[0]).toNumber(),nonce:handleNumber(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:o,gasPrice:null,gasLimit:handleNumber(e[4]),to:handleAddress(e[5]),value:handleNumber(e[6]),data:e[7],accessList:accessListify(e[8])};return e.length===9||(c.hash=keccak256$2(n),_parseEipSignature(c,e.slice(9),_serializeEip1559)),c}function _parseEip2930(n){const e=decode$8(n.slice(1));e.length!==8&&e.length!==11&&logger$e.throwArgumentError("invalid component count for transaction type: 1","payload",hexlify(n));const t={type:1,chainId:handleNumber(e[0]).toNumber(),nonce:handleNumber(e[1]).toNumber(),gasPrice:handleNumber(e[2]),gasLimit:handleNumber(e[3]),to:handleAddress(e[4]),value:handleNumber(e[5]),data:e[6],accessList:accessListify(e[7])};return e.length===8||(t.hash=keccak256$2(n),_parseEipSignature(t,e.slice(8),_serializeEip2930)),t}function _parse(n){const e=decode$8(n);e.length!==9&&e.length!==6&&logger$e.throwArgumentError("invalid raw transaction","rawTransaction",n);const t={nonce:handleNumber(e[0]).toNumber(),gasPrice:handleNumber(e[1]),gasLimit:handleNumber(e[2]),to:handleAddress(e[3]),value:handleNumber(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=BigNumber$1.from(e[6]).toNumber()}catch{return t}if(t.r=hexZeroPad(e[7],32),t.s=hexZeroPad(e[8],32),BigNumber$1.from(t.r).isZero()&&BigNumber$1.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let o=t.v-27;const c=e.slice(0,6);t.chainId!==0&&(c.push(hexlify(t.chainId)),c.push("0x"),c.push("0x"),o-=t.chainId*2+8);const l=keccak256$2(encode$8(c));try{t.from=recoverAddress(l,{r:hexlify(t.r),s:hexlify(t.s),recoveryParam:o})}catch{}t.hash=keccak256$2(n)}return t.type=null,t}function parse(n){const e=arrayify(n);if(e[0]>127)return _parse(e);switch(e[0]){case 1:return _parseEip2930(e);case 2:return _parseEip1559(e)}return logger$e.throwError(`unsupported transaction type: ${e[0]}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const version$a="contracts/5.7.0";var __awaiter$6=globalThis&&globalThis.__awaiter||function(n,e,t,o){function c(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(v){try{m(o.next(v))}catch(_){h(_)}}function g(v){try{m(o.throw(v))}catch(_){h(_)}}function m(v){v.done?l(v.value):c(v.value).then(d,g)}m((o=o.apply(n,e||[])).next())})};const logger$d=new Logger(version$a);function resolveName(n,e){return __awaiter$6(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&logger$d.throwArgumentError("invalid address or ENS name","name",t);try{return getAddress(t)}catch{}n||logger$d.throwError("a provider or signer is needed to resolve ENS names",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const o=yield n.resolveName(t);return o==null&&logger$d.throwArgumentError("resolver or addr is not configured for ENS name","name",t),o})}function resolveAddresses(n,e,t){return __awaiter$6(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((o,c)=>resolveAddresses(n,Array.isArray(e)?e[c]:e[o.name],o))):t.type==="address"?yield resolveName(n,e):t.type==="tuple"?yield resolveAddresses(n,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(o=>resolveAddresses(n,o,t.arrayChildren))):Promise.reject(logger$d.makeError("invalid value for array",Logger.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function populateTransaction(n,e,t){return __awaiter$6(this,void 0,void 0,function*(){let o={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(o=shallowCopy(t.pop())),logger$d.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?o.from?o.from=resolveProperties({override:resolveName(n.signer,o.from),signer:n.signer.getAddress()}).then(m=>__awaiter$6(this,void 0,void 0,function*(){return getAddress(m.signer)!==m.override&&logger$d.throwError("Contract with a Signer cannot override from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),m.override})):o.from=n.signer.getAddress():o.from&&(o.from=resolveName(n.provider,o.from));const c=yield resolveProperties({args:resolveAddresses(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:resolveProperties(o)||{}}),l=n.interface.encodeFunctionData(e,c.args),h={data:l,to:c.address},d=c.overrides;if(d.nonce!=null&&(h.nonce=BigNumber$1.from(d.nonce).toNumber()),d.gasLimit!=null&&(h.gasLimit=BigNumber$1.from(d.gasLimit)),d.gasPrice!=null&&(h.gasPrice=BigNumber$1.from(d.gasPrice)),d.maxFeePerGas!=null&&(h.maxFeePerGas=BigNumber$1.from(d.maxFeePerGas)),d.maxPriorityFeePerGas!=null&&(h.maxPriorityFeePerGas=BigNumber$1.from(d.maxPriorityFeePerGas)),d.from!=null&&(h.from=d.from),d.type!=null&&(h.type=d.type),d.accessList!=null&&(h.accessList=accessListify(d.accessList)),h.gasLimit==null&&e.gas!=null){let m=21e3;const v=arrayify(l);for(let _=0;_<v.length;_++)m+=4,v[_]&&(m+=64);h.gasLimit=BigNumber$1.from(e.gas).add(m)}if(d.value){const m=BigNumber$1.from(d.value);!m.isZero()&&!e.payable&&logger$d.throwError("non-payable method cannot override value",Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:o.value}),h.value=m}d.customData&&(h.customData=shallowCopy(d.customData)),d.ccipReadEnabled&&(h.ccipReadEnabled=!!d.ccipReadEnabled),delete o.nonce,delete o.gasLimit,delete o.gasPrice,delete o.from,delete o.value,delete o.type,delete o.accessList,delete o.maxFeePerGas,delete o.maxPriorityFeePerGas,delete o.customData,delete o.ccipReadEnabled;const g=Object.keys(o).filter(m=>o[m]!=null);return g.length&&logger$d.throwError(`cannot override ${g.map(m=>JSON.stringify(m)).join(",")}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:g}),h})}function buildPopulate(n,e){return function(...t){return populateTransaction(n,e,t)}}function buildEstimate(n,e){const t=n.signer||n.provider;return function(...o){return __awaiter$6(this,void 0,void 0,function*(){t||logger$d.throwError("estimate require a provider or signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const c=yield populateTransaction(n,e,o);return yield t.estimateGas(c)})}}function addContractWait(n,e){const t=e.wait.bind(e);e.wait=o=>t(o).then(c=>(c.events=c.logs.map(l=>{let h=deepCopy(l),d=null;try{d=n.interface.parseLog(l)}catch{}return d&&(h.args=d.args,h.decode=(g,m)=>n.interface.decodeEventLog(d.eventFragment,g,m),h.event=d.name,h.eventSignature=d.signature),h.removeListener=()=>n.provider,h.getBlock=()=>n.provider.getBlock(c.blockHash),h.getTransaction=()=>n.provider.getTransaction(c.transactionHash),h.getTransactionReceipt=()=>Promise.resolve(c),h}),c))}function buildCall(n,e,t){const o=n.signer||n.provider;return function(...c){return __awaiter$6(this,void 0,void 0,function*(){let l;if(c.length===e.inputs.length+1&&typeof c[c.length-1]=="object"){const g=shallowCopy(c.pop());g.blockTag!=null&&(l=yield g.blockTag),delete g.blockTag,c.push(g)}n.deployTransaction!=null&&(yield n._deployed(l));const h=yield populateTransaction(n,e,c),d=yield o.call(h,l);try{let g=n.interface.decodeFunctionResult(e,d);return t&&e.outputs.length===1&&(g=g[0]),g}catch(g){throw g.code===Logger.errors.CALL_EXCEPTION&&(g.address=n.address,g.args=c,g.transaction=h),g}})}}function buildSend(n,e){return function(...t){return __awaiter$6(this,void 0,void 0,function*(){n.signer||logger$d.throwError("sending a transaction requires a signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),n.deployTransaction!=null&&(yield n._deployed());const o=yield populateTransaction(n,e,t),c=yield n.signer.sendTransaction(o);return addContractWait(n,c),c})}}function buildDefault(n,e,t){return e.constant?buildCall(n,e,t):buildSend(n,e)}function getEventTag$1(n){return n.address&&(n.topics==null||n.topics.length===0)?"*":(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class RunningEvent{constructor(e,t){defineReadOnly(this,"tag",e),defineReadOnly(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(o=>t||o.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(o=>{const c=e.slice();return setTimeout(()=>{o.listener.apply(this,c)},0),!o.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class ErrorRunningEvent extends RunningEvent{constructor(){super("error",null)}}class FragmentRunningEvent extends RunningEvent{constructor(e,t,o,c){const l={address:e};let h=t.getEventTopic(o);c?(h!==c[0]&&logger$d.throwArgumentError("topic mismatch","topics",c),l.topics=c.slice()):l.topics=[h],super(getEventTag$1(l),l),defineReadOnly(this,"address",e),defineReadOnly(this,"interface",t),defineReadOnly(this,"fragment",o)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,o)=>this.interface.decodeEventLog(this.fragment,t,o);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=checkResultErrors(e.args);if(t.length)throw t[0].error;const o=(e.args||[]).slice();return o.push(e),o}}class WildcardRunningEvent extends RunningEvent{constructor(e,t){super("*",{address:e}),defineReadOnly(this,"address",e),defineReadOnly(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(o,c)=>this.interface.decodeEventLog(t.eventFragment,o,c),e.args=t.args}catch{}}}class BaseContract{constructor(e,t,o){defineReadOnly(this,"interface",getStatic(new.target,"getInterface")(t)),o==null?(defineReadOnly(this,"provider",null),defineReadOnly(this,"signer",null)):Signer.isSigner(o)?(defineReadOnly(this,"provider",o.provider||null),defineReadOnly(this,"signer",o)):Provider.isProvider(o)?(defineReadOnly(this,"provider",o),defineReadOnly(this,"signer",null)):logger$d.throwArgumentError("invalid signer or provider","signerOrProvider",o),defineReadOnly(this,"callStatic",{}),defineReadOnly(this,"estimateGas",{}),defineReadOnly(this,"functions",{}),defineReadOnly(this,"populateTransaction",{}),defineReadOnly(this,"filters",{});{const h={};Object.keys(this.interface.events).forEach(d=>{const g=this.interface.events[d];defineReadOnly(this.filters,d,(...m)=>({address:this.address,topics:this.interface.encodeFilterTopics(g,m)})),h[g.name]||(h[g.name]=[]),h[g.name].push(d)}),Object.keys(h).forEach(d=>{const g=h[d];g.length===1?defineReadOnly(this.filters,d,this.filters[g[0]]):logger$d.warn(`Duplicate definition of ${d} (${g.join(", ")})`)})}if(defineReadOnly(this,"_runningEvents",{}),defineReadOnly(this,"_wrappedEmits",{}),e==null&&logger$d.throwArgumentError("invalid contract address or ENS name","addressOrName",e),defineReadOnly(this,"address",e),this.provider)defineReadOnly(this,"resolvedAddress",resolveName(this.provider,e));else try{defineReadOnly(this,"resolvedAddress",Promise.resolve(getAddress(e)))}catch{logger$d.throwError("provider is required to use ENS name as contract address",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(h=>{});const c={},l={};Object.keys(this.interface.functions).forEach(h=>{const d=this.interface.functions[h];if(l[h]){logger$d.warn(`Duplicate ABI entry for ${JSON.stringify(h)}`);return}l[h]=!0;{const g=d.name;c[`%${g}`]||(c[`%${g}`]=[]),c[`%${g}`].push(h)}this[h]==null&&defineReadOnly(this,h,buildDefault(this,d,!0)),this.functions[h]==null&&defineReadOnly(this.functions,h,buildDefault(this,d,!1)),this.callStatic[h]==null&&defineReadOnly(this.callStatic,h,buildCall(this,d,!0)),this.populateTransaction[h]==null&&defineReadOnly(this.populateTransaction,h,buildPopulate(this,d)),this.estimateGas[h]==null&&defineReadOnly(this.estimateGas,h,buildEstimate(this,d))}),Object.keys(c).forEach(h=>{const d=c[h];if(d.length>1)return;h=h.substring(1);const g=d[0];try{this[h]==null&&defineReadOnly(this,h,this[g])}catch{}this.functions[h]==null&&defineReadOnly(this.functions,h,this.functions[g]),this.callStatic[h]==null&&defineReadOnly(this.callStatic,h,this.callStatic[g]),this.populateTransaction[h]==null&&defineReadOnly(this.populateTransaction,h,this.populateTransaction[g]),this.estimateGas[h]==null&&defineReadOnly(this.estimateGas,h,this.estimateGas[g])})}static getContractAddress(e){return getContractAddress(e)}static getInterface(e){return Interface.isInterface(e)?e:new Interface(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&logger$d.throwError("contract not deployed",Logger.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||logger$d.throwError("sending a transactions require a signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=shallowCopy(e||{});return["from","to"].forEach(function(o){t[o]!=null&&logger$d.throwError("cannot override "+o,Logger.errors.UNSUPPORTED_OPERATION,{operation:o})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new VoidSigner(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&defineReadOnly(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Indexed.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new ErrorRunningEvent);if(e==="event")return this._normalizeRunningEvent(new RunningEvent("event",null));if(e==="*")return this._normalizeRunningEvent(new WildcardRunningEvent(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new FragmentRunningEvent(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const o=e.topics[0];if(typeof o!="string")throw new Error("invalid topic");const c=this.interface.getEvent(o);return this._normalizeRunningEvent(new FragmentRunningEvent(this.address,this.interface,c,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new RunningEvent(getEventTag$1(t),t))}return this._normalizeRunningEvent(new WildcardRunningEvent(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,o){const c=deepCopy(t);return c.removeListener=()=>{o&&(e.removeListener(o),this._checkRunningEvents(e))},c.getBlock=()=>this.provider.getBlock(t.blockHash),c.getTransaction=()=>this.provider.getTransaction(t.transactionHash),c.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(c),c}_addEventListener(e,t,o){if(this.provider||logger$d.throwError("events require a provider or a signer with a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,o),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const c=l=>{let h=this._wrapEvent(e,l,t);if(h.decodeError==null)try{const d=e.getEmit(h);this.emit(e.filter,...d)}catch(d){h.decodeError=d.error}e.filter!=null&&this.emit("event",h),h.decodeError!=null&&this.emit("error",h.decodeError,h)};this._wrappedEmits[e.tag]=c,e.filter!=null&&this.provider.on(e.filter,c)}}queryFilter(e,t,o){const c=this._getRunningEvent(e),l=shallowCopy(c.filter);return typeof t=="string"&&isHexString(t,32)?(o!=null&&logger$d.throwArgumentError("cannot specify toBlock with blockhash","toBlock",o),l.blockHash=t):(l.fromBlock=t??0,l.toBlock=o??"latest"),this.provider.getLogs(l).then(h=>h.map(d=>this._wrapEvent(c,d,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const o=this._getRunningEvent(e),c=o.run(t)>0;return this._checkRunningEvents(o),c}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,o)=>t+this._runningEvents[o].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let o in this._runningEvents)this._runningEvents[o].listeners().forEach(c=>{t.push(c)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const o in this._runningEvents){const c=this._runningEvents[o];c.removeAllListeners(),this._checkRunningEvents(c)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const o=this._getRunningEvent(e);return o.removeListener(t),this._checkRunningEvents(o),this}removeListener(e,t){return this.off(e,t)}}class Contract extends BaseContract{}class BaseX{constructor(e){defineReadOnly(this,"alphabet",e),defineReadOnly(this,"base",e.length),defineReadOnly(this,"_alphabetMap",{}),defineReadOnly(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=arrayify(e);if(t.length===0)return"";let o=[0];for(let l=0;l<t.length;++l){let h=t[l];for(let d=0;d<o.length;++d)h+=o[d]<<8,o[d]=h%this.base,h=h/this.base|0;for(;h>0;)o.push(h%this.base),h=h/this.base|0}let c="";for(let l=0;t[l]===0&&l<t.length-1;++l)c+=this._leader;for(let l=o.length-1;l>=0;--l)c+=this.alphabet[o[l]];return c}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let o=0;o<e.length;o++){let c=this._alphabetMap[e[o]];if(c===void 0)throw new Error("Non-base"+this.base+" character");let l=c;for(let h=0;h<t.length;++h)l+=t[h]*this.base,t[h]=l&255,l>>=8;for(;l>0;)t.push(l&255),l>>=8}for(let o=0;e[o]===this._leader&&o<e.length-1;++o)t.push(0);return arrayify(new Uint8Array(t.reverse()))}}new BaseX("abcdefghijklmnopqrstuvwxyz234567");const Base58=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var SupportedAlgorithm;(function(n){n.sha256="sha256",n.sha512="sha512"})(SupportedAlgorithm||(SupportedAlgorithm={}));const version$9="sha2/5.7.0",logger$c=new Logger(version$9);function ripemd160$1(n){return"0x"+hash$3.ripemd160().update(arrayify(n)).digest("hex")}function sha256$1(n){return"0x"+hash$3.sha256().update(arrayify(n)).digest("hex")}function computeHmac(n,e,t){return SupportedAlgorithm[n]||logger$c.throwError("unsupported algorithm "+n,Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:n}),"0x"+hash$3.hmac(hash$3[n],arrayify(e)).update(arrayify(t)).digest("hex")}function pbkdf2$2(n,e,t,o,c){n=arrayify(n),e=arrayify(e);let l,h=1;const d=new Uint8Array(o),g=new Uint8Array(e.length+4);g.set(e);let m,v;for(let _=1;_<=h;_++){g[e.length]=_>>24&255,g[e.length+1]=_>>16&255,g[e.length+2]=_>>8&255,g[e.length+3]=_&255;let p=arrayify(computeHmac(c,n,g));l||(l=p.length,v=new Uint8Array(l),h=Math.ceil(o/l),m=o-(h-1)*l),v.set(p);for(let y=1;y<t;y++){p=arrayify(computeHmac(c,n,p));for(let b=0;b<l;b++)v[b]^=p[b]}const a=(_-1)*l,u=_===h?m:l;d.set(arrayify(v).slice(0,u),a)}return hexlify(d)}const version$8="wordlists/5.7.0",logger$b=new Logger(version$8);class Wordlist{constructor(e){logger$b.checkAbstract(new.target,Wordlist),defineReadOnly(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let o=0;o<2048;o++){const c=e.getWord(o);if(o!==e.getWordIndex(c))return"0x";t.push(c)}return id(t.join(`
`)+`
`)}static register(e,t){t||(t=e.locale)}}const words="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let wordlist=null;function loadWords(n){if(wordlist==null&&(wordlist=words.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Wordlist.check(n)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw wordlist=null,new Error("BIP39 Wordlist for en (English) FAILED")}class LangEn extends Wordlist{constructor(){super("en")}getWord(e){return loadWords(this),wordlist[e]}getWordIndex(e){return loadWords(this),wordlist.indexOf(e)}}const langEn=new LangEn;Wordlist.register(langEn);const wordlists={en:langEn},version$7="hdnode/5.7.0",logger$a=new Logger(version$7),N$1=BigNumber$1.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MasterSecret=toUtf8Bytes("Bitcoin seed"),HardenedBit=2147483648;function getUpperMask(n){return(1<<n)-1<<8-n}function getLowerMask(n){return(1<<n)-1}function bytes32(n){return hexZeroPad(hexlify(n),32)}function base58check(n){return Base58.encode(concat$1([n,hexDataSlice(sha256$1(sha256$1(n)),0,4)]))}function getWordlist(n){if(n==null)return wordlists.en;if(typeof n=="string"){const e=wordlists[n];return e==null&&logger$a.throwArgumentError("unknown locale","wordlist",n),e}return n}const _constructorGuard$1={},defaultPath="m/44'/60'/0'/0/0";class HDNode{constructor(e,t,o,c,l,h,d,g){if(e!==_constructorGuard$1)throw new Error("HDNode constructor cannot be called directly");if(t){const m=new SigningKey(t);defineReadOnly(this,"privateKey",m.privateKey),defineReadOnly(this,"publicKey",m.compressedPublicKey)}else defineReadOnly(this,"privateKey",null),defineReadOnly(this,"publicKey",hexlify(o));defineReadOnly(this,"parentFingerprint",c),defineReadOnly(this,"fingerprint",hexDataSlice(ripemd160$1(sha256$1(this.publicKey)),0,4)),defineReadOnly(this,"address",computeAddress(this.publicKey)),defineReadOnly(this,"chainCode",l),defineReadOnly(this,"index",h),defineReadOnly(this,"depth",d),g==null?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",null)):typeof g=="string"?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",g)):(defineReadOnly(this,"mnemonic",g),defineReadOnly(this,"path",g.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return base58check(concat$1([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",hexlify(this.depth),this.parentFingerprint,hexZeroPad(hexlify(this.index),4),this.chainCode,this.privateKey!=null?concat$1(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new HDNode(_constructorGuard$1,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(e&~HardenedBit));const o=new Uint8Array(37);if(e&HardenedBit){if(!this.privateKey)throw new Error("cannot derive child of neutered node");o.set(arrayify(this.privateKey),1),t&&(t+="'")}else o.set(arrayify(this.publicKey));for(let _=24;_>=0;_-=8)o[33+(_>>3)]=e>>24-_&255;const c=arrayify(computeHmac(SupportedAlgorithm.sha512,this.chainCode,o)),l=c.slice(0,32),h=c.slice(32);let d=null,g=null;this.privateKey?d=bytes32(BigNumber$1.from(l).add(this.privateKey).mod(N$1)):g=new SigningKey(hexlify(l))._addPoint(this.publicKey);let m=t;const v=this.mnemonic;return v&&(m=Object.freeze({phrase:v.phrase,path:t,locale:v.locale||"en"})),new HDNode(_constructorGuard$1,d,g,this.fingerprint,bytes32(h),e,this.depth+1,m)}derivePath(e){const t=e.split("/");if(t.length===0||t[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);t[0]==="m"&&t.shift();let o=this;for(let c=0;c<t.length;c++){const l=t[c];if(l.match(/^[0-9]+'$/)){const h=parseInt(l.substring(0,l.length-1));if(h>=HardenedBit)throw new Error("invalid path index - "+l);o=o._derive(HardenedBit+h)}else if(l.match(/^[0-9]+$/)){const h=parseInt(l);if(h>=HardenedBit)throw new Error("invalid path index - "+l);o=o._derive(h)}else throw new Error("invalid path component - "+l)}return o}static _fromSeed(e,t){const o=arrayify(e);if(o.length<16||o.length>64)throw new Error("invalid seed");const c=arrayify(computeHmac(SupportedAlgorithm.sha512,MasterSecret,o));return new HDNode(_constructorGuard$1,bytes32(c.slice(0,32)),null,"0x00000000",bytes32(c.slice(32)),0,0,t)}static fromMnemonic(e,t,o){return o=getWordlist(o),e=entropyToMnemonic(mnemonicToEntropy(e,o),o),HDNode._fromSeed(mnemonicToSeed(e,t),{phrase:e,path:"m",locale:o.locale})}static fromSeed(e){return HDNode._fromSeed(e,null)}static fromExtendedKey(e){const t=Base58.decode(e);(t.length!==82||base58check(t.slice(0,78))!==e)&&logger$a.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const o=t[4],c=hexlify(t.slice(5,9)),l=parseInt(hexlify(t.slice(9,13)).substring(2),16),h=hexlify(t.slice(13,45)),d=t.slice(45,78);switch(hexlify(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new HDNode(_constructorGuard$1,null,hexlify(d),c,h,l,o,null);case"0x0488ade4":case"0x04358394 ":if(d[0]!==0)break;return new HDNode(_constructorGuard$1,hexlify(d.slice(1)),null,c,h,l,o,null)}return logger$a.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function mnemonicToSeed(n,e){e||(e="");const t=toUtf8Bytes("mnemonic"+e,UnicodeNormalizationForm.NFKD);return pbkdf2$2(toUtf8Bytes(n,UnicodeNormalizationForm.NFKD),t,2048,64,"sha512")}function mnemonicToEntropy(n,e){e=getWordlist(e),logger$a.checkNormalize();const t=e.split(n);if(t.length%3!==0)throw new Error("invalid mnemonic");const o=arrayify(new Uint8Array(Math.ceil(11*t.length/8)));let c=0;for(let m=0;m<t.length;m++){let v=e.getWordIndex(t[m].normalize("NFKD"));if(v===-1)throw new Error("invalid mnemonic");for(let _=0;_<11;_++)v&1<<10-_&&(o[c>>3]|=1<<7-c%8),c++}const l=32*t.length/3,h=t.length/3,d=getUpperMask(h);if((arrayify(sha256$1(o.slice(0,l/8)))[0]&d)!==(o[o.length-1]&d))throw new Error("invalid checksum");return hexlify(o.slice(0,l/8))}function entropyToMnemonic(n,e){if(e=getWordlist(e),n=arrayify(n),n.length%4!==0||n.length<16||n.length>32)throw new Error("invalid entropy");const t=[0];let o=11;for(let h=0;h<n.length;h++)o>8?(t[t.length-1]<<=8,t[t.length-1]|=n[h],o-=8):(t[t.length-1]<<=o,t[t.length-1]|=n[h]>>8-o,t.push(n[h]&getLowerMask(8-o)),o+=3);const c=n.length/4,l=arrayify(sha256$1(n))[0]&getUpperMask(c);return t[t.length-1]<<=c,t[t.length-1]|=l>>8-c,e.join(t.map(h=>e.getWord(h)))}const version$6="random/5.7.0",logger$9=new Logger(version$6);function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const anyGlobal=getGlobal();let crypto$2=anyGlobal.crypto||anyGlobal.msCrypto;(!crypto$2||!crypto$2.getRandomValues)&&(logger$9.warn("WARNING: Missing strong random number source"),crypto$2={getRandomValues:function(n){return logger$9.throwError("no secure random source avaialble",Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function randomBytes(n){(n<=0||n>1024||n%1||n!=n)&&logger$9.throwArgumentError("invalid length","length",n);const e=new Uint8Array(n);return crypto$2.getRandomValues(e),arrayify(e)}var aesJs={exports:{}};(function(n,e){(function(t){function o($){return parseInt($)===$}function c($){if(!o($.length))return!1;for(var O=0;O<$.length;O++)if(!o($[O])||$[O]<0||$[O]>255)return!1;return!0}function l($,O){if($.buffer&&ArrayBuffer.isView($)&&$.name==="Uint8Array")return O&&($.slice?$=$.slice():$=Array.prototype.slice.call($)),$;if(Array.isArray($)){if(!c($))throw new Error("Array contains invalid value: "+$);return new Uint8Array($)}if(o($.length)&&c($))return new Uint8Array($);throw new Error("unsupported array-like object")}function h($){return new Uint8Array($)}function d($,O,oe,ue,q){(ue!=null||q!=null)&&($.slice?$=$.slice(ue,q):$=Array.prototype.slice.call($,ue,q)),O.set($,oe)}var g=function(){function $(oe){var ue=[],q=0;for(oe=encodeURI(oe);q<oe.length;){var pe=oe.charCodeAt(q++);pe===37?(ue.push(parseInt(oe.substr(q,2),16)),q+=2):ue.push(pe)}return l(ue)}function O(oe){for(var ue=[],q=0;q<oe.length;){var pe=oe[q];pe<128?(ue.push(String.fromCharCode(pe)),q++):pe>191&&pe<224?(ue.push(String.fromCharCode((pe&31)<<6|oe[q+1]&63)),q+=2):(ue.push(String.fromCharCode((pe&15)<<12|(oe[q+1]&63)<<6|oe[q+2]&63)),q+=3)}return ue.join("")}return{toBytes:$,fromBytes:O}}(),m=function(){function $(ue){for(var q=[],pe=0;pe<ue.length;pe+=2)q.push(parseInt(ue.substr(pe,2),16));return q}var O="0123456789abcdef";function oe(ue){for(var q=[],pe=0;pe<ue.length;pe++){var be=ue[pe];q.push(O[(be&240)>>4]+O[be&15])}return q.join("")}return{toBytes:$,fromBytes:oe}}(),v={16:10,24:12,32:14},_=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],p=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],a=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],u=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],y=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],b=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],w=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],T=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],B=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],H=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],J=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],W=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],fe=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],re=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],se=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function ae($){for(var O=[],oe=0;oe<$.length;oe+=4)O.push($[oe]<<24|$[oe+1]<<16|$[oe+2]<<8|$[oe+3]);return O}var ee=function($){if(!(this instanceof ee))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:l($,!0)}),this._prepare()};ee.prototype._prepare=function(){var $=v[this.key.length];if($==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var O=0;O<=$;O++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var oe=($+1)*4,ue=this.key.length/4,q=ae(this.key),pe,O=0;O<ue;O++)pe=O>>2,this._Ke[pe][O%4]=q[O],this._Kd[$-pe][O%4]=q[O];for(var be=0,ve=ue,we;ve<oe;){if(we=q[ue-1],q[0]^=p[we>>16&255]<<24^p[we>>8&255]<<16^p[we&255]<<8^p[we>>24&255]^_[be]<<24,be+=1,ue!=8)for(var O=1;O<ue;O++)q[O]^=q[O-1];else{for(var O=1;O<ue/2;O++)q[O]^=q[O-1];we=q[ue/2-1],q[ue/2]^=p[we&255]^p[we>>8&255]<<8^p[we>>16&255]<<16^p[we>>24&255]<<24;for(var O=ue/2+1;O<ue;O++)q[O]^=q[O-1]}for(var O=0,Ce,Re;O<ue&&ve<oe;)Ce=ve>>2,Re=ve%4,this._Ke[Ce][Re]=q[O],this._Kd[$-Ce][Re]=q[O++],ve++}for(var Ce=1;Ce<$;Ce++)for(var Re=0;Re<4;Re++)we=this._Kd[Ce][Re],this._Kd[Ce][Re]=W[we>>24&255]^fe[we>>16&255]^re[we>>8&255]^se[we&255]},ee.prototype.encrypt=function($){if($.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var O=this._Ke.length-1,oe=[0,0,0,0],ue=ae($),q=0;q<4;q++)ue[q]^=this._Ke[0][q];for(var pe=1;pe<O;pe++){for(var q=0;q<4;q++)oe[q]=u[ue[q]>>24&255]^y[ue[(q+1)%4]>>16&255]^b[ue[(q+2)%4]>>8&255]^w[ue[(q+3)%4]&255]^this._Ke[pe][q];ue=oe.slice()}for(var be=h(16),ve,q=0;q<4;q++)ve=this._Ke[O][q],be[4*q]=(p[ue[q]>>24&255]^ve>>24)&255,be[4*q+1]=(p[ue[(q+1)%4]>>16&255]^ve>>16)&255,be[4*q+2]=(p[ue[(q+2)%4]>>8&255]^ve>>8)&255,be[4*q+3]=(p[ue[(q+3)%4]&255]^ve)&255;return be},ee.prototype.decrypt=function($){if($.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var O=this._Kd.length-1,oe=[0,0,0,0],ue=ae($),q=0;q<4;q++)ue[q]^=this._Kd[0][q];for(var pe=1;pe<O;pe++){for(var q=0;q<4;q++)oe[q]=T[ue[q]>>24&255]^B[ue[(q+3)%4]>>16&255]^H[ue[(q+2)%4]>>8&255]^J[ue[(q+1)%4]&255]^this._Kd[pe][q];ue=oe.slice()}for(var be=h(16),ve,q=0;q<4;q++)ve=this._Kd[O][q],be[4*q]=(a[ue[q]>>24&255]^ve>>24)&255,be[4*q+1]=(a[ue[(q+3)%4]>>16&255]^ve>>16)&255,be[4*q+2]=(a[ue[(q+2)%4]>>8&255]^ve>>8)&255,be[4*q+3]=(a[ue[(q+1)%4]&255]^ve)&255;return be};var P=function($){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new ee($)};P.prototype.encrypt=function($){if($=l($),$.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var O=h($.length),oe=h(16),ue=0;ue<$.length;ue+=16)d($,oe,0,ue,ue+16),oe=this._aes.encrypt(oe),d(oe,O,ue);return O},P.prototype.decrypt=function($){if($=l($),$.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var O=h($.length),oe=h(16),ue=0;ue<$.length;ue+=16)d($,oe,0,ue,ue+16),oe=this._aes.decrypt(oe),d(oe,O,ue);return O};var C=function($,O){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!O)O=h(16);else if(O.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=l(O,!0),this._aes=new ee($)};C.prototype.encrypt=function($){if($=l($),$.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var O=h($.length),oe=h(16),ue=0;ue<$.length;ue+=16){d($,oe,0,ue,ue+16);for(var q=0;q<16;q++)oe[q]^=this._lastCipherblock[q];this._lastCipherblock=this._aes.encrypt(oe),d(this._lastCipherblock,O,ue)}return O},C.prototype.decrypt=function($){if($=l($),$.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var O=h($.length),oe=h(16),ue=0;ue<$.length;ue+=16){d($,oe,0,ue,ue+16),oe=this._aes.decrypt(oe);for(var q=0;q<16;q++)O[ue+q]=oe[q]^this._lastCipherblock[q];d($,this._lastCipherblock,0,ue,ue+16)}return O};var E=function($,O,oe){if(!(this instanceof E))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!O)O=h(16);else if(O.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");oe||(oe=1),this.segmentSize=oe,this._shiftRegister=l(O,!0),this._aes=new ee($)};E.prototype.encrypt=function($){if($.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var O=l($,!0),oe,ue=0;ue<O.length;ue+=this.segmentSize){oe=this._aes.encrypt(this._shiftRegister);for(var q=0;q<this.segmentSize;q++)O[ue+q]^=oe[q];d(this._shiftRegister,this._shiftRegister,0,this.segmentSize),d(O,this._shiftRegister,16-this.segmentSize,ue,ue+this.segmentSize)}return O},E.prototype.decrypt=function($){if($.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var O=l($,!0),oe,ue=0;ue<O.length;ue+=this.segmentSize){oe=this._aes.encrypt(this._shiftRegister);for(var q=0;q<this.segmentSize;q++)O[ue+q]^=oe[q];d(this._shiftRegister,this._shiftRegister,0,this.segmentSize),d($,this._shiftRegister,16-this.segmentSize,ue,ue+this.segmentSize)}return O};var k=function($,O){if(!(this instanceof k))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!O)O=h(16);else if(O.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=l(O,!0),this._lastPrecipherIndex=16,this._aes=new ee($)};k.prototype.encrypt=function($){for(var O=l($,!0),oe=0;oe<O.length;oe++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),O[oe]^=this._lastPrecipher[this._lastPrecipherIndex++];return O},k.prototype.decrypt=k.prototype.encrypt;var F=function($){if(!(this instanceof F))throw Error("Counter must be instanitated with `new`");$!==0&&!$&&($=1),typeof $=="number"?(this._counter=h(16),this.setValue($)):this.setBytes($)};F.prototype.setValue=function($){if(typeof $!="number"||parseInt($)!=$)throw new Error("invalid counter value (must be an integer)");for(var O=15;O>=0;--O)this._counter[O]=$%256,$=$>>8},F.prototype.setBytes=function($){if($=l($,!0),$.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=$},F.prototype.increment=function(){for(var $=15;$>=0;$--)if(this._counter[$]===255)this._counter[$]=0;else{this._counter[$]++;break}};var j=function($,O){if(!(this instanceof j))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",O instanceof F||(O=new F(O)),this._counter=O,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new ee($)};j.prototype.encrypt=function($){for(var O=l($,!0),oe=0;oe<O.length;oe++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),O[oe]^=this._remainingCounter[this._remainingCounterIndex++];return O},j.prototype.decrypt=j.prototype.encrypt;function Q($){$=l($,!0);var O=16-$.length%16,oe=h($.length+O);d($,oe);for(var ue=$.length;ue<oe.length;ue++)oe[ue]=O;return oe}function G($){if($=l($,!0),$.length<16)throw new Error("PKCS#7 invalid length");var O=$[$.length-1];if(O>16)throw new Error("PKCS#7 padding byte out of range");for(var oe=$.length-O,ue=0;ue<O;ue++)if($[oe+ue]!==O)throw new Error("PKCS#7 invalid padding byte");var q=h(oe);return d($,q,0,0,oe),q}var U={AES:ee,Counter:F,ModeOfOperation:{ecb:P,cbc:C,cfb:E,ofb:k,ctr:j},utils:{hex:m,utf8:g},padding:{pkcs7:{pad:Q,strip:G}},_arrayTest:{coerceArray:l,createArray:h,copyArray:d}};n.exports=U})()})(aesJs);var aesJsExports=aesJs.exports;const aes$1=getDefaultExportFromCjs(aesJsExports),version$5="json-wallets/5.7.0";function looseArrayify(n){return typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),arrayify(n)}function zpad(n,e){for(n=String(n);n.length<e;)n="0"+n;return n}function getPassword(n){return typeof n=="string"?toUtf8Bytes(n,UnicodeNormalizationForm.NFKC):arrayify(n)}function searchPath(n,e){let t=n;const o=e.toLowerCase().split("/");for(let c=0;c<o.length;c++){let l=null;for(const h in t)if(h.toLowerCase()===o[c]){l=t[h];break}if(l===null)return null;t=l}return t}function uuidV4(n){const e=arrayify(n);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=hexlify(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}const logger$8=new Logger(version$5);class CrowdsaleAccount extends Description{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function decrypt$1(n,e){const t=JSON.parse(n);e=getPassword(e);const o=getAddress(searchPath(t,"ethaddr")),c=looseArrayify(searchPath(t,"encseed"));(!c||c.length%16!==0)&&logger$8.throwArgumentError("invalid encseed","json",n);const l=arrayify(pbkdf2$2(e,e,2e3,32,"sha256")).slice(0,16),h=c.slice(0,16),d=c.slice(16),g=new aes$1.ModeOfOperation.cbc(l,h),m=aes$1.padding.pkcs7.strip(arrayify(g.decrypt(d)));let v="";for(let a=0;a<m.length;a++)v+=String.fromCharCode(m[a]);const _=toUtf8Bytes(v),p=keccak256$2(_);return new CrowdsaleAccount({_isCrowdsaleAccount:!0,address:o,privateKey:p})}function isCrowdsaleWallet(n){let e=null;try{e=JSON.parse(n)}catch{return!1}return e.encseed&&e.ethaddr}function isKeystoreWallet(n){let e=null;try{e=JSON.parse(n)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}var scrypt$1={exports:{}};(function(n,e){(function(t){function c(y){const b=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let w=1779033703,T=3144134277,B=1013904242,H=2773480762,J=1359893119,W=2600822924,fe=528734635,re=1541459225;const se=new Uint32Array(64);function ae(j){let Q=0,G=j.length;for(;G>=64;){let U=w,$=T,O=B,oe=H,ue=J,q=W,pe=fe,be=re,ve,we,Ce,Re,Se;for(we=0;we<16;we++)Ce=Q+we*4,se[we]=(j[Ce]&255)<<24|(j[Ce+1]&255)<<16|(j[Ce+2]&255)<<8|j[Ce+3]&255;for(we=16;we<64;we++)ve=se[we-2],Re=(ve>>>17|ve<<32-17)^(ve>>>19|ve<<32-19)^ve>>>10,ve=se[we-15],Se=(ve>>>7|ve<<32-7)^(ve>>>18|ve<<32-18)^ve>>>3,se[we]=(Re+se[we-7]|0)+(Se+se[we-16]|0)|0;for(we=0;we<64;we++)Re=(((ue>>>6|ue<<32-6)^(ue>>>11|ue<<32-11)^(ue>>>25|ue<<32-25))+(ue&q^~ue&pe)|0)+(be+(b[we]+se[we]|0)|0)|0,Se=((U>>>2|U<<32-2)^(U>>>13|U<<32-13)^(U>>>22|U<<32-22))+(U&$^U&O^$&O)|0,be=pe,pe=q,q=ue,ue=oe+Re|0,oe=O,O=$,$=U,U=Re+Se|0;w=w+U|0,T=T+$|0,B=B+O|0,H=H+oe|0,J=J+ue|0,W=W+q|0,fe=fe+pe|0,re=re+be|0,Q+=64,G-=64}}ae(y);let ee,P=y.length%64,C=y.length/536870912|0,E=y.length<<3,k=P<56?56:120,F=y.slice(y.length-P,y.length);for(F.push(128),ee=P+1;ee<k;ee++)F.push(0);return F.push(C>>>24&255),F.push(C>>>16&255),F.push(C>>>8&255),F.push(C>>>0&255),F.push(E>>>24&255),F.push(E>>>16&255),F.push(E>>>8&255),F.push(E>>>0&255),ae(F),[w>>>24&255,w>>>16&255,w>>>8&255,w>>>0&255,T>>>24&255,T>>>16&255,T>>>8&255,T>>>0&255,B>>>24&255,B>>>16&255,B>>>8&255,B>>>0&255,H>>>24&255,H>>>16&255,H>>>8&255,H>>>0&255,J>>>24&255,J>>>16&255,J>>>8&255,J>>>0&255,W>>>24&255,W>>>16&255,W>>>8&255,W>>>0&255,fe>>>24&255,fe>>>16&255,fe>>>8&255,fe>>>0&255,re>>>24&255,re>>>16&255,re>>>8&255,re>>>0&255]}function l(y,b,w){y=y.length<=64?y:c(y);const T=64+b.length+4,B=new Array(T),H=new Array(64);let J,W=[];for(J=0;J<64;J++)B[J]=54;for(J=0;J<y.length;J++)B[J]^=y[J];for(J=0;J<b.length;J++)B[64+J]=b[J];for(J=T-4;J<T;J++)B[J]=0;for(J=0;J<64;J++)H[J]=92;for(J=0;J<y.length;J++)H[J]^=y[J];function fe(){for(let re=T-1;re>=T-4;re--){if(B[re]++,B[re]<=255)return;B[re]=0}}for(;w>=32;)fe(),W=W.concat(c(H.concat(c(B)))),w-=32;return w>0&&(fe(),W=W.concat(c(H.concat(c(B))).slice(0,w))),W}function h(y,b,w,T,B){let H;for(v(y,(2*w-1)*16,B,0,16),H=0;H<2*w;H++)m(y,H*16,B,16),g(B,T),v(B,0,y,b+H*16,16);for(H=0;H<w;H++)v(y,b+H*2*16,y,H*16,16);for(H=0;H<w;H++)v(y,b+(H*2+1)*16,y,(H+w)*16,16)}function d(y,b){return y<<b|y>>>32-b}function g(y,b){v(y,0,b,0,16);for(let w=8;w>0;w-=2)b[4]^=d(b[0]+b[12],7),b[8]^=d(b[4]+b[0],9),b[12]^=d(b[8]+b[4],13),b[0]^=d(b[12]+b[8],18),b[9]^=d(b[5]+b[1],7),b[13]^=d(b[9]+b[5],9),b[1]^=d(b[13]+b[9],13),b[5]^=d(b[1]+b[13],18),b[14]^=d(b[10]+b[6],7),b[2]^=d(b[14]+b[10],9),b[6]^=d(b[2]+b[14],13),b[10]^=d(b[6]+b[2],18),b[3]^=d(b[15]+b[11],7),b[7]^=d(b[3]+b[15],9),b[11]^=d(b[7]+b[3],13),b[15]^=d(b[11]+b[7],18),b[1]^=d(b[0]+b[3],7),b[2]^=d(b[1]+b[0],9),b[3]^=d(b[2]+b[1],13),b[0]^=d(b[3]+b[2],18),b[6]^=d(b[5]+b[4],7),b[7]^=d(b[6]+b[5],9),b[4]^=d(b[7]+b[6],13),b[5]^=d(b[4]+b[7],18),b[11]^=d(b[10]+b[9],7),b[8]^=d(b[11]+b[10],9),b[9]^=d(b[8]+b[11],13),b[10]^=d(b[9]+b[8],18),b[12]^=d(b[15]+b[14],7),b[13]^=d(b[12]+b[15],9),b[14]^=d(b[13]+b[12],13),b[15]^=d(b[14]+b[13],18);for(let w=0;w<16;++w)y[w]+=b[w]}function m(y,b,w,T){for(let B=0;B<T;B++)w[B]^=y[b+B]}function v(y,b,w,T,B){for(;B--;)w[T++]=y[b++]}function _(y){if(!y||typeof y.length!="number")return!1;for(let b=0;b<y.length;b++){const w=y[b];if(typeof w!="number"||w%1||w<0||w>=256)return!1}return!0}function p(y,b){if(typeof y!="number"||y%1)throw new Error("invalid "+b);return y}function a(y,b,w,T,B,H,J){if(w=p(w,"N"),T=p(T,"r"),B=p(B,"p"),H=p(H,"dkLen"),w===0||w&w-1)throw new Error("N must be power of 2");if(w>2147483647/128/T)throw new Error("N too large");if(T>2147483647/128/B)throw new Error("r too large");if(!_(y))throw new Error("password must be an array or buffer");if(y=Array.prototype.slice.call(y),!_(b))throw new Error("salt must be an array or buffer");b=Array.prototype.slice.call(b);let W=l(y,b,B*128*T);const fe=new Uint32Array(B*32*T);for(let ue=0;ue<fe.length;ue++){const q=ue*4;fe[ue]=(W[q+3]&255)<<24|(W[q+2]&255)<<16|(W[q+1]&255)<<8|(W[q+0]&255)<<0}const re=new Uint32Array(64*T),se=new Uint32Array(32*T*w),ae=32*T,ee=new Uint32Array(16),P=new Uint32Array(16),C=B*w*2;let E=0,k=null,F=!1,j=0,Q=0,G,U;const $=J?parseInt(1e3/T):4294967295,O=typeof setImmediate<"u"?setImmediate:setTimeout,oe=function(){if(F)return J(new Error("cancelled"),E/C);let ue;switch(j){case 0:U=Q*32*T,v(fe,U,re,0,ae),j=1,G=0;case 1:ue=w-G,ue>$&&(ue=$);for(let pe=0;pe<ue;pe++)v(re,0,se,(G+pe)*ae,ae),h(re,ae,T,ee,P);if(G+=ue,E+=ue,J){const pe=parseInt(1e3*E/C);if(pe!==k){if(F=J(null,E/C),F)break;k=pe}}if(G<w)break;G=0,j=2;case 2:ue=w-G,ue>$&&(ue=$);for(let pe=0;pe<ue;pe++){const be=(2*T-1)*16,ve=re[be]&w-1;m(se,ve*ae,re,ae),h(re,ae,T,ee,P)}if(G+=ue,E+=ue,J){const pe=parseInt(1e3*E/C);if(pe!==k){if(F=J(null,E/C),F)break;k=pe}}if(G<w)break;if(v(re,0,fe,U,ae),Q++,Q<B){j=0;break}W=[];for(let pe=0;pe<fe.length;pe++)W.push(fe[pe]>>0&255),W.push(fe[pe]>>8&255),W.push(fe[pe]>>16&255),W.push(fe[pe]>>24&255);const q=l(y,W,H);return J&&J(null,1,q),q}J&&O(oe)};if(!J)for(;;){const ue=oe();if(ue!=null)return ue}oe()}const u={scrypt:function(y,b,w,T,B,H,J){return new Promise(function(W,fe){let re=0;J&&J(0),a(y,b,w,T,B,H,function(se,ae,ee){if(se)fe(se);else if(ee)J&&re!==1&&J(1),W(new Uint8Array(ee));else if(J&&ae!==re)return re=ae,J(ae)})})},syncScrypt:function(y,b,w,T,B,H){return new Uint8Array(a(y,b,w,T,B,H))}};n.exports=u})()})(scrypt$1);var scryptExports=scrypt$1.exports;const scrypt=getDefaultExportFromCjs(scryptExports);var __awaiter$5=globalThis&&globalThis.__awaiter||function(n,e,t,o){function c(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(v){try{m(o.next(v))}catch(_){h(_)}}function g(v){try{m(o.throw(v))}catch(_){h(_)}}function m(v){v.done?l(v.value):c(v.value).then(d,g)}m((o=o.apply(n,e||[])).next())})};const logger$7=new Logger(version$5);function hasMnemonic$1(n){return n!=null&&n.mnemonic&&n.mnemonic.phrase}class KeystoreAccount extends Description{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function _decrypt(n,e,t){if(searchPath(n,"crypto/cipher")==="aes-128-ctr"){const c=looseArrayify(searchPath(n,"crypto/cipherparams/iv")),l=new aes$1.Counter(c),h=new aes$1.ModeOfOperation.ctr(e,l);return arrayify(h.decrypt(t))}return null}function _getAccount(n,e){const t=looseArrayify(searchPath(n,"crypto/ciphertext"));if(hexlify(keccak256$2(concat$1([e.slice(16,32),t]))).substring(2)!==searchPath(n,"crypto/mac").toLowerCase())throw new Error("invalid password");const c=_decrypt(n,e.slice(0,16),t);c||logger$7.throwError("unsupported cipher",Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const l=e.slice(32,64),h=computeAddress(c);if(n.address){let g=n.address.toLowerCase();if(g.substring(0,2)!=="0x"&&(g="0x"+g),getAddress(g)!==h)throw new Error("address mismatch")}const d={_isKeystoreAccount:!0,address:h,privateKey:hexlify(c)};if(searchPath(n,"x-ethers/version")==="0.1"){const g=looseArrayify(searchPath(n,"x-ethers/mnemonicCiphertext")),m=looseArrayify(searchPath(n,"x-ethers/mnemonicCounter")),v=new aes$1.Counter(m),_=new aes$1.ModeOfOperation.ctr(l,v),p=searchPath(n,"x-ethers/path")||defaultPath,a=searchPath(n,"x-ethers/locale")||"en",u=arrayify(_.decrypt(g));try{const y=entropyToMnemonic(u,a),b=HDNode.fromMnemonic(y,null,a).derivePath(p);if(b.privateKey!=d.privateKey)throw new Error("mnemonic mismatch");d.mnemonic=b.mnemonic}catch(y){if(y.code!==Logger.errors.INVALID_ARGUMENT||y.argument!=="wordlist")throw y}}return new KeystoreAccount(d)}function pbkdf2Sync(n,e,t,o,c){return arrayify(pbkdf2$2(n,e,t,o,c))}function pbkdf2$1(n,e,t,o,c){return Promise.resolve(pbkdf2Sync(n,e,t,o,c))}function _computeKdfKey(n,e,t,o,c){const l=getPassword(e),h=searchPath(n,"crypto/kdf");if(h&&typeof h=="string"){const d=function(g,m){return logger$7.throwArgumentError("invalid key-derivation function parameters",g,m)};if(h.toLowerCase()==="scrypt"){const g=looseArrayify(searchPath(n,"crypto/kdfparams/salt")),m=parseInt(searchPath(n,"crypto/kdfparams/n")),v=parseInt(searchPath(n,"crypto/kdfparams/r")),_=parseInt(searchPath(n,"crypto/kdfparams/p"));(!m||!v||!_)&&d("kdf",h),m&m-1&&d("N",m);const p=parseInt(searchPath(n,"crypto/kdfparams/dklen"));return p!==32&&d("dklen",p),o(l,g,m,v,_,64,c)}else if(h.toLowerCase()==="pbkdf2"){const g=looseArrayify(searchPath(n,"crypto/kdfparams/salt"));let m=null;const v=searchPath(n,"crypto/kdfparams/prf");v==="hmac-sha256"?m="sha256":v==="hmac-sha512"?m="sha512":d("prf",v);const _=parseInt(searchPath(n,"crypto/kdfparams/c")),p=parseInt(searchPath(n,"crypto/kdfparams/dklen"));return p!==32&&d("dklen",p),t(l,g,_,p,m)}}return logger$7.throwArgumentError("unsupported key-derivation function","kdf",h)}function decryptSync(n,e){const t=JSON.parse(n),o=_computeKdfKey(t,e,pbkdf2Sync,scrypt.syncScrypt);return _getAccount(t,o)}function decrypt(n,e,t){return __awaiter$5(this,void 0,void 0,function*(){const o=JSON.parse(n),c=yield _computeKdfKey(o,e,pbkdf2$1,scrypt.scrypt,t);return _getAccount(o,c)})}function encrypt(n,e,t,o){try{if(getAddress(n.address)!==computeAddress(n.privateKey))throw new Error("address/privateKey mismatch");if(hasMnemonic$1(n)){const b=n.mnemonic;if(HDNode.fromMnemonic(b.phrase,null,b.locale).derivePath(b.path||defaultPath).privateKey!=n.privateKey)throw new Error("mnemonic mismatch")}}catch(b){return Promise.reject(b)}typeof t=="function"&&!o&&(o=t,t={}),t||(t={});const c=arrayify(n.privateKey),l=getPassword(e);let h=null,d=null,g=null;if(hasMnemonic$1(n)){const b=n.mnemonic;h=arrayify(mnemonicToEntropy(b.phrase,b.locale||"en")),d=b.path||defaultPath,g=b.locale||"en"}let m=t.client;m||(m="ethers.js");let v=null;t.salt?v=arrayify(t.salt):v=randomBytes(32);let _=null;if(t.iv){if(_=arrayify(t.iv),_.length!==16)throw new Error("invalid iv")}else _=randomBytes(16);let p=null;if(t.uuid){if(p=arrayify(t.uuid),p.length!==16)throw new Error("invalid uuid")}else p=randomBytes(16);let a=1<<17,u=8,y=1;return t.scrypt&&(t.scrypt.N&&(a=t.scrypt.N),t.scrypt.r&&(u=t.scrypt.r),t.scrypt.p&&(y=t.scrypt.p)),scrypt.scrypt(l,v,a,u,y,64,o).then(b=>{b=arrayify(b);const w=b.slice(0,16),T=b.slice(16,32),B=b.slice(32,64),H=new aes$1.Counter(_),J=new aes$1.ModeOfOperation.ctr(w,H),W=arrayify(J.encrypt(c)),fe=keccak256$2(concat$1([T,W])),re={address:n.address.substring(2).toLowerCase(),id:uuidV4(p),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(_).substring(2)},ciphertext:hexlify(W).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(v).substring(2),n:a,dklen:32,p:y,r:u},mac:fe.substring(2)}};if(h){const se=randomBytes(16),ae=new aes$1.Counter(se),ee=new aes$1.ModeOfOperation.ctr(B,ae),P=arrayify(ee.encrypt(h)),C=new Date,E=C.getUTCFullYear()+"-"+zpad(C.getUTCMonth()+1,2)+"-"+zpad(C.getUTCDate(),2)+"T"+zpad(C.getUTCHours(),2)+"-"+zpad(C.getUTCMinutes(),2)+"-"+zpad(C.getUTCSeconds(),2)+".0Z";re["x-ethers"]={client:m,gethFilename:"UTC--"+E+"--"+re.address,mnemonicCounter:hexlify(se).substring(2),mnemonicCiphertext:hexlify(P).substring(2),path:d,locale:g,version:"0.1"}}return JSON.stringify(re)})}function decryptJsonWallet(n,e,t){if(isCrowdsaleWallet(n)){t&&t(0);const o=decrypt$1(n,e);return t&&t(1),Promise.resolve(o)}return isKeystoreWallet(n)?decrypt(n,e,t):Promise.reject(new Error("invalid JSON wallet"))}function decryptJsonWalletSync(n,e){if(isCrowdsaleWallet(n))return decrypt$1(n,e);if(isKeystoreWallet(n))return decryptSync(n,e);throw new Error("invalid JSON wallet")}const version$4="wallet/5.7.0";var __awaiter$4=globalThis&&globalThis.__awaiter||function(n,e,t,o){function c(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(v){try{m(o.next(v))}catch(_){h(_)}}function g(v){try{m(o.throw(v))}catch(_){h(_)}}function m(v){v.done?l(v.value):c(v.value).then(d,g)}m((o=o.apply(n,e||[])).next())})};const logger$6=new Logger(version$4);function isAccount(n){return n!=null&&isHexString(n.privateKey,32)&&n.address!=null}function hasMnemonic(n){const e=n.mnemonic;return e&&e.phrase}class Wallet extends Signer{constructor(e,t){if(super(),isAccount(e)){const o=new SigningKey(e.privateKey);if(defineReadOnly(this,"_signingKey",()=>o),defineReadOnly(this,"address",computeAddress(this.publicKey)),this.address!==getAddress(e.address)&&logger$6.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),hasMnemonic(e)){const c=e.mnemonic;defineReadOnly(this,"_mnemonic",()=>({phrase:c.phrase,path:c.path||defaultPath,locale:c.locale||"en"}));const l=this.mnemonic,h=HDNode.fromMnemonic(l.phrase,null,l.locale).derivePath(l.path);computeAddress(h.privateKey)!==this.address&&logger$6.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else defineReadOnly(this,"_mnemonic",()=>null)}else{if(SigningKey.isSigningKey(e))e.curve!=="secp256k1"&&logger$6.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),defineReadOnly(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const o=new SigningKey(e);defineReadOnly(this,"_signingKey",()=>o)}defineReadOnly(this,"_mnemonic",()=>null),defineReadOnly(this,"address",computeAddress(this.publicKey))}t&&!Provider.isProvider(t)&&logger$6.throwArgumentError("invalid provider","provider",t),defineReadOnly(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Wallet(this,e)}signTransaction(e){return resolveProperties(e).then(t=>{t.from!=null&&(getAddress(t.from)!==this.address&&logger$6.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);const o=this._signingKey().signDigest(keccak256$2(serialize(t)));return serialize(t,o)})}signMessage(e){return __awaiter$4(this,void 0,void 0,function*(){return joinSignature(this._signingKey().signDigest(hashMessage(e)))})}_signTypedData(e,t,o){return __awaiter$4(this,void 0,void 0,function*(){const c=yield TypedDataEncoder.resolveNames(e,t,o,l=>(this.provider==null&&logger$6.throwError("cannot resolve ENS names without a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:l}),this.provider.resolveName(l)));return joinSignature(this._signingKey().signDigest(TypedDataEncoder.hash(c.domain,t,c.value)))})}encrypt(e,t,o){if(typeof t=="function"&&!o&&(o=t,t={}),o&&typeof o!="function")throw new Error("invalid callback");return t||(t={}),encrypt(this,e,t,o)}static createRandom(e){let t=randomBytes(16);e||(e={}),e.extraEntropy&&(t=arrayify(hexDataSlice(keccak256$2(concat$1([t,e.extraEntropy])),0,16)));const o=entropyToMnemonic(t,e.locale);return Wallet.fromMnemonic(o,e.path,e.locale)}static fromEncryptedJson(e,t,o){return decryptJsonWallet(e,t,o).then(c=>new Wallet(c))}static fromEncryptedJsonSync(e,t){return new Wallet(decryptJsonWalletSync(e,t))}static fromMnemonic(e,t,o){return t||(t=defaultPath),new Wallet(HDNode.fromMnemonic(e,null,o).derivePath(t))}}const version$3="networks/5.7.1",logger$5=new Logger(version$3);function isRenetworkable(n){return n&&typeof n.renetwork=="function"}function ethDefaultProvider(n){const e=function(t,o){o==null&&(o={});const c=[];if(t.InfuraProvider&&o.infura!=="-")try{c.push(new t.InfuraProvider(n,o.infura))}catch{}if(t.EtherscanProvider&&o.etherscan!=="-")try{c.push(new t.EtherscanProvider(n,o.etherscan))}catch{}if(t.AlchemyProvider&&o.alchemy!=="-")try{c.push(new t.AlchemyProvider(n,o.alchemy))}catch{}if(t.PocketProvider&&o.pocket!=="-"){const l=["goerli","ropsten","rinkeby","sepolia"];try{const h=new t.PocketProvider(n,o.pocket);h.network&&l.indexOf(h.network.name)===-1&&c.push(h)}catch{}}if(t.CloudflareProvider&&o.cloudflare!=="-")try{c.push(new t.CloudflareProvider(n))}catch{}if(t.AnkrProvider&&o.ankr!=="-")try{const l=["ropsten"],h=new t.AnkrProvider(n,o.ankr);h.network&&l.indexOf(h.network.name)===-1&&c.push(h)}catch{}if(c.length===0)return null;if(t.FallbackProvider){let l=1;return o.quorum!=null?l=o.quorum:n==="homestead"&&(l=2),new t.FallbackProvider(c,l)}return c[0]};return e.renetwork=function(t){return ethDefaultProvider(t)},e}function etcDefaultProvider(n,e){const t=function(o,c){return o.JsonRpcProvider?new o.JsonRpcProvider(n,e):null};return t.renetwork=function(o){return etcDefaultProvider(n,o)},t}const homestead={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ethDefaultProvider("homestead")},ropsten={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ethDefaultProvider("ropsten")},classicMordor={chainId:63,name:"classicMordor",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/mordor","classicMordor")},networks={unspecified:{chainId:0,name:"unspecified"},homestead,mainnet:homestead,morden:{chainId:2,name:"morden"},ropsten,testnet:ropsten,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ethDefaultProvider("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ethDefaultProvider("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ethDefaultProvider("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:ethDefaultProvider("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor,classicTestnet:classicMordor,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ethDefaultProvider("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:ethDefaultProvider("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function getNetwork(n){if(n==null)return null;if(typeof n=="number"){for(const o in networks){const c=networks[o];if(c.chainId===n)return{name:c.name,chainId:c.chainId,ensAddress:c.ensAddress||null,_defaultProvider:c._defaultProvider||null}}return{chainId:n,name:"unknown"}}if(typeof n=="string"){const o=networks[n];return o==null?null:{name:o.name,chainId:o.chainId,ensAddress:o.ensAddress,_defaultProvider:o._defaultProvider||null}}const e=networks[n.name];if(!e)return typeof n.chainId!="number"&&logger$5.throwArgumentError("invalid network chainId","network",n),n;n.chainId!==0&&n.chainId!==e.chainId&&logger$5.throwArgumentError("network chainId mismatch","network",n);let t=n._defaultProvider||null;return t==null&&e._defaultProvider&&(isRenetworkable(e._defaultProvider)?t=e._defaultProvider.renetwork(n):t=e._defaultProvider),{name:n.name,chainId:e.chainId,ensAddress:n.ensAddress||e.ensAddress||null,_defaultProvider:t}}const version$2="web/5.7.1";var __awaiter$3=globalThis&&globalThis.__awaiter||function(n,e,t,o){function c(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(v){try{m(o.next(v))}catch(_){h(_)}}function g(v){try{m(o.throw(v))}catch(_){h(_)}}function m(v){v.done?l(v.value):c(v.value).then(d,g)}m((o=o.apply(n,e||[])).next())})};function getUrl(n,e){return __awaiter$3(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const h=e.fetchOptions;h.mode&&(t.mode=h.mode),h.cache&&(t.cache=h.cache),h.credentials&&(t.credentials=h.credentials),h.redirect&&(t.redirect=h.redirect),h.referrer&&(t.referrer=h.referrer)}const o=yield fetch(n,t),c=yield o.arrayBuffer(),l={};return o.headers.forEach?o.headers.forEach((h,d)=>{l[d.toLowerCase()]=h}):o.headers.keys().forEach(h=>{l[h.toLowerCase()]=o.headers.get(h)}),{headers:l,statusCode:o.status,statusMessage:o.statusText,body:arrayify(new Uint8Array(c))}})}var __awaiter$2=globalThis&&globalThis.__awaiter||function(n,e,t,o){function c(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(v){try{m(o.next(v))}catch(_){h(_)}}function g(v){try{m(o.throw(v))}catch(_){h(_)}}function m(v){v.done?l(v.value):c(v.value).then(d,g)}m((o=o.apply(n,e||[])).next())})};const logger$4=new Logger(version$2);function staller(n){return new Promise(e=>{setTimeout(e,n)})}function bodyify(n,e){if(n==null)return null;if(typeof n=="string")return n;if(isBytesLike(n)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return toUtf8String(n)}catch{}return hexlify(n)}return n}function unpercent(n){return toUtf8Bytes(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function _fetchData(n,e,t){const o=typeof n=="object"&&n.throttleLimit!=null?n.throttleLimit:12;logger$4.assertArgument(o>0&&o%1===0,"invalid connection throttle limit","connection.throttleLimit",o);const c=typeof n=="object"?n.throttleCallback:null,l=typeof n=="object"&&typeof n.throttleSlotInterval=="number"?n.throttleSlotInterval:100;logger$4.assertArgument(l>0&&l%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",l);const h=typeof n=="object"?!!n.errorPassThrough:!1,d={};let g=null;const m={method:"GET"};let v=!1,_=2*60*1e3;if(typeof n=="string")g=n;else if(typeof n=="object"){if((n==null||n.url==null)&&logger$4.throwArgumentError("missing URL","connection.url",n),g=n.url,typeof n.timeout=="number"&&n.timeout>0&&(_=n.timeout),n.headers)for(const w in n.headers)d[w.toLowerCase()]={key:w,value:String(n.headers[w])},["if-none-match","if-modified-since"].indexOf(w.toLowerCase())>=0&&(v=!0);if(m.allowGzip=!!n.allowGzip,n.user!=null&&n.password!=null){g.substring(0,6)!=="https:"&&n.allowInsecureAuthentication!==!0&&logger$4.throwError("basic authentication requires a secure https url",Logger.errors.INVALID_ARGUMENT,{argument:"url",url:g,user:n.user,password:"[REDACTED]"});const w=n.user+":"+n.password;d.authorization={key:"Authorization",value:"Basic "+encode$7(toUtf8Bytes(w))}}n.skipFetchSetup!=null&&(m.skipFetchSetup=!!n.skipFetchSetup),n.fetchOptions!=null&&(m.fetchOptions=shallowCopy(n.fetchOptions))}const p=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),a=g?g.match(p):null;if(a)try{const w={statusCode:200,statusMessage:"OK",headers:{"content-type":a[1]||"text/plain"},body:a[2]?decode$7(a[3]):unpercent(a[3])};let T=w.body;return t&&(T=t(w.body,w)),Promise.resolve(T)}catch(w){logger$4.throwError("processing response error",Logger.errors.SERVER_ERROR,{body:bodyify(a[1],a[2]),error:w,requestBody:null,requestMethod:"GET",url:g})}e&&(m.method="POST",m.body=e,d["content-type"]==null&&(d["content-type"]={key:"Content-Type",value:"application/octet-stream"}),d["content-length"]==null&&(d["content-length"]={key:"Content-Length",value:String(e.length)}));const u={};Object.keys(d).forEach(w=>{const T=d[w];u[T.key]=T.value}),m.headers=u;const y=function(){let w=null;return{promise:new Promise(function(H,J){_&&(w=setTimeout(()=>{w!=null&&(w=null,J(logger$4.makeError("timeout",Logger.errors.TIMEOUT,{requestBody:bodyify(m.body,u["content-type"]),requestMethod:m.method,timeout:_,url:g})))},_))}),cancel:function(){w!=null&&(clearTimeout(w),w=null)}}}(),b=function(){return __awaiter$2(this,void 0,void 0,function*(){for(let w=0;w<o;w++){let T=null;try{if(T=yield getUrl(g,m),w<o){if(T.statusCode===301||T.statusCode===302){const H=T.headers.location||"";if(m.method==="GET"&&H.match(/^https:/)){g=T.headers.location;continue}}else if(T.statusCode===429){let H=!0;if(c&&(H=yield c(w,g)),H){let J=0;const W=T.headers["retry-after"];typeof W=="string"&&W.match(/^[1-9][0-9]*$/)?J=parseInt(W)*1e3:J=l*parseInt(String(Math.random()*Math.pow(2,w))),yield staller(J);continue}}}}catch(H){T=H.response,T==null&&(y.cancel(),logger$4.throwError("missing response",Logger.errors.SERVER_ERROR,{requestBody:bodyify(m.body,u["content-type"]),requestMethod:m.method,serverError:H,url:g}))}let B=T.body;if(v&&T.statusCode===304?B=null:!h&&(T.statusCode<200||T.statusCode>=300)&&(y.cancel(),logger$4.throwError("bad response",Logger.errors.SERVER_ERROR,{status:T.statusCode,headers:T.headers,body:bodyify(B,T.headers?T.headers["content-type"]:null),requestBody:bodyify(m.body,u["content-type"]),requestMethod:m.method,url:g})),t)try{const H=yield t(B,T);return y.cancel(),H}catch(H){if(H.throttleRetry&&w<o){let J=!0;if(c&&(J=yield c(w,g)),J){const W=l*parseInt(String(Math.random()*Math.pow(2,w)));yield staller(W);continue}}y.cancel(),logger$4.throwError("processing response error",Logger.errors.SERVER_ERROR,{body:bodyify(B,T.headers?T.headers["content-type"]:null),error:H,requestBody:bodyify(m.body,u["content-type"]),requestMethod:m.method,url:g})}return y.cancel(),B}return logger$4.throwError("failed response",Logger.errors.SERVER_ERROR,{requestBody:bodyify(m.body,u["content-type"]),requestMethod:m.method,url:g})})}();return Promise.race([y.promise,b])}function fetchJson(n,e,t){let o=(l,h)=>{let d=null;if(l!=null)try{d=JSON.parse(toUtf8String(l))}catch(g){logger$4.throwError("invalid JSON",Logger.errors.SERVER_ERROR,{body:l,error:g})}return t&&(d=t(d,h)),d},c=null;if(e!=null){c=toUtf8Bytes(e);const l=typeof n=="string"?{url:n}:shallowCopy(n);l.headers?Object.keys(l.headers).filter(d=>d.toLowerCase()==="content-type").length!==0||(l.headers=shallowCopy(l.headers),l.headers["content-type"]="application/json"):l.headers={"content-type":"application/json"},n=l}return _fetchData(n,c,o)}function poll(n,e){return e||(e={}),e=shallowCopy(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,o){let c=null,l=!1;const h=()=>l?!1:(l=!0,c&&clearTimeout(c),!0);e.timeout&&(c=setTimeout(()=>{h()&&o(new Error("timeout"))},e.timeout));const d=e.retryLimit;let g=0;function m(){return n().then(function(v){if(v!==void 0)h()&&t(v);else if(e.oncePoll)e.oncePoll.once("poll",m);else if(e.onceBlock)e.onceBlock.once("block",m);else if(!l){if(g++,g>d){h()&&o(new Error("retry limit reached"));return}let _=e.interval*parseInt(String(Math.random()*Math.pow(2,g)));_<e.floor&&(_=e.floor),_>e.ceiling&&(_=e.ceiling),setTimeout(m,_)}return null},function(v){h()&&o(v)})}m()})}var ALPHABET$1="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={};for(var z=0;z<ALPHABET$1.length;z++){var x=ALPHABET$1.charAt(z);if(ALPHABET_MAP[x]!==void 0)throw new TypeError(x+" is ambiguous");ALPHABET_MAP[x]=z}function polymodStep(n){var e=n>>25;return(n&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function prefixChk(n){for(var e=1,t=0;t<n.length;++t){var o=n.charCodeAt(t);if(o<33||o>126)return"Invalid prefix ("+n+")";e=polymodStep(e)^o>>5}for(e=polymodStep(e),t=0;t<n.length;++t){var c=n.charCodeAt(t);e=polymodStep(e)^c&31}return e}function encode$6(n,e,t){if(t=t||90,n.length+7+e.length>t)throw new TypeError("Exceeds length limit");n=n.toLowerCase();var o=prefixChk(n);if(typeof o=="string")throw new Error(o);for(var c=n+"1",l=0;l<e.length;++l){var h=e[l];if(h>>5)throw new Error("Non 5-bit word");o=polymodStep(o)^h,c+=ALPHABET$1.charAt(h)}for(l=0;l<6;++l)o=polymodStep(o);for(o^=1,l=0;l<6;++l){var d=o>>(5-l)*5&31;c+=ALPHABET$1.charAt(d)}return c}function __decode(n,e){if(e=e||90,n.length<8)return n+" too short";if(n.length>e)return"Exceeds length limit";var t=n.toLowerCase(),o=n.toUpperCase();if(n!==t&&n!==o)return"Mixed-case string "+n;n=t;var c=n.lastIndexOf("1");if(c===-1)return"No separator character for "+n;if(c===0)return"Missing prefix for "+n;var l=n.slice(0,c),h=n.slice(c+1);if(h.length<6)return"Data too short";var d=prefixChk(l);if(typeof d=="string")return d;for(var g=[],m=0;m<h.length;++m){var v=h.charAt(m),_=ALPHABET_MAP[v];if(_===void 0)return"Unknown character "+v;d=polymodStep(d)^_,!(m+6>=h.length)&&g.push(_)}return d!==1?"Invalid checksum for "+n:{prefix:l,words:g}}function decodeUnsafe(){var n=__decode.apply(null,arguments);if(typeof n=="object")return n}function decode$6(n){var e=__decode.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function convert(n,e,t,o){for(var c=0,l=0,h=(1<<t)-1,d=[],g=0;g<n.length;++g)for(c=c<<e|n[g],l+=e;l>=t;)l-=t,d.push(c>>l&h);if(o)l>0&&d.push(c<<t-l&h);else{if(l>=e)return"Excess padding";if(c<<t-l&h)return"Non-zero padding"}return d}function toWordsUnsafe(n){var e=convert(n,8,5,!0);if(Array.isArray(e))return e}function toWords(n){var e=convert(n,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function fromWordsUnsafe(n){var e=convert(n,5,8,!1);if(Array.isArray(e))return e}function fromWords(n){var e=convert(n,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var bech32={decodeUnsafe,decode:decode$6,encode:encode$6,toWordsUnsafe,toWords,fromWordsUnsafe,fromWords};const bech32$1=getDefaultExportFromCjs(bech32),version$1="providers/5.7.2",logger$3=new Logger(version$1);class Formatter{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),o=this.bigNumber.bind(this),c=this.blockTag.bind(this),l=this.data.bind(this),h=this.hash.bind(this),d=this.hex.bind(this),g=this.number.bind(this),m=this.type.bind(this),v=_=>this.data(_,!0);return e.transaction={hash:h,type:m,accessList:Formatter.allowNull(this.accessList.bind(this),null),blockHash:Formatter.allowNull(h,null),blockNumber:Formatter.allowNull(g,null),transactionIndex:Formatter.allowNull(g,null),confirmations:Formatter.allowNull(g,null),from:t,gasPrice:Formatter.allowNull(o),maxPriorityFeePerGas:Formatter.allowNull(o),maxFeePerGas:Formatter.allowNull(o),gasLimit:o,to:Formatter.allowNull(t,null),value:o,nonce:g,data:l,r:Formatter.allowNull(this.uint256),s:Formatter.allowNull(this.uint256),v:Formatter.allowNull(g),creates:Formatter.allowNull(t,null),raw:Formatter.allowNull(l)},e.transactionRequest={from:Formatter.allowNull(t),nonce:Formatter.allowNull(g),gasLimit:Formatter.allowNull(o),gasPrice:Formatter.allowNull(o),maxPriorityFeePerGas:Formatter.allowNull(o),maxFeePerGas:Formatter.allowNull(o),to:Formatter.allowNull(t),value:Formatter.allowNull(o),data:Formatter.allowNull(v),type:Formatter.allowNull(g),accessList:Formatter.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:g,blockNumber:g,transactionHash:h,address:t,topics:Formatter.arrayOf(h),data:l,logIndex:g,blockHash:h},e.receipt={to:Formatter.allowNull(this.address,null),from:Formatter.allowNull(this.address,null),contractAddress:Formatter.allowNull(t,null),transactionIndex:g,root:Formatter.allowNull(d),gasUsed:o,logsBloom:Formatter.allowNull(l),blockHash:h,transactionHash:h,logs:Formatter.arrayOf(this.receiptLog.bind(this)),blockNumber:g,confirmations:Formatter.allowNull(g,null),cumulativeGasUsed:o,effectiveGasPrice:Formatter.allowNull(o),status:Formatter.allowNull(g),type:m},e.block={hash:Formatter.allowNull(h),parentHash:h,number:g,timestamp:g,nonce:Formatter.allowNull(d),difficulty:this.difficulty.bind(this),gasLimit:o,gasUsed:o,miner:Formatter.allowNull(t),extraData:l,transactions:Formatter.allowNull(Formatter.arrayOf(h)),baseFeePerGas:Formatter.allowNull(o)},e.blockWithTransactions=shallowCopy(e.block),e.blockWithTransactions.transactions=Formatter.allowNull(Formatter.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Formatter.allowNull(c,void 0),toBlock:Formatter.allowNull(c,void 0),blockHash:Formatter.allowNull(h,void 0),address:Formatter.allowNull(t,void 0),topics:Formatter.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Formatter.allowNull(g),blockHash:Formatter.allowNull(h),transactionIndex:g,removed:Formatter.allowNull(this.boolean.bind(this)),address:t,data:Formatter.allowFalsish(l,"0x"),topics:Formatter.arrayOf(h),transactionHash:h,logIndex:g},e}accessList(e){return accessListify(e||[])}number(e){return e==="0x"?0:BigNumber$1.from(e).toNumber()}type(e){return e==="0x"||e==null?0:BigNumber$1.from(e).toNumber()}bigNumber(e){return BigNumber$1.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),isHexString(e))?e.toLowerCase():logger$3.throwArgumentError("invalid hash","value",e)}data(e,t){const o=this.hex(e,t);if(o.length%2!==0)throw new Error("invalid data; odd-length - "+e);return o}address(e){return getAddress(e)}callAddress(e){if(!isHexString(e,32))return null;const t=getAddress(hexDataSlice(e,12));return t===AddressZero?null:t}contractAddress(e){return getContractAddress(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||isHexString(e))return hexValue(e);throw new Error("invalid blockTag")}hash(e,t){const o=this.hex(e,t);return hexDataLength(o)!==32?logger$3.throwArgumentError("invalid hash","value",e):o}difficulty(e){if(e==null)return null;const t=BigNumber$1.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!isHexString(e))throw new Error("invalid uint256");return hexZeroPad(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const o=e._difficulty!=null?e._difficulty:e.difficulty,c=Formatter.check(t,e);return c._difficulty=o==null?null:BigNumber$1.from(o),c}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Formatter.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&BigNumber$1.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=Formatter.check(this.formats.transaction,e);if(e.chainId!=null){let o=e.chainId;isHexString(o)&&(o=BigNumber$1.from(o).toNumber()),t.chainId=o}else{let o=e.networkId;o==null&&t.v==null&&(o=e.chainId),isHexString(o)&&(o=BigNumber$1.from(o).toNumber()),typeof o!="number"&&t.v!=null&&(o=(t.v-35)/2,o<0&&(o=0),o=parseInt(o)),typeof o!="number"&&(o=0),t.chainId=o}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return parse(e)}receiptLog(e){return Formatter.check(this.formats.receiptLog,e)}receipt(e){const t=Formatter.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const o=BigNumber$1.from(t.root).toNumber();o===0||o===1?(t.status!=null&&t.status!==o&&logger$3.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=o,delete t.root):logger$3.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&logger$3.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return Formatter.check(this.formats.filter,e)}filterLog(e){return Formatter.check(this.formats.filterLog,e)}static check(e,t){const o={};for(const c in e)try{const l=e[c](t[c]);l!==void 0&&(o[c]=l)}catch(l){throw l.checkKey=c,l.checkValue=t[c],l}return o}static allowNull(e,t){return function(o){return o==null?t:e(o)}}static allowFalsish(e,t){return function(o){return o?e(o):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const o=[];return t.forEach(function(c){o.push(e(c))}),o}}}var __awaiter$1=globalThis&&globalThis.__awaiter||function(n,e,t,o){function c(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(v){try{m(o.next(v))}catch(_){h(_)}}function g(v){try{m(o.throw(v))}catch(_){h(_)}}function m(v){v.done?l(v.value):c(v.value).then(d,g)}m((o=o.apply(n,e||[])).next())})};const logger$2=new Logger(version$1),MAX_CCIP_REDIRECTS=10;function checkTopic(n){return n==null?"null":(hexDataLength(n)!==32&&logger$2.throwArgumentError("invalid topic","topic",n),n.toLowerCase())}function serializeTopics(n){for(n=n.slice();n.length>0&&n[n.length-1]==null;)n.pop();return n.map(e=>{if(Array.isArray(e)){const t={};e.forEach(c=>{t[checkTopic(c)]=!0});const o=Object.keys(t);return o.sort(),o.join("|")}else return checkTopic(e)}).join("&")}function deserializeTopics(n){return n===""?[]:n.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(o=>o==="null"?null:o);return t.length===1?t[0]:t})}function getEventTag(n){if(typeof n=="string"){if(n=n.toLowerCase(),hexDataLength(n)===32)return"tx:"+n;if(n.indexOf(":")===-1)return n}else{if(Array.isArray(n))return"filter:*:"+serializeTopics(n);if(ForkEvent.isForkEvent(n))throw logger$2.warn("not implemented"),new Error("not implemented");if(n&&typeof n=="object")return"filter:"+(n.address||"*")+":"+serializeTopics(n.topics||[])}throw new Error("invalid event - "+n)}function getTime(){return new Date().getTime()}function stall(n){return new Promise(e=>{setTimeout(e,n)})}const PollableEvents=["block","network","pending","poll"];let Event$1=class{constructor(e,t,o){defineReadOnly(this,"tag",e),defineReadOnly(this,"listener",t),defineReadOnly(this,"once",o),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],o=deserializeTopics(e[2]),c={};return o.length>0&&(c.topics=o),t&&t!=="*"&&(c.address=t),c}pollable(){return this.tag.indexOf(":")>=0||PollableEvents.indexOf(this.tag)>=0}};const coinInfos={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function bytes32ify(n){return hexZeroPad(BigNumber$1.from(n).toHexString(),32)}function base58Encode(n){return Base58.encode(concat$1([n,hexDataSlice(sha256$1(sha256$1(n)),0,4)]))}const matcherIpfs=new RegExp("^(ipfs)://(.*)$","i"),matchers=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),matcherIpfs,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function _parseString(n,e){try{return toUtf8String(_parseBytes(n,e))}catch{}return null}function _parseBytes(n,e){if(n==="0x")return null;const t=BigNumber$1.from(hexDataSlice(n,e,e+32)).toNumber(),o=BigNumber$1.from(hexDataSlice(n,t,t+32)).toNumber();return hexDataSlice(n,t+32,t+32+o)}function getIpfsLink(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):logger$2.throwArgumentError("unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}function numPad(n){const e=arrayify(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function bytesPad(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}function encodeBytes(n){const e=[];let t=0;for(let o=0;o<n.length;o++)e.push(null),t+=32;for(let o=0;o<n.length;o++){const c=arrayify(n[o]);e[o]=numPad(t),e.push(numPad(c.length)),e.push(bytesPad(c)),t+=32+Math.ceil(c.length/32)*32}return hexConcat(e)}class Resolver{constructor(e,t,o,c){defineReadOnly(this,"provider",e),defineReadOnly(this,"name",o),defineReadOnly(this,"address",e.formatter.address(t)),defineReadOnly(this,"_resolvedAddress",c)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>BigNumber$1.from(e).eq(1)).catch(e=>{if(e.code===Logger.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return __awaiter$1(this,void 0,void 0,function*(){const o={to:this.address,ccipReadEnabled:!0,data:hexConcat([e,namehash(this.name),t||"0x"])};let c=!1;(yield this.supportsWildcard())&&(c=!0,o.data=hexConcat(["0x9061b923",encodeBytes([dnsEncode(this.name),o.data])]));try{let l=yield this.provider.call(o);return arrayify(l).length%32===4&&logger$2.throwError("resolver threw error",Logger.errors.CALL_EXCEPTION,{transaction:o,data:l}),c&&(l=_parseBytes(l,0)),l}catch(l){if(l.code===Logger.errors.CALL_EXCEPTION)return null;throw l}})}_fetchBytes(e,t){return __awaiter$1(this,void 0,void 0,function*(){const o=yield this._fetch(e,t);return o!=null?_parseBytes(o,0):null})}_getAddress(e,t){const o=coinInfos[String(e)];if(o==null&&logger$2.throwError(`unsupported coin type: ${e}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),o.ilk==="eth")return this.provider.formatter.address(t);const c=arrayify(t);if(o.p2pkh!=null){const l=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(l){const h=parseInt(l[1],16);if(l[2].length===h*2&&h>=1&&h<=75)return base58Encode(concat$1([[o.p2pkh],"0x"+l[2]]))}}if(o.p2sh!=null){const l=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(l){const h=parseInt(l[1],16);if(l[2].length===h*2&&h>=1&&h<=75)return base58Encode(concat$1([[o.p2sh],"0x"+l[2]]))}}if(o.prefix!=null){const l=c[1];let h=c[0];if(h===0?l!==20&&l!==32&&(h=-1):h=-1,h>=0&&c.length===2+l&&l>=1&&l<=75){const d=bech32$1.toWords(c.slice(2));return d.unshift(h),bech32$1.encode(o.prefix,d)}}return null}getAddress(e){return __awaiter$1(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const c=yield this._fetch("0x3b3b57de");return c==="0x"||c===HashZero?null:this.provider.formatter.callAddress(c)}catch(c){if(c.code===Logger.errors.CALL_EXCEPTION)return null;throw c}const t=yield this._fetchBytes("0xf1cb7e06",bytes32ify(e));if(t==null||t==="0x")return null;const o=this._getAddress(e,t);return o==null&&logger$2.throwError("invalid or unsupported coin data",Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),o})}getAvatar(){return __awaiter$1(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let o=0;o<matchers.length;o++){const c=t.match(matchers[o]);if(c==null)continue;const l=c[1].toLowerCase();switch(l){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:getIpfsLink(t)};case"erc721":case"erc1155":{const h=l==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:l,content:t});const d=this._resolvedAddress||(yield this.getAddress()),g=(c[2]||"").split("/");if(g.length!==2)return null;const m=yield this.provider.formatter.address(g[0]),v=hexZeroPad(BigNumber$1.from(g[1]).toHexString(),32);if(l==="erc721"){const y=this.provider.formatter.callAddress(yield this.provider.call({to:m,data:hexConcat(["0x6352211e",v])}));if(d!==y)return null;e.push({type:"owner",content:y})}else if(l==="erc1155"){const y=BigNumber$1.from(yield this.provider.call({to:m,data:hexConcat(["0x00fdd58e",hexZeroPad(d,32),v])}));if(y.isZero())return null;e.push({type:"balance",content:y.toString()})}const _={to:this.provider.formatter.address(g[0]),data:hexConcat([h,v])};let p=_parseString(yield this.provider.call(_),0);if(p==null)return null;e.push({type:"metadata-url-base",content:p}),l==="erc1155"&&(p=p.replace("{id}",v.substring(2)),e.push({type:"metadata-url-expanded",content:p})),p.match(/^ipfs:/i)&&(p=getIpfsLink(p)),e.push({type:"metadata-url",content:p});const a=yield fetchJson(p);if(!a)return null;e.push({type:"metadata",content:JSON.stringify(a)});let u=a.image;if(typeof u!="string")return null;if(!u.match(/^(https:\/\/|data:)/i)){if(u.match(matcherIpfs)==null)return null;e.push({type:"url-ipfs",content:u}),u=getIpfsLink(u)}return e.push({type:"url",content:u}),{linkage:e,url:u}}}}}catch{}return null})}getContentHash(){return __awaiter$1(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const h=parseInt(t[3],16);if(t[4].length===h*2)return"ipfs://"+Base58.encode("0x"+t[1])}const o=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(o){const h=parseInt(o[3],16);if(o[4].length===h*2)return"ipns://"+Base58.encode("0x"+o[1])}const c=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(c&&c[1].length===32*2)return"bzz://"+c[1];const l=e.match(/^0x90b2c605([0-9a-f]*)$/);if(l&&l[1].length===34*2){const h={"=":"","+":"-","/":"_"};return"sia://"+encode$7("0x"+l[1]).replace(/[=+\/]/g,g=>h[g])}return logger$2.throwError("invalid or unsupported content hash data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return __awaiter$1(this,void 0,void 0,function*(){let t=toUtf8Bytes(e);t=concat$1([bytes32ify(64),bytes32ify(t.length),t]),t.length%32!==0&&(t=concat$1([t,hexZeroPad("0x",32-e.length%32)]));const o=yield this._fetchBytes("0x59d1d43c",hexlify(t));return o==null||o==="0x"?null:toUtf8String(o)})}}let defaultFormatter=null,nextPollId=1;class BaseProvider extends Provider{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),defineReadOnly(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=getStatic(new.target,"getNetwork")(e);t?(defineReadOnly(this,"_network",t),this.emit("network",t,null)):logger$2.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return __awaiter$1(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||logger$2.throwError("no network detected",Logger.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:defineReadOnly(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return poll(()=>this._ready().then(e=>e,e=>{if(!(e.code===Logger.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return defaultFormatter==null&&(defaultFormatter=new Formatter),defaultFormatter}static getNetwork(e){return getNetwork(e??"homestead")}ccipReadFetch(e,t,o){return __awaiter$1(this,void 0,void 0,function*(){if(this.disableCcipRead||o.length===0)return null;const c=e.to.toLowerCase(),l=t.toLowerCase(),h=[];for(let d=0;d<o.length;d++){const g=o[d],m=g.replace("{sender}",c).replace("{data}",l),v=g.indexOf("{data}")>=0?null:JSON.stringify({data:l,sender:c}),_=yield fetchJson({url:m,errorPassThrough:!0},v,(a,u)=>(a.status=u.statusCode,a));if(_.data)return _.data;const p=_.message||"unknown error";if(_.status>=400&&_.status<500)return logger$2.throwError(`response not found during CCIP fetch: ${p}`,Logger.errors.SERVER_ERROR,{url:g,errorMessage:p});h.push(p)}return logger$2.throwError(`error encountered during CCIP fetch: ${h.map(d=>JSON.stringify(d)).join(", ")}`,Logger.errors.SERVER_ERROR,{urls:o,errorMessages:h})})}_getInternalBlockNumber(e){return __awaiter$1(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const c=this._internalBlockNumber;try{const l=yield c;if(getTime()-l.respTime<=e)return l.blockNumber;break}catch{if(this._internalBlockNumber===c)break}}const t=getTime(),o=resolveProperties({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(c=>null,c=>c)}).then(({blockNumber:c,networkError:l})=>{if(l)throw this._internalBlockNumber===o&&(this._internalBlockNumber=null),l;const h=getTime();return c=BigNumber$1.from(c).toNumber(),c<this._maxInternalBlockNumber&&(c=this._maxInternalBlockNumber),this._maxInternalBlockNumber=c,this._setFastBlockNumber(c),{blockNumber:c,reqTime:t,respTime:h}});return this._internalBlockNumber=o,o.catch(c=>{this._internalBlockNumber===o&&(this._internalBlockNumber=null)}),(yield o).blockNumber})}poll(){return __awaiter$1(this,void 0,void 0,function*(){const e=nextPollId++,t=[];let o=null;try{o=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(c){this.emit("error",c);return}if(this._setFastBlockNumber(o),this.emit("poll",e,o),o===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=o-1),Math.abs(this._emitted.block-o)>1e3)logger$2.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${o})`),this.emit("error",logger$2.makeError("network block skew detected",Logger.errors.NETWORK_ERROR,{blockNumber:o,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",o);else for(let c=this._emitted.block+1;c<=o;c++)this.emit("block",c);this._emitted.block!==o&&(this._emitted.block=o,Object.keys(this._emitted).forEach(c=>{if(c==="block")return;const l=this._emitted[c];l!=="pending"&&o-l>12&&delete this._emitted[c]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=o-1),this._events.forEach(c=>{switch(c.type){case"tx":{const l=c.hash;let h=this.getTransactionReceipt(l).then(d=>(!d||d.blockNumber==null||(this._emitted["t:"+l]=d.blockNumber,this.emit(l,d)),null)).catch(d=>{this.emit("error",d)});t.push(h);break}case"filter":{if(!c._inflight){c._inflight=!0,c._lastBlockNumber===-2&&(c._lastBlockNumber=o-1);const l=c.filter;l.fromBlock=c._lastBlockNumber+1,l.toBlock=o;const h=l.toBlock-this._maxFilterBlockRange;h>l.fromBlock&&(l.fromBlock=h),l.fromBlock<0&&(l.fromBlock=0);const d=this.getLogs(l).then(g=>{c._inflight=!1,g.length!==0&&g.forEach(m=>{m.blockNumber>c._lastBlockNumber&&(c._lastBlockNumber=m.blockNumber),this._emitted["b:"+m.blockHash]=m.blockNumber,this._emitted["t:"+m.transactionHash]=m.blockNumber,this.emit(l,m)})}).catch(g=>{this.emit("error",g),c._inflight=!1});t.push(d)}break}}}),this._lastBlockNumber=o,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(c=>{this.emit("error",c)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return __awaiter$1(this,void 0,void 0,function*(){return logger$2.throwError("provider does not support network detection",Logger.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return __awaiter$1(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield stall(0),this._network;const o=logger$2.makeError("underlying network changed",Logger.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",o),o}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=getTime();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=getTime(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,o){return __awaiter$1(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,o||0,null)})}_waitForTransaction(e,t,o,c){return __awaiter$1(this,void 0,void 0,function*(){const l=yield this.getTransactionReceipt(e);return(l?l.confirmations:0)>=t?l:new Promise((h,d)=>{const g=[];let m=!1;const v=function(){return m?!0:(m=!0,g.forEach(p=>{p()}),!1)},_=p=>{p.confirmations<t||v()||h(p)};if(this.on(e,_),g.push(()=>{this.removeListener(e,_)}),c){let p=c.startBlock,a=null;const u=y=>__awaiter$1(this,void 0,void 0,function*(){m||(yield stall(1e3),this.getTransactionCount(c.from).then(b=>__awaiter$1(this,void 0,void 0,function*(){if(!m){if(b<=c.nonce)p=y;else{{const w=yield this.getTransaction(e);if(w&&w.blockNumber!=null)return}for(a==null&&(a=p-3,a<c.startBlock&&(a=c.startBlock));a<=y;){if(m)return;const w=yield this.getBlockWithTransactions(a);for(let T=0;T<w.transactions.length;T++){const B=w.transactions[T];if(B.hash===e)return;if(B.from===c.from&&B.nonce===c.nonce){if(m)return;const H=yield this.waitForTransaction(B.hash,t);if(v())return;let J="replaced";B.data===c.data&&B.to===c.to&&B.value.eq(c.value)?J="repriced":B.data==="0x"&&B.from===B.to&&B.value.isZero()&&(J="cancelled"),d(logger$2.makeError("transaction was replaced",Logger.errors.TRANSACTION_REPLACED,{cancelled:J==="replaced"||J==="cancelled",reason:J,replacement:this._wrapTransaction(B),hash:e,receipt:H}));return}}a++}}m||this.once("block",u)}}),b=>{m||this.once("block",u)}))});if(m)return;this.once("block",u),g.push(()=>{this.removeListener("block",u)})}if(typeof o=="number"&&o>0){const p=setTimeout(()=>{v()||d(logger$2.makeError("timeout exceeded",Logger.errors.TIMEOUT,{timeout:o}))},o);p.unref&&p.unref(),g.push(()=>{clearTimeout(p)})}})})}getBlockNumber(){return __awaiter$1(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return BigNumber$1.from(e)}catch(t){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const o=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),c=yield this.perform("getBalance",o);try{return BigNumber$1.from(c)}catch(l){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getBalance",params:o,result:c,error:l})}})}getTransactionCount(e,t){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const o=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),c=yield this.perform("getTransactionCount",o);try{return BigNumber$1.from(c).toNumber()}catch(l){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getTransactionCount",params:o,result:c,error:l})}})}getCode(e,t){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const o=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),c=yield this.perform("getCode",o);try{return hexlify(c)}catch(l){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getCode",params:o,result:c,error:l})}})}getStorageAt(e,t,o){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const c=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(o),position:Promise.resolve(t).then(h=>hexValue(h))}),l=yield this.perform("getStorageAt",c);try{return hexlify(l)}catch(h){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getStorageAt",params:c,result:l,error:h})}})}_wrapTransaction(e,t,o){if(t!=null&&hexDataLength(t)!==32)throw new Error("invalid response - sendTransaction");const c=e;return t!=null&&e.hash!==t&&logger$2.throwError("Transaction hash mismatch from Provider.sendTransaction.",Logger.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),c.wait=(l,h)=>__awaiter$1(this,void 0,void 0,function*(){l==null&&(l=1),h==null&&(h=0);let d;l!==0&&o!=null&&(d={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:o});const g=yield this._waitForTransaction(e.hash,l,h,d);return g==null&&l===0?null:(this._emitted["t:"+e.hash]=g.blockNumber,g.status===0&&logger$2.throwError("transaction failed",Logger.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:g}),g)}),c}sendTransaction(e){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(l=>hexlify(l)),o=this.formatter.transaction(e);o.confirmations==null&&(o.confirmations=0);const c=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const l=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(o,l,c)}catch(l){throw l.transaction=o,l.transactionHash=o.hash,l}})}_getTransactionRequest(e){return __awaiter$1(this,void 0,void 0,function*(){const t=yield e,o={};return["from","to"].forEach(c=>{t[c]!=null&&(o[c]=Promise.resolve(t[c]).then(l=>l?this._getAddress(l):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(c=>{t[c]!=null&&(o[c]=Promise.resolve(t[c]).then(l=>l?BigNumber$1.from(l):null))}),["type"].forEach(c=>{t[c]!=null&&(o[c]=Promise.resolve(t[c]).then(l=>l??null))}),t.accessList&&(o.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(c=>{t[c]!=null&&(o[c]=Promise.resolve(t[c]).then(l=>l?hexlify(l):null))}),this.formatter.transactionRequest(yield resolveProperties(o))})}_getFilter(e){return __awaiter$1(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(o=>{e[o]!=null&&(t[o]=e[o])}),["fromBlock","toBlock"].forEach(o=>{e[o]!=null&&(t[o]=this._getBlockTag(e[o]))}),this.formatter.filter(yield resolveProperties(t))})}_call(e,t,o){return __awaiter$1(this,void 0,void 0,function*(){o>=MAX_CCIP_REDIRECTS&&logger$2.throwError("CCIP read exceeded maximum redirections",Logger.errors.SERVER_ERROR,{redirects:o,transaction:e});const c=e.to,l=yield this.perform("call",{transaction:e,blockTag:t});if(o>=0&&t==="latest"&&c!=null&&l.substring(0,10)==="0x556f1830"&&hexDataLength(l)%32===4)try{const h=hexDataSlice(l,4),d=hexDataSlice(h,0,32);BigNumber$1.from(d).eq(c)||logger$2.throwError("CCIP Read sender did not match",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:l});const g=[],m=BigNumber$1.from(hexDataSlice(h,32,64)).toNumber(),v=BigNumber$1.from(hexDataSlice(h,m,m+32)).toNumber(),_=hexDataSlice(h,m+32);for(let w=0;w<v;w++){const T=_parseString(_,w*32);T==null&&logger$2.throwError("CCIP Read contained corrupt URL string",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:l}),g.push(T)}const p=_parseBytes(h,64);BigNumber$1.from(hexDataSlice(h,100,128)).isZero()||logger$2.throwError("CCIP Read callback selector included junk",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:l});const a=hexDataSlice(h,96,100),u=_parseBytes(h,128),y=yield this.ccipReadFetch(e,p,g);y==null&&logger$2.throwError("CCIP Read disabled or provided no URLs",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:l});const b={to:c,data:hexConcat([a,encodeBytes([y,u])])};return this._call(b,t,o+1)}catch(h){if(h.code===Logger.errors.SERVER_ERROR)throw h}try{return hexlify(l)}catch(h){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:l,error:h})}})}call(e,t){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const o=yield resolveProperties({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(o.transaction,o.blockTag,o.ccipReadEnabled?0:-1)})}estimateGas(e){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield resolveProperties({transaction:this._getTransactionRequest(e)}),o=yield this.perform("estimateGas",t);try{return BigNumber$1.from(o)}catch(c){return logger$2.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:o,error:c})}})}_getAddress(e){return __awaiter$1(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&logger$2.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&logger$2.throwError("ENS name not configured",Logger.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let o=-128;const c={includeTransactions:!!t};if(isHexString(e,32))c.blockHash=e;else try{c.blockTag=yield this._getBlockTag(e),isHexString(c.blockTag)&&(o=parseInt(c.blockTag.substring(2),16))}catch{logger$2.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return poll(()=>__awaiter$1(this,void 0,void 0,function*(){const l=yield this.perform("getBlock",c);if(l==null)return c.blockHash!=null&&this._emitted["b:"+c.blockHash]==null||c.blockTag!=null&&o>this._emitted.block?null:void 0;if(t){let h=null;for(let g=0;g<l.transactions.length;g++){const m=l.transactions[g];if(m.blockNumber==null)m.confirmations=0;else if(m.confirmations==null){h==null&&(h=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let v=h-m.blockNumber+1;v<=0&&(v=1),m.confirmations=v}}const d=this.formatter.blockWithTransactions(l);return d.transactions=d.transactions.map(g=>this._wrapTransaction(g)),d}return this.formatter.block(l)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return poll(()=>__awaiter$1(this,void 0,void 0,function*(){const o=yield this.perform("getTransaction",t);if(o==null)return this._emitted["t:"+e]==null?null:void 0;const c=this.formatter.transactionResponse(o);if(c.blockNumber==null)c.confirmations=0;else if(c.confirmations==null){let h=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-c.blockNumber+1;h<=0&&(h=1),c.confirmations=h}return this._wrapTransaction(c)}),{oncePoll:this})})}getTransactionReceipt(e){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return poll(()=>__awaiter$1(this,void 0,void 0,function*(){const o=yield this.perform("getTransactionReceipt",t);if(o==null)return this._emitted["t:"+e]==null?null:void 0;if(o.blockHash==null)return;const c=this.formatter.receipt(o);if(c.blockNumber==null)c.confirmations=0;else if(c.confirmations==null){let h=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-c.blockNumber+1;h<=0&&(h=1),c.confirmations=h}return c}),{oncePoll:this})})}getLogs(e){return __awaiter$1(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield resolveProperties({filter:this._getFilter(e)}),o=yield this.perform("getLogs",t);return o.forEach(c=>{c.removed==null&&(c.removed=!1)}),Formatter.arrayOf(this.formatter.filterLog.bind(this.formatter))(o)})}getEtherPrice(){return __awaiter$1(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return __awaiter$1(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&logger$2.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return __awaiter$1(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const o=yield this._getResolver(t,"getResolver");if(o!=null){const c=new Resolver(this,o,e);return t!==e&&!(yield c.supportsWildcard())?null:c}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return __awaiter$1(this,void 0,void 0,function*(){t==null&&(t="ENS");const o=yield this.getNetwork();o.ensAddress||logger$2.throwError("network does not support ENS",Logger.errors.UNSUPPORTED_OPERATION,{operation:t,network:o.name});try{const c=yield this.call({to:o.ensAddress,data:"0x0178b8bf"+namehash(e).substring(2)});return this.formatter.callAddress(c)}catch{}return null})}resolveName(e){return __awaiter$1(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(o){if(isHexString(e))throw o}typeof e!="string"&&logger$2.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return __awaiter$1(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(t,"lookupAddress");if(o==null)return null;const c=_parseString(yield this.call({to:o,data:"0x691f3431"+namehash(t).substring(2)}),0);return(yield this.resolveName(c))!=e?null:c})}getAvatar(e){return __awaiter$1(this,void 0,void 0,function*(){let t=null;if(isHexString(e)){const l=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",h=yield this._getResolver(l,"getAvatar");if(!h)return null;t=new Resolver(this,h,l);try{const d=yield t.getAvatar();if(d)return d.url}catch(d){if(d.code!==Logger.errors.CALL_EXCEPTION)throw d}try{const d=_parseString(yield this.call({to:h,data:"0x691f3431"+namehash(l).substring(2)}),0);t=yield this.getResolver(d)}catch(d){if(d.code!==Logger.errors.CALL_EXCEPTION)throw d;return null}}else if(t=yield this.getResolver(e),!t)return null;const o=yield t.getAvatar();return o==null?null:o.url})}perform(e,t){return logger$2.throwError(e+" not implemented",Logger.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,o){const c=new Event$1(getEventTag(e),t,o);return this._events.push(c),this._startEvent(c),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let o=!1,c=[],l=getEventTag(e);return this._events=this._events.filter(h=>h.tag!==l?!0:(setTimeout(()=>{h.listener.apply(this,t)},0),o=!0,h.once?(c.push(h),!1):!0)),c.forEach(h=>{this._stopEvent(h)}),o}listenerCount(e){if(!e)return this._events.length;let t=getEventTag(e);return this._events.filter(o=>o.tag===t).length}listeners(e){if(e==null)return this._events.map(o=>o.listener);let t=getEventTag(e);return this._events.filter(o=>o.tag===t).map(o=>o.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const o=[];let c=!1,l=getEventTag(e);return this._events=this._events.filter(h=>h.tag!==l||h.listener!=t||c?!0:(c=!0,o.push(h),!1)),o.forEach(h=>{this._stopEvent(h)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const o=getEventTag(e);this._events=this._events.filter(c=>c.tag!==o?!0:(t.push(c),!1))}return t.forEach(o=>{this._stopEvent(o)}),this}}var __awaiter=globalThis&&globalThis.__awaiter||function(n,e,t,o){function c(l){return l instanceof t?l:new t(function(h){h(l)})}return new(t||(t=Promise))(function(l,h){function d(v){try{m(o.next(v))}catch(_){h(_)}}function g(v){try{m(o.throw(v))}catch(_){h(_)}}function m(v){v.done?l(v.value):c(v.value).then(d,g)}m((o=o.apply(n,e||[])).next())})};const logger$1=new Logger(version$1),errorGas=["call","estimateGas"];function spelunk(n,e){if(n==null)return null;if(typeof n.message=="string"&&n.message.match("reverted")){const t=isHexString(n.data)?n.data:null;if(!e||t)return{message:n.message,data:t}}if(typeof n=="object"){for(const t in n){const o=spelunk(n[t],e);if(o)return o}return null}if(typeof n=="string")try{return spelunk(JSON.parse(n),e)}catch{}return null}function checkError(n,e,t){const o=t.transaction||t.signedTransaction;if(n==="call"){const l=spelunk(e,!0);if(l)return l.data;logger$1.throwError("missing revert data in call exception; Transaction reverted without a reason string",Logger.errors.CALL_EXCEPTION,{data:"0x",transaction:o,error:e})}if(n==="estimateGas"){let l=spelunk(e.body,!1);l==null&&(l=spelunk(e,!1)),l&&logger$1.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{reason:l.message,method:n,transaction:o,error:e})}let c=e.message;throw e.code===Logger.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?c=e.error.message:typeof e.body=="string"?c=e.body:typeof e.responseText=="string"&&(c=e.responseText),c=(c||"").toLowerCase(),c.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&logger$1.throwError("insufficient funds for intrinsic transaction cost",Logger.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:o}),c.match(/nonce (is )?too low/i)&&logger$1.throwError("nonce has already been used",Logger.errors.NONCE_EXPIRED,{error:e,method:n,transaction:o}),c.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&logger$1.throwError("replacement fee too low",Logger.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:o}),c.match(/only replay-protected/i)&&logger$1.throwError("legacy pre-eip-155 transactions not supported",Logger.errors.UNSUPPORTED_OPERATION,{error:e,method:n,transaction:o}),errorGas.indexOf(n)>=0&&c.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&logger$1.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:o}),e}function timer(n){return new Promise(function(e){setTimeout(e,n)})}function getResult(n){if(n.error){const e=new Error(n.error.message);throw e.code=n.error.code,e.data=n.error.data,e}return n.result}function getLowerCase(n){return n&&n.toLowerCase()}const _constructorGuard={};class JsonRpcSigner extends Signer{constructor(e,t,o){if(super(),e!==_constructorGuard)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");defineReadOnly(this,"provider",t),o==null&&(o=0),typeof o=="string"?(defineReadOnly(this,"_address",this.provider.formatter.address(o)),defineReadOnly(this,"_index",null)):typeof o=="number"?(defineReadOnly(this,"_index",o),defineReadOnly(this,"_address",null)):logger$1.throwArgumentError("invalid address or index","addressOrIndex",o)}connect(e){return logger$1.throwError("cannot alter JSON-RPC Signer connection",Logger.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new UncheckedJsonRpcSigner(_constructorGuard,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&logger$1.throwError("unknown account #"+this._index,Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=shallowCopy(e);const t=this.getAddress().then(o=>(o&&(o=o.toLowerCase()),o));if(e.gasLimit==null){const o=shallowCopy(e);o.from=t,e.gasLimit=this.provider.estimateGas(o)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(o=>__awaiter(this,void 0,void 0,function*(){if(o==null)return null;const c=yield this.provider.resolveName(o);return c==null&&logger$1.throwArgumentError("provided ENS name resolves to null","tx.to",o),c}))),resolveProperties({tx:resolveProperties(e),sender:t}).then(({tx:o,sender:c})=>{o.from!=null?o.from.toLowerCase()!==c&&logger$1.throwArgumentError("from address mismatch","transaction",e):o.from=c;const l=this.provider.constructor.hexlifyTransaction(o,{from:!0});return this.provider.send("eth_sendTransaction",[l]).then(h=>h,h=>(typeof h.message=="string"&&h.message.match(/user denied/i)&&logger$1.throwError("user rejected transaction",Logger.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:o}),checkError("sendTransaction",h,l)))})}signTransaction(e){return logger$1.throwError("signing transactions is unsupported",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return __awaiter(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),o=yield this.sendUncheckedTransaction(e);try{return yield poll(()=>__awaiter(this,void 0,void 0,function*(){const c=yield this.provider.getTransaction(o);if(c!==null)return this.provider._wrapTransaction(c,o,t)}),{oncePoll:this.provider})}catch(c){throw c.transactionHash=o,c}})}signMessage(e){return __awaiter(this,void 0,void 0,function*(){const t=typeof e=="string"?toUtf8Bytes(e):e,o=yield this.getAddress();try{return yield this.provider.send("personal_sign",[hexlify(t),o.toLowerCase()])}catch(c){throw typeof c.message=="string"&&c.message.match(/user denied/i)&&logger$1.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"signMessage",from:o,messageData:e}),c}})}_legacySignMessage(e){return __awaiter(this,void 0,void 0,function*(){const t=typeof e=="string"?toUtf8Bytes(e):e,o=yield this.getAddress();try{return yield this.provider.send("eth_sign",[o.toLowerCase(),hexlify(t)])}catch(c){throw typeof c.message=="string"&&c.message.match(/user denied/i)&&logger$1.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:o,messageData:e}),c}})}_signTypedData(e,t,o){return __awaiter(this,void 0,void 0,function*(){const c=yield TypedDataEncoder.resolveNames(e,t,o,h=>this.provider.resolveName(h)),l=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[l.toLowerCase(),JSON.stringify(TypedDataEncoder.getPayload(c.domain,t,c.value))])}catch(h){throw typeof h.message=="string"&&h.message.match(/user denied/i)&&logger$1.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"_signTypedData",from:l,messageData:{domain:c.domain,types:t,value:c.value}}),h}})}unlock(e){return __awaiter(this,void 0,void 0,function*(){const t=this.provider,o=yield this.getAddress();return t.send("personal_unlockAccount",[o.toLowerCase(),e,null])})}}class UncheckedJsonRpcSigner extends JsonRpcSigner{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:o=>this.provider.waitForTransaction(t,o)}))}}const allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class JsonRpcProvider extends BaseProvider{constructor(e,t){let o=t;o==null&&(o=new Promise((c,l)=>{setTimeout(()=>{this.detectNetwork().then(h=>{c(h)},h=>{l(h)})},0)})),super(o),e||(e=getStatic(this.constructor,"defaultUrl")()),typeof e=="string"?defineReadOnly(this,"connection",Object.freeze({url:e})):defineReadOnly(this,"connection",Object.freeze(shallowCopy(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return __awaiter(this,void 0,void 0,function*(){yield timer(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=getStatic(this.constructor,"getNetwork");try{return t(BigNumber$1.from(e).toNumber())}catch(o){return logger$1.throwError("could not detect network",Logger.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:o})}}return logger$1.throwError("could not detect network",Logger.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new JsonRpcSigner(_constructorGuard,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const o={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:deepCopy(o),provider:this});const c=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(c&&this._cache[e])return this._cache[e];const l=fetchJson(this.connection,JSON.stringify(o),getResult).then(h=>(this.emit("debug",{action:"response",request:o,response:h,provider:this}),h),h=>{throw this.emit("debug",{action:"response",error:h,request:o,provider:this}),h});return c&&(this._cache[e]=l,setTimeout(()=>{this._cache[e]=null},0)),l}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[getLowerCase(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[getLowerCase(t.address),t.blockTag]];case"getCode":return["eth_getCode",[getLowerCase(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[getLowerCase(t.address),hexZeroPad(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[getStatic(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[getStatic(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=getLowerCase(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return __awaiter(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const c=t.transaction;if(c&&c.type!=null&&BigNumber$1.from(c.type).isZero()&&c.maxFeePerGas==null&&c.maxPriorityFeePerGas==null){const l=yield this.getFeeData();l.maxFeePerGas==null&&l.maxPriorityFeePerGas==null&&(t=shallowCopy(t),t.transaction=shallowCopy(c),delete t.transaction.type)}}const o=this.prepareRequest(e,t);o==null&&logger$1.throwError(e+" not implemented",Logger.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(o[0],o[1])}catch(c){return checkError(e,c,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(o){function c(){e.send("eth_getFilterChanges",[o]).then(function(l){if(e._pendingFilter!=t)return null;let h=Promise.resolve();return l.forEach(function(d){e._emitted["t:"+d.toLowerCase()]="pending",h=h.then(function(){return e.getTransaction(d).then(function(g){return e.emit("pending",g),null})})}),h.then(function(){return timer(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[o]);return}return setTimeout(function(){c()},0),null}).catch(l=>{})}return c(),o}).catch(o=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const o=shallowCopy(allowedTransactionKeys);if(t)for(const l in t)t[l]&&(o[l]=!0);checkProperties(e,o);const c={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(l){if(e[l]==null)return;const h=hexValue(BigNumber$1.from(e[l]));l==="gasLimit"&&(l="gas"),c[l]=h}),["from","to","data"].forEach(function(l){e[l]!=null&&(c[l]=hexlify(e[l]))}),e.accessList&&(c.accessList=accessListify(e.accessList)),c}}async function getPhoneNumber(n,e,t){console.log(`
=======================================`),console.log("- Executing the smart contract...🟠");let o;try{o=await new Contract(e,abi,t).hederaAddressToPeer(n,{gasLimit:1e5}),console.log(`- Contract executed. Transaction hash: 
${o} ✅`)}catch(c){return console.log(`- ${c.message.toString()}`),null}return{peerId:o.peerID,aliveTopic:Number(o.aliveTopic)}}async function tellHederaAboutAvailability(n,e,t,o,c){console.log(`
=======================================`),console.log("- Executing the smart contract...🟠");let l;try{l=await new Contract(n,abi,e).putPeerAvailableSelf(t,o,c,{gasLimit:25e5}),console.log(`- Contract executed. Transaction hash: 
${l} ✅`)}catch(h){return alert("Was telling Hedera about my availability but it didn't work ... Hedera says "+h.message.toString()),!1}return!0}const EARTH_RADIUS=6371e3,DEG_TO_RAD=Math.PI/180,THREE_PI=Math.PI*3,TWO_PI=Math.PI*2,toRadians=n=>n*DEG_TO_RAD,toDegrees=n=>n/DEG_TO_RAD,randomCircumferencePoint=(n,e,t=Math.random)=>{const o=Math.sin(toRadians(n.latitude)),c=Math.cos(toRadians(n.latitude)),l=t()*TWO_PI,h=Math.sin(l),d=Math.cos(l),g=e/EARTH_RADIUS,m=Math.sin(g),v=Math.cos(g);let _,p;return _=Math.asin(o*v+c*m*d),p=toRadians(n.longitude)+Math.atan2(h*m*c,v-o*Math.sin(_)),p=(p+THREE_PI)%TWO_PI-Math.PI,{latitude:toDegrees(_),longitude:toDegrees(p)}},randomCirclePoint=(n,e,t=Math.random)=>randomCircumferencePoint(n,Math.sqrt(t())*e,t),randomAnnulusPoint=(n,e,t,o=Math.random)=>{if(e>=t)throw new Error(`innerRadius (${e}) should be smaller than outerRadius (${t})`);const c=t-e;return randomCircumferencePoint(n,e+Math.sqrt(o())*c,o)},distance=(n,e)=>{const t={latitude:toRadians(n.latitude),longitude:toRadians(n.longitude)},o={latitude:toRadians(e.latitude),longitude:toRadians(e.longitude)},c={latitude:Math.sin((o.latitude-t.latitude)/2),longitude:Math.sin((o.longitude-t.longitude)/2)},l=c.latitude*c.latitude+c.longitude*c.longitude*Math.cos(t.latitude)*Math.cos(o.latitude),h=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return EARTH_RADIUS*h},haversine=distance;var dist={distance,haversine,randomCircumferencePoint,randomCirclePoint,randomAnnulusPoint};const randomLocation=getDefaultExportFromCjs(dist);function bind(n,e){return function(){return n.apply(e,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(n=>e=>{const t=toString.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=n=>(n=n.toLowerCase(),e=>kindOf(e)===n),typeOfTest=n=>e=>typeof e===n,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&isFunction(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&isArrayBuffer(n.buffer),e}const isString$1=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject=n=>n!==null&&typeof n=="object",isBoolean=n=>n===!0||n===!1,isPlainObject=n=>{if(kindOf(n)!=="object")return!1;const e=getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=n=>isObject(n)&&isFunction(n.pipe),isFormData=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||isFunction(n.append)&&((e=kindOf(n))==="formdata"||e==="object"&&isFunction(n.toString)&&n.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let o,c;if(typeof n!="object"&&(n=[n]),isArray(n))for(o=0,c=n.length;o<c;o++)e.call(null,n[o],o,n);else{const l=t?Object.getOwnPropertyNames(n):Object.keys(n),h=l.length;let d;for(o=0;o<h;o++)d=l[o],e.call(null,n[d],d,n)}}function findKey(n,e){e=e.toLowerCase();const t=Object.keys(n);let o=t.length,c;for(;o-- >0;)if(c=t[o],e===c.toLowerCase())return c;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=n=>!isUndefined(n)&&n!==_global;function merge(){const{caseless:n}=isContextDefined(this)&&this||{},e={},t=(o,c)=>{const l=n&&findKey(e,c)||c;isPlainObject(e[l])&&isPlainObject(o)?e[l]=merge(e[l],o):isPlainObject(o)?e[l]=merge({},o):isArray(o)?e[l]=o.slice():e[l]=o};for(let o=0,c=arguments.length;o<c;o++)arguments[o]&&forEach(arguments[o],t);return e}const extend=(n,e,t,{allOwnKeys:o}={})=>(forEach(e,(c,l)=>{t&&isFunction(c)?n[l]=bind(c,t):n[l]=c},{allOwnKeys:o}),n),stripBOM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),inherits$3=(n,e,t,o)=>{n.prototype=Object.create(e.prototype,o),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},toFlatObject=(n,e,t,o)=>{let c,l,h;const d={};if(e=e||{},n==null)return e;do{for(c=Object.getOwnPropertyNames(n),l=c.length;l-- >0;)h=c[l],(!o||o(h,n,e))&&!d[h]&&(e[h]=n[h],d[h]=!0);n=t!==!1&&getPrototypeOf(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},endsWith=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const o=n.indexOf(e,t);return o!==-1&&o===t},toArray=n=>{if(!n)return null;if(isArray(n))return n;let e=n.length;if(!isNumber$1(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},isTypedArray=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(n,e)=>{const o=(n&&n[Symbol.iterator]).call(n);let c;for(;(c=o.next())&&!c.done;){const l=c.value;e.call(n,l[0],l[1])}},matchAll=(n,e)=>{let t;const o=[];for(;(t=n.exec(e))!==null;)o.push(t);return o},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,o,c){return o.toUpperCase()+c}),hasOwnProperty=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),o={};forEach(t,(c,l)=>{let h;(h=e(c,l,n))!==!1&&(o[l]=h||c)}),Object.defineProperties(n,o)},freezeMethods=n=>{reduceDescriptors(n,(e,t)=>{if(isFunction(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const o=n[t];if(isFunction(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},toObjectSet=(n,e)=>{const t={},o=c=>{c.forEach(l=>{t[l]=!0})};return isArray(n)?o(n):o(String(n).split(e)),t},noop$1=()=>{},toFiniteNumber=(n,e)=>(n=+n,Number.isFinite(n)?n:e),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(n=16,e=ALPHABET.ALPHA_DIGIT)=>{let t="";const{length:o}=e;for(;n--;)t+=e[Math.random()*o|0];return t};function isSpecCompliantForm(n){return!!(n&&isFunction(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const toJSONObject=n=>{const e=new Array(10),t=(o,c)=>{if(isObject(o)){if(e.indexOf(o)>=0)return;if(!("toJSON"in o)){e[c]=o;const l=isArray(o)?[]:{};return forEach(o,(h,d)=>{const g=t(h,c+1);!isUndefined(g)&&(l[d]=g)}),e[c]=void 0,l}}return o};return t(n,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=n=>n&&(isObject(n)||isFunction(n))&&isFunction(n.then)&&isFunction(n.catch),utils$e={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits:inherits$3,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(n,e,t,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),o&&(this.request=o),c&&(this.response=c)}utils$e.inherits(AxiosError,Error,{toJSON:function n(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$e.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{descriptors[n]={value:n}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(n,e,t,o,c,l)=>{const h=Object.create(prototype$1);return utils$e.toFlatObject(n,h,function(g){return g!==Error.prototype},d=>d!=="isAxiosError"),AxiosError.call(h,n.message,e,t,o,c),h.cause=n,h.name=n.name,l&&Object.assign(h,l),h};const httpAdapter=null;function isVisitable(n){return utils$e.isPlainObject(n)||utils$e.isArray(n)}function removeBrackets(n){return utils$e.endsWith(n,"[]")?n.slice(0,-2):n}function renderKey(n,e,t){return n?n.concat(e).map(function(c,l){return c=removeBrackets(c),!t&&l?"["+c+"]":c}).join(t?".":""):e}function isFlatArray(n){return utils$e.isArray(n)&&!n.some(isVisitable)}const predicates=utils$e.toFlatObject(utils$e,{},null,function n(e){return/^is[A-Z]/.test(e)});function toFormData(n,e,t){if(!utils$e.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=utils$e.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!utils$e.isUndefined(b[y])});const o=t.metaTokens,c=t.visitor||v,l=t.dots,h=t.indexes,g=(t.Blob||typeof Blob<"u"&&Blob)&&utils$e.isSpecCompliantForm(e);if(!utils$e.isFunction(c))throw new TypeError("visitor must be a function");function m(u){if(u===null)return"";if(utils$e.isDate(u))return u.toISOString();if(!g&&utils$e.isBlob(u))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$e.isArrayBuffer(u)||utils$e.isTypedArray(u)?g&&typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function v(u,y,b){let w=u;if(u&&!b&&typeof u=="object"){if(utils$e.endsWith(y,"{}"))y=o?y:y.slice(0,-2),u=JSON.stringify(u);else if(utils$e.isArray(u)&&isFlatArray(u)||(utils$e.isFileList(u)||utils$e.endsWith(y,"[]"))&&(w=utils$e.toArray(u)))return y=removeBrackets(y),w.forEach(function(B,H){!(utils$e.isUndefined(B)||B===null)&&e.append(h===!0?renderKey([y],H,l):h===null?y:y+"[]",m(B))}),!1}return isVisitable(u)?!0:(e.append(renderKey(b,y,l),m(u)),!1)}const _=[],p=Object.assign(predicates,{defaultVisitor:v,convertValue:m,isVisitable});function a(u,y){if(!utils$e.isUndefined(u)){if(_.indexOf(u)!==-1)throw Error("Circular reference detected in "+y.join("."));_.push(u),utils$e.forEach(u,function(w,T){(!(utils$e.isUndefined(w)||w===null)&&c.call(e,w,utils$e.isString(T)?T.trim():T,y,p))===!0&&a(w,y?y.concat(T):[T])}),_.pop()}}if(!utils$e.isObject(n))throw new TypeError("data must be an object");return a(n),e}function encode$5(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function AxiosURLSearchParams(n,e){this._pairs=[],n&&toFormData(n,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function n(e,t){this._pairs.push([e,t])};prototype.toString=function n(e){const t=e?function(o){return e.call(this,o,encode$5)}:encode$5;return this._pairs.map(function(c){return t(c[0])+"="+t(c[1])},"").join("&")};function encode$4(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(n,e,t){if(!e)return n;const o=t&&t.encode||encode$4,c=t&&t.serialize;let l;if(c?l=c(e,t):l=utils$e.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,t).toString(o),l){const h=n.indexOf("#");h!==-1&&(n=n.slice(0,h)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class InterceptorManager{constructor(){this.handlers=[]}use(e,t,o){return this.handlers.push({fulfilled:e,rejected:t,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$e.forEach(this.handlers,function(o){o!==null&&e(o)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(n=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),utils$d=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform={...utils$d,...platform$1};function toURLEncodedForm(n,e){return toFormData(n,new platform.classes.URLSearchParams,Object.assign({visitor:function(t,o,c,l){return platform.isNode&&utils$e.isBuffer(t)?(this.append(o,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(n){return utils$e.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(n){const e={},t=Object.keys(n);let o;const c=t.length;let l;for(o=0;o<c;o++)l=t[o],e[l]=n[l];return e}function formDataToJSON(n){function e(t,o,c,l){let h=t[l++];const d=Number.isFinite(+h),g=l>=t.length;return h=!h&&utils$e.isArray(c)?c.length:h,g?(utils$e.hasOwnProp(c,h)?c[h]=[c[h],o]:c[h]=o,!d):((!c[h]||!utils$e.isObject(c[h]))&&(c[h]=[]),e(t,o,c[h],l)&&utils$e.isArray(c[h])&&(c[h]=arrayToObject(c[h])),!d)}if(utils$e.isFormData(n)&&utils$e.isFunction(n.entries)){const t={};return utils$e.forEachEntry(n,(o,c)=>{e(parsePropPath(o),c,t,0)}),t}return null}function stringifySafely(n,e,t){if(utils$e.isString(n))try{return(e||JSON.parse)(n),utils$e.trim(n)}catch(o){if(o.name!=="SyntaxError")throw o}return(t||JSON.stringify)(n)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function n(e,t){const o=t.getContentType()||"",c=o.indexOf("application/json")>-1,l=utils$e.isObject(e);if(l&&utils$e.isHTMLForm(e)&&(e=new FormData(e)),utils$e.isFormData(e))return c&&c?JSON.stringify(formDataToJSON(e)):e;if(utils$e.isArrayBuffer(e)||utils$e.isBuffer(e)||utils$e.isStream(e)||utils$e.isFile(e)||utils$e.isBlob(e))return e;if(utils$e.isArrayBufferView(e))return e.buffer;if(utils$e.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(l){if(o.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((d=utils$e.isFileList(e))||o.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return toFormData(d?{"files[]":e}:e,g&&new g,this.formSerializer)}}return l||c?(t.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function n(e){const t=this.transitional||defaults.transitional,o=t&&t.forcedJSONParsing,c=this.responseType==="json";if(e&&utils$e.isString(e)&&(o&&!this.responseType||c)){const h=!(t&&t.silentJSONParsing)&&c;try{return JSON.parse(e)}catch(d){if(h)throw d.name==="SyntaxError"?AxiosError.from(d,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function n(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$e.forEach(["delete","get","head","post","put","patch"],n=>{defaults.headers[n]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=n=>{const e={};let t,o,c;return n&&n.split(`
`).forEach(function(h){c=h.indexOf(":"),t=h.substring(0,c).trim().toLowerCase(),o=h.substring(c+1).trim(),!(!t||e[t]&&ignoreDuplicateOf[t])&&(t==="set-cookie"?e[t]?e[t].push(o):e[t]=[o]:e[t]=e[t]?e[t]+", "+o:o)}),e},$internals=Symbol("internals");function normalizeHeader(n){return n&&String(n).trim().toLowerCase()}function normalizeValue(n){return n===!1||n==null?n:utils$e.isArray(n)?n.map(normalizeValue):String(n)}function parseTokens(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=t.exec(n);)e[o[1]]=o[2];return e}const isValidHeaderName=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function matchHeaderValue(n,e,t,o,c){if(utils$e.isFunction(o))return o.call(this,e,t);if(c&&(e=t),!!utils$e.isString(e)){if(utils$e.isString(o))return e.indexOf(o)!==-1;if(utils$e.isRegExp(o))return o.test(e)}}function formatHeader(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,o)=>t.toUpperCase()+o)}function buildAccessors(n,e){const t=utils$e.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(n,o+t,{value:function(c,l,h){return this[o].call(this,e,c,l,h)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,t,o){const c=this;function l(d,g,m){const v=normalizeHeader(g);if(!v)throw new Error("header name must be a non-empty string");const _=utils$e.findKey(c,v);(!_||c[_]===void 0||m===!0||m===void 0&&c[_]!==!1)&&(c[_||g]=normalizeValue(d))}const h=(d,g)=>utils$e.forEach(d,(m,v)=>l(m,v,g));return utils$e.isPlainObject(e)||e instanceof this.constructor?h(e,t):utils$e.isString(e)&&(e=e.trim())&&!isValidHeaderName(e)?h(parseHeaders(e),t):e!=null&&l(t,e,o),this}get(e,t){if(e=normalizeHeader(e),e){const o=utils$e.findKey(this,e);if(o){const c=this[o];if(!t)return c;if(t===!0)return parseTokens(c);if(utils$e.isFunction(t))return t.call(this,c,o);if(utils$e.isRegExp(t))return t.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e),e){const o=utils$e.findKey(this,e);return!!(o&&this[o]!==void 0&&(!t||matchHeaderValue(this,this[o],o,t)))}return!1}delete(e,t){const o=this;let c=!1;function l(h){if(h=normalizeHeader(h),h){const d=utils$e.findKey(o,h);d&&(!t||matchHeaderValue(o,o[d],d,t))&&(delete o[d],c=!0)}}return utils$e.isArray(e)?e.forEach(l):l(e),c}clear(e){const t=Object.keys(this);let o=t.length,c=!1;for(;o--;){const l=t[o];(!e||matchHeaderValue(this,this[l],l,e,!0))&&(delete this[l],c=!0)}return c}normalize(e){const t=this,o={};return utils$e.forEach(this,(c,l)=>{const h=utils$e.findKey(o,l);if(h){t[h]=normalizeValue(c),delete t[l];return}const d=e?formatHeader(l):String(l).trim();d!==l&&delete t[l],t[d]=normalizeValue(c),o[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return utils$e.forEach(this,(o,c)=>{o!=null&&o!==!1&&(t[c]=e&&utils$e.isArray(o)?o.join(", "):o)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const o=new this(e);return t.forEach(c=>o.set(c)),o}static accessor(e){const o=(this[$internals]=this[$internals]={accessors:{}}).accessors,c=this.prototype;function l(h){const d=normalizeHeader(h);o[d]||(buildAccessors(c,h),o[d]=!0)}return utils$e.isArray(e)?e.forEach(l):l(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$e.reduceDescriptors(AxiosHeaders.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(o){this[t]=o}}});utils$e.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(n,e){const t=this||defaults$1,o=e||t,c=AxiosHeaders$1.from(o.headers);let l=o.data;return utils$e.forEach(n,function(d){l=d.call(t,l,c.normalize(),e?e.status:void 0)}),c.normalize(),l}function isCancel(n){return!!(n&&n.__CANCEL__)}function CanceledError(n,e,t){AxiosError.call(this,n??"canceled",AxiosError.ERR_CANCELED,e,t),this.name="CanceledError"}utils$e.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(n,e,t){const o=t.config.validateStatus;!t.status||!o||o(t.status)?n(t):e(new AxiosError("Request failed with status code "+t.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const cookies=platform.hasStandardBrowserEnv?{write(n,e,t,o,c,l){const h=[n+"="+encodeURIComponent(e)];utils$e.isNumber(t)&&h.push("expires="+new Date(t).toGMTString()),utils$e.isString(o)&&h.push("path="+o),utils$e.isString(c)&&h.push("domain="+c),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function combineURLs(n,e){return e?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n}function buildFullPath(n,e){return n&&!isAbsoluteURL(e)?combineURLs(n,e):e}const isURLSameOrigin=platform.hasStandardBrowserEnv?function n(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let o;function c(l){let h=l;return e&&(t.setAttribute("href",h),h=t.href),t.setAttribute("href",h),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return o=c(window.location.href),function(h){const d=utils$e.isString(h)?c(h):h;return d.protocol===o.protocol&&d.host===o.host}}():function n(){return function(){return!0}}();function parseProtocol(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function speedometer(n,e){n=n||10;const t=new Array(n),o=new Array(n);let c=0,l=0,h;return e=e!==void 0?e:1e3,function(g){const m=Date.now(),v=o[l];h||(h=m),t[c]=g,o[c]=m;let _=l,p=0;for(;_!==c;)p+=t[_++],_=_%n;if(c=(c+1)%n,c===l&&(l=(l+1)%n),m-h<e)return;const a=v&&m-v;return a?Math.round(p*1e3/a):void 0}}function progressEventReducer(n,e){let t=0;const o=speedometer(50,250);return c=>{const l=c.loaded,h=c.lengthComputable?c.total:void 0,d=l-t,g=o(d),m=l<=h;t=l;const v={loaded:l,total:h,progress:h?l/h:void 0,bytes:d,rate:g||void 0,estimated:g&&h&&m?(h-l)/g:void 0,event:c};v[e?"download":"upload"]=!0,n(v)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(n){return new Promise(function(t,o){let c=n.data;const l=AxiosHeaders$1.from(n.headers).normalize();let{responseType:h,withXSRFToken:d}=n,g;function m(){n.cancelToken&&n.cancelToken.unsubscribe(g),n.signal&&n.signal.removeEventListener("abort",g)}let v;if(utils$e.isFormData(c)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)l.setContentType(!1);else if((v=l.getContentType())!==!1){const[y,...b]=v?v.split(";").map(w=>w.trim()).filter(Boolean):[];l.setContentType([y||"multipart/form-data",...b].join("; "))}}let _=new XMLHttpRequest;if(n.auth){const y=n.auth.username||"",b=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";l.set("Authorization","Basic "+btoa(y+":"+b))}const p=buildFullPath(n.baseURL,n.url);_.open(n.method.toUpperCase(),buildURL(p,n.params,n.paramsSerializer),!0),_.timeout=n.timeout;function a(){if(!_)return;const y=AxiosHeaders$1.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),w={data:!h||h==="text"||h==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:y,config:n,request:_};settle(function(B){t(B),m()},function(B){o(B),m()},w),_=null}if("onloadend"in _?_.onloadend=a:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(a)},_.onabort=function(){_&&(o(new AxiosError("Request aborted",AxiosError.ECONNABORTED,n,_)),_=null)},_.onerror=function(){o(new AxiosError("Network Error",AxiosError.ERR_NETWORK,n,_)),_=null},_.ontimeout=function(){let b=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const w=n.transitional||transitionalDefaults;n.timeoutErrorMessage&&(b=n.timeoutErrorMessage),o(new AxiosError(b,w.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,n,_)),_=null},platform.hasStandardBrowserEnv&&(d&&utils$e.isFunction(d)&&(d=d(n)),d||d!==!1&&isURLSameOrigin(p))){const y=n.xsrfHeaderName&&n.xsrfCookieName&&cookies.read(n.xsrfCookieName);y&&l.set(n.xsrfHeaderName,y)}c===void 0&&l.setContentType(null),"setRequestHeader"in _&&utils$e.forEach(l.toJSON(),function(b,w){_.setRequestHeader(w,b)}),utils$e.isUndefined(n.withCredentials)||(_.withCredentials=!!n.withCredentials),h&&h!=="json"&&(_.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&_.addEventListener("progress",progressEventReducer(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",progressEventReducer(n.onUploadProgress)),(n.cancelToken||n.signal)&&(g=y=>{_&&(o(!y||y.type?new CanceledError(null,n,_):y),_.abort(),_=null)},n.cancelToken&&n.cancelToken.subscribe(g),n.signal&&(n.signal.aborted?g():n.signal.addEventListener("abort",g)));const u=parseProtocol(p);if(u&&platform.protocols.indexOf(u)===-1){o(new AxiosError("Unsupported protocol "+u+":",AxiosError.ERR_BAD_REQUEST,n));return}_.send(c||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$e.forEach(knownAdapters,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const renderReason=n=>`- ${n}`,isResolvedHandle=n=>utils$e.isFunction(n)||n===null||n===!1,adapters={getAdapter:n=>{n=utils$e.isArray(n)?n:[n];const{length:e}=n;let t,o;const c={};for(let l=0;l<e;l++){t=n[l];let h;if(o=t,!isResolvedHandle(t)&&(o=knownAdapters[(h=String(t)).toLowerCase()],o===void 0))throw new AxiosError(`Unknown adapter '${h}'`);if(o)break;c[h||"#"+l]=o}if(!o){const l=Object.entries(c).map(([d,g])=>`adapter ${d} `+(g===!1?"is not supported by the environment":"is not available in the build"));let h=e?l.length>1?`since :
`+l.map(renderReason).join(`
`):" "+renderReason(l[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return o},adapters:knownAdapters};function throwIfCancellationRequested(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new CanceledError(null,n)}function dispatchRequest(n){return throwIfCancellationRequested(n),n.headers=AxiosHeaders$1.from(n.headers),n.data=transformData.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(n.adapter||defaults$1.adapter)(n).then(function(o){return throwIfCancellationRequested(n),o.data=transformData.call(n,n.transformResponse,o),o.headers=AxiosHeaders$1.from(o.headers),o},function(o){return isCancel(o)||(throwIfCancellationRequested(n),o&&o.response&&(o.response.data=transformData.call(n,n.transformResponse,o.response),o.response.headers=AxiosHeaders$1.from(o.response.headers))),Promise.reject(o)})}const headersToObject=n=>n instanceof AxiosHeaders$1?n.toJSON():n;function mergeConfig(n,e){e=e||{};const t={};function o(m,v,_){return utils$e.isPlainObject(m)&&utils$e.isPlainObject(v)?utils$e.merge.call({caseless:_},m,v):utils$e.isPlainObject(v)?utils$e.merge({},v):utils$e.isArray(v)?v.slice():v}function c(m,v,_){if(utils$e.isUndefined(v)){if(!utils$e.isUndefined(m))return o(void 0,m,_)}else return o(m,v,_)}function l(m,v){if(!utils$e.isUndefined(v))return o(void 0,v)}function h(m,v){if(utils$e.isUndefined(v)){if(!utils$e.isUndefined(m))return o(void 0,m)}else return o(void 0,v)}function d(m,v,_){if(_ in e)return o(m,v);if(_ in n)return o(void 0,m)}const g={url:l,method:l,data:l,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:d,headers:(m,v)=>c(headersToObject(m),headersToObject(v),!0)};return utils$e.forEach(Object.keys(Object.assign({},n,e)),function(v){const _=g[v]||c,p=_(n[v],e[v],v);utils$e.isUndefined(p)&&_!==d||(t[v]=p)}),t}const VERSION="1.6.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{validators$1[n]=function(o){return typeof o===n||"a"+(e<1?"n ":" ")+n}});const deprecatedWarnings={};validators$1.transitional=function n(e,t,o){function c(l,h){return"[Axios v"+VERSION+"] Transitional option '"+l+"'"+h+(o?". "+o:"")}return(l,h,d)=>{if(e===!1)throw new AxiosError(c(h," has been removed"+(t?" in "+t:"")),AxiosError.ERR_DEPRECATED);return t&&!deprecatedWarnings[h]&&(deprecatedWarnings[h]=!0,console.warn(c(h," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,h,d):!0}};function assertOptions(n,e,t){if(typeof n!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const o=Object.keys(n);let c=o.length;for(;c-- >0;){const l=o[c],h=e[l];if(h){const d=n[l],g=d===void 0||h(d,l,n);if(g!==!0)throw new AxiosError("option "+l+" must be "+g,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new AxiosError("Unknown option "+l,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=mergeConfig(this.defaults,t);const{transitional:o,paramsSerializer:c,headers:l}=t;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),c!=null&&(utils$e.isFunction(c)?t.paramsSerializer={serialize:c}:validator.assertOptions(c,{encode:validators.function,serialize:validators.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let h=l&&utils$e.merge(l.common,l[t.method]);l&&utils$e.forEach(["delete","get","head","post","put","patch","common"],u=>{delete l[u]}),t.headers=AxiosHeaders$1.concat(h,l);const d=[];let g=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(g=g&&y.synchronous,d.unshift(y.fulfilled,y.rejected))});const m=[];this.interceptors.response.forEach(function(y){m.push(y.fulfilled,y.rejected)});let v,_=0,p;if(!g){const u=[dispatchRequest.bind(this),void 0];for(u.unshift.apply(u,d),u.push.apply(u,m),p=u.length,v=Promise.resolve(t);_<p;)v=v.then(u[_++],u[_++]);return v}p=d.length;let a=t;for(_=0;_<p;){const u=d[_++],y=d[_++];try{a=u(a)}catch(b){y.call(this,b);break}}try{v=dispatchRequest.call(this,a)}catch(u){return Promise.reject(u)}for(_=0,p=m.length;_<p;)v=v.then(m[_++],m[_++]);return v}getUri(e){e=mergeConfig(this.defaults,e);const t=buildFullPath(e.baseURL,e.url);return buildURL(t,e.params,e.paramsSerializer)}}utils$e.forEach(["delete","get","head","options"],function n(e){Axios.prototype[e]=function(t,o){return this.request(mergeConfig(o||{},{method:e,url:t,data:(o||{}).data}))}});utils$e.forEach(["post","put","patch"],function n(e){function t(o){return function(l,h,d){return this.request(mergeConfig(d||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:l,data:h}))}}Axios.prototype[e]=t(),Axios.prototype[e+"Form"]=t(!0)});const Axios$1=Axios;class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const o=this;this.promise.then(c=>{if(!o._listeners)return;let l=o._listeners.length;for(;l-- >0;)o._listeners[l](c);o._listeners=null}),this.promise.then=c=>{let l;const h=new Promise(d=>{o.subscribe(d),l=d}).then(c);return h.cancel=function(){o.unsubscribe(l)},h},e(function(l,h,d){o.reason||(o.reason=new CanceledError(l,h,d),t(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new CancelToken(function(c){e=c}),cancel:e}}}const CancelToken$1=CancelToken;function spread(n){return function(t){return n.apply(null,t)}}function isAxiosError(n){return utils$e.isObject(n)&&n.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([n,e])=>{HttpStatusCode[e]=n});const HttpStatusCode$1=HttpStatusCode;function createInstance(n){const e=new Axios$1(n),t=bind(Axios$1.prototype.request,e);return utils$e.extend(t,Axios$1.prototype,e,{allOwnKeys:!0}),utils$e.extend(t,e,null,{allOwnKeys:!0}),t.create=function(c){return createInstance(mergeConfig(n,c))},t}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function n(e){return Promise.all(e)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=n=>formDataToJSON(utils$e.isHTMLForm(n)?new FormData(n):n);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;var cryptoJs={exports:{}},core={exports:{}},hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(n,e){(function(t,o){n.exports=o()})(commonjsGlobal,function(){var t=t||function(o,c){var l;if(typeof window<"u"&&window.crypto&&(l=window.crypto),typeof self<"u"&&self.crypto&&(l=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(l=globalThis.crypto),!l&&typeof window<"u"&&window.msCrypto&&(l=window.msCrypto),!l&&typeof commonjsGlobal<"u"&&commonjsGlobal.crypto&&(l=commonjsGlobal.crypto),!l&&typeof commonjsRequire$1=="function")try{l=require$$0$1}catch{}var h=function(){if(l){if(typeof l.getRandomValues=="function")try{return l.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof l.randomBytes=="function")try{return l.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},d=Object.create||function(){function T(){}return function(B){var H;return T.prototype=B,H=new T,T.prototype=null,H}}(),g={},m=g.lib={},v=m.Base=function(){return{extend:function(T){var B=d(this);return T&&B.mixIn(T),(!B.hasOwnProperty("init")||this.init===B.init)&&(B.init=function(){B.$super.init.apply(this,arguments)}),B.init.prototype=B,B.$super=this,B},create:function(){var T=this.extend();return T.init.apply(T,arguments),T},init:function(){},mixIn:function(T){for(var B in T)T.hasOwnProperty(B)&&(this[B]=T[B]);T.hasOwnProperty("toString")&&(this.toString=T.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),_=m.WordArray=v.extend({init:function(T,B){T=this.words=T||[],B!=c?this.sigBytes=B:this.sigBytes=T.length*4},toString:function(T){return(T||a).stringify(this)},concat:function(T){var B=this.words,H=T.words,J=this.sigBytes,W=T.sigBytes;if(this.clamp(),J%4)for(var fe=0;fe<W;fe++){var re=H[fe>>>2]>>>24-fe%4*8&255;B[J+fe>>>2]|=re<<24-(J+fe)%4*8}else for(var se=0;se<W;se+=4)B[J+se>>>2]=H[se>>>2];return this.sigBytes+=W,this},clamp:function(){var T=this.words,B=this.sigBytes;T[B>>>2]&=4294967295<<32-B%4*8,T.length=o.ceil(B/4)},clone:function(){var T=v.clone.call(this);return T.words=this.words.slice(0),T},random:function(T){for(var B=[],H=0;H<T;H+=4)B.push(h());return new _.init(B,T)}}),p=g.enc={},a=p.Hex={stringify:function(T){for(var B=T.words,H=T.sigBytes,J=[],W=0;W<H;W++){var fe=B[W>>>2]>>>24-W%4*8&255;J.push((fe>>>4).toString(16)),J.push((fe&15).toString(16))}return J.join("")},parse:function(T){for(var B=T.length,H=[],J=0;J<B;J+=2)H[J>>>3]|=parseInt(T.substr(J,2),16)<<24-J%8*4;return new _.init(H,B/2)}},u=p.Latin1={stringify:function(T){for(var B=T.words,H=T.sigBytes,J=[],W=0;W<H;W++){var fe=B[W>>>2]>>>24-W%4*8&255;J.push(String.fromCharCode(fe))}return J.join("")},parse:function(T){for(var B=T.length,H=[],J=0;J<B;J++)H[J>>>2]|=(T.charCodeAt(J)&255)<<24-J%4*8;return new _.init(H,B)}},y=p.Utf8={stringify:function(T){try{return decodeURIComponent(escape(u.stringify(T)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(T){return u.parse(unescape(encodeURIComponent(T)))}},b=m.BufferedBlockAlgorithm=v.extend({reset:function(){this._data=new _.init,this._nDataBytes=0},_append:function(T){typeof T=="string"&&(T=y.parse(T)),this._data.concat(T),this._nDataBytes+=T.sigBytes},_process:function(T){var B,H=this._data,J=H.words,W=H.sigBytes,fe=this.blockSize,re=fe*4,se=W/re;T?se=o.ceil(se):se=o.max((se|0)-this._minBufferSize,0);var ae=se*fe,ee=o.min(ae*4,W);if(ae){for(var P=0;P<ae;P+=fe)this._doProcessBlock(J,P);B=J.splice(0,ae),H.sigBytes-=ee}return new _.init(B,ee)},clone:function(){var T=v.clone.call(this);return T._data=this._data.clone(),T},_minBufferSize:0});m.Hasher=b.extend({cfg:v.extend(),init:function(T){this.cfg=this.cfg.extend(T),this.reset()},reset:function(){b.reset.call(this),this._doReset()},update:function(T){return this._append(T),this._process(),this},finalize:function(T){T&&this._append(T);var B=this._doFinalize();return B},blockSize:16,_createHelper:function(T){return function(B,H){return new T.init(H).finalize(B)}},_createHmacHelper:function(T){return function(B,H){return new w.HMAC.init(T,H).finalize(B)}}});var w=g.algo={};return g}(Math);return t})}(core)),core.exports}var x64Core={exports:{}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,function(n,e){(function(t,o){n.exports=o(requireCore())})(commonjsGlobal,function(t){return function(o){var c=t,l=c.lib,h=l.Base,d=l.WordArray,g=c.x64={};g.Word=h.extend({init:function(m,v){this.high=m,this.low=v}}),g.WordArray=h.extend({init:function(m,v){m=this.words=m||[],v!=o?this.sigBytes=v:this.sigBytes=m.length*8},toX32:function(){for(var m=this.words,v=m.length,_=[],p=0;p<v;p++){var a=m[p];_.push(a.high),_.push(a.low)}return d.create(_,this.sigBytes)},clone:function(){for(var m=h.clone.call(this),v=m.words=this.words.slice(0),_=v.length,p=0;p<_;p++)v[p]=v[p].clone();return m}})}(),t})}(x64Core)),x64Core.exports}var libTypedarrays={exports:{}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,function(n,e){(function(t,o){n.exports=o(requireCore())})(commonjsGlobal,function(t){return function(){if(typeof ArrayBuffer=="function"){var o=t,c=o.lib,l=c.WordArray,h=l.init,d=l.init=function(g){if(g instanceof ArrayBuffer&&(g=new Uint8Array(g)),(g instanceof Int8Array||typeof Uint8ClampedArray<"u"&&g instanceof Uint8ClampedArray||g instanceof Int16Array||g instanceof Uint16Array||g instanceof Int32Array||g instanceof Uint32Array||g instanceof Float32Array||g instanceof Float64Array)&&(g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),g instanceof Uint8Array){for(var m=g.byteLength,v=[],_=0;_<m;_++)v[_>>>2]|=g[_]<<24-_%4*8;h.call(this,v,m)}else h.apply(this,arguments)};d.prototype=l}}(),t.lib.WordArray})}(libTypedarrays)),libTypedarrays.exports}var encUtf16={exports:{}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,function(n,e){(function(t,o){n.exports=o(requireCore())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.WordArray,h=o.enc;h.Utf16=h.Utf16BE={stringify:function(g){for(var m=g.words,v=g.sigBytes,_=[],p=0;p<v;p+=2){var a=m[p>>>2]>>>16-p%4*8&65535;_.push(String.fromCharCode(a))}return _.join("")},parse:function(g){for(var m=g.length,v=[],_=0;_<m;_++)v[_>>>1]|=g.charCodeAt(_)<<16-_%2*16;return l.create(v,m*2)}},h.Utf16LE={stringify:function(g){for(var m=g.words,v=g.sigBytes,_=[],p=0;p<v;p+=2){var a=d(m[p>>>2]>>>16-p%4*8&65535);_.push(String.fromCharCode(a))}return _.join("")},parse:function(g){for(var m=g.length,v=[],_=0;_<m;_++)v[_>>>1]|=d(g.charCodeAt(_)<<16-_%2*16);return l.create(v,m*2)}};function d(g){return g<<8&4278255360|g>>>8&16711935}}(),t.enc.Utf16})}(encUtf16)),encUtf16.exports}var encBase64={exports:{}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,function(n,e){(function(t,o){n.exports=o(requireCore())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.WordArray,h=o.enc;h.Base64={stringify:function(g){var m=g.words,v=g.sigBytes,_=this._map;g.clamp();for(var p=[],a=0;a<v;a+=3)for(var u=m[a>>>2]>>>24-a%4*8&255,y=m[a+1>>>2]>>>24-(a+1)%4*8&255,b=m[a+2>>>2]>>>24-(a+2)%4*8&255,w=u<<16|y<<8|b,T=0;T<4&&a+T*.75<v;T++)p.push(_.charAt(w>>>6*(3-T)&63));var B=_.charAt(64);if(B)for(;p.length%4;)p.push(B);return p.join("")},parse:function(g){var m=g.length,v=this._map,_=this._reverseMap;if(!_){_=this._reverseMap=[];for(var p=0;p<v.length;p++)_[v.charCodeAt(p)]=p}var a=v.charAt(64);if(a){var u=g.indexOf(a);u!==-1&&(m=u)}return d(g,m,_)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function d(g,m,v){for(var _=[],p=0,a=0;a<m;a++)if(a%4){var u=v[g.charCodeAt(a-1)]<<a%4*2,y=v[g.charCodeAt(a)]>>>6-a%4*2,b=u|y;_[p>>>2]|=b<<24-p%4*8,p++}return l.create(_,p)}}(),t.enc.Base64})}(encBase64)),encBase64.exports}var encBase64url={exports:{}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,function(n,e){(function(t,o){n.exports=o(requireCore())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.WordArray,h=o.enc;h.Base64url={stringify:function(g,m){m===void 0&&(m=!0);var v=g.words,_=g.sigBytes,p=m?this._safe_map:this._map;g.clamp();for(var a=[],u=0;u<_;u+=3)for(var y=v[u>>>2]>>>24-u%4*8&255,b=v[u+1>>>2]>>>24-(u+1)%4*8&255,w=v[u+2>>>2]>>>24-(u+2)%4*8&255,T=y<<16|b<<8|w,B=0;B<4&&u+B*.75<_;B++)a.push(p.charAt(T>>>6*(3-B)&63));var H=p.charAt(64);if(H)for(;a.length%4;)a.push(H);return a.join("")},parse:function(g,m){m===void 0&&(m=!0);var v=g.length,_=m?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var a=0;a<_.length;a++)p[_.charCodeAt(a)]=a}var u=_.charAt(64);if(u){var y=g.indexOf(u);y!==-1&&(v=y)}return d(g,v,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function d(g,m,v){for(var _=[],p=0,a=0;a<m;a++)if(a%4){var u=v[g.charCodeAt(a-1)]<<a%4*2,y=v[g.charCodeAt(a)]>>>6-a%4*2,b=u|y;_[p>>>2]|=b<<24-p%4*8,p++}return l.create(_,p)}}(),t.enc.Base64url})}(encBase64url)),encBase64url.exports}var md5$1={exports:{}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(n,e){(function(t,o){n.exports=o(requireCore())})(commonjsGlobal,function(t){return function(o){var c=t,l=c.lib,h=l.WordArray,d=l.Hasher,g=c.algo,m=[];(function(){for(var y=0;y<64;y++)m[y]=o.abs(o.sin(y+1))*4294967296|0})();var v=g.MD5=d.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(y,b){for(var w=0;w<16;w++){var T=b+w,B=y[T];y[T]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}var H=this._hash.words,J=y[b+0],W=y[b+1],fe=y[b+2],re=y[b+3],se=y[b+4],ae=y[b+5],ee=y[b+6],P=y[b+7],C=y[b+8],E=y[b+9],k=y[b+10],F=y[b+11],j=y[b+12],Q=y[b+13],G=y[b+14],U=y[b+15],$=H[0],O=H[1],oe=H[2],ue=H[3];$=_($,O,oe,ue,J,7,m[0]),ue=_(ue,$,O,oe,W,12,m[1]),oe=_(oe,ue,$,O,fe,17,m[2]),O=_(O,oe,ue,$,re,22,m[3]),$=_($,O,oe,ue,se,7,m[4]),ue=_(ue,$,O,oe,ae,12,m[5]),oe=_(oe,ue,$,O,ee,17,m[6]),O=_(O,oe,ue,$,P,22,m[7]),$=_($,O,oe,ue,C,7,m[8]),ue=_(ue,$,O,oe,E,12,m[9]),oe=_(oe,ue,$,O,k,17,m[10]),O=_(O,oe,ue,$,F,22,m[11]),$=_($,O,oe,ue,j,7,m[12]),ue=_(ue,$,O,oe,Q,12,m[13]),oe=_(oe,ue,$,O,G,17,m[14]),O=_(O,oe,ue,$,U,22,m[15]),$=p($,O,oe,ue,W,5,m[16]),ue=p(ue,$,O,oe,ee,9,m[17]),oe=p(oe,ue,$,O,F,14,m[18]),O=p(O,oe,ue,$,J,20,m[19]),$=p($,O,oe,ue,ae,5,m[20]),ue=p(ue,$,O,oe,k,9,m[21]),oe=p(oe,ue,$,O,U,14,m[22]),O=p(O,oe,ue,$,se,20,m[23]),$=p($,O,oe,ue,E,5,m[24]),ue=p(ue,$,O,oe,G,9,m[25]),oe=p(oe,ue,$,O,re,14,m[26]),O=p(O,oe,ue,$,C,20,m[27]),$=p($,O,oe,ue,Q,5,m[28]),ue=p(ue,$,O,oe,fe,9,m[29]),oe=p(oe,ue,$,O,P,14,m[30]),O=p(O,oe,ue,$,j,20,m[31]),$=a($,O,oe,ue,ae,4,m[32]),ue=a(ue,$,O,oe,C,11,m[33]),oe=a(oe,ue,$,O,F,16,m[34]),O=a(O,oe,ue,$,G,23,m[35]),$=a($,O,oe,ue,W,4,m[36]),ue=a(ue,$,O,oe,se,11,m[37]),oe=a(oe,ue,$,O,P,16,m[38]),O=a(O,oe,ue,$,k,23,m[39]),$=a($,O,oe,ue,Q,4,m[40]),ue=a(ue,$,O,oe,J,11,m[41]),oe=a(oe,ue,$,O,re,16,m[42]),O=a(O,oe,ue,$,ee,23,m[43]),$=a($,O,oe,ue,E,4,m[44]),ue=a(ue,$,O,oe,j,11,m[45]),oe=a(oe,ue,$,O,U,16,m[46]),O=a(O,oe,ue,$,fe,23,m[47]),$=u($,O,oe,ue,J,6,m[48]),ue=u(ue,$,O,oe,P,10,m[49]),oe=u(oe,ue,$,O,G,15,m[50]),O=u(O,oe,ue,$,ae,21,m[51]),$=u($,O,oe,ue,j,6,m[52]),ue=u(ue,$,O,oe,re,10,m[53]),oe=u(oe,ue,$,O,k,15,m[54]),O=u(O,oe,ue,$,W,21,m[55]),$=u($,O,oe,ue,C,6,m[56]),ue=u(ue,$,O,oe,U,10,m[57]),oe=u(oe,ue,$,O,ee,15,m[58]),O=u(O,oe,ue,$,Q,21,m[59]),$=u($,O,oe,ue,se,6,m[60]),ue=u(ue,$,O,oe,F,10,m[61]),oe=u(oe,ue,$,O,fe,15,m[62]),O=u(O,oe,ue,$,E,21,m[63]),H[0]=H[0]+$|0,H[1]=H[1]+O|0,H[2]=H[2]+oe|0,H[3]=H[3]+ue|0},_doFinalize:function(){var y=this._data,b=y.words,w=this._nDataBytes*8,T=y.sigBytes*8;b[T>>>5]|=128<<24-T%32;var B=o.floor(w/4294967296),H=w;b[(T+64>>>9<<4)+15]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,b[(T+64>>>9<<4)+14]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,y.sigBytes=(b.length+1)*4,this._process();for(var J=this._hash,W=J.words,fe=0;fe<4;fe++){var re=W[fe];W[fe]=(re<<8|re>>>24)&16711935|(re<<24|re>>>8)&4278255360}return J},clone:function(){var y=d.clone.call(this);return y._hash=this._hash.clone(),y}});function _(y,b,w,T,B,H,J){var W=y+(b&w|~b&T)+B+J;return(W<<H|W>>>32-H)+b}function p(y,b,w,T,B,H,J){var W=y+(b&T|w&~T)+B+J;return(W<<H|W>>>32-H)+b}function a(y,b,w,T,B,H,J){var W=y+(b^w^T)+B+J;return(W<<H|W>>>32-H)+b}function u(y,b,w,T,B,H,J){var W=y+(w^(b|~T))+B+J;return(W<<H|W>>>32-H)+b}c.MD5=d._createHelper(v),c.HmacMD5=d._createHmacHelper(v)}(Math),t.MD5})}(md5$1)),md5$1.exports}var sha1={exports:{}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,function(n,e){(function(t,o){n.exports=o(requireCore())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.WordArray,h=c.Hasher,d=o.algo,g=[],m=d.SHA1=h.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(v,_){for(var p=this._hash.words,a=p[0],u=p[1],y=p[2],b=p[3],w=p[4],T=0;T<80;T++){if(T<16)g[T]=v[_+T]|0;else{var B=g[T-3]^g[T-8]^g[T-14]^g[T-16];g[T]=B<<1|B>>>31}var H=(a<<5|a>>>27)+w+g[T];T<20?H+=(u&y|~u&b)+1518500249:T<40?H+=(u^y^b)+1859775393:T<60?H+=(u&y|u&b|y&b)-1894007588:H+=(u^y^b)-899497514,w=b,b=y,y=u<<30|u>>>2,u=a,a=H}p[0]=p[0]+a|0,p[1]=p[1]+u|0,p[2]=p[2]+y|0,p[3]=p[3]+b|0,p[4]=p[4]+w|0},_doFinalize:function(){var v=this._data,_=v.words,p=this._nDataBytes*8,a=v.sigBytes*8;return _[a>>>5]|=128<<24-a%32,_[(a+64>>>9<<4)+14]=Math.floor(p/4294967296),_[(a+64>>>9<<4)+15]=p,v.sigBytes=_.length*4,this._process(),this._hash},clone:function(){var v=h.clone.call(this);return v._hash=this._hash.clone(),v}});o.SHA1=h._createHelper(m),o.HmacSHA1=h._createHmacHelper(m)}(),t.SHA1})}(sha1)),sha1.exports}var sha256={exports:{}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,function(n,e){(function(t,o){n.exports=o(requireCore())})(commonjsGlobal,function(t){return function(o){var c=t,l=c.lib,h=l.WordArray,d=l.Hasher,g=c.algo,m=[],v=[];(function(){function a(w){for(var T=o.sqrt(w),B=2;B<=T;B++)if(!(w%B))return!1;return!0}function u(w){return(w-(w|0))*4294967296|0}for(var y=2,b=0;b<64;)a(y)&&(b<8&&(m[b]=u(o.pow(y,1/2))),v[b]=u(o.pow(y,1/3)),b++),y++})();var _=[],p=g.SHA256=d.extend({_doReset:function(){this._hash=new h.init(m.slice(0))},_doProcessBlock:function(a,u){for(var y=this._hash.words,b=y[0],w=y[1],T=y[2],B=y[3],H=y[4],J=y[5],W=y[6],fe=y[7],re=0;re<64;re++){if(re<16)_[re]=a[u+re]|0;else{var se=_[re-15],ae=(se<<25|se>>>7)^(se<<14|se>>>18)^se>>>3,ee=_[re-2],P=(ee<<15|ee>>>17)^(ee<<13|ee>>>19)^ee>>>10;_[re]=ae+_[re-7]+P+_[re-16]}var C=H&J^~H&W,E=b&w^b&T^w&T,k=(b<<30|b>>>2)^(b<<19|b>>>13)^(b<<10|b>>>22),F=(H<<26|H>>>6)^(H<<21|H>>>11)^(H<<7|H>>>25),j=fe+F+C+v[re]+_[re],Q=k+E;fe=W,W=J,J=H,H=B+j|0,B=T,T=w,w=b,b=j+Q|0}y[0]=y[0]+b|0,y[1]=y[1]+w|0,y[2]=y[2]+T|0,y[3]=y[3]+B|0,y[4]=y[4]+H|0,y[5]=y[5]+J|0,y[6]=y[6]+W|0,y[7]=y[7]+fe|0},_doFinalize:function(){var a=this._data,u=a.words,y=this._nDataBytes*8,b=a.sigBytes*8;return u[b>>>5]|=128<<24-b%32,u[(b+64>>>9<<4)+14]=o.floor(y/4294967296),u[(b+64>>>9<<4)+15]=y,a.sigBytes=u.length*4,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});c.SHA256=d._createHelper(p),c.HmacSHA256=d._createHmacHelper(p)}(Math),t.SHA256})}(sha256)),sha256.exports}var sha224={exports:{}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireSha256())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.WordArray,h=o.algo,d=h.SHA256,g=h.SHA224=d.extend({_doReset:function(){this._hash=new l.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var m=d._doFinalize.call(this);return m.sigBytes-=4,m}});o.SHA224=d._createHelper(g),o.HmacSHA224=d._createHmacHelper(g)}(),t.SHA224})}(sha224)),sha224.exports}var sha512$1={exports:{}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireX64Core())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.Hasher,h=o.x64,d=h.Word,g=h.WordArray,m=o.algo;function v(){return d.create.apply(d,arguments)}var _=[v(1116352408,3609767458),v(1899447441,602891725),v(3049323471,3964484399),v(3921009573,2173295548),v(961987163,4081628472),v(1508970993,3053834265),v(2453635748,2937671579),v(2870763221,3664609560),v(3624381080,2734883394),v(310598401,1164996542),v(607225278,1323610764),v(1426881987,3590304994),v(1925078388,4068182383),v(2162078206,991336113),v(2614888103,633803317),v(3248222580,3479774868),v(3835390401,2666613458),v(4022224774,944711139),v(264347078,2341262773),v(604807628,2007800933),v(770255983,1495990901),v(1249150122,1856431235),v(1555081692,3175218132),v(1996064986,2198950837),v(2554220882,3999719339),v(2821834349,766784016),v(2952996808,2566594879),v(3210313671,3203337956),v(3336571891,1034457026),v(3584528711,2466948901),v(113926993,3758326383),v(338241895,168717936),v(666307205,1188179964),v(773529912,1546045734),v(1294757372,1522805485),v(1396182291,2643833823),v(1695183700,2343527390),v(1986661051,1014477480),v(2177026350,1206759142),v(2456956037,344077627),v(2730485921,1290863460),v(2820302411,3158454273),v(3259730800,3505952657),v(3345764771,106217008),v(3516065817,3606008344),v(3600352804,1432725776),v(4094571909,1467031594),v(275423344,851169720),v(430227734,3100823752),v(506948616,1363258195),v(659060556,3750685593),v(883997877,3785050280),v(958139571,3318307427),v(1322822218,3812723403),v(1537002063,2003034995),v(1747873779,3602036899),v(1955562222,1575990012),v(2024104815,1125592928),v(2227730452,2716904306),v(2361852424,442776044),v(2428436474,593698344),v(2756734187,3733110249),v(3204031479,2999351573),v(3329325298,3815920427),v(3391569614,3928383900),v(3515267271,566280711),v(3940187606,3454069534),v(4118630271,4000239992),v(116418474,1914138554),v(174292421,2731055270),v(289380356,3203993006),v(460393269,320620315),v(685471733,587496836),v(852142971,1086792851),v(1017036298,365543100),v(1126000580,2618297676),v(1288033470,3409855158),v(1501505948,4234509866),v(1607167915,987167468),v(1816402316,1246189591)],p=[];(function(){for(var u=0;u<80;u++)p[u]=v()})();var a=m.SHA512=l.extend({_doReset:function(){this._hash=new g.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(u,y){for(var b=this._hash.words,w=b[0],T=b[1],B=b[2],H=b[3],J=b[4],W=b[5],fe=b[6],re=b[7],se=w.high,ae=w.low,ee=T.high,P=T.low,C=B.high,E=B.low,k=H.high,F=H.low,j=J.high,Q=J.low,G=W.high,U=W.low,$=fe.high,O=fe.low,oe=re.high,ue=re.low,q=se,pe=ae,be=ee,ve=P,we=C,Ce=E,Re=k,Se=F,$e=j,De=Q,Ne=G,pt=U,xt=$,Xe=O,yt=oe,gt=ue,ze=0;ze<80;ze++){var et,at,Ye=p[ze];if(ze<16)at=Ye.high=u[y+ze*2]|0,et=Ye.low=u[y+ze*2+1]|0;else{var lt=p[ze-15],dt=lt.high,le=lt.low,ne=(dt>>>1|le<<31)^(dt>>>8|le<<24)^dt>>>7,ie=(le>>>1|dt<<31)^(le>>>8|dt<<24)^(le>>>7|dt<<25),ge=p[ze-2],_e=ge.high,Ee=ge.low,Te=(_e>>>19|Ee<<13)^(_e<<3|Ee>>>29)^_e>>>6,Qe=(Ee>>>19|_e<<13)^(Ee<<3|_e>>>29)^(Ee>>>6|_e<<26),ot=p[ze-7],je=ot.high,ct=ot.low,tt=p[ze-16],mt=tt.high,$t=tt.low;et=ie+ct,at=ne+je+(et>>>0<ie>>>0?1:0),et=et+Qe,at=at+Te+(et>>>0<Qe>>>0?1:0),et=et+$t,at=at+mt+(et>>>0<$t>>>0?1:0),Ye.high=at,Ye.low=et}var Kt=$e&Ne^~$e&xt,It=De&pt^~De&Xe,Vt=q&be^q&we^be&we,Pt=pe&ve^pe&Ce^ve&Ce,ft=(q>>>28|pe<<4)^(q<<30|pe>>>2)^(q<<25|pe>>>7),Nt=(pe>>>28|q<<4)^(pe<<30|q>>>2)^(pe<<25|q>>>7),Ot=($e>>>14|De<<18)^($e>>>18|De<<14)^($e<<23|De>>>9),wt=(De>>>14|$e<<18)^(De>>>18|$e<<14)^(De<<23|$e>>>9),Lt=_[ze],jt=Lt.high,nt=Lt.low,St=gt+wt,ce=yt+Ot+(St>>>0<gt>>>0?1:0),St=St+It,ce=ce+Kt+(St>>>0<It>>>0?1:0),St=St+nt,ce=ce+jt+(St>>>0<nt>>>0?1:0),St=St+et,ce=ce+at+(St>>>0<et>>>0?1:0),de=Nt+Pt,he=ft+Vt+(de>>>0<Nt>>>0?1:0);yt=xt,gt=Xe,xt=Ne,Xe=pt,Ne=$e,pt=De,De=Se+St|0,$e=Re+ce+(De>>>0<Se>>>0?1:0)|0,Re=we,Se=Ce,we=be,Ce=ve,be=q,ve=pe,pe=St+de|0,q=ce+he+(pe>>>0<St>>>0?1:0)|0}ae=w.low=ae+pe,w.high=se+q+(ae>>>0<pe>>>0?1:0),P=T.low=P+ve,T.high=ee+be+(P>>>0<ve>>>0?1:0),E=B.low=E+Ce,B.high=C+we+(E>>>0<Ce>>>0?1:0),F=H.low=F+Se,H.high=k+Re+(F>>>0<Se>>>0?1:0),Q=J.low=Q+De,J.high=j+$e+(Q>>>0<De>>>0?1:0),U=W.low=U+pt,W.high=G+Ne+(U>>>0<pt>>>0?1:0),O=fe.low=O+Xe,fe.high=$+xt+(O>>>0<Xe>>>0?1:0),ue=re.low=ue+gt,re.high=oe+yt+(ue>>>0<gt>>>0?1:0)},_doFinalize:function(){var u=this._data,y=u.words,b=this._nDataBytes*8,w=u.sigBytes*8;y[w>>>5]|=128<<24-w%32,y[(w+128>>>10<<5)+30]=Math.floor(b/4294967296),y[(w+128>>>10<<5)+31]=b,u.sigBytes=y.length*4,this._process();var T=this._hash.toX32();return T},clone:function(){var u=l.clone.call(this);return u._hash=this._hash.clone(),u},blockSize:1024/32});o.SHA512=l._createHelper(a),o.HmacSHA512=l._createHmacHelper(a)}(),t.SHA512})}(sha512$1)),sha512$1.exports}var sha384={exports:{}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireX64Core(),requireSha512())})(commonjsGlobal,function(t){return function(){var o=t,c=o.x64,l=c.Word,h=c.WordArray,d=o.algo,g=d.SHA512,m=d.SHA384=g.extend({_doReset:function(){this._hash=new h.init([new l.init(3418070365,3238371032),new l.init(1654270250,914150663),new l.init(2438529370,812702999),new l.init(355462360,4144912697),new l.init(1731405415,4290775857),new l.init(2394180231,1750603025),new l.init(3675008525,1694076839),new l.init(1203062813,3204075428)])},_doFinalize:function(){var v=g._doFinalize.call(this);return v.sigBytes-=16,v}});o.SHA384=g._createHelper(m),o.HmacSHA384=g._createHmacHelper(m)}(),t.SHA384})}(sha384)),sha384.exports}var sha3={exports:{}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireX64Core())})(commonjsGlobal,function(t){return function(o){var c=t,l=c.lib,h=l.WordArray,d=l.Hasher,g=c.x64,m=g.Word,v=c.algo,_=[],p=[],a=[];(function(){for(var b=1,w=0,T=0;T<24;T++){_[b+5*w]=(T+1)*(T+2)/2%64;var B=w%5,H=(2*b+3*w)%5;b=B,w=H}for(var b=0;b<5;b++)for(var w=0;w<5;w++)p[b+5*w]=w+(2*b+3*w)%5*5;for(var J=1,W=0;W<24;W++){for(var fe=0,re=0,se=0;se<7;se++){if(J&1){var ae=(1<<se)-1;ae<32?re^=1<<ae:fe^=1<<ae-32}J&128?J=J<<1^113:J<<=1}a[W]=m.create(fe,re)}})();var u=[];(function(){for(var b=0;b<25;b++)u[b]=m.create()})();var y=v.SHA3=d.extend({cfg:d.cfg.extend({outputLength:512}),_doReset:function(){for(var b=this._state=[],w=0;w<25;w++)b[w]=new m.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(b,w){for(var T=this._state,B=this.blockSize/2,H=0;H<B;H++){var J=b[w+2*H],W=b[w+2*H+1];J=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360,W=(W<<8|W>>>24)&16711935|(W<<24|W>>>8)&4278255360;var fe=T[H];fe.high^=W,fe.low^=J}for(var re=0;re<24;re++){for(var se=0;se<5;se++){for(var ae=0,ee=0,P=0;P<5;P++){var fe=T[se+5*P];ae^=fe.high,ee^=fe.low}var C=u[se];C.high=ae,C.low=ee}for(var se=0;se<5;se++)for(var E=u[(se+4)%5],k=u[(se+1)%5],F=k.high,j=k.low,ae=E.high^(F<<1|j>>>31),ee=E.low^(j<<1|F>>>31),P=0;P<5;P++){var fe=T[se+5*P];fe.high^=ae,fe.low^=ee}for(var Q=1;Q<25;Q++){var ae,ee,fe=T[Q],G=fe.high,U=fe.low,$=_[Q];$<32?(ae=G<<$|U>>>32-$,ee=U<<$|G>>>32-$):(ae=U<<$-32|G>>>64-$,ee=G<<$-32|U>>>64-$);var O=u[p[Q]];O.high=ae,O.low=ee}var oe=u[0],ue=T[0];oe.high=ue.high,oe.low=ue.low;for(var se=0;se<5;se++)for(var P=0;P<5;P++){var Q=se+5*P,fe=T[Q],q=u[Q],pe=u[(se+1)%5+5*P],be=u[(se+2)%5+5*P];fe.high=q.high^~pe.high&be.high,fe.low=q.low^~pe.low&be.low}var fe=T[0],ve=a[re];fe.high^=ve.high,fe.low^=ve.low}},_doFinalize:function(){var b=this._data,w=b.words;this._nDataBytes*8;var T=b.sigBytes*8,B=this.blockSize*32;w[T>>>5]|=1<<24-T%32,w[(o.ceil((T+1)/B)*B>>>5)-1]|=128,b.sigBytes=w.length*4,this._process();for(var H=this._state,J=this.cfg.outputLength/8,W=J/8,fe=[],re=0;re<W;re++){var se=H[re],ae=se.high,ee=se.low;ae=(ae<<8|ae>>>24)&16711935|(ae<<24|ae>>>8)&4278255360,ee=(ee<<8|ee>>>24)&16711935|(ee<<24|ee>>>8)&4278255360,fe.push(ee),fe.push(ae)}return new h.init(fe,J)},clone:function(){for(var b=d.clone.call(this),w=b._state=this._state.slice(0),T=0;T<25;T++)w[T]=w[T].clone();return b}});c.SHA3=d._createHelper(y),c.HmacSHA3=d._createHmacHelper(y)}(Math),t.SHA3})}(sha3)),sha3.exports}var ripemd160={exports:{}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,function(n,e){(function(t,o){n.exports=o(requireCore())})(commonjsGlobal,function(t){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(o){var c=t,l=c.lib,h=l.WordArray,d=l.Hasher,g=c.algo,m=h.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),v=h.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),_=h.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),p=h.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),a=h.create([0,1518500249,1859775393,2400959708,2840853838]),u=h.create([1352829926,1548603684,1836072691,2053994217,0]),y=g.RIPEMD160=d.extend({_doReset:function(){this._hash=h.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(W,fe){for(var re=0;re<16;re++){var se=fe+re,ae=W[se];W[se]=(ae<<8|ae>>>24)&16711935|(ae<<24|ae>>>8)&4278255360}var ee=this._hash.words,P=a.words,C=u.words,E=m.words,k=v.words,F=_.words,j=p.words,Q,G,U,$,O,oe,ue,q,pe,be;oe=Q=ee[0],ue=G=ee[1],q=U=ee[2],pe=$=ee[3],be=O=ee[4];for(var ve,re=0;re<80;re+=1)ve=Q+W[fe+E[re]]|0,re<16?ve+=b(G,U,$)+P[0]:re<32?ve+=w(G,U,$)+P[1]:re<48?ve+=T(G,U,$)+P[2]:re<64?ve+=B(G,U,$)+P[3]:ve+=H(G,U,$)+P[4],ve=ve|0,ve=J(ve,F[re]),ve=ve+O|0,Q=O,O=$,$=J(U,10),U=G,G=ve,ve=oe+W[fe+k[re]]|0,re<16?ve+=H(ue,q,pe)+C[0]:re<32?ve+=B(ue,q,pe)+C[1]:re<48?ve+=T(ue,q,pe)+C[2]:re<64?ve+=w(ue,q,pe)+C[3]:ve+=b(ue,q,pe)+C[4],ve=ve|0,ve=J(ve,j[re]),ve=ve+be|0,oe=be,be=pe,pe=J(q,10),q=ue,ue=ve;ve=ee[1]+U+pe|0,ee[1]=ee[2]+$+be|0,ee[2]=ee[3]+O+oe|0,ee[3]=ee[4]+Q+ue|0,ee[4]=ee[0]+G+q|0,ee[0]=ve},_doFinalize:function(){var W=this._data,fe=W.words,re=this._nDataBytes*8,se=W.sigBytes*8;fe[se>>>5]|=128<<24-se%32,fe[(se+64>>>9<<4)+14]=(re<<8|re>>>24)&16711935|(re<<24|re>>>8)&4278255360,W.sigBytes=(fe.length+1)*4,this._process();for(var ae=this._hash,ee=ae.words,P=0;P<5;P++){var C=ee[P];ee[P]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360}return ae},clone:function(){var W=d.clone.call(this);return W._hash=this._hash.clone(),W}});function b(W,fe,re){return W^fe^re}function w(W,fe,re){return W&fe|~W&re}function T(W,fe,re){return(W|~fe)^re}function B(W,fe,re){return W&re|fe&~re}function H(W,fe,re){return W^(fe|~re)}function J(W,fe){return W<<fe|W>>>32-fe}c.RIPEMD160=d._createHelper(y),c.HmacRIPEMD160=d._createHmacHelper(y)}(),t.RIPEMD160})}(ripemd160)),ripemd160.exports}var hmac={exports:{}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,function(n,e){(function(t,o){n.exports=o(requireCore())})(commonjsGlobal,function(t){(function(){var o=t,c=o.lib,l=c.Base,h=o.enc,d=h.Utf8,g=o.algo;g.HMAC=l.extend({init:function(m,v){m=this._hasher=new m.init,typeof v=="string"&&(v=d.parse(v));var _=m.blockSize,p=_*4;v.sigBytes>p&&(v=m.finalize(v)),v.clamp();for(var a=this._oKey=v.clone(),u=this._iKey=v.clone(),y=a.words,b=u.words,w=0;w<_;w++)y[w]^=1549556828,b[w]^=909522486;a.sigBytes=u.sigBytes=p,this.reset()},reset:function(){var m=this._hasher;m.reset(),m.update(this._iKey)},update:function(m){return this._hasher.update(m),this},finalize:function(m){var v=this._hasher,_=v.finalize(m);v.reset();var p=v.finalize(this._oKey.clone().concat(_));return p}})})()})}(hmac)),hmac.exports}var pbkdf2={exports:{}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireSha256(),requireHmac())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.Base,h=c.WordArray,d=o.algo,g=d.SHA256,m=d.HMAC,v=d.PBKDF2=l.extend({cfg:l.extend({keySize:128/32,hasher:g,iterations:25e4}),init:function(_){this.cfg=this.cfg.extend(_)},compute:function(_,p){for(var a=this.cfg,u=m.create(a.hasher,_),y=h.create(),b=h.create([1]),w=y.words,T=b.words,B=a.keySize,H=a.iterations;w.length<B;){var J=u.update(p).finalize(b);u.reset();for(var W=J.words,fe=W.length,re=J,se=1;se<H;se++){re=u.finalize(re),u.reset();for(var ae=re.words,ee=0;ee<fe;ee++)W[ee]^=ae[ee]}y.concat(J),T[0]++}return y.sigBytes=B*4,y}});o.PBKDF2=function(_,p,a){return v.create(a).compute(_,p)}}(),t.PBKDF2})}(pbkdf2)),pbkdf2.exports}var evpkdf={exports:{}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.Base,h=c.WordArray,d=o.algo,g=d.MD5,m=d.EvpKDF=l.extend({cfg:l.extend({keySize:128/32,hasher:g,iterations:1}),init:function(v){this.cfg=this.cfg.extend(v)},compute:function(v,_){for(var p,a=this.cfg,u=a.hasher.create(),y=h.create(),b=y.words,w=a.keySize,T=a.iterations;b.length<w;){p&&u.update(p),p=u.update(v).finalize(_),u.reset();for(var B=1;B<T;B++)p=u.finalize(p),u.reset();y.concat(p)}return y.sigBytes=w*4,y}});o.EvpKDF=function(v,_,p){return m.create(p).compute(v,_)}}(),t.EvpKDF})}(evpkdf)),evpkdf.exports}var cipherCore={exports:{}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireEvpkdf())})(commonjsGlobal,function(t){t.lib.Cipher||function(o){var c=t,l=c.lib,h=l.Base,d=l.WordArray,g=l.BufferedBlockAlgorithm,m=c.enc;m.Utf8;var v=m.Base64,_=c.algo,p=_.EvpKDF,a=l.Cipher=g.extend({cfg:h.extend(),createEncryptor:function(ae,ee){return this.create(this._ENC_XFORM_MODE,ae,ee)},createDecryptor:function(ae,ee){return this.create(this._DEC_XFORM_MODE,ae,ee)},init:function(ae,ee,P){this.cfg=this.cfg.extend(P),this._xformMode=ae,this._key=ee,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(ae){return this._append(ae),this._process()},finalize:function(ae){ae&&this._append(ae);var ee=this._doFinalize();return ee},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ae(ee){return typeof ee=="string"?se:W}return function(ee){return{encrypt:function(P,C,E){return ae(C).encrypt(ee,P,C,E)},decrypt:function(P,C,E){return ae(C).decrypt(ee,P,C,E)}}}}()});l.StreamCipher=a.extend({_doFinalize:function(){var ae=this._process(!0);return ae},blockSize:1});var u=c.mode={},y=l.BlockCipherMode=h.extend({createEncryptor:function(ae,ee){return this.Encryptor.create(ae,ee)},createDecryptor:function(ae,ee){return this.Decryptor.create(ae,ee)},init:function(ae,ee){this._cipher=ae,this._iv=ee}}),b=u.CBC=function(){var ae=y.extend();ae.Encryptor=ae.extend({processBlock:function(P,C){var E=this._cipher,k=E.blockSize;ee.call(this,P,C,k),E.encryptBlock(P,C),this._prevBlock=P.slice(C,C+k)}}),ae.Decryptor=ae.extend({processBlock:function(P,C){var E=this._cipher,k=E.blockSize,F=P.slice(C,C+k);E.decryptBlock(P,C),ee.call(this,P,C,k),this._prevBlock=F}});function ee(P,C,E){var k,F=this._iv;F?(k=F,this._iv=o):k=this._prevBlock;for(var j=0;j<E;j++)P[C+j]^=k[j]}return ae}(),w=c.pad={},T=w.Pkcs7={pad:function(ae,ee){for(var P=ee*4,C=P-ae.sigBytes%P,E=C<<24|C<<16|C<<8|C,k=[],F=0;F<C;F+=4)k.push(E);var j=d.create(k,C);ae.concat(j)},unpad:function(ae){var ee=ae.words[ae.sigBytes-1>>>2]&255;ae.sigBytes-=ee}};l.BlockCipher=a.extend({cfg:a.cfg.extend({mode:b,padding:T}),reset:function(){var ae;a.reset.call(this);var ee=this.cfg,P=ee.iv,C=ee.mode;this._xformMode==this._ENC_XFORM_MODE?ae=C.createEncryptor:(ae=C.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==ae?this._mode.init(this,P&&P.words):(this._mode=ae.call(C,this,P&&P.words),this._mode.__creator=ae)},_doProcessBlock:function(ae,ee){this._mode.processBlock(ae,ee)},_doFinalize:function(){var ae,ee=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(ee.pad(this._data,this.blockSize),ae=this._process(!0)):(ae=this._process(!0),ee.unpad(ae)),ae},blockSize:128/32});var B=l.CipherParams=h.extend({init:function(ae){this.mixIn(ae)},toString:function(ae){return(ae||this.formatter).stringify(this)}}),H=c.format={},J=H.OpenSSL={stringify:function(ae){var ee,P=ae.ciphertext,C=ae.salt;return C?ee=d.create([1398893684,1701076831]).concat(C).concat(P):ee=P,ee.toString(v)},parse:function(ae){var ee,P=v.parse(ae),C=P.words;return C[0]==1398893684&&C[1]==1701076831&&(ee=d.create(C.slice(2,4)),C.splice(0,4),P.sigBytes-=16),B.create({ciphertext:P,salt:ee})}},W=l.SerializableCipher=h.extend({cfg:h.extend({format:J}),encrypt:function(ae,ee,P,C){C=this.cfg.extend(C);var E=ae.createEncryptor(P,C),k=E.finalize(ee),F=E.cfg;return B.create({ciphertext:k,key:P,iv:F.iv,algorithm:ae,mode:F.mode,padding:F.padding,blockSize:ae.blockSize,formatter:C.format})},decrypt:function(ae,ee,P,C){C=this.cfg.extend(C),ee=this._parse(ee,C.format);var E=ae.createDecryptor(P,C).finalize(ee.ciphertext);return E},_parse:function(ae,ee){return typeof ae=="string"?ee.parse(ae,this):ae}}),fe=c.kdf={},re=fe.OpenSSL={execute:function(ae,ee,P,C,E){if(C||(C=d.random(64/8)),E)var k=p.create({keySize:ee+P,hasher:E}).compute(ae,C);else var k=p.create({keySize:ee+P}).compute(ae,C);var F=d.create(k.words.slice(ee),P*4);return k.sigBytes=ee*4,B.create({key:k,iv:F,salt:C})}},se=l.PasswordBasedCipher=W.extend({cfg:W.cfg.extend({kdf:re}),encrypt:function(ae,ee,P,C){C=this.cfg.extend(C);var E=C.kdf.execute(P,ae.keySize,ae.ivSize,C.salt,C.hasher);C.iv=E.iv;var k=W.encrypt.call(this,ae,ee,E.key,C);return k.mixIn(E),k},decrypt:function(ae,ee,P,C){C=this.cfg.extend(C),ee=this._parse(ee,C.format);var E=C.kdf.execute(P,ae.keySize,ae.ivSize,ee.salt,C.hasher);C.iv=E.iv;var k=W.decrypt.call(this,ae,ee,E.key,C);return k}})}()})}(cipherCore)),cipherCore.exports}var modeCfb={exports:{}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireCipherCore())})(commonjsGlobal,function(t){return t.mode.CFB=function(){var o=t.lib.BlockCipherMode.extend();o.Encryptor=o.extend({processBlock:function(l,h){var d=this._cipher,g=d.blockSize;c.call(this,l,h,g,d),this._prevBlock=l.slice(h,h+g)}}),o.Decryptor=o.extend({processBlock:function(l,h){var d=this._cipher,g=d.blockSize,m=l.slice(h,h+g);c.call(this,l,h,g,d),this._prevBlock=m}});function c(l,h,d,g){var m,v=this._iv;v?(m=v.slice(0),this._iv=void 0):m=this._prevBlock,g.encryptBlock(m,0);for(var _=0;_<d;_++)l[h+_]^=m[_]}return o}(),t.mode.CFB})}(modeCfb)),modeCfb.exports}var modeCtr={exports:{}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireCipherCore())})(commonjsGlobal,function(t){return t.mode.CTR=function(){var o=t.lib.BlockCipherMode.extend(),c=o.Encryptor=o.extend({processBlock:function(l,h){var d=this._cipher,g=d.blockSize,m=this._iv,v=this._counter;m&&(v=this._counter=m.slice(0),this._iv=void 0);var _=v.slice(0);d.encryptBlock(_,0),v[g-1]=v[g-1]+1|0;for(var p=0;p<g;p++)l[h+p]^=_[p]}});return o.Decryptor=c,o}(),t.mode.CTR})}(modeCtr)),modeCtr.exports}var modeCtrGladman={exports:{}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireCipherCore())})(commonjsGlobal,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var o=t.lib.BlockCipherMode.extend();function c(d){if((d>>24&255)===255){var g=d>>16&255,m=d>>8&255,v=d&255;g===255?(g=0,m===255?(m=0,v===255?v=0:++v):++m):++g,d=0,d+=g<<16,d+=m<<8,d+=v}else d+=1<<24;return d}function l(d){return(d[0]=c(d[0]))===0&&(d[1]=c(d[1])),d}var h=o.Encryptor=o.extend({processBlock:function(d,g){var m=this._cipher,v=m.blockSize,_=this._iv,p=this._counter;_&&(p=this._counter=_.slice(0),this._iv=void 0),l(p);var a=p.slice(0);m.encryptBlock(a,0);for(var u=0;u<v;u++)d[g+u]^=a[u]}});return o.Decryptor=h,o}(),t.mode.CTRGladman})}(modeCtrGladman)),modeCtrGladman.exports}var modeOfb={exports:{}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireCipherCore())})(commonjsGlobal,function(t){return t.mode.OFB=function(){var o=t.lib.BlockCipherMode.extend(),c=o.Encryptor=o.extend({processBlock:function(l,h){var d=this._cipher,g=d.blockSize,m=this._iv,v=this._keystream;m&&(v=this._keystream=m.slice(0),this._iv=void 0),d.encryptBlock(v,0);for(var _=0;_<g;_++)l[h+_]^=v[_]}});return o.Decryptor=c,o}(),t.mode.OFB})}(modeOfb)),modeOfb.exports}var modeEcb={exports:{}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireCipherCore())})(commonjsGlobal,function(t){return t.mode.ECB=function(){var o=t.lib.BlockCipherMode.extend();return o.Encryptor=o.extend({processBlock:function(c,l){this._cipher.encryptBlock(c,l)}}),o.Decryptor=o.extend({processBlock:function(c,l){this._cipher.decryptBlock(c,l)}}),o}(),t.mode.ECB})}(modeEcb)),modeEcb.exports}var padAnsix923={exports:{}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireCipherCore())})(commonjsGlobal,function(t){return t.pad.AnsiX923={pad:function(o,c){var l=o.sigBytes,h=c*4,d=h-l%h,g=l+d-1;o.clamp(),o.words[g>>>2]|=d<<24-g%4*8,o.sigBytes+=d},unpad:function(o){var c=o.words[o.sigBytes-1>>>2]&255;o.sigBytes-=c}},t.pad.Ansix923})}(padAnsix923)),padAnsix923.exports}var padIso10126={exports:{}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireCipherCore())})(commonjsGlobal,function(t){return t.pad.Iso10126={pad:function(o,c){var l=c*4,h=l-o.sigBytes%l;o.concat(t.lib.WordArray.random(h-1)).concat(t.lib.WordArray.create([h<<24],1))},unpad:function(o){var c=o.words[o.sigBytes-1>>>2]&255;o.sigBytes-=c}},t.pad.Iso10126})}(padIso10126)),padIso10126.exports}var padIso97971={exports:{}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireCipherCore())})(commonjsGlobal,function(t){return t.pad.Iso97971={pad:function(o,c){o.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(o,c)},unpad:function(o){t.pad.ZeroPadding.unpad(o),o.sigBytes--}},t.pad.Iso97971})}(padIso97971)),padIso97971.exports}var padZeropadding={exports:{}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireCipherCore())})(commonjsGlobal,function(t){return t.pad.ZeroPadding={pad:function(o,c){var l=c*4;o.clamp(),o.sigBytes+=l-(o.sigBytes%l||l)},unpad:function(o){for(var c=o.words,l=o.sigBytes-1,l=o.sigBytes-1;l>=0;l--)if(c[l>>>2]>>>24-l%4*8&255){o.sigBytes=l+1;break}}},t.pad.ZeroPadding})}(padZeropadding)),padZeropadding.exports}var padNopadding={exports:{}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireCipherCore())})(commonjsGlobal,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(padNopadding)),padNopadding.exports}var formatHex={exports:{}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireCipherCore())})(commonjsGlobal,function(t){return function(o){var c=t,l=c.lib,h=l.CipherParams,d=c.enc,g=d.Hex,m=c.format;m.Hex={stringify:function(v){return v.ciphertext.toString(g)},parse:function(v){var _=g.parse(v);return h.create({ciphertext:_})}}}(),t.format.Hex})}(formatHex)),formatHex.exports}var aes={exports:{}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.BlockCipher,h=o.algo,d=[],g=[],m=[],v=[],_=[],p=[],a=[],u=[],y=[],b=[];(function(){for(var B=[],H=0;H<256;H++)H<128?B[H]=H<<1:B[H]=H<<1^283;for(var J=0,W=0,H=0;H<256;H++){var fe=W^W<<1^W<<2^W<<3^W<<4;fe=fe>>>8^fe&255^99,d[J]=fe,g[fe]=J;var re=B[J],se=B[re],ae=B[se],ee=B[fe]*257^fe*16843008;m[J]=ee<<24|ee>>>8,v[J]=ee<<16|ee>>>16,_[J]=ee<<8|ee>>>24,p[J]=ee;var ee=ae*16843009^se*65537^re*257^J*16843008;a[fe]=ee<<24|ee>>>8,u[fe]=ee<<16|ee>>>16,y[fe]=ee<<8|ee>>>24,b[fe]=ee,J?(J=re^B[B[B[ae^re]]],W^=B[B[W]]):J=W=1}})();var w=[0,1,2,4,8,16,32,64,128,27,54],T=h.AES=l.extend({_doReset:function(){var B;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var H=this._keyPriorReset=this._key,J=H.words,W=H.sigBytes/4,fe=this._nRounds=W+6,re=(fe+1)*4,se=this._keySchedule=[],ae=0;ae<re;ae++)ae<W?se[ae]=J[ae]:(B=se[ae-1],ae%W?W>6&&ae%W==4&&(B=d[B>>>24]<<24|d[B>>>16&255]<<16|d[B>>>8&255]<<8|d[B&255]):(B=B<<8|B>>>24,B=d[B>>>24]<<24|d[B>>>16&255]<<16|d[B>>>8&255]<<8|d[B&255],B^=w[ae/W|0]<<24),se[ae]=se[ae-W]^B);for(var ee=this._invKeySchedule=[],P=0;P<re;P++){var ae=re-P;if(P%4)var B=se[ae];else var B=se[ae-4];P<4||ae<=4?ee[P]=B:ee[P]=a[d[B>>>24]]^u[d[B>>>16&255]]^y[d[B>>>8&255]]^b[d[B&255]]}}},encryptBlock:function(B,H){this._doCryptBlock(B,H,this._keySchedule,m,v,_,p,d)},decryptBlock:function(B,H){var J=B[H+1];B[H+1]=B[H+3],B[H+3]=J,this._doCryptBlock(B,H,this._invKeySchedule,a,u,y,b,g);var J=B[H+1];B[H+1]=B[H+3],B[H+3]=J},_doCryptBlock:function(B,H,J,W,fe,re,se,ae){for(var ee=this._nRounds,P=B[H]^J[0],C=B[H+1]^J[1],E=B[H+2]^J[2],k=B[H+3]^J[3],F=4,j=1;j<ee;j++){var Q=W[P>>>24]^fe[C>>>16&255]^re[E>>>8&255]^se[k&255]^J[F++],G=W[C>>>24]^fe[E>>>16&255]^re[k>>>8&255]^se[P&255]^J[F++],U=W[E>>>24]^fe[k>>>16&255]^re[P>>>8&255]^se[C&255]^J[F++],$=W[k>>>24]^fe[P>>>16&255]^re[C>>>8&255]^se[E&255]^J[F++];P=Q,C=G,E=U,k=$}var Q=(ae[P>>>24]<<24|ae[C>>>16&255]<<16|ae[E>>>8&255]<<8|ae[k&255])^J[F++],G=(ae[C>>>24]<<24|ae[E>>>16&255]<<16|ae[k>>>8&255]<<8|ae[P&255])^J[F++],U=(ae[E>>>24]<<24|ae[k>>>16&255]<<16|ae[P>>>8&255]<<8|ae[C&255])^J[F++],$=(ae[k>>>24]<<24|ae[P>>>16&255]<<16|ae[C>>>8&255]<<8|ae[E&255])^J[F++];B[H]=Q,B[H+1]=G,B[H+2]=U,B[H+3]=$},keySize:256/32});o.AES=l._createHelper(T)}(),t.AES})}(aes)),aes.exports}var tripledes={exports:{}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.WordArray,h=c.BlockCipher,d=o.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],m=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],v=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],_=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],p=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],a=d.DES=h.extend({_doReset:function(){for(var w=this._key,T=w.words,B=[],H=0;H<56;H++){var J=g[H]-1;B[H]=T[J>>>5]>>>31-J%32&1}for(var W=this._subKeys=[],fe=0;fe<16;fe++){for(var re=W[fe]=[],se=v[fe],H=0;H<24;H++)re[H/6|0]|=B[(m[H]-1+se)%28]<<31-H%6,re[4+(H/6|0)]|=B[28+(m[H+24]-1+se)%28]<<31-H%6;re[0]=re[0]<<1|re[0]>>>31;for(var H=1;H<7;H++)re[H]=re[H]>>>(H-1)*4+3;re[7]=re[7]<<5|re[7]>>>27}for(var ae=this._invSubKeys=[],H=0;H<16;H++)ae[H]=W[15-H]},encryptBlock:function(w,T){this._doCryptBlock(w,T,this._subKeys)},decryptBlock:function(w,T){this._doCryptBlock(w,T,this._invSubKeys)},_doCryptBlock:function(w,T,B){this._lBlock=w[T],this._rBlock=w[T+1],u.call(this,4,252645135),u.call(this,16,65535),y.call(this,2,858993459),y.call(this,8,16711935),u.call(this,1,1431655765);for(var H=0;H<16;H++){for(var J=B[H],W=this._lBlock,fe=this._rBlock,re=0,se=0;se<8;se++)re|=_[se][((fe^J[se])&p[se])>>>0];this._lBlock=fe,this._rBlock=W^re}var ae=this._lBlock;this._lBlock=this._rBlock,this._rBlock=ae,u.call(this,1,1431655765),y.call(this,8,16711935),y.call(this,2,858993459),u.call(this,16,65535),u.call(this,4,252645135),w[T]=this._lBlock,w[T+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function u(w,T){var B=(this._lBlock>>>w^this._rBlock)&T;this._rBlock^=B,this._lBlock^=B<<w}function y(w,T){var B=(this._rBlock>>>w^this._lBlock)&T;this._lBlock^=B,this._rBlock^=B<<w}o.DES=h._createHelper(a);var b=d.TripleDES=h.extend({_doReset:function(){var w=this._key,T=w.words;if(T.length!==2&&T.length!==4&&T.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var B=T.slice(0,2),H=T.length<4?T.slice(0,2):T.slice(2,4),J=T.length<6?T.slice(0,2):T.slice(4,6);this._des1=a.createEncryptor(l.create(B)),this._des2=a.createEncryptor(l.create(H)),this._des3=a.createEncryptor(l.create(J))},encryptBlock:function(w,T){this._des1.encryptBlock(w,T),this._des2.decryptBlock(w,T),this._des3.encryptBlock(w,T)},decryptBlock:function(w,T){this._des3.decryptBlock(w,T),this._des2.encryptBlock(w,T),this._des1.decryptBlock(w,T)},keySize:192/32,ivSize:64/32,blockSize:64/32});o.TripleDES=h._createHelper(b)}(),t.TripleDES})}(tripledes)),tripledes.exports}var rc4={exports:{}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.StreamCipher,h=o.algo,d=h.RC4=l.extend({_doReset:function(){for(var v=this._key,_=v.words,p=v.sigBytes,a=this._S=[],u=0;u<256;u++)a[u]=u;for(var u=0,y=0;u<256;u++){var b=u%p,w=_[b>>>2]>>>24-b%4*8&255;y=(y+a[u]+w)%256;var T=a[u];a[u]=a[y],a[y]=T}this._i=this._j=0},_doProcessBlock:function(v,_){v[_]^=g.call(this)},keySize:256/32,ivSize:0});function g(){for(var v=this._S,_=this._i,p=this._j,a=0,u=0;u<4;u++){_=(_+1)%256,p=(p+v[_])%256;var y=v[_];v[_]=v[p],v[p]=y,a|=v[(v[_]+v[p])%256]<<24-u*8}return this._i=_,this._j=p,a}o.RC4=l._createHelper(d);var m=h.RC4Drop=d.extend({cfg:d.cfg.extend({drop:192}),_doReset:function(){d._doReset.call(this);for(var v=this.cfg.drop;v>0;v--)g.call(this)}});o.RC4Drop=l._createHelper(m)}(),t.RC4})}(rc4)),rc4.exports}var rabbit={exports:{}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.StreamCipher,h=o.algo,d=[],g=[],m=[],v=h.Rabbit=l.extend({_doReset:function(){for(var p=this._key.words,a=this.cfg.iv,u=0;u<4;u++)p[u]=(p[u]<<8|p[u]>>>24)&16711935|(p[u]<<24|p[u]>>>8)&4278255360;var y=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],b=this._C=[p[2]<<16|p[2]>>>16,p[0]&4294901760|p[1]&65535,p[3]<<16|p[3]>>>16,p[1]&4294901760|p[2]&65535,p[0]<<16|p[0]>>>16,p[2]&4294901760|p[3]&65535,p[1]<<16|p[1]>>>16,p[3]&4294901760|p[0]&65535];this._b=0;for(var u=0;u<4;u++)_.call(this);for(var u=0;u<8;u++)b[u]^=y[u+4&7];if(a){var w=a.words,T=w[0],B=w[1],H=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,J=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,W=H>>>16|J&4294901760,fe=J<<16|H&65535;b[0]^=H,b[1]^=W,b[2]^=J,b[3]^=fe,b[4]^=H,b[5]^=W,b[6]^=J,b[7]^=fe;for(var u=0;u<4;u++)_.call(this)}},_doProcessBlock:function(p,a){var u=this._X;_.call(this),d[0]=u[0]^u[5]>>>16^u[3]<<16,d[1]=u[2]^u[7]>>>16^u[5]<<16,d[2]=u[4]^u[1]>>>16^u[7]<<16,d[3]=u[6]^u[3]>>>16^u[1]<<16;for(var y=0;y<4;y++)d[y]=(d[y]<<8|d[y]>>>24)&16711935|(d[y]<<24|d[y]>>>8)&4278255360,p[a+y]^=d[y]},blockSize:128/32,ivSize:64/32});function _(){for(var p=this._X,a=this._C,u=0;u<8;u++)g[u]=a[u];a[0]=a[0]+1295307597+this._b|0,a[1]=a[1]+3545052371+(a[0]>>>0<g[0]>>>0?1:0)|0,a[2]=a[2]+886263092+(a[1]>>>0<g[1]>>>0?1:0)|0,a[3]=a[3]+1295307597+(a[2]>>>0<g[2]>>>0?1:0)|0,a[4]=a[4]+3545052371+(a[3]>>>0<g[3]>>>0?1:0)|0,a[5]=a[5]+886263092+(a[4]>>>0<g[4]>>>0?1:0)|0,a[6]=a[6]+1295307597+(a[5]>>>0<g[5]>>>0?1:0)|0,a[7]=a[7]+3545052371+(a[6]>>>0<g[6]>>>0?1:0)|0,this._b=a[7]>>>0<g[7]>>>0?1:0;for(var u=0;u<8;u++){var y=p[u]+a[u],b=y&65535,w=y>>>16,T=((b*b>>>17)+b*w>>>15)+w*w,B=((y&4294901760)*y|0)+((y&65535)*y|0);m[u]=T^B}p[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,p[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,p[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,p[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,p[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,p[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,p[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,p[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}o.Rabbit=l._createHelper(v)}(),t.Rabbit})}(rabbit)),rabbit.exports}var rabbitLegacy={exports:{}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.StreamCipher,h=o.algo,d=[],g=[],m=[],v=h.RabbitLegacy=l.extend({_doReset:function(){var p=this._key.words,a=this.cfg.iv,u=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],y=this._C=[p[2]<<16|p[2]>>>16,p[0]&4294901760|p[1]&65535,p[3]<<16|p[3]>>>16,p[1]&4294901760|p[2]&65535,p[0]<<16|p[0]>>>16,p[2]&4294901760|p[3]&65535,p[1]<<16|p[1]>>>16,p[3]&4294901760|p[0]&65535];this._b=0;for(var b=0;b<4;b++)_.call(this);for(var b=0;b<8;b++)y[b]^=u[b+4&7];if(a){var w=a.words,T=w[0],B=w[1],H=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,J=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,W=H>>>16|J&4294901760,fe=J<<16|H&65535;y[0]^=H,y[1]^=W,y[2]^=J,y[3]^=fe,y[4]^=H,y[5]^=W,y[6]^=J,y[7]^=fe;for(var b=0;b<4;b++)_.call(this)}},_doProcessBlock:function(p,a){var u=this._X;_.call(this),d[0]=u[0]^u[5]>>>16^u[3]<<16,d[1]=u[2]^u[7]>>>16^u[5]<<16,d[2]=u[4]^u[1]>>>16^u[7]<<16,d[3]=u[6]^u[3]>>>16^u[1]<<16;for(var y=0;y<4;y++)d[y]=(d[y]<<8|d[y]>>>24)&16711935|(d[y]<<24|d[y]>>>8)&4278255360,p[a+y]^=d[y]},blockSize:128/32,ivSize:64/32});function _(){for(var p=this._X,a=this._C,u=0;u<8;u++)g[u]=a[u];a[0]=a[0]+1295307597+this._b|0,a[1]=a[1]+3545052371+(a[0]>>>0<g[0]>>>0?1:0)|0,a[2]=a[2]+886263092+(a[1]>>>0<g[1]>>>0?1:0)|0,a[3]=a[3]+1295307597+(a[2]>>>0<g[2]>>>0?1:0)|0,a[4]=a[4]+3545052371+(a[3]>>>0<g[3]>>>0?1:0)|0,a[5]=a[5]+886263092+(a[4]>>>0<g[4]>>>0?1:0)|0,a[6]=a[6]+1295307597+(a[5]>>>0<g[5]>>>0?1:0)|0,a[7]=a[7]+3545052371+(a[6]>>>0<g[6]>>>0?1:0)|0,this._b=a[7]>>>0<g[7]>>>0?1:0;for(var u=0;u<8;u++){var y=p[u]+a[u],b=y&65535,w=y>>>16,T=((b*b>>>17)+b*w>>>15)+w*w,B=((y&4294901760)*y|0)+((y&65535)*y|0);m[u]=T^B}p[0]=m[0]+(m[7]<<16|m[7]>>>16)+(m[6]<<16|m[6]>>>16)|0,p[1]=m[1]+(m[0]<<8|m[0]>>>24)+m[7]|0,p[2]=m[2]+(m[1]<<16|m[1]>>>16)+(m[0]<<16|m[0]>>>16)|0,p[3]=m[3]+(m[2]<<8|m[2]>>>24)+m[1]|0,p[4]=m[4]+(m[3]<<16|m[3]>>>16)+(m[2]<<16|m[2]>>>16)|0,p[5]=m[5]+(m[4]<<8|m[4]>>>24)+m[3]|0,p[6]=m[6]+(m[5]<<16|m[5]>>>16)+(m[4]<<16|m[4]>>>16)|0,p[7]=m[7]+(m[6]<<8|m[6]>>>24)+m[5]|0}o.RabbitLegacy=l._createHelper(v)}(),t.RabbitLegacy})}(rabbitLegacy)),rabbitLegacy.exports}var blowfish={exports:{}},hasRequiredBlowfish;function requireBlowfish(){return hasRequiredBlowfish||(hasRequiredBlowfish=1,function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(t){return function(){var o=t,c=o.lib,l=c.BlockCipher,h=o.algo;const d=16,g=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],m=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var v={pbox:[],sbox:[]};function _(b,w){let T=w>>24&255,B=w>>16&255,H=w>>8&255,J=w&255,W=b.sbox[0][T]+b.sbox[1][B];return W=W^b.sbox[2][H],W=W+b.sbox[3][J],W}function p(b,w,T){let B=w,H=T,J;for(let W=0;W<d;++W)B=B^b.pbox[W],H=_(b,B)^H,J=B,B=H,H=J;return J=B,B=H,H=J,H=H^b.pbox[d],B=B^b.pbox[d+1],{left:B,right:H}}function a(b,w,T){let B=w,H=T,J;for(let W=d+1;W>1;--W)B=B^b.pbox[W],H=_(b,B)^H,J=B,B=H,H=J;return J=B,B=H,H=J,H=H^b.pbox[1],B=B^b.pbox[0],{left:B,right:H}}function u(b,w,T){for(let fe=0;fe<4;fe++){b.sbox[fe]=[];for(let re=0;re<256;re++)b.sbox[fe][re]=m[fe][re]}let B=0;for(let fe=0;fe<d+2;fe++)b.pbox[fe]=g[fe]^w[B],B++,B>=T&&(B=0);let H=0,J=0,W=0;for(let fe=0;fe<d+2;fe+=2)W=p(b,H,J),H=W.left,J=W.right,b.pbox[fe]=H,b.pbox[fe+1]=J;for(let fe=0;fe<4;fe++)for(let re=0;re<256;re+=2)W=p(b,H,J),H=W.left,J=W.right,b.sbox[fe][re]=H,b.sbox[fe][re+1]=J;return!0}var y=h.Blowfish=l.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var b=this._keyPriorReset=this._key,w=b.words,T=b.sigBytes/4;u(v,w,T)}},encryptBlock:function(b,w){var T=p(v,b[w],b[w+1]);b[w]=T.left,b[w+1]=T.right},decryptBlock:function(b,w){var T=a(v,b[w],b[w+1]);b[w]=T.left,b[w+1]=T.right},blockSize:64/32,keySize:128/32,ivSize:64/32});o.Blowfish=l._createHelper(y)}(),t.Blowfish})}(blowfish)),blowfish.exports}(function(n,e){(function(t,o,c){n.exports=o(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy(),requireBlowfish())})(commonjsGlobal,function(t){return t})})(cryptoJs);var cryptoJsExports=cryptoJs.exports;const CryptoJS=getDefaultExportFromCjs(cryptoJsExports);var long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(n){}function Long(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong$1(n){return(n&&n.__isLong__)===!0}Long.isLong=isLong$1;var INT_CACHE={},UINT_CACHE={};function fromInt(n,e){var t,o,c;return e?(n>>>=0,(c=0<=n&&n<256)&&(o=UINT_CACHE[n],o)?o:(t=fromBits(n,(n|0)<0?-1:0,!0),c&&(UINT_CACHE[n]=t),t)):(n|=0,(c=-128<=n&&n<128)&&(o=INT_CACHE[n],o)?o:(t=fromBits(n,n<0?-1:0,!1),c&&(INT_CACHE[n]=t),t))}Long.fromInt=fromInt;function fromNumber(n,e){if(isNaN(n))return e?UZERO:ZERO;if(e){if(n<0)return UZERO;if(n>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(n<=-TWO_PWR_63_DBL)return MIN_VALUE;if(n+1>=TWO_PWR_63_DBL)return MAX_VALUE}return n<0?fromNumber(-n,e).neg():fromBits(n%TWO_PWR_32_DBL|0,n/TWO_PWR_32_DBL|0,e)}Long.fromNumber=fromNumber;function fromBits(n,e,t){return new Long(n,e,t)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString$1(n,e,t){if(n.length===0)throw Error("empty string");if(n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return ZERO;if(typeof e=="number"?(t=e,e=!1):e=!!e,t=t||10,t<2||36<t)throw RangeError("radix");var o;if((o=n.indexOf("-"))>0)throw Error("interior hyphen");if(o===0)return fromString$1(n.substring(1),e,t).neg();for(var c=fromNumber(pow_dbl(t,8)),l=ZERO,h=0;h<n.length;h+=8){var d=Math.min(8,n.length-h),g=parseInt(n.substring(h,h+d),t);if(d<8){var m=fromNumber(pow_dbl(t,d));l=l.mul(m).add(fromNumber(g))}else l=l.mul(c),l=l.add(fromNumber(g))}return l.unsigned=e,l}Long.fromString=fromString$1;function fromValue(n,e){return typeof n=="number"?fromNumber(n,e):typeof n=="string"?fromString$1(n,e):fromBits(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function n(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function n(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function n(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var t=fromNumber(e),o=this.div(t),c=o.mul(t).sub(this);return o.toString(e)+c.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var l=fromNumber(pow_dbl(e,6),this.unsigned),h=this,d="";;){var g=h.div(l),m=h.sub(g.mul(l)).toInt()>>>0,v=m.toString(e);if(h=g,h.isZero())return v+d;for(;v.length<6;)v="0"+v;d=""+v+d}};LongPrototype.getHighBits=function n(){return this.high};LongPrototype.getHighBitsUnsigned=function n(){return this.high>>>0};LongPrototype.getLowBits=function n(){return this.low};LongPrototype.getLowBitsUnsigned=function n(){return this.low>>>0};LongPrototype.getNumBitsAbs=function n(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};LongPrototype.isZero=function n(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function n(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function n(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function n(){return(this.low&1)===1};LongPrototype.isEven=function n(){return(this.low&1)===0};LongPrototype.equals=function n(e){return isLong$1(e)||(e=fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function n(e){return!this.eq(e)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function n(e){return this.comp(e)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function n(e){return this.comp(e)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function n(e){return this.comp(e)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function n(e){return this.comp(e)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function n(e){if(isLong$1(e)||(e=fromValue(e)),this.eq(e))return 0;var t=this.isNegative(),o=e.isNegative();return t&&!o?-1:!t&&o?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function n(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function n(e){isLong$1(e)||(e=fromValue(e));var t=this.high>>>16,o=this.high&65535,c=this.low>>>16,l=this.low&65535,h=e.high>>>16,d=e.high&65535,g=e.low>>>16,m=e.low&65535,v=0,_=0,p=0,a=0;return a+=l+m,p+=a>>>16,a&=65535,p+=c+g,_+=p>>>16,p&=65535,_+=o+d,v+=_>>>16,_&=65535,v+=t+h,v&=65535,fromBits(p<<16|a,v<<16|_,this.unsigned)};LongPrototype.subtract=function n(e){return isLong$1(e)||(e=fromValue(e)),this.add(e.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function n(e){if(this.isZero())return ZERO;if(isLong$1(e)||(e=fromValue(e)),wasm){var t=wasm.mul(this.low,this.high,e.low,e.high);return fromBits(t,wasm.get_high(),this.unsigned)}if(e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var o=this.high>>>16,c=this.high&65535,l=this.low>>>16,h=this.low&65535,d=e.high>>>16,g=e.high&65535,m=e.low>>>16,v=e.low&65535,_=0,p=0,a=0,u=0;return u+=h*v,a+=u>>>16,u&=65535,a+=l*v,p+=a>>>16,a&=65535,a+=h*m,p+=a>>>16,a&=65535,p+=c*v,_+=p>>>16,p&=65535,p+=l*m,_+=p>>>16,p&=65535,p+=h*g,_+=p>>>16,p&=65535,_+=o*v+c*m+l*g+h*d,_&=65535,fromBits(a<<16|u,_<<16|p,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function n(e){if(isLong$1(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high);return fromBits(t,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var o,c,l;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;l=UZERO}else{if(this.eq(MIN_VALUE)){if(e.eq(ONE)||e.eq(NEG_ONE))return MIN_VALUE;if(e.eq(MIN_VALUE))return ONE;var h=this.shr(1);return o=h.div(e).shl(1),o.eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(c=this.sub(e.mul(o)),l=o.add(c.div(e)),l)}else if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();l=ZERO}for(c=this;c.gte(e);){o=Math.max(1,Math.floor(c.toNumber()/e.toNumber()));for(var d=Math.ceil(Math.log(o)/Math.LN2),g=d<=48?1:pow_dbl(2,d-48),m=fromNumber(o),v=m.mul(e);v.isNegative()||v.gt(c);)o-=g,m=fromNumber(o,this.unsigned),v=m.mul(e);m.isZero()&&(m=ONE),l=l.add(m),c=c.sub(v)}return l};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function n(e){if(isLong$1(e)||(e=fromValue(e)),wasm){var t=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high);return fromBits(t,wasm.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function n(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.and=function n(e){return isLong$1(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)};LongPrototype.or=function n(e){return isLong$1(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)};LongPrototype.xor=function n(e){return isLong$1(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)};LongPrototype.shiftLeft=function n(e){return isLong$1(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function n(e){return isLong$1(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function n(e){if(isLong$1(e)&&(e=e.toInt()),e&=63,e===0)return this;var t=this.high;if(e<32){var o=this.low;return fromBits(o>>>e|t<<32-e,t>>>e,this.unsigned)}else return e===32?fromBits(t,0,this.unsigned):fromBits(t>>>e-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.toSigned=function n(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function n(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function n(e){return e?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function n(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};LongPrototype.toBytesBE=function n(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Long.fromBytes=function n(e,t,o){return o?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)};Long.fromBytesLE=function n(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};Long.fromBytesBE=function n(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const Long$1=getDefaultExportFromCjs(long),byteToHex$1=[];for(let n=0;n<=255;n+=1)byteToHex$1.push(n.toString(16).padStart(2,"0"));function encode$3(n){let e="";for(const t of n)e+=byteToHex$1[t];return e}function decode$5(n){const t=(n.startsWith("0x")?n.substring(2):n).match(/.{1,2}/gu);return new Uint8Array((t??[]).map(o=>parseInt(o,16)))}class BadEntityIdError extends Error{constructor(e,t,o,c,l){super(`Entity ID ${e.toString()}.${t.toString()}.${o.toString()}-${c} was incorrect.`),this.name="BadEntityIdException",this.shard=e,this.realm=t,this.num=o,this.presentChecksum=c,this.expectedChecksum=l}}var isNumeric=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER=9007199254740991,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1e9;function clone(n){var e,t,o,c=T.prototype={constructor:T,toString:null,valueOf:null},l=new T(1),h=20,d=4,g=-7,m=21,v=-1e7,_=1e7,p=!1,a=1,u=0,y={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},b="0123456789abcdefghijklmnopqrstuvwxyz",w=!0;function T(re,se){var ae,ee,P,C,E,k,F,j,Q=this;if(!(Q instanceof T))return new T(re,se);if(se==null){if(re&&re._isBigNumber===!0){Q.s=re.s,!re.c||re.e>_?Q.c=Q.e=null:re.e<v?Q.c=[Q.e=0]:(Q.e=re.e,Q.c=re.c.slice());return}if((k=typeof re=="number")&&re*0==0){if(Q.s=1/re<0?(re=-re,-1):1,re===~~re){for(C=0,E=re;E>=10;E/=10,C++);C>_?Q.c=Q.e=null:(Q.e=C,Q.c=[re]);return}j=String(re)}else{if(!isNumeric.test(j=String(re)))return o(Q,j,k);Q.s=j.charCodeAt(0)==45?(j=j.slice(1),-1):1}(C=j.indexOf("."))>-1&&(j=j.replace(".","")),(E=j.search(/e/i))>0?(C<0&&(C=E),C+=+j.slice(E+1),j=j.substring(0,E)):C<0&&(C=j.length)}else{if(intCheck(se,2,b.length,"Base"),se==10&&w)return Q=new T(re),W(Q,h+Q.e+1,d);if(j=String(re),k=typeof re=="number"){if(re*0!=0)return o(Q,j,k,se);if(Q.s=1/re<0?(j=j.slice(1),-1):1,T.DEBUG&&j.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits+re)}else Q.s=j.charCodeAt(0)===45?(j=j.slice(1),-1):1;for(ae=b.slice(0,se),C=E=0,F=j.length;E<F;E++)if(ae.indexOf(ee=j.charAt(E))<0){if(ee=="."){if(E>C){C=F;continue}}else if(!P&&(j==j.toUpperCase()&&(j=j.toLowerCase())||j==j.toLowerCase()&&(j=j.toUpperCase()))){P=!0,E=-1,C=0;continue}return o(Q,String(re),k,se)}k=!1,j=t(j,se,10,Q.s),(C=j.indexOf("."))>-1?j=j.replace(".",""):C=j.length}for(E=0;j.charCodeAt(E)===48;E++);for(F=j.length;j.charCodeAt(--F)===48;);if(j=j.slice(E,++F)){if(F-=E,k&&T.DEBUG&&F>15&&(re>MAX_SAFE_INTEGER||re!==mathfloor(re)))throw Error(tooManyDigits+Q.s*re);if((C=C-E-1)>_)Q.c=Q.e=null;else if(C<v)Q.c=[Q.e=0];else{if(Q.e=C,Q.c=[],E=(C+1)%LOG_BASE,C<0&&(E+=LOG_BASE),E<F){for(E&&Q.c.push(+j.slice(0,E)),F-=LOG_BASE;E<F;)Q.c.push(+j.slice(E,E+=LOG_BASE));E=LOG_BASE-(j=j.slice(E)).length}else E-=F;for(;E--;j+="0");Q.c.push(+j)}}else Q.c=[Q.e=0]}T.clone=clone,T.ROUND_UP=0,T.ROUND_DOWN=1,T.ROUND_CEIL=2,T.ROUND_FLOOR=3,T.ROUND_HALF_UP=4,T.ROUND_HALF_DOWN=5,T.ROUND_HALF_EVEN=6,T.ROUND_HALF_CEIL=7,T.ROUND_HALF_FLOOR=8,T.EUCLID=9,T.config=T.set=function(re){var se,ae;if(re!=null)if(typeof re=="object"){if(re.hasOwnProperty(se="DECIMAL_PLACES")&&(ae=re[se],intCheck(ae,0,MAX,se),h=ae),re.hasOwnProperty(se="ROUNDING_MODE")&&(ae=re[se],intCheck(ae,0,8,se),d=ae),re.hasOwnProperty(se="EXPONENTIAL_AT")&&(ae=re[se],ae&&ae.pop?(intCheck(ae[0],-MAX,0,se),intCheck(ae[1],0,MAX,se),g=ae[0],m=ae[1]):(intCheck(ae,-MAX,MAX,se),g=-(m=ae<0?-ae:ae))),re.hasOwnProperty(se="RANGE"))if(ae=re[se],ae&&ae.pop)intCheck(ae[0],-MAX,-1,se),intCheck(ae[1],1,MAX,se),v=ae[0],_=ae[1];else if(intCheck(ae,-MAX,MAX,se),ae)v=-(_=ae<0?-ae:ae);else throw Error(bignumberError+se+" cannot be zero: "+ae);if(re.hasOwnProperty(se="CRYPTO"))if(ae=re[se],ae===!!ae)if(ae)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))p=ae;else throw p=!ae,Error(bignumberError+"crypto unavailable");else p=ae;else throw Error(bignumberError+se+" not true or false: "+ae);if(re.hasOwnProperty(se="MODULO_MODE")&&(ae=re[se],intCheck(ae,0,9,se),a=ae),re.hasOwnProperty(se="POW_PRECISION")&&(ae=re[se],intCheck(ae,0,MAX,se),u=ae),re.hasOwnProperty(se="FORMAT"))if(ae=re[se],typeof ae=="object")y=ae;else throw Error(bignumberError+se+" not an object: "+ae);if(re.hasOwnProperty(se="ALPHABET"))if(ae=re[se],typeof ae=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(ae))w=ae.slice(0,10)=="0123456789",b=ae;else throw Error(bignumberError+se+" invalid: "+ae)}else throw Error(bignumberError+"Object expected: "+re);return{DECIMAL_PLACES:h,ROUNDING_MODE:d,EXPONENTIAL_AT:[g,m],RANGE:[v,_],CRYPTO:p,MODULO_MODE:a,POW_PRECISION:u,FORMAT:y,ALPHABET:b}},T.isBigNumber=function(re){if(!re||re._isBigNumber!==!0)return!1;if(!T.DEBUG)return!0;var se,ae,ee=re.c,P=re.e,C=re.s;e:if({}.toString.call(ee)=="[object Array]"){if((C===1||C===-1)&&P>=-MAX&&P<=MAX&&P===mathfloor(P)){if(ee[0]===0){if(P===0&&ee.length===1)return!0;break e}if(se=(P+1)%LOG_BASE,se<1&&(se+=LOG_BASE),String(ee[0]).length==se){for(se=0;se<ee.length;se++)if(ae=ee[se],ae<0||ae>=BASE||ae!==mathfloor(ae))break e;if(ae!==0)return!0}}}else if(ee===null&&P===null&&(C===null||C===1||C===-1))return!0;throw Error(bignumberError+"Invalid BigNumber: "+re)},T.maximum=T.max=function(){return H(arguments,-1)},T.minimum=T.min=function(){return H(arguments,1)},T.random=function(){var re=9007199254740992,se=Math.random()*re&2097151?function(){return mathfloor(Math.random()*re)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(ae){var ee,P,C,E,k,F=0,j=[],Q=new T(l);if(ae==null?ae=h:intCheck(ae,0,MAX),E=mathceil(ae/LOG_BASE),p)if(crypto.getRandomValues){for(ee=crypto.getRandomValues(new Uint32Array(E*=2));F<E;)k=ee[F]*131072+(ee[F+1]>>>11),k>=9e15?(P=crypto.getRandomValues(new Uint32Array(2)),ee[F]=P[0],ee[F+1]=P[1]):(j.push(k%1e14),F+=2);F=E/2}else if(crypto.randomBytes){for(ee=crypto.randomBytes(E*=7);F<E;)k=(ee[F]&31)*281474976710656+ee[F+1]*1099511627776+ee[F+2]*4294967296+ee[F+3]*16777216+(ee[F+4]<<16)+(ee[F+5]<<8)+ee[F+6],k>=9e15?crypto.randomBytes(7).copy(ee,F):(j.push(k%1e14),F+=7);F=E/7}else throw p=!1,Error(bignumberError+"crypto unavailable");if(!p)for(;F<E;)k=se(),k<9e15&&(j[F++]=k%1e14);for(E=j[--F],ae%=LOG_BASE,E&&ae&&(k=POWS_TEN[LOG_BASE-ae],j[F]=mathfloor(E/k)*k);j[F]===0;j.pop(),F--);if(F<0)j=[C=0];else{for(C=-1;j[0]===0;j.splice(0,1),C-=LOG_BASE);for(F=1,k=j[0];k>=10;k/=10,F++);F<LOG_BASE&&(C-=LOG_BASE-F)}return Q.e=C,Q.c=j,Q}}(),T.sum=function(){for(var re=1,se=arguments,ae=new T(se[0]);re<se.length;)ae=ae.plus(se[re++]);return ae},t=function(){var re="0123456789";function se(ae,ee,P,C){for(var E,k=[0],F,j=0,Q=ae.length;j<Q;){for(F=k.length;F--;k[F]*=ee);for(k[0]+=C.indexOf(ae.charAt(j++)),E=0;E<k.length;E++)k[E]>P-1&&(k[E+1]==null&&(k[E+1]=0),k[E+1]+=k[E]/P|0,k[E]%=P)}return k.reverse()}return function(ae,ee,P,C,E){var k,F,j,Q,G,U,$,O,oe=ae.indexOf("."),ue=h,q=d;for(oe>=0&&(Q=u,u=0,ae=ae.replace(".",""),O=new T(ee),U=O.pow(ae.length-oe),u=Q,O.c=se(toFixedPoint(coeffToString(U.c),U.e,"0"),10,P,re),O.e=O.c.length),$=se(ae,ee,P,E?(k=b,re):(k=re,b)),j=Q=$.length;$[--Q]==0;$.pop());if(!$[0])return k.charAt(0);if(oe<0?--j:(U.c=$,U.e=j,U.s=C,U=e(U,O,ue,q,P),$=U.c,G=U.r,j=U.e),F=j+ue+1,oe=$[F],Q=P/2,G=G||F<0||$[F+1]!=null,G=q<4?(oe!=null||G)&&(q==0||q==(U.s<0?3:2)):oe>Q||oe==Q&&(q==4||G||q==6&&$[F-1]&1||q==(U.s<0?8:7)),F<1||!$[0])ae=G?toFixedPoint(k.charAt(1),-ue,k.charAt(0)):k.charAt(0);else{if($.length=F,G)for(--P;++$[--F]>P;)$[F]=0,F||(++j,$=[1].concat($));for(Q=$.length;!$[--Q];);for(oe=0,ae="";oe<=Q;ae+=k.charAt($[oe++]));ae=toFixedPoint(ae,j,k.charAt(0))}return ae}}(),e=function(){function re(ee,P,C){var E,k,F,j,Q=0,G=ee.length,U=P%SQRT_BASE,$=P/SQRT_BASE|0;for(ee=ee.slice();G--;)F=ee[G]%SQRT_BASE,j=ee[G]/SQRT_BASE|0,E=$*F+j*U,k=U*F+E%SQRT_BASE*SQRT_BASE+Q,Q=(k/C|0)+(E/SQRT_BASE|0)+$*j,ee[G]=k%C;return Q&&(ee=[Q].concat(ee)),ee}function se(ee,P,C,E){var k,F;if(C!=E)F=C>E?1:-1;else for(k=F=0;k<C;k++)if(ee[k]!=P[k]){F=ee[k]>P[k]?1:-1;break}return F}function ae(ee,P,C,E){for(var k=0;C--;)ee[C]-=k,k=ee[C]<P[C]?1:0,ee[C]=k*E+ee[C]-P[C];for(;!ee[0]&&ee.length>1;ee.splice(0,1));}return function(ee,P,C,E,k){var F,j,Q,G,U,$,O,oe,ue,q,pe,be,ve,we,Ce,Re,Se,$e=ee.s==P.s?1:-1,De=ee.c,Ne=P.c;if(!De||!De[0]||!Ne||!Ne[0])return new T(!ee.s||!P.s||(De?Ne&&De[0]==Ne[0]:!Ne)?NaN:De&&De[0]==0||!Ne?$e*0:$e/0);for(oe=new T($e),ue=oe.c=[],j=ee.e-P.e,$e=C+j+1,k||(k=BASE,j=bitFloor(ee.e/LOG_BASE)-bitFloor(P.e/LOG_BASE),$e=$e/LOG_BASE|0),Q=0;Ne[Q]==(De[Q]||0);Q++);if(Ne[Q]>(De[Q]||0)&&j--,$e<0)ue.push(1),G=!0;else{for(we=De.length,Re=Ne.length,Q=0,$e+=2,U=mathfloor(k/(Ne[0]+1)),U>1&&(Ne=re(Ne,U,k),De=re(De,U,k),Re=Ne.length,we=De.length),ve=Re,q=De.slice(0,Re),pe=q.length;pe<Re;q[pe++]=0);Se=Ne.slice(),Se=[0].concat(Se),Ce=Ne[0],Ne[1]>=k/2&&Ce++;do{if(U=0,F=se(Ne,q,Re,pe),F<0){if(be=q[0],Re!=pe&&(be=be*k+(q[1]||0)),U=mathfloor(be/Ce),U>1)for(U>=k&&(U=k-1),$=re(Ne,U,k),O=$.length,pe=q.length;se($,q,O,pe)==1;)U--,ae($,Re<O?Se:Ne,O,k),O=$.length,F=1;else U==0&&(F=U=1),$=Ne.slice(),O=$.length;if(O<pe&&($=[0].concat($)),ae(q,$,pe,k),pe=q.length,F==-1)for(;se(Ne,q,Re,pe)<1;)U++,ae(q,Re<pe?Se:Ne,pe,k),pe=q.length}else F===0&&(U++,q=[0]);ue[Q++]=U,q[0]?q[pe++]=De[ve]||0:(q=[De[ve]],pe=1)}while((ve++<we||q[0]!=null)&&$e--);G=q[0]!=null,ue[0]||ue.splice(0,1)}if(k==BASE){for(Q=1,$e=ue[0];$e>=10;$e/=10,Q++);W(oe,C+(oe.e=Q+j*LOG_BASE-1)+1,E,G)}else oe.e=j,oe.r=+G;return oe}}();function B(re,se,ae,ee){var P,C,E,k,F;if(ae==null?ae=d:intCheck(ae,0,8),!re.c)return re.toString();if(P=re.c[0],E=re.e,se==null)F=coeffToString(re.c),F=ee==1||ee==2&&(E<=g||E>=m)?toExponential(F,E):toFixedPoint(F,E,"0");else if(re=W(new T(re),se,ae),C=re.e,F=coeffToString(re.c),k=F.length,ee==1||ee==2&&(se<=C||C<=g)){for(;k<se;F+="0",k++);F=toExponential(F,C)}else if(se-=E,F=toFixedPoint(F,C,"0"),C+1>k){if(--se>0)for(F+=".";se--;F+="0");}else if(se+=C-k,se>0)for(C+1==k&&(F+=".");se--;F+="0");return re.s<0&&P?"-"+F:F}function H(re,se){for(var ae,ee,P=1,C=new T(re[0]);P<re.length;P++)ee=new T(re[P]),(!ee.s||(ae=compare$2(C,ee))===se||ae===0&&C.s===se)&&(C=ee);return C}function J(re,se,ae){for(var ee=1,P=se.length;!se[--P];se.pop());for(P=se[0];P>=10;P/=10,ee++);return(ae=ee+ae*LOG_BASE-1)>_?re.c=re.e=null:ae<v?re.c=[re.e=0]:(re.e=ae,re.c=se),re}o=function(){var re=/^(-?)0([xbo])(?=\w[\w.]*$)/i,se=/^([^.]+)\.$/,ae=/^\.([^.]+)$/,ee=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(C,E,k,F){var j,Q=k?E:E.replace(P,"");if(ee.test(Q))C.s=isNaN(Q)?null:Q<0?-1:1;else{if(!k&&(Q=Q.replace(re,function(G,U,$){return j=($=$.toLowerCase())=="x"?16:$=="b"?2:8,!F||F==j?U:G}),F&&(j=F,Q=Q.replace(se,"$1").replace(ae,"0.$1")),E!=Q))return new T(Q,j);if(T.DEBUG)throw Error(bignumberError+"Not a"+(F?" base "+F:"")+" number: "+E);C.s=null}C.c=C.e=null}}();function W(re,se,ae,ee){var P,C,E,k,F,j,Q,G=re.c,U=POWS_TEN;if(G){e:{for(P=1,k=G[0];k>=10;k/=10,P++);if(C=se-P,C<0)C+=LOG_BASE,E=se,F=G[j=0],Q=mathfloor(F/U[P-E-1]%10);else if(j=mathceil((C+1)/LOG_BASE),j>=G.length)if(ee){for(;G.length<=j;G.push(0));F=Q=0,P=1,C%=LOG_BASE,E=C-LOG_BASE+1}else break e;else{for(F=k=G[j],P=1;k>=10;k/=10,P++);C%=LOG_BASE,E=C-LOG_BASE+P,Q=E<0?0:mathfloor(F/U[P-E-1]%10)}if(ee=ee||se<0||G[j+1]!=null||(E<0?F:F%U[P-E-1]),ee=ae<4?(Q||ee)&&(ae==0||ae==(re.s<0?3:2)):Q>5||Q==5&&(ae==4||ee||ae==6&&(C>0?E>0?F/U[P-E]:0:G[j-1])%10&1||ae==(re.s<0?8:7)),se<1||!G[0])return G.length=0,ee?(se-=re.e+1,G[0]=U[(LOG_BASE-se%LOG_BASE)%LOG_BASE],re.e=-se||0):G[0]=re.e=0,re;if(C==0?(G.length=j,k=1,j--):(G.length=j+1,k=U[LOG_BASE-C],G[j]=E>0?mathfloor(F/U[P-E]%U[E])*k:0),ee)for(;;)if(j==0){for(C=1,E=G[0];E>=10;E/=10,C++);for(E=G[0]+=k,k=1;E>=10;E/=10,k++);C!=k&&(re.e++,G[0]==BASE&&(G[0]=1));break}else{if(G[j]+=k,G[j]!=BASE)break;G[j--]=0,k=1}for(C=G.length;G[--C]===0;G.pop());}re.e>_?re.c=re.e=null:re.e<v&&(re.c=[re.e=0])}return re}function fe(re){var se,ae=re.e;return ae===null?re.toString():(se=coeffToString(re.c),se=ae<=g||ae>=m?toExponential(se,ae):toFixedPoint(se,ae,"0"),re.s<0?"-"+se:se)}return c.absoluteValue=c.abs=function(){var re=new T(this);return re.s<0&&(re.s=1),re},c.comparedTo=function(re,se){return compare$2(this,new T(re,se))},c.decimalPlaces=c.dp=function(re,se){var ae,ee,P,C=this;if(re!=null)return intCheck(re,0,MAX),se==null?se=d:intCheck(se,0,8),W(new T(C),re+C.e+1,se);if(!(ae=C.c))return null;if(ee=((P=ae.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE,P=ae[P])for(;P%10==0;P/=10,ee--);return ee<0&&(ee=0),ee},c.dividedBy=c.div=function(re,se){return e(this,new T(re,se),h,d)},c.dividedToIntegerBy=c.idiv=function(re,se){return e(this,new T(re,se),0,1)},c.exponentiatedBy=c.pow=function(re,se){var ae,ee,P,C,E,k,F,j,Q,G=this;if(re=new T(re),re.c&&!re.isInteger())throw Error(bignumberError+"Exponent not an integer: "+fe(re));if(se!=null&&(se=new T(se)),k=re.e>14,!G.c||!G.c[0]||G.c[0]==1&&!G.e&&G.c.length==1||!re.c||!re.c[0])return Q=new T(Math.pow(+fe(G),k?re.s*(2-isOdd(re)):+fe(re))),se?Q.mod(se):Q;if(F=re.s<0,se){if(se.c?!se.c[0]:!se.s)return new T(NaN);ee=!F&&G.isInteger()&&se.isInteger(),ee&&(G=G.mod(se))}else{if(re.e>9&&(G.e>0||G.e<-1||(G.e==0?G.c[0]>1||k&&G.c[1]>=24e7:G.c[0]<8e13||k&&G.c[0]<=9999975e7)))return C=G.s<0&&isOdd(re)?-0:0,G.e>-1&&(C=1/C),new T(F?1/C:C);u&&(C=mathceil(u/LOG_BASE+2))}for(k?(ae=new T(.5),F&&(re.s=1),j=isOdd(re)):(P=Math.abs(+fe(re)),j=P%2),Q=new T(l);;){if(j){if(Q=Q.times(G),!Q.c)break;C?Q.c.length>C&&(Q.c.length=C):ee&&(Q=Q.mod(se))}if(P){if(P=mathfloor(P/2),P===0)break;j=P%2}else if(re=re.times(ae),W(re,re.e+1,1),re.e>14)j=isOdd(re);else{if(P=+fe(re),P===0)break;j=P%2}G=G.times(G),C?G.c&&G.c.length>C&&(G.c.length=C):ee&&(G=G.mod(se))}return ee?Q:(F&&(Q=l.div(Q)),se?Q.mod(se):C?W(Q,u,d,E):Q)},c.integerValue=function(re){var se=new T(this);return re==null?re=d:intCheck(re,0,8),W(se,se.e+1,re)},c.isEqualTo=c.eq=function(re,se){return compare$2(this,new T(re,se))===0},c.isFinite=function(){return!!this.c},c.isGreaterThan=c.gt=function(re,se){return compare$2(this,new T(re,se))>0},c.isGreaterThanOrEqualTo=c.gte=function(re,se){return(se=compare$2(this,new T(re,se)))===1||se===0},c.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2},c.isLessThan=c.lt=function(re,se){return compare$2(this,new T(re,se))<0},c.isLessThanOrEqualTo=c.lte=function(re,se){return(se=compare$2(this,new T(re,se)))===-1||se===0},c.isNaN=function(){return!this.s},c.isNegative=function(){return this.s<0},c.isPositive=function(){return this.s>0},c.isZero=function(){return!!this.c&&this.c[0]==0},c.minus=function(re,se){var ae,ee,P,C,E=this,k=E.s;if(re=new T(re,se),se=re.s,!k||!se)return new T(NaN);if(k!=se)return re.s=-se,E.plus(re);var F=E.e/LOG_BASE,j=re.e/LOG_BASE,Q=E.c,G=re.c;if(!F||!j){if(!Q||!G)return Q?(re.s=-se,re):new T(G?E:NaN);if(!Q[0]||!G[0])return G[0]?(re.s=-se,re):new T(Q[0]?E:d==3?-0:0)}if(F=bitFloor(F),j=bitFloor(j),Q=Q.slice(),k=F-j){for((C=k<0)?(k=-k,P=Q):(j=F,P=G),P.reverse(),se=k;se--;P.push(0));P.reverse()}else for(ee=(C=(k=Q.length)<(se=G.length))?k:se,k=se=0;se<ee;se++)if(Q[se]!=G[se]){C=Q[se]<G[se];break}if(C&&(P=Q,Q=G,G=P,re.s=-re.s),se=(ee=G.length)-(ae=Q.length),se>0)for(;se--;Q[ae++]=0);for(se=BASE-1;ee>k;){if(Q[--ee]<G[ee]){for(ae=ee;ae&&!Q[--ae];Q[ae]=se);--Q[ae],Q[ee]+=BASE}Q[ee]-=G[ee]}for(;Q[0]==0;Q.splice(0,1),--j);return Q[0]?J(re,Q,j):(re.s=d==3?-1:1,re.c=[re.e=0],re)},c.modulo=c.mod=function(re,se){var ae,ee,P=this;return re=new T(re,se),!P.c||!re.s||re.c&&!re.c[0]?new T(NaN):!re.c||P.c&&!P.c[0]?new T(P):(a==9?(ee=re.s,re.s=1,ae=e(P,re,0,3),re.s=ee,ae.s*=ee):ae=e(P,re,0,a),re=P.minus(ae.times(re)),!re.c[0]&&a==1&&(re.s=P.s),re)},c.multipliedBy=c.times=function(re,se){var ae,ee,P,C,E,k,F,j,Q,G,U,$,O,oe,ue,q=this,pe=q.c,be=(re=new T(re,se)).c;if(!pe||!be||!pe[0]||!be[0])return!q.s||!re.s||pe&&!pe[0]&&!be||be&&!be[0]&&!pe?re.c=re.e=re.s=null:(re.s*=q.s,!pe||!be?re.c=re.e=null:(re.c=[0],re.e=0)),re;for(ee=bitFloor(q.e/LOG_BASE)+bitFloor(re.e/LOG_BASE),re.s*=q.s,F=pe.length,G=be.length,F<G&&(O=pe,pe=be,be=O,P=F,F=G,G=P),P=F+G,O=[];P--;O.push(0));for(oe=BASE,ue=SQRT_BASE,P=G;--P>=0;){for(ae=0,U=be[P]%ue,$=be[P]/ue|0,E=F,C=P+E;C>P;)j=pe[--E]%ue,Q=pe[E]/ue|0,k=$*j+Q*U,j=U*j+k%ue*ue+O[C]+ae,ae=(j/oe|0)+(k/ue|0)+$*Q,O[C--]=j%oe;O[C]=ae}return ae?++ee:O.splice(0,1),J(re,O,ee)},c.negated=function(){var re=new T(this);return re.s=-re.s||null,re},c.plus=function(re,se){var ae,ee=this,P=ee.s;if(re=new T(re,se),se=re.s,!P||!se)return new T(NaN);if(P!=se)return re.s=-se,ee.minus(re);var C=ee.e/LOG_BASE,E=re.e/LOG_BASE,k=ee.c,F=re.c;if(!C||!E){if(!k||!F)return new T(P/0);if(!k[0]||!F[0])return F[0]?re:new T(k[0]?ee:P*0)}if(C=bitFloor(C),E=bitFloor(E),k=k.slice(),P=C-E){for(P>0?(E=C,ae=F):(P=-P,ae=k),ae.reverse();P--;ae.push(0));ae.reverse()}for(P=k.length,se=F.length,P-se<0&&(ae=F,F=k,k=ae,se=P),P=0;se;)P=(k[--se]=k[se]+F[se]+P)/BASE|0,k[se]=BASE===k[se]?0:k[se]%BASE;return P&&(k=[P].concat(k),++E),J(re,k,E)},c.precision=c.sd=function(re,se){var ae,ee,P,C=this;if(re!=null&&re!==!!re)return intCheck(re,1,MAX),se==null?se=d:intCheck(se,0,8),W(new T(C),re,se);if(!(ae=C.c))return null;if(P=ae.length-1,ee=P*LOG_BASE+1,P=ae[P]){for(;P%10==0;P/=10,ee--);for(P=ae[0];P>=10;P/=10,ee++);}return re&&C.e+1>ee&&(ee=C.e+1),ee},c.shiftedBy=function(re){return intCheck(re,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER),this.times("1e"+re)},c.squareRoot=c.sqrt=function(){var re,se,ae,ee,P,C=this,E=C.c,k=C.s,F=C.e,j=h+4,Q=new T("0.5");if(k!==1||!E||!E[0])return new T(!k||k<0&&(!E||E[0])?NaN:E?C:1/0);if(k=Math.sqrt(+fe(C)),k==0||k==1/0?(se=coeffToString(E),(se.length+F)%2==0&&(se+="0"),k=Math.sqrt(+se),F=bitFloor((F+1)/2)-(F<0||F%2),k==1/0?se="5e"+F:(se=k.toExponential(),se=se.slice(0,se.indexOf("e")+1)+F),ae=new T(se)):ae=new T(k+""),ae.c[0]){for(F=ae.e,k=F+j,k<3&&(k=0);;)if(P=ae,ae=Q.times(P.plus(e(C,P,j,1))),coeffToString(P.c).slice(0,k)===(se=coeffToString(ae.c)).slice(0,k))if(ae.e<F&&--k,se=se.slice(k-3,k+1),se=="9999"||!ee&&se=="4999"){if(!ee&&(W(P,P.e+h+2,0),P.times(P).eq(C))){ae=P;break}j+=4,k+=4,ee=1}else{(!+se||!+se.slice(1)&&se.charAt(0)=="5")&&(W(ae,ae.e+h+2,1),re=!ae.times(ae).eq(C));break}}return W(ae,ae.e+h+1,d,re)},c.toExponential=function(re,se){return re!=null&&(intCheck(re,0,MAX),re++),B(this,re,se,1)},c.toFixed=function(re,se){return re!=null&&(intCheck(re,0,MAX),re=re+this.e+1),B(this,re,se)},c.toFormat=function(re,se,ae){var ee,P=this;if(ae==null)re!=null&&se&&typeof se=="object"?(ae=se,se=null):re&&typeof re=="object"?(ae=re,re=se=null):ae=y;else if(typeof ae!="object")throw Error(bignumberError+"Argument not an object: "+ae);if(ee=P.toFixed(re,se),P.c){var C,E=ee.split("."),k=+ae.groupSize,F=+ae.secondaryGroupSize,j=ae.groupSeparator||"",Q=E[0],G=E[1],U=P.s<0,$=U?Q.slice(1):Q,O=$.length;if(F&&(C=k,k=F,F=C,O-=C),k>0&&O>0){for(C=O%k||k,Q=$.substr(0,C);C<O;C+=k)Q+=j+$.substr(C,k);F>0&&(Q+=j+$.slice(C)),U&&(Q="-"+Q)}ee=G?Q+(ae.decimalSeparator||"")+((F=+ae.fractionGroupSize)?G.replace(new RegExp("\\d{"+F+"}\\B","g"),"$&"+(ae.fractionGroupSeparator||"")):G):Q}return(ae.prefix||"")+ee+(ae.suffix||"")},c.toFraction=function(re){var se,ae,ee,P,C,E,k,F,j,Q,G,U,$=this,O=$.c;if(re!=null&&(k=new T(re),!k.isInteger()&&(k.c||k.s!==1)||k.lt(l)))throw Error(bignumberError+"Argument "+(k.isInteger()?"out of range: ":"not an integer: ")+fe(k));if(!O)return new T($);for(se=new T(l),j=ae=new T(l),ee=F=new T(l),U=coeffToString(O),C=se.e=U.length-$.e-1,se.c[0]=POWS_TEN[(E=C%LOG_BASE)<0?LOG_BASE+E:E],re=!re||k.comparedTo(se)>0?C>0?se:j:k,E=_,_=1/0,k=new T(U),F.c[0]=0;Q=e(k,se,0,1),P=ae.plus(Q.times(ee)),P.comparedTo(re)!=1;)ae=ee,ee=P,j=F.plus(Q.times(P=j)),F=P,se=k.minus(Q.times(P=se)),k=P;return P=e(re.minus(ae),ee,0,1),F=F.plus(P.times(j)),ae=ae.plus(P.times(ee)),F.s=j.s=$.s,C=C*2,G=e(j,ee,C,d).minus($).abs().comparedTo(e(F,ae,C,d).minus($).abs())<1?[j,ee]:[F,ae],_=E,G},c.toNumber=function(){return+fe(this)},c.toPrecision=function(re,se){return re!=null&&intCheck(re,1,MAX),B(this,re,se,2)},c.toString=function(re){var se,ae=this,ee=ae.s,P=ae.e;return P===null?ee?(se="Infinity",ee<0&&(se="-"+se)):se="NaN":(re==null?se=P<=g||P>=m?toExponential(coeffToString(ae.c),P):toFixedPoint(coeffToString(ae.c),P,"0"):re===10&&w?(ae=W(new T(ae),h+P+1,d),se=toFixedPoint(coeffToString(ae.c),ae.e,"0")):(intCheck(re,2,b.length,"Base"),se=t(toFixedPoint(coeffToString(ae.c),P,"0"),10,re,ee,!0)),ee<0&&ae.c[0]&&(se="-"+se)),se},c.valueOf=c.toJSON=function(){return fe(this)},c._isBigNumber=!0,c[Symbol.toStringTag]="BigNumber",c[Symbol.for("nodejs.util.inspect.custom")]=c.valueOf,n!=null&&T.set(n),T}function bitFloor(n){var e=n|0;return n>0||n===e?e:e-1}function coeffToString(n){for(var e,t,o=1,c=n.length,l=n[0]+"";o<c;){for(e=n[o++]+"",t=LOG_BASE-e.length;t--;e="0"+e);l+=e}for(c=l.length;l.charCodeAt(--c)===48;);return l.slice(0,c+1||1)}function compare$2(n,e){var t,o,c=n.c,l=e.c,h=n.s,d=e.s,g=n.e,m=e.e;if(!h||!d)return null;if(t=c&&!c[0],o=l&&!l[0],t||o)return t?o?0:-d:h;if(h!=d)return h;if(t=h<0,o=g==m,!c||!l)return o?0:!c^t?1:-1;if(!o)return g>m^t?1:-1;for(d=(g=c.length)<(m=l.length)?g:m,h=0;h<d;h++)if(c[h]!=l[h])return c[h]>l[h]^t?1:-1;return g==m?0:g>m^t?1:-1}function intCheck(n,e,t,o){if(n<e||n>t||n!==mathfloor(n))throw Error(bignumberError+(o||"Argument")+(typeof n=="number"?n<e||n>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}function isOdd(n){var e=n.c.length-1;return bitFloor(n.e/LOG_BASE)==e&&n.c[e]%2!=0}function toExponential(n,e){return(n.length>1?n.charAt(0)+"."+n.slice(1):n)+(e<0?"e":"e+")+e}function toFixedPoint(n,e,t){var o,c;if(e<0){for(c=t+".";++e;c+=t);n=c+n}else if(o=n.length,++e>o){for(c=t,e-=o;--e;c+=t);n+=c}else e<o&&(n=n.slice(0,e)+"."+n.slice(e));return n}var BigNumber=clone();const REQUIRE_NON_NULL_ERROR="This value cannot be null | undefined.",REQUIRE_STRING_OR_UINT8ARRAY_ERROR="This value must be a string or Uint8Array.",REQUIRE_ARRAY_ERROR="The provided variable must be an Array.",FUNCTION_CONVERT_TO_BIGNUMBER_ERROR="This value must be a String, Number, or BigNumber to be converted.",FUNCTION_CONVERT_TO_NUMBER_ERROR="This value must be a String, Number, or BigNumber to be converted.",FUNCTION_CONVERT_TO_NUMBER_PARSE_ERROR="Unable to parse given variable. Returns NaN.";function isNonNull(n){return n!=null}function isUint8Array(n){return isNonNull(n)&&n instanceof Uint8Array}function isNumber(n){return isNonNull(n)&&(typeof n=="number"||n instanceof Number)}function isBigNumber(n){return isNonNull(n)&&n instanceof BigNumber}function isLong(n){return isNonNull(n)&&n instanceof Long$1}function isString(n){return isNonNull(n)&&typeof n=="string"}function isStringOrUint8Array(n){return isNonNull(n)&&(isString(n)||isUint8Array(n))}function isLongZeroAddress(n){for(let e=0;e<12;e++)if(n[e]!=0)return!1;return!0}function requireNonNull(n){if(isNonNull(n))return n;throw new Error(REQUIRE_NON_NULL_ERROR)}function requireStringOrUint8Array(n){if(isStringOrUint8Array(requireNonNull(n)))return n;throw new Error(REQUIRE_STRING_OR_UINT8ARRAY_ERROR)}function convertToBigNumber(n){if(requireNonNull(n),isBigNumber(n)||isString(n)||isNumber(n)||isLong(n))return new BigNumber(n);throw new Error(FUNCTION_CONVERT_TO_BIGNUMBER_ERROR)}function convertToBigNumberArray(n){if(n instanceof Array)return n.map(convertToBigNumber);throw new Error(REQUIRE_ARRAY_ERROR)}function convertToNumber(n){if(requireNonNull(n),isBigNumber(n)||isString(n)||isNumber(n)||isLong(n)){const e=parseInt(n);if(isNaN(e))throw new Error(FUNCTION_CONVERT_TO_NUMBER_PARSE_ERROR);return e}else throw new Error(FUNCTION_CONVERT_TO_NUMBER_ERROR)}function safeView(n,e=0,t=n.byteLength){if(!(Number.isInteger(e)&&e>=0))throw new Error("Invalid offset!");if(!(Number.isInteger(t)&&t>=0))throw new Error("Invalid length!");return new DataView(n.buffer,n.byteOffset+e,Math.min(t,n.byteLength-e))}function compare$1(n,e,t=new Set){if(typeof n=="object"&&typeof e=="object"){const o=Object.keys(n),c=Object.keys(e);if(o.length!==c.length)return!1;for(let l=0;l<o.length;l++){if(o[l]!==c[l])return!1;if(!t.has(o[l])&&!compare$1(n[o[l]],e[c[l]],t))return!1}return!0}else return typeof n=="number"&&typeof e=="number"||typeof n=="string"&&typeof e=="string"||typeof n=="boolean"&&typeof e=="boolean"?n===e:!1}function shuffle(n){for(var e=n.length,t,o;e!==0;)o=Math.floor(Math.random()*e),e-=1,t=n[e],n[e]=n[o],n[o]=t}function arrayEqual$2(n,e){if(n===e)return!0;if(n.byteLength!==e.byteLength)return!1;const t=new DataView(n.buffer,n.byteOffset,n.byteLength),o=new DataView(e.buffer,e.byteOffset,e.byteLength);let c=n.byteLength;for(;c--;)if(t.getUint8(c)!==o.getUint8(c))return!1;return!0}const ENTITY_ID_REGEX=/^(\d+)(?:\.(\d+)\.([a-fA-F0-9]+))?(?:-([a-z]{5}))?$/;function constructor(n,e,t){if(e==null&&t!=null||e!=null&&t==null)throw new Error("invalid entity ID");const[o,c,l]=typeof n=="number"||Long$1.isLong(n)?[t!=null?Long$1.fromValue(n):Long$1.ZERO,e!=null?Long$1.fromValue(e):Long$1.ZERO,t!=null?Long$1.fromValue(t):Long$1.fromValue(n)]:[n.shard!=null?Long$1.fromValue(n.shard):Long$1.ZERO,n.realm!=null?Long$1.fromValue(n.realm):Long$1.ZERO,Long$1.fromValue(n.num)];if(o.isNegative()||c.isNegative()||l.isNegative())throw new Error("negative numbers are not allowed in IDs");return{shard:o,realm:c,num:l}}function compare(n,e){let t=n[0].compare(e[0]);return t!=0||(t=n[1].compare(e[1]),t!=0)?t:n[2].compare(e[2])}function fromStringSplitter(n){const e=ENTITY_ID_REGEX.exec(n);if(e==null)throw new Error(`failed to parse entity id: ${n}`);return e[2]==null&&e[3]==null?{shard:"0",realm:"0",numOrHex:e[1],checksum:e[4]}:{shard:e[1],realm:e[2],numOrHex:e[3],checksum:e[4]}}function fromString(n){const e=fromStringSplitter(n);if(Number.isNaN(e.shard)||Number.isNaN(e.realm)||Number.isNaN(e.numOrHex))throw new Error("invalid format for entity ID");return{shard:e.shard!=null?Long$1.fromString(e.shard):Long$1.ZERO,realm:e.realm!=null?Long$1.fromString(e.realm):Long$1.ZERO,num:Long$1.fromString(e.numOrHex),checksum:e.checksum}}function fromSolidityAddress(n){const e=n.startsWith("0x")?decode$5(n.slice(2)):decode$5(n);if(e.length!==20)throw new Error(`Invalid hex encoded solidity address length:
                expected length 40, got length ${n.length}`);const t=Long$1.fromBytesBE([0,0,0,0,...e.slice(0,4)]),o=Long$1.fromBytesBE(Array.from(e.slice(4,12))),c=Long$1.fromBytesBE(Array.from(e.slice(12,20)));return[t,o,c]}function toSolidityAddress(n){const e=new Uint8Array(20),t=safeView(e),[o,c,l]=n;return t.setUint32(0,convertToNumber(o)),t.setUint32(8,convertToNumber(c)),t.setUint32(16,convertToNumber(l)),encode$3(e)}function _checksum(n,e){let t="",o=[],c=0,l=0,h=0,d=0,g=0;const m=26*26*26,v=26*26*26*26*26,_="a".charCodeAt(0),p=1000003,a=31;let u=new Uint8Array(n.length+6);u.set(n,0),u.set([0,0,0,0,0,0],n.length);for(let y=0;y<e.length;y++)o.push(e[y]==="."?10:parseInt(e[y],10));for(let y=0;y<o.length;y++)h=(a*h+o[y])%m,y%2===0?c=(c+o[y])%11:l=(l+o[y])%11;for(let y=0;y<u.length;y++)d=(a*d+u[y])%v;g=(((e.length%5*11+c)*11+l)*m+h+d)%v,g=g*p%v;for(let y=0;y<5;y++)t=String.fromCharCode(_+g%26)+t,g/=26;return t}function validateChecksum(n,e,t,o,c){if(c._network._ledgerId==null||o==null)return;const l=_checksum(c._network._ledgerId._ledgerId,`${n.toString()}.${e.toString()}.${t.toString()}`);if(o!=l)throw new BadEntityIdError(n,e,t,o,l)}function toStringWithChecksum(n,e){if(e==null)throw new Error("client cannot be null");if(e._network._ledgerId==null)throw new Error("cannot calculate checksum with a client that does not contain a recognzied ledger ID");const t=_checksum(e._network._ledgerId._ledgerId,n);return`${n}-${t}`}class Cache{constructor(){this._timeDrift=0,this._contractId=null,this._keyList=null,this._thresholdKey=null,this._publicKeyED25519=null,this._publicKeyECDSA=null,this._privateKeyConstructor=null,this._mnemonicFromString=null,this._accountIdConstructor=null,this._delegateContractId=null,this._evmAddress=null,this._ethereumTransactionDataLegacyFromBytes=null,this._ethereumTransactionDataEip1559FromBytes=null,this._ethereumTransactionDataEip2930FromBytes=null,this._transactionReceiptQueryConstructor=null,this._transactionRecordQueryConstructor=null}setTimeDrift(e){this._timeDrift=e}get timeDrift(){if(this._timeDrift==null)throw new Error("Cache.timeDrift was used before it was set");return this._timeDrift}setContractId(e){this._contractId=e}get contractId(){if(this._contractId==null)throw new Error("Cache.contractId was used before it was set");return this._contractId}setKeyList(e){this._keyList=e}get keyList(){if(this._keyList==null)throw new Error("Cache.keyList was used before it was set");return this._keyList}setThresholdKey(e){this._thresholdKey=e}get thresholdKey(){if(this._thresholdKey==null)throw new Error("Cache.thresholdKey was used before it was set");return this._thresholdKey}setPublicKeyED25519(e){this._publicKeyED25519=e}get publicKeyED25519(){if(this._publicKeyED25519==null)throw new Error("Cache.publicKeyED25519 was used before it was set");return this._publicKeyED25519}setPublicKeyECDSA(e){this._publicKeyECDSA=e}get publicKeyECDSA(){if(this._publicKeyECDSA==null)throw new Error("Cache.publicKeyECDSA was used before it was set");return this._publicKeyECDSA}setPrivateKeyConstructor(e){this._privateKeyConstructor=e}get privateKeyConstructor(){if(this._privateKeyConstructor==null)throw new Error("Cache.privateKeyConstructor was used before it was set");return this._privateKeyConstructor}setMnemonicFromString(e){this._mnemonicFromString=e}get mnemonicFromString(){if(this._mnemonicFromString==null)throw new Error("Cache.mnemonicFromString was used before it was set");return this.mnemonicFromString}setAccountIdConstructor(e){this._accountIdConstructor=e}get accountIdConstructor(){if(this._accountIdConstructor==null)throw new Error("Cache.accountIdConstructor was used before it was set");return this._accountIdConstructor}setDelegateContractId(e){this._delegateContractId=e}get delegateContractId(){if(this._delegateContractId==null)throw new Error("Cache.delegateContractId was used before it was set");return this._delegateContractId}setEvmAddress(e){this._evmAddress=e}get evmAddress(){if(this._evmAddress==null)throw new Error("Cache.evmAddress was used before it was set");return this._evmAddress}setEthereumTransactionDataLegacyFromBytes(e){this._ethereumTransactionDataLegacyFromBytes=e}get ethereumTransactionDataLegacyFromBytes(){if(this._ethereumTransactionDataLegacyFromBytes==null)throw new Error("Cache.ethereumTransactionDataLegacyFromBytes was used before it was set");return this._ethereumTransactionDataLegacyFromBytes}setEthereumTransactionDataEip1559FromBytes(e){this._ethereumTransactionDataEip1559FromBytes=e}get ethereumTransactionDataEip1559FromBytes(){if(this._ethereumTransactionDataEip1559FromBytes==null)throw new Error("Cache.ethereumTransactionDataEip1559FromBytes was used before it was set");return this._ethereumTransactionDataEip1559FromBytes}setEthereumTransactionDataEip2930FromBytes(e){this._ethereumTransactionDataEip2930FromBytes=e}get ethereumTransactionDataEip2930FromBytes(){if(this._ethereumTransactionDataEip2930FromBytes==null)throw new Error("Cache.ethereumTransactionDataEip2930FromBytes was used before it was set");return this._ethereumTransactionDataEip2930FromBytes}setTransactionReceiptQueryConstructor(e){this._transactionReceiptQueryConstructor=e}get transactionReceiptQueryConstructor(){if(this._transactionReceiptQueryConstructor==null)throw new Error("Cache.transactionReceiptQueryConstructor was used before it was set");return this._transactionReceiptQueryConstructor}setTransactionRecordQueryConstructor(e){this._transactionRecordQueryConstructor=e}get transactionRecordQueryConstructor(){if(this._transactionRecordQueryConstructor==null)throw new Error("Cache.transactionRecordQueryConstructor was used before it was set");return this._transactionRecordQueryConstructor}setAddressBookQueryConstructor(e){this._addressBookQueryConstructor=e}get addressBookQueryConstructor(){if(this._addressBookQueryConstructor==null)throw new Error("Cache.addressBookQueryConstructor was used before it was set");return this._addressBookQueryConstructor}}const CACHE$1=new Cache;let Key$1=class{};class BadKeyError extends Error{constructor(e){super(e instanceof Error?e.message:e),this.name="BadKeyError",e instanceof Error&&(this.cause=e,this.stack=e.stack)}}var naclFast={exports:{}};(function(n){(function(e){var t=function(ce){var de,he=new Float64Array(16);if(ce)for(de=0;de<ce.length;de++)he[de]=ce[de];return he},o=function(){throw new Error("no PRNG")},c=new Uint8Array(16),l=new Uint8Array(32);l[0]=9;var h=t(),d=t([1]),g=t([56129,1]),m=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),v=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),p=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),a=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function u(ce,de,he,te){ce[de]=he>>24&255,ce[de+1]=he>>16&255,ce[de+2]=he>>8&255,ce[de+3]=he&255,ce[de+4]=te>>24&255,ce[de+5]=te>>16&255,ce[de+6]=te>>8&255,ce[de+7]=te&255}function y(ce,de,he,te,ye){var Ae,Ie=0;for(Ae=0;Ae<ye;Ae++)Ie|=ce[de+Ae]^he[te+Ae];return(1&Ie-1>>>8)-1}function b(ce,de,he,te){return y(ce,de,he,te,16)}function w(ce,de,he,te){return y(ce,de,he,te,32)}function T(ce,de,he,te){for(var ye=te[0]&255|(te[1]&255)<<8|(te[2]&255)<<16|(te[3]&255)<<24,Ae=he[0]&255|(he[1]&255)<<8|(he[2]&255)<<16|(he[3]&255)<<24,Ie=he[4]&255|(he[5]&255)<<8|(he[6]&255)<<16|(he[7]&255)<<24,ke=he[8]&255|(he[9]&255)<<8|(he[10]&255)<<16|(he[11]&255)<<24,Oe=he[12]&255|(he[13]&255)<<8|(he[14]&255)<<16|(he[15]&255)<<24,Ge=te[4]&255|(te[5]&255)<<8|(te[6]&255)<<16|(te[7]&255)<<24,Ue=de[0]&255|(de[1]&255)<<8|(de[2]&255)<<16|(de[3]&255)<<24,Tt=de[4]&255|(de[5]&255)<<8|(de[6]&255)<<16|(de[7]&255)<<24,Ve=de[8]&255|(de[9]&255)<<8|(de[10]&255)<<16|(de[11]&255)<<24,it=de[12]&255|(de[13]&255)<<8|(de[14]&255)<<16|(de[15]&255)<<24,st=te[8]&255|(te[9]&255)<<8|(te[10]&255)<<16|(te[11]&255)<<24,ht=he[16]&255|(he[17]&255)<<8|(he[18]&255)<<16|(he[19]&255)<<24,Et=he[20]&255|(he[21]&255)<<8|(he[22]&255)<<16|(he[23]&255)<<24,bt=he[24]&255|(he[25]&255)<<8|(he[26]&255)<<16|(he[27]&255)<<24,_t=he[28]&255|(he[29]&255)<<8|(he[30]&255)<<16|(he[31]&255)<<24,vt=te[12]&255|(te[13]&255)<<8|(te[14]&255)<<16|(te[15]&255)<<24,We=ye,rt=Ae,qe=Ie,Ze=ke,Je=Oe,He=Ge,Pe=Ue,Be=Tt,Fe=Ve,Le=it,Me=st,Ke=ht,At=Et,kt=bt,Rt=_t,Ct=vt,xe,Dt=0;Dt<20;Dt+=2)xe=We+At|0,Je^=xe<<7|xe>>>32-7,xe=Je+We|0,Fe^=xe<<9|xe>>>32-9,xe=Fe+Je|0,At^=xe<<13|xe>>>32-13,xe=At+Fe|0,We^=xe<<18|xe>>>32-18,xe=He+rt|0,Le^=xe<<7|xe>>>32-7,xe=Le+He|0,kt^=xe<<9|xe>>>32-9,xe=kt+Le|0,rt^=xe<<13|xe>>>32-13,xe=rt+kt|0,He^=xe<<18|xe>>>32-18,xe=Me+Pe|0,Rt^=xe<<7|xe>>>32-7,xe=Rt+Me|0,qe^=xe<<9|xe>>>32-9,xe=qe+Rt|0,Pe^=xe<<13|xe>>>32-13,xe=Pe+qe|0,Me^=xe<<18|xe>>>32-18,xe=Ct+Ke|0,Ze^=xe<<7|xe>>>32-7,xe=Ze+Ct|0,Be^=xe<<9|xe>>>32-9,xe=Be+Ze|0,Ke^=xe<<13|xe>>>32-13,xe=Ke+Be|0,Ct^=xe<<18|xe>>>32-18,xe=We+Ze|0,rt^=xe<<7|xe>>>32-7,xe=rt+We|0,qe^=xe<<9|xe>>>32-9,xe=qe+rt|0,Ze^=xe<<13|xe>>>32-13,xe=Ze+qe|0,We^=xe<<18|xe>>>32-18,xe=He+Je|0,Pe^=xe<<7|xe>>>32-7,xe=Pe+He|0,Be^=xe<<9|xe>>>32-9,xe=Be+Pe|0,Je^=xe<<13|xe>>>32-13,xe=Je+Be|0,He^=xe<<18|xe>>>32-18,xe=Me+Le|0,Ke^=xe<<7|xe>>>32-7,xe=Ke+Me|0,Fe^=xe<<9|xe>>>32-9,xe=Fe+Ke|0,Le^=xe<<13|xe>>>32-13,xe=Le+Fe|0,Me^=xe<<18|xe>>>32-18,xe=Ct+Rt|0,At^=xe<<7|xe>>>32-7,xe=At+Ct|0,kt^=xe<<9|xe>>>32-9,xe=kt+At|0,Rt^=xe<<13|xe>>>32-13,xe=Rt+kt|0,Ct^=xe<<18|xe>>>32-18;We=We+ye|0,rt=rt+Ae|0,qe=qe+Ie|0,Ze=Ze+ke|0,Je=Je+Oe|0,He=He+Ge|0,Pe=Pe+Ue|0,Be=Be+Tt|0,Fe=Fe+Ve|0,Le=Le+it|0,Me=Me+st|0,Ke=Ke+ht|0,At=At+Et|0,kt=kt+bt|0,Rt=Rt+_t|0,Ct=Ct+vt|0,ce[0]=We>>>0&255,ce[1]=We>>>8&255,ce[2]=We>>>16&255,ce[3]=We>>>24&255,ce[4]=rt>>>0&255,ce[5]=rt>>>8&255,ce[6]=rt>>>16&255,ce[7]=rt>>>24&255,ce[8]=qe>>>0&255,ce[9]=qe>>>8&255,ce[10]=qe>>>16&255,ce[11]=qe>>>24&255,ce[12]=Ze>>>0&255,ce[13]=Ze>>>8&255,ce[14]=Ze>>>16&255,ce[15]=Ze>>>24&255,ce[16]=Je>>>0&255,ce[17]=Je>>>8&255,ce[18]=Je>>>16&255,ce[19]=Je>>>24&255,ce[20]=He>>>0&255,ce[21]=He>>>8&255,ce[22]=He>>>16&255,ce[23]=He>>>24&255,ce[24]=Pe>>>0&255,ce[25]=Pe>>>8&255,ce[26]=Pe>>>16&255,ce[27]=Pe>>>24&255,ce[28]=Be>>>0&255,ce[29]=Be>>>8&255,ce[30]=Be>>>16&255,ce[31]=Be>>>24&255,ce[32]=Fe>>>0&255,ce[33]=Fe>>>8&255,ce[34]=Fe>>>16&255,ce[35]=Fe>>>24&255,ce[36]=Le>>>0&255,ce[37]=Le>>>8&255,ce[38]=Le>>>16&255,ce[39]=Le>>>24&255,ce[40]=Me>>>0&255,ce[41]=Me>>>8&255,ce[42]=Me>>>16&255,ce[43]=Me>>>24&255,ce[44]=Ke>>>0&255,ce[45]=Ke>>>8&255,ce[46]=Ke>>>16&255,ce[47]=Ke>>>24&255,ce[48]=At>>>0&255,ce[49]=At>>>8&255,ce[50]=At>>>16&255,ce[51]=At>>>24&255,ce[52]=kt>>>0&255,ce[53]=kt>>>8&255,ce[54]=kt>>>16&255,ce[55]=kt>>>24&255,ce[56]=Rt>>>0&255,ce[57]=Rt>>>8&255,ce[58]=Rt>>>16&255,ce[59]=Rt>>>24&255,ce[60]=Ct>>>0&255,ce[61]=Ct>>>8&255,ce[62]=Ct>>>16&255,ce[63]=Ct>>>24&255}function B(ce,de,he,te){for(var ye=te[0]&255|(te[1]&255)<<8|(te[2]&255)<<16|(te[3]&255)<<24,Ae=he[0]&255|(he[1]&255)<<8|(he[2]&255)<<16|(he[3]&255)<<24,Ie=he[4]&255|(he[5]&255)<<8|(he[6]&255)<<16|(he[7]&255)<<24,ke=he[8]&255|(he[9]&255)<<8|(he[10]&255)<<16|(he[11]&255)<<24,Oe=he[12]&255|(he[13]&255)<<8|(he[14]&255)<<16|(he[15]&255)<<24,Ge=te[4]&255|(te[5]&255)<<8|(te[6]&255)<<16|(te[7]&255)<<24,Ue=de[0]&255|(de[1]&255)<<8|(de[2]&255)<<16|(de[3]&255)<<24,Tt=de[4]&255|(de[5]&255)<<8|(de[6]&255)<<16|(de[7]&255)<<24,Ve=de[8]&255|(de[9]&255)<<8|(de[10]&255)<<16|(de[11]&255)<<24,it=de[12]&255|(de[13]&255)<<8|(de[14]&255)<<16|(de[15]&255)<<24,st=te[8]&255|(te[9]&255)<<8|(te[10]&255)<<16|(te[11]&255)<<24,ht=he[16]&255|(he[17]&255)<<8|(he[18]&255)<<16|(he[19]&255)<<24,Et=he[20]&255|(he[21]&255)<<8|(he[22]&255)<<16|(he[23]&255)<<24,bt=he[24]&255|(he[25]&255)<<8|(he[26]&255)<<16|(he[27]&255)<<24,_t=he[28]&255|(he[29]&255)<<8|(he[30]&255)<<16|(he[31]&255)<<24,vt=te[12]&255|(te[13]&255)<<8|(te[14]&255)<<16|(te[15]&255)<<24,We=ye,rt=Ae,qe=Ie,Ze=ke,Je=Oe,He=Ge,Pe=Ue,Be=Tt,Fe=Ve,Le=it,Me=st,Ke=ht,At=Et,kt=bt,Rt=_t,Ct=vt,xe,Dt=0;Dt<20;Dt+=2)xe=We+At|0,Je^=xe<<7|xe>>>32-7,xe=Je+We|0,Fe^=xe<<9|xe>>>32-9,xe=Fe+Je|0,At^=xe<<13|xe>>>32-13,xe=At+Fe|0,We^=xe<<18|xe>>>32-18,xe=He+rt|0,Le^=xe<<7|xe>>>32-7,xe=Le+He|0,kt^=xe<<9|xe>>>32-9,xe=kt+Le|0,rt^=xe<<13|xe>>>32-13,xe=rt+kt|0,He^=xe<<18|xe>>>32-18,xe=Me+Pe|0,Rt^=xe<<7|xe>>>32-7,xe=Rt+Me|0,qe^=xe<<9|xe>>>32-9,xe=qe+Rt|0,Pe^=xe<<13|xe>>>32-13,xe=Pe+qe|0,Me^=xe<<18|xe>>>32-18,xe=Ct+Ke|0,Ze^=xe<<7|xe>>>32-7,xe=Ze+Ct|0,Be^=xe<<9|xe>>>32-9,xe=Be+Ze|0,Ke^=xe<<13|xe>>>32-13,xe=Ke+Be|0,Ct^=xe<<18|xe>>>32-18,xe=We+Ze|0,rt^=xe<<7|xe>>>32-7,xe=rt+We|0,qe^=xe<<9|xe>>>32-9,xe=qe+rt|0,Ze^=xe<<13|xe>>>32-13,xe=Ze+qe|0,We^=xe<<18|xe>>>32-18,xe=He+Je|0,Pe^=xe<<7|xe>>>32-7,xe=Pe+He|0,Be^=xe<<9|xe>>>32-9,xe=Be+Pe|0,Je^=xe<<13|xe>>>32-13,xe=Je+Be|0,He^=xe<<18|xe>>>32-18,xe=Me+Le|0,Ke^=xe<<7|xe>>>32-7,xe=Ke+Me|0,Fe^=xe<<9|xe>>>32-9,xe=Fe+Ke|0,Le^=xe<<13|xe>>>32-13,xe=Le+Fe|0,Me^=xe<<18|xe>>>32-18,xe=Ct+Rt|0,At^=xe<<7|xe>>>32-7,xe=At+Ct|0,kt^=xe<<9|xe>>>32-9,xe=kt+At|0,Rt^=xe<<13|xe>>>32-13,xe=Rt+kt|0,Ct^=xe<<18|xe>>>32-18;ce[0]=We>>>0&255,ce[1]=We>>>8&255,ce[2]=We>>>16&255,ce[3]=We>>>24&255,ce[4]=He>>>0&255,ce[5]=He>>>8&255,ce[6]=He>>>16&255,ce[7]=He>>>24&255,ce[8]=Me>>>0&255,ce[9]=Me>>>8&255,ce[10]=Me>>>16&255,ce[11]=Me>>>24&255,ce[12]=Ct>>>0&255,ce[13]=Ct>>>8&255,ce[14]=Ct>>>16&255,ce[15]=Ct>>>24&255,ce[16]=Pe>>>0&255,ce[17]=Pe>>>8&255,ce[18]=Pe>>>16&255,ce[19]=Pe>>>24&255,ce[20]=Be>>>0&255,ce[21]=Be>>>8&255,ce[22]=Be>>>16&255,ce[23]=Be>>>24&255,ce[24]=Fe>>>0&255,ce[25]=Fe>>>8&255,ce[26]=Fe>>>16&255,ce[27]=Fe>>>24&255,ce[28]=Le>>>0&255,ce[29]=Le>>>8&255,ce[30]=Le>>>16&255,ce[31]=Le>>>24&255}function H(ce,de,he,te){T(ce,de,he,te)}function J(ce,de,he,te){B(ce,de,he,te)}var W=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function fe(ce,de,he,te,ye,Ae,Ie){var ke=new Uint8Array(16),Oe=new Uint8Array(64),Ge,Ue;for(Ue=0;Ue<16;Ue++)ke[Ue]=0;for(Ue=0;Ue<8;Ue++)ke[Ue]=Ae[Ue];for(;ye>=64;){for(H(Oe,ke,Ie,W),Ue=0;Ue<64;Ue++)ce[de+Ue]=he[te+Ue]^Oe[Ue];for(Ge=1,Ue=8;Ue<16;Ue++)Ge=Ge+(ke[Ue]&255)|0,ke[Ue]=Ge&255,Ge>>>=8;ye-=64,de+=64,te+=64}if(ye>0)for(H(Oe,ke,Ie,W),Ue=0;Ue<ye;Ue++)ce[de+Ue]=he[te+Ue]^Oe[Ue];return 0}function re(ce,de,he,te,ye){var Ae=new Uint8Array(16),Ie=new Uint8Array(64),ke,Oe;for(Oe=0;Oe<16;Oe++)Ae[Oe]=0;for(Oe=0;Oe<8;Oe++)Ae[Oe]=te[Oe];for(;he>=64;){for(H(Ie,Ae,ye,W),Oe=0;Oe<64;Oe++)ce[de+Oe]=Ie[Oe];for(ke=1,Oe=8;Oe<16;Oe++)ke=ke+(Ae[Oe]&255)|0,Ae[Oe]=ke&255,ke>>>=8;he-=64,de+=64}if(he>0)for(H(Ie,Ae,ye,W),Oe=0;Oe<he;Oe++)ce[de+Oe]=Ie[Oe];return 0}function se(ce,de,he,te,ye){var Ae=new Uint8Array(32);J(Ae,te,ye,W);for(var Ie=new Uint8Array(8),ke=0;ke<8;ke++)Ie[ke]=te[ke+16];return re(ce,de,he,Ie,Ae)}function ae(ce,de,he,te,ye,Ae,Ie){var ke=new Uint8Array(32);J(ke,Ae,Ie,W);for(var Oe=new Uint8Array(8),Ge=0;Ge<8;Ge++)Oe[Ge]=Ae[Ge+16];return fe(ce,de,he,te,ye,Oe,ke)}var ee=function(ce){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var de,he,te,ye,Ae,Ie,ke,Oe;de=ce[0]&255|(ce[1]&255)<<8,this.r[0]=de&8191,he=ce[2]&255|(ce[3]&255)<<8,this.r[1]=(de>>>13|he<<3)&8191,te=ce[4]&255|(ce[5]&255)<<8,this.r[2]=(he>>>10|te<<6)&7939,ye=ce[6]&255|(ce[7]&255)<<8,this.r[3]=(te>>>7|ye<<9)&8191,Ae=ce[8]&255|(ce[9]&255)<<8,this.r[4]=(ye>>>4|Ae<<12)&255,this.r[5]=Ae>>>1&8190,Ie=ce[10]&255|(ce[11]&255)<<8,this.r[6]=(Ae>>>14|Ie<<2)&8191,ke=ce[12]&255|(ce[13]&255)<<8,this.r[7]=(Ie>>>11|ke<<5)&8065,Oe=ce[14]&255|(ce[15]&255)<<8,this.r[8]=(ke>>>8|Oe<<8)&8191,this.r[9]=Oe>>>5&127,this.pad[0]=ce[16]&255|(ce[17]&255)<<8,this.pad[1]=ce[18]&255|(ce[19]&255)<<8,this.pad[2]=ce[20]&255|(ce[21]&255)<<8,this.pad[3]=ce[22]&255|(ce[23]&255)<<8,this.pad[4]=ce[24]&255|(ce[25]&255)<<8,this.pad[5]=ce[26]&255|(ce[27]&255)<<8,this.pad[6]=ce[28]&255|(ce[29]&255)<<8,this.pad[7]=ce[30]&255|(ce[31]&255)<<8};ee.prototype.blocks=function(ce,de,he){for(var te=this.fin?0:2048,ye,Ae,Ie,ke,Oe,Ge,Ue,Tt,Ve,it,st,ht,Et,bt,_t,vt,We,rt,qe,Ze=this.h[0],Je=this.h[1],He=this.h[2],Pe=this.h[3],Be=this.h[4],Fe=this.h[5],Le=this.h[6],Me=this.h[7],Ke=this.h[8],At=this.h[9],kt=this.r[0],Rt=this.r[1],Ct=this.r[2],xe=this.r[3],Dt=this.r[4],Gt=this.r[5],Ht=this.r[6],Bt=this.r[7],Mt=this.r[8],Ft=this.r[9];he>=16;)ye=ce[de+0]&255|(ce[de+1]&255)<<8,Ze+=ye&8191,Ae=ce[de+2]&255|(ce[de+3]&255)<<8,Je+=(ye>>>13|Ae<<3)&8191,Ie=ce[de+4]&255|(ce[de+5]&255)<<8,He+=(Ae>>>10|Ie<<6)&8191,ke=ce[de+6]&255|(ce[de+7]&255)<<8,Pe+=(Ie>>>7|ke<<9)&8191,Oe=ce[de+8]&255|(ce[de+9]&255)<<8,Be+=(ke>>>4|Oe<<12)&8191,Fe+=Oe>>>1&8191,Ge=ce[de+10]&255|(ce[de+11]&255)<<8,Le+=(Oe>>>14|Ge<<2)&8191,Ue=ce[de+12]&255|(ce[de+13]&255)<<8,Me+=(Ge>>>11|Ue<<5)&8191,Tt=ce[de+14]&255|(ce[de+15]&255)<<8,Ke+=(Ue>>>8|Tt<<8)&8191,At+=Tt>>>5|te,Ve=0,it=Ve,it+=Ze*kt,it+=Je*(5*Ft),it+=He*(5*Mt),it+=Pe*(5*Bt),it+=Be*(5*Ht),Ve=it>>>13,it&=8191,it+=Fe*(5*Gt),it+=Le*(5*Dt),it+=Me*(5*xe),it+=Ke*(5*Ct),it+=At*(5*Rt),Ve+=it>>>13,it&=8191,st=Ve,st+=Ze*Rt,st+=Je*kt,st+=He*(5*Ft),st+=Pe*(5*Mt),st+=Be*(5*Bt),Ve=st>>>13,st&=8191,st+=Fe*(5*Ht),st+=Le*(5*Gt),st+=Me*(5*Dt),st+=Ke*(5*xe),st+=At*(5*Ct),Ve+=st>>>13,st&=8191,ht=Ve,ht+=Ze*Ct,ht+=Je*Rt,ht+=He*kt,ht+=Pe*(5*Ft),ht+=Be*(5*Mt),Ve=ht>>>13,ht&=8191,ht+=Fe*(5*Bt),ht+=Le*(5*Ht),ht+=Me*(5*Gt),ht+=Ke*(5*Dt),ht+=At*(5*xe),Ve+=ht>>>13,ht&=8191,Et=Ve,Et+=Ze*xe,Et+=Je*Ct,Et+=He*Rt,Et+=Pe*kt,Et+=Be*(5*Ft),Ve=Et>>>13,Et&=8191,Et+=Fe*(5*Mt),Et+=Le*(5*Bt),Et+=Me*(5*Ht),Et+=Ke*(5*Gt),Et+=At*(5*Dt),Ve+=Et>>>13,Et&=8191,bt=Ve,bt+=Ze*Dt,bt+=Je*xe,bt+=He*Ct,bt+=Pe*Rt,bt+=Be*kt,Ve=bt>>>13,bt&=8191,bt+=Fe*(5*Ft),bt+=Le*(5*Mt),bt+=Me*(5*Bt),bt+=Ke*(5*Ht),bt+=At*(5*Gt),Ve+=bt>>>13,bt&=8191,_t=Ve,_t+=Ze*Gt,_t+=Je*Dt,_t+=He*xe,_t+=Pe*Ct,_t+=Be*Rt,Ve=_t>>>13,_t&=8191,_t+=Fe*kt,_t+=Le*(5*Ft),_t+=Me*(5*Mt),_t+=Ke*(5*Bt),_t+=At*(5*Ht),Ve+=_t>>>13,_t&=8191,vt=Ve,vt+=Ze*Ht,vt+=Je*Gt,vt+=He*Dt,vt+=Pe*xe,vt+=Be*Ct,Ve=vt>>>13,vt&=8191,vt+=Fe*Rt,vt+=Le*kt,vt+=Me*(5*Ft),vt+=Ke*(5*Mt),vt+=At*(5*Bt),Ve+=vt>>>13,vt&=8191,We=Ve,We+=Ze*Bt,We+=Je*Ht,We+=He*Gt,We+=Pe*Dt,We+=Be*xe,Ve=We>>>13,We&=8191,We+=Fe*Ct,We+=Le*Rt,We+=Me*kt,We+=Ke*(5*Ft),We+=At*(5*Mt),Ve+=We>>>13,We&=8191,rt=Ve,rt+=Ze*Mt,rt+=Je*Bt,rt+=He*Ht,rt+=Pe*Gt,rt+=Be*Dt,Ve=rt>>>13,rt&=8191,rt+=Fe*xe,rt+=Le*Ct,rt+=Me*Rt,rt+=Ke*kt,rt+=At*(5*Ft),Ve+=rt>>>13,rt&=8191,qe=Ve,qe+=Ze*Ft,qe+=Je*Mt,qe+=He*Bt,qe+=Pe*Ht,qe+=Be*Gt,Ve=qe>>>13,qe&=8191,qe+=Fe*Dt,qe+=Le*xe,qe+=Me*Ct,qe+=Ke*Rt,qe+=At*kt,Ve+=qe>>>13,qe&=8191,Ve=(Ve<<2)+Ve|0,Ve=Ve+it|0,it=Ve&8191,Ve=Ve>>>13,st+=Ve,Ze=it,Je=st,He=ht,Pe=Et,Be=bt,Fe=_t,Le=vt,Me=We,Ke=rt,At=qe,de+=16,he-=16;this.h[0]=Ze,this.h[1]=Je,this.h[2]=He,this.h[3]=Pe,this.h[4]=Be,this.h[5]=Fe,this.h[6]=Le,this.h[7]=Me,this.h[8]=Ke,this.h[9]=At},ee.prototype.finish=function(ce,de){var he=new Uint16Array(10),te,ye,Ae,Ie;if(this.leftover){for(Ie=this.leftover,this.buffer[Ie++]=1;Ie<16;Ie++)this.buffer[Ie]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(te=this.h[1]>>>13,this.h[1]&=8191,Ie=2;Ie<10;Ie++)this.h[Ie]+=te,te=this.h[Ie]>>>13,this.h[Ie]&=8191;for(this.h[0]+=te*5,te=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=te,te=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=te,he[0]=this.h[0]+5,te=he[0]>>>13,he[0]&=8191,Ie=1;Ie<10;Ie++)he[Ie]=this.h[Ie]+te,te=he[Ie]>>>13,he[Ie]&=8191;for(he[9]-=8192,ye=(te^1)-1,Ie=0;Ie<10;Ie++)he[Ie]&=ye;for(ye=~ye,Ie=0;Ie<10;Ie++)this.h[Ie]=this.h[Ie]&ye|he[Ie];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,Ae=this.h[0]+this.pad[0],this.h[0]=Ae&65535,Ie=1;Ie<8;Ie++)Ae=(this.h[Ie]+this.pad[Ie]|0)+(Ae>>>16)|0,this.h[Ie]=Ae&65535;ce[de+0]=this.h[0]>>>0&255,ce[de+1]=this.h[0]>>>8&255,ce[de+2]=this.h[1]>>>0&255,ce[de+3]=this.h[1]>>>8&255,ce[de+4]=this.h[2]>>>0&255,ce[de+5]=this.h[2]>>>8&255,ce[de+6]=this.h[3]>>>0&255,ce[de+7]=this.h[3]>>>8&255,ce[de+8]=this.h[4]>>>0&255,ce[de+9]=this.h[4]>>>8&255,ce[de+10]=this.h[5]>>>0&255,ce[de+11]=this.h[5]>>>8&255,ce[de+12]=this.h[6]>>>0&255,ce[de+13]=this.h[6]>>>8&255,ce[de+14]=this.h[7]>>>0&255,ce[de+15]=this.h[7]>>>8&255},ee.prototype.update=function(ce,de,he){var te,ye;if(this.leftover){for(ye=16-this.leftover,ye>he&&(ye=he),te=0;te<ye;te++)this.buffer[this.leftover+te]=ce[de+te];if(he-=ye,de+=ye,this.leftover+=ye,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(he>=16&&(ye=he-he%16,this.blocks(ce,de,ye),de+=ye,he-=ye),he){for(te=0;te<he;te++)this.buffer[this.leftover+te]=ce[de+te];this.leftover+=he}};function P(ce,de,he,te,ye,Ae){var Ie=new ee(Ae);return Ie.update(he,te,ye),Ie.finish(ce,de),0}function C(ce,de,he,te,ye,Ae){var Ie=new Uint8Array(16);return P(Ie,0,he,te,ye,Ae),b(ce,de,Ie,0)}function E(ce,de,he,te,ye){var Ae;if(he<32)return-1;for(ae(ce,0,de,0,he,te,ye),P(ce,16,ce,32,he-32,ce),Ae=0;Ae<16;Ae++)ce[Ae]=0;return 0}function k(ce,de,he,te,ye){var Ae,Ie=new Uint8Array(32);if(he<32||(se(Ie,0,32,te,ye),C(de,16,de,32,he-32,Ie)!==0))return-1;for(ae(ce,0,de,0,he,te,ye),Ae=0;Ae<32;Ae++)ce[Ae]=0;return 0}function F(ce,de){var he;for(he=0;he<16;he++)ce[he]=de[he]|0}function j(ce){var de,he,te=1;for(de=0;de<16;de++)he=ce[de]+te+65535,te=Math.floor(he/65536),ce[de]=he-te*65536;ce[0]+=te-1+37*(te-1)}function Q(ce,de,he){for(var te,ye=~(he-1),Ae=0;Ae<16;Ae++)te=ye&(ce[Ae]^de[Ae]),ce[Ae]^=te,de[Ae]^=te}function G(ce,de){var he,te,ye,Ae=t(),Ie=t();for(he=0;he<16;he++)Ie[he]=de[he];for(j(Ie),j(Ie),j(Ie),te=0;te<2;te++){for(Ae[0]=Ie[0]-65517,he=1;he<15;he++)Ae[he]=Ie[he]-65535-(Ae[he-1]>>16&1),Ae[he-1]&=65535;Ae[15]=Ie[15]-32767-(Ae[14]>>16&1),ye=Ae[15]>>16&1,Ae[14]&=65535,Q(Ie,Ae,1-ye)}for(he=0;he<16;he++)ce[2*he]=Ie[he]&255,ce[2*he+1]=Ie[he]>>8}function U(ce,de){var he=new Uint8Array(32),te=new Uint8Array(32);return G(he,ce),G(te,de),w(he,0,te,0)}function $(ce){var de=new Uint8Array(32);return G(de,ce),de[0]&1}function O(ce,de){var he;for(he=0;he<16;he++)ce[he]=de[2*he]+(de[2*he+1]<<8);ce[15]&=32767}function oe(ce,de,he){for(var te=0;te<16;te++)ce[te]=de[te]+he[te]}function ue(ce,de,he){for(var te=0;te<16;te++)ce[te]=de[te]-he[te]}function q(ce,de,he){var te,ye,Ae=0,Ie=0,ke=0,Oe=0,Ge=0,Ue=0,Tt=0,Ve=0,it=0,st=0,ht=0,Et=0,bt=0,_t=0,vt=0,We=0,rt=0,qe=0,Ze=0,Je=0,He=0,Pe=0,Be=0,Fe=0,Le=0,Me=0,Ke=0,At=0,kt=0,Rt=0,Ct=0,xe=he[0],Dt=he[1],Gt=he[2],Ht=he[3],Bt=he[4],Mt=he[5],Ft=he[6],Zt=he[7],zt=he[8],Qt=he[9],Wt=he[10],Yt=he[11],Jt=he[12],Xt=he[13],er=he[14],tr=he[15];te=de[0],Ae+=te*xe,Ie+=te*Dt,ke+=te*Gt,Oe+=te*Ht,Ge+=te*Bt,Ue+=te*Mt,Tt+=te*Ft,Ve+=te*Zt,it+=te*zt,st+=te*Qt,ht+=te*Wt,Et+=te*Yt,bt+=te*Jt,_t+=te*Xt,vt+=te*er,We+=te*tr,te=de[1],Ie+=te*xe,ke+=te*Dt,Oe+=te*Gt,Ge+=te*Ht,Ue+=te*Bt,Tt+=te*Mt,Ve+=te*Ft,it+=te*Zt,st+=te*zt,ht+=te*Qt,Et+=te*Wt,bt+=te*Yt,_t+=te*Jt,vt+=te*Xt,We+=te*er,rt+=te*tr,te=de[2],ke+=te*xe,Oe+=te*Dt,Ge+=te*Gt,Ue+=te*Ht,Tt+=te*Bt,Ve+=te*Mt,it+=te*Ft,st+=te*Zt,ht+=te*zt,Et+=te*Qt,bt+=te*Wt,_t+=te*Yt,vt+=te*Jt,We+=te*Xt,rt+=te*er,qe+=te*tr,te=de[3],Oe+=te*xe,Ge+=te*Dt,Ue+=te*Gt,Tt+=te*Ht,Ve+=te*Bt,it+=te*Mt,st+=te*Ft,ht+=te*Zt,Et+=te*zt,bt+=te*Qt,_t+=te*Wt,vt+=te*Yt,We+=te*Jt,rt+=te*Xt,qe+=te*er,Ze+=te*tr,te=de[4],Ge+=te*xe,Ue+=te*Dt,Tt+=te*Gt,Ve+=te*Ht,it+=te*Bt,st+=te*Mt,ht+=te*Ft,Et+=te*Zt,bt+=te*zt,_t+=te*Qt,vt+=te*Wt,We+=te*Yt,rt+=te*Jt,qe+=te*Xt,Ze+=te*er,Je+=te*tr,te=de[5],Ue+=te*xe,Tt+=te*Dt,Ve+=te*Gt,it+=te*Ht,st+=te*Bt,ht+=te*Mt,Et+=te*Ft,bt+=te*Zt,_t+=te*zt,vt+=te*Qt,We+=te*Wt,rt+=te*Yt,qe+=te*Jt,Ze+=te*Xt,Je+=te*er,He+=te*tr,te=de[6],Tt+=te*xe,Ve+=te*Dt,it+=te*Gt,st+=te*Ht,ht+=te*Bt,Et+=te*Mt,bt+=te*Ft,_t+=te*Zt,vt+=te*zt,We+=te*Qt,rt+=te*Wt,qe+=te*Yt,Ze+=te*Jt,Je+=te*Xt,He+=te*er,Pe+=te*tr,te=de[7],Ve+=te*xe,it+=te*Dt,st+=te*Gt,ht+=te*Ht,Et+=te*Bt,bt+=te*Mt,_t+=te*Ft,vt+=te*Zt,We+=te*zt,rt+=te*Qt,qe+=te*Wt,Ze+=te*Yt,Je+=te*Jt,He+=te*Xt,Pe+=te*er,Be+=te*tr,te=de[8],it+=te*xe,st+=te*Dt,ht+=te*Gt,Et+=te*Ht,bt+=te*Bt,_t+=te*Mt,vt+=te*Ft,We+=te*Zt,rt+=te*zt,qe+=te*Qt,Ze+=te*Wt,Je+=te*Yt,He+=te*Jt,Pe+=te*Xt,Be+=te*er,Fe+=te*tr,te=de[9],st+=te*xe,ht+=te*Dt,Et+=te*Gt,bt+=te*Ht,_t+=te*Bt,vt+=te*Mt,We+=te*Ft,rt+=te*Zt,qe+=te*zt,Ze+=te*Qt,Je+=te*Wt,He+=te*Yt,Pe+=te*Jt,Be+=te*Xt,Fe+=te*er,Le+=te*tr,te=de[10],ht+=te*xe,Et+=te*Dt,bt+=te*Gt,_t+=te*Ht,vt+=te*Bt,We+=te*Mt,rt+=te*Ft,qe+=te*Zt,Ze+=te*zt,Je+=te*Qt,He+=te*Wt,Pe+=te*Yt,Be+=te*Jt,Fe+=te*Xt,Le+=te*er,Me+=te*tr,te=de[11],Et+=te*xe,bt+=te*Dt,_t+=te*Gt,vt+=te*Ht,We+=te*Bt,rt+=te*Mt,qe+=te*Ft,Ze+=te*Zt,Je+=te*zt,He+=te*Qt,Pe+=te*Wt,Be+=te*Yt,Fe+=te*Jt,Le+=te*Xt,Me+=te*er,Ke+=te*tr,te=de[12],bt+=te*xe,_t+=te*Dt,vt+=te*Gt,We+=te*Ht,rt+=te*Bt,qe+=te*Mt,Ze+=te*Ft,Je+=te*Zt,He+=te*zt,Pe+=te*Qt,Be+=te*Wt,Fe+=te*Yt,Le+=te*Jt,Me+=te*Xt,Ke+=te*er,At+=te*tr,te=de[13],_t+=te*xe,vt+=te*Dt,We+=te*Gt,rt+=te*Ht,qe+=te*Bt,Ze+=te*Mt,Je+=te*Ft,He+=te*Zt,Pe+=te*zt,Be+=te*Qt,Fe+=te*Wt,Le+=te*Yt,Me+=te*Jt,Ke+=te*Xt,At+=te*er,kt+=te*tr,te=de[14],vt+=te*xe,We+=te*Dt,rt+=te*Gt,qe+=te*Ht,Ze+=te*Bt,Je+=te*Mt,He+=te*Ft,Pe+=te*Zt,Be+=te*zt,Fe+=te*Qt,Le+=te*Wt,Me+=te*Yt,Ke+=te*Jt,At+=te*Xt,kt+=te*er,Rt+=te*tr,te=de[15],We+=te*xe,rt+=te*Dt,qe+=te*Gt,Ze+=te*Ht,Je+=te*Bt,He+=te*Mt,Pe+=te*Ft,Be+=te*Zt,Fe+=te*zt,Le+=te*Qt,Me+=te*Wt,Ke+=te*Yt,At+=te*Jt,kt+=te*Xt,Rt+=te*er,Ct+=te*tr,Ae+=38*rt,Ie+=38*qe,ke+=38*Ze,Oe+=38*Je,Ge+=38*He,Ue+=38*Pe,Tt+=38*Be,Ve+=38*Fe,it+=38*Le,st+=38*Me,ht+=38*Ke,Et+=38*At,bt+=38*kt,_t+=38*Rt,vt+=38*Ct,ye=1,te=Ae+ye+65535,ye=Math.floor(te/65536),Ae=te-ye*65536,te=Ie+ye+65535,ye=Math.floor(te/65536),Ie=te-ye*65536,te=ke+ye+65535,ye=Math.floor(te/65536),ke=te-ye*65536,te=Oe+ye+65535,ye=Math.floor(te/65536),Oe=te-ye*65536,te=Ge+ye+65535,ye=Math.floor(te/65536),Ge=te-ye*65536,te=Ue+ye+65535,ye=Math.floor(te/65536),Ue=te-ye*65536,te=Tt+ye+65535,ye=Math.floor(te/65536),Tt=te-ye*65536,te=Ve+ye+65535,ye=Math.floor(te/65536),Ve=te-ye*65536,te=it+ye+65535,ye=Math.floor(te/65536),it=te-ye*65536,te=st+ye+65535,ye=Math.floor(te/65536),st=te-ye*65536,te=ht+ye+65535,ye=Math.floor(te/65536),ht=te-ye*65536,te=Et+ye+65535,ye=Math.floor(te/65536),Et=te-ye*65536,te=bt+ye+65535,ye=Math.floor(te/65536),bt=te-ye*65536,te=_t+ye+65535,ye=Math.floor(te/65536),_t=te-ye*65536,te=vt+ye+65535,ye=Math.floor(te/65536),vt=te-ye*65536,te=We+ye+65535,ye=Math.floor(te/65536),We=te-ye*65536,Ae+=ye-1+37*(ye-1),ye=1,te=Ae+ye+65535,ye=Math.floor(te/65536),Ae=te-ye*65536,te=Ie+ye+65535,ye=Math.floor(te/65536),Ie=te-ye*65536,te=ke+ye+65535,ye=Math.floor(te/65536),ke=te-ye*65536,te=Oe+ye+65535,ye=Math.floor(te/65536),Oe=te-ye*65536,te=Ge+ye+65535,ye=Math.floor(te/65536),Ge=te-ye*65536,te=Ue+ye+65535,ye=Math.floor(te/65536),Ue=te-ye*65536,te=Tt+ye+65535,ye=Math.floor(te/65536),Tt=te-ye*65536,te=Ve+ye+65535,ye=Math.floor(te/65536),Ve=te-ye*65536,te=it+ye+65535,ye=Math.floor(te/65536),it=te-ye*65536,te=st+ye+65535,ye=Math.floor(te/65536),st=te-ye*65536,te=ht+ye+65535,ye=Math.floor(te/65536),ht=te-ye*65536,te=Et+ye+65535,ye=Math.floor(te/65536),Et=te-ye*65536,te=bt+ye+65535,ye=Math.floor(te/65536),bt=te-ye*65536,te=_t+ye+65535,ye=Math.floor(te/65536),_t=te-ye*65536,te=vt+ye+65535,ye=Math.floor(te/65536),vt=te-ye*65536,te=We+ye+65535,ye=Math.floor(te/65536),We=te-ye*65536,Ae+=ye-1+37*(ye-1),ce[0]=Ae,ce[1]=Ie,ce[2]=ke,ce[3]=Oe,ce[4]=Ge,ce[5]=Ue,ce[6]=Tt,ce[7]=Ve,ce[8]=it,ce[9]=st,ce[10]=ht,ce[11]=Et,ce[12]=bt,ce[13]=_t,ce[14]=vt,ce[15]=We}function pe(ce,de){q(ce,de,de)}function be(ce,de){var he=t(),te;for(te=0;te<16;te++)he[te]=de[te];for(te=253;te>=0;te--)pe(he,he),te!==2&&te!==4&&q(he,he,de);for(te=0;te<16;te++)ce[te]=he[te]}function ve(ce,de){var he=t(),te;for(te=0;te<16;te++)he[te]=de[te];for(te=250;te>=0;te--)pe(he,he),te!==1&&q(he,he,de);for(te=0;te<16;te++)ce[te]=he[te]}function we(ce,de,he){var te=new Uint8Array(32),ye=new Float64Array(80),Ae,Ie,ke=t(),Oe=t(),Ge=t(),Ue=t(),Tt=t(),Ve=t();for(Ie=0;Ie<31;Ie++)te[Ie]=de[Ie];for(te[31]=de[31]&127|64,te[0]&=248,O(ye,he),Ie=0;Ie<16;Ie++)Oe[Ie]=ye[Ie],Ue[Ie]=ke[Ie]=Ge[Ie]=0;for(ke[0]=Ue[0]=1,Ie=254;Ie>=0;--Ie)Ae=te[Ie>>>3]>>>(Ie&7)&1,Q(ke,Oe,Ae),Q(Ge,Ue,Ae),oe(Tt,ke,Ge),ue(ke,ke,Ge),oe(Ge,Oe,Ue),ue(Oe,Oe,Ue),pe(Ue,Tt),pe(Ve,ke),q(ke,Ge,ke),q(Ge,Oe,Tt),oe(Tt,ke,Ge),ue(ke,ke,Ge),pe(Oe,ke),ue(Ge,Ue,Ve),q(ke,Ge,g),oe(ke,ke,Ue),q(Ge,Ge,ke),q(ke,Ue,Ve),q(Ue,Oe,ye),pe(Oe,Tt),Q(ke,Oe,Ae),Q(Ge,Ue,Ae);for(Ie=0;Ie<16;Ie++)ye[Ie+16]=ke[Ie],ye[Ie+32]=Ge[Ie],ye[Ie+48]=Oe[Ie],ye[Ie+64]=Ue[Ie];var it=ye.subarray(32),st=ye.subarray(16);return be(it,it),q(st,st,it),G(ce,st),0}function Ce(ce,de){return we(ce,de,l)}function Re(ce,de){return o(de,32),Ce(ce,de)}function Se(ce,de,he){var te=new Uint8Array(32);return we(te,he,de),J(ce,c,te,W)}var $e=E,De=k;function Ne(ce,de,he,te,ye,Ae){var Ie=new Uint8Array(32);return Se(Ie,ye,Ae),$e(ce,de,he,te,Ie)}function pt(ce,de,he,te,ye,Ae){var Ie=new Uint8Array(32);return Se(Ie,ye,Ae),De(ce,de,he,te,Ie)}var xt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Xe(ce,de,he,te){for(var ye=new Int32Array(16),Ae=new Int32Array(16),Ie,ke,Oe,Ge,Ue,Tt,Ve,it,st,ht,Et,bt,_t,vt,We,rt,qe,Ze,Je,He,Pe,Be,Fe,Le,Me,Ke,At=ce[0],kt=ce[1],Rt=ce[2],Ct=ce[3],xe=ce[4],Dt=ce[5],Gt=ce[6],Ht=ce[7],Bt=de[0],Mt=de[1],Ft=de[2],Zt=de[3],zt=de[4],Qt=de[5],Wt=de[6],Yt=de[7],Jt=0;te>=128;){for(Je=0;Je<16;Je++)He=8*Je+Jt,ye[Je]=he[He+0]<<24|he[He+1]<<16|he[He+2]<<8|he[He+3],Ae[Je]=he[He+4]<<24|he[He+5]<<16|he[He+6]<<8|he[He+7];for(Je=0;Je<80;Je++)if(Ie=At,ke=kt,Oe=Rt,Ge=Ct,Ue=xe,Tt=Dt,Ve=Gt,it=Ht,st=Bt,ht=Mt,Et=Ft,bt=Zt,_t=zt,vt=Qt,We=Wt,rt=Yt,Pe=Ht,Be=Yt,Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=(xe>>>14|zt<<32-14)^(xe>>>18|zt<<32-18)^(zt>>>41-32|xe<<32-(41-32)),Be=(zt>>>14|xe<<32-14)^(zt>>>18|xe<<32-18)^(xe>>>41-32|zt<<32-(41-32)),Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Pe=xe&Dt^~xe&Gt,Be=zt&Qt^~zt&Wt,Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Pe=xt[Je*2],Be=xt[Je*2+1],Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Pe=ye[Je%16],Be=Ae[Je%16],Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,qe=Me&65535|Ke<<16,Ze=Fe&65535|Le<<16,Pe=qe,Be=Ze,Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=(At>>>28|Bt<<32-28)^(Bt>>>34-32|At<<32-(34-32))^(Bt>>>39-32|At<<32-(39-32)),Be=(Bt>>>28|At<<32-28)^(At>>>34-32|Bt<<32-(34-32))^(At>>>39-32|Bt<<32-(39-32)),Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Pe=At&kt^At&Rt^kt&Rt,Be=Bt&Mt^Bt&Ft^Mt&Ft,Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,it=Me&65535|Ke<<16,rt=Fe&65535|Le<<16,Pe=Ge,Be=bt,Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=qe,Be=Ze,Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,Ge=Me&65535|Ke<<16,bt=Fe&65535|Le<<16,kt=Ie,Rt=ke,Ct=Oe,xe=Ge,Dt=Ue,Gt=Tt,Ht=Ve,At=it,Mt=st,Ft=ht,Zt=Et,zt=bt,Qt=_t,Wt=vt,Yt=We,Bt=rt,Je%16===15)for(He=0;He<16;He++)Pe=ye[He],Be=Ae[He],Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=ye[(He+9)%16],Be=Ae[(He+9)%16],Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,qe=ye[(He+1)%16],Ze=Ae[(He+1)%16],Pe=(qe>>>1|Ze<<32-1)^(qe>>>8|Ze<<32-8)^qe>>>7,Be=(Ze>>>1|qe<<32-1)^(Ze>>>8|qe<<32-8)^(Ze>>>7|qe<<32-7),Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,qe=ye[(He+14)%16],Ze=Ae[(He+14)%16],Pe=(qe>>>19|Ze<<32-19)^(Ze>>>61-32|qe<<32-(61-32))^qe>>>6,Be=(Ze>>>19|qe<<32-19)^(qe>>>61-32|Ze<<32-(61-32))^(Ze>>>6|qe<<32-6),Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,ye[He]=Me&65535|Ke<<16,Ae[He]=Fe&65535|Le<<16;Pe=At,Be=Bt,Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=ce[0],Be=de[0],Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,ce[0]=At=Me&65535|Ke<<16,de[0]=Bt=Fe&65535|Le<<16,Pe=kt,Be=Mt,Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=ce[1],Be=de[1],Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,ce[1]=kt=Me&65535|Ke<<16,de[1]=Mt=Fe&65535|Le<<16,Pe=Rt,Be=Ft,Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=ce[2],Be=de[2],Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,ce[2]=Rt=Me&65535|Ke<<16,de[2]=Ft=Fe&65535|Le<<16,Pe=Ct,Be=Zt,Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=ce[3],Be=de[3],Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,ce[3]=Ct=Me&65535|Ke<<16,de[3]=Zt=Fe&65535|Le<<16,Pe=xe,Be=zt,Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=ce[4],Be=de[4],Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,ce[4]=xe=Me&65535|Ke<<16,de[4]=zt=Fe&65535|Le<<16,Pe=Dt,Be=Qt,Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=ce[5],Be=de[5],Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,ce[5]=Dt=Me&65535|Ke<<16,de[5]=Qt=Fe&65535|Le<<16,Pe=Gt,Be=Wt,Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=ce[6],Be=de[6],Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,ce[6]=Gt=Me&65535|Ke<<16,de[6]=Wt=Fe&65535|Le<<16,Pe=Ht,Be=Yt,Fe=Be&65535,Le=Be>>>16,Me=Pe&65535,Ke=Pe>>>16,Pe=ce[7],Be=de[7],Fe+=Be&65535,Le+=Be>>>16,Me+=Pe&65535,Ke+=Pe>>>16,Le+=Fe>>>16,Me+=Le>>>16,Ke+=Me>>>16,ce[7]=Ht=Me&65535|Ke<<16,de[7]=Yt=Fe&65535|Le<<16,Jt+=128,te-=128}return te}function yt(ce,de,he){var te=new Int32Array(8),ye=new Int32Array(8),Ae=new Uint8Array(256),Ie,ke=he;for(te[0]=1779033703,te[1]=3144134277,te[2]=1013904242,te[3]=2773480762,te[4]=1359893119,te[5]=2600822924,te[6]=528734635,te[7]=1541459225,ye[0]=4089235720,ye[1]=2227873595,ye[2]=4271175723,ye[3]=1595750129,ye[4]=2917565137,ye[5]=725511199,ye[6]=4215389547,ye[7]=327033209,Xe(te,ye,de,he),he%=128,Ie=0;Ie<he;Ie++)Ae[Ie]=de[ke-he+Ie];for(Ae[he]=128,he=256-128*(he<112?1:0),Ae[he-9]=0,u(Ae,he-8,ke/536870912|0,ke<<3),Xe(te,ye,Ae,he),Ie=0;Ie<8;Ie++)u(ce,8*Ie,te[Ie],ye[Ie]);return 0}function gt(ce,de){var he=t(),te=t(),ye=t(),Ae=t(),Ie=t(),ke=t(),Oe=t(),Ge=t(),Ue=t();ue(he,ce[1],ce[0]),ue(Ue,de[1],de[0]),q(he,he,Ue),oe(te,ce[0],ce[1]),oe(Ue,de[0],de[1]),q(te,te,Ue),q(ye,ce[3],de[3]),q(ye,ye,v),q(Ae,ce[2],de[2]),oe(Ae,Ae,Ae),ue(Ie,te,he),ue(ke,Ae,ye),oe(Oe,Ae,ye),oe(Ge,te,he),q(ce[0],Ie,ke),q(ce[1],Ge,Oe),q(ce[2],Oe,ke),q(ce[3],Ie,Ge)}function ze(ce,de,he){var te;for(te=0;te<4;te++)Q(ce[te],de[te],he)}function et(ce,de){var he=t(),te=t(),ye=t();be(ye,de[2]),q(he,de[0],ye),q(te,de[1],ye),G(ce,te),ce[31]^=$(he)<<7}function at(ce,de,he){var te,ye;for(F(ce[0],h),F(ce[1],d),F(ce[2],d),F(ce[3],h),ye=255;ye>=0;--ye)te=he[ye/8|0]>>(ye&7)&1,ze(ce,de,te),gt(de,ce),gt(ce,ce),ze(ce,de,te)}function Ye(ce,de){var he=[t(),t(),t(),t()];F(he[0],_),F(he[1],p),F(he[2],d),q(he[3],_,p),at(ce,he,de)}function lt(ce,de,he){var te=new Uint8Array(64),ye=[t(),t(),t(),t()],Ae;for(he||o(de,32),yt(te,de,32),te[0]&=248,te[31]&=127,te[31]|=64,Ye(ye,te),et(ce,ye),Ae=0;Ae<32;Ae++)de[Ae+32]=ce[Ae];return 0}var dt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function le(ce,de){var he,te,ye,Ae;for(te=63;te>=32;--te){for(he=0,ye=te-32,Ae=te-12;ye<Ae;++ye)de[ye]+=he-16*de[te]*dt[ye-(te-32)],he=Math.floor((de[ye]+128)/256),de[ye]-=he*256;de[ye]+=he,de[te]=0}for(he=0,ye=0;ye<32;ye++)de[ye]+=he-(de[31]>>4)*dt[ye],he=de[ye]>>8,de[ye]&=255;for(ye=0;ye<32;ye++)de[ye]-=he*dt[ye];for(te=0;te<32;te++)de[te+1]+=de[te]>>8,ce[te]=de[te]&255}function ne(ce){var de=new Float64Array(64),he;for(he=0;he<64;he++)de[he]=ce[he];for(he=0;he<64;he++)ce[he]=0;le(ce,de)}function ie(ce,de,he,te){var ye=new Uint8Array(64),Ae=new Uint8Array(64),Ie=new Uint8Array(64),ke,Oe,Ge=new Float64Array(64),Ue=[t(),t(),t(),t()];yt(ye,te,32),ye[0]&=248,ye[31]&=127,ye[31]|=64;var Tt=he+64;for(ke=0;ke<he;ke++)ce[64+ke]=de[ke];for(ke=0;ke<32;ke++)ce[32+ke]=ye[32+ke];for(yt(Ie,ce.subarray(32),he+32),ne(Ie),Ye(Ue,Ie),et(ce,Ue),ke=32;ke<64;ke++)ce[ke]=te[ke];for(yt(Ae,ce,he+64),ne(Ae),ke=0;ke<64;ke++)Ge[ke]=0;for(ke=0;ke<32;ke++)Ge[ke]=Ie[ke];for(ke=0;ke<32;ke++)for(Oe=0;Oe<32;Oe++)Ge[ke+Oe]+=Ae[ke]*ye[Oe];return le(ce.subarray(32),Ge),Tt}function ge(ce,de){var he=t(),te=t(),ye=t(),Ae=t(),Ie=t(),ke=t(),Oe=t();return F(ce[2],d),O(ce[1],de),pe(ye,ce[1]),q(Ae,ye,m),ue(ye,ye,ce[2]),oe(Ae,ce[2],Ae),pe(Ie,Ae),pe(ke,Ie),q(Oe,ke,Ie),q(he,Oe,ye),q(he,he,Ae),ve(he,he),q(he,he,ye),q(he,he,Ae),q(he,he,Ae),q(ce[0],he,Ae),pe(te,ce[0]),q(te,te,Ae),U(te,ye)&&q(ce[0],ce[0],a),pe(te,ce[0]),q(te,te,Ae),U(te,ye)?-1:($(ce[0])===de[31]>>7&&ue(ce[0],h,ce[0]),q(ce[3],ce[0],ce[1]),0)}function _e(ce,de,he,te){var ye,Ae=new Uint8Array(32),Ie=new Uint8Array(64),ke=[t(),t(),t(),t()],Oe=[t(),t(),t(),t()];if(he<64||ge(Oe,te))return-1;for(ye=0;ye<he;ye++)ce[ye]=de[ye];for(ye=0;ye<32;ye++)ce[ye+32]=te[ye];if(yt(Ie,ce,he),ne(Ie),at(ke,Oe,Ie),Ye(Oe,de.subarray(32)),gt(ke,Oe),et(Ae,ke),he-=64,w(de,0,Ae,0)){for(ye=0;ye<he;ye++)ce[ye]=0;return-1}for(ye=0;ye<he;ye++)ce[ye]=de[ye+64];return he}var Ee=32,Te=24,Qe=32,ot=16,je=32,ct=32,tt=32,mt=32,$t=32,Kt=Te,It=Qe,Vt=ot,Pt=64,ft=32,Nt=64,Ot=32,wt=64;e.lowlevel={crypto_core_hsalsa20:J,crypto_stream_xor:ae,crypto_stream:se,crypto_stream_salsa20_xor:fe,crypto_stream_salsa20:re,crypto_onetimeauth:P,crypto_onetimeauth_verify:C,crypto_verify_16:b,crypto_verify_32:w,crypto_secretbox:E,crypto_secretbox_open:k,crypto_scalarmult:we,crypto_scalarmult_base:Ce,crypto_box_beforenm:Se,crypto_box_afternm:$e,crypto_box:Ne,crypto_box_open:pt,crypto_box_keypair:Re,crypto_hash:yt,crypto_sign:ie,crypto_sign_keypair:lt,crypto_sign_open:_e,crypto_secretbox_KEYBYTES:Ee,crypto_secretbox_NONCEBYTES:Te,crypto_secretbox_ZEROBYTES:Qe,crypto_secretbox_BOXZEROBYTES:ot,crypto_scalarmult_BYTES:je,crypto_scalarmult_SCALARBYTES:ct,crypto_box_PUBLICKEYBYTES:tt,crypto_box_SECRETKEYBYTES:mt,crypto_box_BEFORENMBYTES:$t,crypto_box_NONCEBYTES:Kt,crypto_box_ZEROBYTES:It,crypto_box_BOXZEROBYTES:Vt,crypto_sign_BYTES:Pt,crypto_sign_PUBLICKEYBYTES:ft,crypto_sign_SECRETKEYBYTES:Nt,crypto_sign_SEEDBYTES:Ot,crypto_hash_BYTES:wt,gf:t,D:m,L:dt,pack25519:G,unpack25519:O,M:q,A:oe,S:pe,Z:ue,pow2523:ve,add:gt,set25519:F,modL:le,scalarmult:at,scalarbase:Ye};function Lt(ce,de){if(ce.length!==Ee)throw new Error("bad key size");if(de.length!==Te)throw new Error("bad nonce size")}function jt(ce,de){if(ce.length!==tt)throw new Error("bad public key size");if(de.length!==mt)throw new Error("bad secret key size")}function nt(){for(var ce=0;ce<arguments.length;ce++)if(!(arguments[ce]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function St(ce){for(var de=0;de<ce.length;de++)ce[de]=0}e.randomBytes=function(ce){var de=new Uint8Array(ce);return o(de,ce),de},e.secretbox=function(ce,de,he){nt(ce,de,he),Lt(he,de);for(var te=new Uint8Array(Qe+ce.length),ye=new Uint8Array(te.length),Ae=0;Ae<ce.length;Ae++)te[Ae+Qe]=ce[Ae];return E(ye,te,te.length,de,he),ye.subarray(ot)},e.secretbox.open=function(ce,de,he){nt(ce,de,he),Lt(he,de);for(var te=new Uint8Array(ot+ce.length),ye=new Uint8Array(te.length),Ae=0;Ae<ce.length;Ae++)te[Ae+ot]=ce[Ae];return te.length<32||k(ye,te,te.length,de,he)!==0?null:ye.subarray(Qe)},e.secretbox.keyLength=Ee,e.secretbox.nonceLength=Te,e.secretbox.overheadLength=ot,e.scalarMult=function(ce,de){if(nt(ce,de),ce.length!==ct)throw new Error("bad n size");if(de.length!==je)throw new Error("bad p size");var he=new Uint8Array(je);return we(he,ce,de),he},e.scalarMult.base=function(ce){if(nt(ce),ce.length!==ct)throw new Error("bad n size");var de=new Uint8Array(je);return Ce(de,ce),de},e.scalarMult.scalarLength=ct,e.scalarMult.groupElementLength=je,e.box=function(ce,de,he,te){var ye=e.box.before(he,te);return e.secretbox(ce,de,ye)},e.box.before=function(ce,de){nt(ce,de),jt(ce,de);var he=new Uint8Array($t);return Se(he,ce,de),he},e.box.after=e.secretbox,e.box.open=function(ce,de,he,te){var ye=e.box.before(he,te);return e.secretbox.open(ce,de,ye)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var ce=new Uint8Array(tt),de=new Uint8Array(mt);return Re(ce,de),{publicKey:ce,secretKey:de}},e.box.keyPair.fromSecretKey=function(ce){if(nt(ce),ce.length!==mt)throw new Error("bad secret key size");var de=new Uint8Array(tt);return Ce(de,ce),{publicKey:de,secretKey:new Uint8Array(ce)}},e.box.publicKeyLength=tt,e.box.secretKeyLength=mt,e.box.sharedKeyLength=$t,e.box.nonceLength=Kt,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(ce,de){if(nt(ce,de),de.length!==Nt)throw new Error("bad secret key size");var he=new Uint8Array(Pt+ce.length);return ie(he,ce,ce.length,de),he},e.sign.open=function(ce,de){if(nt(ce,de),de.length!==ft)throw new Error("bad public key size");var he=new Uint8Array(ce.length),te=_e(he,ce,ce.length,de);if(te<0)return null;for(var ye=new Uint8Array(te),Ae=0;Ae<ye.length;Ae++)ye[Ae]=he[Ae];return ye},e.sign.detached=function(ce,de){for(var he=e.sign(ce,de),te=new Uint8Array(Pt),ye=0;ye<te.length;ye++)te[ye]=he[ye];return te},e.sign.detached.verify=function(ce,de,he){if(nt(ce,de,he),de.length!==Pt)throw new Error("bad signature size");if(he.length!==ft)throw new Error("bad public key size");var te=new Uint8Array(Pt+ce.length),ye=new Uint8Array(Pt+ce.length),Ae;for(Ae=0;Ae<Pt;Ae++)te[Ae]=de[Ae];for(Ae=0;Ae<ce.length;Ae++)te[Ae+Pt]=ce[Ae];return _e(ye,te,te.length,he)>=0},e.sign.keyPair=function(){var ce=new Uint8Array(ft),de=new Uint8Array(Nt);return lt(ce,de),{publicKey:ce,secretKey:de}},e.sign.keyPair.fromSecretKey=function(ce){if(nt(ce),ce.length!==Nt)throw new Error("bad secret key size");for(var de=new Uint8Array(ft),he=0;he<de.length;he++)de[he]=ce[32+he];return{publicKey:de,secretKey:new Uint8Array(ce)}},e.sign.keyPair.fromSeed=function(ce){if(nt(ce),ce.length!==Ot)throw new Error("bad seed size");for(var de=new Uint8Array(ft),he=new Uint8Array(Nt),te=0;te<32;te++)he[te]=ce[te];return lt(de,he,!0),{publicKey:de,secretKey:he}},e.sign.publicKeyLength=ft,e.sign.secretKeyLength=Nt,e.sign.seedLength=Ot,e.sign.signatureLength=Pt,e.hash=function(ce){nt(ce);var de=new Uint8Array(wt);return yt(de,ce,ce.length),de},e.hash.hashLength=wt,e.verify=function(ce,de){return nt(ce,de),ce.length===0||de.length===0||ce.length!==de.length?!1:y(ce,0,de,0,ce.length)===0},e.setPRNG=function(ce){o=ce},function(){var ce=typeof self<"u"?self.crypto||self.msCrypto:null;if(ce&&ce.getRandomValues){var de=65536;e.setPRNG(function(he,te){var ye,Ae=new Uint8Array(te);for(ye=0;ye<te;ye+=de)ce.getRandomValues(Ae.subarray(ye,ye+Math.min(te-ye,de)));for(ye=0;ye<te;ye++)he[ye]=Ae[ye];St(Ae)})}else typeof commonjsRequire$1<"u"&&(ce=require$$0$1,ce&&ce.randomBytes&&e.setPRNG(function(he,te){var ye,Ae=ce.randomBytes(te);for(ye=0;ye<te;ye++)he[ye]=Ae[ye];St(Ae)}))}()})(n.exports?n.exports:self.nacl=self.nacl||{})})(naclFast);var naclFastExports=naclFast.exports;const nacl=getDefaultExportFromCjs(naclFastExports);function arrayEqual$1(n,e){if(n===e)return!0;if(n.byteLength!==e.byteLength)return!1;const t=new DataView(n.buffer,n.byteOffset,n.byteLength),o=new DataView(e.buffer,e.byteOffset,e.byteLength);let c=n.byteLength;for(;c--;)if(t.getUint8(c)!==o.getUint8(c))return!1;return!0}function arrayStartsWith(n,e){if(n.byteLength<e.byteLength)return!1;let t=e.byteLength;for(;t--;)if(n[t]!==e[t])return!1;return!0}const byteToHex=[];for(let n=0;n<=255;n+=1)byteToHex.push(n.toString(16).padStart(2,"0"));function encode$2(n){let e="";for(const t of n)e+=byteToHex[t];return e}function decode$4(n){const t=(n.startsWith("0x")?n.substring(2):n).match(/.{1,2}/gu);return new Uint8Array((t??[]).map(o=>parseInt(o,16)))}function hexZeroPadded(n,e){const t="0123456789abcdef";let o="0x";for(let c=0;c<n.length;c++){let l=n[c];o+=t[(l&240)>>4]+t[l&15]}for(o.length>2*e+2&&console.log("result out of range","result");o.length<2*e+2;)o="0x0"+o.substring(2);return o.substring(2)}var forge$g=forge$D,md5=forge$g.md5=forge$g.md5||{};forge$g.md.md5=forge$g.md.algorithms.md5=md5;md5.create=function(){_initialized||_init();var n=null,e=forge$g.util.createBuffer(),t=new Array(16),o={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var c=o.messageLengthSize/4,l=0;l<c;++l)o.fullMessageLength.push(0);return e=forge$g.util.createBuffer(),n={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},o},o.start(),o.update=function(c,l){l==="utf8"&&(c=forge$g.util.encodeUtf8(c));var h=c.length;o.messageLength+=h,h=[h/4294967296>>>0,h>>>0];for(var d=o.fullMessageLength.length-1;d>=0;--d)o.fullMessageLength[d]+=h[1],h[1]=h[0]+(o.fullMessageLength[d]/4294967296>>>0),o.fullMessageLength[d]=o.fullMessageLength[d]>>>0,h[0]=h[1]/4294967296>>>0;return e.putBytes(c),_update(n,t,e),(e.read>2048||e.length()===0)&&e.compact(),o},o.digest=function(){var c=forge$g.util.createBuffer();c.putBytes(e.bytes());var l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,h=l&o.blockLength-1;c.putBytes(_padding.substr(0,o.blockLength-h));for(var d,g=0,m=o.fullMessageLength.length-1;m>=0;--m)d=o.fullMessageLength[m]*8+g,g=d/4294967296>>>0,c.putInt32Le(d>>>0);var v={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3};_update(v,t,c);var _=forge$g.util.createBuffer();return _.putInt32Le(v.h0),_.putInt32Le(v.h1),_.putInt32Le(v.h2),_.putInt32Le(v.h3),_},o};var _padding=null,_g=null,_r=null,_k=null,_initialized=!1;function _init(){_padding=String.fromCharCode(128),_padding+=forge$g.util.fillString(String.fromCharCode(0),64),_g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],_r=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],_k=new Array(64);for(var n=0;n<64;++n)_k[n]=Math.floor(Math.abs(Math.sin(n+1))*4294967296);_initialized=!0}function _update(n,e,t){for(var o,c,l,h,d,g,m,v,_=t.length();_>=64;){for(c=n.h0,l=n.h1,h=n.h2,d=n.h3,v=0;v<16;++v)e[v]=t.getInt32Le(),g=d^l&(h^d),o=c+g+_k[v]+e[v],m=_r[v],c=d,d=h,h=l,l+=o<<m|o>>>32-m;for(;v<32;++v)g=h^d&(l^h),o=c+g+_k[v]+e[_g[v]],m=_r[v],c=d,d=h,h=l,l+=o<<m|o>>>32-m;for(;v<48;++v)g=l^h^d,o=c+g+_k[v]+e[_g[v]],m=_r[v],c=d,d=h,h=l,l+=o<<m|o>>>32-m;for(;v<64;++v)g=h^(l|~d),o=c+g+_k[v]+e[_g[v]],m=_r[v],c=d,d=h,h=l,l+=o<<m|o>>>32-m;n.h0=n.h0+c|0,n.h1=n.h1+l|0,n.h2=n.h2+h|0,n.h3=n.h3+d|0,_-=64}}var forge$f=forge$D,asn1$5=forge$f.asn1,p7v=forge$f.pkcs7asn1=forge$f.pkcs7asn1||{};forge$f.pkcs7=forge$f.pkcs7||{};forge$f.pkcs7.asn1=p7v;var contentInfoValidator$1={name:"ContentInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};p7v.contentInfoValidator=contentInfoValidator$1;var encryptedContentInfoValidator={name:"EncryptedContentInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:asn1$5.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};p7v.envelopedDataValidator={name:"EnvelopedData",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(encryptedContentInfoValidator)};p7v.encryptedDataValidator={name:"EncryptedData",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"}].concat(encryptedContentInfoValidator)};var signerValidator={name:"SignerInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:asn1$5.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};p7v.signedDataValidator={name:"SignedData",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},contentInfoValidator$1,{name:"SignedData.Certificates",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:asn1$5.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SET,capture:"signerInfos",optional:!0,value:[signerValidator]}]};p7v.recipientInfoValidator={name:"RecipientInfo",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:asn1$5.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:asn1$5.Class.UNIVERSAL,type:asn1$5.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var forge$e=forge$D;forge$e.mgf=forge$e.mgf||{};var mgf1=forge$e.mgf.mgf1=forge$e.mgf1=forge$e.mgf1||{};mgf1.create=function(n){var e={generate:function(t,o){for(var c=new forge$e.util.ByteBuffer,l=Math.ceil(o/n.digestLength),h=0;h<l;h++){var d=new forge$e.util.ByteBuffer;d.putInt32(h),n.start(),n.update(t+d.getBytes()),c.putBuffer(n.digest())}return c.truncate(c.length()-o),c.getBytes()}};return e};var forge$d=forge$D;forge$d.mgf=forge$d.mgf||{};forge$d.mgf.mgf1=forge$d.mgf1;var forge$c=forge$D,pss=forge$c.pss=forge$c.pss||{};pss.create=function(n){arguments.length===3&&(n={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=n.md,t=n.mgf,o=e.digestLength,c=n.salt||null;typeof c=="string"&&(c=forge$c.util.createBuffer(c));var l;if("saltLength"in n)l=n.saltLength;else if(c!==null)l=c.length();else throw new Error("Salt length not specified or specific salt not given.");if(c!==null&&c.length()!==l)throw new Error("Given salt length does not match length of given salt.");var h=n.prng||forge$c.random,d={};return d.encode=function(g,m){var v,_=m-1,p=Math.ceil(_/8),a=g.digest().getBytes();if(p<o+l+2)throw new Error("Message is too long to encrypt.");var u;c===null?u=h.getBytesSync(l):u=c.bytes();var y=new forge$c.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(a),y.putBytes(u),e.start(),e.update(y.getBytes());var b=e.digest().getBytes(),w=new forge$c.util.ByteBuffer;w.fillWithByte(0,p-l-o-2),w.putByte(1),w.putBytes(u);var T=w.getBytes(),B=p-o-1,H=t.generate(b,B),J="";for(v=0;v<B;v++)J+=String.fromCharCode(T.charCodeAt(v)^H.charCodeAt(v));var W=65280>>8*p-_&255;return J=String.fromCharCode(J.charCodeAt(0)&~W)+J.substr(1),J+b+String.fromCharCode(188)},d.verify=function(g,m,v){var _,p=v-1,a=Math.ceil(p/8);if(m=m.substr(-a),a<o+l+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(m.charCodeAt(a-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var u=a-o-1,y=m.substr(0,u),b=m.substr(u,o),w=65280>>8*a-p&255;if(y.charCodeAt(0)&w)throw new Error("Bits beyond keysize not zero as expected.");var T=t.generate(b,u),B="";for(_=0;_<u;_++)B+=String.fromCharCode(y.charCodeAt(_)^T.charCodeAt(_));B=String.fromCharCode(B.charCodeAt(0)&~w)+B.substr(1);var H=a-o-l-2;for(_=0;_<H;_++)if(B.charCodeAt(_)!==0)throw new Error("Leftmost octets not zero as expected");if(B.charCodeAt(H)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var J=B.substr(-l),W=new forge$c.util.ByteBuffer;W.fillWithByte(0,8),W.putBytes(g),W.putBytes(J),e.start(),e.update(W.getBytes());var fe=e.digest().getBytes();return b===fe},d};var forge$b=forge$D,asn1$4=forge$b.asn1,pki$2=forge$b.pki=forge$b.pki||{},oids=pki$2.oids,_shortNames={};_shortNames.CN=oids.commonName;_shortNames.commonName="CN";_shortNames.C=oids.countryName;_shortNames.countryName="C";_shortNames.L=oids.localityName;_shortNames.localityName="L";_shortNames.ST=oids.stateOrProvinceName;_shortNames.stateOrProvinceName="ST";_shortNames.O=oids.organizationName;_shortNames.organizationName="O";_shortNames.OU=oids.organizationalUnitName;_shortNames.organizationalUnitName="OU";_shortNames.E=oids.emailAddress;_shortNames.emailAddress="E";var publicKeyValidator$1=forge$b.pki.rsa.publicKeyValidator,x509CertificateValidator={name:"Certificate",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:asn1$4.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},publicKeyValidator$1,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:asn1$4.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},rsassaPssParameterValidator={name:"rsapss",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},certificationRequestInfoValidator={name:"CertificationRequestInfo",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},publicKeyValidator$1,{name:"CertificationRequestInfo.attributes",tagClass:asn1$4.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SET,constructed:!0}]}]}]},certificationRequestValidator={name:"CertificationRequest",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[certificationRequestInfoValidator,{name:"CertificationRequest.signatureAlgorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:asn1$4.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};pki$2.RDNAttributesAsArray=function(n,e){for(var t=[],o,c,l,h=0;h<n.value.length;++h){o=n.value[h];for(var d=0;d<o.value.length;++d)l={},c=o.value[d],l.type=asn1$4.derToOid(c.value[0].value),l.value=c.value[1].value,l.valueTagClass=c.value[1].type,l.type in oids&&(l.name=oids[l.type],l.name in _shortNames&&(l.shortName=_shortNames[l.name])),e&&(e.update(l.type),e.update(l.value)),t.push(l)}return t};pki$2.CRIAttributesAsArray=function(n){for(var e=[],t=0;t<n.length;++t)for(var o=n[t],c=asn1$4.derToOid(o.value[0].value),l=o.value[1].value,h=0;h<l.length;++h){var d={};if(d.type=c,d.value=l[h].value,d.valueTagClass=l[h].type,d.type in oids&&(d.name=oids[d.type],d.name in _shortNames&&(d.shortName=_shortNames[d.name])),d.type===oids.extensionRequest){d.extensions=[];for(var g=0;g<d.value.length;++g)d.extensions.push(pki$2.certificateExtensionFromAsn1(d.value[g]))}e.push(d)}return e};function _getAttribute(n,e){typeof e=="string"&&(e={shortName:e});for(var t=null,o,c=0;t===null&&c<n.attributes.length;++c)o=n.attributes[c],(e.type&&e.type===o.type||e.name&&e.name===o.name||e.shortName&&e.shortName===o.shortName)&&(t=o);return t}var _readSignatureParameters=function(n,e,t){var o={};if(n!==oids["RSASSA-PSS"])return o;t&&(o={hash:{algorithmOid:oids.sha1},mgf:{algorithmOid:oids.mgf1,hash:{algorithmOid:oids.sha1}},saltLength:20});var c={},l=[];if(!asn1$4.validate(e,rsassaPssParameterValidator,c,l)){var h=new Error("Cannot read RSASSA-PSS parameter block.");throw h.errors=l,h}return c.hashOid!==void 0&&(o.hash=o.hash||{},o.hash.algorithmOid=asn1$4.derToOid(c.hashOid)),c.maskGenOid!==void 0&&(o.mgf=o.mgf||{},o.mgf.algorithmOid=asn1$4.derToOid(c.maskGenOid),o.mgf.hash=o.mgf.hash||{},o.mgf.hash.algorithmOid=asn1$4.derToOid(c.maskGenHashOid)),c.saltLength!==void 0&&(o.saltLength=c.saltLength.charCodeAt(0)),o},_createSignatureDigest=function(n){switch(oids[n.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return forge$b.md.sha1.create();case"md5WithRSAEncryption":return forge$b.md.md5.create();case"sha256WithRSAEncryption":return forge$b.md.sha256.create();case"sha384WithRSAEncryption":return forge$b.md.sha384.create();case"sha512WithRSAEncryption":return forge$b.md.sha512.create();case"RSASSA-PSS":return forge$b.md.sha256.create();default:var e=new Error("Could not compute "+n.type+" digest. Unknown signature OID.");throw e.signatureOid=n.signatureOid,e}},_verifySignature=function(n){var e=n.certificate,t;switch(e.signatureOid){case oids.sha1WithRSAEncryption:case oids.sha1WithRSASignature:break;case oids["RSASSA-PSS"]:var o,c;if(o=oids[e.signatureParameters.mgf.hash.algorithmOid],o===void 0||forge$b.md[o]===void 0){var l=new Error("Unsupported MGF hash function.");throw l.oid=e.signatureParameters.mgf.hash.algorithmOid,l.name=o,l}if(c=oids[e.signatureParameters.mgf.algorithmOid],c===void 0||forge$b.mgf[c]===void 0){var l=new Error("Unsupported MGF function.");throw l.oid=e.signatureParameters.mgf.algorithmOid,l.name=c,l}if(c=forge$b.mgf[c].create(forge$b.md[o].create()),o=oids[e.signatureParameters.hash.algorithmOid],o===void 0||forge$b.md[o]===void 0){var l=new Error("Unsupported RSASSA-PSS hash function.");throw l.oid=e.signatureParameters.hash.algorithmOid,l.name=o,l}t=forge$b.pss.create(forge$b.md[o].create(),c,e.signatureParameters.saltLength);break}return e.publicKey.verify(n.md.digest().getBytes(),n.signature,t)};pki$2.certificateFromPem=function(n,e,t){var o=forge$b.pem.decode(n)[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=o.type,c}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var l=asn1$4.fromDer(o.body,t);return pki$2.certificateFromAsn1(l,e)};pki$2.certificateToPem=function(n,e){var t={type:"CERTIFICATE",body:asn1$4.toDer(pki$2.certificateToAsn1(n)).getBytes()};return forge$b.pem.encode(t,{maxline:e})};pki$2.publicKeyFromPem=function(n){var e=forge$b.pem.decode(n)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var t=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw t.headerType=e.type,t}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=asn1$4.fromDer(e.body);return pki$2.publicKeyFromAsn1(o)};pki$2.publicKeyToPem=function(n,e){var t={type:"PUBLIC KEY",body:asn1$4.toDer(pki$2.publicKeyToAsn1(n)).getBytes()};return forge$b.pem.encode(t,{maxline:e})};pki$2.publicKeyToRSAPublicKeyPem=function(n,e){var t={type:"RSA PUBLIC KEY",body:asn1$4.toDer(pki$2.publicKeyToRSAPublicKey(n)).getBytes()};return forge$b.pem.encode(t,{maxline:e})};pki$2.getPublicKeyFingerprint=function(n,e){e=e||{};var t=e.md||forge$b.md.sha1.create(),o=e.type||"RSAPublicKey",c;switch(o){case"RSAPublicKey":c=asn1$4.toDer(pki$2.publicKeyToRSAPublicKey(n)).getBytes();break;case"SubjectPublicKeyInfo":c=asn1$4.toDer(pki$2.publicKeyToAsn1(n)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}t.start(),t.update(c);var l=t.digest();if(e.encoding==="hex"){var h=l.toHex();return e.delimiter?h.match(/.{2}/g).join(e.delimiter):h}else{if(e.encoding==="binary")return l.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return l};pki$2.certificationRequestFromPem=function(n,e,t){var o=forge$b.pem.decode(n)[0];if(o.type!=="CERTIFICATE REQUEST"){var c=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw c.headerType=o.type,c}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var l=asn1$4.fromDer(o.body,t);return pki$2.certificationRequestFromAsn1(l,e)};pki$2.certificationRequestToPem=function(n,e){var t={type:"CERTIFICATE REQUEST",body:asn1$4.toDer(pki$2.certificationRequestToAsn1(n)).getBytes()};return forge$b.pem.encode(t,{maxline:e})};pki$2.createCertificate=function(){var n={};return n.version=2,n.serialNumber="00",n.signatureOid=null,n.signature=null,n.siginfo={},n.siginfo.algorithmOid=null,n.validity={},n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.issuer={},n.issuer.getField=function(e){return _getAttribute(n.issuer,e)},n.issuer.addField=function(e){_fillMissingFields([e]),n.issuer.attributes.push(e)},n.issuer.attributes=[],n.issuer.hash=null,n.subject={},n.subject.getField=function(e){return _getAttribute(n.subject,e)},n.subject.addField=function(e){_fillMissingFields([e]),n.subject.attributes.push(e)},n.subject.attributes=[],n.subject.hash=null,n.extensions=[],n.publicKey=null,n.md=null,n.setSubject=function(e,t){_fillMissingFields(e),n.subject.attributes=e,delete n.subject.uniqueId,t&&(n.subject.uniqueId=t),n.subject.hash=null},n.setIssuer=function(e,t){_fillMissingFields(e),n.issuer.attributes=e,delete n.issuer.uniqueId,t&&(n.issuer.uniqueId=t),n.issuer.hash=null},n.setExtensions=function(e){for(var t=0;t<e.length;++t)_fillMissingExtensionFields(e[t],{cert:n});n.extensions=e},n.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var t=null,o,c=0;t===null&&c<n.extensions.length;++c)o=n.extensions[c],(e.id&&o.id===e.id||e.name&&o.name===e.name)&&(t=o);return t},n.sign=function(e,t){n.md=t||forge$b.md.sha1.create();var o=oids[n.md.algorithm+"WithRSAEncryption"];if(!o){var c=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw c.algorithm=n.md.algorithm,c}n.signatureOid=n.siginfo.algorithmOid=o,n.tbsCertificate=pki$2.getTBSCertificate(n);var l=asn1$4.toDer(n.tbsCertificate);n.md.update(l.getBytes()),n.signature=e.sign(n.md)},n.verify=function(e){var t=!1;if(!n.issued(e)){var o=e.issuer,c=n.subject,l=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw l.expectedIssuer=c.attributes,l.actualIssuer=o.attributes,l}var h=e.md;if(h===null){h=_createSignatureDigest({signatureOid:e.signatureOid,type:"certificate"});var d=e.tbsCertificate||pki$2.getTBSCertificate(e),g=asn1$4.toDer(d);h.update(g.getBytes())}return h!==null&&(t=_verifySignature({certificate:n,md:h,signature:e.signature})),t},n.isIssuer=function(e){var t=!1,o=n.issuer,c=e.subject;if(o.hash&&c.hash)t=o.hash===c.hash;else if(o.attributes.length===c.attributes.length){t=!0;for(var l,h,d=0;t&&d<o.attributes.length;++d)l=o.attributes[d],h=c.attributes[d],(l.type!==h.type||l.value!==h.value)&&(t=!1)}return t},n.issued=function(e){return e.isIssuer(n)},n.generateSubjectKeyIdentifier=function(){return pki$2.getPublicKeyFingerprint(n.publicKey,{type:"RSAPublicKey"})},n.verifySubjectKeyIdentifier=function(){for(var e=oids.subjectKeyIdentifier,t=0;t<n.extensions.length;++t){var o=n.extensions[t];if(o.id===e){var c=n.generateSubjectKeyIdentifier().getBytes();return forge$b.util.hexToBytes(o.subjectKeyIdentifier)===c}}return!1},n};pki$2.certificateFromAsn1=function(n,e){var t={},o=[];if(!asn1$4.validate(n,x509CertificateValidator,t,o)){var c=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw c.errors=o,c}var l=asn1$4.derToOid(t.publicKeyOid);if(l!==pki$2.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var h=pki$2.createCertificate();h.version=t.certVersion?t.certVersion.charCodeAt(0):0;var d=forge$b.util.createBuffer(t.certSerialNumber);h.serialNumber=d.toHex(),h.signatureOid=forge$b.asn1.derToOid(t.certSignatureOid),h.signatureParameters=_readSignatureParameters(h.signatureOid,t.certSignatureParams,!0),h.siginfo.algorithmOid=forge$b.asn1.derToOid(t.certinfoSignatureOid),h.siginfo.parameters=_readSignatureParameters(h.siginfo.algorithmOid,t.certinfoSignatureParams,!1),h.signature=t.certSignature;var g=[];if(t.certValidity1UTCTime!==void 0&&g.push(asn1$4.utcTimeToDate(t.certValidity1UTCTime)),t.certValidity2GeneralizedTime!==void 0&&g.push(asn1$4.generalizedTimeToDate(t.certValidity2GeneralizedTime)),t.certValidity3UTCTime!==void 0&&g.push(asn1$4.utcTimeToDate(t.certValidity3UTCTime)),t.certValidity4GeneralizedTime!==void 0&&g.push(asn1$4.generalizedTimeToDate(t.certValidity4GeneralizedTime)),g.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(g.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(h.validity.notBefore=g[0],h.validity.notAfter=g[1],h.tbsCertificate=t.tbsCertificate,e){h.md=_createSignatureDigest({signatureOid:h.signatureOid,type:"certificate"});var m=asn1$4.toDer(h.tbsCertificate);h.md.update(m.getBytes())}var v=forge$b.md.sha1.create(),_=asn1$4.toDer(t.certIssuer);v.update(_.getBytes()),h.issuer.getField=function(u){return _getAttribute(h.issuer,u)},h.issuer.addField=function(u){_fillMissingFields([u]),h.issuer.attributes.push(u)},h.issuer.attributes=pki$2.RDNAttributesAsArray(t.certIssuer),t.certIssuerUniqueId&&(h.issuer.uniqueId=t.certIssuerUniqueId),h.issuer.hash=v.digest().toHex();var p=forge$b.md.sha1.create(),a=asn1$4.toDer(t.certSubject);return p.update(a.getBytes()),h.subject.getField=function(u){return _getAttribute(h.subject,u)},h.subject.addField=function(u){_fillMissingFields([u]),h.subject.attributes.push(u)},h.subject.attributes=pki$2.RDNAttributesAsArray(t.certSubject),t.certSubjectUniqueId&&(h.subject.uniqueId=t.certSubjectUniqueId),h.subject.hash=p.digest().toHex(),t.certExtensions?h.extensions=pki$2.certificateExtensionsFromAsn1(t.certExtensions):h.extensions=[],h.publicKey=pki$2.publicKeyFromAsn1(t.subjectPublicKeyInfo),h};pki$2.certificateExtensionsFromAsn1=function(n){for(var e=[],t=0;t<n.value.length;++t)for(var o=n.value[t],c=0;c<o.value.length;++c)e.push(pki$2.certificateExtensionFromAsn1(o.value[c]));return e};pki$2.certificateExtensionFromAsn1=function(n){var e={};if(e.id=asn1$4.derToOid(n.value[0].value),e.critical=!1,n.value[1].type===asn1$4.Type.BOOLEAN?(e.critical=n.value[1].value.charCodeAt(0)!==0,e.value=n.value[2].value):e.value=n.value[1].value,e.id in oids){if(e.name=oids[e.id],e.name==="keyUsage"){var t=asn1$4.fromDer(e.value),o=0,c=0;t.value.length>1&&(o=t.value.charCodeAt(1),c=t.value.length>2?t.value.charCodeAt(2):0),e.digitalSignature=(o&128)===128,e.nonRepudiation=(o&64)===64,e.keyEncipherment=(o&32)===32,e.dataEncipherment=(o&16)===16,e.keyAgreement=(o&8)===8,e.keyCertSign=(o&4)===4,e.cRLSign=(o&2)===2,e.encipherOnly=(o&1)===1,e.decipherOnly=(c&128)===128}else if(e.name==="basicConstraints"){var t=asn1$4.fromDer(e.value);t.value.length>0&&t.value[0].type===asn1$4.Type.BOOLEAN?e.cA=t.value[0].value.charCodeAt(0)!==0:e.cA=!1;var l=null;t.value.length>0&&t.value[0].type===asn1$4.Type.INTEGER?l=t.value[0].value:t.value.length>1&&(l=t.value[1].value),l!==null&&(e.pathLenConstraint=asn1$4.derToInteger(l))}else if(e.name==="extKeyUsage")for(var t=asn1$4.fromDer(e.value),h=0;h<t.value.length;++h){var d=asn1$4.derToOid(t.value[h].value);d in oids?e[oids[d]]=!0:e[d]=!0}else if(e.name==="nsCertType"){var t=asn1$4.fromDer(e.value),o=0;t.value.length>1&&(o=t.value.charCodeAt(1)),e.client=(o&128)===128,e.server=(o&64)===64,e.email=(o&32)===32,e.objsign=(o&16)===16,e.reserved=(o&8)===8,e.sslCA=(o&4)===4,e.emailCA=(o&2)===2,e.objCA=(o&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var g,t=asn1$4.fromDer(e.value),m=0;m<t.value.length;++m){g=t.value[m];var v={type:g.type,value:g.value};switch(e.altNames.push(v),g.type){case 1:case 2:case 6:break;case 7:v.ip=forge$b.util.bytesToIP(g.value);break;case 8:v.oid=asn1$4.derToOid(g.value);break}}}else if(e.name==="subjectKeyIdentifier"){var t=asn1$4.fromDer(e.value);e.subjectKeyIdentifier=forge$b.util.bytesToHex(t.value)}}return e};pki$2.certificationRequestFromAsn1=function(n,e){var t={},o=[];if(!asn1$4.validate(n,certificationRequestValidator,t,o)){var c=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw c.errors=o,c}var l=asn1$4.derToOid(t.publicKeyOid);if(l!==pki$2.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var h=pki$2.createCertificationRequest();if(h.version=t.csrVersion?t.csrVersion.charCodeAt(0):0,h.signatureOid=forge$b.asn1.derToOid(t.csrSignatureOid),h.signatureParameters=_readSignatureParameters(h.signatureOid,t.csrSignatureParams,!0),h.siginfo.algorithmOid=forge$b.asn1.derToOid(t.csrSignatureOid),h.siginfo.parameters=_readSignatureParameters(h.siginfo.algorithmOid,t.csrSignatureParams,!1),h.signature=t.csrSignature,h.certificationRequestInfo=t.certificationRequestInfo,e){h.md=_createSignatureDigest({signatureOid:h.signatureOid,type:"certification request"});var d=asn1$4.toDer(h.certificationRequestInfo);h.md.update(d.getBytes())}var g=forge$b.md.sha1.create();return h.subject.getField=function(m){return _getAttribute(h.subject,m)},h.subject.addField=function(m){_fillMissingFields([m]),h.subject.attributes.push(m)},h.subject.attributes=pki$2.RDNAttributesAsArray(t.certificationRequestInfoSubject,g),h.subject.hash=g.digest().toHex(),h.publicKey=pki$2.publicKeyFromAsn1(t.subjectPublicKeyInfo),h.getAttribute=function(m){return _getAttribute(h,m)},h.addAttribute=function(m){_fillMissingFields([m]),h.attributes.push(m)},h.attributes=pki$2.CRIAttributesAsArray(t.certificationRequestInfoAttributes||[]),h};pki$2.createCertificationRequest=function(){var n={};return n.version=0,n.signatureOid=null,n.signature=null,n.siginfo={},n.siginfo.algorithmOid=null,n.subject={},n.subject.getField=function(e){return _getAttribute(n.subject,e)},n.subject.addField=function(e){_fillMissingFields([e]),n.subject.attributes.push(e)},n.subject.attributes=[],n.subject.hash=null,n.publicKey=null,n.attributes=[],n.getAttribute=function(e){return _getAttribute(n,e)},n.addAttribute=function(e){_fillMissingFields([e]),n.attributes.push(e)},n.md=null,n.setSubject=function(e){_fillMissingFields(e),n.subject.attributes=e,n.subject.hash=null},n.setAttributes=function(e){_fillMissingFields(e),n.attributes=e},n.sign=function(e,t){n.md=t||forge$b.md.sha1.create();var o=oids[n.md.algorithm+"WithRSAEncryption"];if(!o){var c=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw c.algorithm=n.md.algorithm,c}n.signatureOid=n.siginfo.algorithmOid=o,n.certificationRequestInfo=pki$2.getCertificationRequestInfo(n);var l=asn1$4.toDer(n.certificationRequestInfo);n.md.update(l.getBytes()),n.signature=e.sign(n.md)},n.verify=function(){var e=!1,t=n.md;if(t===null){t=_createSignatureDigest({signatureOid:n.signatureOid,type:"certification request"});var o=n.certificationRequestInfo||pki$2.getCertificationRequestInfo(n),c=asn1$4.toDer(o);t.update(c.getBytes())}return t!==null&&(e=_verifySignature({certificate:n,md:t,signature:n.signature})),e},n};function _dnToAsn1(n){for(var e=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]),t,o,c=n.attributes,l=0;l<c.length;++l){t=c[l];var h=t.value,d=asn1$4.Type.PRINTABLESTRING;"valueTagClass"in t&&(d=t.valueTagClass,d===asn1$4.Type.UTF8&&(h=forge$b.util.encodeUtf8(h))),o=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SET,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(t.type).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,d,!1,h)])]),e.value.push(o)}return e}function _fillMissingFields(n){for(var e,t=0;t<n.length;++t){if(e=n[t],typeof e.name>"u"&&(e.type&&e.type in pki$2.oids?e.name=pki$2.oids[e.type]:e.shortName&&e.shortName in _shortNames&&(e.name=pki$2.oids[_shortNames[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in pki$2.oids)e.type=pki$2.oids[e.name];else{var o=new Error("Attribute type not specified.");throw o.attribute=e,o}if(typeof e.shortName>"u"&&e.name&&e.name in _shortNames&&(e.shortName=_shortNames[e.name]),e.type===oids.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=asn1$4.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var c=0;c<e.extensions.length;++c)e.value.push(pki$2.certificateExtensionToAsn1(_fillMissingExtensionFields(e.extensions[c])))}if(typeof e.value>"u"){var o=new Error("Attribute value not specified.");throw o.attribute=e,o}}}function _fillMissingExtensionFields(n,e){if(e=e||{},typeof n.name>"u"&&n.id&&n.id in pki$2.oids&&(n.name=pki$2.oids[n.id]),typeof n.id>"u")if(n.name&&n.name in pki$2.oids)n.id=pki$2.oids[n.name];else{var t=new Error("Extension ID not specified.");throw t.extension=n,t}if(typeof n.value<"u")return n;if(n.name==="keyUsage"){var o=0,c=0,l=0;n.digitalSignature&&(c|=128,o=7),n.nonRepudiation&&(c|=64,o=6),n.keyEncipherment&&(c|=32,o=5),n.dataEncipherment&&(c|=16,o=4),n.keyAgreement&&(c|=8,o=3),n.keyCertSign&&(c|=4,o=2),n.cRLSign&&(c|=2,o=1),n.encipherOnly&&(c|=1,o=0),n.decipherOnly&&(l|=128,o=7);var h=String.fromCharCode(o);l!==0?h+=String.fromCharCode(c)+String.fromCharCode(l):c!==0&&(h+=String.fromCharCode(c)),n.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,h)}else if(n.name==="basicConstraints")n.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]),n.cA&&n.value.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in n&&n.value.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(n.pathLenConstraint).getBytes()));else if(n.name==="extKeyUsage"){n.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);var d=n.value.value;for(var g in n)n[g]===!0&&(g in oids?d.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(oids[g]).getBytes())):g.indexOf(".")!==-1&&d.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(g).getBytes())))}else if(n.name==="nsCertType"){var o=0,c=0;n.client&&(c|=128,o=7),n.server&&(c|=64,o=6),n.email&&(c|=32,o=5),n.objsign&&(c|=16,o=4),n.reserved&&(c|=8,o=3),n.sslCA&&(c|=4,o=2),n.emailCA&&(c|=2,o=1),n.objCA&&(c|=1,o=0);var h=String.fromCharCode(o);c!==0&&(h+=String.fromCharCode(c)),n.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,h)}else if(n.name==="subjectAltName"||n.name==="issuerAltName"){n.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);for(var m,v=0;v<n.altNames.length;++v){m=n.altNames[v];var h=m.value;if(m.type===7&&m.ip){if(h=forge$b.util.bytesFromIP(m.ip),h===null){var t=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw t.extension=n,t}}else m.type===8&&(m.oid?h=asn1$4.oidToDer(asn1$4.oidToDer(m.oid)):h=asn1$4.oidToDer(h));n.value.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,m.type,!1,h))}}else if(n.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(n.comment)||n.comment.length<1||n.comment.length>128)throw new Error('Invalid "nsComment" content.');n.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.IA5STRING,!1,n.comment)}else if(n.name==="subjectKeyIdentifier"&&e.cert){var _=e.cert.generateSubjectKeyIdentifier();n.subjectKeyIdentifier=_.toHex(),n.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OCTETSTRING,!1,_.getBytes())}else if(n.name==="authorityKeyIdentifier"&&e.cert){n.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);var d=n.value.value;if(n.keyIdentifier){var p=n.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():n.keyIdentifier;d.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!1,p))}if(n.authorityCertIssuer){var a=[asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,4,!0,[_dnToAsn1(n.authorityCertIssuer===!0?e.cert.issuer:n.authorityCertIssuer)])];d.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,1,!0,a))}if(n.serialNumber){var u=forge$b.util.hexToBytes(n.serialNumber===!0?e.cert.serialNumber:n.serialNumber);d.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,2,!1,u))}}else if(n.name==="cRLDistributionPoints"){n.value=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);for(var d=n.value.value,y=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]),b=asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[]),m,v=0;v<n.altNames.length;++v){m=n.altNames[v];var h=m.value;if(m.type===7&&m.ip){if(h=forge$b.util.bytesFromIP(m.ip),h===null){var t=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw t.extension=n,t}}else m.type===8&&(m.oid?h=asn1$4.oidToDer(asn1$4.oidToDer(m.oid)):h=asn1$4.oidToDer(h));b.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,m.type,!1,h))}y.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[b])),d.push(y)}if(typeof n.value>"u"){var t=new Error("Extension value not specified.");throw t.extension=n,t}return n}function _signatureParametersToAsn1(n,e){switch(n){case oids["RSASSA-PSS"]:var t=[];return e.hash.algorithmOid!==void 0&&t.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(e.hash.algorithmOid).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&t.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,1,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(e.mgf.algorithmOid).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(e.mgf.hash.algorithmOid).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&t.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,2,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(e.saltLength).getBytes())])),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,t);default:return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,"")}}function _CRIAttributesToAsn1(n){var e=asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[]);if(n.attributes.length===0)return e;for(var t=n.attributes,o=0;o<t.length;++o){var c=t[o],l=c.value,h=asn1$4.Type.UTF8;"valueTagClass"in c&&(h=c.valueTagClass),h===asn1$4.Type.UTF8&&(l=forge$b.util.encodeUtf8(l));var d=!1;"valueConstructed"in c&&(d=c.valueConstructed);var g=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(c.type).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SET,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,h,d,l)])]);e.value.push(g)}return e}var jan_1_1950=new Date("1950-01-01T00:00:00Z"),jan_1_2050=new Date("2050-01-01T00:00:00Z");function _dateToAsn1(n){return n>=jan_1_1950&&n<jan_1_2050?asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.UTCTIME,!1,asn1$4.dateToUtcTime(n)):asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.GENERALIZEDTIME,!1,asn1$4.dateToGeneralizedTime(n))}pki$2.getTBSCertificate=function(n){var e=_dateToAsn1(n.validity.notBefore),t=_dateToAsn1(n.validity.notAfter),o=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,0,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(n.version).getBytes())]),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,forge$b.util.hexToBytes(n.serialNumber)),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(n.siginfo.algorithmOid).getBytes()),_signatureParametersToAsn1(n.siginfo.algorithmOid,n.siginfo.parameters)]),_dnToAsn1(n.issuer),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[e,t]),_dnToAsn1(n.subject),pki$2.publicKeyToAsn1(n.publicKey)]);return n.issuer.uniqueId&&o.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,1,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,String.fromCharCode(0)+n.issuer.uniqueId)])),n.subject.uniqueId&&o.value.push(asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,2,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,String.fromCharCode(0)+n.subject.uniqueId)])),n.extensions.length>0&&o.value.push(pki$2.certificateExtensionsToAsn1(n.extensions)),o};pki$2.getCertificationRequestInfo=function(n){var e=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(n.version).getBytes()),_dnToAsn1(n.subject),pki$2.publicKeyToAsn1(n.publicKey),_CRIAttributesToAsn1(n)]);return e};pki$2.distinguishedNameToAsn1=function(n){return _dnToAsn1(n)};pki$2.certificateToAsn1=function(n){var e=n.tbsCertificate||pki$2.getTBSCertificate(n);return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[e,asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(n.signatureOid).getBytes()),_signatureParametersToAsn1(n.signatureOid,n.signatureParameters)]),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,String.fromCharCode(0)+n.signature)])};pki$2.certificateExtensionsToAsn1=function(n){var e=asn1$4.create(asn1$4.Class.CONTEXT_SPECIFIC,3,!0,[]),t=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);e.value.push(t);for(var o=0;o<n.length;++o)t.value.push(pki$2.certificateExtensionToAsn1(n[o]));return e};pki$2.certificateExtensionToAsn1=function(n){var e=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);e.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(n.id).getBytes())),n.critical&&e.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BOOLEAN,!1,String.fromCharCode(255)));var t=n.value;return typeof n.value!="string"&&(t=asn1$4.toDer(t).getBytes()),e.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OCTETSTRING,!1,t)),e};pki$2.certificationRequestToAsn1=function(n){var e=n.certificationRequestInfo||pki$2.getCertificationRequestInfo(n);return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[e,asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(n.signatureOid).getBytes()),_signatureParametersToAsn1(n.signatureOid,n.signatureParameters)]),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,String.fromCharCode(0)+n.signature)])};pki$2.createCaStore=function(n){var e={certs:{}};e.getIssuer=function(h){var d=t(h.issuer);return d},e.addCertificate=function(h){if(typeof h=="string"&&(h=forge$b.pki.certificateFromPem(h)),o(h.subject),!e.hasCertificate(h))if(h.subject.hash in e.certs){var d=e.certs[h.subject.hash];forge$b.util.isArray(d)||(d=[d]),d.push(h),e.certs[h.subject.hash]=d}else e.certs[h.subject.hash]=h},e.hasCertificate=function(h){typeof h=="string"&&(h=forge$b.pki.certificateFromPem(h));var d=t(h.subject);if(!d)return!1;forge$b.util.isArray(d)||(d=[d]);for(var g=asn1$4.toDer(pki$2.certificateToAsn1(h)).getBytes(),m=0;m<d.length;++m){var v=asn1$4.toDer(pki$2.certificateToAsn1(d[m])).getBytes();if(g===v)return!0}return!1},e.listAllCertificates=function(){var h=[];for(var d in e.certs)if(e.certs.hasOwnProperty(d)){var g=e.certs[d];if(!forge$b.util.isArray(g))h.push(g);else for(var m=0;m<g.length;++m)h.push(g[m])}return h},e.removeCertificate=function(h){var d;if(typeof h=="string"&&(h=forge$b.pki.certificateFromPem(h)),o(h.subject),!e.hasCertificate(h))return null;var g=t(h.subject);if(!forge$b.util.isArray(g))return d=e.certs[h.subject.hash],delete e.certs[h.subject.hash],d;for(var m=asn1$4.toDer(pki$2.certificateToAsn1(h)).getBytes(),v=0;v<g.length;++v){var _=asn1$4.toDer(pki$2.certificateToAsn1(g[v])).getBytes();m===_&&(d=g[v],g.splice(v,1))}return g.length===0&&delete e.certs[h.subject.hash],d};function t(h){return o(h),e.certs[h.hash]||null}function o(h){if(!h.hash){var d=forge$b.md.sha1.create();h.attributes=pki$2.RDNAttributesAsArray(_dnToAsn1(h),d),h.hash=d.digest().toHex()}}if(n)for(var c=0;c<n.length;++c){var l=n[c];e.addCertificate(l)}return e};pki$2.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};pki$2.verifyCertificateChain=function(n,e,t){typeof t=="function"&&(t={verify:t}),t=t||{},e=e.slice(0);var o=e.slice(0),c=t.validityCheckDate;typeof c>"u"&&(c=new Date);var l=!0,h=null,d=0;do{var g=e.shift(),m=null,v=!1;if(c&&(c<g.validity.notBefore||c>g.validity.notAfter)&&(h={message:"Certificate is not valid yet or has expired.",error:pki$2.certificateError.certificate_expired,notBefore:g.validity.notBefore,notAfter:g.validity.notAfter,now:c}),h===null){if(m=e[0]||n.getIssuer(g),m===null&&g.isIssuer(g)&&(v=!0,m=g),m){var _=m;forge$b.util.isArray(_)||(_=[_]);for(var p=!1;!p&&_.length>0;){m=_.shift();try{p=m.verify(g)}catch{}}p||(h={message:"Certificate signature is invalid.",error:pki$2.certificateError.bad_certificate})}h===null&&(!m||v)&&!n.hasCertificate(g)&&(h={message:"Certificate is not trusted.",error:pki$2.certificateError.unknown_ca})}if(h===null&&m&&!g.isIssuer(m)&&(h={message:"Certificate issuer is invalid.",error:pki$2.certificateError.bad_certificate}),h===null)for(var a={keyUsage:!0,basicConstraints:!0},u=0;h===null&&u<g.extensions.length;++u){var y=g.extensions[u];y.critical&&!(y.name in a)&&(h={message:"Certificate has an unsupported critical extension.",error:pki$2.certificateError.unsupported_certificate})}if(h===null&&(!l||e.length===0&&(!m||v))){var b=g.getExtension("basicConstraints"),w=g.getExtension("keyUsage");if(w!==null&&(!w.keyCertSign||b===null)&&(h={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:pki$2.certificateError.bad_certificate}),h===null&&b!==null&&!b.cA&&(h={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:pki$2.certificateError.bad_certificate}),h===null&&w!==null&&"pathLenConstraint"in b){var T=d-1;T>b.pathLenConstraint&&(h={message:"Certificate basicConstraints pathLenConstraint violated.",error:pki$2.certificateError.bad_certificate})}}var B=h===null?!0:h.error,H=t.verify?t.verify(B,d,o):B;if(H===!0)h=null;else throw B===!0&&(h={message:"The application rejected the certificate.",error:pki$2.certificateError.bad_certificate}),(H||H===0)&&(typeof H=="object"&&!forge$b.util.isArray(H)?(H.message&&(h.message=H.message),H.error&&(h.error=H.error)):typeof H=="string"&&(h.error=H)),h;l=!1,++d}while(e.length>0);return!0};var forge$a=forge$D,asn1$3=forge$a.asn1,pki$1=forge$a.pki,p12=forge$a.pkcs12=forge$a.pkcs12||{},contentInfoValidator={name:"ContentInfo",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:asn1$3.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},pfxValidator={name:"PFX",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.INTEGER,constructed:!1,capture:"version"},contentInfoValidator,{name:"PFX.macData",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:asn1$3.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},safeBagValidator={name:"SafeBag",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:asn1$3.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},attributeValidator={name:"Attribute",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SET,constructed:!0,capture:"values"}]},certBagValidator={name:"CertBag",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:asn1$3.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function _getBagsByAttribute(n,e,t,o){for(var c=[],l=0;l<n.length;l++)for(var h=0;h<n[l].safeBags.length;h++){var d=n[l].safeBags[h];if(!(o!==void 0&&d.type!==o)){if(e===null){c.push(d);continue}d.attributes[e]!==void 0&&d.attributes[e].indexOf(t)>=0&&c.push(d)}}return c}p12.pkcs12FromAsn1=function(n,e,t){typeof e=="string"?(t=e,e=!0):e===void 0&&(e=!0);var o={},c=[];if(!asn1$3.validate(n,pfxValidator,o,c)){var l=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw l.errors=l,l}var h={version:o.version.charCodeAt(0),safeContents:[],getBags:function(b){var w={},T;return"localKeyId"in b?T=b.localKeyId:"localKeyIdHex"in b&&(T=forge$a.util.hexToBytes(b.localKeyIdHex)),T===void 0&&!("friendlyName"in b)&&"bagType"in b&&(w[b.bagType]=_getBagsByAttribute(h.safeContents,null,null,b.bagType)),T!==void 0&&(w.localKeyId=_getBagsByAttribute(h.safeContents,"localKeyId",T,b.bagType)),"friendlyName"in b&&(w.friendlyName=_getBagsByAttribute(h.safeContents,"friendlyName",b.friendlyName,b.bagType)),w},getBagsByFriendlyName:function(b,w){return _getBagsByAttribute(h.safeContents,"friendlyName",b,w)},getBagsByLocalKeyId:function(b,w){return _getBagsByAttribute(h.safeContents,"localKeyId",b,w)}};if(o.version.charCodeAt(0)!==3){var l=new Error("PKCS#12 PFX of version other than 3 not supported.");throw l.version=o.version.charCodeAt(0),l}if(asn1$3.derToOid(o.contentType)!==pki$1.oids.data){var l=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw l.oid=asn1$3.derToOid(o.contentType),l}var d=o.content.value[0];if(d.tagClass!==asn1$3.Class.UNIVERSAL||d.type!==asn1$3.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(d=_decodePkcs7Data(d),o.mac){var g=null,m=0,v=asn1$3.derToOid(o.macAlgorithm);switch(v){case pki$1.oids.sha1:g=forge$a.md.sha1.create(),m=20;break;case pki$1.oids.sha256:g=forge$a.md.sha256.create(),m=32;break;case pki$1.oids.sha384:g=forge$a.md.sha384.create(),m=48;break;case pki$1.oids.sha512:g=forge$a.md.sha512.create(),m=64;break;case pki$1.oids.md5:g=forge$a.md.md5.create(),m=16;break}if(g===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+v);var _=new forge$a.util.ByteBuffer(o.macSalt),p="macIterations"in o?parseInt(forge$a.util.bytesToHex(o.macIterations),16):1,a=p12.generateKey(t,_,3,p,m,g),u=forge$a.hmac.create();u.start(g,a),u.update(d.value);var y=u.getMac();if(y.getBytes()!==o.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return _decodeAuthenticatedSafe(h,d.value,e,t),h};function _decodePkcs7Data(n){if(n.composed||n.constructed){for(var e=forge$a.util.createBuffer(),t=0;t<n.value.length;++t)e.putBytes(n.value[t].value);n.composed=n.constructed=!1,n.value=e.getBytes()}return n}function _decodeAuthenticatedSafe(n,e,t,o){if(e=asn1$3.fromDer(e,t),e.tagClass!==asn1$3.Class.UNIVERSAL||e.type!==asn1$3.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var c=0;c<e.value.length;c++){var l=e.value[c],h={},d=[];if(!asn1$3.validate(l,contentInfoValidator,h,d)){var g=new Error("Cannot read ContentInfo.");throw g.errors=d,g}var m={encrypted:!1},v=null,_=h.content.value[0];switch(asn1$3.derToOid(h.contentType)){case pki$1.oids.data:if(_.tagClass!==asn1$3.Class.UNIVERSAL||_.type!==asn1$3.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");v=_decodePkcs7Data(_).value;break;case pki$1.oids.encryptedData:v=_decryptSafeContents(_,o),m.encrypted=!0;break;default:var g=new Error("Unsupported PKCS#12 contentType.");throw g.contentType=asn1$3.derToOid(h.contentType),g}m.safeBags=_decodeSafeContents(v,t,o),n.safeContents.push(m)}}function _decryptSafeContents(n,e){var t={},o=[];if(!asn1$3.validate(n,forge$a.pkcs7.asn1.encryptedDataValidator,t,o)){var c=new Error("Cannot read EncryptedContentInfo.");throw c.errors=o,c}var l=asn1$3.derToOid(t.contentType);if(l!==pki$1.oids.data){var c=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw c.oid=l,c}l=asn1$3.derToOid(t.encAlgorithm);var h=pki$1.pbe.getCipher(l,t.encParameter,e),d=_decodePkcs7Data(t.encryptedContentAsn1),g=forge$a.util.createBuffer(d.value);if(h.update(g),!h.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return h.output.getBytes()}function _decodeSafeContents(n,e,t){if(!e&&n.length===0)return[];if(n=asn1$3.fromDer(n,e),n.tagClass!==asn1$3.Class.UNIVERSAL||n.type!==asn1$3.Type.SEQUENCE||n.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var o=[],c=0;c<n.value.length;c++){var l=n.value[c],h={},d=[];if(!asn1$3.validate(l,safeBagValidator,h,d)){var g=new Error("Cannot read SafeBag.");throw g.errors=d,g}var m={type:asn1$3.derToOid(h.bagId),attributes:_decodeBagAttributes(h.bagAttributes)};o.push(m);var v,_,p=h.bagValue.value[0];switch(m.type){case pki$1.oids.pkcs8ShroudedKeyBag:if(p=pki$1.decryptPrivateKeyInfo(p,t),p===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case pki$1.oids.keyBag:try{m.key=pki$1.privateKeyFromAsn1(p)}catch{m.key=null,m.asn1=p}continue;case pki$1.oids.certBag:v=certBagValidator,_=function(){if(asn1$3.derToOid(h.certId)!==pki$1.oids.x509Certificate){var u=new Error("Unsupported certificate type, only X.509 supported.");throw u.oid=asn1$3.derToOid(h.certId),u}var y=asn1$3.fromDer(h.cert,e);try{m.cert=pki$1.certificateFromAsn1(y,!0)}catch{m.cert=null,m.asn1=y}};break;default:var g=new Error("Unsupported PKCS#12 SafeBag type.");throw g.oid=m.type,g}if(v!==void 0&&!asn1$3.validate(p,v,h,d)){var g=new Error("Cannot read PKCS#12 "+v.name);throw g.errors=d,g}_()}return o}function _decodeBagAttributes(n){var e={};if(n!==void 0)for(var t=0;t<n.length;++t){var o={},c=[];if(!asn1$3.validate(n[t],attributeValidator,o,c)){var l=new Error("Cannot read PKCS#12 BagAttribute.");throw l.errors=c,l}var h=asn1$3.derToOid(o.oid);if(pki$1.oids[h]!==void 0){e[pki$1.oids[h]]=[];for(var d=0;d<o.values.length;++d)e[pki$1.oids[h]].push(o.values[d].value)}}return e}p12.toPkcs12Asn1=function(n,e,t,o){o=o||{},o.saltSize=o.saltSize||8,o.count=o.count||2048,o.algorithm=o.algorithm||o.encAlgorithm||"aes128","useMac"in o||(o.useMac=!0),"localKeyId"in o||(o.localKeyId=null),"generateLocalKeyId"in o||(o.generateLocalKeyId=!0);var c=o.localKeyId,l;if(c!==null)c=forge$a.util.hexToBytes(c);else if(o.generateLocalKeyId)if(e){var h=forge$a.util.isArray(e)?e[0]:e;typeof h=="string"&&(h=pki$1.certificateFromPem(h));var d=forge$a.md.sha1.create();d.update(asn1$3.toDer(pki$1.certificateToAsn1(h)).getBytes()),c=d.digest().getBytes()}else c=forge$a.random.getBytes(20);var g=[];c!==null&&g.push(asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.localKeyId).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SET,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,c)])])),"friendlyName"in o&&g.push(asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.friendlyName).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SET,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.BMPSTRING,!1,o.friendlyName)])])),g.length>0&&(l=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SET,!0,g));var m=[],v=[];e!==null&&(forge$a.util.isArray(e)?v=e:v=[e]);for(var _=[],p=0;p<v.length;++p){e=v[p],typeof e=="string"&&(e=pki$1.certificateFromPem(e));var a=p===0?l:void 0,u=pki$1.certificateToAsn1(e),y=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.certBag).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.x509Certificate).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer(u).getBytes())])])]),a]);_.push(y)}if(_.length>0){var b=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,_),w=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.data).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer(b).getBytes())])]);m.push(w)}var T=null;if(n!==null){var B=pki$1.wrapRsaPrivateKey(pki$1.privateKeyToAsn1(n));t===null?T=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.keyBag).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[B]),l]):T=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.pkcs8ShroudedKeyBag).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[pki$1.encryptPrivateKeyInfo(B,t,o)]),l]);var H=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[T]),J=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.data).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer(H).getBytes())])]);m.push(J)}var W=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,m),fe;if(o.useMac){var d=forge$a.md.sha1.create(),re=new forge$a.util.ByteBuffer(forge$a.random.getBytes(o.saltSize)),se=o.count,n=p12.generateKey(t,re,3,se,20),ae=forge$a.hmac.create();ae.start(d,n),ae.update(asn1$3.toDer(W).getBytes());var ee=ae.getMac();fe=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.sha1).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.NULL,!1,"")]),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,ee.getBytes())]),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,re.getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.INTEGER,!1,asn1$3.integerToDer(se).getBytes())])}return asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.INTEGER,!1,asn1$3.integerToDer(3).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids.data).getBytes()),asn1$3.create(asn1$3.Class.CONTEXT_SPECIFIC,0,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,asn1$3.toDer(W).getBytes())])]),fe])};p12.generateKey=forge$a.pbe.generatePkcs12Key;var forge$9=forge$D,asn1$2=forge$9.asn1,pki=forge$9.pki=forge$9.pki||{};pki.pemToDer=function(n){var e=forge$9.pem.decode(n)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return forge$9.util.createBuffer(e.body)};pki.privateKeyFromPem=function(n){var e=forge$9.pem.decode(n)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var t=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw t.headerType=e.type,t}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var o=asn1$2.fromDer(e.body);return pki.privateKeyFromAsn1(o)};pki.privateKeyToPem=function(n,e){var t={type:"RSA PRIVATE KEY",body:asn1$2.toDer(pki.privateKeyToAsn1(n)).getBytes()};return forge$9.pem.encode(t,{maxline:e})};pki.privateKeyInfoToPem=function(n,e){var t={type:"PRIVATE KEY",body:asn1$2.toDer(n).getBytes()};return forge$9.pem.encode(t,{maxline:e})};var forge$8=forge$D,prf_TLS1=function(n,e,t,o){var c=forge$8.util.createBuffer(),l=n.length>>1,h=l+(n.length&1),d=n.substr(0,h),g=n.substr(l,h),m=forge$8.util.createBuffer(),v=forge$8.hmac.create();t=e+t;var _=Math.ceil(o/16),p=Math.ceil(o/20);v.start("MD5",d);var a=forge$8.util.createBuffer();m.putBytes(t);for(var u=0;u<_;++u)v.start(null,null),v.update(m.getBytes()),m.putBuffer(v.digest()),v.start(null,null),v.update(m.bytes()+t),a.putBuffer(v.digest());v.start("SHA1",g);var y=forge$8.util.createBuffer();m.clear(),m.putBytes(t);for(var u=0;u<p;++u)v.start(null,null),v.update(m.getBytes()),m.putBuffer(v.digest()),v.start(null,null),v.update(m.bytes()+t),y.putBuffer(v.digest());return c.putBytes(forge$8.util.xorBytes(a.getBytes(),y.getBytes(),o)),c},hmac_sha1=function(n,e,t){var o=forge$8.hmac.create();o.start("SHA1",n);var c=forge$8.util.createBuffer();return c.putInt32(e[0]),c.putInt32(e[1]),c.putByte(t.type),c.putByte(t.version.major),c.putByte(t.version.minor),c.putInt16(t.length),c.putBytes(t.fragment.bytes()),o.update(c.getBytes()),o.digest().getBytes()},deflate=function(n,e,t){var o=!1;try{var c=n.deflate(e.fragment.getBytes());e.fragment=forge$8.util.createBuffer(c),e.length=c.length,o=!0}catch{}return o},inflate=function(n,e,t){var o=!1;try{var c=n.inflate(e.fragment.getBytes());e.fragment=forge$8.util.createBuffer(c),e.length=c.length,o=!0}catch{}return o},readVector=function(n,e){var t=0;switch(e){case 1:t=n.getByte();break;case 2:t=n.getInt16();break;case 3:t=n.getInt24();break;case 4:t=n.getInt32();break}return forge$8.util.createBuffer(n.getBytes(t))},writeVector=function(n,e,t){n.putInt(t.length(),e<<3),n.putBuffer(t)},tls$1={};tls$1.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};tls$1.SupportedVersions=[tls$1.Versions.TLS_1_1,tls$1.Versions.TLS_1_0];tls$1.Version=tls$1.SupportedVersions[0];tls$1.MaxFragment=16384-1024;tls$1.ConnectionEnd={server:0,client:1};tls$1.PRFAlgorithm={tls_prf_sha256:0};tls$1.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};tls$1.CipherType={stream:0,block:1,aead:2};tls$1.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};tls$1.CompressionMethod={none:0,deflate:1};tls$1.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};tls$1.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};tls$1.Alert={};tls$1.Alert.Level={warning:1,fatal:2};tls$1.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};tls$1.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};tls$1.CipherSuites={};tls$1.getCipherSuite=function(n){var e=null;for(var t in tls$1.CipherSuites){var o=tls$1.CipherSuites[t];if(o.id[0]===n.charCodeAt(0)&&o.id[1]===n.charCodeAt(1)){e=o;break}}return e};tls$1.handleUnexpected=function(n,e){var t=!n.open&&n.entity===tls$1.ConnectionEnd.client;t||n.error(n,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unexpected_message}})};tls$1.handleHelloRequest=function(n,e,t){!n.handshaking&&n.handshakes>0&&(tls$1.queue(n,tls$1.createAlert(n,{level:tls$1.Alert.Level.warning,description:tls$1.Alert.Description.no_renegotiation})),tls$1.flush(n)),n.process()};tls$1.parseHelloMessage=function(n,e,t){var o=null,c=n.entity===tls$1.ConnectionEnd.client;if(t<38)n.error(n,{message:c?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});else{var l=e.fragment,h=l.length();if(o={version:{major:l.getByte(),minor:l.getByte()},random:forge$8.util.createBuffer(l.getBytes(32)),session_id:readVector(l,1),extensions:[]},c?(o.cipher_suite=l.getBytes(2),o.compression_method=l.getByte()):(o.cipher_suites=readVector(l,2),o.compression_methods=readVector(l,1)),h=t-(h-l.length()),h>0){for(var d=readVector(l,2);d.length()>0;)o.extensions.push({type:[d.getByte(),d.getByte()],data:readVector(d,2)});if(!c)for(var g=0;g<o.extensions.length;++g){var m=o.extensions[g];if(m.type[0]===0&&m.type[1]===0)for(var v=readVector(m.data,2);v.length()>0;){var _=v.getByte();if(_!==0)break;n.session.extensions.server_name.serverNameList.push(readVector(v,2).getBytes())}}}if(n.session.version&&(o.version.major!==n.session.version.major||o.version.minor!==n.session.version.minor))return n.error(n,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.protocol_version}});if(c)n.session.cipherSuite=tls$1.getCipherSuite(o.cipher_suite);else for(var p=forge$8.util.createBuffer(o.cipher_suites.bytes());p.length()>0&&(n.session.cipherSuite=tls$1.getCipherSuite(p.getBytes(2)),n.session.cipherSuite===null););if(n.session.cipherSuite===null)return n.error(n,{message:"No cipher suites in common.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.handshake_failure},cipherSuite:forge$8.util.bytesToHex(o.cipher_suite)});c?n.session.compressionMethod=o.compression_method:n.session.compressionMethod=tls$1.CompressionMethod.none}return o};tls$1.createSecurityParameters=function(n,e){var t=n.entity===tls$1.ConnectionEnd.client,o=e.random.bytes(),c=t?n.session.sp.client_random:o,l=t?o:tls$1.createRandom().getBytes();n.session.sp={entity:n.entity,prf_algorithm:tls$1.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:n.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:c,server_random:l}};tls$1.handleServerHello=function(n,e,t){var o=tls$1.parseHelloMessage(n,e,t);if(!n.fail){if(o.version.minor<=n.version.minor)n.version.minor=o.version.minor;else return n.error(n,{message:"Incompatible TLS version.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.protocol_version}});n.session.version=n.version;var c=o.session_id.bytes();c.length>0&&c===n.session.id?(n.expect=SCC,n.session.resuming=!0,n.session.sp.server_random=o.random.bytes()):(n.expect=SCE,n.session.resuming=!1,tls$1.createSecurityParameters(n,o)),n.session.id=c,n.process()}};tls$1.handleClientHello=function(n,e,t){var o=tls$1.parseHelloMessage(n,e,t);if(!n.fail){var c=o.session_id.bytes(),l=null;if(n.sessionCache&&(l=n.sessionCache.getSession(c),l===null?c="":(l.version.major!==o.version.major||l.version.minor>o.version.minor)&&(l=null,c="")),c.length===0&&(c=forge$8.random.getBytes(32)),n.session.id=c,n.session.clientHelloVersion=o.version,n.session.sp={},l)n.version=n.session.version=l.version,n.session.sp=l.sp;else{for(var h,d=1;d<tls$1.SupportedVersions.length&&(h=tls$1.SupportedVersions[d],!(h.minor<=o.version.minor));++d);n.version={major:h.major,minor:h.minor},n.session.version=n.version}l!==null?(n.expect=CCC,n.session.resuming=!0,n.session.sp.client_random=o.random.bytes()):(n.expect=n.verifyClient!==!1?CCE:CKE,n.session.resuming=!1,tls$1.createSecurityParameters(n,o)),n.open=!0,tls$1.queue(n,tls$1.createRecord(n,{type:tls$1.ContentType.handshake,data:tls$1.createServerHello(n)})),n.session.resuming?(tls$1.queue(n,tls$1.createRecord(n,{type:tls$1.ContentType.change_cipher_spec,data:tls$1.createChangeCipherSpec()})),n.state.pending=tls$1.createConnectionState(n),n.state.current.write=n.state.pending.write,tls$1.queue(n,tls$1.createRecord(n,{type:tls$1.ContentType.handshake,data:tls$1.createFinished(n)}))):(tls$1.queue(n,tls$1.createRecord(n,{type:tls$1.ContentType.handshake,data:tls$1.createCertificate(n)})),n.fail||(tls$1.queue(n,tls$1.createRecord(n,{type:tls$1.ContentType.handshake,data:tls$1.createServerKeyExchange(n)})),n.verifyClient!==!1&&tls$1.queue(n,tls$1.createRecord(n,{type:tls$1.ContentType.handshake,data:tls$1.createCertificateRequest(n)})),tls$1.queue(n,tls$1.createRecord(n,{type:tls$1.ContentType.handshake,data:tls$1.createServerHelloDone(n)})))),tls$1.flush(n),n.process()}};tls$1.handleCertificate=function(n,e,t){if(t<3)return n.error(n,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var o=e.fragment,c={certificate_list:readVector(o,3)},l,h,d=[];try{for(;c.certificate_list.length()>0;)l=readVector(c.certificate_list,3),h=forge$8.asn1.fromDer(l),l=forge$8.pki.certificateFromAsn1(h,!0),d.push(l)}catch(m){return n.error(n,{message:"Could not parse certificate list.",cause:m,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_certificate}})}var g=n.entity===tls$1.ConnectionEnd.client;(g||n.verifyClient===!0)&&d.length===0?n.error(n,{message:g?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}}):d.length===0?n.expect=g?SKE:CKE:(g?n.session.serverCertificate=d[0]:n.session.clientCertificate=d[0],tls$1.verifyCertificateChain(n,d)&&(n.expect=g?SKE:CKE)),n.process()};tls$1.handleServerKeyExchange=function(n,e,t){if(t>0)return n.error(n,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unsupported_certificate}});n.expect=SCR,n.process()};tls$1.handleClientKeyExchange=function(n,e,t){if(t<48)return n.error(n,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unsupported_certificate}});var o=e.fragment,c={enc_pre_master_secret:readVector(o,2).getBytes()},l=null;if(n.getPrivateKey)try{l=n.getPrivateKey(n,n.session.serverCertificate),l=forge$8.pki.privateKeyFromPem(l)}catch(g){n.error(n,{message:"Could not get private key.",cause:g,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}})}if(l===null)return n.error(n,{message:"No private key set.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}});try{var h=n.session.sp;h.pre_master_secret=l.decrypt(c.enc_pre_master_secret);var d=n.session.clientHelloVersion;if(d.major!==h.pre_master_secret.charCodeAt(0)||d.minor!==h.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{h.pre_master_secret=forge$8.random.getBytes(48)}n.expect=CCC,n.session.clientCertificate!==null&&(n.expect=CCV),n.process()};tls$1.handleCertificateRequest=function(n,e,t){if(t<3)return n.error(n,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var o=e.fragment,c={certificate_types:readVector(o,1),certificate_authorities:readVector(o,2)};n.session.certificateRequest=c,n.expect=SHD,n.process()};tls$1.handleCertificateVerify=function(n,e,t){if(t<2)return n.error(n,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var o=e.fragment;o.read-=4;var c=o.bytes();o.read+=4;var l={signature:readVector(o,2).getBytes()},h=forge$8.util.createBuffer();h.putBuffer(n.session.md5.digest()),h.putBuffer(n.session.sha1.digest()),h=h.getBytes();try{var d=n.session.clientCertificate;if(!d.publicKey.verify(h,l.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");n.session.md5.update(c),n.session.sha1.update(c)}catch{return n.error(n,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.handshake_failure}})}n.expect=CCC,n.process()};tls$1.handleServerHelloDone=function(n,e,t){if(t>0)return n.error(n,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.record_overflow}});if(n.serverCertificate===null){var o={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.insufficient_security}},c=0,l=n.verify(n,o.alert.description,c,[]);if(l!==!0)return(l||l===0)&&(typeof l=="object"&&!forge$8.util.isArray(l)?(l.message&&(o.message=l.message),l.alert&&(o.alert.description=l.alert)):typeof l=="number"&&(o.alert.description=l)),n.error(n,o)}n.session.certificateRequest!==null&&(e=tls$1.createRecord(n,{type:tls$1.ContentType.handshake,data:tls$1.createCertificate(n)}),tls$1.queue(n,e)),e=tls$1.createRecord(n,{type:tls$1.ContentType.handshake,data:tls$1.createClientKeyExchange(n)}),tls$1.queue(n,e),n.expect=SER;var h=function(d,g){d.session.certificateRequest!==null&&d.session.clientCertificate!==null&&tls$1.queue(d,tls$1.createRecord(d,{type:tls$1.ContentType.handshake,data:tls$1.createCertificateVerify(d,g)})),tls$1.queue(d,tls$1.createRecord(d,{type:tls$1.ContentType.change_cipher_spec,data:tls$1.createChangeCipherSpec()})),d.state.pending=tls$1.createConnectionState(d),d.state.current.write=d.state.pending.write,tls$1.queue(d,tls$1.createRecord(d,{type:tls$1.ContentType.handshake,data:tls$1.createFinished(d)})),d.expect=SCC,tls$1.flush(d),d.process()};if(n.session.certificateRequest===null||n.session.clientCertificate===null)return h(n,null);tls$1.getClientSignature(n,h)};tls$1.handleChangeCipherSpec=function(n,e){if(e.fragment.getByte()!==1)return n.error(n,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.illegal_parameter}});var t=n.entity===tls$1.ConnectionEnd.client;(n.session.resuming&&t||!n.session.resuming&&!t)&&(n.state.pending=tls$1.createConnectionState(n)),n.state.current.read=n.state.pending.read,(!n.session.resuming&&t||n.session.resuming&&!t)&&(n.state.pending=null),n.expect=t?SFI:CFI,n.process()};tls$1.handleFinished=function(n,e,t){var o=e.fragment;o.read-=4;var c=o.bytes();o.read+=4;var l=e.fragment.getBytes();o=forge$8.util.createBuffer(),o.putBuffer(n.session.md5.digest()),o.putBuffer(n.session.sha1.digest());var h=n.entity===tls$1.ConnectionEnd.client,d=h?"server finished":"client finished",g=n.session.sp,m=12,v=prf_TLS1;if(o=v(g.master_secret,d,o.getBytes(),m),o.getBytes()!==l)return n.error(n,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.decrypt_error}});n.session.md5.update(c),n.session.sha1.update(c),(n.session.resuming&&h||!n.session.resuming&&!h)&&(tls$1.queue(n,tls$1.createRecord(n,{type:tls$1.ContentType.change_cipher_spec,data:tls$1.createChangeCipherSpec()})),n.state.current.write=n.state.pending.write,n.state.pending=null,tls$1.queue(n,tls$1.createRecord(n,{type:tls$1.ContentType.handshake,data:tls$1.createFinished(n)}))),n.expect=h?SAD:CAD,n.handshaking=!1,++n.handshakes,n.peerCertificate=h?n.session.serverCertificate:n.session.clientCertificate,tls$1.flush(n),n.isConnected=!0,n.connected(n),n.process()};tls$1.handleAlert=function(n,e){var t=e.fragment,o={level:t.getByte(),description:t.getByte()},c;switch(o.description){case tls$1.Alert.Description.close_notify:c="Connection closed.";break;case tls$1.Alert.Description.unexpected_message:c="Unexpected message.";break;case tls$1.Alert.Description.bad_record_mac:c="Bad record MAC.";break;case tls$1.Alert.Description.decryption_failed:c="Decryption failed.";break;case tls$1.Alert.Description.record_overflow:c="Record overflow.";break;case tls$1.Alert.Description.decompression_failure:c="Decompression failed.";break;case tls$1.Alert.Description.handshake_failure:c="Handshake failure.";break;case tls$1.Alert.Description.bad_certificate:c="Bad certificate.";break;case tls$1.Alert.Description.unsupported_certificate:c="Unsupported certificate.";break;case tls$1.Alert.Description.certificate_revoked:c="Certificate revoked.";break;case tls$1.Alert.Description.certificate_expired:c="Certificate expired.";break;case tls$1.Alert.Description.certificate_unknown:c="Certificate unknown.";break;case tls$1.Alert.Description.illegal_parameter:c="Illegal parameter.";break;case tls$1.Alert.Description.unknown_ca:c="Unknown certificate authority.";break;case tls$1.Alert.Description.access_denied:c="Access denied.";break;case tls$1.Alert.Description.decode_error:c="Decode error.";break;case tls$1.Alert.Description.decrypt_error:c="Decrypt error.";break;case tls$1.Alert.Description.export_restriction:c="Export restriction.";break;case tls$1.Alert.Description.protocol_version:c="Unsupported protocol version.";break;case tls$1.Alert.Description.insufficient_security:c="Insufficient security.";break;case tls$1.Alert.Description.internal_error:c="Internal error.";break;case tls$1.Alert.Description.user_canceled:c="User canceled.";break;case tls$1.Alert.Description.no_renegotiation:c="Renegotiation not supported.";break;default:c="Unknown error.";break}if(o.description===tls$1.Alert.Description.close_notify)return n.close();n.error(n,{message:c,send:!1,origin:n.entity===tls$1.ConnectionEnd.client?"server":"client",alert:o}),n.process()};tls$1.handleHandshake=function(n,e){var t=e.fragment,o=t.getByte(),c=t.getInt24();if(c>t.length())return n.fragmented=e,e.fragment=forge$8.util.createBuffer(),t.read-=4,n.process();n.fragmented=null,t.read-=4;var l=t.bytes(c+4);t.read+=4,o in hsTable[n.entity][n.expect]?(n.entity===tls$1.ConnectionEnd.server&&!n.open&&!n.fail&&(n.handshaking=!0,n.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:forge$8.md.md5.create(),sha1:forge$8.md.sha1.create()}),o!==tls$1.HandshakeType.hello_request&&o!==tls$1.HandshakeType.certificate_verify&&o!==tls$1.HandshakeType.finished&&(n.session.md5.update(l),n.session.sha1.update(l)),hsTable[n.entity][n.expect][o](n,e,c)):tls$1.handleUnexpected(n,e)};tls$1.handleApplicationData=function(n,e){n.data.putBuffer(e.fragment),n.dataReady(n),n.process()};tls$1.handleHeartbeat=function(n,e){var t=e.fragment,o=t.getByte(),c=t.getInt16(),l=t.getBytes(c);if(o===tls$1.HeartbeatMessageType.heartbeat_request){if(n.handshaking||c>l.length)return n.process();tls$1.queue(n,tls$1.createRecord(n,{type:tls$1.ContentType.heartbeat,data:tls$1.createHeartbeat(tls$1.HeartbeatMessageType.heartbeat_response,l)})),tls$1.flush(n)}else if(o===tls$1.HeartbeatMessageType.heartbeat_response){if(l!==n.expectedHeartbeatPayload)return n.process();n.heartbeatReceived&&n.heartbeatReceived(n,forge$8.util.createBuffer(l))}n.process()};var SHE=0,SCE=1,SKE=2,SCR=3,SHD=4,SCC=5,SFI=6,SAD=7,SER=8,CHE=0,CCE=1,CKE=2,CCV=3,CCC=4,CFI=5,CAD=6,__=tls$1.handleUnexpected,R0=tls$1.handleChangeCipherSpec,R1=tls$1.handleAlert,R2=tls$1.handleHandshake,R3=tls$1.handleApplicationData,R4=tls$1.handleHeartbeat,ctTable=[];ctTable[tls$1.ConnectionEnd.client]=[[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[R0,R1,__,__,R4],[__,R1,R2,__,R4],[__,R1,R2,R3,R4],[__,R1,R2,__,R4]];ctTable[tls$1.ConnectionEnd.server]=[[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[__,R1,R2,__,R4],[R0,R1,__,__,R4],[__,R1,R2,__,R4],[__,R1,R2,R3,R4],[__,R1,R2,__,R4]];var H0=tls$1.handleHelloRequest,H1=tls$1.handleServerHello,H2=tls$1.handleCertificate,H3=tls$1.handleServerKeyExchange,H4=tls$1.handleCertificateRequest,H5=tls$1.handleServerHelloDone,H6=tls$1.handleFinished,hsTable=[];hsTable[tls$1.ConnectionEnd.client]=[[__,__,H1,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,H2,H3,H4,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,H3,H4,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,H4,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,H5,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H6],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[H0,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__]];var H7=tls$1.handleClientHello,H8=tls$1.handleClientKeyExchange,H9=tls$1.handleCertificateVerify;hsTable[tls$1.ConnectionEnd.server]=[[__,H7,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,H2,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H8,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H9,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,H6],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__],[__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__,__]];tls$1.generateKeys=function(n,e){var t=prf_TLS1,o=e.client_random+e.server_random;n.session.resuming||(e.master_secret=t(e.pre_master_secret,"master secret",o,48).bytes(),e.pre_master_secret=null),o=e.server_random+e.client_random;var c=2*e.mac_key_length+2*e.enc_key_length,l=n.version.major===tls$1.Versions.TLS_1_0.major&&n.version.minor===tls$1.Versions.TLS_1_0.minor;l&&(c+=2*e.fixed_iv_length);var h=t(e.master_secret,"key expansion",o,c),d={client_write_MAC_key:h.getBytes(e.mac_key_length),server_write_MAC_key:h.getBytes(e.mac_key_length),client_write_key:h.getBytes(e.enc_key_length),server_write_key:h.getBytes(e.enc_key_length)};return l&&(d.client_write_IV=h.getBytes(e.fixed_iv_length),d.server_write_IV=h.getBytes(e.fixed_iv_length)),d};tls$1.createConnectionState=function(n){var e=n.entity===tls$1.ConnectionEnd.client,t=function(){var l={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(h){return!0},compressionState:null,compressFunction:function(h){return!0},updateSequenceNumber:function(){l.sequenceNumber[1]===4294967295?(l.sequenceNumber[1]=0,++l.sequenceNumber[0]):++l.sequenceNumber[1]}};return l},o={read:t(),write:t()};if(o.read.update=function(l,h){return o.read.cipherFunction(h,o.read)?o.read.compressFunction(l,h,o.read)||l.error(l,{message:"Could not decompress record.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.decompression_failure}}):l.error(l,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_record_mac}}),!l.fail},o.write.update=function(l,h){return o.write.compressFunction(l,h,o.write)?o.write.cipherFunction(h,o.write)||l.error(l,{message:"Could not encrypt record.",send:!1,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}}):l.error(l,{message:"Could not compress record.",send:!1,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}}),!l.fail},n.session){var c=n.session.sp;switch(n.session.cipherSuite.initSecurityParameters(c),c.keys=tls$1.generateKeys(n,c),o.read.macKey=e?c.keys.server_write_MAC_key:c.keys.client_write_MAC_key,o.write.macKey=e?c.keys.client_write_MAC_key:c.keys.server_write_MAC_key,n.session.cipherSuite.initConnectionState(o,n,c),c.compression_algorithm){case tls$1.CompressionMethod.none:break;case tls$1.CompressionMethod.deflate:o.read.compressFunction=inflate,o.write.compressFunction=deflate;break;default:throw new Error("Unsupported compression algorithm.")}}return o};tls$1.createRandom=function(){var n=new Date,e=+n+n.getTimezoneOffset()*6e4,t=forge$8.util.createBuffer();return t.putInt32(e),t.putBytes(forge$8.random.getBytes(28)),t};tls$1.createRecord=function(n,e){if(!e.data)return null;var t={type:e.type,version:{major:n.version.major,minor:n.version.minor},length:e.data.length(),fragment:e.data};return t};tls$1.createAlert=function(n,e){var t=forge$8.util.createBuffer();return t.putByte(e.level),t.putByte(e.description),tls$1.createRecord(n,{type:tls$1.ContentType.alert,data:t})};tls$1.createClientHello=function(n){n.session.clientHelloVersion={major:n.version.major,minor:n.version.minor};for(var e=forge$8.util.createBuffer(),t=0;t<n.cipherSuites.length;++t){var o=n.cipherSuites[t];e.putByte(o.id[0]),e.putByte(o.id[1])}var c=e.length(),l=forge$8.util.createBuffer();l.putByte(tls$1.CompressionMethod.none);var h=l.length(),d=forge$8.util.createBuffer();if(n.virtualHost){var g=forge$8.util.createBuffer();g.putByte(0),g.putByte(0);var m=forge$8.util.createBuffer();m.putByte(0),writeVector(m,2,forge$8.util.createBuffer(n.virtualHost));var v=forge$8.util.createBuffer();writeVector(v,2,m),writeVector(g,2,v),d.putBuffer(g)}var _=d.length();_>0&&(_+=2);var p=n.session.id,a=p.length+1+2+4+28+2+c+1+h+_,u=forge$8.util.createBuffer();return u.putByte(tls$1.HandshakeType.client_hello),u.putInt24(a),u.putByte(n.version.major),u.putByte(n.version.minor),u.putBytes(n.session.sp.client_random),writeVector(u,1,forge$8.util.createBuffer(p)),writeVector(u,2,e),writeVector(u,1,l),_>0&&writeVector(u,2,d),u};tls$1.createServerHello=function(n){var e=n.session.id,t=e.length+1+2+4+28+2+1,o=forge$8.util.createBuffer();return o.putByte(tls$1.HandshakeType.server_hello),o.putInt24(t),o.putByte(n.version.major),o.putByte(n.version.minor),o.putBytes(n.session.sp.server_random),writeVector(o,1,forge$8.util.createBuffer(e)),o.putByte(n.session.cipherSuite.id[0]),o.putByte(n.session.cipherSuite.id[1]),o.putByte(n.session.compressionMethod),o};tls$1.createCertificate=function(n){var e=n.entity===tls$1.ConnectionEnd.client,t=null;if(n.getCertificate){var o;e?o=n.session.certificateRequest:o=n.session.extensions.server_name.serverNameList,t=n.getCertificate(n,o)}var c=forge$8.util.createBuffer();if(t!==null)try{forge$8.util.isArray(t)||(t=[t]);for(var l=null,h=0;h<t.length;++h){var d=forge$8.pem.decode(t[h])[0];if(d.type!=="CERTIFICATE"&&d.type!=="X509 CERTIFICATE"&&d.type!=="TRUSTED CERTIFICATE"){var g=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw g.headerType=d.type,g}if(d.procType&&d.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var m=forge$8.util.createBuffer(d.body);l===null&&(l=forge$8.asn1.fromDer(m.bytes(),!1));var v=forge$8.util.createBuffer();writeVector(v,3,m),c.putBuffer(v)}t=forge$8.pki.certificateFromAsn1(l),e?n.session.clientCertificate=t:n.session.serverCertificate=t}catch(a){return n.error(n,{message:"Could not send certificate list.",cause:a,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_certificate}})}var _=3+c.length(),p=forge$8.util.createBuffer();return p.putByte(tls$1.HandshakeType.certificate),p.putInt24(_),writeVector(p,3,c),p};tls$1.createClientKeyExchange=function(n){var e=forge$8.util.createBuffer();e.putByte(n.session.clientHelloVersion.major),e.putByte(n.session.clientHelloVersion.minor),e.putBytes(forge$8.random.getBytes(46));var t=n.session.sp;t.pre_master_secret=e.getBytes();var o=n.session.serverCertificate.publicKey;e=o.encrypt(t.pre_master_secret);var c=e.length+2,l=forge$8.util.createBuffer();return l.putByte(tls$1.HandshakeType.client_key_exchange),l.putInt24(c),l.putInt16(e.length),l.putBytes(e),l};tls$1.createServerKeyExchange=function(n){var e=forge$8.util.createBuffer();return e};tls$1.getClientSignature=function(n,e){var t=forge$8.util.createBuffer();t.putBuffer(n.session.md5.digest()),t.putBuffer(n.session.sha1.digest()),t=t.getBytes(),n.getSignature=n.getSignature||function(o,c,l){var h=null;if(o.getPrivateKey)try{h=o.getPrivateKey(o,o.session.clientCertificate),h=forge$8.pki.privateKeyFromPem(h)}catch(d){o.error(o,{message:"Could not get private key.",cause:d,send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}})}h===null?o.error(o,{message:"No private key set.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.internal_error}}):c=h.sign(c,null),l(o,c)},n.getSignature(n,t,e)};tls$1.createCertificateVerify=function(n,e){var t=e.length+2,o=forge$8.util.createBuffer();return o.putByte(tls$1.HandshakeType.certificate_verify),o.putInt24(t),o.putInt16(e.length),o.putBytes(e),o};tls$1.createCertificateRequest=function(n){var e=forge$8.util.createBuffer();e.putByte(1);var t=forge$8.util.createBuffer();for(var o in n.caStore.certs){var c=n.caStore.certs[o],l=forge$8.pki.distinguishedNameToAsn1(c.subject),h=forge$8.asn1.toDer(l);t.putInt16(h.length()),t.putBuffer(h)}var d=1+e.length()+2+t.length(),g=forge$8.util.createBuffer();return g.putByte(tls$1.HandshakeType.certificate_request),g.putInt24(d),writeVector(g,1,e),writeVector(g,2,t),g};tls$1.createServerHelloDone=function(n){var e=forge$8.util.createBuffer();return e.putByte(tls$1.HandshakeType.server_hello_done),e.putInt24(0),e};tls$1.createChangeCipherSpec=function(){var n=forge$8.util.createBuffer();return n.putByte(1),n};tls$1.createFinished=function(n){var e=forge$8.util.createBuffer();e.putBuffer(n.session.md5.digest()),e.putBuffer(n.session.sha1.digest());var t=n.entity===tls$1.ConnectionEnd.client,o=n.session.sp,c=12,l=prf_TLS1,h=t?"client finished":"server finished";e=l(o.master_secret,h,e.getBytes(),c);var d=forge$8.util.createBuffer();return d.putByte(tls$1.HandshakeType.finished),d.putInt24(e.length()),d.putBuffer(e),d};tls$1.createHeartbeat=function(n,e,t){typeof t>"u"&&(t=e.length);var o=forge$8.util.createBuffer();o.putByte(n),o.putInt16(t),o.putBytes(e);var c=o.length(),l=Math.max(16,c-t-3);return o.putBytes(forge$8.random.getBytes(l)),o};tls$1.queue=function(n,e){if(e&&!(e.fragment.length()===0&&(e.type===tls$1.ContentType.handshake||e.type===tls$1.ContentType.alert||e.type===tls$1.ContentType.change_cipher_spec))){if(e.type===tls$1.ContentType.handshake){var t=e.fragment.bytes();n.session.md5.update(t),n.session.sha1.update(t),t=null}var o;if(e.fragment.length()<=tls$1.MaxFragment)o=[e];else{o=[];for(var c=e.fragment.bytes();c.length>tls$1.MaxFragment;)o.push(tls$1.createRecord(n,{type:e.type,data:forge$8.util.createBuffer(c.slice(0,tls$1.MaxFragment))})),c=c.slice(tls$1.MaxFragment);c.length>0&&o.push(tls$1.createRecord(n,{type:e.type,data:forge$8.util.createBuffer(c)}))}for(var l=0;l<o.length&&!n.fail;++l){var h=o[l],d=n.state.current.write;d.update(n,h)&&n.records.push(h)}}};tls$1.flush=function(n){for(var e=0;e<n.records.length;++e){var t=n.records[e];n.tlsData.putByte(t.type),n.tlsData.putByte(t.version.major),n.tlsData.putByte(t.version.minor),n.tlsData.putInt16(t.fragment.length()),n.tlsData.putBuffer(n.records[e].fragment)}return n.records=[],n.tlsDataReady(n)};var _certErrorToAlertDesc=function(n){switch(n){case!0:return!0;case forge$8.pki.certificateError.bad_certificate:return tls$1.Alert.Description.bad_certificate;case forge$8.pki.certificateError.unsupported_certificate:return tls$1.Alert.Description.unsupported_certificate;case forge$8.pki.certificateError.certificate_revoked:return tls$1.Alert.Description.certificate_revoked;case forge$8.pki.certificateError.certificate_expired:return tls$1.Alert.Description.certificate_expired;case forge$8.pki.certificateError.certificate_unknown:return tls$1.Alert.Description.certificate_unknown;case forge$8.pki.certificateError.unknown_ca:return tls$1.Alert.Description.unknown_ca;default:return tls$1.Alert.Description.bad_certificate}},_alertDescToCertError=function(n){switch(n){case!0:return!0;case tls$1.Alert.Description.bad_certificate:return forge$8.pki.certificateError.bad_certificate;case tls$1.Alert.Description.unsupported_certificate:return forge$8.pki.certificateError.unsupported_certificate;case tls$1.Alert.Description.certificate_revoked:return forge$8.pki.certificateError.certificate_revoked;case tls$1.Alert.Description.certificate_expired:return forge$8.pki.certificateError.certificate_expired;case tls$1.Alert.Description.certificate_unknown:return forge$8.pki.certificateError.certificate_unknown;case tls$1.Alert.Description.unknown_ca:return forge$8.pki.certificateError.unknown_ca;default:return forge$8.pki.certificateError.bad_certificate}};tls$1.verifyCertificateChain=function(n,e){try{var t={};for(var o in n.verifyOptions)t[o]=n.verifyOptions[o];t.verify=function(l,h,d){var g=_certErrorToAlertDesc(l),m=n.verify(n,l,h,d);if(m!==!0){if(typeof m=="object"&&!forge$8.util.isArray(m)){var v=new Error("The application rejected the certificate.");throw v.send=!0,v.alert={level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.bad_certificate},m.message&&(v.message=m.message),m.alert&&(v.alert.description=m.alert),v}m!==l&&(m=_alertDescToCertError(m))}return m},forge$8.pki.verifyCertificateChain(n.caStore,e,t)}catch(l){var c=l;(typeof c!="object"||forge$8.util.isArray(c))&&(c={send:!0,alert:{level:tls$1.Alert.Level.fatal,description:_certErrorToAlertDesc(l)}}),"send"in c||(c.send=!0),"alert"in c||(c.alert={level:tls$1.Alert.Level.fatal,description:_certErrorToAlertDesc(c.error)}),n.error(n,c)}return!n.fail};tls$1.createSessionCache=function(n,e){var t=null;if(n&&n.getSession&&n.setSession&&n.order)t=n;else{t={},t.cache=n||{},t.capacity=Math.max(e||100,1),t.order=[];for(var o in n)t.order.length<=e?t.order.push(o):delete n[o];t.getSession=function(c){var l=null,h=null;if(c?h=forge$8.util.bytesToHex(c):t.order.length>0&&(h=t.order[0]),h!==null&&h in t.cache){l=t.cache[h],delete t.cache[h];for(var d in t.order)if(t.order[d]===h){t.order.splice(d,1);break}}return l},t.setSession=function(c,l){if(t.order.length===t.capacity){var h=t.order.shift();delete t.cache[h]}var h=forge$8.util.bytesToHex(c);t.order.push(h),t.cache[h]=l}}return t};tls$1.createConnection=function(n){var e=null;n.caStore?forge$8.util.isArray(n.caStore)?e=forge$8.pki.createCaStore(n.caStore):e=n.caStore:e=forge$8.pki.createCaStore();var t=n.cipherSuites||null;if(t===null){t=[];for(var o in tls$1.CipherSuites)t.push(tls$1.CipherSuites[o])}var c=n.server?tls$1.ConnectionEnd.server:tls$1.ConnectionEnd.client,l=n.sessionCache?tls$1.createSessionCache(n.sessionCache):null,h={version:{major:tls$1.Version.major,minor:tls$1.Version.minor},entity:c,sessionId:n.sessionId,caStore:e,sessionCache:l,cipherSuites:t,connected:n.connected,virtualHost:n.virtualHost||null,verifyClient:n.verifyClient||!1,verify:n.verify||function(v,_,p,a){return _},verifyOptions:n.verifyOptions||{},getCertificate:n.getCertificate||null,getPrivateKey:n.getPrivateKey||null,getSignature:n.getSignature||null,input:forge$8.util.createBuffer(),tlsData:forge$8.util.createBuffer(),data:forge$8.util.createBuffer(),tlsDataReady:n.tlsDataReady,dataReady:n.dataReady,heartbeatReceived:n.heartbeatReceived,closed:n.closed,error:function(v,_){_.origin=_.origin||(v.entity===tls$1.ConnectionEnd.client?"client":"server"),_.send&&(tls$1.queue(v,tls$1.createAlert(v,_.alert)),tls$1.flush(v));var p=_.fatal!==!1;p&&(v.fail=!0),n.error(v,_),p&&v.close(!1)},deflate:n.deflate||null,inflate:n.inflate||null};h.reset=function(v){h.version={major:tls$1.Version.major,minor:tls$1.Version.minor},h.record=null,h.session=null,h.peerCertificate=null,h.state={pending:null,current:null},h.expect=h.entity===tls$1.ConnectionEnd.client?SHE:CHE,h.fragmented=null,h.records=[],h.open=!1,h.handshakes=0,h.handshaking=!1,h.isConnected=!1,h.fail=!(v||typeof v>"u"),h.input.clear(),h.tlsData.clear(),h.data.clear(),h.state.current=tls$1.createConnectionState(h)},h.reset();var d=function(v,_){var p=_.type-tls$1.ContentType.change_cipher_spec,a=ctTable[v.entity][v.expect];p in a?a[p](v,_):tls$1.handleUnexpected(v,_)},g=function(v){var _=0,p=v.input,a=p.length();if(a<5)_=5-a;else{v.record={type:p.getByte(),version:{major:p.getByte(),minor:p.getByte()},length:p.getInt16(),fragment:forge$8.util.createBuffer(),ready:!1};var u=v.record.version.major===v.version.major;u&&v.session&&v.session.version&&(u=v.record.version.minor===v.version.minor),u||v.error(v,{message:"Incompatible TLS version.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.protocol_version}})}return _},m=function(v){var _=0,p=v.input,a=p.length();if(a<v.record.length)_=v.record.length-a;else{v.record.fragment.putBytes(p.getBytes(v.record.length)),p.compact();var u=v.state.current.read;u.update(v,v.record)&&(v.fragmented!==null&&(v.fragmented.type===v.record.type?(v.fragmented.fragment.putBuffer(v.record.fragment),v.record=v.fragmented):v.error(v,{message:"Invalid fragmented record.",send:!0,alert:{level:tls$1.Alert.Level.fatal,description:tls$1.Alert.Description.unexpected_message}})),v.record.ready=!0)}return _};return h.handshake=function(v){if(h.entity!==tls$1.ConnectionEnd.client)h.error(h,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(h.handshaking)h.error(h,{message:"Handshake already in progress.",fatal:!1});else{h.fail&&!h.open&&h.handshakes===0&&(h.fail=!1),h.handshaking=!0,v=v||"";var _=null;v.length>0&&(h.sessionCache&&(_=h.sessionCache.getSession(v)),_===null&&(v="")),v.length===0&&h.sessionCache&&(_=h.sessionCache.getSession(),_!==null&&(v=_.id)),h.session={id:v,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:forge$8.md.md5.create(),sha1:forge$8.md.sha1.create()},_&&(h.version=_.version,h.session.sp=_.sp),h.session.sp.client_random=tls$1.createRandom().getBytes(),h.open=!0,tls$1.queue(h,tls$1.createRecord(h,{type:tls$1.ContentType.handshake,data:tls$1.createClientHello(h)})),tls$1.flush(h)}},h.process=function(v){var _=0;return v&&h.input.putBytes(v),h.fail||(h.record!==null&&h.record.ready&&h.record.fragment.isEmpty()&&(h.record=null),h.record===null&&(_=g(h)),!h.fail&&h.record!==null&&!h.record.ready&&(_=m(h)),!h.fail&&h.record!==null&&h.record.ready&&d(h,h.record)),_},h.prepare=function(v){return tls$1.queue(h,tls$1.createRecord(h,{type:tls$1.ContentType.application_data,data:forge$8.util.createBuffer(v)})),tls$1.flush(h)},h.prepareHeartbeatRequest=function(v,_){return v instanceof forge$8.util.ByteBuffer&&(v=v.bytes()),typeof _>"u"&&(_=v.length),h.expectedHeartbeatPayload=v,tls$1.queue(h,tls$1.createRecord(h,{type:tls$1.ContentType.heartbeat,data:tls$1.createHeartbeat(tls$1.HeartbeatMessageType.heartbeat_request,v,_)})),tls$1.flush(h)},h.close=function(v){if(!h.fail&&h.sessionCache&&h.session){var _={id:h.session.id,version:h.session.version,sp:h.session.sp};_.sp.keys=null,h.sessionCache.setSession(_.id,_)}h.open&&(h.open=!1,h.input.clear(),(h.isConnected||h.handshaking)&&(h.isConnected=h.handshaking=!1,tls$1.queue(h,tls$1.createAlert(h,{level:tls$1.Alert.Level.warning,description:tls$1.Alert.Description.close_notify})),tls$1.flush(h)),h.closed(h)),h.reset(v)},h};forge$8.tls=forge$8.tls||{};for(var key$2 in tls$1)typeof tls$1[key$2]!="function"&&(forge$8.tls[key$2]=tls$1[key$2]);forge$8.tls.prf_tls1=prf_TLS1;forge$8.tls.hmac_sha1=hmac_sha1;forge$8.tls.createSessionCache=tls$1.createSessionCache;forge$8.tls.createConnection=tls$1.createConnection;var forge$7=forge$D,tls=forge$7.tls;tls.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(n){n.bulk_cipher_algorithm=tls.BulkCipherAlgorithm.aes,n.cipher_type=tls.CipherType.block,n.enc_key_length=16,n.block_length=16,n.fixed_iv_length=16,n.record_iv_length=16,n.mac_algorithm=tls.MACAlgorithm.hmac_sha1,n.mac_length=20,n.mac_key_length=20},initConnectionState};tls.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(n){n.bulk_cipher_algorithm=tls.BulkCipherAlgorithm.aes,n.cipher_type=tls.CipherType.block,n.enc_key_length=32,n.block_length=16,n.fixed_iv_length=16,n.record_iv_length=16,n.mac_algorithm=tls.MACAlgorithm.hmac_sha1,n.mac_length=20,n.mac_key_length=20},initConnectionState};function initConnectionState(n,e,t){var o=e.entity===forge$7.tls.ConnectionEnd.client;n.read.cipherState={init:!1,cipher:forge$7.cipher.createDecipher("AES-CBC",o?t.keys.server_write_key:t.keys.client_write_key),iv:o?t.keys.server_write_IV:t.keys.client_write_IV},n.write.cipherState={init:!1,cipher:forge$7.cipher.createCipher("AES-CBC",o?t.keys.client_write_key:t.keys.server_write_key),iv:o?t.keys.client_write_IV:t.keys.server_write_IV},n.read.cipherFunction=decrypt_aes_cbc_sha1,n.write.cipherFunction=encrypt_aes_cbc_sha1,n.read.macLength=n.write.macLength=t.mac_length,n.read.macFunction=n.write.macFunction=tls.hmac_sha1}function encrypt_aes_cbc_sha1(n,e){var t=!1,o=e.macFunction(e.macKey,e.sequenceNumber,n);n.fragment.putBytes(o),e.updateSequenceNumber();var c;n.version.minor===tls.Versions.TLS_1_0.minor?c=e.cipherState.init?null:e.cipherState.iv:c=forge$7.random.getBytesSync(16),e.cipherState.init=!0;var l=e.cipherState.cipher;return l.start({iv:c}),n.version.minor>=tls.Versions.TLS_1_1.minor&&l.output.putBytes(c),l.update(n.fragment),l.finish(encrypt_aes_cbc_sha1_padding)&&(n.fragment=l.output,n.length=n.fragment.length(),t=!0),t}function encrypt_aes_cbc_sha1_padding(n,e,t){if(!t){var o=n-e.length()%n;e.fillWithByte(o-1,o)}return!0}function decrypt_aes_cbc_sha1_padding(n,e,t){var o=!0;if(t){for(var c=e.length(),l=e.last(),h=c-1-l;h<c-1;++h)o=o&&e.at(h)==l;o&&e.truncate(l+1)}return o}function decrypt_aes_cbc_sha1(n,e){var t=!1,o;n.version.minor===tls.Versions.TLS_1_0.minor?o=e.cipherState.init?null:e.cipherState.iv:o=n.fragment.getBytes(16),e.cipherState.init=!0;var c=e.cipherState.cipher;c.start({iv:o}),c.update(n.fragment),t=c.finish(decrypt_aes_cbc_sha1_padding);var l=e.macLength,h=forge$7.random.getBytesSync(l),d=c.output.length();d>=l?(n.fragment=c.output.getBytes(d-l),h=c.output.getBytes(l)):n.fragment=c.output.getBytes(),n.fragment=forge$7.util.createBuffer(n.fragment),n.length=n.fragment.length();var g=e.macFunction(e.macKey,e.sequenceNumber,n);return e.updateSequenceNumber(),t=compareMacs(e.macKey,h,g)&&t,t}function compareMacs(n,e,t){var o=forge$7.hmac.create();return o.start("SHA1",n),o.update(e),e=o.digest().getBytes(),o.start(null,null),o.update(t),t=o.digest().getBytes(),e===t}var asn1Validator$1={},forge$6=forge$D,asn1$1=forge$6.asn1;asn1Validator$1.privateKeyValidator={name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};asn1Validator$1.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};var forge$5=forge$D,asn1Validator=asn1Validator$1,publicKeyValidator=asn1Validator.publicKeyValidator,privateKeyValidator=asn1Validator.privateKeyValidator;if(typeof BigInteger$1>"u")var BigInteger$1=forge$5.jsbn.BigInteger;var ByteBuffer=forge$5.util.ByteBuffer,NativeBuffer=typeof Buffer>"u"?Uint8Array:Buffer;forge$5.pki=forge$5.pki||{};forge$5.pki.ed25519=forge$5.ed25519=forge$5.ed25519||{};var ed25519=forge$5.ed25519;ed25519.constants={};ed25519.constants.PUBLIC_KEY_BYTE_LENGTH=32;ed25519.constants.PRIVATE_KEY_BYTE_LENGTH=64;ed25519.constants.SEED_BYTE_LENGTH=32;ed25519.constants.SIGN_BYTE_LENGTH=64;ed25519.constants.HASH_BYTE_LENGTH=64;ed25519.generateKeyPair=function(n){n=n||{};var e=n.seed;if(e===void 0)e=forge$5.random.getBytesSync(ed25519.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==ed25519.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+ed25519.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=messageToNativeBuffer({message:e,encoding:"binary"});for(var t=new NativeBuffer(ed25519.constants.PUBLIC_KEY_BYTE_LENGTH),o=new NativeBuffer(ed25519.constants.PRIVATE_KEY_BYTE_LENGTH),c=0;c<32;++c)o[c]=e[c];return crypto_sign_keypair(t,o),{publicKey:t,privateKey:o}};ed25519.privateKeyFromAsn1=function(n){var e={},t=[],o=forge$5.asn1.validate(n,privateKeyValidator,e,t);if(!o){var c=new Error("Invalid Key.");throw c.errors=t,c}var l=forge$5.asn1.derToOid(e.privateKeyOid),h=forge$5.oids.EdDSA25519;if(l!==h)throw new Error('Invalid OID "'+l+'"; OID must be "'+h+'".');var d=e.privateKey,g=messageToNativeBuffer({message:forge$5.asn1.fromDer(d).value,encoding:"binary"});return{privateKeyBytes:g}};ed25519.publicKeyFromAsn1=function(n){var e={},t=[],o=forge$5.asn1.validate(n,publicKeyValidator,e,t);if(!o){var c=new Error("Invalid Key.");throw c.errors=t,c}var l=forge$5.asn1.derToOid(e.publicKeyOid),h=forge$5.oids.EdDSA25519;if(l!==h)throw new Error('Invalid OID "'+l+'"; OID must be "'+h+'".');var d=e.ed25519PublicKey;if(d.length!==ed25519.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return messageToNativeBuffer({message:d,encoding:"binary"})};ed25519.publicKeyFromPrivateKey=function(n){n=n||{};var e=messageToNativeBuffer({message:n.privateKey,encoding:"binary"});if(e.length!==ed25519.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ed25519.constants.PRIVATE_KEY_BYTE_LENGTH);for(var t=new NativeBuffer(ed25519.constants.PUBLIC_KEY_BYTE_LENGTH),o=0;o<t.length;++o)t[o]=e[32+o];return t};ed25519.sign=function(n){n=n||{};var e=messageToNativeBuffer(n),t=messageToNativeBuffer({message:n.privateKey,encoding:"binary"});if(t.length===ed25519.constants.SEED_BYTE_LENGTH){var o=ed25519.generateKeyPair({seed:t});t=o.privateKey}else if(t.length!==ed25519.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ed25519.constants.SEED_BYTE_LENGTH+" or "+ed25519.constants.PRIVATE_KEY_BYTE_LENGTH);var c=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH+e.length);crypto_sign(c,e,e.length,t);for(var l=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH),h=0;h<l.length;++h)l[h]=c[h];return l};ed25519.verify=function(n){n=n||{};var e=messageToNativeBuffer(n);if(n.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var t=messageToNativeBuffer({message:n.signature,encoding:"binary"});if(t.length!==ed25519.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+ed25519.constants.SIGN_BYTE_LENGTH);var o=messageToNativeBuffer({message:n.publicKey,encoding:"binary"});if(o.length!==ed25519.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+ed25519.constants.PUBLIC_KEY_BYTE_LENGTH);var c=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH+e.length),l=new NativeBuffer(ed25519.constants.SIGN_BYTE_LENGTH+e.length),h;for(h=0;h<ed25519.constants.SIGN_BYTE_LENGTH;++h)c[h]=t[h];for(h=0;h<e.length;++h)c[h+ed25519.constants.SIGN_BYTE_LENGTH]=e[h];return crypto_sign_open(l,c,c.length,o)>=0};function messageToNativeBuffer(n){var e=n.message;if(e instanceof Uint8Array||e instanceof NativeBuffer)return e;var t=n.encoding;if(e===void 0)if(n.md)e=n.md.digest().getBytes(),t="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!t)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,t);e=new ByteBuffer(e,t)}else if(!(e instanceof ByteBuffer))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var o=new NativeBuffer(e.length()),c=0;c<o.length;++c)o[c]=e.at(c);return o}var gf0=gf(),gf1=gf([1]),D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function sha512(n,e){var t=forge$5.md.sha512.create(),o=new ByteBuffer(n);t.update(o.getBytes(e),"binary");var c=t.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(c,"binary");for(var l=new NativeBuffer(ed25519.constants.HASH_BYTE_LENGTH),h=0;h<64;++h)l[h]=c.charCodeAt(h);return l}function crypto_sign_keypair(n,e){var t=[gf(),gf(),gf(),gf()],o,c=sha512(e,32);for(c[0]&=248,c[31]&=127,c[31]|=64,scalarbase(t,c),pack(n,t),o=0;o<32;++o)e[o+32]=n[o];return 0}function crypto_sign(n,e,t,o){var c,l,h=new Float64Array(64),d=[gf(),gf(),gf(),gf()],g=sha512(o,32);g[0]&=248,g[31]&=127,g[31]|=64;var m=t+64;for(c=0;c<t;++c)n[64+c]=e[c];for(c=0;c<32;++c)n[32+c]=g[32+c];var v=sha512(n.subarray(32),t+32);for(reduce(v),scalarbase(d,v),pack(n,d),c=32;c<64;++c)n[c]=o[c];var _=sha512(n,t+64);for(reduce(_),c=32;c<64;++c)h[c]=0;for(c=0;c<32;++c)h[c]=v[c];for(c=0;c<32;++c)for(l=0;l<32;l++)h[c+l]+=_[c]*g[l];return modL(n.subarray(32),h),m}function crypto_sign_open(n,e,t,o){var c,l,h=new NativeBuffer(32),d=[gf(),gf(),gf(),gf()],g=[gf(),gf(),gf(),gf()];if(l=-1,t<64||unpackneg(g,o))return-1;for(c=0;c<t;++c)n[c]=e[c];for(c=0;c<32;++c)n[c+32]=o[c];var m=sha512(n,t);if(reduce(m),scalarmult(d,g,m),scalarbase(g,e.subarray(32)),add(d,g),pack(h,d),t-=64,crypto_verify_32(e,0,h,0)){for(c=0;c<t;++c)n[c]=0;return-1}for(c=0;c<t;++c)n[c]=e[c+64];return l=t,l}function modL(n,e){var t,o,c,l;for(o=63;o>=32;--o){for(t=0,c=o-32,l=o-12;c<l;++c)e[c]+=t-16*e[o]*L[c-(o-32)],t=e[c]+128>>8,e[c]-=t*256;e[c]+=t,e[o]=0}for(t=0,c=0;c<32;++c)e[c]+=t-(e[31]>>4)*L[c],t=e[c]>>8,e[c]&=255;for(c=0;c<32;++c)e[c]-=t*L[c];for(o=0;o<32;++o)e[o+1]+=e[o]>>8,n[o]=e[o]&255}function reduce(n){for(var e=new Float64Array(64),t=0;t<64;++t)e[t]=n[t],n[t]=0;modL(n,e)}function add(n,e){var t=gf(),o=gf(),c=gf(),l=gf(),h=gf(),d=gf(),g=gf(),m=gf(),v=gf();Z(t,n[1],n[0]),Z(v,e[1],e[0]),M(t,t,v),A(o,n[0],n[1]),A(v,e[0],e[1]),M(o,o,v),M(c,n[3],e[3]),M(c,c,D2),M(l,n[2],e[2]),A(l,l,l),Z(h,o,t),Z(d,l,c),A(g,l,c),A(m,o,t),M(n[0],h,d),M(n[1],m,g),M(n[2],g,d),M(n[3],h,m)}function cswap(n,e,t){for(var o=0;o<4;++o)sel25519(n[o],e[o],t)}function pack(n,e){var t=gf(),o=gf(),c=gf();inv25519(c,e[2]),M(t,e[0],c),M(o,e[1],c),pack25519(n,o),n[31]^=par25519(t)<<7}function pack25519(n,e){var t,o,c,l=gf(),h=gf();for(t=0;t<16;++t)h[t]=e[t];for(car25519(h),car25519(h),car25519(h),o=0;o<2;++o){for(l[0]=h[0]-65517,t=1;t<15;++t)l[t]=h[t]-65535-(l[t-1]>>16&1),l[t-1]&=65535;l[15]=h[15]-32767-(l[14]>>16&1),c=l[15]>>16&1,l[14]&=65535,sel25519(h,l,1-c)}for(t=0;t<16;t++)n[2*t]=h[t]&255,n[2*t+1]=h[t]>>8}function unpackneg(n,e){var t=gf(),o=gf(),c=gf(),l=gf(),h=gf(),d=gf(),g=gf();return set25519(n[2],gf1),unpack25519(n[1],e),S(c,n[1]),M(l,c,D),Z(c,c,n[2]),A(l,n[2],l),S(h,l),S(d,h),M(g,d,h),M(t,g,c),M(t,t,l),pow2523(t,t),M(t,t,c),M(t,t,l),M(t,t,l),M(n[0],t,l),S(o,n[0]),M(o,o,l),neq25519(o,c)&&M(n[0],n[0],I),S(o,n[0]),M(o,o,l),neq25519(o,c)?-1:(par25519(n[0])===e[31]>>7&&Z(n[0],gf0,n[0]),M(n[3],n[0],n[1]),0)}function unpack25519(n,e){var t;for(t=0;t<16;++t)n[t]=e[2*t]+(e[2*t+1]<<8);n[15]&=32767}function pow2523(n,e){var t=gf(),o;for(o=0;o<16;++o)t[o]=e[o];for(o=250;o>=0;--o)S(t,t),o!==1&&M(t,t,e);for(o=0;o<16;++o)n[o]=t[o]}function neq25519(n,e){var t=new NativeBuffer(32),o=new NativeBuffer(32);return pack25519(t,n),pack25519(o,e),crypto_verify_32(t,0,o,0)}function crypto_verify_32(n,e,t,o){return vn(n,e,t,o,32)}function vn(n,e,t,o,c){var l,h=0;for(l=0;l<c;++l)h|=n[e+l]^t[o+l];return(1&h-1>>>8)-1}function par25519(n){var e=new NativeBuffer(32);return pack25519(e,n),e[0]&1}function scalarmult(n,e,t){var o,c;for(set25519(n[0],gf0),set25519(n[1],gf1),set25519(n[2],gf1),set25519(n[3],gf0),c=255;c>=0;--c)o=t[c/8|0]>>(c&7)&1,cswap(n,e,o),add(e,n),add(n,n),cswap(n,e,o)}function scalarbase(n,e){var t=[gf(),gf(),gf(),gf()];set25519(t[0],X),set25519(t[1],Y),set25519(t[2],gf1),M(t[3],X,Y),scalarmult(n,t,e)}function set25519(n,e){var t;for(t=0;t<16;t++)n[t]=e[t]|0}function inv25519(n,e){var t=gf(),o;for(o=0;o<16;++o)t[o]=e[o];for(o=253;o>=0;--o)S(t,t),o!==2&&o!==4&&M(t,t,e);for(o=0;o<16;++o)n[o]=t[o]}function car25519(n){var e,t,o=1;for(e=0;e<16;++e)t=n[e]+o+65535,o=Math.floor(t/65536),n[e]=t-o*65536;n[0]+=o-1+37*(o-1)}function sel25519(n,e,t){for(var o,c=~(t-1),l=0;l<16;++l)o=c&(n[l]^e[l]),n[l]^=o,e[l]^=o}function gf(n){var e,t=new Float64Array(16);if(n)for(e=0;e<n.length;++e)t[e]=n[e];return t}function A(n,e,t){for(var o=0;o<16;++o)n[o]=e[o]+t[o]}function Z(n,e,t){for(var o=0;o<16;++o)n[o]=e[o]-t[o]}function S(n,e){M(n,e,e)}function M(n,e,t){var o,c,l=0,h=0,d=0,g=0,m=0,v=0,_=0,p=0,a=0,u=0,y=0,b=0,w=0,T=0,B=0,H=0,J=0,W=0,fe=0,re=0,se=0,ae=0,ee=0,P=0,C=0,E=0,k=0,F=0,j=0,Q=0,G=0,U=t[0],$=t[1],O=t[2],oe=t[3],ue=t[4],q=t[5],pe=t[6],be=t[7],ve=t[8],we=t[9],Ce=t[10],Re=t[11],Se=t[12],$e=t[13],De=t[14],Ne=t[15];o=e[0],l+=o*U,h+=o*$,d+=o*O,g+=o*oe,m+=o*ue,v+=o*q,_+=o*pe,p+=o*be,a+=o*ve,u+=o*we,y+=o*Ce,b+=o*Re,w+=o*Se,T+=o*$e,B+=o*De,H+=o*Ne,o=e[1],h+=o*U,d+=o*$,g+=o*O,m+=o*oe,v+=o*ue,_+=o*q,p+=o*pe,a+=o*be,u+=o*ve,y+=o*we,b+=o*Ce,w+=o*Re,T+=o*Se,B+=o*$e,H+=o*De,J+=o*Ne,o=e[2],d+=o*U,g+=o*$,m+=o*O,v+=o*oe,_+=o*ue,p+=o*q,a+=o*pe,u+=o*be,y+=o*ve,b+=o*we,w+=o*Ce,T+=o*Re,B+=o*Se,H+=o*$e,J+=o*De,W+=o*Ne,o=e[3],g+=o*U,m+=o*$,v+=o*O,_+=o*oe,p+=o*ue,a+=o*q,u+=o*pe,y+=o*be,b+=o*ve,w+=o*we,T+=o*Ce,B+=o*Re,H+=o*Se,J+=o*$e,W+=o*De,fe+=o*Ne,o=e[4],m+=o*U,v+=o*$,_+=o*O,p+=o*oe,a+=o*ue,u+=o*q,y+=o*pe,b+=o*be,w+=o*ve,T+=o*we,B+=o*Ce,H+=o*Re,J+=o*Se,W+=o*$e,fe+=o*De,re+=o*Ne,o=e[5],v+=o*U,_+=o*$,p+=o*O,a+=o*oe,u+=o*ue,y+=o*q,b+=o*pe,w+=o*be,T+=o*ve,B+=o*we,H+=o*Ce,J+=o*Re,W+=o*Se,fe+=o*$e,re+=o*De,se+=o*Ne,o=e[6],_+=o*U,p+=o*$,a+=o*O,u+=o*oe,y+=o*ue,b+=o*q,w+=o*pe,T+=o*be,B+=o*ve,H+=o*we,J+=o*Ce,W+=o*Re,fe+=o*Se,re+=o*$e,se+=o*De,ae+=o*Ne,o=e[7],p+=o*U,a+=o*$,u+=o*O,y+=o*oe,b+=o*ue,w+=o*q,T+=o*pe,B+=o*be,H+=o*ve,J+=o*we,W+=o*Ce,fe+=o*Re,re+=o*Se,se+=o*$e,ae+=o*De,ee+=o*Ne,o=e[8],a+=o*U,u+=o*$,y+=o*O,b+=o*oe,w+=o*ue,T+=o*q,B+=o*pe,H+=o*be,J+=o*ve,W+=o*we,fe+=o*Ce,re+=o*Re,se+=o*Se,ae+=o*$e,ee+=o*De,P+=o*Ne,o=e[9],u+=o*U,y+=o*$,b+=o*O,w+=o*oe,T+=o*ue,B+=o*q,H+=o*pe,J+=o*be,W+=o*ve,fe+=o*we,re+=o*Ce,se+=o*Re,ae+=o*Se,ee+=o*$e,P+=o*De,C+=o*Ne,o=e[10],y+=o*U,b+=o*$,w+=o*O,T+=o*oe,B+=o*ue,H+=o*q,J+=o*pe,W+=o*be,fe+=o*ve,re+=o*we,se+=o*Ce,ae+=o*Re,ee+=o*Se,P+=o*$e,C+=o*De,E+=o*Ne,o=e[11],b+=o*U,w+=o*$,T+=o*O,B+=o*oe,H+=o*ue,J+=o*q,W+=o*pe,fe+=o*be,re+=o*ve,se+=o*we,ae+=o*Ce,ee+=o*Re,P+=o*Se,C+=o*$e,E+=o*De,k+=o*Ne,o=e[12],w+=o*U,T+=o*$,B+=o*O,H+=o*oe,J+=o*ue,W+=o*q,fe+=o*pe,re+=o*be,se+=o*ve,ae+=o*we,ee+=o*Ce,P+=o*Re,C+=o*Se,E+=o*$e,k+=o*De,F+=o*Ne,o=e[13],T+=o*U,B+=o*$,H+=o*O,J+=o*oe,W+=o*ue,fe+=o*q,re+=o*pe,se+=o*be,ae+=o*ve,ee+=o*we,P+=o*Ce,C+=o*Re,E+=o*Se,k+=o*$e,F+=o*De,j+=o*Ne,o=e[14],B+=o*U,H+=o*$,J+=o*O,W+=o*oe,fe+=o*ue,re+=o*q,se+=o*pe,ae+=o*be,ee+=o*ve,P+=o*we,C+=o*Ce,E+=o*Re,k+=o*Se,F+=o*$e,j+=o*De,Q+=o*Ne,o=e[15],H+=o*U,J+=o*$,W+=o*O,fe+=o*oe,re+=o*ue,se+=o*q,ae+=o*pe,ee+=o*be,P+=o*ve,C+=o*we,E+=o*Ce,k+=o*Re,F+=o*Se,j+=o*$e,Q+=o*De,G+=o*Ne,l+=38*J,h+=38*W,d+=38*fe,g+=38*re,m+=38*se,v+=38*ae,_+=38*ee,p+=38*P,a+=38*C,u+=38*E,y+=38*k,b+=38*F,w+=38*j,T+=38*Q,B+=38*G,c=1,o=l+c+65535,c=Math.floor(o/65536),l=o-c*65536,o=h+c+65535,c=Math.floor(o/65536),h=o-c*65536,o=d+c+65535,c=Math.floor(o/65536),d=o-c*65536,o=g+c+65535,c=Math.floor(o/65536),g=o-c*65536,o=m+c+65535,c=Math.floor(o/65536),m=o-c*65536,o=v+c+65535,c=Math.floor(o/65536),v=o-c*65536,o=_+c+65535,c=Math.floor(o/65536),_=o-c*65536,o=p+c+65535,c=Math.floor(o/65536),p=o-c*65536,o=a+c+65535,c=Math.floor(o/65536),a=o-c*65536,o=u+c+65535,c=Math.floor(o/65536),u=o-c*65536,o=y+c+65535,c=Math.floor(o/65536),y=o-c*65536,o=b+c+65535,c=Math.floor(o/65536),b=o-c*65536,o=w+c+65535,c=Math.floor(o/65536),w=o-c*65536,o=T+c+65535,c=Math.floor(o/65536),T=o-c*65536,o=B+c+65535,c=Math.floor(o/65536),B=o-c*65536,o=H+c+65535,c=Math.floor(o/65536),H=o-c*65536,l+=c-1+37*(c-1),c=1,o=l+c+65535,c=Math.floor(o/65536),l=o-c*65536,o=h+c+65535,c=Math.floor(o/65536),h=o-c*65536,o=d+c+65535,c=Math.floor(o/65536),d=o-c*65536,o=g+c+65535,c=Math.floor(o/65536),g=o-c*65536,o=m+c+65535,c=Math.floor(o/65536),m=o-c*65536,o=v+c+65535,c=Math.floor(o/65536),v=o-c*65536,o=_+c+65535,c=Math.floor(o/65536),_=o-c*65536,o=p+c+65535,c=Math.floor(o/65536),p=o-c*65536,o=a+c+65535,c=Math.floor(o/65536),a=o-c*65536,o=u+c+65535,c=Math.floor(o/65536),u=o-c*65536,o=y+c+65535,c=Math.floor(o/65536),y=o-c*65536,o=b+c+65535,c=Math.floor(o/65536),b=o-c*65536,o=w+c+65535,c=Math.floor(o/65536),w=o-c*65536,o=T+c+65535,c=Math.floor(o/65536),T=o-c*65536,o=B+c+65535,c=Math.floor(o/65536),B=o-c*65536,o=H+c+65535,c=Math.floor(o/65536),H=o-c*65536,l+=c-1+37*(c-1),n[0]=l,n[1]=h,n[2]=d,n[3]=g,n[4]=m,n[5]=v,n[6]=_,n[7]=p,n[8]=a,n[9]=u,n[10]=y,n[11]=b,n[12]=w,n[13]=T,n[14]=B,n[15]=H}var forge$4=forge$D;forge$4.kem=forge$4.kem||{};var BigInteger=forge$4.jsbn.BigInteger;forge$4.kem.rsa={};forge$4.kem.rsa.create=function(n,e){e=e||{};var t=e.prng||forge$4.random,o={};return o.encrypt=function(c,l){var h=Math.ceil(c.n.bitLength()/8),d;do d=new BigInteger(forge$4.util.bytesToHex(t.getBytesSync(h)),16).mod(c.n);while(d.compareTo(BigInteger.ONE)<=0);d=forge$4.util.hexToBytes(d.toString(16));var g=h-d.length;g>0&&(d=forge$4.util.fillString(String.fromCharCode(0),g)+d);var m=c.encrypt(d,"NONE"),v=n.generate(d,l);return{encapsulation:m,key:v}},o.decrypt=function(c,l,h){var d=c.decrypt(l,"NONE");return n.generate(d,h)},o};forge$4.kem.kdf1=function(n,e){_createKDF(this,n,0,e||n.digestLength)};forge$4.kem.kdf2=function(n,e){_createKDF(this,n,1,e||n.digestLength)};function _createKDF(n,e,t,o){n.generate=function(c,l){for(var h=new forge$4.util.ByteBuffer,d=Math.ceil(l/o)+t,g=new forge$4.util.ByteBuffer,m=t;m<d;++m){g.putInt32(m),e.start(),e.update(c+g.getBytes());var v=e.digest();h.putBytes(v.getBytes(o))}return h.truncate(h.length()-l),h.getBytes()}}var forge$3=forge$D;forge$3.log=forge$3.log||{};forge$3.log.levels=["none","error","warning","info","debug","verbose","max"];var sLevelInfo={},sLoggers=[],sConsoleLogger=null;forge$3.log.LEVEL_LOCKED=2;forge$3.log.NO_LEVEL_CHECK=4;forge$3.log.INTERPOLATE=8;for(var i$1=0;i$1<forge$3.log.levels.length;++i$1){var level=forge$3.log.levels[i$1];sLevelInfo[level]={index:i$1,name:level.toUpperCase()}}forge$3.log.logMessage=function(n){for(var e=sLevelInfo[n.level].index,t=0;t<sLoggers.length;++t){var o=sLoggers[t];if(o.flags&forge$3.log.NO_LEVEL_CHECK)o.f(n);else{var c=sLevelInfo[o.level].index;e<=c&&o.f(o,n)}}};forge$3.log.prepareStandard=function(n){"standard"in n||(n.standard=sLevelInfo[n.level].name+" ["+n.category+"] "+n.message)};forge$3.log.prepareFull=function(n){if(!("full"in n)){var e=[n.message];e=e.concat([]),n.full=forge$3.util.format.apply(this,e)}};forge$3.log.prepareStandardFull=function(n){"standardFull"in n||(forge$3.log.prepareStandard(n),n.standardFull=n.standard)};for(var levels=["error","warning","info","debug","verbose"],i$1=0;i$1<levels.length;++i$1)(function(e){forge$3.log[e]=function(t,o){var c=Array.prototype.slice.call(arguments).slice(2),l={timestamp:new Date,level:e,category:t,message:o,arguments:c};forge$3.log.logMessage(l)}})(levels[i$1]);forge$3.log.makeLogger=function(n){var e={flags:0,f:n};return forge$3.log.setLevel(e,"none"),e};forge$3.log.setLevel=function(n,e){var t=!1;if(n&&!(n.flags&forge$3.log.LEVEL_LOCKED))for(var o=0;o<forge$3.log.levels.length;++o){var c=forge$3.log.levels[o];if(e==c){n.level=e,t=!0;break}}return t};forge$3.log.lock=function(n,e){typeof e>"u"||e?n.flags|=forge$3.log.LEVEL_LOCKED:n.flags&=~forge$3.log.LEVEL_LOCKED};forge$3.log.addLogger=function(n){sLoggers.push(n)};if(typeof console<"u"&&"log"in console){var logger;if(console.error&&console.warn&&console.info&&console.debug){var levelHandlers={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},f$2=function(n,e){forge$3.log.prepareStandard(e);var t=levelHandlers[e.level],o=[e.standard];o=o.concat(e.arguments.slice()),t.apply(console,o)};logger=forge$3.log.makeLogger(f$2)}else{var f$2=function(e,t){forge$3.log.prepareStandardFull(t),console.log(t.standardFull)};logger=forge$3.log.makeLogger(f$2)}forge$3.log.setLevel(logger,"debug"),forge$3.log.addLogger(logger),sConsoleLogger=logger}else console={log:function(){}};if(sConsoleLogger!==null&&typeof window<"u"&&window.location){var query=new URL(window.location.href).searchParams;if(query.has("console.level")&&forge$3.log.setLevel(sConsoleLogger,query.get("console.level").slice(-1)[0]),query.has("console.lock")){var lock=query.get("console.lock").slice(-1)[0];lock=="true"&&forge$3.log.lock(sConsoleLogger)}}forge$3.log.consoleLogger=sConsoleLogger;var forge$2=forge$D,asn1=forge$2.asn1,p7=forge$2.pkcs7=forge$2.pkcs7||{};p7.messageFromPem=function(n){var e=forge$2.pem.decode(n)[0];if(e.type!=="PKCS7"){var t=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw t.headerType=e.type,t}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=asn1.fromDer(e.body);return p7.messageFromAsn1(o)};p7.messageToPem=function(n,e){var t={type:"PKCS7",body:asn1.toDer(n.toAsn1()).getBytes()};return forge$2.pem.encode(t,{maxline:e})};p7.messageFromAsn1=function(n){var e={},t=[];if(!asn1.validate(n,p7.asn1.contentInfoValidator,e,t)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=t,o}var c=asn1.derToOid(e.contentType),l;switch(c){case forge$2.pki.oids.envelopedData:l=p7.createEnvelopedData();break;case forge$2.pki.oids.encryptedData:l=p7.createEncryptedData();break;case forge$2.pki.oids.signedData:l=p7.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+c+" is not (yet) supported.")}return l.fromAsn1(e.content.value[0]),l};p7.createSignedData=function(){var n=null;return n={type:forge$2.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(o){if(_fromAsn1(n,o,p7.asn1.signedDataValidator),n.certificates=[],n.crls=[],n.digestAlgorithmIdentifiers=[],n.contentInfo=null,n.signerInfos=[],n.rawCapture.certificates)for(var c=n.rawCapture.certificates.value,l=0;l<c.length;++l)n.certificates.push(forge$2.pki.certificateFromAsn1(c[l]))},toAsn1:function(){n.contentInfo||n.sign();for(var o=[],c=0;c<n.certificates.length;++c)o.push(forge$2.pki.certificateToAsn1(n.certificates[c]));var l=[],h=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(n.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,n.digestAlgorithmIdentifiers),n.contentInfo])]);return o.length>0&&h.value[0].value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,o)),l.length>0&&h.value[0].value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,!0,l)),h.value[0].value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,n.signerInfos)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(n.type).getBytes()),h])},addSigner:function(o){var c=o.issuer,l=o.serialNumber;if(o.certificate){var h=o.certificate;typeof h=="string"&&(h=forge$2.pki.certificateFromPem(h)),c=h.issuer.attributes,l=h.serialNumber}var d=o.key;if(!d)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof d=="string"&&(d=forge$2.pki.privateKeyFromPem(d));var g=o.digestAlgorithm||forge$2.pki.oids.sha1;switch(g){case forge$2.pki.oids.sha1:case forge$2.pki.oids.sha256:case forge$2.pki.oids.sha384:case forge$2.pki.oids.sha512:case forge$2.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+g)}var m=o.authenticatedAttributes||[];if(m.length>0){for(var v=!1,_=!1,p=0;p<m.length;++p){var a=m[p];if(!v&&a.type===forge$2.pki.oids.contentType){if(v=!0,_)break;continue}if(!_&&a.type===forge$2.pki.oids.messageDigest){if(_=!0,v)break;continue}}if(!v||!_)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}n.signers.push({key:d,version:1,issuer:c,serialNumber:l,digestAlgorithm:g,signatureAlgorithm:forge$2.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:m,unauthenticatedAttributes:[]})},sign:function(o){if(o=o||{},(typeof n.content!="object"||n.contentInfo===null)&&(n.contentInfo=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(forge$2.pki.oids.data).getBytes())]),"content"in n)){var c;n.content instanceof forge$2.util.ByteBuffer?c=n.content.bytes():typeof n.content=="string"&&(c=forge$2.util.encodeUtf8(n.content)),o.detached?n.detachedContent=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,c):n.contentInfo.value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,c)]))}if(n.signers.length!==0){var l=e();t(l)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(o){typeof o=="string"&&(o=forge$2.pki.certificateFromPem(o)),n.certificates.push(o)},addCertificateRevokationList:function(o){throw new Error("PKCS#7 CRL support not yet implemented.")}},n;function e(){for(var o={},c=0;c<n.signers.length;++c){var l=n.signers[c],h=l.digestAlgorithm;h in o||(o[h]=forge$2.md[forge$2.pki.oids[h]].create()),l.authenticatedAttributes.length===0?l.md=o[h]:l.md=forge$2.md[forge$2.pki.oids[h]].create()}n.digestAlgorithmIdentifiers=[];for(var h in o)n.digestAlgorithmIdentifiers.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(h).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")]));return o}function t(o){var c;if(n.detachedContent?c=n.detachedContent:(c=n.contentInfo.value[1],c=c.value[0]),!c)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var l=asn1.derToOid(n.contentInfo.value[0].value),h=asn1.toDer(c);h.getByte(),asn1.getBerValueLength(h),h=h.getBytes();for(var d in o)o[d].start().update(h);for(var g=new Date,m=0;m<n.signers.length;++m){var v=n.signers[m];if(v.authenticatedAttributes.length===0){if(l!==forge$2.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{v.authenticatedAttributesAsn1=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var _=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,[]),p=0;p<v.authenticatedAttributes.length;++p){var a=v.authenticatedAttributes[p];a.type===forge$2.pki.oids.messageDigest?a.value=o[v.digestAlgorithm].digest():a.type===forge$2.pki.oids.signingTime&&(a.value||(a.value=g)),_.value.push(_attributeToAsn1(a)),v.authenticatedAttributesAsn1.value.push(_attributeToAsn1(a))}h=asn1.toDer(_).getBytes(),v.md.start().update(h)}v.signature=v.key.sign(v.md,"RSASSA-PKCS1-V1_5")}n.signerInfos=_signersToAsn1(n.signers)}};p7.createEncryptedData=function(){var n=null;return n={type:forge$2.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:forge$2.pki.oids["aes256-CBC"]},fromAsn1:function(e){_fromAsn1(n,e,p7.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(n.encryptedContent.key=e),_decryptContent(n)}},n};p7.createEnvelopedData=function(){var n=null;return n={type:forge$2.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:forge$2.pki.oids["aes256-CBC"]},fromAsn1:function(e){var t=_fromAsn1(n,e,p7.asn1.envelopedDataValidator);n.recipients=_recipientsFromAsn1(t.recipientInfos.value)},toAsn1:function(){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(n.type).getBytes()),asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(n.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,_recipientsToAsn1(n.recipients)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,_encryptedContentToAsn1(n.encryptedContent))])])])},findRecipient:function(e){for(var t=e.issuer.attributes,o=0;o<n.recipients.length;++o){var c=n.recipients[o],l=c.issuer;if(c.serialNumber===e.serialNumber&&l.length===t.length){for(var h=!0,d=0;d<t.length;++d)if(l[d].type!==t[d].type||l[d].value!==t[d].value){h=!1;break}if(h)return c}}return null},decrypt:function(e,t){if(n.encryptedContent.key===void 0&&e!==void 0&&t!==void 0)switch(e.encryptedContent.algorithm){case forge$2.pki.oids.rsaEncryption:case forge$2.pki.oids.desCBC:var o=t.decrypt(e.encryptedContent.content);n.encryptedContent.key=forge$2.util.createBuffer(o);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}_decryptContent(n)},addRecipient:function(e){n.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:forge$2.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,t){if(n.encryptedContent.content===void 0){t=t||n.encryptedContent.algorithm,e=e||n.encryptedContent.key;var o,c,l;switch(t){case forge$2.pki.oids["aes128-CBC"]:o=16,c=16,l=forge$2.aes.createEncryptionCipher;break;case forge$2.pki.oids["aes192-CBC"]:o=24,c=16,l=forge$2.aes.createEncryptionCipher;break;case forge$2.pki.oids["aes256-CBC"]:o=32,c=16,l=forge$2.aes.createEncryptionCipher;break;case forge$2.pki.oids["des-EDE3-CBC"]:o=24,c=8,l=forge$2.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+t)}if(e===void 0)e=forge$2.util.createBuffer(forge$2.random.getBytes(o));else if(e.length()!=o)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+o+".");n.encryptedContent.algorithm=t,n.encryptedContent.key=e,n.encryptedContent.parameter=forge$2.util.createBuffer(forge$2.random.getBytes(c));var h=l(e);if(h.start(n.encryptedContent.parameter.copy()),h.update(n.content),!h.finish())throw new Error("Symmetric encryption failed.");n.encryptedContent.content=h.output}for(var d=0;d<n.recipients.length;++d){var g=n.recipients[d];if(g.encryptedContent.content===void 0)switch(g.encryptedContent.algorithm){case forge$2.pki.oids.rsaEncryption:g.encryptedContent.content=g.encryptedContent.key.encrypt(n.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+g.encryptedContent.algorithm)}}}},n};function _recipientFromAsn1(n){var e={},t=[];if(!asn1.validate(n,p7.asn1.recipientInfoValidator,e,t)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=t,o}return{version:e.version.charCodeAt(0),issuer:forge$2.pki.RDNAttributesAsArray(e.issuer),serialNumber:forge$2.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:asn1.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function _recipientToAsn1(n){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(n.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[forge$2.pki.distinguishedNameToAsn1({attributes:n.issuer}),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$2.util.hexToBytes(n.serialNumber))]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(n.encryptedContent.algorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,n.encryptedContent.content)])}function _recipientsFromAsn1(n){for(var e=[],t=0;t<n.length;++t)e.push(_recipientFromAsn1(n[t]));return e}function _recipientsToAsn1(n){for(var e=[],t=0;t<n.length;++t)e.push(_recipientToAsn1(n[t]));return e}function _signerToAsn1(n){var e=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(n.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[forge$2.pki.distinguishedNameToAsn1({attributes:n.issuer}),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$2.util.hexToBytes(n.serialNumber))]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(n.digestAlgorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])]);if(n.authenticatedAttributesAsn1&&e.value.push(n.authenticatedAttributesAsn1),e.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(n.signatureAlgorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])),e.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,n.signature)),n.unauthenticatedAttributes.length>0){for(var t=asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,!0,[]),o=0;o<n.unauthenticatedAttributes.length;++o){var c=n.unauthenticatedAttributes[o];t.values.push(_attributeToAsn1(c))}e.value.push(t)}return e}function _signersToAsn1(n){for(var e=[],t=0;t<n.length;++t)e.push(_signerToAsn1(n[t]));return e}function _attributeToAsn1(n){var e;if(n.type===forge$2.pki.oids.contentType)e=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(n.value).getBytes());else if(n.type===forge$2.pki.oids.messageDigest)e=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,n.value.bytes());else if(n.type===forge$2.pki.oids.signingTime){var t=new Date("1950-01-01T00:00:00Z"),o=new Date("2050-01-01T00:00:00Z"),c=n.value;if(typeof c=="string"){var l=Date.parse(c);isNaN(l)?c.length===13?c=asn1.utcTimeToDate(c):c=asn1.generalizedTimeToDate(c):c=new Date(l)}c>=t&&c<o?e=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.UTCTIME,!1,asn1.dateToUtcTime(c)):e=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.GENERALIZEDTIME,!1,asn1.dateToGeneralizedTime(c))}return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(n.type).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,[e])])}function _encryptedContentToAsn1(n){return[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(forge$2.pki.oids.data).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(n.algorithm).getBytes()),n.parameter?asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,n.parameter.getBytes()):void 0]),asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,n.content.getBytes())])]}function _fromAsn1(n,e,t){var o={},c=[];if(!asn1.validate(e,t,o,c)){var l=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw l.errors=l,l}var h=asn1.derToOid(o.contentType);if(h!==forge$2.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(o.encryptedContent){var d="";if(forge$2.util.isArray(o.encryptedContent))for(var g=0;g<o.encryptedContent.length;++g){if(o.encryptedContent[g].type!==asn1.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");d+=o.encryptedContent[g].value}else d=o.encryptedContent;n.encryptedContent={algorithm:asn1.derToOid(o.encAlgorithm),parameter:forge$2.util.createBuffer(o.encParameter.value),content:forge$2.util.createBuffer(d)}}if(o.content){var d="";if(forge$2.util.isArray(o.content))for(var g=0;g<o.content.length;++g){if(o.content[g].type!==asn1.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");d+=o.content[g].value}else d=o.content;n.content=forge$2.util.createBuffer(d)}return n.version=o.version.charCodeAt(0),n.rawCapture=o,o}function _decryptContent(n){if(n.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(n.content===void 0){var e;switch(n.encryptedContent.algorithm){case forge$2.pki.oids["aes128-CBC"]:case forge$2.pki.oids["aes192-CBC"]:case forge$2.pki.oids["aes256-CBC"]:e=forge$2.aes.createDecryptionCipher(n.encryptedContent.key);break;case forge$2.pki.oids.desCBC:case forge$2.pki.oids["des-EDE3-CBC"]:e=forge$2.des.createDecryptionCipher(n.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+n.encryptedContent.algorithm)}if(e.start(n.encryptedContent.parameter),e.update(n.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");n.content=e.output}}var forge$1=forge$D,ssh=forge$1.ssh=forge$1.ssh||{};ssh.privateKeyToPutty=function(n,e,t){t=t||"",e=e||"";var o="ssh-rsa",c=e===""?"none":"aes256-cbc",l="PuTTY-User-Key-File-2: "+o+`\r
`;l+="Encryption: "+c+`\r
`,l+="Comment: "+t+`\r
`;var h=forge$1.util.createBuffer();_addStringToBuffer(h,o),_addBigIntegerToBuffer(h,n.e),_addBigIntegerToBuffer(h,n.n);var d=forge$1.util.encode64(h.bytes(),64),g=Math.floor(d.length/66)+1;l+="Public-Lines: "+g+`\r
`,l+=d;var m=forge$1.util.createBuffer();_addBigIntegerToBuffer(m,n.d),_addBigIntegerToBuffer(m,n.p),_addBigIntegerToBuffer(m,n.q),_addBigIntegerToBuffer(m,n.qInv);var v;if(!e)v=forge$1.util.encode64(m.bytes(),64);else{var _=m.length()+16-1;_-=_%16;var p=_sha1(m.bytes());p.truncate(p.length()-_+m.length()),m.putBuffer(p);var a=forge$1.util.createBuffer();a.putBuffer(_sha1("\0\0\0\0",e)),a.putBuffer(_sha1("\0\0\0",e));var u=forge$1.aes.createEncryptionCipher(a.truncate(8),"CBC");u.start(forge$1.util.createBuffer().fillWithByte(0,16)),u.update(m.copy()),u.finish();var y=u.output;y.truncate(16),v=forge$1.util.encode64(y.bytes(),64)}g=Math.floor(v.length/66)+1,l+=`\r
Private-Lines: `+g+`\r
`,l+=v;var b=_sha1("putty-private-key-file-mac-key",e),w=forge$1.util.createBuffer();_addStringToBuffer(w,o),_addStringToBuffer(w,c),_addStringToBuffer(w,t),w.putInt32(h.length()),w.putBuffer(h),w.putInt32(m.length()),w.putBuffer(m);var T=forge$1.hmac.create();return T.start("sha1",b),T.update(w.bytes()),l+=`\r
Private-MAC: `+T.digest().toHex()+`\r
`,l};ssh.publicKeyToOpenSSH=function(n,e){var t="ssh-rsa";e=e||"";var o=forge$1.util.createBuffer();return _addStringToBuffer(o,t),_addBigIntegerToBuffer(o,n.e),_addBigIntegerToBuffer(o,n.n),t+" "+forge$1.util.encode64(o.bytes())+" "+e};ssh.privateKeyToOpenSSH=function(n,e){return e?forge$1.pki.encryptRsaPrivateKey(n,e,{legacy:!0,algorithm:"aes128"}):forge$1.pki.privateKeyToPem(n)};ssh.getPublicKeyFingerprint=function(n,e){e=e||{};var t=e.md||forge$1.md.md5.create(),o="ssh-rsa",c=forge$1.util.createBuffer();_addStringToBuffer(c,o),_addBigIntegerToBuffer(c,n.e),_addBigIntegerToBuffer(c,n.n),t.start(),t.update(c.getBytes());var l=t.digest();if(e.encoding==="hex"){var h=l.toHex();return e.delimiter?h.match(/.{2}/g).join(e.delimiter):h}else{if(e.encoding==="binary")return l.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return l};function _addBigIntegerToBuffer(n,e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var o=forge$1.util.hexToBytes(t);n.putInt32(o.length),n.putBytes(o)}function _addStringToBuffer(n,e){n.putInt32(e.length),n.putString(e)}function _sha1(){for(var n=forge$1.md.sha1.create(),e=arguments.length,t=0;t<e;++t)n.update(arguments[t]);return n.digest()}var lib$1=forge$D;const forge=getDefaultExportFromCjs(lib$1),derPrefix$3="302a300506032b6570032100",derPrefixBytes$3=decode$4(derPrefix$3);class Ed25519PublicKey extends Key$1{constructor(e){super(),this._keyData=e}get _type(){return"ED25519"}static fromBytes(e){switch(e.length){case 32:return Ed25519PublicKey.fromBytesRaw(e);case 44:return Ed25519PublicKey.fromBytesDer(e);default:throw new BadKeyError(`invalid public key length: ${e.length} bytes`)}}static fromBytesDer(e){const t=forge.asn1.fromDer(new forge.util.ByteStringBuffer(e));let o;try{o=forge.pki.ed25519.publicKeyFromAsn1(t)}catch(c){const l=c!=null&&c.message!=null?c.message:"";throw new BadKeyError(`cannot decode ED25519 public key data from DER format: ${l}`)}return new Ed25519PublicKey(o)}static fromBytesRaw(e){if(e.length!=32)throw new BadKeyError(`invalid public key length: ${e.length} bytes`);return new Ed25519PublicKey(e)}static fromString(e){return Ed25519PublicKey.fromBytes(decode$4(e))}verify(e,t){return nacl.sign.detached.verify(e,t,this._keyData)}toBytesDer(){const e=new Uint8Array(derPrefixBytes$3.length+32);return e.set(derPrefixBytes$3,0),e.set(this._keyData.subarray(0,32),derPrefixBytes$3.length),e}toBytesRaw(){return this._keyData.slice()}equals(e){return arrayEqual$1(this._keyData,e._keyData)}}function bytes(n){return nacl.randomBytes(n)}function bytesAsync(n){return Promise.resolve(nacl.randomBytes(n))}function decode$3(n){return new TextDecoder().decode(n)}function encode$1(n){return new TextEncoder().encode(n)}const HashAlgorithm={Sha256:"SHA-256",Sha384:"SHA-384",Sha512:"SHA-512"};async function hash$2(n,e,t){const o=typeof e=="string"?encode$1(e):e,c=typeof t=="string"?encode$1(t):t;try{const l=await window.crypto.subtle.importKey("raw",o,{name:"HMAC",hash:n},!1,["sign"]);return new Uint8Array(await window.crypto.subtle.sign("HMAC",l,c))}catch{throw new Error("Fallback if SubtleCrypto fails is not implemented")}}var elliptic$1={};const name="elliptic",version="6.5.4",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0={name,version,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$c={},bn={exports:{}};bn.exports;(function(n){(function(e,t){function o(ee,P){if(!ee)throw new Error(P||"Assertion failed")}function c(ee,P){ee.super_=P;var C=function(){};C.prototype=P.prototype,ee.prototype=new C,ee.prototype.constructor=ee}function l(ee,P,C){if(l.isBN(ee))return ee;this.negative=0,this.words=null,this.length=0,this.red=null,ee!==null&&((P==="le"||P==="be")&&(C=P,P=10),this._init(ee||0,P||10,C||"be"))}typeof e=="object"?e.exports=l:t.BN=l,l.BN=l,l.wordSize=26;var h;try{typeof window<"u"&&typeof window.Buffer<"u"?h=window.Buffer:h=require$$0$1.Buffer}catch{}l.isBN=function(P){return P instanceof l?!0:P!==null&&typeof P=="object"&&P.constructor.wordSize===l.wordSize&&Array.isArray(P.words)},l.max=function(P,C){return P.cmp(C)>0?P:C},l.min=function(P,C){return P.cmp(C)<0?P:C},l.prototype._init=function(P,C,E){if(typeof P=="number")return this._initNumber(P,C,E);if(typeof P=="object")return this._initArray(P,C,E);C==="hex"&&(C=16),o(C===(C|0)&&C>=2&&C<=36),P=P.toString().replace(/\s+/g,"");var k=0;P[0]==="-"&&(k++,this.negative=1),k<P.length&&(C===16?this._parseHex(P,k,E):(this._parseBase(P,C,k),E==="le"&&this._initArray(this.toArray(),C,E)))},l.prototype._initNumber=function(P,C,E){P<0&&(this.negative=1,P=-P),P<67108864?(this.words=[P&67108863],this.length=1):P<4503599627370496?(this.words=[P&67108863,P/67108864&67108863],this.length=2):(o(P<9007199254740992),this.words=[P&67108863,P/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),C,E)},l.prototype._initArray=function(P,C,E){if(o(typeof P.length=="number"),P.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(P.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var F,j,Q=0;if(E==="be")for(k=P.length-1,F=0;k>=0;k-=3)j=P[k]|P[k-1]<<8|P[k-2]<<16,this.words[F]|=j<<Q&67108863,this.words[F+1]=j>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,F++);else if(E==="le")for(k=0,F=0;k<P.length;k+=3)j=P[k]|P[k+1]<<8|P[k+2]<<16,this.words[F]|=j<<Q&67108863,this.words[F+1]=j>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,F++);return this.strip()};function d(ee,P){var C=ee.charCodeAt(P);return C>=65&&C<=70?C-55:C>=97&&C<=102?C-87:C-48&15}function g(ee,P,C){var E=d(ee,C);return C-1>=P&&(E|=d(ee,C-1)<<4),E}l.prototype._parseHex=function(P,C,E){this.length=Math.ceil((P.length-C)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var F=0,j=0,Q;if(E==="be")for(k=P.length-1;k>=C;k-=2)Q=g(P,C,k)<<F,this.words[j]|=Q&67108863,F>=18?(F-=18,j+=1,this.words[j]|=Q>>>26):F+=8;else{var G=P.length-C;for(k=G%2===0?C+1:C;k<P.length;k+=2)Q=g(P,C,k)<<F,this.words[j]|=Q&67108863,F>=18?(F-=18,j+=1,this.words[j]|=Q>>>26):F+=8}this.strip()};function m(ee,P,C,E){for(var k=0,F=Math.min(ee.length,C),j=P;j<F;j++){var Q=ee.charCodeAt(j)-48;k*=E,Q>=49?k+=Q-49+10:Q>=17?k+=Q-17+10:k+=Q}return k}l.prototype._parseBase=function(P,C,E){this.words=[0],this.length=1;for(var k=0,F=1;F<=67108863;F*=C)k++;k--,F=F/C|0;for(var j=P.length-E,Q=j%k,G=Math.min(j,j-Q)+E,U=0,$=E;$<G;$+=k)U=m(P,$,$+k,C),this.imuln(F),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U);if(Q!==0){var O=1;for(U=m(P,$,P.length,C),$=0;$<Q;$++)O*=C;this.imuln(O),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U)}this.strip()},l.prototype.copy=function(P){P.words=new Array(this.length);for(var C=0;C<this.length;C++)P.words[C]=this.words[C];P.length=this.length,P.negative=this.negative,P.red=this.red},l.prototype.clone=function(){var P=new l(null);return this.copy(P),P},l.prototype._expand=function(P){for(;this.length<P;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(P,C){P=P||10,C=C|0||1;var E;if(P===16||P==="hex"){E="";for(var k=0,F=0,j=0;j<this.length;j++){var Q=this.words[j],G=((Q<<k|F)&16777215).toString(16);F=Q>>>24-k&16777215,F!==0||j!==this.length-1?E=v[6-G.length]+G+E:E=G+E,k+=2,k>=26&&(k-=26,j--)}for(F!==0&&(E=F.toString(16)+E);E.length%C!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(P===(P|0)&&P>=2&&P<=36){var U=_[P],$=p[P];E="";var O=this.clone();for(O.negative=0;!O.isZero();){var oe=O.modn($).toString(P);O=O.idivn($),O.isZero()?E=oe+E:E=v[U-oe.length]+oe+E}for(this.isZero()&&(E="0"+E);E.length%C!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}o(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var P=this.words[0];return this.length===2?P+=this.words[1]*67108864:this.length===3&&this.words[2]===1?P+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-P:P},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(P,C){return o(typeof h<"u"),this.toArrayLike(h,P,C)},l.prototype.toArray=function(P,C){return this.toArrayLike(Array,P,C)},l.prototype.toArrayLike=function(P,C,E){var k=this.byteLength(),F=E||Math.max(1,k);o(k<=F,"byte array longer than desired length"),o(F>0,"Requested array length <= 0"),this.strip();var j=C==="le",Q=new P(F),G,U,$=this.clone();if(j){for(U=0;!$.isZero();U++)G=$.andln(255),$.iushrn(8),Q[U]=G;for(;U<F;U++)Q[U]=0}else{for(U=0;U<F-k;U++)Q[U]=0;for(U=0;!$.isZero();U++)G=$.andln(255),$.iushrn(8),Q[F-U-1]=G}return Q},Math.clz32?l.prototype._countBits=function(P){return 32-Math.clz32(P)}:l.prototype._countBits=function(P){var C=P,E=0;return C>=4096&&(E+=13,C>>>=13),C>=64&&(E+=7,C>>>=7),C>=8&&(E+=4,C>>>=4),C>=2&&(E+=2,C>>>=2),E+C},l.prototype._zeroBits=function(P){if(P===0)return 26;var C=P,E=0;return C&8191||(E+=13,C>>>=13),C&127||(E+=7,C>>>=7),C&15||(E+=4,C>>>=4),C&3||(E+=2,C>>>=2),C&1||E++,E},l.prototype.bitLength=function(){var P=this.words[this.length-1],C=this._countBits(P);return(this.length-1)*26+C};function a(ee){for(var P=new Array(ee.bitLength()),C=0;C<P.length;C++){var E=C/26|0,k=C%26;P[C]=(ee.words[E]&1<<k)>>>k}return P}l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var P=0,C=0;C<this.length;C++){var E=this._zeroBits(this.words[C]);if(P+=E,E!==26)break}return P},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(P){return this.negative!==0?this.abs().inotn(P).iaddn(1):this.clone()},l.prototype.fromTwos=function(P){return this.testn(P-1)?this.notn(P).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(P){for(;this.length<P.length;)this.words[this.length++]=0;for(var C=0;C<P.length;C++)this.words[C]=this.words[C]|P.words[C];return this.strip()},l.prototype.ior=function(P){return o((this.negative|P.negative)===0),this.iuor(P)},l.prototype.or=function(P){return this.length>P.length?this.clone().ior(P):P.clone().ior(this)},l.prototype.uor=function(P){return this.length>P.length?this.clone().iuor(P):P.clone().iuor(this)},l.prototype.iuand=function(P){var C;this.length>P.length?C=P:C=this;for(var E=0;E<C.length;E++)this.words[E]=this.words[E]&P.words[E];return this.length=C.length,this.strip()},l.prototype.iand=function(P){return o((this.negative|P.negative)===0),this.iuand(P)},l.prototype.and=function(P){return this.length>P.length?this.clone().iand(P):P.clone().iand(this)},l.prototype.uand=function(P){return this.length>P.length?this.clone().iuand(P):P.clone().iuand(this)},l.prototype.iuxor=function(P){var C,E;this.length>P.length?(C=this,E=P):(C=P,E=this);for(var k=0;k<E.length;k++)this.words[k]=C.words[k]^E.words[k];if(this!==C)for(;k<C.length;k++)this.words[k]=C.words[k];return this.length=C.length,this.strip()},l.prototype.ixor=function(P){return o((this.negative|P.negative)===0),this.iuxor(P)},l.prototype.xor=function(P){return this.length>P.length?this.clone().ixor(P):P.clone().ixor(this)},l.prototype.uxor=function(P){return this.length>P.length?this.clone().iuxor(P):P.clone().iuxor(this)},l.prototype.inotn=function(P){o(typeof P=="number"&&P>=0);var C=Math.ceil(P/26)|0,E=P%26;this._expand(C),E>0&&C--;for(var k=0;k<C;k++)this.words[k]=~this.words[k]&67108863;return E>0&&(this.words[k]=~this.words[k]&67108863>>26-E),this.strip()},l.prototype.notn=function(P){return this.clone().inotn(P)},l.prototype.setn=function(P,C){o(typeof P=="number"&&P>=0);var E=P/26|0,k=P%26;return this._expand(E+1),C?this.words[E]=this.words[E]|1<<k:this.words[E]=this.words[E]&~(1<<k),this.strip()},l.prototype.iadd=function(P){var C;if(this.negative!==0&&P.negative===0)return this.negative=0,C=this.isub(P),this.negative^=1,this._normSign();if(this.negative===0&&P.negative!==0)return P.negative=0,C=this.isub(P),P.negative=1,C._normSign();var E,k;this.length>P.length?(E=this,k=P):(E=P,k=this);for(var F=0,j=0;j<k.length;j++)C=(E.words[j]|0)+(k.words[j]|0)+F,this.words[j]=C&67108863,F=C>>>26;for(;F!==0&&j<E.length;j++)C=(E.words[j]|0)+F,this.words[j]=C&67108863,F=C>>>26;if(this.length=E.length,F!==0)this.words[this.length]=F,this.length++;else if(E!==this)for(;j<E.length;j++)this.words[j]=E.words[j];return this},l.prototype.add=function(P){var C;return P.negative!==0&&this.negative===0?(P.negative=0,C=this.sub(P),P.negative^=1,C):P.negative===0&&this.negative!==0?(this.negative=0,C=P.sub(this),this.negative=1,C):this.length>P.length?this.clone().iadd(P):P.clone().iadd(this)},l.prototype.isub=function(P){if(P.negative!==0){P.negative=0;var C=this.iadd(P);return P.negative=1,C._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(P),this.negative=1,this._normSign();var E=this.cmp(P);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;var k,F;E>0?(k=this,F=P):(k=P,F=this);for(var j=0,Q=0;Q<F.length;Q++)C=(k.words[Q]|0)-(F.words[Q]|0)+j,j=C>>26,this.words[Q]=C&67108863;for(;j!==0&&Q<k.length;Q++)C=(k.words[Q]|0)+j,j=C>>26,this.words[Q]=C&67108863;if(j===0&&Q<k.length&&k!==this)for(;Q<k.length;Q++)this.words[Q]=k.words[Q];return this.length=Math.max(this.length,Q),k!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(P){return this.clone().isub(P)};function u(ee,P,C){C.negative=P.negative^ee.negative;var E=ee.length+P.length|0;C.length=E,E=E-1|0;var k=ee.words[0]|0,F=P.words[0]|0,j=k*F,Q=j&67108863,G=j/67108864|0;C.words[0]=Q;for(var U=1;U<E;U++){for(var $=G>>>26,O=G&67108863,oe=Math.min(U,P.length-1),ue=Math.max(0,U-ee.length+1);ue<=oe;ue++){var q=U-ue|0;k=ee.words[q]|0,F=P.words[ue]|0,j=k*F+O,$+=j/67108864|0,O=j&67108863}C.words[U]=O|0,G=$|0}return G!==0?C.words[U]=G|0:C.length--,C.strip()}var y=function(P,C,E){var k=P.words,F=C.words,j=E.words,Q=0,G,U,$,O=k[0]|0,oe=O&8191,ue=O>>>13,q=k[1]|0,pe=q&8191,be=q>>>13,ve=k[2]|0,we=ve&8191,Ce=ve>>>13,Re=k[3]|0,Se=Re&8191,$e=Re>>>13,De=k[4]|0,Ne=De&8191,pt=De>>>13,xt=k[5]|0,Xe=xt&8191,yt=xt>>>13,gt=k[6]|0,ze=gt&8191,et=gt>>>13,at=k[7]|0,Ye=at&8191,lt=at>>>13,dt=k[8]|0,le=dt&8191,ne=dt>>>13,ie=k[9]|0,ge=ie&8191,_e=ie>>>13,Ee=F[0]|0,Te=Ee&8191,Qe=Ee>>>13,ot=F[1]|0,je=ot&8191,ct=ot>>>13,tt=F[2]|0,mt=tt&8191,$t=tt>>>13,Kt=F[3]|0,It=Kt&8191,Vt=Kt>>>13,Pt=F[4]|0,ft=Pt&8191,Nt=Pt>>>13,Ot=F[5]|0,wt=Ot&8191,Lt=Ot>>>13,jt=F[6]|0,nt=jt&8191,St=jt>>>13,ce=F[7]|0,de=ce&8191,he=ce>>>13,te=F[8]|0,ye=te&8191,Ae=te>>>13,Ie=F[9]|0,ke=Ie&8191,Oe=Ie>>>13;E.negative=P.negative^C.negative,E.length=19,G=Math.imul(oe,Te),U=Math.imul(oe,Qe),U=U+Math.imul(ue,Te)|0,$=Math.imul(ue,Qe);var Ge=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,G=Math.imul(pe,Te),U=Math.imul(pe,Qe),U=U+Math.imul(be,Te)|0,$=Math.imul(be,Qe),G=G+Math.imul(oe,je)|0,U=U+Math.imul(oe,ct)|0,U=U+Math.imul(ue,je)|0,$=$+Math.imul(ue,ct)|0;var Ue=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,G=Math.imul(we,Te),U=Math.imul(we,Qe),U=U+Math.imul(Ce,Te)|0,$=Math.imul(Ce,Qe),G=G+Math.imul(pe,je)|0,U=U+Math.imul(pe,ct)|0,U=U+Math.imul(be,je)|0,$=$+Math.imul(be,ct)|0,G=G+Math.imul(oe,mt)|0,U=U+Math.imul(oe,$t)|0,U=U+Math.imul(ue,mt)|0,$=$+Math.imul(ue,$t)|0;var Tt=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,G=Math.imul(Se,Te),U=Math.imul(Se,Qe),U=U+Math.imul($e,Te)|0,$=Math.imul($e,Qe),G=G+Math.imul(we,je)|0,U=U+Math.imul(we,ct)|0,U=U+Math.imul(Ce,je)|0,$=$+Math.imul(Ce,ct)|0,G=G+Math.imul(pe,mt)|0,U=U+Math.imul(pe,$t)|0,U=U+Math.imul(be,mt)|0,$=$+Math.imul(be,$t)|0,G=G+Math.imul(oe,It)|0,U=U+Math.imul(oe,Vt)|0,U=U+Math.imul(ue,It)|0,$=$+Math.imul(ue,Vt)|0;var Ve=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,G=Math.imul(Ne,Te),U=Math.imul(Ne,Qe),U=U+Math.imul(pt,Te)|0,$=Math.imul(pt,Qe),G=G+Math.imul(Se,je)|0,U=U+Math.imul(Se,ct)|0,U=U+Math.imul($e,je)|0,$=$+Math.imul($e,ct)|0,G=G+Math.imul(we,mt)|0,U=U+Math.imul(we,$t)|0,U=U+Math.imul(Ce,mt)|0,$=$+Math.imul(Ce,$t)|0,G=G+Math.imul(pe,It)|0,U=U+Math.imul(pe,Vt)|0,U=U+Math.imul(be,It)|0,$=$+Math.imul(be,Vt)|0,G=G+Math.imul(oe,ft)|0,U=U+Math.imul(oe,Nt)|0,U=U+Math.imul(ue,ft)|0,$=$+Math.imul(ue,Nt)|0;var it=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(it>>>26)|0,it&=67108863,G=Math.imul(Xe,Te),U=Math.imul(Xe,Qe),U=U+Math.imul(yt,Te)|0,$=Math.imul(yt,Qe),G=G+Math.imul(Ne,je)|0,U=U+Math.imul(Ne,ct)|0,U=U+Math.imul(pt,je)|0,$=$+Math.imul(pt,ct)|0,G=G+Math.imul(Se,mt)|0,U=U+Math.imul(Se,$t)|0,U=U+Math.imul($e,mt)|0,$=$+Math.imul($e,$t)|0,G=G+Math.imul(we,It)|0,U=U+Math.imul(we,Vt)|0,U=U+Math.imul(Ce,It)|0,$=$+Math.imul(Ce,Vt)|0,G=G+Math.imul(pe,ft)|0,U=U+Math.imul(pe,Nt)|0,U=U+Math.imul(be,ft)|0,$=$+Math.imul(be,Nt)|0,G=G+Math.imul(oe,wt)|0,U=U+Math.imul(oe,Lt)|0,U=U+Math.imul(ue,wt)|0,$=$+Math.imul(ue,Lt)|0;var st=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(st>>>26)|0,st&=67108863,G=Math.imul(ze,Te),U=Math.imul(ze,Qe),U=U+Math.imul(et,Te)|0,$=Math.imul(et,Qe),G=G+Math.imul(Xe,je)|0,U=U+Math.imul(Xe,ct)|0,U=U+Math.imul(yt,je)|0,$=$+Math.imul(yt,ct)|0,G=G+Math.imul(Ne,mt)|0,U=U+Math.imul(Ne,$t)|0,U=U+Math.imul(pt,mt)|0,$=$+Math.imul(pt,$t)|0,G=G+Math.imul(Se,It)|0,U=U+Math.imul(Se,Vt)|0,U=U+Math.imul($e,It)|0,$=$+Math.imul($e,Vt)|0,G=G+Math.imul(we,ft)|0,U=U+Math.imul(we,Nt)|0,U=U+Math.imul(Ce,ft)|0,$=$+Math.imul(Ce,Nt)|0,G=G+Math.imul(pe,wt)|0,U=U+Math.imul(pe,Lt)|0,U=U+Math.imul(be,wt)|0,$=$+Math.imul(be,Lt)|0,G=G+Math.imul(oe,nt)|0,U=U+Math.imul(oe,St)|0,U=U+Math.imul(ue,nt)|0,$=$+Math.imul(ue,St)|0;var ht=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(ht>>>26)|0,ht&=67108863,G=Math.imul(Ye,Te),U=Math.imul(Ye,Qe),U=U+Math.imul(lt,Te)|0,$=Math.imul(lt,Qe),G=G+Math.imul(ze,je)|0,U=U+Math.imul(ze,ct)|0,U=U+Math.imul(et,je)|0,$=$+Math.imul(et,ct)|0,G=G+Math.imul(Xe,mt)|0,U=U+Math.imul(Xe,$t)|0,U=U+Math.imul(yt,mt)|0,$=$+Math.imul(yt,$t)|0,G=G+Math.imul(Ne,It)|0,U=U+Math.imul(Ne,Vt)|0,U=U+Math.imul(pt,It)|0,$=$+Math.imul(pt,Vt)|0,G=G+Math.imul(Se,ft)|0,U=U+Math.imul(Se,Nt)|0,U=U+Math.imul($e,ft)|0,$=$+Math.imul($e,Nt)|0,G=G+Math.imul(we,wt)|0,U=U+Math.imul(we,Lt)|0,U=U+Math.imul(Ce,wt)|0,$=$+Math.imul(Ce,Lt)|0,G=G+Math.imul(pe,nt)|0,U=U+Math.imul(pe,St)|0,U=U+Math.imul(be,nt)|0,$=$+Math.imul(be,St)|0,G=G+Math.imul(oe,de)|0,U=U+Math.imul(oe,he)|0,U=U+Math.imul(ue,de)|0,$=$+Math.imul(ue,he)|0;var Et=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(Et>>>26)|0,Et&=67108863,G=Math.imul(le,Te),U=Math.imul(le,Qe),U=U+Math.imul(ne,Te)|0,$=Math.imul(ne,Qe),G=G+Math.imul(Ye,je)|0,U=U+Math.imul(Ye,ct)|0,U=U+Math.imul(lt,je)|0,$=$+Math.imul(lt,ct)|0,G=G+Math.imul(ze,mt)|0,U=U+Math.imul(ze,$t)|0,U=U+Math.imul(et,mt)|0,$=$+Math.imul(et,$t)|0,G=G+Math.imul(Xe,It)|0,U=U+Math.imul(Xe,Vt)|0,U=U+Math.imul(yt,It)|0,$=$+Math.imul(yt,Vt)|0,G=G+Math.imul(Ne,ft)|0,U=U+Math.imul(Ne,Nt)|0,U=U+Math.imul(pt,ft)|0,$=$+Math.imul(pt,Nt)|0,G=G+Math.imul(Se,wt)|0,U=U+Math.imul(Se,Lt)|0,U=U+Math.imul($e,wt)|0,$=$+Math.imul($e,Lt)|0,G=G+Math.imul(we,nt)|0,U=U+Math.imul(we,St)|0,U=U+Math.imul(Ce,nt)|0,$=$+Math.imul(Ce,St)|0,G=G+Math.imul(pe,de)|0,U=U+Math.imul(pe,he)|0,U=U+Math.imul(be,de)|0,$=$+Math.imul(be,he)|0,G=G+Math.imul(oe,ye)|0,U=U+Math.imul(oe,Ae)|0,U=U+Math.imul(ue,ye)|0,$=$+Math.imul(ue,Ae)|0;var bt=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(bt>>>26)|0,bt&=67108863,G=Math.imul(ge,Te),U=Math.imul(ge,Qe),U=U+Math.imul(_e,Te)|0,$=Math.imul(_e,Qe),G=G+Math.imul(le,je)|0,U=U+Math.imul(le,ct)|0,U=U+Math.imul(ne,je)|0,$=$+Math.imul(ne,ct)|0,G=G+Math.imul(Ye,mt)|0,U=U+Math.imul(Ye,$t)|0,U=U+Math.imul(lt,mt)|0,$=$+Math.imul(lt,$t)|0,G=G+Math.imul(ze,It)|0,U=U+Math.imul(ze,Vt)|0,U=U+Math.imul(et,It)|0,$=$+Math.imul(et,Vt)|0,G=G+Math.imul(Xe,ft)|0,U=U+Math.imul(Xe,Nt)|0,U=U+Math.imul(yt,ft)|0,$=$+Math.imul(yt,Nt)|0,G=G+Math.imul(Ne,wt)|0,U=U+Math.imul(Ne,Lt)|0,U=U+Math.imul(pt,wt)|0,$=$+Math.imul(pt,Lt)|0,G=G+Math.imul(Se,nt)|0,U=U+Math.imul(Se,St)|0,U=U+Math.imul($e,nt)|0,$=$+Math.imul($e,St)|0,G=G+Math.imul(we,de)|0,U=U+Math.imul(we,he)|0,U=U+Math.imul(Ce,de)|0,$=$+Math.imul(Ce,he)|0,G=G+Math.imul(pe,ye)|0,U=U+Math.imul(pe,Ae)|0,U=U+Math.imul(be,ye)|0,$=$+Math.imul(be,Ae)|0,G=G+Math.imul(oe,ke)|0,U=U+Math.imul(oe,Oe)|0,U=U+Math.imul(ue,ke)|0,$=$+Math.imul(ue,Oe)|0;var _t=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(_t>>>26)|0,_t&=67108863,G=Math.imul(ge,je),U=Math.imul(ge,ct),U=U+Math.imul(_e,je)|0,$=Math.imul(_e,ct),G=G+Math.imul(le,mt)|0,U=U+Math.imul(le,$t)|0,U=U+Math.imul(ne,mt)|0,$=$+Math.imul(ne,$t)|0,G=G+Math.imul(Ye,It)|0,U=U+Math.imul(Ye,Vt)|0,U=U+Math.imul(lt,It)|0,$=$+Math.imul(lt,Vt)|0,G=G+Math.imul(ze,ft)|0,U=U+Math.imul(ze,Nt)|0,U=U+Math.imul(et,ft)|0,$=$+Math.imul(et,Nt)|0,G=G+Math.imul(Xe,wt)|0,U=U+Math.imul(Xe,Lt)|0,U=U+Math.imul(yt,wt)|0,$=$+Math.imul(yt,Lt)|0,G=G+Math.imul(Ne,nt)|0,U=U+Math.imul(Ne,St)|0,U=U+Math.imul(pt,nt)|0,$=$+Math.imul(pt,St)|0,G=G+Math.imul(Se,de)|0,U=U+Math.imul(Se,he)|0,U=U+Math.imul($e,de)|0,$=$+Math.imul($e,he)|0,G=G+Math.imul(we,ye)|0,U=U+Math.imul(we,Ae)|0,U=U+Math.imul(Ce,ye)|0,$=$+Math.imul(Ce,Ae)|0,G=G+Math.imul(pe,ke)|0,U=U+Math.imul(pe,Oe)|0,U=U+Math.imul(be,ke)|0,$=$+Math.imul(be,Oe)|0;var vt=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(vt>>>26)|0,vt&=67108863,G=Math.imul(ge,mt),U=Math.imul(ge,$t),U=U+Math.imul(_e,mt)|0,$=Math.imul(_e,$t),G=G+Math.imul(le,It)|0,U=U+Math.imul(le,Vt)|0,U=U+Math.imul(ne,It)|0,$=$+Math.imul(ne,Vt)|0,G=G+Math.imul(Ye,ft)|0,U=U+Math.imul(Ye,Nt)|0,U=U+Math.imul(lt,ft)|0,$=$+Math.imul(lt,Nt)|0,G=G+Math.imul(ze,wt)|0,U=U+Math.imul(ze,Lt)|0,U=U+Math.imul(et,wt)|0,$=$+Math.imul(et,Lt)|0,G=G+Math.imul(Xe,nt)|0,U=U+Math.imul(Xe,St)|0,U=U+Math.imul(yt,nt)|0,$=$+Math.imul(yt,St)|0,G=G+Math.imul(Ne,de)|0,U=U+Math.imul(Ne,he)|0,U=U+Math.imul(pt,de)|0,$=$+Math.imul(pt,he)|0,G=G+Math.imul(Se,ye)|0,U=U+Math.imul(Se,Ae)|0,U=U+Math.imul($e,ye)|0,$=$+Math.imul($e,Ae)|0,G=G+Math.imul(we,ke)|0,U=U+Math.imul(we,Oe)|0,U=U+Math.imul(Ce,ke)|0,$=$+Math.imul(Ce,Oe)|0;var We=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(We>>>26)|0,We&=67108863,G=Math.imul(ge,It),U=Math.imul(ge,Vt),U=U+Math.imul(_e,It)|0,$=Math.imul(_e,Vt),G=G+Math.imul(le,ft)|0,U=U+Math.imul(le,Nt)|0,U=U+Math.imul(ne,ft)|0,$=$+Math.imul(ne,Nt)|0,G=G+Math.imul(Ye,wt)|0,U=U+Math.imul(Ye,Lt)|0,U=U+Math.imul(lt,wt)|0,$=$+Math.imul(lt,Lt)|0,G=G+Math.imul(ze,nt)|0,U=U+Math.imul(ze,St)|0,U=U+Math.imul(et,nt)|0,$=$+Math.imul(et,St)|0,G=G+Math.imul(Xe,de)|0,U=U+Math.imul(Xe,he)|0,U=U+Math.imul(yt,de)|0,$=$+Math.imul(yt,he)|0,G=G+Math.imul(Ne,ye)|0,U=U+Math.imul(Ne,Ae)|0,U=U+Math.imul(pt,ye)|0,$=$+Math.imul(pt,Ae)|0,G=G+Math.imul(Se,ke)|0,U=U+Math.imul(Se,Oe)|0,U=U+Math.imul($e,ke)|0,$=$+Math.imul($e,Oe)|0;var rt=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(rt>>>26)|0,rt&=67108863,G=Math.imul(ge,ft),U=Math.imul(ge,Nt),U=U+Math.imul(_e,ft)|0,$=Math.imul(_e,Nt),G=G+Math.imul(le,wt)|0,U=U+Math.imul(le,Lt)|0,U=U+Math.imul(ne,wt)|0,$=$+Math.imul(ne,Lt)|0,G=G+Math.imul(Ye,nt)|0,U=U+Math.imul(Ye,St)|0,U=U+Math.imul(lt,nt)|0,$=$+Math.imul(lt,St)|0,G=G+Math.imul(ze,de)|0,U=U+Math.imul(ze,he)|0,U=U+Math.imul(et,de)|0,$=$+Math.imul(et,he)|0,G=G+Math.imul(Xe,ye)|0,U=U+Math.imul(Xe,Ae)|0,U=U+Math.imul(yt,ye)|0,$=$+Math.imul(yt,Ae)|0,G=G+Math.imul(Ne,ke)|0,U=U+Math.imul(Ne,Oe)|0,U=U+Math.imul(pt,ke)|0,$=$+Math.imul(pt,Oe)|0;var qe=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(qe>>>26)|0,qe&=67108863,G=Math.imul(ge,wt),U=Math.imul(ge,Lt),U=U+Math.imul(_e,wt)|0,$=Math.imul(_e,Lt),G=G+Math.imul(le,nt)|0,U=U+Math.imul(le,St)|0,U=U+Math.imul(ne,nt)|0,$=$+Math.imul(ne,St)|0,G=G+Math.imul(Ye,de)|0,U=U+Math.imul(Ye,he)|0,U=U+Math.imul(lt,de)|0,$=$+Math.imul(lt,he)|0,G=G+Math.imul(ze,ye)|0,U=U+Math.imul(ze,Ae)|0,U=U+Math.imul(et,ye)|0,$=$+Math.imul(et,Ae)|0,G=G+Math.imul(Xe,ke)|0,U=U+Math.imul(Xe,Oe)|0,U=U+Math.imul(yt,ke)|0,$=$+Math.imul(yt,Oe)|0;var Ze=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,G=Math.imul(ge,nt),U=Math.imul(ge,St),U=U+Math.imul(_e,nt)|0,$=Math.imul(_e,St),G=G+Math.imul(le,de)|0,U=U+Math.imul(le,he)|0,U=U+Math.imul(ne,de)|0,$=$+Math.imul(ne,he)|0,G=G+Math.imul(Ye,ye)|0,U=U+Math.imul(Ye,Ae)|0,U=U+Math.imul(lt,ye)|0,$=$+Math.imul(lt,Ae)|0,G=G+Math.imul(ze,ke)|0,U=U+Math.imul(ze,Oe)|0,U=U+Math.imul(et,ke)|0,$=$+Math.imul(et,Oe)|0;var Je=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(Je>>>26)|0,Je&=67108863,G=Math.imul(ge,de),U=Math.imul(ge,he),U=U+Math.imul(_e,de)|0,$=Math.imul(_e,he),G=G+Math.imul(le,ye)|0,U=U+Math.imul(le,Ae)|0,U=U+Math.imul(ne,ye)|0,$=$+Math.imul(ne,Ae)|0,G=G+Math.imul(Ye,ke)|0,U=U+Math.imul(Ye,Oe)|0,U=U+Math.imul(lt,ke)|0,$=$+Math.imul(lt,Oe)|0;var He=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(He>>>26)|0,He&=67108863,G=Math.imul(ge,ye),U=Math.imul(ge,Ae),U=U+Math.imul(_e,ye)|0,$=Math.imul(_e,Ae),G=G+Math.imul(le,ke)|0,U=U+Math.imul(le,Oe)|0,U=U+Math.imul(ne,ke)|0,$=$+Math.imul(ne,Oe)|0;var Pe=(Q+G|0)+((U&8191)<<13)|0;Q=($+(U>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,G=Math.imul(ge,ke),U=Math.imul(ge,Oe),U=U+Math.imul(_e,ke)|0,$=Math.imul(_e,Oe);var Be=(Q+G|0)+((U&8191)<<13)|0;return Q=($+(U>>>13)|0)+(Be>>>26)|0,Be&=67108863,j[0]=Ge,j[1]=Ue,j[2]=Tt,j[3]=Ve,j[4]=it,j[5]=st,j[6]=ht,j[7]=Et,j[8]=bt,j[9]=_t,j[10]=vt,j[11]=We,j[12]=rt,j[13]=qe,j[14]=Ze,j[15]=Je,j[16]=He,j[17]=Pe,j[18]=Be,Q!==0&&(j[19]=Q,E.length++),E};Math.imul||(y=u);function b(ee,P,C){C.negative=P.negative^ee.negative,C.length=ee.length+P.length;for(var E=0,k=0,F=0;F<C.length-1;F++){var j=k;k=0;for(var Q=E&67108863,G=Math.min(F,P.length-1),U=Math.max(0,F-ee.length+1);U<=G;U++){var $=F-U,O=ee.words[$]|0,oe=P.words[U]|0,ue=O*oe,q=ue&67108863;j=j+(ue/67108864|0)|0,q=q+Q|0,Q=q&67108863,j=j+(q>>>26)|0,k+=j>>>26,j&=67108863}C.words[F]=Q,E=j,j=k}return E!==0?C.words[F]=E:C.length--,C.strip()}function w(ee,P,C){var E=new T;return E.mulp(ee,P,C)}l.prototype.mulTo=function(P,C){var E,k=this.length+P.length;return this.length===10&&P.length===10?E=y(this,P,C):k<63?E=u(this,P,C):k<1024?E=b(this,P,C):E=w(this,P,C),E};function T(ee,P){this.x=ee,this.y=P}T.prototype.makeRBT=function(P){for(var C=new Array(P),E=l.prototype._countBits(P)-1,k=0;k<P;k++)C[k]=this.revBin(k,E,P);return C},T.prototype.revBin=function(P,C,E){if(P===0||P===E-1)return P;for(var k=0,F=0;F<C;F++)k|=(P&1)<<C-F-1,P>>=1;return k},T.prototype.permute=function(P,C,E,k,F,j){for(var Q=0;Q<j;Q++)k[Q]=C[P[Q]],F[Q]=E[P[Q]]},T.prototype.transform=function(P,C,E,k,F,j){this.permute(j,P,C,E,k,F);for(var Q=1;Q<F;Q<<=1)for(var G=Q<<1,U=Math.cos(2*Math.PI/G),$=Math.sin(2*Math.PI/G),O=0;O<F;O+=G)for(var oe=U,ue=$,q=0;q<Q;q++){var pe=E[O+q],be=k[O+q],ve=E[O+q+Q],we=k[O+q+Q],Ce=oe*ve-ue*we;we=oe*we+ue*ve,ve=Ce,E[O+q]=pe+ve,k[O+q]=be+we,E[O+q+Q]=pe-ve,k[O+q+Q]=be-we,q!==G&&(Ce=U*oe-$*ue,ue=U*ue+$*oe,oe=Ce)}},T.prototype.guessLen13b=function(P,C){var E=Math.max(C,P)|1,k=E&1,F=0;for(E=E/2|0;E;E=E>>>1)F++;return 1<<F+1+k},T.prototype.conjugate=function(P,C,E){if(!(E<=1))for(var k=0;k<E/2;k++){var F=P[k];P[k]=P[E-k-1],P[E-k-1]=F,F=C[k],C[k]=-C[E-k-1],C[E-k-1]=-F}},T.prototype.normalize13b=function(P,C){for(var E=0,k=0;k<C/2;k++){var F=Math.round(P[2*k+1]/C)*8192+Math.round(P[2*k]/C)+E;P[k]=F&67108863,F<67108864?E=0:E=F/67108864|0}return P},T.prototype.convert13b=function(P,C,E,k){for(var F=0,j=0;j<C;j++)F=F+(P[j]|0),E[2*j]=F&8191,F=F>>>13,E[2*j+1]=F&8191,F=F>>>13;for(j=2*C;j<k;++j)E[j]=0;o(F===0),o((F&-8192)===0)},T.prototype.stub=function(P){for(var C=new Array(P),E=0;E<P;E++)C[E]=0;return C},T.prototype.mulp=function(P,C,E){var k=2*this.guessLen13b(P.length,C.length),F=this.makeRBT(k),j=this.stub(k),Q=new Array(k),G=new Array(k),U=new Array(k),$=new Array(k),O=new Array(k),oe=new Array(k),ue=E.words;ue.length=k,this.convert13b(P.words,P.length,Q,k),this.convert13b(C.words,C.length,$,k),this.transform(Q,j,G,U,k,F),this.transform($,j,O,oe,k,F);for(var q=0;q<k;q++){var pe=G[q]*O[q]-U[q]*oe[q];U[q]=G[q]*oe[q]+U[q]*O[q],G[q]=pe}return this.conjugate(G,U,k),this.transform(G,U,ue,j,k,F),this.conjugate(ue,j,k),this.normalize13b(ue,k),E.negative=P.negative^C.negative,E.length=P.length+C.length,E.strip()},l.prototype.mul=function(P){var C=new l(null);return C.words=new Array(this.length+P.length),this.mulTo(P,C)},l.prototype.mulf=function(P){var C=new l(null);return C.words=new Array(this.length+P.length),w(this,P,C)},l.prototype.imul=function(P){return this.clone().mulTo(P,this)},l.prototype.imuln=function(P){o(typeof P=="number"),o(P<67108864);for(var C=0,E=0;E<this.length;E++){var k=(this.words[E]|0)*P,F=(k&67108863)+(C&67108863);C>>=26,C+=k/67108864|0,C+=F>>>26,this.words[E]=F&67108863}return C!==0&&(this.words[E]=C,this.length++),this},l.prototype.muln=function(P){return this.clone().imuln(P)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(P){var C=a(P);if(C.length===0)return new l(1);for(var E=this,k=0;k<C.length&&C[k]===0;k++,E=E.sqr());if(++k<C.length)for(var F=E.sqr();k<C.length;k++,F=F.sqr())C[k]!==0&&(E=E.mul(F));return E},l.prototype.iushln=function(P){o(typeof P=="number"&&P>=0);var C=P%26,E=(P-C)/26,k=67108863>>>26-C<<26-C,F;if(C!==0){var j=0;for(F=0;F<this.length;F++){var Q=this.words[F]&k,G=(this.words[F]|0)-Q<<C;this.words[F]=G|j,j=Q>>>26-C}j&&(this.words[F]=j,this.length++)}if(E!==0){for(F=this.length-1;F>=0;F--)this.words[F+E]=this.words[F];for(F=0;F<E;F++)this.words[F]=0;this.length+=E}return this.strip()},l.prototype.ishln=function(P){return o(this.negative===0),this.iushln(P)},l.prototype.iushrn=function(P,C,E){o(typeof P=="number"&&P>=0);var k;C?k=(C-C%26)/26:k=0;var F=P%26,j=Math.min((P-F)/26,this.length),Q=67108863^67108863>>>F<<F,G=E;if(k-=j,k=Math.max(0,k),G){for(var U=0;U<j;U++)G.words[U]=this.words[U];G.length=j}if(j!==0)if(this.length>j)for(this.length-=j,U=0;U<this.length;U++)this.words[U]=this.words[U+j];else this.words[0]=0,this.length=1;var $=0;for(U=this.length-1;U>=0&&($!==0||U>=k);U--){var O=this.words[U]|0;this.words[U]=$<<26-F|O>>>F,$=O&Q}return G&&$!==0&&(G.words[G.length++]=$),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(P,C,E){return o(this.negative===0),this.iushrn(P,C,E)},l.prototype.shln=function(P){return this.clone().ishln(P)},l.prototype.ushln=function(P){return this.clone().iushln(P)},l.prototype.shrn=function(P){return this.clone().ishrn(P)},l.prototype.ushrn=function(P){return this.clone().iushrn(P)},l.prototype.testn=function(P){o(typeof P=="number"&&P>=0);var C=P%26,E=(P-C)/26,k=1<<C;if(this.length<=E)return!1;var F=this.words[E];return!!(F&k)},l.prototype.imaskn=function(P){o(typeof P=="number"&&P>=0);var C=P%26,E=(P-C)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(C!==0&&E++,this.length=Math.min(E,this.length),C!==0){var k=67108863^67108863>>>C<<C;this.words[this.length-1]&=k}return this.strip()},l.prototype.maskn=function(P){return this.clone().imaskn(P)},l.prototype.iaddn=function(P){return o(typeof P=="number"),o(P<67108864),P<0?this.isubn(-P):this.negative!==0?this.length===1&&(this.words[0]|0)<P?(this.words[0]=P-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(P),this.negative=1,this):this._iaddn(P)},l.prototype._iaddn=function(P){this.words[0]+=P;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},l.prototype.isubn=function(P){if(o(typeof P=="number"),o(P<67108864),P<0)return this.iaddn(-P);if(this.negative!==0)return this.negative=0,this.iaddn(P),this.negative=1,this;if(this.words[0]-=P,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this.strip()},l.prototype.addn=function(P){return this.clone().iaddn(P)},l.prototype.subn=function(P){return this.clone().isubn(P)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(P,C,E){var k=P.length+E,F;this._expand(k);var j,Q=0;for(F=0;F<P.length;F++){j=(this.words[F+E]|0)+Q;var G=(P.words[F]|0)*C;j-=G&67108863,Q=(j>>26)-(G/67108864|0),this.words[F+E]=j&67108863}for(;F<this.length-E;F++)j=(this.words[F+E]|0)+Q,Q=j>>26,this.words[F+E]=j&67108863;if(Q===0)return this.strip();for(o(Q===-1),Q=0,F=0;F<this.length;F++)j=-(this.words[F]|0)+Q,Q=j>>26,this.words[F]=j&67108863;return this.negative=1,this.strip()},l.prototype._wordDiv=function(P,C){var E=this.length-P.length,k=this.clone(),F=P,j=F.words[F.length-1]|0,Q=this._countBits(j);E=26-Q,E!==0&&(F=F.ushln(E),k.iushln(E),j=F.words[F.length-1]|0);var G=k.length-F.length,U;if(C!=="mod"){U=new l(null),U.length=G+1,U.words=new Array(U.length);for(var $=0;$<U.length;$++)U.words[$]=0}var O=k.clone()._ishlnsubmul(F,1,G);O.negative===0&&(k=O,U&&(U.words[G]=1));for(var oe=G-1;oe>=0;oe--){var ue=(k.words[F.length+oe]|0)*67108864+(k.words[F.length+oe-1]|0);for(ue=Math.min(ue/j|0,67108863),k._ishlnsubmul(F,ue,oe);k.negative!==0;)ue--,k.negative=0,k._ishlnsubmul(F,1,oe),k.isZero()||(k.negative^=1);U&&(U.words[oe]=ue)}return U&&U.strip(),k.strip(),C!=="div"&&E!==0&&k.iushrn(E),{div:U||null,mod:k}},l.prototype.divmod=function(P,C,E){if(o(!P.isZero()),this.isZero())return{div:new l(0),mod:new l(0)};var k,F,j;return this.negative!==0&&P.negative===0?(j=this.neg().divmod(P,C),C!=="mod"&&(k=j.div.neg()),C!=="div"&&(F=j.mod.neg(),E&&F.negative!==0&&F.iadd(P)),{div:k,mod:F}):this.negative===0&&P.negative!==0?(j=this.divmod(P.neg(),C),C!=="mod"&&(k=j.div.neg()),{div:k,mod:j.mod}):this.negative&P.negative?(j=this.neg().divmod(P.neg(),C),C!=="div"&&(F=j.mod.neg(),E&&F.negative!==0&&F.isub(P)),{div:j.div,mod:F}):P.length>this.length||this.cmp(P)<0?{div:new l(0),mod:this}:P.length===1?C==="div"?{div:this.divn(P.words[0]),mod:null}:C==="mod"?{div:null,mod:new l(this.modn(P.words[0]))}:{div:this.divn(P.words[0]),mod:new l(this.modn(P.words[0]))}:this._wordDiv(P,C)},l.prototype.div=function(P){return this.divmod(P,"div",!1).div},l.prototype.mod=function(P){return this.divmod(P,"mod",!1).mod},l.prototype.umod=function(P){return this.divmod(P,"mod",!0).mod},l.prototype.divRound=function(P){var C=this.divmod(P);if(C.mod.isZero())return C.div;var E=C.div.negative!==0?C.mod.isub(P):C.mod,k=P.ushrn(1),F=P.andln(1),j=E.cmp(k);return j<0||F===1&&j===0?C.div:C.div.negative!==0?C.div.isubn(1):C.div.iaddn(1)},l.prototype.modn=function(P){o(P<=67108863);for(var C=(1<<26)%P,E=0,k=this.length-1;k>=0;k--)E=(C*E+(this.words[k]|0))%P;return E},l.prototype.idivn=function(P){o(P<=67108863);for(var C=0,E=this.length-1;E>=0;E--){var k=(this.words[E]|0)+C*67108864;this.words[E]=k/P|0,C=k%P}return this.strip()},l.prototype.divn=function(P){return this.clone().idivn(P)},l.prototype.egcd=function(P){o(P.negative===0),o(!P.isZero());var C=this,E=P.clone();C.negative!==0?C=C.umod(P):C=C.clone();for(var k=new l(1),F=new l(0),j=new l(0),Q=new l(1),G=0;C.isEven()&&E.isEven();)C.iushrn(1),E.iushrn(1),++G;for(var U=E.clone(),$=C.clone();!C.isZero();){for(var O=0,oe=1;!(C.words[0]&oe)&&O<26;++O,oe<<=1);if(O>0)for(C.iushrn(O);O-- >0;)(k.isOdd()||F.isOdd())&&(k.iadd(U),F.isub($)),k.iushrn(1),F.iushrn(1);for(var ue=0,q=1;!(E.words[0]&q)&&ue<26;++ue,q<<=1);if(ue>0)for(E.iushrn(ue);ue-- >0;)(j.isOdd()||Q.isOdd())&&(j.iadd(U),Q.isub($)),j.iushrn(1),Q.iushrn(1);C.cmp(E)>=0?(C.isub(E),k.isub(j),F.isub(Q)):(E.isub(C),j.isub(k),Q.isub(F))}return{a:j,b:Q,gcd:E.iushln(G)}},l.prototype._invmp=function(P){o(P.negative===0),o(!P.isZero());var C=this,E=P.clone();C.negative!==0?C=C.umod(P):C=C.clone();for(var k=new l(1),F=new l(0),j=E.clone();C.cmpn(1)>0&&E.cmpn(1)>0;){for(var Q=0,G=1;!(C.words[0]&G)&&Q<26;++Q,G<<=1);if(Q>0)for(C.iushrn(Q);Q-- >0;)k.isOdd()&&k.iadd(j),k.iushrn(1);for(var U=0,$=1;!(E.words[0]&$)&&U<26;++U,$<<=1);if(U>0)for(E.iushrn(U);U-- >0;)F.isOdd()&&F.iadd(j),F.iushrn(1);C.cmp(E)>=0?(C.isub(E),k.isub(F)):(E.isub(C),F.isub(k))}var O;return C.cmpn(1)===0?O=k:O=F,O.cmpn(0)<0&&O.iadd(P),O},l.prototype.gcd=function(P){if(this.isZero())return P.abs();if(P.isZero())return this.abs();var C=this.clone(),E=P.clone();C.negative=0,E.negative=0;for(var k=0;C.isEven()&&E.isEven();k++)C.iushrn(1),E.iushrn(1);do{for(;C.isEven();)C.iushrn(1);for(;E.isEven();)E.iushrn(1);var F=C.cmp(E);if(F<0){var j=C;C=E,E=j}else if(F===0||E.cmpn(1)===0)break;C.isub(E)}while(!0);return E.iushln(k)},l.prototype.invm=function(P){return this.egcd(P).a.umod(P)},l.prototype.isEven=function(){return(this.words[0]&1)===0},l.prototype.isOdd=function(){return(this.words[0]&1)===1},l.prototype.andln=function(P){return this.words[0]&P},l.prototype.bincn=function(P){o(typeof P=="number");var C=P%26,E=(P-C)/26,k=1<<C;if(this.length<=E)return this._expand(E+1),this.words[E]|=k,this;for(var F=k,j=E;F!==0&&j<this.length;j++){var Q=this.words[j]|0;Q+=F,F=Q>>>26,Q&=67108863,this.words[j]=Q}return F!==0&&(this.words[j]=F,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(P){var C=P<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;this.strip();var E;if(this.length>1)E=1;else{C&&(P=-P),o(P<=67108863,"Number is too big");var k=this.words[0]|0;E=k===P?0:k<P?-1:1}return this.negative!==0?-E|0:E},l.prototype.cmp=function(P){if(this.negative!==0&&P.negative===0)return-1;if(this.negative===0&&P.negative!==0)return 1;var C=this.ucmp(P);return this.negative!==0?-C|0:C},l.prototype.ucmp=function(P){if(this.length>P.length)return 1;if(this.length<P.length)return-1;for(var C=0,E=this.length-1;E>=0;E--){var k=this.words[E]|0,F=P.words[E]|0;if(k!==F){k<F?C=-1:k>F&&(C=1);break}}return C},l.prototype.gtn=function(P){return this.cmpn(P)===1},l.prototype.gt=function(P){return this.cmp(P)===1},l.prototype.gten=function(P){return this.cmpn(P)>=0},l.prototype.gte=function(P){return this.cmp(P)>=0},l.prototype.ltn=function(P){return this.cmpn(P)===-1},l.prototype.lt=function(P){return this.cmp(P)===-1},l.prototype.lten=function(P){return this.cmpn(P)<=0},l.prototype.lte=function(P){return this.cmp(P)<=0},l.prototype.eqn=function(P){return this.cmpn(P)===0},l.prototype.eq=function(P){return this.cmp(P)===0},l.red=function(P){return new se(P)},l.prototype.toRed=function(P){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),P.convertTo(this)._forceRed(P)},l.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(P){return this.red=P,this},l.prototype.forceRed=function(P){return o(!this.red,"Already a number in reduction context"),this._forceRed(P)},l.prototype.redAdd=function(P){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,P)},l.prototype.redIAdd=function(P){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,P)},l.prototype.redSub=function(P){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,P)},l.prototype.redISub=function(P){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,P)},l.prototype.redShl=function(P){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,P)},l.prototype.redMul=function(P){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,P),this.red.mul(this,P)},l.prototype.redIMul=function(P){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,P),this.red.imul(this,P)},l.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(P){return o(this.red&&!P.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,P)};var B={k256:null,p224:null,p192:null,p25519:null};function H(ee,P){this.name=ee,this.p=new l(P,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var P=new l(null);return P.words=new Array(Math.ceil(this.n/13)),P},H.prototype.ireduce=function(P){var C=P,E;do this.split(C,this.tmp),C=this.imulK(C),C=C.iadd(this.tmp),E=C.bitLength();while(E>this.n);var k=E<this.n?-1:C.ucmp(this.p);return k===0?(C.words[0]=0,C.length=1):k>0?C.isub(this.p):C.strip!==void 0?C.strip():C._strip(),C},H.prototype.split=function(P,C){P.iushrn(this.n,0,C)},H.prototype.imulK=function(P){return P.imul(this.k)};function J(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}c(J,H),J.prototype.split=function(P,C){for(var E=4194303,k=Math.min(P.length,9),F=0;F<k;F++)C.words[F]=P.words[F];if(C.length=k,P.length<=9){P.words[0]=0,P.length=1;return}var j=P.words[9];for(C.words[C.length++]=j&E,F=10;F<P.length;F++){var Q=P.words[F]|0;P.words[F-10]=(Q&E)<<4|j>>>22,j=Q}j>>>=22,P.words[F-10]=j,j===0&&P.length>10?P.length-=10:P.length-=9},J.prototype.imulK=function(P){P.words[P.length]=0,P.words[P.length+1]=0,P.length+=2;for(var C=0,E=0;E<P.length;E++){var k=P.words[E]|0;C+=k*977,P.words[E]=C&67108863,C=k*64+(C/67108864|0)}return P.words[P.length-1]===0&&(P.length--,P.words[P.length-1]===0&&P.length--),P};function W(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}c(W,H);function fe(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}c(fe,H);function re(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}c(re,H),re.prototype.imulK=function(P){for(var C=0,E=0;E<P.length;E++){var k=(P.words[E]|0)*19+C,F=k&67108863;k>>>=26,P.words[E]=F,C=k}return C!==0&&(P.words[P.length++]=C),P},l._prime=function(P){if(B[P])return B[P];var C;if(P==="k256")C=new J;else if(P==="p224")C=new W;else if(P==="p192")C=new fe;else if(P==="p25519")C=new re;else throw new Error("Unknown prime "+P);return B[P]=C,C};function se(ee){if(typeof ee=="string"){var P=l._prime(ee);this.m=P.p,this.prime=P}else o(ee.gtn(1),"modulus must be greater than 1"),this.m=ee,this.prime=null}se.prototype._verify1=function(P){o(P.negative===0,"red works only with positives"),o(P.red,"red works only with red numbers")},se.prototype._verify2=function(P,C){o((P.negative|C.negative)===0,"red works only with positives"),o(P.red&&P.red===C.red,"red works only with red numbers")},se.prototype.imod=function(P){return this.prime?this.prime.ireduce(P)._forceRed(this):P.umod(this.m)._forceRed(this)},se.prototype.neg=function(P){return P.isZero()?P.clone():this.m.sub(P)._forceRed(this)},se.prototype.add=function(P,C){this._verify2(P,C);var E=P.add(C);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},se.prototype.iadd=function(P,C){this._verify2(P,C);var E=P.iadd(C);return E.cmp(this.m)>=0&&E.isub(this.m),E},se.prototype.sub=function(P,C){this._verify2(P,C);var E=P.sub(C);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},se.prototype.isub=function(P,C){this._verify2(P,C);var E=P.isub(C);return E.cmpn(0)<0&&E.iadd(this.m),E},se.prototype.shl=function(P,C){return this._verify1(P),this.imod(P.ushln(C))},se.prototype.imul=function(P,C){return this._verify2(P,C),this.imod(P.imul(C))},se.prototype.mul=function(P,C){return this._verify2(P,C),this.imod(P.mul(C))},se.prototype.isqr=function(P){return this.imul(P,P.clone())},se.prototype.sqr=function(P){return this.mul(P,P)},se.prototype.sqrt=function(P){if(P.isZero())return P.clone();var C=this.m.andln(3);if(o(C%2===1),C===3){var E=this.m.add(new l(1)).iushrn(2);return this.pow(P,E)}for(var k=this.m.subn(1),F=0;!k.isZero()&&k.andln(1)===0;)F++,k.iushrn(1);o(!k.isZero());var j=new l(1).toRed(this),Q=j.redNeg(),G=this.m.subn(1).iushrn(1),U=this.m.bitLength();for(U=new l(2*U*U).toRed(this);this.pow(U,G).cmp(Q)!==0;)U.redIAdd(Q);for(var $=this.pow(U,k),O=this.pow(P,k.addn(1).iushrn(1)),oe=this.pow(P,k),ue=F;oe.cmp(j)!==0;){for(var q=oe,pe=0;q.cmp(j)!==0;pe++)q=q.redSqr();o(pe<ue);var be=this.pow($,new l(1).iushln(ue-pe-1));O=O.redMul(be),$=be.redSqr(),oe=oe.redMul($),ue=pe}return O},se.prototype.invm=function(P){var C=P._invmp(this.m);return C.negative!==0?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},se.prototype.pow=function(P,C){if(C.isZero())return new l(1).toRed(this);if(C.cmpn(1)===0)return P.clone();var E=4,k=new Array(1<<E);k[0]=new l(1).toRed(this),k[1]=P;for(var F=2;F<k.length;F++)k[F]=this.mul(k[F-1],P);var j=k[0],Q=0,G=0,U=C.bitLength()%26;for(U===0&&(U=26),F=C.length-1;F>=0;F--){for(var $=C.words[F],O=U-1;O>=0;O--){var oe=$>>O&1;if(j!==k[0]&&(j=this.sqr(j)),oe===0&&Q===0){G=0;continue}Q<<=1,Q|=oe,G++,!(G!==E&&(F!==0||O!==0))&&(j=this.mul(j,k[Q]),G=0,Q=0)}U=26}return j},se.prototype.convertTo=function(P){var C=P.umod(this.m);return C===P?C.clone():C},se.prototype.convertFrom=function(P){var C=P.clone();return C.red=null,C},l.mont=function(P){return new ae(P)};function ae(ee){se.call(this,ee),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}c(ae,se),ae.prototype.convertTo=function(P){return this.imod(P.ushln(this.shift))},ae.prototype.convertFrom=function(P){var C=this.imod(P.mul(this.rinv));return C.red=null,C},ae.prototype.imul=function(P,C){if(P.isZero()||C.isZero())return P.words[0]=0,P.length=1,P;var E=P.imul(C),k=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),F=E.isub(k).iushrn(this.shift),j=F;return F.cmp(this.m)>=0?j=F.isub(this.m):F.cmpn(0)<0&&(j=F.iadd(this.m)),j._forceRed(this)},ae.prototype.mul=function(P,C){if(P.isZero()||C.isZero())return new l(0)._forceRed(this);var E=P.mul(C),k=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),F=E.isub(k).iushrn(this.shift),j=F;return F.cmp(this.m)>=0?j=F.isub(this.m):F.cmpn(0)<0&&(j=F.iadd(this.m)),j._forceRed(this)},ae.prototype.invm=function(P){var C=this.imod(P._invmp(this.m).mul(this.r2));return C._forceRed(this)}})(n,commonjsGlobal)})(bn);var bnExports=bn.exports,utils$b={};(function(n){var e=n;function t(l,h){if(Array.isArray(l))return l.slice();if(!l)return[];var d=[];if(typeof l!="string"){for(var g=0;g<l.length;g++)d[g]=l[g]|0;return d}if(h==="hex"){l=l.replace(/[^a-z0-9]+/ig,""),l.length%2!==0&&(l="0"+l);for(var g=0;g<l.length;g+=2)d.push(parseInt(l[g]+l[g+1],16))}else for(var g=0;g<l.length;g++){var m=l.charCodeAt(g),v=m>>8,_=m&255;v?d.push(v,_):d.push(_)}return d}e.toArray=t;function o(l){return l.length===1?"0"+l:l}e.zero2=o;function c(l){for(var h="",d=0;d<l.length;d++)h+=o(l[d].toString(16));return h}e.toHex=c,e.encode=function(h,d){return d==="hex"?c(h):h}})(utils$b);(function(n){var e=n,t=bnExports,o=minimalisticAssert$1,c=utils$b;e.assert=o,e.toArray=c.toArray,e.zero2=c.zero2,e.toHex=c.toHex,e.encode=c.encode;function l(v,_,p){var a=new Array(Math.max(v.bitLength(),p)+1);a.fill(0);for(var u=1<<_+1,y=v.clone(),b=0;b<a.length;b++){var w,T=y.andln(u-1);y.isOdd()?(T>(u>>1)-1?w=(u>>1)-T:w=T,y.isubn(w)):w=0,a[b]=w,y.iushrn(1)}return a}e.getNAF=l;function h(v,_){var p=[[],[]];v=v.clone(),_=_.clone();for(var a=0,u=0,y;v.cmpn(-a)>0||_.cmpn(-u)>0;){var b=v.andln(3)+a&3,w=_.andln(3)+u&3;b===3&&(b=-1),w===3&&(w=-1);var T;b&1?(y=v.andln(7)+a&7,(y===3||y===5)&&w===2?T=-b:T=b):T=0,p[0].push(T);var B;w&1?(y=_.andln(7)+u&7,(y===3||y===5)&&b===2?B=-w:B=w):B=0,p[1].push(B),2*a===T+1&&(a=1-a),2*u===B+1&&(u=1-u),v.iushrn(1),_.iushrn(1)}return p}e.getJSF=h;function d(v,_,p){var a="_"+_;v.prototype[_]=function(){return this[a]!==void 0?this[a]:this[a]=p.call(this)}}e.cachedProperty=d;function g(v){return typeof v=="string"?e.toArray(v,"hex"):v}e.parseBytes=g;function m(v){return new t(v,"hex","le")}e.intFromLE=m})(utils$c);var brorand={exports:{}},r;brorand.exports=function n(e){return r||(r=new Rand(null)),r.generate(e)};function Rand(n){this.rand=n}brorand.exports.Rand=Rand;Rand.prototype.generate=function n(e){return this._rand(e)};Rand.prototype._rand=function n(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),o=0;o<t.length;o++)t[o]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var crypto$1=require$$0$1;if(typeof crypto$1.randomBytes!="function")throw new Error("Not supported");Rand.prototype._rand=function(e){return crypto$1.randomBytes(e)}}catch{}var brorandExports=brorand.exports,curve={},BN$7=bnExports,utils$a=utils$c,getNAF=utils$a.getNAF,getJSF=utils$a.getJSF,assert$9=utils$a.assert;function BaseCurve(n,e){this.type=n,this.p=new BN$7(e.p,16),this.red=e.prime?BN$7.red(e.prime):BN$7.mont(this.p),this.zero=new BN$7(0).toRed(this.red),this.one=new BN$7(1).toRed(this.red),this.two=new BN$7(2).toRed(this.red),this.n=e.n&&new BN$7(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base=BaseCurve;BaseCurve.prototype.point=function n(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function n(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function n(e,t){assert$9(e.precomputed);var o=e._getDoubles(),c=getNAF(t,1,this._bitLength),l=(1<<o.step+1)-(o.step%2===0?2:1);l/=3;var h=[],d,g;for(d=0;d<c.length;d+=o.step){g=0;for(var m=d+o.step-1;m>=d;m--)g=(g<<1)+c[m];h.push(g)}for(var v=this.jpoint(null,null,null),_=this.jpoint(null,null,null),p=l;p>0;p--){for(d=0;d<h.length;d++)g=h[d],g===p?_=_.mixedAdd(o.points[d]):g===-p&&(_=_.mixedAdd(o.points[d].neg()));v=v.add(_)}return v.toP()};BaseCurve.prototype._wnafMul=function n(e,t){var o=4,c=e._getNAFPoints(o);o=c.wnd;for(var l=c.points,h=getNAF(t,o,this._bitLength),d=this.jpoint(null,null,null),g=h.length-1;g>=0;g--){for(var m=0;g>=0&&h[g]===0;g--)m++;if(g>=0&&m++,d=d.dblp(m),g<0)break;var v=h[g];assert$9(v!==0),e.type==="affine"?v>0?d=d.mixedAdd(l[v-1>>1]):d=d.mixedAdd(l[-v-1>>1].neg()):v>0?d=d.add(l[v-1>>1]):d=d.add(l[-v-1>>1].neg())}return e.type==="affine"?d.toP():d};BaseCurve.prototype._wnafMulAdd=function n(e,t,o,c,l){var h=this._wnafT1,d=this._wnafT2,g=this._wnafT3,m=0,v,_,p;for(v=0;v<c;v++){p=t[v];var a=p._getNAFPoints(e);h[v]=a.wnd,d[v]=a.points}for(v=c-1;v>=1;v-=2){var u=v-1,y=v;if(h[u]!==1||h[y]!==1){g[u]=getNAF(o[u],h[u],this._bitLength),g[y]=getNAF(o[y],h[y],this._bitLength),m=Math.max(g[u].length,m),m=Math.max(g[y].length,m);continue}var b=[t[u],null,null,t[y]];t[u].y.cmp(t[y].y)===0?(b[1]=t[u].add(t[y]),b[2]=t[u].toJ().mixedAdd(t[y].neg())):t[u].y.cmp(t[y].y.redNeg())===0?(b[1]=t[u].toJ().mixedAdd(t[y]),b[2]=t[u].add(t[y].neg())):(b[1]=t[u].toJ().mixedAdd(t[y]),b[2]=t[u].toJ().mixedAdd(t[y].neg()));var w=[-3,-1,-5,-7,0,7,5,1,3],T=getJSF(o[u],o[y]);for(m=Math.max(T[0].length,m),g[u]=new Array(m),g[y]=new Array(m),_=0;_<m;_++){var B=T[0][_]|0,H=T[1][_]|0;g[u][_]=w[(B+1)*3+(H+1)],g[y][_]=0,d[u]=b}}var J=this.jpoint(null,null,null),W=this._wnafT4;for(v=m;v>=0;v--){for(var fe=0;v>=0;){var re=!0;for(_=0;_<c;_++)W[_]=g[_][v]|0,W[_]!==0&&(re=!1);if(!re)break;fe++,v--}if(v>=0&&fe++,J=J.dblp(fe),v<0)break;for(_=0;_<c;_++){var se=W[_];se!==0&&(se>0?p=d[_][se-1>>1]:se<0&&(p=d[_][-se-1>>1].neg()),p.type==="affine"?J=J.mixedAdd(p):J=J.add(p))}}for(v=0;v<c;v++)d[v]=null;return l?J:J.toP()};function BasePoint(n,e){this.curve=n,this.type=e,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function n(){throw new Error("Not implemented")};BasePoint.prototype.validate=function n(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function n(e,t){e=utils$a.toArray(e,t);var o=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*o){e[0]===6?assert$9(e[e.length-1]%2===0):e[0]===7&&assert$9(e[e.length-1]%2===1);var c=this.point(e.slice(1,1+o),e.slice(1+o,1+2*o));return c}else if((e[0]===2||e[0]===3)&&e.length-1===o)return this.pointFromX(e.slice(1,1+o),e[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function n(e){return this.encode(e,!0)};BasePoint.prototype._encode=function n(e){var t=this.curve.p.byteLength(),o=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(o):[4].concat(o,this.getY().toArray("be",t))};BasePoint.prototype.encode=function n(e,t){return utils$a.encode(this._encode(t),e)};BasePoint.prototype.precompute=function n(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};BasePoint.prototype._hasDoubles=function n(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};BasePoint.prototype._getDoubles=function n(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var o=[this],c=this,l=0;l<t;l+=e){for(var h=0;h<e;h++)c=c.dbl();o.push(c)}return{step:e,points:o}};BasePoint.prototype._getNAFPoints=function n(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],o=(1<<e)-1,c=o===1?null:this.dbl(),l=1;l<o;l++)t[l]=t[l-1].add(c);return{wnd:e,points:t}};BasePoint.prototype._getBeta=function n(){return null};BasePoint.prototype.dblp=function n(e){for(var t=this,o=0;o<e;o++)t=t.dbl();return t};var utils$9=utils$c,BN$6=bnExports,inherits$2=inherits_browserExports,Base$2=base,assert$8=utils$9.assert;function ShortCurve(n){Base$2.call(this,"short",n),this.a=new BN$6(n.a,16).toRed(this.red),this.b=new BN$6(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$2(ShortCurve,Base$2);var short=ShortCurve;ShortCurve.prototype._getEndomorphism=function n(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,o;if(e.beta)t=new BN$6(e.beta,16).toRed(this.red);else{var c=this._getEndoRoots(this.p);t=c[0].cmp(c[1])<0?c[0]:c[1],t=t.toRed(this.red)}if(e.lambda)o=new BN$6(e.lambda,16);else{var l=this._getEndoRoots(this.n);this.g.mul(l[0]).x.cmp(this.g.x.redMul(t))===0?o=l[0]:(o=l[1],assert$8(this.g.mul(o).x.cmp(this.g.x.redMul(t))===0))}var h;return e.basis?h=e.basis.map(function(d){return{a:new BN$6(d.a,16),b:new BN$6(d.b,16)}}):h=this._getEndoBasis(o),{beta:t,lambda:o,basis:h}}};ShortCurve.prototype._getEndoRoots=function n(e){var t=e===this.p?this.red:BN$6.mont(e),o=new BN$6(2).toRed(t).redInvm(),c=o.redNeg(),l=new BN$6(3).toRed(t).redNeg().redSqrt().redMul(o),h=c.redAdd(l).fromRed(),d=c.redSub(l).fromRed();return[h,d]};ShortCurve.prototype._getEndoBasis=function n(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),o=e,c=this.n.clone(),l=new BN$6(1),h=new BN$6(0),d=new BN$6(0),g=new BN$6(1),m,v,_,p,a,u,y,b=0,w,T;o.cmpn(0)!==0;){var B=c.div(o);w=c.sub(B.mul(o)),T=d.sub(B.mul(l));var H=g.sub(B.mul(h));if(!_&&w.cmp(t)<0)m=y.neg(),v=l,_=w.neg(),p=T;else if(_&&++b===2)break;y=w,c=o,o=w,d=l,l=T,g=h,h=H}a=w.neg(),u=T;var J=_.sqr().add(p.sqr()),W=a.sqr().add(u.sqr());return W.cmp(J)>=0&&(a=m,u=v),_.negative&&(_=_.neg(),p=p.neg()),a.negative&&(a=a.neg(),u=u.neg()),[{a:_,b:p},{a,b:u}]};ShortCurve.prototype._endoSplit=function n(e){var t=this.endo.basis,o=t[0],c=t[1],l=c.b.mul(e).divRound(this.n),h=o.b.neg().mul(e).divRound(this.n),d=l.mul(o.a),g=h.mul(c.a),m=l.mul(o.b),v=h.mul(c.b),_=e.sub(d).sub(g),p=m.add(v).neg();return{k1:_,k2:p}};ShortCurve.prototype.pointFromX=function n(e,t){e=new BN$6(e,16),e.red||(e=e.toRed(this.red));var o=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),c=o.redSqrt();if(c.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var l=c.fromRed().isOdd();return(t&&!l||!t&&l)&&(c=c.redNeg()),this.point(e,c)};ShortCurve.prototype.validate=function n(e){if(e.inf)return!0;var t=e.x,o=e.y,c=this.a.redMul(t),l=t.redSqr().redMul(t).redIAdd(c).redIAdd(this.b);return o.redSqr().redISub(l).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function n(e,t,o){for(var c=this._endoWnafT1,l=this._endoWnafT2,h=0;h<e.length;h++){var d=this._endoSplit(t[h]),g=e[h],m=g._getBeta();d.k1.negative&&(d.k1.ineg(),g=g.neg(!0)),d.k2.negative&&(d.k2.ineg(),m=m.neg(!0)),c[h*2]=g,c[h*2+1]=m,l[h*2]=d.k1,l[h*2+1]=d.k2}for(var v=this._wnafMulAdd(1,c,l,h*2,o),_=0;_<h*2;_++)c[_]=null,l[_]=null;return v};function Point$2(n,e,t,o){Base$2.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$6(e,16),this.y=new BN$6(t,16),o&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$2(Point$2,Base$2.BasePoint);ShortCurve.prototype.point=function n(e,t,o){return new Point$2(this,e,t,o)};ShortCurve.prototype.pointFromJSON=function n(e,t){return Point$2.fromJSON(this,e,t)};Point$2.prototype._getBeta=function n(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var o=this.curve,c=function(l){return o.point(l.x.redMul(o.endo.beta),l.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(c)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(c)}}}return t}};Point$2.prototype.toJSON=function n(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$2.fromJSON=function n(e,t,o){typeof t=="string"&&(t=JSON.parse(t));var c=e.point(t[0],t[1],o);if(!t[2])return c;function l(d){return e.point(d[0],d[1],o)}var h=t[2];return c.precomputed={beta:null,doubles:h.doubles&&{step:h.doubles.step,points:[c].concat(h.doubles.points.map(l))},naf:h.naf&&{wnd:h.naf.wnd,points:[c].concat(h.naf.points.map(l))}},c};Point$2.prototype.inspect=function n(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$2.prototype.isInfinity=function n(){return this.inf};Point$2.prototype.add=function n(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var o=t.redSqr().redISub(this.x).redISub(e.x),c=t.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,c)};Point$2.prototype.dbl=function n(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,o=this.x.redSqr(),c=e.redInvm(),l=o.redAdd(o).redIAdd(o).redIAdd(t).redMul(c),h=l.redSqr().redISub(this.x.redAdd(this.x)),d=l.redMul(this.x.redSub(h)).redISub(this.y);return this.curve.point(h,d)};Point$2.prototype.getX=function n(){return this.x.fromRed()};Point$2.prototype.getY=function n(){return this.y.fromRed()};Point$2.prototype.mul=function n(e){return e=new BN$6(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$2.prototype.mulAdd=function n(e,t,o){var c=[this,t],l=[e,o];return this.curve.endo?this.curve._endoWnafMulAdd(c,l):this.curve._wnafMulAdd(1,c,l,2)};Point$2.prototype.jmulAdd=function n(e,t,o){var c=[this,t],l=[e,o];return this.curve.endo?this.curve._endoWnafMulAdd(c,l,!0):this.curve._wnafMulAdd(1,c,l,2,!0)};Point$2.prototype.eq=function n(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$2.prototype.neg=function n(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var o=this.precomputed,c=function(l){return l.neg()};t.precomputed={naf:o.naf&&{wnd:o.naf.wnd,points:o.naf.points.map(c)},doubles:o.doubles&&{step:o.doubles.step,points:o.doubles.points.map(c)}}}return t};Point$2.prototype.toJ=function n(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint(n,e,t,o){Base$2.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&o===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$6(0)):(this.x=new BN$6(e,16),this.y=new BN$6(t,16),this.z=new BN$6(o,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$2(JPoint,Base$2.BasePoint);ShortCurve.prototype.jpoint=function n(e,t,o){return new JPoint(this,e,t,o)};JPoint.prototype.toP=function n(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),o=this.x.redMul(t),c=this.y.redMul(t).redMul(e);return this.curve.point(o,c)};JPoint.prototype.neg=function n(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function n(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),o=this.z.redSqr(),c=this.x.redMul(t),l=e.x.redMul(o),h=this.y.redMul(t.redMul(e.z)),d=e.y.redMul(o.redMul(this.z)),g=c.redSub(l),m=h.redSub(d);if(g.cmpn(0)===0)return m.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=g.redSqr(),_=v.redMul(g),p=c.redMul(v),a=m.redSqr().redIAdd(_).redISub(p).redISub(p),u=m.redMul(p.redISub(a)).redISub(h.redMul(_)),y=this.z.redMul(e.z).redMul(g);return this.curve.jpoint(a,u,y)};JPoint.prototype.mixedAdd=function n(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),o=this.x,c=e.x.redMul(t),l=this.y,h=e.y.redMul(t).redMul(this.z),d=o.redSub(c),g=l.redSub(h);if(d.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var m=d.redSqr(),v=m.redMul(d),_=o.redMul(m),p=g.redSqr().redIAdd(v).redISub(_).redISub(_),a=g.redMul(_.redISub(p)).redISub(l.redMul(v)),u=this.z.redMul(d);return this.curve.jpoint(p,a,u)};JPoint.prototype.dblp=function n(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var o=this;for(t=0;t<e;t++)o=o.dbl();return o}var c=this.curve.a,l=this.curve.tinv,h=this.x,d=this.y,g=this.z,m=g.redSqr().redSqr(),v=d.redAdd(d);for(t=0;t<e;t++){var _=h.redSqr(),p=v.redSqr(),a=p.redSqr(),u=_.redAdd(_).redIAdd(_).redIAdd(c.redMul(m)),y=h.redMul(p),b=u.redSqr().redISub(y.redAdd(y)),w=y.redISub(b),T=u.redMul(w);T=T.redIAdd(T).redISub(a);var B=v.redMul(g);t+1<e&&(m=m.redMul(a)),h=b,g=B,v=T}return this.curve.jpoint(h,v.redMul(l),g)};JPoint.prototype.dbl=function n(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function n(){var e,t,o;if(this.zOne){var c=this.x.redSqr(),l=this.y.redSqr(),h=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(c).redISub(h);d=d.redIAdd(d);var g=c.redAdd(c).redIAdd(c),m=g.redSqr().redISub(d).redISub(d),v=h.redIAdd(h);v=v.redIAdd(v),v=v.redIAdd(v),e=m,t=g.redMul(d.redISub(m)).redISub(v),o=this.y.redAdd(this.y)}else{var _=this.x.redSqr(),p=this.y.redSqr(),a=p.redSqr(),u=this.x.redAdd(p).redSqr().redISub(_).redISub(a);u=u.redIAdd(u);var y=_.redAdd(_).redIAdd(_),b=y.redSqr(),w=a.redIAdd(a);w=w.redIAdd(w),w=w.redIAdd(w),e=b.redISub(u).redISub(u),t=y.redMul(u.redISub(e)).redISub(w),o=this.y.redMul(this.z),o=o.redIAdd(o)}return this.curve.jpoint(e,t,o)};JPoint.prototype._threeDbl=function n(){var e,t,o;if(this.zOne){var c=this.x.redSqr(),l=this.y.redSqr(),h=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(c).redISub(h);d=d.redIAdd(d);var g=c.redAdd(c).redIAdd(c).redIAdd(this.curve.a),m=g.redSqr().redISub(d).redISub(d);e=m;var v=h.redIAdd(h);v=v.redIAdd(v),v=v.redIAdd(v),t=g.redMul(d.redISub(m)).redISub(v),o=this.y.redAdd(this.y)}else{var _=this.z.redSqr(),p=this.y.redSqr(),a=this.x.redMul(p),u=this.x.redSub(_).redMul(this.x.redAdd(_));u=u.redAdd(u).redIAdd(u);var y=a.redIAdd(a);y=y.redIAdd(y);var b=y.redAdd(y);e=u.redSqr().redISub(b),o=this.y.redAdd(this.z).redSqr().redISub(p).redISub(_);var w=p.redSqr();w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w),t=u.redMul(y.redISub(e)).redISub(w)}return this.curve.jpoint(e,t,o)};JPoint.prototype._dbl=function n(){var e=this.curve.a,t=this.x,o=this.y,c=this.z,l=c.redSqr().redSqr(),h=t.redSqr(),d=o.redSqr(),g=h.redAdd(h).redIAdd(h).redIAdd(e.redMul(l)),m=t.redAdd(t);m=m.redIAdd(m);var v=m.redMul(d),_=g.redSqr().redISub(v.redAdd(v)),p=v.redISub(_),a=d.redSqr();a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);var u=g.redMul(p).redISub(a),y=o.redAdd(o).redMul(c);return this.curve.jpoint(_,u,y)};JPoint.prototype.trpl=function n(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),o=this.z.redSqr(),c=t.redSqr(),l=e.redAdd(e).redIAdd(e),h=l.redSqr(),d=this.x.redAdd(t).redSqr().redISub(e).redISub(c);d=d.redIAdd(d),d=d.redAdd(d).redIAdd(d),d=d.redISub(h);var g=d.redSqr(),m=c.redIAdd(c);m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var v=l.redIAdd(d).redSqr().redISub(h).redISub(g).redISub(m),_=t.redMul(v);_=_.redIAdd(_),_=_.redIAdd(_);var p=this.x.redMul(g).redISub(_);p=p.redIAdd(p),p=p.redIAdd(p);var a=this.y.redMul(v.redMul(m.redISub(v)).redISub(d.redMul(g)));a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);var u=this.z.redAdd(d).redSqr().redISub(o).redISub(g);return this.curve.jpoint(p,a,u)};JPoint.prototype.mul=function n(e,t){return e=new BN$6(e,t),this.curve._wnafMul(this,e)};JPoint.prototype.eq=function n(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),o=e.z.redSqr();if(this.x.redMul(o).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var c=t.redMul(this.z),l=o.redMul(e.z);return this.y.redMul(l).redISub(e.y.redMul(c)).cmpn(0)===0};JPoint.prototype.eqXToP=function n(e){var t=this.z.redSqr(),o=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(o)===0)return!0;for(var c=e.clone(),l=this.curve.redN.redMul(t);;){if(c.iadd(this.curve.n),c.cmp(this.curve.p)>=0)return!1;if(o.redIAdd(l),this.x.cmp(o)===0)return!0}};JPoint.prototype.inspect=function n(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function n(){return this.z.cmpn(0)===0};var BN$5=bnExports,inherits$1=inherits_browserExports,Base$1=base,utils$8=utils$c;function MontCurve(n){Base$1.call(this,"mont",n),this.a=new BN$5(n.a,16).toRed(this.red),this.b=new BN$5(n.b,16).toRed(this.red),this.i4=new BN$5(4).toRed(this.red).redInvm(),this.two=new BN$5(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$1(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function n(e){var t=e.normalize().x,o=t.redSqr(),c=o.redMul(t).redAdd(o.redMul(this.a)).redAdd(t),l=c.redSqrt();return l.redSqr().cmp(c)===0};function Point$1(n,e,t){Base$1.BasePoint.call(this,n,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$5(e,16),this.z=new BN$5(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$1(Point$1,Base$1.BasePoint);MontCurve.prototype.decodePoint=function n(e,t){return this.point(utils$8.toArray(e,t),1)};MontCurve.prototype.point=function n(e,t){return new Point$1(this,e,t)};MontCurve.prototype.pointFromJSON=function n(e){return Point$1.fromJSON(this,e)};Point$1.prototype.precompute=function n(){};Point$1.prototype._encode=function n(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$1.fromJSON=function n(e,t){return new Point$1(e,t[0],t[1]||e.one)};Point$1.prototype.inspect=function n(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$1.prototype.isInfinity=function n(){return this.z.cmpn(0)===0};Point$1.prototype.dbl=function n(){var e=this.x.redAdd(this.z),t=e.redSqr(),o=this.x.redSub(this.z),c=o.redSqr(),l=t.redSub(c),h=t.redMul(c),d=l.redMul(c.redAdd(this.curve.a24.redMul(l)));return this.curve.point(h,d)};Point$1.prototype.add=function n(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.diffAdd=function n(e,t){var o=this.x.redAdd(this.z),c=this.x.redSub(this.z),l=e.x.redAdd(e.z),h=e.x.redSub(e.z),d=h.redMul(o),g=l.redMul(c),m=t.z.redMul(d.redAdd(g).redSqr()),v=t.x.redMul(d.redISub(g).redSqr());return this.curve.point(m,v)};Point$1.prototype.mul=function n(e){for(var t=e.clone(),o=this,c=this.curve.point(null,null),l=this,h=[];t.cmpn(0)!==0;t.iushrn(1))h.push(t.andln(1));for(var d=h.length-1;d>=0;d--)h[d]===0?(o=o.diffAdd(c,l),c=c.dbl()):(c=o.diffAdd(c,l),o=o.dbl());return c};Point$1.prototype.mulAdd=function n(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.jumlAdd=function n(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.eq=function n(e){return this.getX().cmp(e.getX())===0};Point$1.prototype.normalize=function n(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$1.prototype.getX=function n(){return this.normalize(),this.x.fromRed()};var utils$7=utils$c,BN$4=bnExports,inherits=inherits_browserExports,Base=base,assert$7=utils$7.assert;function EdwardsCurve(n){this.twisted=(n.a|0)!==1,this.mOneA=this.twisted&&(n.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",n),this.a=new BN$4(n.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$4(n.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$4(n.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$7(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(n.c|0)===1}inherits(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function n(e){return this.mOneA?e.redNeg():this.a.redMul(e)};EdwardsCurve.prototype._mulC=function n(e){return this.oneC?e:this.c.redMul(e)};EdwardsCurve.prototype.jpoint=function n(e,t,o,c){return this.point(e,t,o,c)};EdwardsCurve.prototype.pointFromX=function n(e,t){e=new BN$4(e,16),e.red||(e=e.toRed(this.red));var o=e.redSqr(),c=this.c2.redSub(this.a.redMul(o)),l=this.one.redSub(this.c2.redMul(this.d).redMul(o)),h=c.redMul(l.redInvm()),d=h.redSqrt();if(d.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");var g=d.fromRed().isOdd();return(t&&!g||!t&&g)&&(d=d.redNeg()),this.point(e,d)};EdwardsCurve.prototype.pointFromY=function n(e,t){e=new BN$4(e,16),e.red||(e=e.toRed(this.red));var o=e.redSqr(),c=o.redSub(this.c2),l=o.redMul(this.d).redMul(this.c2).redSub(this.a),h=c.redMul(l.redInvm());if(h.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var d=h.redSqrt();if(d.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");return d.fromRed().isOdd()!==t&&(d=d.redNeg()),this.point(d,e)};EdwardsCurve.prototype.validate=function n(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),o=e.y.redSqr(),c=t.redMul(this.a).redAdd(o),l=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(o)));return c.cmp(l)===0};function Point(n,e,t,o,c){Base.BasePoint.call(this,n,"projective"),e===null&&t===null&&o===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$4(e,16),this.y=new BN$4(t,16),this.z=o?new BN$4(o,16):this.curve.one,this.t=c&&new BN$4(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function n(e){return Point.fromJSON(this,e)};EdwardsCurve.prototype.point=function n(e,t,o,c){return new Point(this,e,t,o,c)};Point.fromJSON=function n(e,t){return new Point(e,t[0],t[1],t[2])};Point.prototype.inspect=function n(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function n(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point.prototype._extDbl=function n(){var e=this.x.redSqr(),t=this.y.redSqr(),o=this.z.redSqr();o=o.redIAdd(o);var c=this.curve._mulA(e),l=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),h=c.redAdd(t),d=h.redSub(o),g=c.redSub(t),m=l.redMul(d),v=h.redMul(g),_=l.redMul(g),p=d.redMul(h);return this.curve.point(m,v,p,_)};Point.prototype._projDbl=function n(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),o=this.y.redSqr(),c,l,h,d,g,m;if(this.curve.twisted){d=this.curve._mulA(t);var v=d.redAdd(o);this.zOne?(c=e.redSub(t).redSub(o).redMul(v.redSub(this.curve.two)),l=v.redMul(d.redSub(o)),h=v.redSqr().redSub(v).redSub(v)):(g=this.z.redSqr(),m=v.redSub(g).redISub(g),c=e.redSub(t).redISub(o).redMul(m),l=v.redMul(d.redSub(o)),h=v.redMul(m))}else d=t.redAdd(o),g=this.curve._mulC(this.z).redSqr(),m=d.redSub(g).redSub(g),c=this.curve._mulC(e.redISub(d)).redMul(m),l=this.curve._mulC(d).redMul(t.redISub(o)),h=d.redMul(m);return this.curve.point(c,l,h)};Point.prototype.dbl=function n(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point.prototype._extAdd=function n(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),o=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),c=this.t.redMul(this.curve.dd).redMul(e.t),l=this.z.redMul(e.z.redAdd(e.z)),h=o.redSub(t),d=l.redSub(c),g=l.redAdd(c),m=o.redAdd(t),v=h.redMul(d),_=g.redMul(m),p=h.redMul(m),a=d.redMul(g);return this.curve.point(v,_,a,p)};Point.prototype._projAdd=function n(e){var t=this.z.redMul(e.z),o=t.redSqr(),c=this.x.redMul(e.x),l=this.y.redMul(e.y),h=this.curve.d.redMul(c).redMul(l),d=o.redSub(h),g=o.redAdd(h),m=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(c).redISub(l),v=t.redMul(d).redMul(m),_,p;return this.curve.twisted?(_=t.redMul(g).redMul(l.redSub(this.curve._mulA(c))),p=d.redMul(g)):(_=t.redMul(g).redMul(l.redSub(c)),p=this.curve._mulC(d).redMul(g)),this.curve.point(v,_,p)};Point.prototype.add=function n(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Point.prototype.mul=function n(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Point.prototype.mulAdd=function n(e,t,o){return this.curve._wnafMulAdd(1,[this,t],[e,o],2,!1)};Point.prototype.jmulAdd=function n(e,t,o){return this.curve._wnafMulAdd(1,[this,t],[e,o],2,!0)};Point.prototype.normalize=function n(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Point.prototype.neg=function n(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function n(){return this.normalize(),this.x.fromRed()};Point.prototype.getY=function n(){return this.normalize(),this.y.fromRed()};Point.prototype.eq=function n(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Point.prototype.eqXToP=function n(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var o=e.clone(),c=this.curve.redN.redMul(this.z);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(c),this.x.cmp(t)===0)return!0}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;(function(n){var e=n;e.base=base,e.short=short,e.mont=mont,e.edwards=edwards})(curve);var curves$2={},secp256k1$2,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1$2={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$2}(function(n){var e=n,t=hash$4,o=curve,c=utils$c,l=c.assert;function h(m){m.type==="short"?this.curve=new o.short(m):m.type==="edwards"?this.curve=new o.edwards(m):this.curve=new o.mont(m),this.g=this.curve.g,this.n=this.curve.n,this.hash=m.hash,l(this.g.validate(),"Invalid curve"),l(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=h;function d(m,v){Object.defineProperty(e,m,{configurable:!0,enumerable:!0,get:function(){var _=new h(v);return Object.defineProperty(e,m,{configurable:!0,enumerable:!0,value:_}),_}})}d("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),d("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),d("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),d("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),d("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),d("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),d("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var g;try{g=requireSecp256k1()}catch{g=void 0}d("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",g]})})(curves$2);var hash$1=hash$4,utils$6=utils$b,assert$6=minimalisticAssert$1;function HmacDRBG$1(n){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils$6.toArray(n.entropy,n.entropyEnc||"hex"),t=utils$6.toArray(n.nonce,n.nonceEnc||"hex"),o=utils$6.toArray(n.pers,n.persEnc||"hex");assert$6(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,o)}var hmacDrbg=HmacDRBG$1;HmacDRBG$1.prototype._init=function n(e,t,o){var c=e.concat(t).concat(o);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var l=0;l<this.V.length;l++)this.K[l]=0,this.V[l]=1;this._update(c),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function n(){return new hash$1.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function n(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$1.prototype.reseed=function n(e,t,o,c){typeof t!="string"&&(c=o,o=t,t=null),e=utils$6.toArray(e,t),o=utils$6.toArray(o,c),assert$6(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(o||[])),this._reseed=1};HmacDRBG$1.prototype.generate=function n(e,t,o,c){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(c=o,o=t,t=null),o&&(o=utils$6.toArray(o,c||"hex"),this._update(o));for(var l=[];l.length<e;)this.V=this._hmac().update(this.V).digest(),l=l.concat(this.V);var h=l.slice(0,e);return this._update(o),this._reseed++,utils$6.encode(h,t)};var BN$3=bnExports,utils$5=utils$c,assert$5=utils$5.assert;function KeyPair$3(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$1=KeyPair$3;KeyPair$3.fromPublic=function n(e,t,o){return t instanceof KeyPair$3?t:new KeyPair$3(e,{pub:t,pubEnc:o})};KeyPair$3.fromPrivate=function n(e,t,o){return t instanceof KeyPair$3?t:new KeyPair$3(e,{priv:t,privEnc:o})};KeyPair$3.prototype.validate=function n(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$3.prototype.getPublic=function n(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};KeyPair$3.prototype.getPrivate=function n(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$3.prototype._importPrivate=function n(e,t){this.priv=new BN$3(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function n(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?assert$5(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$5(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};KeyPair$3.prototype.derive=function n(e){return e.validate()||assert$5(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$3.prototype.sign=function n(e,t,o){return this.ec.sign(e,this,t,o)};KeyPair$3.prototype.verify=function n(e,t){return this.ec.verify(e,t,this)};KeyPair$3.prototype.inspect=function n(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$2=bnExports,utils$4=utils$c,assert$4=utils$4.assert;function Signature$3(n,e){if(n instanceof Signature$3)return n;this._importDER(n,e)||(assert$4(n.r&&n.s,"Signature without r or s"),this.r=new BN$2(n.r,16),this.s=new BN$2(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var signature$1=Signature$3;function Position(){this.place=0}function getLength(n,e){var t=n[e.place++];if(!(t&128))return t;var o=t&15;if(o===0||o>4)return!1;for(var c=0,l=0,h=e.place;l<o;l++,h++)c<<=8,c|=n[h],c>>>=0;return c<=127?!1:(e.place=h,c)}function rmPadding(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}Signature$3.prototype._importDER=function n(e,t){e=utils$4.toArray(e,t);var o=new Position;if(e[o.place++]!==48)return!1;var c=getLength(e,o);if(c===!1||c+o.place!==e.length||e[o.place++]!==2)return!1;var l=getLength(e,o);if(l===!1)return!1;var h=e.slice(o.place,l+o.place);if(o.place+=l,e[o.place++]!==2)return!1;var d=getLength(e,o);if(d===!1||e.length!==d+o.place)return!1;var g=e.slice(o.place,d+o.place);if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;if(g[0]===0)if(g[1]&128)g=g.slice(1);else return!1;return this.r=new BN$2(h),this.s=new BN$2(g),this.recoveryParam=null,!0};function constructLength(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}Signature$3.prototype.toDER=function n(e){var t=this.r.toArray(),o=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),o[0]&128&&(o=[0].concat(o)),t=rmPadding(t),o=rmPadding(o);!o[0]&&!(o[1]&128);)o=o.slice(1);var c=[2];constructLength(c,t.length),c=c.concat(t),c.push(2),constructLength(c,o.length);var l=c.concat(o),h=[48];return constructLength(h,l.length),h=h.concat(l),utils$4.encode(h,e)};var BN$1=bnExports,HmacDRBG=hmacDrbg,utils$3=utils$c,curves$1=curves$2,rand=brorandExports,assert$3=utils$3.assert,KeyPair$2=key$1,Signature$2=signature$1;function EC(n){if(!(this instanceof EC))return new EC(n);typeof n=="string"&&(assert$3(Object.prototype.hasOwnProperty.call(curves$1,n),"Unknown curve "+n),n=curves$1[n]),n instanceof curves$1.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var ec$1=EC;EC.prototype.keyPair=function n(e){return new KeyPair$2(this,e)};EC.prototype.keyFromPrivate=function n(e,t){return KeyPair$2.fromPrivate(this,e,t)};EC.prototype.keyFromPublic=function n(e,t){return KeyPair$2.fromPublic(this,e,t)};EC.prototype.genKeyPair=function n(e){e||(e={});for(var t=new HmacDRBG({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),o=this.n.byteLength(),c=this.n.sub(new BN$1(2));;){var l=new BN$1(t.generate(o));if(!(l.cmp(c)>0))return l.iaddn(1),this.keyFromPrivate(l)}};EC.prototype._truncateToN=function n(e,t){var o=e.byteLength()*8-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};EC.prototype.sign=function n(e,t,o,c){typeof o=="object"&&(c=o,o=null),c||(c={}),t=this.keyFromPrivate(t,o),e=this._truncateToN(new BN$1(e,16));for(var l=this.n.byteLength(),h=t.getPrivate().toArray("be",l),d=e.toArray("be",l),g=new HmacDRBG({hash:this.hash,entropy:h,nonce:d,pers:c.pers,persEnc:c.persEnc||"utf8"}),m=this.n.sub(new BN$1(1)),v=0;;v++){var _=c.k?c.k(v):new BN$1(g.generate(this.n.byteLength()));if(_=this._truncateToN(_,!0),!(_.cmpn(1)<=0||_.cmp(m)>=0)){var p=this.g.mul(_);if(!p.isInfinity()){var a=p.getX(),u=a.umod(this.n);if(u.cmpn(0)!==0){var y=_.invm(this.n).mul(u.mul(t.getPrivate()).iadd(e));if(y=y.umod(this.n),y.cmpn(0)!==0){var b=(p.getY().isOdd()?1:0)|(a.cmp(u)!==0?2:0);return c.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),b^=1),new Signature$2({r:u,s:y,recoveryParam:b})}}}}}};EC.prototype.verify=function n(e,t,o,c){e=this._truncateToN(new BN$1(e,16)),o=this.keyFromPublic(o,c),t=new Signature$2(t,"hex");var l=t.r,h=t.s;if(l.cmpn(1)<0||l.cmp(this.n)>=0||h.cmpn(1)<0||h.cmp(this.n)>=0)return!1;var d=h.invm(this.n),g=d.mul(e).umod(this.n),m=d.mul(l).umod(this.n),v;return this.curve._maxwellTrick?(v=this.g.jmulAdd(g,o.getPublic(),m),v.isInfinity()?!1:v.eqXToP(l)):(v=this.g.mulAdd(g,o.getPublic(),m),v.isInfinity()?!1:v.getX().umod(this.n).cmp(l)===0)};EC.prototype.recoverPubKey=function(n,e,t,o){assert$3((3&t)===t,"The recovery param is more than two bits"),e=new Signature$2(e,o);var c=this.n,l=new BN$1(n),h=e.r,d=e.s,g=t&1,m=t>>1;if(h.cmp(this.curve.p.umod(this.curve.n))>=0&&m)throw new Error("Unable to find sencond key candinate");m?h=this.curve.pointFromX(h.add(this.curve.n),g):h=this.curve.pointFromX(h,g);var v=e.r.invm(c),_=c.sub(l).mul(v).umod(c),p=d.mul(v).umod(c);return this.g.mulAdd(_,h,p)};EC.prototype.getKeyRecoveryParam=function(n,e,t,o){if(e=new Signature$2(e,o),e.recoveryParam!==null)return e.recoveryParam;for(var c=0;c<4;c++){var l;try{l=this.recoverPubKey(n,e,c)}catch{continue}if(l.eq(t))return c}throw new Error("Unable to find valid recovery factor")};var utils$2=utils$c,assert$2=utils$2.assert,parseBytes$2=utils$2.parseBytes,cachedProperty$1=utils$2.cachedProperty;function KeyPair$1(n,e){this.eddsa=n,this._secret=parseBytes$2(e.secret),n.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=parseBytes$2(e.pub)}KeyPair$1.fromPublic=function n(e,t){return t instanceof KeyPair$1?t:new KeyPair$1(e,{pub:t})};KeyPair$1.fromSecret=function n(e,t){return t instanceof KeyPair$1?t:new KeyPair$1(e,{secret:t})};KeyPair$1.prototype.secret=function n(){return this._secret};cachedProperty$1(KeyPair$1,"pubBytes",function n(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$1,"pub",function n(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$1,"privBytes",function n(){var e=this.eddsa,t=this.hash(),o=e.encodingLength-1,c=t.slice(0,e.encodingLength);return c[0]&=248,c[o]&=127,c[o]|=64,c});cachedProperty$1(KeyPair$1,"priv",function n(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$1,"hash",function n(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$1,"messagePrefix",function n(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$1.prototype.sign=function n(e){return assert$2(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};KeyPair$1.prototype.verify=function n(e,t){return this.eddsa.verify(e,t,this)};KeyPair$1.prototype.getSecret=function n(e){return assert$2(this._secret,"KeyPair is public only"),utils$2.encode(this.secret(),e)};KeyPair$1.prototype.getPublic=function n(e){return utils$2.encode(this.pubBytes(),e)};var key=KeyPair$1,BN=bnExports,utils$1=utils$c,assert$1=utils$1.assert,cachedProperty=utils$1.cachedProperty,parseBytes$1=utils$1.parseBytes;function Signature$1(n,e){this.eddsa=n,typeof e!="object"&&(e=parseBytes$1(e)),Array.isArray(e)&&(e={R:e.slice(0,n.encodingLength),S:e.slice(n.encodingLength)}),assert$1(e.R&&e.S,"Signature without R or S"),n.isPoint(e.R)&&(this._R=e.R),e.S instanceof BN&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}cachedProperty(Signature$1,"S",function n(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$1,"R",function n(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$1,"Rencoded",function n(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$1,"Sencoded",function n(){return this.eddsa.encodeInt(this.S())});Signature$1.prototype.toBytes=function n(){return this.Rencoded().concat(this.Sencoded())};Signature$1.prototype.toHex=function n(){return utils$1.encode(this.toBytes(),"hex").toUpperCase()};var signature=Signature$1,hash=hash$4,curves=curves$2,utils=utils$c,assert=utils.assert,parseBytes=utils.parseBytes,KeyPair=key,Signature=signature;function EDDSA(n){if(assert(n==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(n);n=curves[n].curve,this.curve=n,this.g=n.g,this.g.precompute(n.n.bitLength()+1),this.pointClass=n.point().constructor,this.encodingLength=Math.ceil(n.n.bitLength()/8),this.hash=hash.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function n(e,t){e=parseBytes(e);var o=this.keyFromSecret(t),c=this.hashInt(o.messagePrefix(),e),l=this.g.mul(c),h=this.encodePoint(l),d=this.hashInt(h,o.pubBytes(),e).mul(o.priv()),g=c.add(d).umod(this.curve.n);return this.makeSignature({R:l,S:g,Rencoded:h})};EDDSA.prototype.verify=function n(e,t,o){e=parseBytes(e),t=this.makeSignature(t);var c=this.keyFromPublic(o),l=this.hashInt(t.Rencoded(),c.pubBytes(),e),h=this.g.mul(t.S()),d=t.R().add(c.pub().mul(l));return d.eq(h)};EDDSA.prototype.hashInt=function n(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return utils.intFromLE(e.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function n(e){return KeyPair.fromPublic(this,e)};EDDSA.prototype.keyFromSecret=function n(e){return KeyPair.fromSecret(this,e)};EDDSA.prototype.makeSignature=function n(e){return e instanceof Signature?e:new Signature(this,e)};EDDSA.prototype.encodePoint=function n(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};EDDSA.prototype.decodePoint=function n(e){e=utils.parseBytes(e);var t=e.length-1,o=e.slice(0,t).concat(e[t]&-129),c=(e[t]&128)!==0,l=utils.intFromLE(o);return this.curve.pointFromY(l,c)};EDDSA.prototype.encodeInt=function n(e){return e.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function n(e){return utils.intFromLE(e)};EDDSA.prototype.isPoint=function n(e){return e instanceof this.pointClass};(function(n){var e=n;e.version=require$$0.version,e.utils=utils$c,e.rand=brorandExports,e.curve=curve,e.curves=curves$2,e.ec=ec$1,e.eddsa=eddsa})(elliptic$1);const elliptic=getDefaultExportFromCjs(elliptic$1),secp256k1$1=new elliptic.ec("secp256k1"),N=new BN$9("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),HARDENED_BIT=2147483648;async function derive$1(n,e,t){const o=isHardenedIndex(t),c=new Uint8Array(37),l=decode$4(secp256k1$1.keyFromPrivate(n).getPublic(!0,"hex"));o?(c[0]=0,c.set(n,1)):c.set(l,0),new DataView(c.buffer,c.byteOffset,c.byteLength).setUint32(33,t,!1);const h=await hash$2(HashAlgorithm.Sha512,e,c),d=h.subarray(0,32),g=h.subarray(32);try{const m=secp256k1$1.keyFromPrivate(n).getPrivate().add(secp256k1$1.keyFromPrivate(d).getPrivate()).mod(N),v=hexZeroPadded(m.toBuffer(),32);return m.eqn(0)?derive$1(n,e,t+1):{keyData:decode$4(v),chainCode:g}}catch{return derive$1(n,e,t+1)}}async function fromSeed$1(n){if(n.length<16)throw new TypeError("Seed should be at least 128 bits");if(n.length>64)throw new TypeError("Seed should be at most 512 bits");const e=await hash$2(HashAlgorithm.Sha512,"Bitcoin seed",n),t=e.subarray(0,32),o=e.subarray(32);return{keyData:t,chainCode:o}}function toHardenedIndex(n){return n|HARDENED_BIT}function isHardenedIndex(n){return(n&HARDENED_BIT)!==0}async function derive(n,e,t){if(isHardenedIndex(t))throw new Error("the index should not be pre-hardened");const o=new Uint8Array(37);o[0]=0,o.set(n,1),new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(33,t,!1),o[33]|=128;const c=await hash$2(HashAlgorithm.Sha512,e,o);return{keyData:c.subarray(0,32),chainCode:c.subarray(32)}}async function fromSeed(n){const e=await hash$2(HashAlgorithm.Sha512,"ed25519 seed",n);return{keyData:e.subarray(0,32),chainCode:e.subarray(32)}}const derPrefix$2="302e020100300506032b657004220420",derPrefixBytes$2=decode$4(derPrefix$2);class Ed25519PrivateKey{constructor(e,t){this._keyPair=e instanceof Uint8Array?nacl.sign.keyPair.fromSeed(e):e,this._chainCode=t??null}get _type(){return"ED25519"}static generate(){const e=bytes(64);return new Ed25519PrivateKey(nacl.sign.keyPair.fromSeed(e.subarray(0,32)),e.subarray(32))}static async generateAsync(){const e=await bytesAsync(64);return new Ed25519PrivateKey(nacl.sign.keyPair.fromSeed(e.subarray(0,32)),e.subarray(32))}static fromBytes(e){switch(e.length){case 48:return Ed25519PrivateKey.fromBytesDer(e);case 32:case 64:return Ed25519PrivateKey.fromBytesRaw(e);default:throw new BadKeyError(`invalid private key length: ${e.length} bytes`)}}static fromBytesDer(e){const t=forge.asn1.fromDer(new forge.util.ByteStringBuffer(e));let o;try{o=forge.pki.ed25519.privateKeyFromAsn1(t).privateKeyBytes}catch(l){const h=l!=null&&l.message!=null?l.message:"";throw new BadKeyError(`cannot decode ED25519 private key data from DER format: ${h}`)}const c=nacl.sign.keyPair.fromSeed(o);return new Ed25519PrivateKey(c)}static fromBytesRaw(e){switch(e.length){case 32:return new Ed25519PrivateKey(nacl.sign.keyPair.fromSeed(e));case 64:return new Ed25519PrivateKey(nacl.sign.keyPair.fromSecretKey(e))}throw new BadKeyError(`invalid private key length: ${e.length} bytes`)}static fromString(e){return Ed25519PrivateKey.fromBytes(decode$4(e))}static fromStringDer(e){return Ed25519PrivateKey.fromBytesDer(decode$4(e))}static fromStringRaw(e){return Ed25519PrivateKey.fromBytesRaw(decode$4(e))}static async fromSeed(e){const{keyData:t,chainCode:o}=await fromSeed(e);return new Ed25519PrivateKey(t,o)}get publicKey(){return new Ed25519PublicKey(this._keyPair.publicKey)}sign(e){return nacl.sign.detached(e,this._keyPair.secretKey)}toBytesDer(){const e=new Uint8Array(derPrefixBytes$2.length+32);return e.set(derPrefixBytes$2,0),e.set(this._keyPair.secretKey.subarray(0,32),derPrefixBytes$2.length),e}toBytesRaw(){return this._keyPair.secretKey.slice(0,32)}}const HEX_CHARS$1="0123456789abcdef".split(""),KECCAK_PADDING$1=[1,256,65536,16777216],SHIFT$1=[0,8,16,24],RC$1=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Keccak$1=n=>({blocks:[],reset:!0,block:0,start:0,blockCount:1600-(n<<1)>>5,outputBlocks:n>>5,s:(e=>[].concat(e,e,e,e,e))([0,0,0,0,0,0,0,0,0,0])}),update$1=(n,e)=>{for(var t=e.length,o=n.blocks,c=n.blockCount<<2,l=n.blockCount,h=n.outputBlocks,d=n.s,g=0,m,v;g<t;){if(n.reset)for(n.reset=!1,o[0]=n.block,m=1;m<l+1;++m)o[m]=0;if(typeof e!="string")for(m=n.start;g<t&&m<c;++g)o[m>>2]|=e[g]<<SHIFT$1[m++&3];else for(m=n.start;g<t&&m<c;++g)v=e.charCodeAt(g),v<128?o[m>>2]|=v<<SHIFT$1[m++&3]:v<2048?(o[m>>2]|=(192|v>>6)<<SHIFT$1[m++&3],o[m>>2]|=(128|v&63)<<SHIFT$1[m++&3]):v<55296||v>=57344?(o[m>>2]|=(224|v>>12)<<SHIFT$1[m++&3],o[m>>2]|=(128|v>>6&63)<<SHIFT$1[m++&3],o[m>>2]|=(128|v&63)<<SHIFT$1[m++&3]):(v=65536+((v&1023)<<10|e.charCodeAt(++g)&1023),o[m>>2]|=(240|v>>18)<<SHIFT$1[m++&3],o[m>>2]|=(128|v>>12&63)<<SHIFT$1[m++&3],o[m>>2]|=(128|v>>6&63)<<SHIFT$1[m++&3],o[m>>2]|=(128|v&63)<<SHIFT$1[m++&3]);if(n.lastByteIndex=m,m>=c){for(n.start=m-c,n.block=o[l],m=0;m<l;++m)d[m]^=o[m];f$1(d),n.reset=!0}else n.start=m}if(m=n.lastByteIndex,o[m>>2]|=KECCAK_PADDING$1[m&3],n.lastByteIndex===c)for(o[0]=o[l],m=1;m<l+1;++m)o[m]=0;for(o[l-1]|=2147483648,m=0;m<l;++m)d[m]^=o[m];f$1(d);var _="",p,a=0;for(m=0;a<h;){for(m=0;m<l&&a<h;++m,++a)p=d[m],_+=HEX_CHARS$1[p>>4&15]+HEX_CHARS$1[p&15]+HEX_CHARS$1[p>>12&15]+HEX_CHARS$1[p>>8&15]+HEX_CHARS$1[p>>20&15]+HEX_CHARS$1[p>>16&15]+HEX_CHARS$1[p>>28&15]+HEX_CHARS$1[p>>24&15];a%l===0&&(f$1(d),m=0)}return"0x"+_},f$1=n=>{var e,t,o,c,l,h,d,g,m,v,_,p,a,u,y,b,w,T,B,H,J,W,fe,re,se,ae,ee,P,C,E,k,F,j,Q,G,U,$,O,oe,ue,q,pe,be,ve,we,Ce,Re,Se,$e,De,Ne,pt,xt,Xe,yt,gt,ze,et,at,Ye,lt,dt,le;for(o=0;o<48;o+=2)c=n[0]^n[10]^n[20]^n[30]^n[40],l=n[1]^n[11]^n[21]^n[31]^n[41],h=n[2]^n[12]^n[22]^n[32]^n[42],d=n[3]^n[13]^n[23]^n[33]^n[43],g=n[4]^n[14]^n[24]^n[34]^n[44],m=n[5]^n[15]^n[25]^n[35]^n[45],v=n[6]^n[16]^n[26]^n[36]^n[46],_=n[7]^n[17]^n[27]^n[37]^n[47],p=n[8]^n[18]^n[28]^n[38]^n[48],a=n[9]^n[19]^n[29]^n[39]^n[49],e=p^(h<<1|d>>>31),t=a^(d<<1|h>>>31),n[0]^=e,n[1]^=t,n[10]^=e,n[11]^=t,n[20]^=e,n[21]^=t,n[30]^=e,n[31]^=t,n[40]^=e,n[41]^=t,e=c^(g<<1|m>>>31),t=l^(m<<1|g>>>31),n[2]^=e,n[3]^=t,n[12]^=e,n[13]^=t,n[22]^=e,n[23]^=t,n[32]^=e,n[33]^=t,n[42]^=e,n[43]^=t,e=h^(v<<1|_>>>31),t=d^(_<<1|v>>>31),n[4]^=e,n[5]^=t,n[14]^=e,n[15]^=t,n[24]^=e,n[25]^=t,n[34]^=e,n[35]^=t,n[44]^=e,n[45]^=t,e=g^(p<<1|a>>>31),t=m^(a<<1|p>>>31),n[6]^=e,n[7]^=t,n[16]^=e,n[17]^=t,n[26]^=e,n[27]^=t,n[36]^=e,n[37]^=t,n[46]^=e,n[47]^=t,e=v^(c<<1|l>>>31),t=_^(l<<1|c>>>31),n[8]^=e,n[9]^=t,n[18]^=e,n[19]^=t,n[28]^=e,n[29]^=t,n[38]^=e,n[39]^=t,n[48]^=e,n[49]^=t,u=n[0],y=n[1],Ce=n[11]<<4|n[10]>>>28,Re=n[10]<<4|n[11]>>>28,P=n[20]<<3|n[21]>>>29,C=n[21]<<3|n[20]>>>29,Ye=n[31]<<9|n[30]>>>23,lt=n[30]<<9|n[31]>>>23,pe=n[40]<<18|n[41]>>>14,be=n[41]<<18|n[40]>>>14,Q=n[2]<<1|n[3]>>>31,G=n[3]<<1|n[2]>>>31,b=n[13]<<12|n[12]>>>20,w=n[12]<<12|n[13]>>>20,Se=n[22]<<10|n[23]>>>22,$e=n[23]<<10|n[22]>>>22,E=n[33]<<13|n[32]>>>19,k=n[32]<<13|n[33]>>>19,dt=n[42]<<2|n[43]>>>30,le=n[43]<<2|n[42]>>>30,Xe=n[5]<<30|n[4]>>>2,yt=n[4]<<30|n[5]>>>2,U=n[14]<<6|n[15]>>>26,$=n[15]<<6|n[14]>>>26,T=n[25]<<11|n[24]>>>21,B=n[24]<<11|n[25]>>>21,De=n[34]<<15|n[35]>>>17,Ne=n[35]<<15|n[34]>>>17,F=n[45]<<29|n[44]>>>3,j=n[44]<<29|n[45]>>>3,re=n[6]<<28|n[7]>>>4,se=n[7]<<28|n[6]>>>4,gt=n[17]<<23|n[16]>>>9,ze=n[16]<<23|n[17]>>>9,O=n[26]<<25|n[27]>>>7,oe=n[27]<<25|n[26]>>>7,H=n[36]<<21|n[37]>>>11,J=n[37]<<21|n[36]>>>11,pt=n[47]<<24|n[46]>>>8,xt=n[46]<<24|n[47]>>>8,ve=n[8]<<27|n[9]>>>5,we=n[9]<<27|n[8]>>>5,ae=n[18]<<20|n[19]>>>12,ee=n[19]<<20|n[18]>>>12,et=n[29]<<7|n[28]>>>25,at=n[28]<<7|n[29]>>>25,ue=n[38]<<8|n[39]>>>24,q=n[39]<<8|n[38]>>>24,W=n[48]<<14|n[49]>>>18,fe=n[49]<<14|n[48]>>>18,n[0]=u^~b&T,n[1]=y^~w&B,n[10]=re^~ae&P,n[11]=se^~ee&C,n[20]=Q^~U&O,n[21]=G^~$&oe,n[30]=ve^~Ce&Se,n[31]=we^~Re&$e,n[40]=Xe^~gt&et,n[41]=yt^~ze&at,n[2]=b^~T&H,n[3]=w^~B&J,n[12]=ae^~P&E,n[13]=ee^~C&k,n[22]=U^~O&ue,n[23]=$^~oe&q,n[32]=Ce^~Se&De,n[33]=Re^~$e&Ne,n[42]=gt^~et&Ye,n[43]=ze^~at&lt,n[4]=T^~H&W,n[5]=B^~J&fe,n[14]=P^~E&F,n[15]=C^~k&j,n[24]=O^~ue&pe,n[25]=oe^~q&be,n[34]=Se^~De&pt,n[35]=$e^~Ne&xt,n[44]=et^~Ye&dt,n[45]=at^~lt&le,n[6]=H^~W&u,n[7]=J^~fe&y,n[16]=E^~F&re,n[17]=k^~j&se,n[26]=ue^~pe&Q,n[27]=q^~be&G,n[36]=De^~pt&ve,n[37]=Ne^~xt&we,n[46]=Ye^~dt&Xe,n[47]=lt^~le&yt,n[8]=W^~u&b,n[9]=fe^~y&w,n[18]=F^~re&ae,n[19]=j^~se&ee,n[28]=pe^~Q&U,n[29]=be^~G&$,n[38]=pt^~ve&Ce,n[39]=xt^~we&Re,n[48]=dt^~Xe&gt,n[49]=le^~yt&ze,n[0]^=RC$1[o],n[1]^=RC$1[o+1]},keccak$1=n=>e=>{var t;if(e.slice(0,2)==="0x"){t=[];for(var o=2,c=e.length;o<c;o+=2)t.push(parseInt(e.slice(o,o+2),16))}else t=e;return update$1(Keccak$1(n),t)},keccak256$1=keccak$1(256),secp256k1=new elliptic.ec("secp256k1");function generate(){const n=secp256k1.genKeyPair();return{privateKey:decode$4(n.getPrivate("hex")),publicKey:decode$4(n.getPublic(!0,"hex"))}}async function generateAsync(){return Promise.resolve(generate())}function fromBytes(n){const e=secp256k1.keyFromPrivate(n);return{privateKey:decode$4(e.getPrivate("hex")),publicKey:decode$4(e.getPublic(!0,"hex"))}}function getFullPublicKey(n){const e=secp256k1.keyFromPublic(n);return decode$4(e.getPublic(!1,"hex"))}function sign(n,e){const t=encode$2(e),o=decode$4(keccak256$1(`0x${t}`)),l=secp256k1.keyFromPrivate(n).sign(o),h=l.r.toArray("be",32),d=l.s.toArray("be",32),g=new Uint8Array(64);return g.set(h,0),g.set(d,32),g}function verify(n,e,t){const o=encode$2(e),c=decode$4(keccak256$1(`0x${o}`));return secp256k1.keyFromPublic(n).verify(c,{r:t.subarray(0,32),s:t.subarray(32,64)})}const ec=new elliptic.ec("secp256k1"),legacyDerPrefix="302d300706052b8104000a032200",legacyDerPrefixBytes=decode$4(legacyDerPrefix),derPrefix$1="3036301006072a8648ce3d020106052b8104000a032200",derPrefixBytes$1=decode$4(derPrefix$1);class EcdsaPublicKey extends Key$1{constructor(e){super(),this._keyData=e}get _type(){return"secp256k1"}static fromBytes(e){switch(e.length){case 33:return EcdsaPublicKey.fromBytesRaw(e);default:return EcdsaPublicKey.fromBytesDer(e)}}static fromBytesDer(e){let t=new Uint8Array;switch(e.length){case 47:t=e.subarray(legacyDerPrefixBytes.length);break;case 56:t=e.subarray(derPrefixBytes$1.length,derPrefixBytes$1.length+33);break;default:const l=ec.keyFromPublic(e.subarray(derPrefixBytes$1.length),"der").getPublic().encodeCompressed("hex");t=decode$4(l);break}if(t.length==0)throw new BadKeyError("cannot decode ECDSA private key data from DER format");return new EcdsaPublicKey(t)}static fromBytesRaw(e){if(e.length!=33)throw new BadKeyError(`invalid public key length: ${e.length} bytes`);return new EcdsaPublicKey(e)}static fromString(e){return EcdsaPublicKey.fromBytes(decode$4(e))}verify(e,t){return verify(this._keyData,e,t)}toBytesDer(){const e=new Uint8Array(legacyDerPrefixBytes.length+this._keyData.length);return e.set(legacyDerPrefixBytes,0),e.set(this._keyData,legacyDerPrefixBytes.length),e}toBytesRaw(){return new Uint8Array(this._keyData.subarray())}toEthereumAddress(){const e=decode$4(keccak256$1(`0x${encode$2(getFullPublicKey(this.toBytesRaw()).subarray(1))}`));return encode$2(e.subarray(12))}equals(e){return arrayEqual$1(this._keyData,e._keyData)}}const derPrefix="3030020100300706052b8104000a04220420",derPrefixBytes=decode$4(derPrefix),derPrefix2="30540201010420",derPrefixBytes2=decode$4(derPrefix2);class EcdsaPrivateKey{constructor(e,t){this._keyPair=e,this._chainCode=t??null}get _type(){return"secp256k1"}static generate(){return new EcdsaPrivateKey(generate())}static async generateAsync(){return new EcdsaPrivateKey(await generateAsync())}static fromBytes(e){switch(e.length){case 32:return EcdsaPrivateKey.fromBytesRaw(e);default:return EcdsaPrivateKey.fromBytesDer(e)}}static fromBytesDer(e){let t=new Uint8Array;return arrayStartsWith(e,derPrefixBytes)?t=e.subarray(derPrefixBytes.length):t=e.subarray(derPrefixBytes2.length,derPrefixBytes2.length+32),new EcdsaPrivateKey(fromBytes(t))}static fromBytesRaw(e){return new EcdsaPrivateKey(fromBytes(e))}static fromString(e){return EcdsaPrivateKey.fromBytes(decode$4(e))}static fromStringDer(e){return EcdsaPrivateKey.fromBytesDer(decode$4(e))}static fromStringRaw(e){return EcdsaPrivateKey.fromBytesRaw(decode$4(e))}static async fromSeed(e){const{keyData:t,chainCode:o}=await fromSeed$1(e);return new EcdsaPrivateKey(fromBytes(t),o)}get publicKey(){return new EcdsaPublicKey(this._keyPair.publicKey)}sign(e){return sign(this._keyPair.privateKey,e)}toBytesDer(){const e=new Uint8Array(derPrefixBytes.length+32);return e.set(derPrefixBytes,0),e.set(this._keyPair.privateKey.subarray(0,32),derPrefixBytes.length),e}toBytesRaw(){const e=new Uint8Array(32);return e.set(this._keyPair.privateKey.slice(0,32),0),e}}let PublicKey$1=class pr extends Key$1{constructor(e){super(),this._key=e}get _type(){return this._key._type}static fromBytes(e){let t;try{return new pr(Ed25519PublicKey.fromBytes(e))}catch(o){t=o!=null&&o.message!=null?o.message:""}try{return new pr(EcdsaPublicKey.fromBytes(e))}catch(o){t=o!=null&&o.message!=null?o.message:""}throw new BadKeyError(`public key cannot be decoded from bytes: ${t}`)}static fromBytesED25519(e){return new pr(Ed25519PublicKey.fromBytes(e))}static fromBytesECDSA(e){return new pr(EcdsaPublicKey.fromBytes(e))}static fromString(e){return pr.fromBytes(decode$4(e))}static fromStringED25519(e){return pr.fromBytesED25519(decode$4(e))}static fromStringECDSA(e){return pr.fromBytesECDSA(decode$4(e))}verify(e,t){return this._key.verify(e,t)}verifyTransaction(e){console.log("Deprecated: use `@hashgraph/sdk`.PublicKey instead"),e._requireFrozen(),e.isFrozen()||e.freeze();for(const t of e._signedTransactions)if(t.sigMap!=null&&t.sigMap.sigPair!=null){let o=!1;for(const c of t.sigMap.sigPair){const l=c.pubKeyPrefix;if(arrayEqual$1(l,this.toBytesRaw())){o=!0;const h=t.bodyBytes,d=c.ed25519!=null?c.ed25519:c.ECDSASecp256k1;if(!this.verify(h,d))return!1}}if(!o)return!1}return!0}toBytes(){return this._key instanceof Ed25519PublicKey?this.toBytesRaw():this.toBytesDer()}toBytesDer(){return this._key.toBytesDer()}toBytesRaw(){return this._key.toBytesRaw()}toString(){return this.toStringDer()}toStringDer(){return encode$2(this.toBytesDer())}toStringRaw(){return encode$2(this.toBytesRaw())}toEthereumAddress(){if(this._key instanceof EcdsaPublicKey)return this._key.toEthereumAddress();throw new Error("unsupported operation on Ed25519PublicKey")}equals(e){return this._key instanceof Ed25519PublicKey&&e._key instanceof Ed25519PublicKey?this._key.equals(e._key):this._key instanceof EcdsaPublicKey&&e._key instanceof EcdsaPublicKey?this._key.equals(e._key):!1}};var sparkMd5={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(t){var o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function c(w,T){var B=w[0],H=w[1],J=w[2],W=w[3];B+=(H&J|~H&W)+T[0]-680876936|0,B=(B<<7|B>>>25)+H|0,W+=(B&H|~B&J)+T[1]-389564586|0,W=(W<<12|W>>>20)+B|0,J+=(W&B|~W&H)+T[2]+606105819|0,J=(J<<17|J>>>15)+W|0,H+=(J&W|~J&B)+T[3]-1044525330|0,H=(H<<22|H>>>10)+J|0,B+=(H&J|~H&W)+T[4]-176418897|0,B=(B<<7|B>>>25)+H|0,W+=(B&H|~B&J)+T[5]+1200080426|0,W=(W<<12|W>>>20)+B|0,J+=(W&B|~W&H)+T[6]-1473231341|0,J=(J<<17|J>>>15)+W|0,H+=(J&W|~J&B)+T[7]-45705983|0,H=(H<<22|H>>>10)+J|0,B+=(H&J|~H&W)+T[8]+1770035416|0,B=(B<<7|B>>>25)+H|0,W+=(B&H|~B&J)+T[9]-1958414417|0,W=(W<<12|W>>>20)+B|0,J+=(W&B|~W&H)+T[10]-42063|0,J=(J<<17|J>>>15)+W|0,H+=(J&W|~J&B)+T[11]-1990404162|0,H=(H<<22|H>>>10)+J|0,B+=(H&J|~H&W)+T[12]+1804603682|0,B=(B<<7|B>>>25)+H|0,W+=(B&H|~B&J)+T[13]-40341101|0,W=(W<<12|W>>>20)+B|0,J+=(W&B|~W&H)+T[14]-1502002290|0,J=(J<<17|J>>>15)+W|0,H+=(J&W|~J&B)+T[15]+1236535329|0,H=(H<<22|H>>>10)+J|0,B+=(H&W|J&~W)+T[1]-165796510|0,B=(B<<5|B>>>27)+H|0,W+=(B&J|H&~J)+T[6]-1069501632|0,W=(W<<9|W>>>23)+B|0,J+=(W&H|B&~H)+T[11]+643717713|0,J=(J<<14|J>>>18)+W|0,H+=(J&B|W&~B)+T[0]-373897302|0,H=(H<<20|H>>>12)+J|0,B+=(H&W|J&~W)+T[5]-701558691|0,B=(B<<5|B>>>27)+H|0,W+=(B&J|H&~J)+T[10]+38016083|0,W=(W<<9|W>>>23)+B|0,J+=(W&H|B&~H)+T[15]-660478335|0,J=(J<<14|J>>>18)+W|0,H+=(J&B|W&~B)+T[4]-405537848|0,H=(H<<20|H>>>12)+J|0,B+=(H&W|J&~W)+T[9]+568446438|0,B=(B<<5|B>>>27)+H|0,W+=(B&J|H&~J)+T[14]-1019803690|0,W=(W<<9|W>>>23)+B|0,J+=(W&H|B&~H)+T[3]-187363961|0,J=(J<<14|J>>>18)+W|0,H+=(J&B|W&~B)+T[8]+1163531501|0,H=(H<<20|H>>>12)+J|0,B+=(H&W|J&~W)+T[13]-1444681467|0,B=(B<<5|B>>>27)+H|0,W+=(B&J|H&~J)+T[2]-51403784|0,W=(W<<9|W>>>23)+B|0,J+=(W&H|B&~H)+T[7]+1735328473|0,J=(J<<14|J>>>18)+W|0,H+=(J&B|W&~B)+T[12]-1926607734|0,H=(H<<20|H>>>12)+J|0,B+=(H^J^W)+T[5]-378558|0,B=(B<<4|B>>>28)+H|0,W+=(B^H^J)+T[8]-2022574463|0,W=(W<<11|W>>>21)+B|0,J+=(W^B^H)+T[11]+1839030562|0,J=(J<<16|J>>>16)+W|0,H+=(J^W^B)+T[14]-35309556|0,H=(H<<23|H>>>9)+J|0,B+=(H^J^W)+T[1]-1530992060|0,B=(B<<4|B>>>28)+H|0,W+=(B^H^J)+T[4]+1272893353|0,W=(W<<11|W>>>21)+B|0,J+=(W^B^H)+T[7]-155497632|0,J=(J<<16|J>>>16)+W|0,H+=(J^W^B)+T[10]-1094730640|0,H=(H<<23|H>>>9)+J|0,B+=(H^J^W)+T[13]+681279174|0,B=(B<<4|B>>>28)+H|0,W+=(B^H^J)+T[0]-358537222|0,W=(W<<11|W>>>21)+B|0,J+=(W^B^H)+T[3]-722521979|0,J=(J<<16|J>>>16)+W|0,H+=(J^W^B)+T[6]+76029189|0,H=(H<<23|H>>>9)+J|0,B+=(H^J^W)+T[9]-640364487|0,B=(B<<4|B>>>28)+H|0,W+=(B^H^J)+T[12]-421815835|0,W=(W<<11|W>>>21)+B|0,J+=(W^B^H)+T[15]+530742520|0,J=(J<<16|J>>>16)+W|0,H+=(J^W^B)+T[2]-995338651|0,H=(H<<23|H>>>9)+J|0,B+=(J^(H|~W))+T[0]-198630844|0,B=(B<<6|B>>>26)+H|0,W+=(H^(B|~J))+T[7]+1126891415|0,W=(W<<10|W>>>22)+B|0,J+=(B^(W|~H))+T[14]-1416354905|0,J=(J<<15|J>>>17)+W|0,H+=(W^(J|~B))+T[5]-57434055|0,H=(H<<21|H>>>11)+J|0,B+=(J^(H|~W))+T[12]+1700485571|0,B=(B<<6|B>>>26)+H|0,W+=(H^(B|~J))+T[3]-1894986606|0,W=(W<<10|W>>>22)+B|0,J+=(B^(W|~H))+T[10]-1051523|0,J=(J<<15|J>>>17)+W|0,H+=(W^(J|~B))+T[1]-2054922799|0,H=(H<<21|H>>>11)+J|0,B+=(J^(H|~W))+T[8]+1873313359|0,B=(B<<6|B>>>26)+H|0,W+=(H^(B|~J))+T[15]-30611744|0,W=(W<<10|W>>>22)+B|0,J+=(B^(W|~H))+T[6]-1560198380|0,J=(J<<15|J>>>17)+W|0,H+=(W^(J|~B))+T[13]+1309151649|0,H=(H<<21|H>>>11)+J|0,B+=(J^(H|~W))+T[4]-145523070|0,B=(B<<6|B>>>26)+H|0,W+=(H^(B|~J))+T[11]-1120210379|0,W=(W<<10|W>>>22)+B|0,J+=(B^(W|~H))+T[2]+718787259|0,J=(J<<15|J>>>17)+W|0,H+=(W^(J|~B))+T[9]-343485551|0,H=(H<<21|H>>>11)+J|0,w[0]=B+w[0]|0,w[1]=H+w[1]|0,w[2]=J+w[2]|0,w[3]=W+w[3]|0}function l(w){var T=[],B;for(B=0;B<64;B+=4)T[B>>2]=w.charCodeAt(B)+(w.charCodeAt(B+1)<<8)+(w.charCodeAt(B+2)<<16)+(w.charCodeAt(B+3)<<24);return T}function h(w){var T=[],B;for(B=0;B<64;B+=4)T[B>>2]=w[B]+(w[B+1]<<8)+(w[B+2]<<16)+(w[B+3]<<24);return T}function d(w){var T=w.length,B=[1732584193,-271733879,-1732584194,271733878],H,J,W,fe,re,se;for(H=64;H<=T;H+=64)c(B,l(w.substring(H-64,H)));for(w=w.substring(H-64),J=w.length,W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],H=0;H<J;H+=1)W[H>>2]|=w.charCodeAt(H)<<(H%4<<3);if(W[H>>2]|=128<<(H%4<<3),H>55)for(c(B,W),H=0;H<16;H+=1)W[H]=0;return fe=T*8,fe=fe.toString(16).match(/(.*?)(.{0,8})$/),re=parseInt(fe[2],16),se=parseInt(fe[1],16)||0,W[14]=re,W[15]=se,c(B,W),B}function g(w){var T=w.length,B=[1732584193,-271733879,-1732584194,271733878],H,J,W,fe,re,se;for(H=64;H<=T;H+=64)c(B,h(w.subarray(H-64,H)));for(w=H-64<T?w.subarray(H-64):new Uint8Array(0),J=w.length,W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],H=0;H<J;H+=1)W[H>>2]|=w[H]<<(H%4<<3);if(W[H>>2]|=128<<(H%4<<3),H>55)for(c(B,W),H=0;H<16;H+=1)W[H]=0;return fe=T*8,fe=fe.toString(16).match(/(.*?)(.{0,8})$/),re=parseInt(fe[2],16),se=parseInt(fe[1],16)||0,W[14]=re,W[15]=se,c(B,W),B}function m(w){var T="",B;for(B=0;B<4;B+=1)T+=o[w>>B*8+4&15]+o[w>>B*8&15];return T}function v(w){var T;for(T=0;T<w.length;T+=1)w[T]=m(w[T]);return w.join("")}v(d("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function w(T,B){return T=T|0||0,T<0?Math.max(T+B,0):Math.min(T,B)}ArrayBuffer.prototype.slice=function(T,B){var H=this.byteLength,J=w(T,H),W=H,fe,re,se,ae;return B!==t&&(W=w(B,H)),J>W?new ArrayBuffer(0):(fe=W-J,re=new ArrayBuffer(fe),se=new Uint8Array(re),ae=new Uint8Array(this,J,fe),se.set(ae),re)}}();function _(w){return/[\u0080-\uFFFF]/.test(w)&&(w=unescape(encodeURIComponent(w))),w}function p(w,T){var B=w.length,H=new ArrayBuffer(B),J=new Uint8Array(H),W;for(W=0;W<B;W+=1)J[W]=w.charCodeAt(W);return T?J:H}function a(w){return String.fromCharCode.apply(null,new Uint8Array(w))}function u(w,T,B){var H=new Uint8Array(w.byteLength+T.byteLength);return H.set(new Uint8Array(w)),H.set(new Uint8Array(T),w.byteLength),B?H:H.buffer}function y(w){var T=[],B=w.length,H;for(H=0;H<B-1;H+=2)T.push(parseInt(w.substr(H,2),16));return String.fromCharCode.apply(String,T)}function b(){this.reset()}return b.prototype.append=function(w){return this.appendBinary(_(w)),this},b.prototype.appendBinary=function(w){this._buff+=w,this._length+=w.length;var T=this._buff.length,B;for(B=64;B<=T;B+=64)c(this._hash,l(this._buff.substring(B-64,B)));return this._buff=this._buff.substring(B-64),this},b.prototype.end=function(w){var T=this._buff,B=T.length,H,J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],W;for(H=0;H<B;H+=1)J[H>>2]|=T.charCodeAt(H)<<(H%4<<3);return this._finish(J,B),W=v(this._hash),w&&(W=y(W)),this.reset(),W},b.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},b.prototype.setState=function(w){return this._buff=w.buff,this._length=w.length,this._hash=w.hash,this},b.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},b.prototype._finish=function(w,T){var B=T,H,J,W;if(w[B>>2]|=128<<(B%4<<3),B>55)for(c(this._hash,w),B=0;B<16;B+=1)w[B]=0;H=this._length*8,H=H.toString(16).match(/(.*?)(.{0,8})$/),J=parseInt(H[2],16),W=parseInt(H[1],16)||0,w[14]=J,w[15]=W,c(this._hash,w)},b.hash=function(w,T){return b.hashBinary(_(w),T)},b.hashBinary=function(w,T){var B=d(w),H=v(B);return T?y(H):H},b.ArrayBuffer=function(){this.reset()},b.ArrayBuffer.prototype.append=function(w){var T=u(this._buff.buffer,w,!0),B=T.length,H;for(this._length+=w.byteLength,H=64;H<=B;H+=64)c(this._hash,h(T.subarray(H-64,H)));return this._buff=H-64<B?new Uint8Array(T.buffer.slice(H-64)):new Uint8Array(0),this},b.ArrayBuffer.prototype.end=function(w){var T=this._buff,B=T.length,H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],J,W;for(J=0;J<B;J+=1)H[J>>2]|=T[J]<<(J%4<<3);return this._finish(H,B),W=v(this._hash),w&&(W=y(W)),this.reset(),W},b.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.ArrayBuffer.prototype.getState=function(){var w=b.prototype.getState.call(this);return w.buff=a(w.buff),w},b.ArrayBuffer.prototype.setState=function(w){return w.buff=p(w.buff,!0),b.prototype.setState.call(this,w)},b.ArrayBuffer.prototype.destroy=b.prototype.destroy,b.ArrayBuffer.prototype._finish=b.prototype._finish,b.ArrayBuffer.hash=function(w,T){var B=g(new Uint8Array(w)),H=v(B);return T?y(H):H},b})})(sparkMd5);var sparkMd5Exports=sparkMd5.exports;const SparkMD5=getDefaultExportFromCjs(sparkMd5Exports);var buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var o=t===e?0:4-t%4;return[t,o]}function byteLength(n){var e=getLens(n),t=e[0],o=e[1];return(t+o)*3/4-o}function _byteLength(n,e,t){return(e+t)*3/4-t}function toByteArray(n){var e,t=getLens(n),o=t[0],c=t[1],l=new Arr(_byteLength(n,o,c)),h=0,d=c>0?o-4:o,g;for(g=0;g<d;g+=4)e=revLookup[n.charCodeAt(g)]<<18|revLookup[n.charCodeAt(g+1)]<<12|revLookup[n.charCodeAt(g+2)]<<6|revLookup[n.charCodeAt(g+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=e&255;return c===2&&(e=revLookup[n.charCodeAt(g)]<<2|revLookup[n.charCodeAt(g+1)]>>4,l[h++]=e&255),c===1&&(e=revLookup[n.charCodeAt(g)]<<10|revLookup[n.charCodeAt(g+1)]<<4|revLookup[n.charCodeAt(g+2)]>>2,l[h++]=e>>8&255,l[h++]=e&255),l}function tripletToBase64(n){return lookup[n>>18&63]+lookup[n>>12&63]+lookup[n>>6&63]+lookup[n&63]}function encodeChunk(n,e,t){for(var o,c=[],l=e;l<t;l+=3)o=(n[l]<<16&16711680)+(n[l+1]<<8&65280)+(n[l+2]&255),c.push(tripletToBase64(o));return c.join("")}function fromByteArray(n){for(var e,t=n.length,o=t%3,c=[],l=16383,h=0,d=t-o;h<d;h+=l)c.push(encodeChunk(n,h,h+l>d?d:h+l));return o===1?(e=n[t-1],c.push(lookup[e>>2]+lookup[e<<4&63]+"==")):o===2&&(e=(n[t-2]<<8)+n[t-1],c.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),c.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(n,e,t,o,c){var l,h,d=c*8-o-1,g=(1<<d)-1,m=g>>1,v=-7,_=t?c-1:0,p=t?-1:1,a=n[e+_];for(_+=p,l=a&(1<<-v)-1,a>>=-v,v+=d;v>0;l=l*256+n[e+_],_+=p,v-=8);for(h=l&(1<<-v)-1,l>>=-v,v+=o;v>0;h=h*256+n[e+_],_+=p,v-=8);if(l===0)l=1-m;else{if(l===g)return h?NaN:(a?-1:1)*(1/0);h=h+Math.pow(2,o),l=l-m}return(a?-1:1)*h*Math.pow(2,l-o)};ieee754.write=function(n,e,t,o,c,l){var h,d,g,m=l*8-c-1,v=(1<<m)-1,_=v>>1,p=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,a=o?0:l-1,u=o?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(d=isNaN(e)?1:0,h=v):(h=Math.floor(Math.log(e)/Math.LN2),e*(g=Math.pow(2,-h))<1&&(h--,g*=2),h+_>=1?e+=p/g:e+=p*Math.pow(2,1-_),e*g>=2&&(h++,g/=2),h+_>=v?(d=0,h=v):h+_>=1?(d=(e*g-1)*Math.pow(2,c),h=h+_):(d=e*Math.pow(2,_-1)*Math.pow(2,c),h=0));c>=8;n[t+a]=d&255,a+=u,d/=256,c-=8);for(h=h<<c|d,m+=c;m>0;n[t+a]=h&255,a+=u,h/=256,m-=8);n[t+a-u]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=base64Js,t=ieee754,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=d,n.SlowBuffer=T,n.INSPECT_MAX_BYTES=50;const c=2147483647;n.kMaxLength=c,d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const le=new Uint8Array(1),ne={foo:function(){return 42}};return Object.setPrototypeOf(ne,Uint8Array.prototype),Object.setPrototypeOf(le,ne),le.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function h(le){if(le>c)throw new RangeError('The value "'+le+'" is invalid for option "size"');const ne=new Uint8Array(le);return Object.setPrototypeOf(ne,d.prototype),ne}function d(le,ne,ie){if(typeof le=="number"){if(typeof ne=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(le)}return g(le,ne,ie)}d.poolSize=8192;function g(le,ne,ie){if(typeof le=="string")return p(le,ne);if(ArrayBuffer.isView(le))return u(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(et(le,ArrayBuffer)||le&&et(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(et(le,SharedArrayBuffer)||le&&et(le.buffer,SharedArrayBuffer)))return y(le,ne,ie);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ge=le.valueOf&&le.valueOf();if(ge!=null&&ge!==le)return d.from(ge,ne,ie);const _e=b(le);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return d.from(le[Symbol.toPrimitive]("string"),ne,ie);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}d.from=function(le,ne,ie){return g(le,ne,ie)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array);function m(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function v(le,ne,ie){return m(le),le<=0?h(le):ne!==void 0?typeof ie=="string"?h(le).fill(ne,ie):h(le).fill(ne):h(le)}d.alloc=function(le,ne,ie){return v(le,ne,ie)};function _(le){return m(le),h(le<0?0:w(le)|0)}d.allocUnsafe=function(le){return _(le)},d.allocUnsafeSlow=function(le){return _(le)};function p(le,ne){if((typeof ne!="string"||ne==="")&&(ne="utf8"),!d.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);const ie=B(le,ne)|0;let ge=h(ie);const _e=ge.write(le,ne);return _e!==ie&&(ge=ge.slice(0,_e)),ge}function a(le){const ne=le.length<0?0:w(le.length)|0,ie=h(ne);for(let ge=0;ge<ne;ge+=1)ie[ge]=le[ge]&255;return ie}function u(le){if(et(le,Uint8Array)){const ne=new Uint8Array(le);return y(ne.buffer,ne.byteOffset,ne.byteLength)}return a(le)}function y(le,ne,ie){if(ne<0||le.byteLength<ne)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<ne+(ie||0))throw new RangeError('"length" is outside of buffer bounds');let ge;return ne===void 0&&ie===void 0?ge=new Uint8Array(le):ie===void 0?ge=new Uint8Array(le,ne):ge=new Uint8Array(le,ne,ie),Object.setPrototypeOf(ge,d.prototype),ge}function b(le){if(d.isBuffer(le)){const ne=w(le.length)|0,ie=h(ne);return ie.length===0||le.copy(ie,0,0,ne),ie}if(le.length!==void 0)return typeof le.length!="number"||at(le.length)?h(0):a(le);if(le.type==="Buffer"&&Array.isArray(le.data))return a(le.data)}function w(le){if(le>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return le|0}function T(le){return+le!=le&&(le=0),d.alloc(+le)}d.isBuffer=function(ne){return ne!=null&&ne._isBuffer===!0&&ne!==d.prototype},d.compare=function(ne,ie){if(et(ne,Uint8Array)&&(ne=d.from(ne,ne.offset,ne.byteLength)),et(ie,Uint8Array)&&(ie=d.from(ie,ie.offset,ie.byteLength)),!d.isBuffer(ne)||!d.isBuffer(ie))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ne===ie)return 0;let ge=ne.length,_e=ie.length;for(let Ee=0,Te=Math.min(ge,_e);Ee<Te;++Ee)if(ne[Ee]!==ie[Ee]){ge=ne[Ee],_e=ie[Ee];break}return ge<_e?-1:_e<ge?1:0},d.isEncoding=function(ne){switch(String(ne).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(ne,ie){if(!Array.isArray(ne))throw new TypeError('"list" argument must be an Array of Buffers');if(ne.length===0)return d.alloc(0);let ge;if(ie===void 0)for(ie=0,ge=0;ge<ne.length;++ge)ie+=ne[ge].length;const _e=d.allocUnsafe(ie);let Ee=0;for(ge=0;ge<ne.length;++ge){let Te=ne[ge];if(et(Te,Uint8Array))Ee+Te.length>_e.length?(d.isBuffer(Te)||(Te=d.from(Te)),Te.copy(_e,Ee)):Uint8Array.prototype.set.call(_e,Te,Ee);else if(d.isBuffer(Te))Te.copy(_e,Ee);else throw new TypeError('"list" argument must be an Array of Buffers');Ee+=Te.length}return _e};function B(le,ne){if(d.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||et(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const ie=le.length,ge=arguments.length>2&&arguments[2]===!0;if(!ge&&ie===0)return 0;let _e=!1;for(;;)switch(ne){case"ascii":case"latin1":case"binary":return ie;case"utf8":case"utf-8":return xt(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie*2;case"hex":return ie>>>1;case"base64":return gt(le).length;default:if(_e)return ge?-1:xt(le).length;ne=(""+ne).toLowerCase(),_e=!0}}d.byteLength=B;function H(le,ne,ie){let ge=!1;if((ne===void 0||ne<0)&&(ne=0),ne>this.length||((ie===void 0||ie>this.length)&&(ie=this.length),ie<=0)||(ie>>>=0,ne>>>=0,ie<=ne))return"";for(le||(le="utf8");;)switch(le){case"hex":return G(this,ne,ie);case"utf8":case"utf-8":return E(this,ne,ie);case"ascii":return j(this,ne,ie);case"latin1":case"binary":return Q(this,ne,ie);case"base64":return C(this,ne,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,ne,ie);default:if(ge)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),ge=!0}}d.prototype._isBuffer=!0;function J(le,ne,ie){const ge=le[ne];le[ne]=le[ie],le[ie]=ge}d.prototype.swap16=function(){const ne=this.length;if(ne%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ie=0;ie<ne;ie+=2)J(this,ie,ie+1);return this},d.prototype.swap32=function(){const ne=this.length;if(ne%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ie=0;ie<ne;ie+=4)J(this,ie,ie+3),J(this,ie+1,ie+2);return this},d.prototype.swap64=function(){const ne=this.length;if(ne%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ie=0;ie<ne;ie+=8)J(this,ie,ie+7),J(this,ie+1,ie+6),J(this,ie+2,ie+5),J(this,ie+3,ie+4);return this},d.prototype.toString=function(){const ne=this.length;return ne===0?"":arguments.length===0?E(this,0,ne):H.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(ne){if(!d.isBuffer(ne))throw new TypeError("Argument must be a Buffer");return this===ne?!0:d.compare(this,ne)===0},d.prototype.inspect=function(){let ne="";const ie=n.INSPECT_MAX_BYTES;return ne=this.toString("hex",0,ie).replace(/(.{2})/g,"$1 ").trim(),this.length>ie&&(ne+=" ... "),"<Buffer "+ne+">"},o&&(d.prototype[o]=d.prototype.inspect),d.prototype.compare=function(ne,ie,ge,_e,Ee){if(et(ne,Uint8Array)&&(ne=d.from(ne,ne.offset,ne.byteLength)),!d.isBuffer(ne))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ne);if(ie===void 0&&(ie=0),ge===void 0&&(ge=ne?ne.length:0),_e===void 0&&(_e=0),Ee===void 0&&(Ee=this.length),ie<0||ge>ne.length||_e<0||Ee>this.length)throw new RangeError("out of range index");if(_e>=Ee&&ie>=ge)return 0;if(_e>=Ee)return-1;if(ie>=ge)return 1;if(ie>>>=0,ge>>>=0,_e>>>=0,Ee>>>=0,this===ne)return 0;let Te=Ee-_e,Qe=ge-ie;const ot=Math.min(Te,Qe),je=this.slice(_e,Ee),ct=ne.slice(ie,ge);for(let tt=0;tt<ot;++tt)if(je[tt]!==ct[tt]){Te=je[tt],Qe=ct[tt];break}return Te<Qe?-1:Qe<Te?1:0};function W(le,ne,ie,ge,_e){if(le.length===0)return-1;if(typeof ie=="string"?(ge=ie,ie=0):ie>2147483647?ie=2147483647:ie<-2147483648&&(ie=-2147483648),ie=+ie,at(ie)&&(ie=_e?0:le.length-1),ie<0&&(ie=le.length+ie),ie>=le.length){if(_e)return-1;ie=le.length-1}else if(ie<0)if(_e)ie=0;else return-1;if(typeof ne=="string"&&(ne=d.from(ne,ge)),d.isBuffer(ne))return ne.length===0?-1:fe(le,ne,ie,ge,_e);if(typeof ne=="number")return ne=ne&255,typeof Uint8Array.prototype.indexOf=="function"?_e?Uint8Array.prototype.indexOf.call(le,ne,ie):Uint8Array.prototype.lastIndexOf.call(le,ne,ie):fe(le,[ne],ie,ge,_e);throw new TypeError("val must be string, number or Buffer")}function fe(le,ne,ie,ge,_e){let Ee=1,Te=le.length,Qe=ne.length;if(ge!==void 0&&(ge=String(ge).toLowerCase(),ge==="ucs2"||ge==="ucs-2"||ge==="utf16le"||ge==="utf-16le")){if(le.length<2||ne.length<2)return-1;Ee=2,Te/=2,Qe/=2,ie/=2}function ot(ct,tt){return Ee===1?ct[tt]:ct.readUInt16BE(tt*Ee)}let je;if(_e){let ct=-1;for(je=ie;je<Te;je++)if(ot(le,je)===ot(ne,ct===-1?0:je-ct)){if(ct===-1&&(ct=je),je-ct+1===Qe)return ct*Ee}else ct!==-1&&(je-=je-ct),ct=-1}else for(ie+Qe>Te&&(ie=Te-Qe),je=ie;je>=0;je--){let ct=!0;for(let tt=0;tt<Qe;tt++)if(ot(le,je+tt)!==ot(ne,tt)){ct=!1;break}if(ct)return je}return-1}d.prototype.includes=function(ne,ie,ge){return this.indexOf(ne,ie,ge)!==-1},d.prototype.indexOf=function(ne,ie,ge){return W(this,ne,ie,ge,!0)},d.prototype.lastIndexOf=function(ne,ie,ge){return W(this,ne,ie,ge,!1)};function re(le,ne,ie,ge){ie=Number(ie)||0;const _e=le.length-ie;ge?(ge=Number(ge),ge>_e&&(ge=_e)):ge=_e;const Ee=ne.length;ge>Ee/2&&(ge=Ee/2);let Te;for(Te=0;Te<ge;++Te){const Qe=parseInt(ne.substr(Te*2,2),16);if(at(Qe))return Te;le[ie+Te]=Qe}return Te}function se(le,ne,ie,ge){return ze(xt(ne,le.length-ie),le,ie,ge)}function ae(le,ne,ie,ge){return ze(Xe(ne),le,ie,ge)}function ee(le,ne,ie,ge){return ze(gt(ne),le,ie,ge)}function P(le,ne,ie,ge){return ze(yt(ne,le.length-ie),le,ie,ge)}d.prototype.write=function(ne,ie,ge,_e){if(ie===void 0)_e="utf8",ge=this.length,ie=0;else if(ge===void 0&&typeof ie=="string")_e=ie,ge=this.length,ie=0;else if(isFinite(ie))ie=ie>>>0,isFinite(ge)?(ge=ge>>>0,_e===void 0&&(_e="utf8")):(_e=ge,ge=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ee=this.length-ie;if((ge===void 0||ge>Ee)&&(ge=Ee),ne.length>0&&(ge<0||ie<0)||ie>this.length)throw new RangeError("Attempt to write outside buffer bounds");_e||(_e="utf8");let Te=!1;for(;;)switch(_e){case"hex":return re(this,ne,ie,ge);case"utf8":case"utf-8":return se(this,ne,ie,ge);case"ascii":case"latin1":case"binary":return ae(this,ne,ie,ge);case"base64":return ee(this,ne,ie,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,ne,ie,ge);default:if(Te)throw new TypeError("Unknown encoding: "+_e);_e=(""+_e).toLowerCase(),Te=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(le,ne,ie){return ne===0&&ie===le.length?e.fromByteArray(le):e.fromByteArray(le.slice(ne,ie))}function E(le,ne,ie){ie=Math.min(le.length,ie);const ge=[];let _e=ne;for(;_e<ie;){const Ee=le[_e];let Te=null,Qe=Ee>239?4:Ee>223?3:Ee>191?2:1;if(_e+Qe<=ie){let ot,je,ct,tt;switch(Qe){case 1:Ee<128&&(Te=Ee);break;case 2:ot=le[_e+1],(ot&192)===128&&(tt=(Ee&31)<<6|ot&63,tt>127&&(Te=tt));break;case 3:ot=le[_e+1],je=le[_e+2],(ot&192)===128&&(je&192)===128&&(tt=(Ee&15)<<12|(ot&63)<<6|je&63,tt>2047&&(tt<55296||tt>57343)&&(Te=tt));break;case 4:ot=le[_e+1],je=le[_e+2],ct=le[_e+3],(ot&192)===128&&(je&192)===128&&(ct&192)===128&&(tt=(Ee&15)<<18|(ot&63)<<12|(je&63)<<6|ct&63,tt>65535&&tt<1114112&&(Te=tt))}}Te===null?(Te=65533,Qe=1):Te>65535&&(Te-=65536,ge.push(Te>>>10&1023|55296),Te=56320|Te&1023),ge.push(Te),_e+=Qe}return F(ge)}const k=4096;function F(le){const ne=le.length;if(ne<=k)return String.fromCharCode.apply(String,le);let ie="",ge=0;for(;ge<ne;)ie+=String.fromCharCode.apply(String,le.slice(ge,ge+=k));return ie}function j(le,ne,ie){let ge="";ie=Math.min(le.length,ie);for(let _e=ne;_e<ie;++_e)ge+=String.fromCharCode(le[_e]&127);return ge}function Q(le,ne,ie){let ge="";ie=Math.min(le.length,ie);for(let _e=ne;_e<ie;++_e)ge+=String.fromCharCode(le[_e]);return ge}function G(le,ne,ie){const ge=le.length;(!ne||ne<0)&&(ne=0),(!ie||ie<0||ie>ge)&&(ie=ge);let _e="";for(let Ee=ne;Ee<ie;++Ee)_e+=Ye[le[Ee]];return _e}function U(le,ne,ie){const ge=le.slice(ne,ie);let _e="";for(let Ee=0;Ee<ge.length-1;Ee+=2)_e+=String.fromCharCode(ge[Ee]+ge[Ee+1]*256);return _e}d.prototype.slice=function(ne,ie){const ge=this.length;ne=~~ne,ie=ie===void 0?ge:~~ie,ne<0?(ne+=ge,ne<0&&(ne=0)):ne>ge&&(ne=ge),ie<0?(ie+=ge,ie<0&&(ie=0)):ie>ge&&(ie=ge),ie<ne&&(ie=ne);const _e=this.subarray(ne,ie);return Object.setPrototypeOf(_e,d.prototype),_e};function $(le,ne,ie){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+ne>ie)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(ne,ie,ge){ne=ne>>>0,ie=ie>>>0,ge||$(ne,ie,this.length);let _e=this[ne],Ee=1,Te=0;for(;++Te<ie&&(Ee*=256);)_e+=this[ne+Te]*Ee;return _e},d.prototype.readUintBE=d.prototype.readUIntBE=function(ne,ie,ge){ne=ne>>>0,ie=ie>>>0,ge||$(ne,ie,this.length);let _e=this[ne+--ie],Ee=1;for(;ie>0&&(Ee*=256);)_e+=this[ne+--ie]*Ee;return _e},d.prototype.readUint8=d.prototype.readUInt8=function(ne,ie){return ne=ne>>>0,ie||$(ne,1,this.length),this[ne]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(ne,ie){return ne=ne>>>0,ie||$(ne,2,this.length),this[ne]|this[ne+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(ne,ie){return ne=ne>>>0,ie||$(ne,2,this.length),this[ne]<<8|this[ne+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(ne,ie){return ne=ne>>>0,ie||$(ne,4,this.length),(this[ne]|this[ne+1]<<8|this[ne+2]<<16)+this[ne+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(ne,ie){return ne=ne>>>0,ie||$(ne,4,this.length),this[ne]*16777216+(this[ne+1]<<16|this[ne+2]<<8|this[ne+3])},d.prototype.readBigUInt64LE=lt(function(ne){ne=ne>>>0,$e(ne,"offset");const ie=this[ne],ge=this[ne+7];(ie===void 0||ge===void 0)&&De(ne,this.length-8);const _e=ie+this[++ne]*2**8+this[++ne]*2**16+this[++ne]*2**24,Ee=this[++ne]+this[++ne]*2**8+this[++ne]*2**16+ge*2**24;return BigInt(_e)+(BigInt(Ee)<<BigInt(32))}),d.prototype.readBigUInt64BE=lt(function(ne){ne=ne>>>0,$e(ne,"offset");const ie=this[ne],ge=this[ne+7];(ie===void 0||ge===void 0)&&De(ne,this.length-8);const _e=ie*2**24+this[++ne]*2**16+this[++ne]*2**8+this[++ne],Ee=this[++ne]*2**24+this[++ne]*2**16+this[++ne]*2**8+ge;return(BigInt(_e)<<BigInt(32))+BigInt(Ee)}),d.prototype.readIntLE=function(ne,ie,ge){ne=ne>>>0,ie=ie>>>0,ge||$(ne,ie,this.length);let _e=this[ne],Ee=1,Te=0;for(;++Te<ie&&(Ee*=256);)_e+=this[ne+Te]*Ee;return Ee*=128,_e>=Ee&&(_e-=Math.pow(2,8*ie)),_e},d.prototype.readIntBE=function(ne,ie,ge){ne=ne>>>0,ie=ie>>>0,ge||$(ne,ie,this.length);let _e=ie,Ee=1,Te=this[ne+--_e];for(;_e>0&&(Ee*=256);)Te+=this[ne+--_e]*Ee;return Ee*=128,Te>=Ee&&(Te-=Math.pow(2,8*ie)),Te},d.prototype.readInt8=function(ne,ie){return ne=ne>>>0,ie||$(ne,1,this.length),this[ne]&128?(255-this[ne]+1)*-1:this[ne]},d.prototype.readInt16LE=function(ne,ie){ne=ne>>>0,ie||$(ne,2,this.length);const ge=this[ne]|this[ne+1]<<8;return ge&32768?ge|4294901760:ge},d.prototype.readInt16BE=function(ne,ie){ne=ne>>>0,ie||$(ne,2,this.length);const ge=this[ne+1]|this[ne]<<8;return ge&32768?ge|4294901760:ge},d.prototype.readInt32LE=function(ne,ie){return ne=ne>>>0,ie||$(ne,4,this.length),this[ne]|this[ne+1]<<8|this[ne+2]<<16|this[ne+3]<<24},d.prototype.readInt32BE=function(ne,ie){return ne=ne>>>0,ie||$(ne,4,this.length),this[ne]<<24|this[ne+1]<<16|this[ne+2]<<8|this[ne+3]},d.prototype.readBigInt64LE=lt(function(ne){ne=ne>>>0,$e(ne,"offset");const ie=this[ne],ge=this[ne+7];(ie===void 0||ge===void 0)&&De(ne,this.length-8);const _e=this[ne+4]+this[ne+5]*2**8+this[ne+6]*2**16+(ge<<24);return(BigInt(_e)<<BigInt(32))+BigInt(ie+this[++ne]*2**8+this[++ne]*2**16+this[++ne]*2**24)}),d.prototype.readBigInt64BE=lt(function(ne){ne=ne>>>0,$e(ne,"offset");const ie=this[ne],ge=this[ne+7];(ie===void 0||ge===void 0)&&De(ne,this.length-8);const _e=(ie<<24)+this[++ne]*2**16+this[++ne]*2**8+this[++ne];return(BigInt(_e)<<BigInt(32))+BigInt(this[++ne]*2**24+this[++ne]*2**16+this[++ne]*2**8+ge)}),d.prototype.readFloatLE=function(ne,ie){return ne=ne>>>0,ie||$(ne,4,this.length),t.read(this,ne,!0,23,4)},d.prototype.readFloatBE=function(ne,ie){return ne=ne>>>0,ie||$(ne,4,this.length),t.read(this,ne,!1,23,4)},d.prototype.readDoubleLE=function(ne,ie){return ne=ne>>>0,ie||$(ne,8,this.length),t.read(this,ne,!0,52,8)},d.prototype.readDoubleBE=function(ne,ie){return ne=ne>>>0,ie||$(ne,8,this.length),t.read(this,ne,!1,52,8)};function O(le,ne,ie,ge,_e,Ee){if(!d.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(ne>_e||ne<Ee)throw new RangeError('"value" argument is out of bounds');if(ie+ge>le.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(ne,ie,ge,_e){if(ne=+ne,ie=ie>>>0,ge=ge>>>0,!_e){const Qe=Math.pow(2,8*ge)-1;O(this,ne,ie,ge,Qe,0)}let Ee=1,Te=0;for(this[ie]=ne&255;++Te<ge&&(Ee*=256);)this[ie+Te]=ne/Ee&255;return ie+ge},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(ne,ie,ge,_e){if(ne=+ne,ie=ie>>>0,ge=ge>>>0,!_e){const Qe=Math.pow(2,8*ge)-1;O(this,ne,ie,ge,Qe,0)}let Ee=ge-1,Te=1;for(this[ie+Ee]=ne&255;--Ee>=0&&(Te*=256);)this[ie+Ee]=ne/Te&255;return ie+ge},d.prototype.writeUint8=d.prototype.writeUInt8=function(ne,ie,ge){return ne=+ne,ie=ie>>>0,ge||O(this,ne,ie,1,255,0),this[ie]=ne&255,ie+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(ne,ie,ge){return ne=+ne,ie=ie>>>0,ge||O(this,ne,ie,2,65535,0),this[ie]=ne&255,this[ie+1]=ne>>>8,ie+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(ne,ie,ge){return ne=+ne,ie=ie>>>0,ge||O(this,ne,ie,2,65535,0),this[ie]=ne>>>8,this[ie+1]=ne&255,ie+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(ne,ie,ge){return ne=+ne,ie=ie>>>0,ge||O(this,ne,ie,4,4294967295,0),this[ie+3]=ne>>>24,this[ie+2]=ne>>>16,this[ie+1]=ne>>>8,this[ie]=ne&255,ie+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(ne,ie,ge){return ne=+ne,ie=ie>>>0,ge||O(this,ne,ie,4,4294967295,0),this[ie]=ne>>>24,this[ie+1]=ne>>>16,this[ie+2]=ne>>>8,this[ie+3]=ne&255,ie+4};function oe(le,ne,ie,ge,_e){Se(ne,ge,_e,le,ie,7);let Ee=Number(ne&BigInt(4294967295));le[ie++]=Ee,Ee=Ee>>8,le[ie++]=Ee,Ee=Ee>>8,le[ie++]=Ee,Ee=Ee>>8,le[ie++]=Ee;let Te=Number(ne>>BigInt(32)&BigInt(4294967295));return le[ie++]=Te,Te=Te>>8,le[ie++]=Te,Te=Te>>8,le[ie++]=Te,Te=Te>>8,le[ie++]=Te,ie}function ue(le,ne,ie,ge,_e){Se(ne,ge,_e,le,ie,7);let Ee=Number(ne&BigInt(4294967295));le[ie+7]=Ee,Ee=Ee>>8,le[ie+6]=Ee,Ee=Ee>>8,le[ie+5]=Ee,Ee=Ee>>8,le[ie+4]=Ee;let Te=Number(ne>>BigInt(32)&BigInt(4294967295));return le[ie+3]=Te,Te=Te>>8,le[ie+2]=Te,Te=Te>>8,le[ie+1]=Te,Te=Te>>8,le[ie]=Te,ie+8}d.prototype.writeBigUInt64LE=lt(function(ne,ie=0){return oe(this,ne,ie,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=lt(function(ne,ie=0){return ue(this,ne,ie,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(ne,ie,ge,_e){if(ne=+ne,ie=ie>>>0,!_e){const ot=Math.pow(2,8*ge-1);O(this,ne,ie,ge,ot-1,-ot)}let Ee=0,Te=1,Qe=0;for(this[ie]=ne&255;++Ee<ge&&(Te*=256);)ne<0&&Qe===0&&this[ie+Ee-1]!==0&&(Qe=1),this[ie+Ee]=(ne/Te>>0)-Qe&255;return ie+ge},d.prototype.writeIntBE=function(ne,ie,ge,_e){if(ne=+ne,ie=ie>>>0,!_e){const ot=Math.pow(2,8*ge-1);O(this,ne,ie,ge,ot-1,-ot)}let Ee=ge-1,Te=1,Qe=0;for(this[ie+Ee]=ne&255;--Ee>=0&&(Te*=256);)ne<0&&Qe===0&&this[ie+Ee+1]!==0&&(Qe=1),this[ie+Ee]=(ne/Te>>0)-Qe&255;return ie+ge},d.prototype.writeInt8=function(ne,ie,ge){return ne=+ne,ie=ie>>>0,ge||O(this,ne,ie,1,127,-128),ne<0&&(ne=255+ne+1),this[ie]=ne&255,ie+1},d.prototype.writeInt16LE=function(ne,ie,ge){return ne=+ne,ie=ie>>>0,ge||O(this,ne,ie,2,32767,-32768),this[ie]=ne&255,this[ie+1]=ne>>>8,ie+2},d.prototype.writeInt16BE=function(ne,ie,ge){return ne=+ne,ie=ie>>>0,ge||O(this,ne,ie,2,32767,-32768),this[ie]=ne>>>8,this[ie+1]=ne&255,ie+2},d.prototype.writeInt32LE=function(ne,ie,ge){return ne=+ne,ie=ie>>>0,ge||O(this,ne,ie,4,2147483647,-2147483648),this[ie]=ne&255,this[ie+1]=ne>>>8,this[ie+2]=ne>>>16,this[ie+3]=ne>>>24,ie+4},d.prototype.writeInt32BE=function(ne,ie,ge){return ne=+ne,ie=ie>>>0,ge||O(this,ne,ie,4,2147483647,-2147483648),ne<0&&(ne=4294967295+ne+1),this[ie]=ne>>>24,this[ie+1]=ne>>>16,this[ie+2]=ne>>>8,this[ie+3]=ne&255,ie+4},d.prototype.writeBigInt64LE=lt(function(ne,ie=0){return oe(this,ne,ie,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=lt(function(ne,ie=0){return ue(this,ne,ie,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function q(le,ne,ie,ge,_e,Ee){if(ie+ge>le.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("Index out of range")}function pe(le,ne,ie,ge,_e){return ne=+ne,ie=ie>>>0,_e||q(le,ne,ie,4),t.write(le,ne,ie,ge,23,4),ie+4}d.prototype.writeFloatLE=function(ne,ie,ge){return pe(this,ne,ie,!0,ge)},d.prototype.writeFloatBE=function(ne,ie,ge){return pe(this,ne,ie,!1,ge)};function be(le,ne,ie,ge,_e){return ne=+ne,ie=ie>>>0,_e||q(le,ne,ie,8),t.write(le,ne,ie,ge,52,8),ie+8}d.prototype.writeDoubleLE=function(ne,ie,ge){return be(this,ne,ie,!0,ge)},d.prototype.writeDoubleBE=function(ne,ie,ge){return be(this,ne,ie,!1,ge)},d.prototype.copy=function(ne,ie,ge,_e){if(!d.isBuffer(ne))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!_e&&_e!==0&&(_e=this.length),ie>=ne.length&&(ie=ne.length),ie||(ie=0),_e>0&&_e<ge&&(_e=ge),_e===ge||ne.length===0||this.length===0)return 0;if(ie<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("sourceEnd out of bounds");_e>this.length&&(_e=this.length),ne.length-ie<_e-ge&&(_e=ne.length-ie+ge);const Ee=_e-ge;return this===ne&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ie,ge,_e):Uint8Array.prototype.set.call(ne,this.subarray(ge,_e),ie),Ee},d.prototype.fill=function(ne,ie,ge,_e){if(typeof ne=="string"){if(typeof ie=="string"?(_e=ie,ie=0,ge=this.length):typeof ge=="string"&&(_e=ge,ge=this.length),_e!==void 0&&typeof _e!="string")throw new TypeError("encoding must be a string");if(typeof _e=="string"&&!d.isEncoding(_e))throw new TypeError("Unknown encoding: "+_e);if(ne.length===1){const Te=ne.charCodeAt(0);(_e==="utf8"&&Te<128||_e==="latin1")&&(ne=Te)}}else typeof ne=="number"?ne=ne&255:typeof ne=="boolean"&&(ne=Number(ne));if(ie<0||this.length<ie||this.length<ge)throw new RangeError("Out of range index");if(ge<=ie)return this;ie=ie>>>0,ge=ge===void 0?this.length:ge>>>0,ne||(ne=0);let Ee;if(typeof ne=="number")for(Ee=ie;Ee<ge;++Ee)this[Ee]=ne;else{const Te=d.isBuffer(ne)?ne:d.from(ne,_e),Qe=Te.length;if(Qe===0)throw new TypeError('The value "'+ne+'" is invalid for argument "value"');for(Ee=0;Ee<ge-ie;++Ee)this[Ee+ie]=Te[Ee%Qe]}return this};const ve={};function we(le,ne,ie){ve[le]=class extends ie{constructor(){super(),Object.defineProperty(this,"message",{value:ne.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(_e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_e,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}we("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),we("ERR_INVALID_ARG_TYPE",function(le,ne){return`The "${le}" argument must be of type number. Received type ${typeof ne}`},TypeError),we("ERR_OUT_OF_RANGE",function(le,ne,ie){let ge=`The value of "${le}" is out of range.`,_e=ie;return Number.isInteger(ie)&&Math.abs(ie)>2**32?_e=Ce(String(ie)):typeof ie=="bigint"&&(_e=String(ie),(ie>BigInt(2)**BigInt(32)||ie<-(BigInt(2)**BigInt(32)))&&(_e=Ce(_e)),_e+="n"),ge+=` It must be ${ne}. Received ${_e}`,ge},RangeError);function Ce(le){let ne="",ie=le.length;const ge=le[0]==="-"?1:0;for(;ie>=ge+4;ie-=3)ne=`_${le.slice(ie-3,ie)}${ne}`;return`${le.slice(0,ie)}${ne}`}function Re(le,ne,ie){$e(ne,"offset"),(le[ne]===void 0||le[ne+ie]===void 0)&&De(ne,le.length-(ie+1))}function Se(le,ne,ie,ge,_e,Ee){if(le>ie||le<ne){const Te=typeof ne=="bigint"?"n":"";let Qe;throw Ee>3?ne===0||ne===BigInt(0)?Qe=`>= 0${Te} and < 2${Te} ** ${(Ee+1)*8}${Te}`:Qe=`>= -(2${Te} ** ${(Ee+1)*8-1}${Te}) and < 2 ** ${(Ee+1)*8-1}${Te}`:Qe=`>= ${ne}${Te} and <= ${ie}${Te}`,new ve.ERR_OUT_OF_RANGE("value",Qe,le)}Re(ge,_e,Ee)}function $e(le,ne){if(typeof le!="number")throw new ve.ERR_INVALID_ARG_TYPE(ne,"number",le)}function De(le,ne,ie){throw Math.floor(le)!==le?($e(le,ie),new ve.ERR_OUT_OF_RANGE(ie||"offset","an integer",le)):ne<0?new ve.ERR_BUFFER_OUT_OF_BOUNDS:new ve.ERR_OUT_OF_RANGE(ie||"offset",`>= ${ie?1:0} and <= ${ne}`,le)}const Ne=/[^+/0-9A-Za-z-_]/g;function pt(le){if(le=le.split("=")[0],le=le.trim().replace(Ne,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function xt(le,ne){ne=ne||1/0;let ie;const ge=le.length;let _e=null;const Ee=[];for(let Te=0;Te<ge;++Te){if(ie=le.charCodeAt(Te),ie>55295&&ie<57344){if(!_e){if(ie>56319){(ne-=3)>-1&&Ee.push(239,191,189);continue}else if(Te+1===ge){(ne-=3)>-1&&Ee.push(239,191,189);continue}_e=ie;continue}if(ie<56320){(ne-=3)>-1&&Ee.push(239,191,189),_e=ie;continue}ie=(_e-55296<<10|ie-56320)+65536}else _e&&(ne-=3)>-1&&Ee.push(239,191,189);if(_e=null,ie<128){if((ne-=1)<0)break;Ee.push(ie)}else if(ie<2048){if((ne-=2)<0)break;Ee.push(ie>>6|192,ie&63|128)}else if(ie<65536){if((ne-=3)<0)break;Ee.push(ie>>12|224,ie>>6&63|128,ie&63|128)}else if(ie<1114112){if((ne-=4)<0)break;Ee.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,ie&63|128)}else throw new Error("Invalid code point")}return Ee}function Xe(le){const ne=[];for(let ie=0;ie<le.length;++ie)ne.push(le.charCodeAt(ie)&255);return ne}function yt(le,ne){let ie,ge,_e;const Ee=[];for(let Te=0;Te<le.length&&!((ne-=2)<0);++Te)ie=le.charCodeAt(Te),ge=ie>>8,_e=ie%256,Ee.push(_e),Ee.push(ge);return Ee}function gt(le){return e.toByteArray(pt(le))}function ze(le,ne,ie,ge){let _e;for(_e=0;_e<ge&&!(_e+ie>=ne.length||_e>=le.length);++_e)ne[_e+ie]=le[_e];return _e}function et(le,ne){return le instanceof ne||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===ne.name}function at(le){return le!==le}const Ye=function(){const le="0123456789abcdef",ne=new Array(256);for(let ie=0;ie<16;++ie){const ge=ie*16;for(let _e=0;_e<16;++_e)ne[ge+_e]=le[ie]+le[_e]}return ne}();function lt(le){return typeof BigInt>"u"?dt:le}function dt(){throw new Error("BigInt not supported")}})(buffer);const CipherAlgorithm={Aes128Ctr:"AES-128-CTR",Aes128Cbc:"AES-128-CBC"};async function createCipheriv(n,e,t,o){let c;switch(n.toUpperCase()){case CipherAlgorithm.Aes128Ctr:c={name:"AES-CTR",counter:t,length:128};break;case CipherAlgorithm.Aes128Cbc:c={name:"AES-CBC",iv:t};break;default:throw new Error("(BUG) non-exhaustive switch statement for CipherAlgorithm")}const l=await window.crypto.subtle.importKey("raw",e,c.name,!1,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt(c,l,o))}async function createDecipheriv(n,e,t,o){let c;switch(n.toUpperCase()){case CipherAlgorithm.Aes128Ctr:c={name:"AES-CTR",counter:t,length:128};break;case CipherAlgorithm.Aes128Cbc:c={name:"AES-CBC",iv:t};break;default:throw new Error("(BUG) non-exhaustive switch statement for CipherAlgorithm")}const l=await window.crypto.subtle.importKey("raw",e,c.name,!1,["decrypt"]);let h;try{h=await window.crypto.subtle.decrypt(c,l,o)}catch(d){const g=d!=null&&d.message!=null?d.message:"";throw new Error(`Unable to decrypt: ${g}`)}return new Uint8Array(h)}async function messageDigest(n,e){const t=encode$1(n),o=decode$4(e).slice(0,8),c=SparkMD5.ArrayBuffer.hash(buffer.Buffer.concat([buffer.Buffer.from(t),buffer.Buffer.from(o)]));return Promise.resolve(decode$4(c))}async function deriveKey(n,e,t,o,c){const l=typeof e=="string"?encode$1(e):e,h=typeof t=="string"?encode$1(t):t;try{const d=await window.crypto.subtle.importKey("raw",l,{name:"PBKDF2",hash:n},!1,["deriveBits"]);return new Uint8Array(await window.crypto.subtle.deriveBits({name:"PBKDF2",hash:n,salt:h,iterations:o},d,c<<3))}catch{throw new Error("(BUG) Non-Exhaustive switch statement for algorithms")}}const HMAC_SHA256="hmac-sha256";async function createKeystore(n,e){const l=await bytesAsync(32),h=await deriveKey(HashAlgorithm.Sha256,e,l,262144,32),d=await bytesAsync(16),g=await createCipheriv(CipherAlgorithm.Aes128Ctr,h.slice(0,16),d,n),m=await hash$2(HashAlgorithm.Sha384,h.slice(16),g),v={version:1,crypto:{ciphertext:encode$2(g),cipherparams:{iv:encode$2(d)},cipher:CipherAlgorithm.Aes128Ctr,kdf:"pbkdf2",kdfparams:{dkLen:32,salt:encode$2(l),c:262144,prf:HMAC_SHA256},mac:encode$2(m)}};return encode$1(JSON.stringify(v))}async function loadKeystore(n,e){const t=JSON.parse(decode$3(n));if(t.version!==1)throw new BadKeyError(`unsupported keystore version: ${t.version}`);const{ciphertext:o,cipherparams:{iv:c},cipher:l,kdf:h,kdfparams:{dkLen:d,salt:g,c:m,prf:v},mac:_}=t.crypto;if(h!=="pbkdf2")throw new BadKeyError(`unsupported key derivation function:" + ${h}`);if(v!==HMAC_SHA256)throw new BadKeyError(`unsupported key derivation hash function: ${v}`);const p=decode$4(g),a=decode$4(c),u=decode$4(o),y=await deriveKey(HashAlgorithm.Sha256,e,p,m,d),b=decode$4(_),w=await hash$2(HashAlgorithm.Sha384,y.slice(16),u);if(!b.every((T,B)=>T===w[B]))throw new BadKeyError("HMAC mismatch; passphrase is incorrect");return createDecipheriv(l,y.slice(0,16),a,u)}function decode$2(n){return decodeIncremental(n)[0]}function decodeIncremental(n){const[e,t]=decodeLength(n.subarray(1)),o=t.subarray(0,e),c=t.subarray(e);switch(n[0]){case 2:return[{int:decodeInt(o)},c];case 4:return[{bytes:o},c];case 5:return[{},c];case 6:return[{ident:decodeObjectIdent(o)},c];case 48:return[{seq:decodeSeq(o)},c];default:throw new Error(`unsupported DER type tag: ${n[0]}`)}}function decodeSeq(n){let e=n;const t=[];for(;e.length!==0;){const[o,c]=decodeIncremental(e);t.push(o),e=c}return t}function decodeObjectIdent(n){const e=[Math.floor(n[0]/40),n[0]%40];let t=0;for(const o of n.subarray(1))t*=128,o<128?(t+=o,e.push(t),t=0):t+=o&127;return e.join(".")}function decodeLength(n){if(n[0]<128)return[n[0],n.subarray(1)];const e=n[0]-128,t=n.subarray(1,e+1),o=n.subarray(e+1);return[decodeInt(t),o]}function decodeInt(n){const e=n.length;if(e===1)return n[0];let t=new DataView(n.buffer,n.byteOffset,n.byteLength);if(e===2)return t.getUint16(0,!1);if(e===3){const o=Uint8Array.of(0,...n);t=new DataView(o.buffer,o.byteOffset,o.byteLength)}if(e>4)throw new Error(`unsupported DER integer length of ${e} bytes`);return t.getUint32(0,!1)}class AlgorithmIdentifier{constructor(e){if("seq"in e&&e.seq.length>=1&&"ident"in e.seq[0])this.algIdent=e.seq[0].ident,this.parameters=e.seq[1];else throw new Error(`error parsing AlgorithmIdentifier from ${JSON.stringify(e)}`)}toString(){return JSON.stringify(this)}}class PBES2Params{constructor(e){if("seq"in e&&e.seq.length===2)this.kdf=new AlgorithmIdentifier(e.seq[0]),this.encScheme=new AlgorithmIdentifier(e.seq[1]);else throw new Error(`error parsing PBES2Params from ${JSON.stringify(e)}`)}}class PBKDF2Params{constructor(e){if("seq"in e&&e.seq.length>=2&&"bytes"in e.seq[0]&&"int"in e.seq[1]&&(this.salt=e.seq[0].bytes,this.iterCount=e.seq[1].int,e.seq.length>2)){if("seq"in e.seq[2]){this.prf=new AlgorithmIdentifier(e.seq[2]);return}else"int"in e.seq[2]&&(this.keyLength=e.seq[2].int);e.seq.length===4&&(this.prf=new AlgorithmIdentifier(e.seq[3]));return}throw new Error(`error parsing PBKDF2Params from ${JSON.stringify(e)}`)}}class PrivateKeyInfo{constructor(e){if("seq"in e&&e.seq.length===3){if("int"in e.seq[0]&&e.seq[0].int===0)this.version=0;else throw new Error(`expected version = 0, got ${JSON.stringify(e.seq[0])}`);if(this.algId=new AlgorithmIdentifier(e.seq[1]),"bytes"in e.seq[2])this.privateKey=e.seq[2].bytes;else throw new Error(`expected octet string as 3rd element, got ${JSON.stringify(e.seq[2])}`);return}throw new Error(`error parsing PrivateKeyInfo from ${JSON.stringify(e)}`)}static parse(e){return new PrivateKeyInfo(decode$2(e))}}class EncryptedPrivateKeyInfo{constructor(e){if("seq"in e&&e.seq.length===2&&"bytes"in e.seq[1]){this.algId=new AlgorithmIdentifier(e.seq[0]),this.data=e.seq[1].bytes;return}throw new Error(`error parsing EncryptedPrivateKeyInfo from ${JSON.stringify(e)}`)}static parse(e){return new EncryptedPrivateKeyInfo(decode$2(e))}async decrypt(e){if(this.algId.algIdent!=="1.2.840.113549.1.5.13"||!this.algId.parameters)throw new Error(`unsupported key encryption algorithm: ${this.algId.toString()}`);const t=new PBES2Params(this.algId.parameters);if(t.kdf.algIdent!=="1.2.840.113549.1.5.12"||!t.kdf.parameters)throw new Error(`unsupported key derivation function: ${t.kdf.toString()}`);const o=new PBKDF2Params(t.kdf.parameters);if(o.prf){if(o.prf.algIdent!=="1.2.840.113549.2.9")throw new Error(`unsupported PRF ${o.prf.toString()}`)}else throw new Error("unsupported PRF HMAC-SHA-1");if(t.encScheme.algIdent!=="2.16.840.1.101.3.4.1.2")throw new Error(`unsupported encryption scheme: ${t.encScheme.toString()}`);if(!t.encScheme.parameters||!("bytes"in t.encScheme.parameters))throw new Error(`expected IV as bytes for AES-128-CBC, got: ${JSON.stringify(t.encScheme.parameters)}`);const c=o.keyLength||16,l=t.encScheme.parameters.bytes,h=await deriveKey(HashAlgorithm.Sha256,e,o.salt,o.iterCount,c),d=await createDecipheriv(CipherAlgorithm.Aes128Cbc,h,l,this.data);return PrivateKeyInfo.parse(d)}}function decode$1(n){return Uint8Array.from(buffer.Buffer.from(n,"base64"))}/*!
 * MIT License
 * 
 * Copyright (c) 2017-2022 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const ARRAY_BUFFER_NAME="[object ArrayBuffer]";class BufferSourceConverter{static isArrayBuffer(e){return Object.prototype.toString.call(e)===ARRAY_BUFFER_NAME}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const o=BufferSourceConverter.toUint8Array(e),c=BufferSourceConverter.toUint8Array(t);if(o.length!==c.byteLength)return!1;for(let l=0;l<o.length;l++)if(o[l]!==c[l])return!1;return!0}static concat(...e){let t;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?t=e[0]:e[e.length-1]instanceof Function?t=e.slice(0,e.length-1):t=e;let o=0;for(const h of t)o+=h.byteLength;const c=new Uint8Array(o);let l=0;for(const h of t){const d=this.toUint8Array(h);c.set(d,l),l+=d.length}return e[e.length-1]instanceof Function?this.toView(c,e[e.length-1]):c.buffer}}const STRING_TYPE="string",HEX_REGEX=/^[0-9a-f]+$/i,BASE64_REGEX=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,BASE64URL_REGEX=/^[a-zA-Z0-9-_]+$/;class Utf8Converter{static fromString(e){const t=unescape(encodeURIComponent(e)),o=new Uint8Array(t.length);for(let c=0;c<t.length;c++)o[c]=t.charCodeAt(c);return o.buffer}static toString(e){const t=BufferSourceConverter.toUint8Array(e);let o="";for(let l=0;l<t.length;l++)o+=String.fromCharCode(t[l]);return decodeURIComponent(escape(o))}}class Utf16Converter{static toString(e,t=!1){const o=BufferSourceConverter.toArrayBuffer(e),c=new DataView(o);let l="";for(let h=0;h<o.byteLength;h+=2){const d=c.getUint16(h,t);l+=String.fromCharCode(d)}return l}static fromString(e,t=!1){const o=new ArrayBuffer(e.length*2),c=new DataView(o);for(let l=0;l<e.length;l++)c.setUint16(l*2,e.charCodeAt(l),t);return o}}class Convert{static isHex(e){return typeof e===STRING_TYPE&&HEX_REGEX.test(e)}static isBase64(e){return typeof e===STRING_TYPE&&BASE64_REGEX.test(e)}static isBase64Url(e){return typeof e===STRING_TYPE&&BASE64URL_REGEX.test(e)}static ToString(e,t="utf8"){const o=BufferSourceConverter.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(o);case"binary":return this.ToBinary(o);case"hex":return this.ToHex(o);case"base64":return this.ToBase64(o);case"base64url":return this.ToBase64Url(o);case"utf16le":return Utf16Converter.toString(o,!0);case"utf16":case"utf16be":return Utf16Converter.toString(o);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Utf16Converter.fromString(e,!0);case"utf16":case"utf16be":return Utf16Converter.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=BufferSourceConverter.toUint8Array(e);if(typeof btoa<"u"){const o=this.ToString(t,"binary");return btoa(o)}else return Buffer.from(t).toString("base64")}static FromBase64(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Convert.isBase64(t))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Convert.isBase64Url(t))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=Convert.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return Utf8Converter.fromString(e);case"utf16":case"utf16be":return Utf16Converter.fromString(e);case"utf16le":case"usc2":return Utf16Converter.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=Convert.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return Utf8Converter.toString(e);case"utf16":case"utf16be":return Utf16Converter.toString(e);case"utf16le":case"usc2":return Utf16Converter.toString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length,o=new Uint8Array(t);for(let c=0;c<t;c++)o[c]=e.charCodeAt(c);return o.buffer}static ToBinary(e){const t=BufferSourceConverter.toUint8Array(e);let o="";for(let c=0;c<t.length;c++)o+=String.fromCharCode(t[c]);return o}static ToHex(e){const t=BufferSourceConverter.toUint8Array(e);let o="";const c=t.length;for(let l=0;l<c;l++){const h=t[l];h<16&&(o+="0"),o+=h.toString(16)}return o}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Convert.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);const o=new Uint8Array(t.length/2);for(let c=0;c<t.length;c=c+2){const l=t.slice(c,c+2);o[c/2]=parseInt(l,16)}return o.buffer}static ToUtf16String(e,t=!1){return Utf16Converter.toString(e,t)}static FromUtf16String(e,t=!1){return Utf16Converter.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let o=0;o<t;o++)e+="=";return e}static formatString(e){return e?.replace(/[\n\r\t ]/g,"")||""}}Convert.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function utilFromBase(n,e){let t=0;if(n.length===1)return n[0];for(let o=n.length-1;o>=0;o--)t+=n[n.length-1-o]*Math.pow(2,e*o);return t}function utilToBase(n,e,t=-1){const o=t;let c=n,l=0,h=Math.pow(2,e);for(let d=1;d<8;d++){if(n<h){let g;if(o<0)g=new ArrayBuffer(d),l=d;else{if(o<d)return new ArrayBuffer(0);g=new ArrayBuffer(o),l=o}const m=new Uint8Array(g);for(let v=d-1;v>=0;v--){const _=Math.pow(2,v*e);m[l-v-1]=Math.floor(c/_),c-=m[l-v-1]*_}return g}h*=Math.pow(2,e)}return new ArrayBuffer(0)}function utilConcatView(...n){let e=0,t=0;for(const l of n)e+=l.length;const o=new ArrayBuffer(e),c=new Uint8Array(o);for(const l of n)c.set(l,t),t+=l.length;return c}function utilDecodeTC(){const n=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const d=n[0]===255&&n[1]&128,g=n[0]===0&&(n[1]&128)===0;(d||g)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),t=new Uint8Array(e);for(let d=0;d<this.valueHex.byteLength;d++)t[d]=0;t[0]=n[0]&128;const o=utilFromBase(t,8),c=new ArrayBuffer(this.valueHex.byteLength),l=new Uint8Array(c);for(let d=0;d<this.valueHex.byteLength;d++)l[d]=n[d];return l[0]&=127,utilFromBase(l,8)-o}function utilEncodeTC(n){const e=n<0?n*-1:n;let t=128;for(let o=1;o<8;o++){if(e<=t){if(n<0){const h=t-e,d=utilToBase(h,8,o),g=new Uint8Array(d);return g[0]|=128,d}let c=utilToBase(e,8,o),l=new Uint8Array(c);if(l[0]&128){const h=c.slice(0),d=new Uint8Array(h);c=new ArrayBuffer(c.byteLength+1),l=new Uint8Array(c);for(let g=0;g<h.byteLength;g++)l[g+1]=d[g];l[0]=0}return c}t*=Math.pow(2,8)}return new ArrayBuffer(0)}function isEqualBuffer(n,e){if(n.byteLength!==e.byteLength)return!1;const t=new Uint8Array(n),o=new Uint8Array(e);for(let c=0;c<t.length;c++)if(t[c]!==o[c])return!1;return!0}function padNumber(n,e){const t=n.toString(10);if(e<t.length)return"";const o=e-t.length,c=new Array(o);for(let h=0;h<o;h++)c[h]="0";return c.join("").concat(t)}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function assertBigInt(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function concat(n){let e=0,t=0;for(let c=0;c<n.length;c++){const l=n[c];e+=l.byteLength}const o=new Uint8Array(e);for(let c=0;c<n.length;c++){const l=n[c];o.set(new Uint8Array(l),t),t+=l.byteLength}return o.buffer}function checkBufferParams(n,e,t,o){return e instanceof Uint8Array?e.byteLength?t<0?(n.error="Wrong parameter: inputOffset less than zero",!1):o<0?(n.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-t-o<0?(n.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(n.error="Wrong parameter: inputBuffer has zero length",!1):(n.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class ViewWriter{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return concat(this.items)}}const powers2=[new Uint8Array([1])],digitsString="0123456789",EMPTY_STRING="",EMPTY_BUFFER=new ArrayBuffer(0),EMPTY_VIEW=new Uint8Array(0),END_OF_CONTENT_NAME="EndOfContent",OCTET_STRING_NAME="OCTET STRING",BIT_STRING_NAME="BIT STRING";function HexBlock(n){var e;return e=class extends n{constructor(...o){var c;super(...o);const l=o[0]||{};this.isHexOnly=(c=l.isHexOnly)!==null&&c!==void 0?c:!1,this.valueHexView=l.valueHex?BufferSourceConverter.toUint8Array(l.valueHex):EMPTY_VIEW}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(o){this.valueHexView=new Uint8Array(o)}fromBER(o,c,l){const h=o instanceof ArrayBuffer?new Uint8Array(o):o;if(!checkBufferParams(this,h,c,l))return-1;const d=c+l;return this.valueHexView=h.subarray(c,d),this.valueHexView.length?(this.blockLength=l,d):(this.warnings.push("Zero buffer length"),c)}toBER(o=!1){return this.isHexOnly?o?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",EMPTY_BUFFER)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Convert.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class LocalBaseBlock{constructor({blockLength:e=0,error:t=EMPTY_STRING,warnings:o=[],valueBeforeDecode:c=EMPTY_VIEW}={}){this.blockLength=e,this.error=t,this.warnings=o,this.valueBeforeDecodeView=BufferSourceConverter.toUint8Array(c)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Convert.ToHex(this.valueBeforeDecodeView)}}}LocalBaseBlock.NAME="baseBlock";class ValueBlock extends LocalBaseBlock{fromBER(e,t,o){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ValueBlock.NAME="valueBlock";class LocalIdentificationBlock extends HexBlock(LocalBaseBlock){constructor({idBlock:e={}}={}){var t,o,c,l;super(),e?(this.isHexOnly=(t=e.isHexOnly)!==null&&t!==void 0?t:!1,this.valueHexView=e.valueHex?BufferSourceConverter.toUint8Array(e.valueHex):EMPTY_VIEW,this.tagClass=(o=e.tagClass)!==null&&o!==void 0?o:-1,this.tagNumber=(c=e.tagNumber)!==null&&c!==void 0?c:-1,this.isConstructed=(l=e.isConstructed)!==null&&l!==void 0?l:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",EMPTY_BUFFER}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const c=new Uint8Array(1);if(!e){let l=this.tagNumber;l&=31,t|=l,c[0]=t}return c.buffer}if(!this.isHexOnly){const c=utilToBase(this.tagNumber,7),l=new Uint8Array(c),h=c.byteLength,d=new Uint8Array(h+1);if(d[0]=t|31,!e){for(let g=0;g<h-1;g++)d[g+1]=l[g]|128;d[h]=l[h-1]}return d.buffer}const o=new Uint8Array(this.valueHexView.byteLength+1);if(o[0]=t|31,!e){const c=this.valueHexView;for(let l=0;l<c.length-1;l++)o[l+1]=c[l]|128;o[this.valueHexView.byteLength]=c[c.length-1]}return o.buffer}fromBER(e,t,o){const c=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,c,t,o))return-1;const l=c.subarray(t,t+o);if(l.length===0)return this.error="Zero buffer length",-1;switch(l[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(l[0]&32)===32,this.isHexOnly=!1;const d=l[0]&31;if(d!==31)this.tagNumber=d,this.blockLength=1;else{let g=1,m=this.valueHexView=new Uint8Array(255),v=255;for(;l[g]&128;){if(m[g-1]=l[g]&127,g++,g>=l.length)return this.error="End of input reached before message was fully decoded",-1;if(g===v){v+=255;const p=new Uint8Array(v);for(let a=0;a<m.length;a++)p[a]=m[a];m=this.valueHexView=new Uint8Array(v)}}this.blockLength=g+1,m[g-1]=l[g]&127;const _=new Uint8Array(g);for(let p=0;p<g;p++)_[p]=m[p];m=this.valueHexView=new Uint8Array(g),m.set(_),this.blockLength<=9?this.tagNumber=utilFromBase(m,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}LocalIdentificationBlock.NAME="identificationBlock";class LocalLengthBlock extends LocalBaseBlock{constructor({lenBlock:e={}}={}){var t,o,c;super(),this.isIndefiniteForm=(t=e.isIndefiniteForm)!==null&&t!==void 0?t:!1,this.longFormUsed=(o=e.longFormUsed)!==null&&o!==void 0?o:!1,this.length=(c=e.length)!==null&&c!==void 0?c:0}fromBER(e,t,o){const c=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,c,t,o))return-1;const l=c.subarray(t,t+o);if(l.length===0)return this.error="Zero buffer length",-1;if(l[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=l[0]===128,this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(l[0]&128),this.longFormUsed===!1)return this.length=l[0],this.blockLength=1,t+this.blockLength;const h=l[0]&127;if(h>8)return this.error="Too big integer",-1;if(h+1>l.length)return this.error="End of input reached before message was fully decoded",-1;const d=t+1,g=c.subarray(d,d+h);return g[h-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=utilFromBase(g,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=h+1,t+this.blockLength}toBER(e=!1){let t,o;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),e===!1&&(o=new Uint8Array(t),o[0]=128),t;if(this.longFormUsed){const c=utilToBase(this.length,8);if(c.byteLength>127)return this.error="Too big length",EMPTY_BUFFER;if(t=new ArrayBuffer(c.byteLength+1),e)return t;const l=new Uint8Array(c);o=new Uint8Array(t),o[0]=c.byteLength|128;for(let h=0;h<c.byteLength;h++)o[h+1]=l[h];return t}return t=new ArrayBuffer(1),e===!1&&(o=new Uint8Array(t),o[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}LocalLengthBlock.NAME="lengthBlock";const typeStore={};class BaseBlock extends LocalBaseBlock{constructor({name:e=EMPTY_STRING,optional:t=!1,primitiveSchema:o,...c}={},l){super(c),this.name=e,this.optional=t,o&&(this.primitiveSchema=o),this.idBlock=new LocalIdentificationBlock(c),this.lenBlock=new LocalLengthBlock(c),this.valueBlock=l?new l(c):new ValueBlock(c)}fromBER(e,t,o){const c=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?o:this.lenBlock.length);return c===-1?(this.error=this.valueBlock.error,c):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),c)}toBER(e,t){const o=t||new ViewWriter;t||prepareIndefiniteForm(this);const c=this.idBlock.toBER(e);if(o.write(c),this.lenBlock.isIndefiniteForm)o.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,o),o.write(new ArrayBuffer(2));else{const l=this.valueBlock.toBER(e);this.lenBlock.length=l.byteLength;const h=this.lenBlock.toBER(e);o.write(h),o.write(l)}return t?EMPTY_BUFFER:o.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const t=this.toBER(),o=e.toBER();return isEqualBuffer(t,o)}}BaseBlock.NAME="BaseBlock";function prepareIndefiniteForm(n){if(n instanceof typeStore.Constructed)for(const e of n.valueBlock.value)prepareIndefiniteForm(e)&&(n.lenBlock.isIndefiniteForm=!0);return!!n.lenBlock.isIndefiniteForm}class BaseStringBlock extends BaseBlock{constructor({value:e=EMPTY_STRING,...t}={},o){super(t,o),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,o){const c=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?o:this.lenBlock.length);return c===-1?(this.error=this.valueBlock.error,c):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),c)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}BaseStringBlock.NAME="BaseStringBlock";class LocalPrimitiveValueBlock extends HexBlock(ValueBlock){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}LocalPrimitiveValueBlock.NAME="PrimitiveValueBlock";var _a$w;class Primitive extends BaseBlock{constructor(e={}){super(e,LocalPrimitiveValueBlock),this.idBlock.isConstructed=!1}}_a$w=Primitive;typeStore.Primitive=_a$w;Primitive.NAME="PRIMITIVE";function localChangeType(n,e){if(n instanceof e)return n;const t=new e;return t.idBlock=n.idBlock,t.lenBlock=n.lenBlock,t.warnings=n.warnings,t.valueBeforeDecodeView=n.valueBeforeDecodeView,t}function localFromBER(n,e=0,t=n.length){const o=e;let c=new BaseBlock({},ValueBlock);const l=new LocalBaseBlock;if(!checkBufferParams(l,n,e,t))return c.error=l.error,{offset:-1,result:c};if(!n.subarray(e,e+t).length)return c.error="Zero buffer length",{offset:-1,result:c};let d=c.idBlock.fromBER(n,e,t);if(c.idBlock.warnings.length&&c.warnings.concat(c.idBlock.warnings),d===-1)return c.error=c.idBlock.error,{offset:-1,result:c};if(e=d,t-=c.idBlock.blockLength,d=c.lenBlock.fromBER(n,e,t),c.lenBlock.warnings.length&&c.warnings.concat(c.lenBlock.warnings),d===-1)return c.error=c.lenBlock.error,{offset:-1,result:c};if(e=d,t-=c.lenBlock.blockLength,!c.idBlock.isConstructed&&c.lenBlock.isIndefiniteForm)return c.error="Indefinite length form used for primitive encoding form",{offset:-1,result:c};let g=BaseBlock;switch(c.idBlock.tagClass){case 1:if(c.idBlock.tagNumber>=37&&c.idBlock.isHexOnly===!1)return c.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:c};switch(c.idBlock.tagNumber){case 0:if(c.idBlock.isConstructed&&c.lenBlock.length>0)return c.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:c};g=typeStore.EndOfContent;break;case 1:g=typeStore.Boolean;break;case 2:g=typeStore.Integer;break;case 3:g=typeStore.BitString;break;case 4:g=typeStore.OctetString;break;case 5:g=typeStore.Null;break;case 6:g=typeStore.ObjectIdentifier;break;case 10:g=typeStore.Enumerated;break;case 12:g=typeStore.Utf8String;break;case 13:g=typeStore.RelativeObjectIdentifier;break;case 14:g=typeStore.TIME;break;case 15:return c.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:c};case 16:g=typeStore.Sequence;break;case 17:g=typeStore.Set;break;case 18:g=typeStore.NumericString;break;case 19:g=typeStore.PrintableString;break;case 20:g=typeStore.TeletexString;break;case 21:g=typeStore.VideotexString;break;case 22:g=typeStore.IA5String;break;case 23:g=typeStore.UTCTime;break;case 24:g=typeStore.GeneralizedTime;break;case 25:g=typeStore.GraphicString;break;case 26:g=typeStore.VisibleString;break;case 27:g=typeStore.GeneralString;break;case 28:g=typeStore.UniversalString;break;case 29:g=typeStore.CharacterString;break;case 30:g=typeStore.BmpString;break;case 31:g=typeStore.DATE;break;case 32:g=typeStore.TimeOfDay;break;case 33:g=typeStore.DateTime;break;case 34:g=typeStore.Duration;break;default:{const m=c.idBlock.isConstructed?new typeStore.Constructed:new typeStore.Primitive;m.idBlock=c.idBlock,m.lenBlock=c.lenBlock,m.warnings=c.warnings,c=m}}break;case 2:case 3:case 4:default:g=c.idBlock.isConstructed?typeStore.Constructed:typeStore.Primitive}return c=localChangeType(c,g),d=c.fromBER(n,e,c.lenBlock.isIndefiniteForm?t:c.lenBlock.length),c.valueBeforeDecodeView=n.subarray(o,o+c.blockLength),{offset:d,result:c}}function fromBER(n){if(!n.byteLength){const e=new BaseBlock({},ValueBlock);return e.error="Input buffer has zero length",{offset:-1,result:e}}return localFromBER(BufferSourceConverter.toUint8Array(n).slice(),0,n.byteLength)}function checkLen(n,e){return n?1:e}class LocalConstructedValueBlock extends ValueBlock{constructor({value:e=[],isIndefiniteForm:t=!1,...o}={}){super(o),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,o){const c=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,c,t,o))return-1;if(this.valueBeforeDecodeView=c.subarray(t,t+o),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),t;let l=t;for(;checkLen(this.isIndefiniteForm,o)>0;){const h=localFromBER(c,l,o);if(h.offset===-1)return this.error=h.result.error,this.warnings.concat(h.result.warnings),-1;if(l=h.offset,this.blockLength+=h.result.blockLength,o-=h.result.blockLength,this.value.push(h.result),this.isIndefiniteForm&&h.result.constructor.NAME===END_OF_CONTENT_NAME)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===END_OF_CONTENT_NAME?this.value.pop():this.warnings.push("No EndOfContent block encoded")),l}toBER(e,t){const o=t||new ViewWriter;for(let c=0;c<this.value.length;c++)this.value[c].toBER(e,o);return t?EMPTY_BUFFER:o.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}LocalConstructedValueBlock.NAME="ConstructedValueBlock";var _a$v;class Constructed extends BaseBlock{constructor(e={}){super(e,LocalConstructedValueBlock),this.idBlock.isConstructed=!0}fromBER(e,t,o){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const c=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?o:this.lenBlock.length);return c===-1?(this.error=this.valueBlock.error,c):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),c)}onAsciiEncoding(){const e=[];for(const o of this.valueBlock.value)e.push(o.toString("ascii").split(`
`).map(c=>`  ${c}`).join(`
`));const t=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :
${e.join(`
`)}`:`${t} :`}}_a$v=Constructed;typeStore.Constructed=_a$v;Constructed.NAME="CONSTRUCTED";class LocalEndOfContentValueBlock extends ValueBlock{fromBER(e,t,o){return t}toBER(e){return EMPTY_BUFFER}}LocalEndOfContentValueBlock.override="EndOfContentValueBlock";var _a$u;class EndOfContent extends BaseBlock{constructor(e={}){super(e,LocalEndOfContentValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}_a$u=EndOfContent;typeStore.EndOfContent=_a$u;EndOfContent.NAME=END_OF_CONTENT_NAME;var _a$t;class Null extends BaseBlock{constructor(e={}){super(e,ValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,o){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=o,t+o>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+o}toBER(e,t){const o=new ArrayBuffer(2);if(!e){const c=new Uint8Array(o);c[0]=5,c[1]=0}return t&&t.write(o),o}onAsciiEncoding(){return`${this.constructor.NAME}`}}_a$t=Null;typeStore.Null=_a$t;Null.NAME="NULL";class LocalBooleanValueBlock extends HexBlock(ValueBlock){constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=BufferSourceConverter.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,o){const c=BufferSourceConverter.toUint8Array(e);return checkBufferParams(this,c,t,o)?(this.valueHexView=c.subarray(t,t+o),o>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,utilDecodeTC.call(this),this.blockLength=o,t+o):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}LocalBooleanValueBlock.NAME="BooleanValueBlock";var _a$s;let Boolean$1=class extends BaseBlock{constructor(e={}){super(e,LocalBooleanValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};_a$s=Boolean$1;typeStore.Boolean=_a$s;Boolean$1.NAME="BOOLEAN";class LocalOctetStringValueBlock extends HexBlock(LocalConstructedValueBlock){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,o){let c=0;if(this.isConstructed){if(this.isHexOnly=!1,c=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,o),c===-1)return c;for(let l=0;l<this.value.length;l++){const h=this.value[l].constructor.NAME;if(h===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(h!==OCTET_STRING_NAME)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,c=super.fromBER(e,t,o),this.blockLength=o;return c}toBER(e,t){return this.isConstructed?LocalConstructedValueBlock.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}LocalOctetStringValueBlock.NAME="OctetStringValueBlock";var _a$r;class OctetString extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...o}={}){var c,l;(c=o.isConstructed)!==null&&c!==void 0||(o.isConstructed=!!(!((l=o.value)===null||l===void 0)&&l.length)),super({idBlock:{isConstructed:o.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!o.isIndefiniteForm},...o},LocalOctetStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,o){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,o===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const l=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+o);try{if(l.byteLength){const h=localFromBER(l,0,l.byteLength);h.offset!==-1&&h.offset===o&&(this.valueBlock.value=[h.result])}}catch{}}return super.fromBER(e,t,o)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Constructed.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const t of this.valueBlock.value)t instanceof OctetString&&e.push(t.valueBlock.valueHexView);return BufferSourceConverter.concat(e)}}_a$r=OctetString;typeStore.OctetString=_a$r;OctetString.NAME=OCTET_STRING_NAME;class LocalBitStringValueBlock extends HexBlock(LocalConstructedValueBlock){constructor({unusedBits:e=0,isConstructed:t=!1,...o}={}){super(o),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,o){if(!o)return t;let c=-1;if(this.isConstructed){if(c=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,o),c===-1)return c;for(const d of this.value){const g=d.constructor.NAME;if(g===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(g!==BIT_STRING_NAME)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const m=d.valueBlock;if(this.unusedBits>0&&m.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=m.unusedBits}return c}const l=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,l,t,o))return-1;const h=l.subarray(t,t+o);if(this.unusedBits=h[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const d=h.subarray(1);try{if(d.byteLength){const g=localFromBER(d,0,d.byteLength);g.offset!==-1&&g.offset===o-1&&(this.value=[g.result])}}catch{}}return this.valueHexView=h.subarray(1),this.blockLength=h.length,t+o}toBER(e,t){if(this.isConstructed)return LocalConstructedValueBlock.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return EMPTY_BUFFER;const o=new Uint8Array(this.valueHexView.length+1);return o[0]=this.unusedBits,o.set(this.valueHexView,1),o.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}LocalBitStringValueBlock.NAME="BitStringValueBlock";var _a$q;class BitString extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...o}={}){var c,l;(c=o.isConstructed)!==null&&c!==void 0||(o.isConstructed=!!(!((l=o.value)===null||l===void 0)&&l.length)),super({idBlock:{isConstructed:o.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!o.isIndefiniteForm},...o},LocalBitStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,o){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,o)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Constructed.prototype.onAsciiEncoding.call(this);{const e=[],t=this.valueBlock.valueHexView;for(const c of t)e.push(c.toString(2).padStart(8,"0"));const o=e.join("");return`${this.constructor.NAME} : ${o.substring(0,o.length-this.valueBlock.unusedBits)}`}}}_a$q=BitString;typeStore.BitString=_a$q;BitString.NAME=BIT_STRING_NAME;var _a$p;function viewAdd(n,e){const t=new Uint8Array([0]),o=new Uint8Array(n),c=new Uint8Array(e);let l=o.slice(0);const h=l.length-1,d=c.slice(0),g=d.length-1;let m=0;const v=g<h?h:g;let _=0;for(let p=v;p>=0;p--,_++){switch(!0){case _<d.length:m=l[h-_]+d[g-_]+t[0];break;default:m=l[h-_]+t[0]}switch(t[0]=m/10,!0){case _>=l.length:l=utilConcatView(new Uint8Array([m%10]),l);break;default:l[h-_]=m%10}}return t[0]>0&&(l=utilConcatView(t,l)),l}function power2(n){if(n>=powers2.length)for(let e=powers2.length;e<=n;e++){const t=new Uint8Array([0]);let o=powers2[e-1].slice(0);for(let c=o.length-1;c>=0;c--){const l=new Uint8Array([(o[c]<<1)+t[0]]);t[0]=l[0]/10,o[c]=l[0]%10}t[0]>0&&(o=utilConcatView(t,o)),powers2.push(o)}return powers2[n]}function viewSub(n,e){let t=0;const o=new Uint8Array(n),c=new Uint8Array(e),l=o.slice(0),h=l.length-1,d=c.slice(0),g=d.length-1;let m,v=0;for(let _=g;_>=0;_--,v++)switch(m=l[h-v]-d[g-v]-t,!0){case m<0:t=1,l[h-v]=m+10;break;default:t=0,l[h-v]=m}if(t>0)for(let _=h-g+1;_>=0;_--,v++)if(m=l[h-v]-t,m<0)t=1,l[h-v]=m+10;else{t=0,l[h-v]=m;break}return l.slice()}class LocalIntegerValueBlock extends HexBlock(ValueBlock){constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=utilDecodeTC.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(utilEncodeTC(e))}get valueDec(){return this._valueDec}fromDER(e,t,o,c=0){const l=this.fromBER(e,t,o);if(l===-1)return l;const h=this.valueHexView;return h[0]===0&&h[1]&128?this.valueHexView=h.subarray(1):c!==0&&h.length<c&&(c-h.length>1&&(c=h.length+1),this.valueHexView=h.subarray(c-h.length)),l}toDER(e=!1){const t=this.valueHexView;switch(!0){case(t[0]&128)!==0:{const o=new Uint8Array(this.valueHexView.length+1);o[0]=0,o.set(t,1),this.valueHexView=o}break;case(t[0]===0&&(t[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,t,o){const c=super.fromBER(e,t,o);return c===-1||this.setValueHex(),c}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let t=new Uint8Array(this.valueHexView.length*8/3),o=0,c;const l=this.valueHexView;let h="",d=!1;for(let g=l.byteLength-1;g>=0;g--){c=l[g];for(let m=0;m<8;m++){if((c&1)===1)switch(o){case e:t=viewSub(power2(o),t),h="-";break;default:t=viewAdd(t,power2(o))}o++,c>>=1}}for(let g=0;g<t.length;g++)t[g]&&(d=!0),d&&(h+=digitsString.charAt(t[g]));return d===!1&&(h+=digitsString.charAt(0)),h}}_a$p=LocalIntegerValueBlock;LocalIntegerValueBlock.NAME="IntegerValueBlock";Object.defineProperty(_a$p.prototype,"valueHex",{set:function(n){this.valueHexView=new Uint8Array(n),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var _a$o;class Integer extends BaseBlock{constructor(e={}){super(e,LocalIntegerValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return assertBigInt(),BigInt(this.valueBlock.toString())}static fromBigInt(e){assertBigInt();const t=BigInt(e),o=new ViewWriter,c=t.toString(16).replace(/^-/,""),l=new Uint8Array(Convert.FromHex(c));if(t<0){const d=new Uint8Array(l.length+(l[0]&128?1:0));d[0]|=128;const m=BigInt(`0x${Convert.ToHex(d)}`)+t,v=BufferSourceConverter.toUint8Array(Convert.FromHex(m.toString(16)));v[0]|=128,o.write(v)}else l[0]&128&&o.write(new Uint8Array([0])),o.write(l);return new Integer({valueHex:o.final()})}convertToDER(){const e=new Integer({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new Integer({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}_a$o=Integer;typeStore.Integer=_a$o;Integer.NAME="INTEGER";var _a$n;class Enumerated extends Integer{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}_a$n=Enumerated;typeStore.Enumerated=_a$n;Enumerated.NAME="ENUMERATED";class LocalSidValueBlock extends HexBlock(ValueBlock){constructor({valueDec:e=-1,isFirstSid:t=!1,...o}={}){super(o),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,o){if(!o)return t;const c=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,c,t,o))return-1;const l=c.subarray(t,t+o);this.valueHexView=new Uint8Array(o);for(let d=0;d<o&&(this.valueHexView[d]=l[d]&127,this.blockLength++,!!(l[d]&128));d++);const h=new Uint8Array(this.blockLength);for(let d=0;d<this.blockLength;d++)h[d]=this.valueHexView[d];return this.valueHexView=h,l[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){assertBigInt();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const o=new Uint8Array(t.length/7);for(let c=0;c<o.length;c++)o[c]=parseInt(t.slice(c*7,c*7+7),2)+(c+1<o.length?128:0);this.fromBER(o.buffer,0,o.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const c=this.valueHexView,l=new Uint8Array(this.blockLength);for(let h=0;h<this.blockLength-1;h++)l[h]=c[h]|128;return l[this.blockLength-1]=c[this.blockLength-1],l.buffer}const t=utilToBase(this.valueDec,7);if(t.byteLength===0)return this.error="Error during encoding SID value",EMPTY_BUFFER;const o=new Uint8Array(t.byteLength);if(!e){const c=new Uint8Array(t),l=t.byteLength-1;for(let h=0;h<l;h++)o[h]=c[h]|128;o[l]=c[l]}return o}toString(){let e="";if(this.isHexOnly)e=Convert.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}LocalSidValueBlock.NAME="sidBlock";class LocalObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=EMPTY_STRING,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,o){let c=t;for(;o>0;){const l=new LocalSidValueBlock;if(c=l.fromBER(e,c,o),c===-1)return this.blockLength=0,this.error=l.error,c;this.value.length===0&&(l.isFirstSid=!0),this.blockLength+=l.blockLength,o-=l.blockLength,this.value.push(l)}return c}toBER(e){const t=[];for(let o=0;o<this.value.length;o++){const c=this.value[o].toBER(e);if(c.byteLength===0)return this.error=this.value[o].error,EMPTY_BUFFER;t.push(c)}return concat(t)}fromString(e){this.value=[];let t=0,o=0,c="",l=!1;do if(o=e.indexOf(".",t),o===-1?c=e.substring(t):c=e.substring(t,o),t=o+1,l){const h=this.value[0];let d=0;switch(h.valueDec){case 0:break;case 1:d=40;break;case 2:d=80;break;default:this.value=[];return}const g=parseInt(c,10);if(isNaN(g))return;h.valueDec=g+d,l=!1}else{const h=new LocalSidValueBlock;if(c>Number.MAX_SAFE_INTEGER){assertBigInt();const d=BigInt(c);h.valueBigInt=d}else if(h.valueDec=parseInt(c,10),isNaN(h.valueDec))return;this.value.length||(h.isFirstSid=!0,l=!0),this.value.push(h)}while(o!==-1)}toString(){let e="",t=!1;for(let o=0;o<this.value.length;o++){t=this.value[o].isHexOnly;let c=this.value[o].toString();o!==0&&(e=`${e}.`),t?(c=`{${c}}`,this.value[o].isFirstSid?e=`2.{${c} - 80}`:e+=c):e+=c}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}LocalObjectIdentifierValueBlock.NAME="ObjectIdentifierValueBlock";var _a$m;class ObjectIdentifier extends BaseBlock{constructor(e={}){super(e,LocalObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$m=ObjectIdentifier;typeStore.ObjectIdentifier=_a$m;ObjectIdentifier.NAME="OBJECT IDENTIFIER";class LocalRelativeSidValueBlock extends HexBlock(LocalBaseBlock){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,o){if(o===0)return t;const c=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,c,t,o))return-1;const l=c.subarray(t,t+o);this.valueHexView=new Uint8Array(o);for(let d=0;d<o&&(this.valueHexView[d]=l[d]&127,this.blockLength++,!!(l[d]&128));d++);const h=new Uint8Array(this.blockLength);for(let d=0;d<this.blockLength;d++)h[d]=this.valueHexView[d];return this.valueHexView=h,l[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const c=this.valueHexView,l=new Uint8Array(this.blockLength);for(let h=0;h<this.blockLength-1;h++)l[h]=c[h]|128;return l[this.blockLength-1]=c[this.blockLength-1],l.buffer}const t=utilToBase(this.valueDec,7);if(t.byteLength===0)return this.error="Error during encoding SID value",EMPTY_BUFFER;const o=new Uint8Array(t.byteLength);if(!e){const c=new Uint8Array(t),l=t.byteLength-1;for(let h=0;h<l;h++)o[h]=c[h]|128;o[l]=c[l]}return o.buffer}toString(){let e="";return this.isHexOnly?e=Convert.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}LocalRelativeSidValueBlock.NAME="relativeSidBlock";class LocalRelativeObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=EMPTY_STRING,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,o){let c=t;for(;o>0;){const l=new LocalRelativeSidValueBlock;if(c=l.fromBER(e,c,o),c===-1)return this.blockLength=0,this.error=l.error,c;this.blockLength+=l.blockLength,o-=l.blockLength,this.value.push(l)}return c}toBER(e,t){const o=[];for(let c=0;c<this.value.length;c++){const l=this.value[c].toBER(e);if(l.byteLength===0)return this.error=this.value[c].error,EMPTY_BUFFER;o.push(l)}return concat(o)}fromString(e){this.value=[];let t=0,o=0,c="";do{o=e.indexOf(".",t),o===-1?c=e.substring(t):c=e.substring(t,o),t=o+1;const l=new LocalRelativeSidValueBlock;if(l.valueDec=parseInt(c,10),isNaN(l.valueDec))return!0;this.value.push(l)}while(o!==-1);return!0}toString(){let e="",t=!1;for(let o=0;o<this.value.length;o++){t=this.value[o].isHexOnly;let c=this.value[o].toString();o!==0&&(e=`${e}.`),t&&(c=`{${c}}`),e+=c}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}LocalRelativeObjectIdentifierValueBlock.NAME="RelativeObjectIdentifierValueBlock";var _a$l;class RelativeObjectIdentifier extends BaseBlock{constructor(e={}){super(e,LocalRelativeObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$l=RelativeObjectIdentifier;typeStore.RelativeObjectIdentifier=_a$l;RelativeObjectIdentifier.NAME="RelativeObjectIdentifier";var _a$k;class Sequence extends Constructed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}_a$k=Sequence;typeStore.Sequence=_a$k;Sequence.NAME="SEQUENCE";var _a$j;let Set$1=class extends Constructed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};_a$j=Set$1;typeStore.Set=_a$j;Set$1.NAME="SET";class LocalStringValueBlock extends HexBlock(ValueBlock){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=EMPTY_STRING}toJSON(){return{...super.toJSON(),value:this.value}}}LocalStringValueBlock.NAME="StringValueBlock";class LocalSimpleStringValueBlock extends LocalStringValueBlock{}LocalSimpleStringValueBlock.NAME="SimpleStringValueBlock";class LocalSimpleStringBlock extends BaseStringBlock{constructor({...e}={}){super(e,LocalSimpleStringValueBlock)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,BufferSourceConverter.toUint8Array(e))}fromString(e){const t=e.length,o=this.valueBlock.valueHexView=new Uint8Array(t);for(let c=0;c<t;c++)o[c]=e.charCodeAt(c);this.valueBlock.value=e}}LocalSimpleStringBlock.NAME="SIMPLE STRING";class LocalUtf8StringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.valueHexView=BufferSourceConverter.toUint8Array(e);try{this.valueBlock.value=Convert.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=Convert.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Convert.FromUtf8String(e)),this.valueBlock.value=e}}LocalUtf8StringValueBlock.NAME="Utf8StringValueBlock";var _a$i;class Utf8String extends LocalUtf8StringValueBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}_a$i=Utf8String;typeStore.Utf8String=_a$i;Utf8String.NAME="UTF8String";class LocalBmpStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.value=Convert.ToUtf16String(e),this.valueBlock.valueHexView=BufferSourceConverter.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Convert.FromUtf16String(e))}}LocalBmpStringValueBlock.NAME="BmpStringValueBlock";var _a$h;class BmpString extends LocalBmpStringValueBlock{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}_a$h=BmpString;typeStore.BmpString=_a$h;BmpString.NAME="BMPString";class LocalUniversalStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),o=new Uint8Array(t);for(let c=0;c<o.length;c+=4)o[c]=o[c+3],o[c+1]=o[c+2],o[c+2]=0,o[c+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,o=this.valueBlock.valueHexView=new Uint8Array(t*4);for(let c=0;c<t;c++){const l=utilToBase(e.charCodeAt(c),8),h=new Uint8Array(l);if(h.length>4)continue;const d=4-h.length;for(let g=h.length-1;g>=0;g--)o[c*4+g+d]=h[g]}this.valueBlock.value=e}}LocalUniversalStringValueBlock.NAME="UniversalStringValueBlock";var _a$g;class UniversalString extends LocalUniversalStringValueBlock{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}_a$g=UniversalString;typeStore.UniversalString=_a$g;UniversalString.NAME="UniversalString";var _a$f;class NumericString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}_a$f=NumericString;typeStore.NumericString=_a$f;NumericString.NAME="NumericString";var _a$e;class PrintableString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}_a$e=PrintableString;typeStore.PrintableString=_a$e;PrintableString.NAME="PrintableString";var _a$d;class TeletexString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}_a$d=TeletexString;typeStore.TeletexString=_a$d;TeletexString.NAME="TeletexString";var _a$c;class VideotexString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}_a$c=VideotexString;typeStore.VideotexString=_a$c;VideotexString.NAME="VideotexString";var _a$b;class IA5String extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}_a$b=IA5String;typeStore.IA5String=_a$b;IA5String.NAME="IA5String";var _a$a;class GraphicString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}_a$a=GraphicString;typeStore.GraphicString=_a$a;GraphicString.NAME="GraphicString";var _a$9;class VisibleString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}_a$9=VisibleString;typeStore.VisibleString=_a$9;VisibleString.NAME="VisibleString";var _a$8;class GeneralString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}_a$8=GeneralString;typeStore.GeneralString=_a$8;GeneralString.NAME="GeneralString";var _a$7;class CharacterString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}_a$7=CharacterString;typeStore.CharacterString=_a$7;CharacterString.NAME="CharacterString";var _a$6;class UTCTime extends VisibleString{constructor({value:e,valueDate:t,...o}={}){if(super(o),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let c=0;c<e.length;c++)this.valueBlock.valueHexView[c]=e.charCodeAt(c)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,BufferSourceConverter.toUint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),o=new Uint8Array(t);for(let c=0;c<e.length;c++)o[c]=e.charCodeAt(c);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const o=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(o===null){this.error="Wrong input string for conversion";return}const c=parseInt(o[1],10);c>=50?this.year=1900+c:this.year=2e3+c,this.month=parseInt(o[2],10),this.day=parseInt(o[3],10),this.hour=parseInt(o[4],10),this.minute=parseInt(o[5],10),this.second=parseInt(o[6],10)}toString(e="iso"){if(e==="iso"){const t=new Array(7);return t[0]=padNumber(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=padNumber(this.month,2),t[2]=padNumber(this.day,2),t[3]=padNumber(this.hour,2),t[4]=padNumber(this.minute,2),t[5]=padNumber(this.second,2),t[6]="Z",t.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}_a$6=UTCTime;typeStore.UTCTime=_a$6;UTCTime.NAME="UTCTime";var _a$5;class GeneralizedTime extends UTCTime{constructor(e={}){var t;super(e),(t=this.millisecond)!==null&&t!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t=!1,o="",c="",l=0,h,d=0,g=0;if(e[e.length-1]==="Z")o=e.substring(0,e.length-1),t=!0;else{const _=new Number(e[e.length-1]);if(isNaN(_.valueOf()))throw new Error("Wrong input string for conversion");o=e}if(t){if(o.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(o.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let _=1,p=o.indexOf("+"),a="";if(p===-1&&(p=o.indexOf("-"),_=-1),p!==-1){if(a=o.substring(p+1),o=o.substring(0,p),a.length!==2&&a.length!==4)throw new Error("Wrong input string for conversion");let u=parseInt(a.substring(0,2),10);if(isNaN(u.valueOf()))throw new Error("Wrong input string for conversion");if(d=_*u,a.length===4){if(u=parseInt(a.substring(2,4),10),isNaN(u.valueOf()))throw new Error("Wrong input string for conversion");g=_*u}}}let m=o.indexOf(".");if(m===-1&&(m=o.indexOf(",")),m!==-1){const _=new Number(`0${o.substring(m)}`);if(isNaN(_.valueOf()))throw new Error("Wrong input string for conversion");l=_.valueOf(),c=o.substring(0,m)}else c=o;switch(!0){case c.length===8:if(h=/(\d{4})(\d{2})(\d{2})/ig,m!==-1)throw new Error("Wrong input string for conversion");break;case c.length===10:if(h=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,m!==-1){let _=60*l;this.minute=Math.floor(_),_=60*(_-this.minute),this.second=Math.floor(_),_=1e3*(_-this.second),this.millisecond=Math.floor(_)}break;case c.length===12:if(h=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,m!==-1){let _=60*l;this.second=Math.floor(_),_=1e3*(_-this.second),this.millisecond=Math.floor(_)}break;case c.length===14:if(h=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,m!==-1){const _=1e3*l;this.millisecond=Math.floor(_)}break;default:throw new Error("Wrong input string for conversion")}const v=h.exec(c);if(v===null)throw new Error("Wrong input string for conversion");for(let _=1;_<v.length;_++)switch(_){case 1:this.year=parseInt(v[_],10);break;case 2:this.month=parseInt(v[_],10);break;case 3:this.day=parseInt(v[_],10);break;case 4:this.hour=parseInt(v[_],10)+d;break;case 5:this.minute=parseInt(v[_],10)+g;break;case 6:this.second=parseInt(v[_],10);break;default:throw new Error("Wrong input string for conversion")}if(t===!1){const _=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=_.getUTCFullYear(),this.month=_.getUTCMonth(),this.day=_.getUTCDay(),this.hour=_.getUTCHours(),this.minute=_.getUTCMinutes(),this.second=_.getUTCSeconds(),this.millisecond=_.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const t=[];return t.push(padNumber(this.year,4)),t.push(padNumber(this.month,2)),t.push(padNumber(this.day,2)),t.push(padNumber(this.hour,2)),t.push(padNumber(this.minute,2)),t.push(padNumber(this.second,2)),this.millisecond!==0&&(t.push("."),t.push(padNumber(this.millisecond,3))),t.push("Z"),t.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}_a$5=GeneralizedTime;typeStore.GeneralizedTime=_a$5;GeneralizedTime.NAME="GeneralizedTime";var _a$4;class DATE extends Utf8String{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}_a$4=DATE;typeStore.DATE=_a$4;DATE.NAME="DATE";var _a$3;class TimeOfDay extends Utf8String{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}_a$3=TimeOfDay;typeStore.TimeOfDay=_a$3;TimeOfDay.NAME="TimeOfDay";var _a$2;class DateTime extends Utf8String{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}_a$2=DateTime;typeStore.DateTime=_a$2;DateTime.NAME="DateTime";var _a$1;let Duration$1=class extends Utf8String{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}};_a$1=Duration$1;typeStore.Duration=_a$1;Duration$1.NAME="Duration";var _a;class TIME extends Utf8String{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}_a=TIME;typeStore.TIME=_a;TIME.NAME="TIME";const ID_ED25519="1.3.101.112";async function readPemED25519(n,e){const t=n.replace(/-----BEGIN (.*)-----|-----END (.*)-----|\n|\r/g,""),o=decode$1(t);if(e){let c;try{c=EncryptedPrivateKeyInfo.parse(o)}catch(g){const m=g!=null&&g.message!=null?g.message:"";throw new BadKeyError(`failed to parse encrypted private key: ${m}`)}const l=await c.decrypt(e);let h=null;if(l.algId.algIdent===ID_ED25519)h=Ed25519PrivateKey;else throw new BadKeyError(`unknown private key algorithm ${l.algId.toString()}`);const d=decode$2(l.privateKey);if(!("bytes"in d))throw new BadKeyError(`expected ASN bytes, got ${JSON.stringify(d)}`);return h.fromBytes(d.bytes)}return o.subarray(16)}async function readPemECDSA(n,e){const t=n.replace(/-----BEGIN (.*)-----|-----END (.*)-----|\n|\r/g,""),o=decode$1(t);if(e){const l=forge.pem.decode(n)[0].dekInfo.parameters,h=decode$4(l),d=n.split(`
`),g=await messageDigest(e,l),m=buffer.Buffer.from(d.slice(4,d.length-1).join(""),"base64"),v=await createDecipheriv(CipherAlgorithm.Aes128Cbc,g,h,m);return EcdsaPrivateKey.fromBytesDer(v)}else return fromBER(o).result.valueBlock.value[1].valueBlock.valueHexView}async function read(n,e){return n.includes("BEGIN EC PRIVATE KEY")?readPemECDSA(n,e):readPemED25519(n,e)}function legacy(n,e){const t=new Uint8Array(n.length+8);t.set(n,0);const o=new DataView(t.buffer,t.byteOffset,t.byteLength);e===0xffffffffff?(o.setInt32(n.length+0,255),o.setInt32(n.length+4,-1)):(o.setInt32(n.length+0,e<0?-1:0),o.setInt32(n.length+4,e));const c=Uint8Array.from([255]);return deriveKey(HashAlgorithm.Sha512,t,c,2048,32)}const CACHE={privateKeyConstructor:null,privateKeyFromBytes:null,mnemonicFromString:null};let PrivateKey$1=class qt extends Key$1{constructor(e){super(),this._key=e}get _type(){return this._key._type}get _chainCode(){return this._key._chainCode}static generateED25519(){return new qt(Ed25519PrivateKey.generate())}static generateECDSA(){return new qt(EcdsaPrivateKey.generate())}static generate(){return qt.generateED25519()}static async generateAsync(){return qt.generateED25519Async()}static async generateED25519Async(){return new qt(await Ed25519PrivateKey.generateAsync())}static async generateECDSAAsync(){return new qt(await EcdsaPrivateKey.generateAsync())}static fromBytes(e){let t;try{return new qt(Ed25519PrivateKey.fromBytes(e))}catch(o){t=o!=null&&o.message!=null?o.message:""}try{return new qt(EcdsaPrivateKey.fromBytes(e))}catch(o){t=o!=null&&o.message!=null?o.message:""}throw new BadKeyError(`private key cannot be decoded from bytes: ${t}`)}static fromBytesECDSA(e){return new qt(EcdsaPrivateKey.fromBytes(e))}static fromBytesED25519(e){return new qt(Ed25519PrivateKey.fromBytes(e))}static fromString(e){return qt.fromBytes(decode$4(e))}static fromStringECDSA(e){return qt.fromBytesECDSA(decode$4(e))}static fromStringED25519(e){return qt.fromBytesED25519(decode$4(e))}static async fromSeedED25519(e){const t=await Ed25519PrivateKey.fromSeed(e);return new qt(t)}static async fromSeedECDSAsecp256k1(e){const t=await EcdsaPrivateKey.fromSeed(e);return new qt(t)}static async fromMnemonic(e,t=""){if(CACHE.mnemonicFromString==null)throw new Error("Mnemonic not found in cache");return(typeof e=="string"?CACHE.mnemonicFromString(e):e).toEd25519PrivateKey(t)}static async fromKeystore(e,t=""){return qt.fromBytes(await loadKeystore(e,t))}static async fromPem(e,t=""){const o=await read(e,t);return o instanceof Ed25519PrivateKey||o instanceof EcdsaPrivateKey?new qt(o):e.includes("BEGIN EC PRIVATE KEY")?new qt(EcdsaPrivateKey.fromBytes(o)):new qt(Ed25519PrivateKey.fromBytes(o))}async derive(e){if(this._key._chainCode==null)throw new Error("this private key does not support key derivation");if(this._key instanceof Ed25519PrivateKey){const{keyData:t,chainCode:o}=await derive(this.toBytesRaw(),this._key._chainCode,e);return new qt(new Ed25519PrivateKey(t,o))}else{const{keyData:t,chainCode:o}=await derive$1(this.toBytesRaw(),this._key._chainCode,e);return new qt(new EcdsaPrivateKey(fromBytes(t),o))}}async legacyDerive(e){const t=await legacy(this.toBytesRaw().subarray(0,32),e),o=this._key.constructor;return new qt(new o(t))}get publicKey(){return new PublicKey$1(this._key.publicKey)}sign(e){return this._key.sign(e)}signTransaction(e){if(e.isFrozen()||e.freeze(),e._signedTransactions.length!=1)throw new Error("`PrivateKey.signTransaction()` requires `Transaction` to have a single node `AccountId` set");const t=e._signedTransactions[0],o=encode$2(this.publicKey.toBytesRaw());t.sigMap==null&&(t.sigMap={}),t.sigMap.sigPair==null&&(t.sigMap.sigPair=[]);for(const h of t.sigMap.sigPair)if(h.pubKeyPrefix!=null&&encode$2(h.pubKeyPrefix)===o)switch(this._type){case"ED25519":return h.ed25519;case"secp256k1":return h.ECDSASecp256k1}const c=this.sign(t.bodyBytes!=null?t.bodyBytes:new Uint8Array),l={pubKeyPrefix:this.publicKey.toBytesRaw()};switch(this._type){case"ED25519":l.ed25519=c;break;case"secp256k1":l.ECDSASecp256k1=c;break}return t.sigMap.sigPair.push(l),e._signerPublicKeys.add(o),c}isDerivable(){return this._key._chainCode!=null}toBytes(){return this._key instanceof Ed25519PrivateKey?this.toBytesRaw():this.toBytesDer()}toBytesDer(){return this._key.toBytesDer()}toBytesRaw(){return this._key.toBytesRaw()}toString(){return this.toStringDer()}toStringDer(){return encode$2(this.toBytesDer())}toStringRaw(){return encode$2(this.toBytesRaw())}toKeystore(e=""){return createKeystore(this.toBytesRaw(),e)}};CACHE.privateKeyConstructor=n=>new PrivateKey$1(n);CACHE.privateKeyFromBytes=n=>PrivateKey$1.fromBytes(n);const BadMnemonicReason=Object.freeze({BadLength:"BadLength",UnknownWords:"UnknownWords",ChecksumMismatch:"ChecksumMismatch"});class BadMnemonicError extends Error{constructor(e,t,o){let c;switch(t){case BadMnemonicReason.BadLength:c="mnemonic is of an unexpected number of words";break;case BadMnemonicReason.ChecksumMismatch:c="checksum byte in mnemonic did not match the rest of the mnemonic";break;case BadMnemonicReason.UnknownWords:c="mnemonic contained words that are not in the standard word list";break;default:throw new Error(`unexpected value ${t.toString()} for 'reason'`)}super(`invalid mnemonic: ${c}`),typeof Error.captureStackTrace<"u"&&Error.captureStackTrace(this,BadMnemonicError),this.name="BadMnemonicError",this.reason=t,this.mnemonic=e,this.unknownWordIndices=o}}const legacyWords=["aback","abbey","abbot","abide","ablaze","able","aboard","abode","abort","abound","about","above","abroad","abrupt","absent","absorb","absurd","abuse","accent","accept","access","accord","accuse","ace","ache","aching","acid","acidic","acorn","acre","across","act","action","active","actor","actual","acute","adam","adapt","add","added","addict","adept","adhere","adjust","admire","admit","adobe","adopt","adrift","adult","adverb","advice","aerial","afar","affair","affect","afford","afghan","afield","afloat","afraid","afresh","after","again","age","agency","agenda","agent","aghast","agile","ago","agony","agree","agreed","ahead","aid","aide","aim","air","airman","airy","akin","alarm","alaska","albeit","album","ale","alert","alibi","alice","alien","alight","align","alike","alive","alkali","all","alley","allied","allow","alloy","ally","almond","almost","aloft","alone","along","aloof","aloud","alpha","alpine","also","altar","alter","always","amaze","amazon","amber","ambush","amen","amend","amid","amidst","amiss","among","amount","ample","amuse","anchor","and","andrew","anew","angel","anger","angle","angry","animal","ankle","annoy","annual","answer","anthem","any","anyhow","anyway","apart","apathy","apex","apiece","appeal","appear","apple","apply","april","apron","arab","arcade","arcane","arch","arctic","ardent","are","area","argue","arid","arise","ark","arm","armful","army","aroma","around","arouse","array","arrest","arrive","arrow","arson","art","artery","artful","artist","ascent","ash","ashen","ashore","aside","ask","asleep","aspect","assay","assent","assert","assess","asset","assign","assist","assume","assure","asthma","astute","asylum","ate","athens","atlas","atom","atomic","attach","attack","attain","attend","attic","auburn","audio","audit","august","aunt","auntie","aura","austin","author","auto","autumn","avail","avenge","avenue","avert","avid","avoid","await","awake","awaken","award","aware","awash","away","awful","awhile","axe","axes","axiom","axis","axle","aye","babe","baby","bach","back","backup","bacon","bad","badge","badly","bag","baggy","bail","bait","bake","baker","bakery","bald","ball","ballad","ballet","ballot","baltic","bamboo","ban","banal","banana","band","bang","bank","bar","barber","bare","barely","barge","bark","barley","barn","baron","barrel","barren","basalt","base","basic","basil","basin","basis","basket","bass","bat","batch","bath","baton","battle","bay","beach","beacon","beak","beam","bean","bear","beard","beast","beat","beauty","become","bed","beech","beef","beefy","beep","beer","beet","beetle","before","beg","beggar","begin","behalf","behave","behind","beige","being","belief","bell","belly","belong","below","belt","bench","bend","benign","bent","berlin","berry","berth","beset","beside","best","bestow","bet","beta","betray","better","beware","beyond","bias","biceps","bicker","bid","big","bigger","bike","bile","bill","bin","binary","bind","biopsy","birch","bird","birdie","birth","bishop","bit","bitch","bite","bitter","black","blade","blame","bland","blast","blaze","bleak","blend","bless","blew","blind","blink","blip","bliss","blitz","block","blond","blood","bloody","bloom","blot","blouse","blow","blue","bluff","blunt","blur","blush","boar","board","boast","boat","bob","bodily","body","bogus","boil","bold","bolt","bomb","bombay","bond","bone","bonn","bonnet","bonus","bony","book","boom","boost","boot","booth","booze","border","bore","borrow","bosom","boss","boston","both","bother","bottle","bottom","bought","bounce","bound","bounty","bout","bovine","bow","bowel","bowl","box","boy","boyish","brace","brain","brainy","brake","bran","branch","brand","brandy","brass","brave","bravo","brazil","breach","bread","break","breast","breath","bred","breed","breeze","brew","bribe","brick","bride","bridge","brief","bright","brim","brine","bring","brink","brisk","broad","broke","broken","bronze","brook","broom","brown","bruise","brush","brutal","brute","bubble","buck","bucket","buckle","budget","buffet","buggy","build","bulb","bulge","bulk","bulky","bull","bullet","bully","bump","bumpy","bunch","bundle","bunk","bunny","burden","bureau","burial","buried","burly","burn","burnt","burrow","burst","bury","bus","bush","bust","bustle","busy","but","butler","butt","butter","button","buy","buyer","buzz","bye","byte","cab","cabin","cable","cache","cactus","caesar","cage","cairo","cajun","cajole","cake","calf","call","caller","calm","calmly","came","camel","camera","camp","campus","can","canada","canal","canary","cancel","cancer","candid","candle","candy","cane","canine","canoe","canopy","canvas","canyon","cap","cape","car","carbon","card","care","career","caress","cargo","carl","carnal","carol","carp","carpet","carrot","carry","cart","cartel","case","cash","cask","cast","castle","casual","cat","catch","cater","cattle","caught","causal","cause","cave","cease","celery","cell","cellar","celtic","cement","censor","census","cent","cereal","chain","chair","chalk","chalky","champ","chance","change","chant","chaos","chap","chapel","charge","charm","chart","chase","chat","cheap","cheat","check","cheek","cheeky","cheer","cheery","cheese","chef","cheque","cherry","chess","chest","chew","chic","chick","chief","child","chile","chill","chilly","chin","china","chip","choice","choir","choose","chop","choppy","chord","chorus","chose","chosen","chris","chrome","chunk","chunky","church","cider","cigar","cinema","circa","circle","circus","cite","city","civic","civil","clad","claim","clammy","clan","clap","clash","clasp","class","clause","claw","clay","clean","clear","clergy","clerk","clever","click","client","cliff","climax","climb","clinch","cling","clinic","clip","cloak","clock","clone","close","closer","closet","cloth","cloud","cloudy","clout","clown","club","clue","clumsy","clung","clutch","coach","coal","coarse","coast","coat","coax","cobalt","cobra","coca","cock","cocoa","code","coffee","coffin","cohort","coil","coin","coke","cold","collar","colon","colony","colt","column","comb","combat","come","comedy","comic","commit","common","compel","comply","concur","cone","confer","congo","consul","convex","convey","convoy","cook","cool","cope","copper","copy","coral","cord","core","cork","corn","corner","corps","corpse","corpus","cortex","cosmic","cosmos","cost","costly","cotton","couch","cough","could","count","county","coup","couple","coupon","course","court","cousin","cove","cover","covert","cow","coward","cowboy","cozy","crab","crack","cradle","craft","crafty","crag","crane","crash","crate","crater","crawl","crazy","creak","cream","creamy","create","credit","creed","creek","creep","creepy","crept","crest","crew","cried","crime","crisis","crisp","critic","crook","crop","cross","crow","crowd","crown","crude","cruel","cruise","crunch","crush","crust","crux","cry","crypt","cuba","cube","cubic","cuckoo","cuff","cult","cup","curb","cure","curfew","curl","curry","curse","cursor","curve","cuss","custom","cut","cute","cycle","cyclic","cynic","czech","dad","daddy","dagger","daily","dairy","daisy","dale","dam","damage","damp","dampen","dance","danger","danish","dare","dark","darken","darn","dart","dash","data","date","david","dawn","day","dead","deadly","deaf","deal","dealer","dean","dear","death","debate","debit","debris","debt","debtor","decade","decay","decent","decide","deck","decor","decree","deduce","deed","deep","deeply","deer","defeat","defect","defend","defer","define","defy","degree","deity","delay","delete","delhi","delta","demand","demise","demo","demure","denial","denote","dense","dental","deny","depart","depend","depict","deploy","depot","depth","deputy","derive","desert","design","desire","desist","desk","detail","detect","deter","detest","detour","device","devise","devoid","devote","devour","dial","diana","diary","dice","dictum","did","die","diesel","diet","differ","dig","digest","digit","dine","dinghy","dinner","diode","dip","dire","direct","dirt","dirty","disc","disco","dish","disk","dismal","dispel","ditch","dive","divert","divide","divine","dizzy","docile","dock","doctor","dog","dogma","dole","doll","dollar","dolly","domain","dome","domino","donate","done","donkey","donor","doom","door","dorsal","dose","dot","double","doubt","dough","dour","dove","down","dozen","draft","drag","dragon","drain","drama","drank","draw","drawer","dread","dream","dreary","dress","drew","dried","drift","drill","drink","drip","drive","driver","drop","drove","drown","drug","drum","drunk","dry","dual","duck","duct","due","duel","duet","duke","dull","duly","dumb","dummy","dump","dune","dung","duress","during","dusk","dust","dusty","dutch","duty","dwarf","dwell","dyer","dying","dynamo","each","eager","eagle","ear","earl","early","earn","earth","ease","easel","easily","east","easter","easy","eat","eaten","eater","echo","eddy","eden","edge","edible","edict","edit","editor","eel","eerie","eerily","effect","effort","egg","ego","eight","eighth","eighty","either","elbow","elder","eldest","elect","eleven","elicit","elite","else","elude","elves","embark","emblem","embryo","emerge","emit","empire","employ","empty","enable","enamel","end","endure","enemy","energy","engage","engine","enjoy","enlist","enough","ensure","entail","enter","entire","entry","envoy","envy","enzyme","epic","epoch","equal","equate","equip","equity","era","erect","eric","erode","erotic","errant","error","escape","escort","essay","essex","estate","esteem","ethic","ethnic","europe","evade","eve","even","event","ever","every","evict","evil","evoke","evolve","exact","exam","exceed","excel","except","excess","excise","excite","excuse","exempt","exert","exile","exist","exit","exodus","exotic","expand","expect","expert","expire","export","expose","extend","extra","eye","eyed","fabric","face","facial","fact","factor","fade","fail","faint","fair","fairly","fairy","faith","fake","falcon","fall","false","falter","fame","family","famine","famous","fan","fancy","far","farce","fare","farm","farmer","fast","fasten","faster","fat","fatal","fate","father","fatty","fault","faulty","fauna","fear","feast","feat","fed","fee","feeble","feed","feel","feet","fell","fellow","felt","female","fence","fend","ferry","fetal","fetch","feudal","fever","few","fewer","fiasco","fiddle","field","fiend","fierce","fiery","fifth","fifty","fig","fight","figure","file","fill","filled","filler","film","filter","filth","filthy","final","finale","find","fine","finery","finger","finish","finite","fire","firm","firmly","first","fiscal","fish","fisher","fist","fit","fitful","five","fix","flag","flair","flak","flame","flank","flap","flare","flash","flask","flat","flavor","flaw","fled","flee","fleece","fleet","flesh","fleshy","flew","flick","flight","flimsy","flint","flirt","float","flock","flood","floor","floppy","flora","floral","flour","flow","flower","fluent","fluffy","fluid","flung","flurry","flush","flute","flux","fly","flyer","foal","foam","focal","focus","fog","foil","fold","folk","follow","folly","fond","fondly","font","food","fool","foot","for","forbid","force","ford","forest","forge","forget","fork","form","formal","format","former","fort","forth","forty","forum","fossil","foster","foul","found","four","fourth","fox","foyer","frail","frame","franc","france","frank","fraud","fred","free","freed","freely","freeze","french","frenzy","fresh","friar","friday","fridge","fried","friend","fright","fringe","frock","frog","from","front","frost","frosty","frown","frozen","frugal","fruit","fry","fudge","fuel","full","fully","fumes","fun","fund","funny","fur","furry","fury","fuse","fusion","fuss","fussy","futile","future","fuzzy","gadget","gain","gala","galaxy","gale","gall","galley","gallon","gallop","gamble","game","gamma","gandhi","gang","gap","garage","garden","garlic","gas","gasp","gate","gather","gauge","gaunt","gave","gaze","gear","geese","gem","gemini","gender","gene","geneva","genial","genius","genre","gentle","gently","gentry","genus","george","germ","get","ghetto","ghost","giant","gift","giggle","gill","gilt","ginger","girl","give","given","glad","glade","glance","gland","glare","glass","glassy","gleam","glee","glide","global","globe","gloom","gloomy","gloria","glory","gloss","glossy","glove","glow","glue","gnat","gnu","goal","goat","gold","golden","golf","gone","gong","goo","good","goose","gore","gorge","gory","gosh","gospel","gossip","got","gothic","govern","gown","grab","grace","grade","grail","grain","grand","grant","grape","graph","grasp","grass","grassy","grate","grave","gravel","gravy","grease","greasy","great","greece","greed","greedy","greek","green","greet","grew","grey","grid","grief","grill","grim","grin","grind","grip","grit","gritty","groan","groin","groom","groove","gross","ground","group","grove","grow","grown","growth","grudge","grunt","guard","guess","guest","guide","guild","guilt","guilty","guise","guitar","gulf","gully","gun","gunman","guru","gut","guy","gypsy","habit","hack","had","hail","hair","hairy","haiti","hale","half","hall","halt","hamlet","hammer","hand","handle","handy","hang","hangar","hanoi","happen","happy","harass","harbor","hard","harder","hardly","hare","harem","harm","harp","harry","harsh","has","hash","hassle","haste","hasten","hasty","hat","hatch","hate","haul","haunt","havana","have","haven","havoc","hawaii","hawk","hay","hazard","haze","hazel","hazy","head","heal","health","heap","hear","heard","heart","hearth","hearty","heat","heater","heaven","heavy","hebrew","heck","hectic","hedge","heel","hefty","height","heir","held","helium","helix","hell","hello","helm","helmet","help","hemp","hence","henry","her","herald","herb","herd","here","hereby","hermes","hernia","hero","heroic","heroin","hey","heyday","hick","hidden","hide","high","higher","highly","hill","him","hind","hinder","hint","hippie","hire","his","hiss","hit","hive","hoard","hoarse","hobby","hockey","hold","holder","hole","hollow","holly","holy","home","honest","honey","hood","hook","hope","horn","horrid","horror","horse","hose","host","hot","hotel","hound","hour","house","hover","how","huge","hull","human","humane","humble","humid","hung","hunger","hungry","hunt","hurdle","hurl","hurry","hurt","hush","hut","hybrid","hymn","hyphen","ice","icing","icon","idaho","idea","ideal","idiom","idiot","idle","idly","idol","ignite","ignore","ill","image","immune","impact","imply","import","impose","inca","incest","inch","income","incur","indeed","index","india","indian","indoor","induce","inept","inert","infant","infect","infer","influx","inform","inject","injure","injury","ink","inlaid","inland","inlet","inmate","inn","innate","inner","input","insane","insect","insert","inset","inside","insist","insult","insure","intact","intake","intend","inter","into","invade","invent","invest","invite","invoke","inward","iowa","iran","iraq","irish","iron","ironic","irony","isaac","isabel","island","isle","israel","issue","italy","itch","item","itself","ivan","ivory","jack","jacket","jacob","jade","jaguar","jail","james","jane","japan","jargon","java","jaw","jazz","jeep","jelly","jerky","jest","jet","jewel","jewish","jim","job","jock","jockey","joe","john","join","joint","joke","jolly","jolt","jordan","joseph","joy","joyful","joyous","judge","judy","juice","juicy","july","jumble","jumbo","jump","june","jungle","junior","junk","junta","jury","just","kansas","karate","karl","keel","keen","keep","keeper","kenya","kept","kernel","kettle","key","khaki","kick","kid","kidnap","kidney","kill","killer","kin","kind","kindly","king","kiss","kite","kitten","knack","knee","kneel","knew","knife","knight","knit","knob","knock","knot","know","known","koran","korea","kuwait","label","lace","lack","lad","ladder","laden","lady","lagoon","laity","lake","lamb","lame","lamp","lance","land","lane","lap","lapse","large","larval","laser","last","latch","late","lately","latent","later","latest","latin","latter","laugh","launch","lava","lavish","law","lawful","lawn","lawyer","lay","layer","layman","lazy","lead","leader","leaf","leafy","league","leak","leaky","lean","leap","learn","lease","leash","least","leave","led","ledge","left","leg","legacy","legal","legend","legion","lemon","lend","length","lens","lent","leo","leper","lesion","less","lessen","lesser","lesson","lest","let","lethal","letter","level","lever","levy","lewis","liable","liar","libel","libya","lice","lick","lid","lie","lied","lier","life","lift","light","like","likely","limb","lime","limit","limp","line","linear","linen","linger","link","lint","lion","lip","liquid","liquor","list","listen","lit","live","lively","liver","liz","lizard","load","loaf","loan","lobby","lobe","local","locate","lock","locus","lodge","loft","lofty","log","logic","logo","london","lone","lonely","long","longer","look","loop","loose","loosen","loot","lord","lorry","lose","loss","lost","lot","lotion","lotus","loud","loudly","lounge","lousy","love","lovely","lover","low","lower","lowest","loyal","lucid","luck","lucky","lucy","lull","lump","lumpy","lunacy","lunar","lunch","lung","lure","lurid","lush","lust","lute","luther","luxury","lying","lymph","lynch","lyric","macho","macro","mad","madam","made","mafia","magic","magma","magnet","magnum","magpie","maid","maiden","mail","main","mainly","major","make","maker","male","malice","mall","malt","mammal","manage","mane","mania","manic","manner","manor","mantle","manual","manure","many","map","maple","marble","march","mare","margin","maria","marina","mark","market","marry","mars","marsh","martin","martyr","mary","mask","mason","mass","mast","master","mat","match","mate","matrix","matter","mature","maxim","may","maybe","mayor","maze","mead","meadow","meal","mean","meant","meat","medal","media","median","medic","medium","meet","mellow","melody","melon","melt","member","memo","memory","menace","mend","mental","mentor","menu","mercy","mere","merely","merge","merger","merit","merry","mesh","mess","messy","met","metal","meter","method","methyl","metric","metro","mexico","miami","mickey","mid","midday","middle","midst","midway","might","mighty","mild","mildew","mile","milk","milky","mill","mimic","mince","mind","mine","mini","mink","minor","mint","minus","minute","mire","mirror","mirth","misery","miss","mist","misty","mite","mix","moan","moat","mob","mobile","mock","mode","model","modem","modern","modest","modify","module","moist","molar","mold","mole","molten","moment","monday","money","monk","monkey","month","mood","moody","moon","moor","moral","morale","morbid","more","morgue","mortal","mortar","mosaic","moscow","moses","mosque","moss","most","mostly","moth","mother","motion","motive","motor","mount","mourn","mouse","mouth","move","movie","mrs","much","muck","mucus","mud","muddle","muddy","mule","mummy","munich","murder","murky","murmur","muscle","museum","music","mussel","must","mutant","mute","mutiny","mutter","mutton","mutual","muzzle","myopic","myriad","myself","mystic","myth","nadir","nail","naked","name","namely","nape","napkin","naples","narrow","nasal","nasty","nathan","nation","native","nature","nausea","naval","nave","navy","near","nearer","nearly","neat","neatly","neck","need","needle","needy","negate","neon","nepal","nephew","nerve","nest","net","neural","never","newly","next","nice","nicely","niche","nickel","niece","night","nile","nimble","nine","ninety","ninth","nobel","noble","nobody","node","noise","noisy","none","noon","nor","norm","normal","north","norway","nose","nosy","not","note","notice","notify","notion","noun","novel","novice","now","nozzle","null","numb","number","nurse","nut","nylon","nymph","oak","oar","oasis","oath","obese","obey","object","oblige","oboe","obtain","obtuse","occult","occupy","occur","ocean","octave","odd","off","offend","offer","office","offset","often","ohio","oil","oily","okay","old","older","oldest","olive","omega","omen","omit","once","one","onion","only","onset","onto","onus","onward","opaque","open","openly","opera","opium","oppose","optic","option","oracle","oral","orange","orbit","orchid","ordeal","order","organ","orgasm","orient","origin","ornate","orphan","oscar","other","otter","ought","ounce","our","out","outer","output","outset","oval","oven","over","overt","owe","owing","owl","own","owner","oxford","oxide","oxygen","oyster","ozone","pace","pack","packet","pact","pad","paddle","paddy","pagan","page","paid","pain","paint","pair","palace","pale","palm","pan","panama","panel","panic","papa","papal","paper","parade","parcel","pardon","parent","paris","parish","park","parody","parrot","part","partly","party","pascal","pass","past","paste","pastel","pastor","pastry","pat","patch","patent","path","patio","patrol","patron","paul","pause","pave","paw","pawn","pay","peace","peach","peak","pear","pearl","pedal","peel","peer","peking","pelvic","pelvis","pen","penal","pence","pencil","penny","people","pepper","per","perch","peril","period","perish","permit","person","peru","pest","pet","peter","petite","petrol","petty","phase","philip","phone","photo","phrase","piano","pick","picket","picnic","pie","piece","pier","pierce","piety","pig","pigeon","piggy","pike","pile","pill","pillar","pillow","pilot","pin","pinch","pine","pink","pint","pious","pipe","pirate","piss","pistol","piston","pit","pitch","pity","pivot","pixel","pizza","place","placid","plague","plain","plan","plane","planet","plank","plant","plasma","plate","play","player","plea","plead","please","pledge","plenty","plight","plot","plough","ploy","plug","plum","plump","plunge","plural","plus","plush","pocket","poem","poet","poetic","poetry","point","poison","poland","polar","pole","police","policy","polish","polite","poll","pollen","polo","pond","ponder","pony","pool","poor","poorly","pop","poppy","pore","pork","port","portal","pose","posh","post","postal","pot","potato","potent","pouch","pound","pour","powder","power","praise","pray","prayer","preach","prefer","prefix","press","pretty","price","pride","priest","primal","prime","prince","print","prior","prism","prison","privy","prize","probe","profit","prompt","prone","proof","propel","proper","prose","proton","proud","prove","proven","proxy","prune","pry","psalm","pseudo","psyche","pub","public","puff","pull","pulp","pulpit","pulsar","pulse","pump","punch","punish","punk","pupil","puppet","puppy","pure","purely","purge","purify","purple","purse","pursue","push","pushy","put","putt","puzzle","quaint","quake","quarry","quart","quartz","quebec","queen","queer","query","quest","queue","quick","quid","quiet","quilt","quirk","quit","quite","quiver","quiz","quota","quote","rabbit","race","racial","racism","rack","racket","radar","radio","radish","radius","raffle","raft","rage","raid","rail","rain","rainy","raise","rake","rally","ramp","random","range","rank","ransom","rape","rapid","rare","rarely","rarity","rash","rat","rate","rather","ratify","ratio","rattle","rave","raven","raw","ray","razor","reach","react","read","reader","ready","real","really","realm","reap","rear","reason","rebel","recall","recent","recess","recipe","reckon","record","recoup","rector","red","redeem","redo","reduce","reed","reef","reek","refer","reform","refuge","refuse","regal","regard","regent","regime","region","regret","reign","reject","relate","relax","relay","relic","relief","relish","rely","remain","remark","remedy","remind","remit","remote","remove","renal","render","rent","rental","repair","repeal","repeat","repent","reply","report","rescue","resent","reside","resign","resin","resist","resort","rest","result","resume","retail","retain","retina","retire","return","reveal","review","revise","revive","revolt","reward","rex","rhine","rhino","rhyme","rhythm","ribbon","rice","rich","rick","rid","ride","rider","ridge","rife","rifle","rift","right","rigid","rile","rim","ring","rinse","riot","ripe","ripen","ripple","rise","risk","risky","rite","ritual","ritz","rival","river","road","roar","roast","rob","robe","robert","robin","robot","robust","rock","rocket","rocky","rod","rode","rodent","rogue","role","roll","roman","rome","roof","room","root","rope","rose","rosy","rot","rotate","rotor","rotten","rouge","rough","round","route","rover","row","royal","rub","rubber","rubble","ruby","rudder","rude","rug","rugby","ruin","rule","ruler","rumble","rump","run","rune","rung","runway","rural","rush","russia","rust","rustic","rusty","sack","sacred","sad","saddle","sadism","sadly","safari","safe","safely","safer","safety","saga","sage","sahara","said","sail","sailor","saint","sake","salad","salary","sale","saline","saliva","salmon","saloon","salt","salty","salute","sam","same","sample","sand","sandy","sane","sash","satin","satire","saturn","sauce","saucer","saudi","sauna","savage","save","saw","say","scale","scalp","scan","scant","scar","scarce","scare","scarf","scary","scene","scenic","scent","school","scold","scope","score","scorn","scotch","scott","scout","scrap","scrape","scream","screen","screw","script","scroll","scrub","scum","sea","seal","seam","seaman","search","season","seat","second","secret","sect","sector","secure","see","seed","seeing","seek","seem","seize","seldom","select","self","sell","seller","semi","senate","send","senile","senior","sense","sensor","sent","sentry","seoul","sequel","serene","serial","series","sermon","serum","serve","server","set","settle","seven","severe","sew","sewage","shabby","shade","shadow","shady","shaft","shaggy","shah","shake","shaky","shall","sham","shame","shape","share","shark","sharp","shawl","she","shear","sheen","sheep","sheer","sheet","shelf","shell","sherry","shield","shift","shine","shiny","ship","shire","shirk","shirt","shiver","shock","shoe","shook","shoot","shop","shore","short","shot","should","shout","show","shower","shrank","shrewd","shrill","shrimp","shrine","shrink","shrub","shrug","shut","shy","shyly","sick","side","siege","sigh","sight","sigma","sign","signal","silent","silk","silken","silky","sill","silly","silo","silver","simple","simply","since","sinful","sing","singer","single","sink","sir","sire","siren","sister","sit","site","sitter","six","sixth","sixty","size","sketch","skill","skin","skinny","skip","skirt","skull","sky","slab","slack","slain","slam","slang","slap","slat","slate","slave","sleek","sleep","sleepy","sleeve","slice","slick","slid","slide","slight","slim","slimy","sling","slip","slit","slogan","slope","sloppy","slot","slow","slowly","slug","slum","slump","smack","small","smart","smash","smear","smell","smelly","smelt","smile","smite","smoke","smoky","smooth","smug","snack","snail","snake","snap","snatch","sneak","snow","snowy","snug","soak","soap","sober","soccer","social","sock","socket","socks","soda","sodden","sodium","sofa","soft","soften","softly","soggy","soil","solar","sold","sole","solely","solemn","solid","solo","solve","some","son","sonar","sonata","song","sonic","sony","soon","sooner","soot","soothe","sordid","sore","sorrow","sorry","sort","soul","sound","soup","sour","source","soviet","sow","space","spade","spain","span","spare","spark","sparse","spasm","spat","spate","speak","spear","speech","speed","speedy","spell","spend","sphere","spice","spicy","spider","spiky","spill","spin","spinal","spine","spiral","spirit","spit","spite","splash","split","spoil","spoke","sponge","spoon","sport","spot","spouse","spray","spread","spree","spring","sprint","spur","squad","square","squash","squat","squid","stab","stable","stack","staff","stage","stain","stair","stairs","stake","stale","stall","stamp","stance","stand","staple","star","starch","stare","stark","start","starve","state","static","statue","status","stay","stead","steady","steak","steal","steam","steel","steep","steer","stem","stench","step","stereo","stern","stew","stick","sticky","stiff","stifle","stigma","still","sting","stint","stir","stitch","stock","stocky","stone","stony","stool","stop","store","storm","stormy","story","stout","stove","stow","strain","strait","strand","strap","strata","straw","stray","streak","stream","street","stress","strict","stride","strife","strike","string","strip","stripe","strive","stroke","stroll","strong","stud","studio","study","stuff","stuffy","stunt","stupid","sturdy","style","submit","subtle","subtly","suburb","such","sudden","sue","suez","suffer","sugar","suit","suite","suitor","sullen","sultan","sum","summer","summit","summon","sun","sunday","sunny","sunset","super","superb","supper","supple","supply","sure","surely","surf","surge","survey","suture","swamp","swan","swap","swarm","sway","swear","sweat","sweaty","sweden","sweep","sweet","swell","swift","swim","swine","swing","swirl","swiss","switch","sword","swore","sydney","symbol","synod","syntax","syria","syrup","system","table","tablet","taboo","tacit","tackle","tact","tactic","tail","tailor","taiwan","take","tale","talent","talk","tall","tally","tame","tampa","tan","tandem","tangle","tank","tap","tape","target","tariff","tarp","tart","tarzan","task","taste","tasty","tattoo","taurus","taut","tavern","tax","taxi","tea","teach","teak","team","tear","tease","tech","teeth","tell","temper","temple","tempo","tempt","ten","tenant","tend","tender","tendon","tennis","tenor","tense","tent","tenth","tenure","teresa","term","terror","terse","test","texas","text","thank","thaw","them","theme","thence","theory","there","these","thesis","they","thick","thief","thigh","thin","thing","think","third","thirst","thirty","this","thomas","thorn","those","though","thread","threat","three","thrill","thrive","throat","throne","throng","throw","thrust","thud","thug","thumb","thus","thyme","tibet","tick","ticket","tidal","tide","tidy","tie","tier","tiger","tight","tile","till","tilt","timber","time","timid","tin","tiny","tip","tire","tissue","title","toad","toast","today","toe","toilet","token","tokyo","told","toll","tom","tomato","tomb","tonal","tone","tongue","tonic","too","took","tool","tooth","top","topaz","topic","torch","torque","torso","tort","toss","total","touch","tough","tour","toward","towel","tower","town","toxic","toxin","toy","trace","track","tract","trade","tragic","trail","train","trait","tram","trance","trap","trauma","travel","tray","tread","treat","treaty","treble","tree","trek","tremor","trench","trend","trendy","trial","tribal","tribe","trick","tricky","tried","trifle","trim","trio","trip","triple","troop","trophy","trot","trough","trout","truce","truck","true","truly","trunk","trust","truth","try","tube","tumble","tuna","tundra","tune","tunic","tunnel","turban","turf","turk","turkey","turn","turtle","tutor","tweed","twelve","twenty","twice","twin","twist","two","tycoon","tying","type","tyrant","ugly","ulcer","ultra","umpire","unable","uncle","under","uneasy","unfair","unify","union","unique","unit","unite","unity","unlike","unrest","unruly","until","update","upheld","uphill","uphold","upon","upper","uproar","upset","upshot","uptake","upturn","upward","urban","urge","urgent","urging","urine","usable","usage","use","useful","user","usual","utmost","utter","vacant","vacuum","vague","vain","valet","valid","valley","value","valve","van","vanish","vanity","vary","vase","vast","vat","vault","vector","veil","vein","velvet","vendor","veneer","venice","venom","vent","venue","venus","verb","verbal","verge","verify","verity","verse","versus","very","vessel","vest","vet","veto","via","viable","vicar","vice","victim","victor","video","vienna","view","vigil","viking","vile","villa","vine","vinyl","viola","violet","violin","viral","virgo","virtue","virus","visa","vision","visit","visual","vital","vivid","vocal","vodka","vogue","voice","void","volley","volume","vote","vowel","voyage","vulgar","wade","wage","waist","wait","waiter","wake","walk","walker","wall","wallet","walnut","wander","want","war","warden","warm","warmth","warn","warp","warsaw","wary","was","wash","wasp","waste","watch","water","watery","wave","wax","way","weak","weaken","wealth","weapon","wear","weary","weave","wedge","wee","weed","week","weekly","weep","weigh","weight","weird","well","were","west","wet","whale","wharf","what","wheat","wheel","when","whence","where","which","whiff","while","whim","whip","whisky","white","who","whole","wholly","whom","whose","why","wicked","wide","widely","widen","wider","widow","width","wife","wig","wild","wildly","will","willow","wily","win","wind","window","windy","wine","wing","wink","winner","winter","wipe","wire","wisdom","wise","wish","wit","witch","with","within","witty","wizard","woke","wolf","wolves","woman","womb","won","wonder","wood","wooden","woods","woody","wool","word","work","worker","world","worm","worry","worse","worst","worth","worthy","would","wound","wrap","wrath","wreath","wreck","wring","wrist","writ","write","writer","wrong","xerox","yacht","yale","yard","yarn","yeah","year","yeard","yeast","yellow","yet","yield","yogurt","yolk","you","young","your","youth","zaire","zeal","zebra","zenith","zero","zeus","zigzag","zinc","zombie","zone"],bip39Words=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function digest$1(n){return new Uint8Array(await crypto.subtle.digest("SHA-256",n))}async function toSeed(n,e){const t=n.join(" "),o=`mnemonic${e}`.normalize("NFKD");return deriveKey(HashAlgorithm.Sha512,t,o,2048,64)}function legacy1(n,e){const t=n.map(h=>e.indexOf(h.toLowerCase())),o=convertRadix(t,e.length,256,33),c=o[o.length-1],l=new Uint8Array(o.length-1);for(let h=0;h<o.length-1;h+=1)l[h]=o[h]^c;return[l,c]}async function legacy2(n,e){const t=n.length*11,o=[];o.fill(!1,0,t);for(const[m,v]of n.entries()){const _=e.indexOf(v.toLowerCase());if(_<0)throw new Error(`Word not found in wordlist: ${v}`);for(let p=0;p<11;p+=1)o[m*11+p]=(_&1<<10-p)!==0}const c=t/33,l=t-c,h=new Uint8Array(l/8);for(let m=0;m<h.length;m+=1)for(let v=0;v<8;v+=1)o[m*8+v]&&(h[m]|=1<<7-v);const d=await digest$1(h),g=bytesToBits(d);for(let m=0;m<c;m+=1)if(o[l+m]!==g[m])throw new Error("Checksum mismatch");return h}function crc8(n){let e=255;for(let t=0;t<n.length-1;t+=1){e^=n[t];for(let o=0;o<8;o+=1)e=e>>>1^(e&1?178:0)}return e^255}function convertRadix(n,e,t,o){let c=new BigNumber(0);for(const h of n)c=c.times(e),c=c.plus(h);const l=new Uint8Array(o);for(let h=o-1;h>=0;h-=1){const d=c.dividedToIntegerBy(t),g=c.modulo(t);c=d,l[h]=g.toNumber()}return l}function bytesToBits(n){const e=[];e.fill(!1,0,n.length*8);for(let t=0;t<n.length;t+=1)for(let o=0;o<8;o+=1)e[t*8+o]=(n[t]&1<<7-o)!==0;return e}const ED25519_SEED_TEXT="ed25519 seed",ECDSA_SEED_TEXT="Bitcoin seed",HEDERA_PATH=[44,3030,0,0];let Mnemonic$1=class yr{constructor({words:e}){this.words=e}static generate(){return yr._generate(24)}static generate12(){return yr._generate(12)}static async _generate(e){let t;if(e===12)t=16;else if(e===24)t=32;else throw new Error(`unsupported phrase length ${e}, only 12 or 24 are supported`);const o=await bytesAsync(t),c=bytesToBinary(Array.from(o)),l=await deriveChecksumBits(o),d=(c+l).match(/(.{1,11})/g),g=(d??[]).map(m=>bip39Words[binaryToByte(m)]);return new yr({words:g})}static fromWords(e){return new yr({words:e})._validate()}toPrivateKey(e=""){return this.toEd25519PrivateKey(e)}async toEd25519PrivateKey(e="",t=HEDERA_PATH){let{keyData:o,chainCode:c}=await this._toKeyData(e,ED25519_SEED_TEXT);for(const h of t)({keyData:o,chainCode:c}=await derive(o,c,h));const l=nacl.sign.keyPair.fromSeed(o);if(CACHE.privateKeyConstructor==null)throw new Error("PrivateKey not found in cache");return CACHE.privateKeyConstructor(new Ed25519PrivateKey(l,c))}async toStandardEd25519PrivateKey(e="",t){const o=await yr.toSeed(this.words,e);let c=await PrivateKey$1.fromSeedED25519(o);t=t??0;for(const l of[44,3030,0,0,t])c=await c.derive(l);return c}async toEcdsaPrivateKey(e="",t=HEDERA_PATH){let{keyData:o,chainCode:c}=await this._toKeyData(e,ECDSA_SEED_TEXT);for(const l of t)({keyData:o,chainCode:c}=await derive$1(o,c,l));if(CACHE.privateKeyConstructor==null)throw new Error("PrivateKey not found in cache");return CACHE.privateKeyConstructor(new EcdsaPrivateKey(fromBytes(o),c))}async toStandardECDSAsecp256k1PrivateKey(e="",t){const o=await yr.toSeed(this.words,e);let c=await PrivateKey$1.fromSeedECDSAsecp256k1(o);t=t??0;for(const l of[toHardenedIndex(44),toHardenedIndex(3030),toHardenedIndex(0),0,t])c=await c.derive(l);return c}static async toSeed(e,t){return await toSeed(e,t)}async _toKeyData(e,t){const o=await toSeed(this.words,e),c=await hash$2(HashAlgorithm.Sha512,t,o);return{keyData:c.subarray(0,32),chainCode:c.subarray(32)}}static async fromString(e){return yr.fromWords(e.split(/\s|,/))}async _validate(){if(this.words.length===22){const e=this.words.reduce((l,h,d)=>legacyWords.includes(h.toLowerCase())?l:[...l,d],[]);if(e.length>0)throw new BadMnemonicError(this,BadMnemonicReason.UnknownWords,e);const[t,o]=legacy1(this.words,legacyWords),c=crc8(t);if(o!==c)throw new BadMnemonicError(this,BadMnemonicReason.ChecksumMismatch,[])}else{if(!(this.words.length===12||this.words.length===24))throw new BadMnemonicError(this,BadMnemonicReason.BadLength,[]);const e=this.words.reduce((m,v,_)=>bip39Words.includes(v)?m:[...m,_],[]);if(e.length>0)throw new BadMnemonicError(this,BadMnemonicReason.UnknownWords,e);const t=this.words.map(m=>bip39Words.indexOf(m).toString(2).padStart(11,"0")).join(""),o=Math.floor(t.length/33)*32,c=t.slice(0,o),l=t.slice(o),d=c.match(/(.{1,8})/g).map(binaryToByte);if(await deriveChecksumBits(Uint8Array.from(d))!==l)throw new BadMnemonicError(this,BadMnemonicReason.ChecksumMismatch,[])}return this}async toLegacyPrivateKey(){let e;if(this.words.length===22?[e]=legacy1(this.words,legacyWords):e=await legacy2(this.words,bip39Words),CACHE.privateKeyFromBytes==null)throw new Error("PrivateKey not found in cache");return CACHE.privateKeyFromBytes(e)}toString(){return this.words.join(" ")}};function binaryToByte(n){return parseInt(n,2)}function bytesToBinary(n){return n.map(e=>e.toString(2).padStart(8,"0")).join("")}async function deriveChecksumBits(n){const t=n.length*8/32,o=await digest$1(n);return bytesToBinary(Array.from(o)).slice(0,t)}class Mnemonic{constructor(e){this._mnemonic=e}static async generate(){return new Mnemonic(await Mnemonic$1._generate(24))}static async generate12(){return new Mnemonic(await Mnemonic$1._generate(12))}static async fromWords(e){return new Mnemonic(await Mnemonic$1.fromWords(e))}async toPrivateKey(e=""){return CACHE$1.privateKeyConstructor(await this._mnemonic.toPrivateKey(e))}async toEd25519PrivateKey(e="",t){return CACHE$1.privateKeyConstructor(await this._mnemonic.toEd25519PrivateKey(e,t))}async toStandardEd25519PrivateKey(e="",t){return CACHE$1.privateKeyConstructor(await this._mnemonic.toStandardEd25519PrivateKey(e,t))}async toEcdsaPrivateKey(e="",t){return CACHE$1.privateKeyConstructor(await this._mnemonic.toEcdsaPrivateKey(e,t))}async toStandardECDSAsecp256k1PrivateKey(e="",t){return CACHE$1.privateKeyConstructor(await this._mnemonic.toStandardECDSAsecp256k1PrivateKey(e,t))}static async fromString(e){return new Mnemonic(await Mnemonic$1.fromString(e))}async toLegacyPrivateKey(){return CACHE$1.privateKeyConstructor(await this._mnemonic.toLegacyPrivateKey())}async toSeed(e){return await Mnemonic$1.toSeed(this._mnemonic.words,e)}toString(){return this._mnemonic.toString()}}function arrayEqual(n,e){if(n===e)return!0;if(n.byteLength!==e.byteLength)return!1;const t=new DataView(n.buffer,n.byteOffset,n.byteLength),o=new DataView(e.buffer,e.byteOffset,e.byteLength);let c=n.byteLength;for(;c--;)if(t.getUint8(c)!==o.getUint8(c))return!1;return!0}class Key{_toProtobufKey(){throw new Error("not implemented")}static _fromProtobufKey(e){return e.contractID!=null?CACHE$1.contractId(e.contractID):e.delegatableContractId!=null?CACHE$1.delegateContractId(e.delegatableContractId):e.ed25519!=null&&e.ed25519.byteLength>0?CACHE$1.publicKeyED25519(e.ed25519):e.ECDSASecp256k1!=null&&e.ECDSASecp256k1.byteLength>0?CACHE$1.publicKeyECDSA(e.ECDSASecp256k1):e.thresholdKey!=null&&e.thresholdKey.threshold!=null?CACHE$1.thresholdKey(e.thresholdKey):e.keyList!=null?CACHE$1.keyList(e.keyList):null}}class PublicKey extends Key{constructor(e){super(),this._key=e}static fromBytes(e){return new PublicKey(PublicKey$1.fromBytes(e))}static fromBytesED25519(e){return new PublicKey(PublicKey$1.fromBytesED25519(e))}static fromBytesECDSA(e){return new PublicKey(PublicKey$1.fromBytesECDSA(e))}static fromString(e){return new PublicKey(PublicKey$1.fromString(e))}static fromStringECDSA(e){return new PublicKey(PublicKey$1.fromStringECDSA(e))}static fromStringED25519(e){return new PublicKey(PublicKey$1.fromStringED25519(e))}verify(e,t){return this._key.verify(e,t)}verifyTransaction(e){e._requireFrozen(),e.isFrozen()||e.freeze();for(const t of e._signedTransactions.list)if(t.sigMap!=null&&t.sigMap.sigPair!=null){let o=!1;for(const c of t.sigMap.sigPair){const l=c.pubKeyPrefix;if(arrayEqual(l,this.toBytesRaw())){o=!0;const h=t.bodyBytes;let d=null;if(c.ed25519!=null?d=c.ed25519:c.ECDSASecp256k1!=null&&(d=c.ECDSASecp256k1),d==null)continue;if(!this.verify(h,d))return!1}}if(!o)return!1}return!0}toBytes(){return this._key.toBytes()}toBytesDer(){return this._key.toBytesDer()}toBytesRaw(){return this._key.toBytesRaw()}toEthereumAddress(){return this._key.toEthereumAddress()}toEvmAddress(){return this._key.toEthereumAddress()}toString(){return this._key.toString()}toStringDer(){return this._key.toStringDer()}toStringRaw(){return this._key.toStringRaw()}equals(e){return this._key.equals(e._key)}_toProtobufKey(){switch(this._key._type){case"ED25519":return{ed25519:this._key.toBytesRaw()};case"secp256k1":return{ECDSASecp256k1:this._key.toBytesRaw()};default:throw new Error(`unrecognized key type ${this._key._type}`)}}_toProtobufSignature(e){switch(this._key._type){case"ED25519":return{pubKeyPrefix:this._key.toBytesRaw(),ed25519:e};case"secp256k1":return{pubKeyPrefix:this._key.toBytesRaw(),ECDSASecp256k1:e};default:throw new Error(`unrecognized key type ${this._key._type}`)}}toAccountId(e,t){return CACHE$1.accountIdConstructor(e,t,this)}}CACHE$1.setPublicKeyED25519(n=>PublicKey.fromBytesED25519(n));CACHE$1.setPublicKeyECDSA(n=>PublicKey.fromBytesECDSA(n));class PrivateKey extends Key{constructor(e){super(),this._key=e}static generateED25519(){return new PrivateKey(PrivateKey$1.generateED25519())}static generateECDSA(){return new PrivateKey(PrivateKey$1.generateECDSA())}static generate(){return PrivateKey.generateED25519()}static async generateAsync(){return new PrivateKey(await PrivateKey$1.generateAsync())}static async generateED25519Async(){return new PrivateKey(await PrivateKey$1.generateED25519Async())}static async generateECDSAAsync(){return new PrivateKey(await PrivateKey$1.generateECDSAAsync())}static fromBytes(e){return new PrivateKey(PrivateKey$1.fromBytes(e))}static fromBytesECDSA(e){return new PrivateKey(PrivateKey$1.fromBytesECDSA(e))}static fromBytesED25519(e){return new PrivateKey(PrivateKey$1.fromBytesED25519(e))}static fromString(e){return new PrivateKey(PrivateKey$1.fromString(e))}static fromStringECDSA(e){return new PrivateKey(PrivateKey$1.fromStringECDSA(e))}static fromStringED25519(e){return new PrivateKey(PrivateKey$1.fromStringED25519(e))}static async fromSeedED25519(e){return new PrivateKey(await PrivateKey$1.fromSeedED25519(e))}static async fromSeedECDSAsecp256k1(e){return new PrivateKey(await PrivateKey$1.fromSeedECDSAsecp256k1(e))}static async fromMnemonic(e,t=""){return e instanceof Mnemonic?new PrivateKey(await PrivateKey$1.fromMnemonic(e._mnemonic,t)):new PrivateKey(await PrivateKey$1.fromMnemonic(e,t))}static async fromKeystore(e,t=""){return new PrivateKey(await PrivateKey$1.fromKeystore(e,t))}static async fromPem(e,t=""){return new PrivateKey(await PrivateKey$1.fromPem(e,t))}async derive(e){return new PrivateKey(await this._key.derive(e))}async legacyDerive(e){return new PrivateKey(await this._key.legacyDerive(e))}get publicKey(){return new PublicKey(this._key.publicKey)}get chainCode(){return this._key._chainCode}sign(e){return this._key.sign(e)}signTransaction(e){const t=e._signedTransactions.get(0),o=t.bodyBytes!=null?this.sign(t.bodyBytes):new Uint8Array;return e.addSignature(this.publicKey,o),o}isDerivable(){return this._key.isDerivable()}toBytes(){return this._key.toBytes()}toBytesDer(){return this._key.toBytesDer()}toBytesRaw(){return this._key.toBytesRaw()}toString(){return this._key.toStringDer()}toStringDer(){return this._key.toStringDer()}toStringRaw(){return this._key.toStringRaw()}toKeystore(e=""){return this._key.toKeystore(e)}_toProtobufKey(){return this.publicKey._toProtobufKey()}toAccountId(e,t){return this.publicKey.toAccountId(e,t)}get type(){return this._key._type}}CACHE$1.setPrivateKeyConstructor(n=>new PrivateKey(n));class KeyList extends Key{constructor(e,t){super(),e==null?this._keys=[]:e instanceof Key?this._keys=[e]:this._keys=e,this._threshold=t??null}static of(...e){return new KeyList(e,null)}static from(e,t,o){return t==null?new KeyList(Array.from(e)):new KeyList(Array.from(e,t,o))}get threshold(){return this._threshold}setThreshold(e){return this._threshold=e,this}push(...e){return this._keys.push(...e)}splice(e,t,...o){return new KeyList(this._keys.splice(e,t,...o),this.threshold)}slice(e,t){return new KeyList(this._keys.slice(e,t),this.threshold)}[Symbol.iterator](){return this._keys[Symbol.iterator]()}toArray(){return this._keys.slice()}toString(){return JSON.stringify({threshold:this._threshold,keys:this._keys.toString()})}_toProtobufKey(){const e=this._keys.map(t=>t._toProtobufKey());return this.threshold==null?{keyList:{keys:e}}:{thresholdKey:{threshold:this.threshold,keys:{keys:e}}}}static __fromProtobufKeyList(e){const t=(e.keys!=null?e.keys:[]).map(o=>Key._fromProtobufKey(o));return new KeyList(t)}static __fromProtobufThresoldKey(e){const t=KeyList.__fromProtobufKeyList(e.keys!=null?e.keys:{});return t.setThreshold(e.threshold!=null?e.threshold:0),t}}CACHE$1.setKeyList(n=>KeyList.__fromProtobufKeyList(n));CACHE$1.setThresholdKey(n=>KeyList.__fromProtobufThresoldKey(n));function valueToLong(n){return BigNumber.isBigNumber(n)?n:new BigNumber(n.toString())}class HbarUnit{constructor(e,t,o){this._name=e,this._symbol=t,this._tinybar=o,Object.freeze(this)}static fromString(e){switch(e){case HbarUnit.Hbar._symbol:return HbarUnit.Hbar;case HbarUnit.Tinybar._symbol:return HbarUnit.Tinybar;case HbarUnit.Microbar._symbol:return HbarUnit.Microbar;case HbarUnit.Millibar._symbol:return HbarUnit.Millibar;case HbarUnit.Kilobar._symbol:return HbarUnit.Kilobar;case HbarUnit.Megabar._symbol:return HbarUnit.Megabar;case HbarUnit.Gigabar._symbol:return HbarUnit.Gigabar;default:throw new Error("Unknown unit.")}}}HbarUnit.Tinybar=new HbarUnit("tinybar","tℏ",new BigNumber(1));HbarUnit.Microbar=new HbarUnit("microbar","μℏ",new BigNumber(100));HbarUnit.Millibar=new HbarUnit("millibar","mℏ",new BigNumber(1e5));HbarUnit.Hbar=new HbarUnit("hbar","ℏ",new BigNumber("100000000"));HbarUnit.Kilobar=new HbarUnit("kilobar","kℏ",new BigNumber(1e3).multipliedBy(new BigNumber("100000000")));HbarUnit.Megabar=new HbarUnit("megabar","Mℏ",new BigNumber(1e6).multipliedBy(new BigNumber("100000000")));HbarUnit.Gigabar=new HbarUnit("gigabar","Gℏ",new BigNumber("1000000000").multipliedBy(new BigNumber("100000000")));class Hbar{constructor(e,t=HbarUnit.Hbar){if(t===HbarUnit.Tinybar)this._valueInTinybar=valueToLong(e);else{let o;Long$1.isLong(e)?o=new BigNumber(e.toString(10)):BigNumber.isBigNumber(e)||typeof e=="string"||typeof e=="number"?o=new BigNumber(e):o=new BigNumber(0),this._valueInTinybar=o.multipliedBy(t._tinybar)}if(!this._valueInTinybar.isInteger())throw new Error("Hbar in tinybars contains decimals")}static from(e,t){return new Hbar(e,t)}static fromTinybars(e){return typeof e=="string"?this.fromString(e,HbarUnit.Tinybar):new Hbar(e,HbarUnit.Tinybar)}static fromString(e,t=HbarUnit.Hbar){if(/^((?:\+|-)?\d+(?:\.\d+)?)(?: (tℏ|μℏ|mℏ|ℏ|kℏ|Mℏ|Gℏ))?$/.test(e)){let[c,l]=e.split(" ");return l!=null&&(t=HbarUnit.fromString(l)),new Hbar(new BigNumber(c),t)}else throw new Error("invalid argument provided")}to(e){return this._valueInTinybar.dividedBy(e._tinybar)}toBigNumber(){return this.to(HbarUnit.Hbar)}toTinybars(){return Long$1.fromValue(this._valueInTinybar.toFixed())}negated(){return Hbar.fromTinybars(this._valueInTinybar.negated())}isNegative(){return this._valueInTinybar.isNegative()}toString(e){return e!=null?`${this._valueInTinybar.dividedBy(e._tinybar).toString()} ${e._symbol}`:this._valueInTinybar.isLessThan(1e4)&&this._valueInTinybar.isGreaterThan(-1e4)?`${this._valueInTinybar.toFixed()} ${HbarUnit.Tinybar._symbol}`:`${this.to(HbarUnit.Hbar).toString()} ${HbarUnit.Hbar._symbol}`}}class StatusError extends Error{constructor(e,t){super(t),this.name="StatusError",this.status=e.status,this.transactionId=e.transactionId,this.message=t,typeof Error.captureStackTrace<"u"&&Error.captureStackTrace(this,StatusError)}toJSON(){return{name:this.name,status:this.status.toString(),transactionId:this.transactionId.toString(),message:this.message}}toString(){return JSON.stringify(this.toJSON())}valueOf(){return this.toJSON()}}class ReceiptStatusError extends StatusError{constructor(e){super(e,`receipt for transaction ${e.transactionId.toString()} contained error status ${e.status.toString()}`),this.transactionReceipt=e.transactionReceipt}}class Status{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case Status.Ok:return"OK";case Status.InvalidTransaction:return"INVALID_TRANSACTION";case Status.PayerAccountNotFound:return"PAYER_ACCOUNT_NOT_FOUND";case Status.InvalidNodeAccount:return"INVALID_NODE_ACCOUNT";case Status.TransactionExpired:return"TRANSACTION_EXPIRED";case Status.InvalidTransactionStart:return"INVALID_TRANSACTION_START";case Status.InvalidTransactionDuration:return"INVALID_TRANSACTION_DURATION";case Status.InvalidSignature:return"INVALID_SIGNATURE";case Status.MemoTooLong:return"MEMO_TOO_LONG";case Status.InsufficientTxFee:return"INSUFFICIENT_TX_FEE";case Status.InsufficientPayerBalance:return"INSUFFICIENT_PAYER_BALANCE";case Status.DuplicateTransaction:return"DUPLICATE_TRANSACTION";case Status.Busy:return"BUSY";case Status.NotSupported:return"NOT_SUPPORTED";case Status.InvalidFileId:return"INVALID_FILE_ID";case Status.InvalidAccountId:return"INVALID_ACCOUNT_ID";case Status.InvalidContractId:return"INVALID_CONTRACT_ID";case Status.InvalidTransactionId:return"INVALID_TRANSACTION_ID";case Status.ReceiptNotFound:return"RECEIPT_NOT_FOUND";case Status.RecordNotFound:return"RECORD_NOT_FOUND";case Status.InvalidSolidityId:return"INVALID_SOLIDITY_ID";case Status.Unknown:return"UNKNOWN";case Status.Success:return"SUCCESS";case Status.FailInvalid:return"FAIL_INVALID";case Status.FailFee:return"FAIL_FEE";case Status.FailBalance:return"FAIL_BALANCE";case Status.KeyRequired:return"KEY_REQUIRED";case Status.BadEncoding:return"BAD_ENCODING";case Status.InsufficientAccountBalance:return"INSUFFICIENT_ACCOUNT_BALANCE";case Status.InvalidSolidityAddress:return"INVALID_SOLIDITY_ADDRESS";case Status.InsufficientGas:return"INSUFFICIENT_GAS";case Status.ContractSizeLimitExceeded:return"CONTRACT_SIZE_LIMIT_EXCEEDED";case Status.LocalCallModificationException:return"LOCAL_CALL_MODIFICATION_EXCEPTION";case Status.ContractRevertExecuted:return"CONTRACT_REVERT_EXECUTED";case Status.ContractExecutionException:return"CONTRACT_EXECUTION_EXCEPTION";case Status.InvalidReceivingNodeAccount:return"INVALID_RECEIVING_NODE_ACCOUNT";case Status.MissingQueryHeader:return"MISSING_QUERY_HEADER";case Status.AccountUpdateFailed:return"ACCOUNT_UPDATE_FAILED";case Status.InvalidKeyEncoding:return"INVALID_KEY_ENCODING";case Status.NullSolidityAddress:return"NULL_SOLIDITY_ADDRESS";case Status.ContractUpdateFailed:return"CONTRACT_UPDATE_FAILED";case Status.InvalidQueryHeader:return"INVALID_QUERY_HEADER";case Status.InvalidFeeSubmitted:return"INVALID_FEE_SUBMITTED";case Status.InvalidPayerSignature:return"INVALID_PAYER_SIGNATURE";case Status.KeyNotProvided:return"KEY_NOT_PROVIDED";case Status.InvalidExpirationTime:return"INVALID_EXPIRATION_TIME";case Status.NoWaclKey:return"NO_WACL_KEY";case Status.FileContentEmpty:return"FILE_CONTENT_EMPTY";case Status.InvalidAccountAmounts:return"INVALID_ACCOUNT_AMOUNTS";case Status.EmptyTransactionBody:return"EMPTY_TRANSACTION_BODY";case Status.InvalidTransactionBody:return"INVALID_TRANSACTION_BODY";case Status.InvalidSignatureTypeMismatchingKey:return"INVALID_SIGNATURE_TYPE_MISMATCHING_KEY";case Status.InvalidSignatureCountMismatchingKey:return"INVALID_SIGNATURE_COUNT_MISMATCHING_KEY";case Status.EmptyLiveHashBody:return"EMPTY_LIVE_HASH_BODY";case Status.EmptyLiveHash:return"EMPTY_LIVE_HASH";case Status.EmptyLiveHashKeys:return"EMPTY_LIVE_HASH_KEYS";case Status.InvalidLiveHashSize:return"INVALID_LIVE_HASH_SIZE";case Status.EmptyQueryBody:return"EMPTY_QUERY_BODY";case Status.EmptyLiveHashQuery:return"EMPTY_LIVE_HASH_QUERY";case Status.LiveHashNotFound:return"LIVE_HASH_NOT_FOUND";case Status.AccountIdDoesNotExist:return"ACCOUNT_ID_DOES_NOT_EXIST";case Status.LiveHashAlreadyExists:return"LIVE_HASH_ALREADY_EXISTS";case Status.InvalidFileWacl:return"INVALID_FILE_WACL";case Status.SerializationFailed:return"SERIALIZATION_FAILED";case Status.TransactionOversize:return"TRANSACTION_OVERSIZE";case Status.TransactionTooManyLayers:return"TRANSACTION_TOO_MANY_LAYERS";case Status.ContractDeleted:return"CONTRACT_DELETED";case Status.PlatformNotActive:return"PLATFORM_NOT_ACTIVE";case Status.KeyPrefixMismatch:return"KEY_PREFIX_MISMATCH";case Status.PlatformTransactionNotCreated:return"PLATFORM_TRANSACTION_NOT_CREATED";case Status.InvalidRenewalPeriod:return"INVALID_RENEWAL_PERIOD";case Status.InvalidPayerAccountId:return"INVALID_PAYER_ACCOUNT_ID";case Status.AccountDeleted:return"ACCOUNT_DELETED";case Status.FileDeleted:return"FILE_DELETED";case Status.AccountRepeatedInAccountAmounts:return"ACCOUNT_REPEATED_IN_ACCOUNT_AMOUNTS";case Status.SettingNegativeAccountBalance:return"SETTING_NEGATIVE_ACCOUNT_BALANCE";case Status.ObtainerRequired:return"OBTAINER_REQUIRED";case Status.ObtainerSameContractId:return"OBTAINER_SAME_CONTRACT_ID";case Status.ObtainerDoesNotExist:return"OBTAINER_DOES_NOT_EXIST";case Status.ModifyingImmutableContract:return"MODIFYING_IMMUTABLE_CONTRACT";case Status.FileSystemException:return"FILE_SYSTEM_EXCEPTION";case Status.AutorenewDurationNotInRange:return"AUTORENEW_DURATION_NOT_IN_RANGE";case Status.ErrorDecodingBytestring:return"ERROR_DECODING_BYTESTRING";case Status.ContractFileEmpty:return"CONTRACT_FILE_EMPTY";case Status.ContractBytecodeEmpty:return"CONTRACT_BYTECODE_EMPTY";case Status.InvalidInitialBalance:return"INVALID_INITIAL_BALANCE";case Status.InvalidReceiveRecordThreshold:return"INVALID_RECEIVE_RECORD_THRESHOLD";case Status.InvalidSendRecordThreshold:return"INVALID_SEND_RECORD_THRESHOLD";case Status.AccountIsNotGenesisAccount:return"ACCOUNT_IS_NOT_GENESIS_ACCOUNT";case Status.PayerAccountUnauthorized:return"PAYER_ACCOUNT_UNAUTHORIZED";case Status.InvalidFreezeTransactionBody:return"INVALID_FREEZE_TRANSACTION_BODY";case Status.FreezeTransactionBodyNotFound:return"FREEZE_TRANSACTION_BODY_NOT_FOUND";case Status.TransferListSizeLimitExceeded:return"TRANSFER_LIST_SIZE_LIMIT_EXCEEDED";case Status.ResultSizeLimitExceeded:return"RESULT_SIZE_LIMIT_EXCEEDED";case Status.NotSpecialAccount:return"NOT_SPECIAL_ACCOUNT";case Status.ContractNegativeGas:return"CONTRACT_NEGATIVE_GAS";case Status.ContractNegativeValue:return"CONTRACT_NEGATIVE_VALUE";case Status.InvalidFeeFile:return"INVALID_FEE_FILE";case Status.InvalidExchangeRateFile:return"INVALID_EXCHANGE_RATE_FILE";case Status.InsufficientLocalCallGas:return"INSUFFICIENT_LOCAL_CALL_GAS";case Status.EntityNotAllowedToDelete:return"ENTITY_NOT_ALLOWED_TO_DELETE";case Status.AuthorizationFailed:return"AUTHORIZATION_FAILED";case Status.FileUploadedProtoInvalid:return"FILE_UPLOADED_PROTO_INVALID";case Status.FileUploadedProtoNotSavedToDisk:return"FILE_UPLOADED_PROTO_NOT_SAVED_TO_DISK";case Status.FeeScheduleFilePartUploaded:return"FEE_SCHEDULE_FILE_PART_UPLOADED";case Status.ExchangeRateChangeLimitExceeded:return"EXCHANGE_RATE_CHANGE_LIMIT_EXCEEDED";case Status.MaxContractStorageExceeded:return"MAX_CONTRACT_STORAGE_EXCEEDED";case Status.TransferAccountSameAsDeleteAccount:return"TRANSFER_ACCOUNT_SAME_AS_DELETE_ACCOUNT";case Status.TotalLedgerBalanceInvalid:return"TOTAL_LEDGER_BALANCE_INVALID";case Status.ExpirationReductionNotAllowed:return"EXPIRATION_REDUCTION_NOT_ALLOWED";case Status.MaxGasLimitExceeded:return"MAX_GAS_LIMIT_EXCEEDED";case Status.MaxFileSizeExceeded:return"MAX_FILE_SIZE_EXCEEDED";case Status.ReceiverSigRequired:return"RECEIVER_SIG_REQUIRED";case Status.InvalidTopicId:return"INVALID_TOPIC_ID";case Status.InvalidAdminKey:return"INVALID_ADMIN_KEY";case Status.InvalidSubmitKey:return"INVALID_SUBMIT_KEY";case Status.Unauthorized:return"UNAUTHORIZED";case Status.InvalidTopicMessage:return"INVALID_TOPIC_MESSAGE";case Status.InvalidAutorenewAccount:return"INVALID_AUTORENEW_ACCOUNT";case Status.AutorenewAccountNotAllowed:return"AUTORENEW_ACCOUNT_NOT_ALLOWED";case Status.TopicExpired:return"TOPIC_EXPIRED";case Status.InvalidChunkNumber:return"INVALID_CHUNK_NUMBER";case Status.InvalidChunkTransactionId:return"INVALID_CHUNK_TRANSACTION_ID";case Status.AccountFrozenForToken:return"ACCOUNT_FROZEN_FOR_TOKEN";case Status.TokensPerAccountLimitExceeded:return"TOKENS_PER_ACCOUNT_LIMIT_EXCEEDED";case Status.InvalidTokenId:return"INVALID_TOKEN_ID";case Status.InvalidTokenDecimals:return"INVALID_TOKEN_DECIMALS";case Status.InvalidTokenInitialSupply:return"INVALID_TOKEN_INITIAL_SUPPLY";case Status.InvalidTreasuryAccountForToken:return"INVALID_TREASURY_ACCOUNT_FOR_TOKEN";case Status.InvalidTokenSymbol:return"INVALID_TOKEN_SYMBOL";case Status.TokenHasNoFreezeKey:return"TOKEN_HAS_NO_FREEZE_KEY";case Status.TransfersNotZeroSumForToken:return"TRANSFERS_NOT_ZERO_SUM_FOR_TOKEN";case Status.MissingTokenSymbol:return"MISSING_TOKEN_SYMBOL";case Status.TokenSymbolTooLong:return"TOKEN_SYMBOL_TOO_LONG";case Status.AccountKycNotGrantedForToken:return"ACCOUNT_KYC_NOT_GRANTED_FOR_TOKEN";case Status.TokenHasNoKycKey:return"TOKEN_HAS_NO_KYC_KEY";case Status.InsufficientTokenBalance:return"INSUFFICIENT_TOKEN_BALANCE";case Status.TokenWasDeleted:return"TOKEN_WAS_DELETED";case Status.TokenHasNoSupplyKey:return"TOKEN_HAS_NO_SUPPLY_KEY";case Status.TokenHasNoWipeKey:return"TOKEN_HAS_NO_WIPE_KEY";case Status.InvalidTokenMintAmount:return"INVALID_TOKEN_MINT_AMOUNT";case Status.InvalidTokenBurnAmount:return"INVALID_TOKEN_BURN_AMOUNT";case Status.TokenNotAssociatedToAccount:return"TOKEN_NOT_ASSOCIATED_TO_ACCOUNT";case Status.CannotWipeTokenTreasuryAccount:return"CANNOT_WIPE_TOKEN_TREASURY_ACCOUNT";case Status.InvalidKycKey:return"INVALID_KYC_KEY";case Status.InvalidWipeKey:return"INVALID_WIPE_KEY";case Status.InvalidFreezeKey:return"INVALID_FREEZE_KEY";case Status.InvalidSupplyKey:return"INVALID_SUPPLY_KEY";case Status.MissingTokenName:return"MISSING_TOKEN_NAME";case Status.TokenNameTooLong:return"TOKEN_NAME_TOO_LONG";case Status.InvalidWipingAmount:return"INVALID_WIPING_AMOUNT";case Status.TokenIsImmutable:return"TOKEN_IS_IMMUTABLE";case Status.TokenAlreadyAssociatedToAccount:return"TOKEN_ALREADY_ASSOCIATED_TO_ACCOUNT";case Status.TransactionRequiresZeroTokenBalances:return"TRANSACTION_REQUIRES_ZERO_TOKEN_BALANCES";case Status.AccountIsTreasury:return"ACCOUNT_IS_TREASURY";case Status.TokenIdRepeatedInTokenList:return"TOKEN_ID_REPEATED_IN_TOKEN_LIST";case Status.TokenTransferListSizeLimitExceeded:return"TOKEN_TRANSFER_LIST_SIZE_LIMIT_EXCEEDED";case Status.EmptyTokenTransferBody:return"EMPTY_TOKEN_TRANSFER_BODY";case Status.EmptyTokenTransferAccountAmounts:return"EMPTY_TOKEN_TRANSFER_ACCOUNT_AMOUNTS";case Status.InvalidScheduleId:return"INVALID_SCHEDULE_ID";case Status.ScheduleIsImmutable:return"SCHEDULE_IS_IMMUTABLE";case Status.InvalidSchedulePayerId:return"INVALID_SCHEDULE_PAYER_ID";case Status.InvalidScheduleAccountId:return"INVALID_SCHEDULE_ACCOUNT_ID";case Status.NoNewValidSignatures:return"NO_NEW_VALID_SIGNATURES";case Status.UnresolvableRequiredSigners:return"UNRESOLVABLE_REQUIRED_SIGNERS";case Status.ScheduledTransactionNotInWhitelist:return"SCHEDULED_TRANSACTION_NOT_IN_WHITELIST";case Status.SomeSignaturesWereInvalid:return"SOME_SIGNATURES_WERE_INVALID";case Status.TransactionIdFieldNotAllowed:return"TRANSACTION_ID_FIELD_NOT_ALLOWED";case Status.IdenticalScheduleAlreadyCreated:return"IDENTICAL_SCHEDULE_ALREADY_CREATED";case Status.InvalidZeroByteInString:return"INVALID_ZERO_BYTE_IN_STRING";case Status.ScheduleAlreadyDeleted:return"SCHEDULE_ALREADY_DELETED";case Status.ScheduleAlreadyExecuted:return"SCHEDULE_ALREADY_EXECUTED";case Status.MessageSizeTooLarge:return"MESSAGE_SIZE_TOO_LARGE";case Status.OperationRepeatedInBucketGroups:return"OPERATION_REPEATED_IN_BUCKET_GROUPS";case Status.BucketCapacityOverflow:return"BUCKET_CAPACITY_OVERFLOW";case Status.NodeCapacityNotSufficientForOperation:return"NODE_CAPACITY_NOT_SUFFICIENT_FOR_OPERATION";case Status.BucketHasNoThrottleGroups:return"BUCKET_HAS_NO_THROTTLE_GROUPS";case Status.ThrottleGroupHasZeroOpsPerSec:return"THROTTLE_GROUP_HAS_ZERO_OPS_PER_SEC";case Status.SuccessButMissingExpectedOperation:return"SUCCESS_BUT_MISSING_EXPECTED_OPERATION";case Status.UnparseableThrottleDefinitions:return"UNPARSEABLE_THROTTLE_DEFINITIONS";case Status.InvalidThrottleDefinitions:return"INVALID_THROTTLE_DEFINITIONS";case Status.AccountExpiredAndPendingRemoval:return"ACCOUNT_EXPIRED_AND_PENDING_REMOVAL";case Status.InvalidTokenMaxSupply:return"INVALID_TOKEN_MAX_SUPPLY";case Status.InvalidTokenNftSerialNumber:return"INVALID_TOKEN_NFT_SERIAL_NUMBER";case Status.InvalidNftId:return"INVALID_NFT_ID";case Status.MetadataTooLong:return"METADATA_TOO_LONG";case Status.BatchSizeLimitExceeded:return"BATCH_SIZE_LIMIT_EXCEEDED";case Status.InvalidQueryRange:return"INVALID_QUERY_RANGE";case Status.FractionDividesByZero:return"FRACTION_DIVIDES_BY_ZERO";case Status.InsufficientPayerBalanceForCustomFee:return"INSUFFICIENT_PAYER_BALANCE_FOR_CUSTOM_FEE";case Status.CustomFeesListTooLong:return"CUSTOM_FEES_LIST_TOO_LONG";case Status.InvalidCustomFeeCollector:return"INVALID_CUSTOM_FEE_COLLECTOR";case Status.InvalidTokenIdInCustomFees:return"INVALID_TOKEN_ID_IN_CUSTOM_FEES";case Status.TokenNotAssociatedToFeeCollector:return"TOKEN_NOT_ASSOCIATED_TO_FEE_COLLECTOR";case Status.TokenMaxSupplyReached:return"TOKEN_MAX_SUPPLY_REACHED";case Status.SenderDoesNotOwnNftSerialNo:return"SENDER_DOES_NOT_OWN_NFT_SERIAL_NO";case Status.CustomFeeNotFullySpecified:return"CUSTOM_FEE_NOT_FULLY_SPECIFIED";case Status.CustomFeeMustBePositive:return"CUSTOM_FEE_MUST_BE_POSITIVE";case Status.TokenHasNoFeeScheduleKey:return"TOKEN_HAS_NO_FEE_SCHEDULE_KEY";case Status.CustomFeeOutsideNumericRange:return"CUSTOM_FEE_OUTSIDE_NUMERIC_RANGE";case Status.RoyaltyFractionCannotExceedOne:return"ROYALTY_FRACTION_CANNOT_EXCEED_ONE";case Status.FractionalFeeMaxAmountLessThanMinAmount:return"FRACTIONAL_FEE_MAX_AMOUNT_LESS_THAN_MIN_AMOUNT";case Status.CustomScheduleAlreadyHasNoFees:return"CUSTOM_SCHEDULE_ALREADY_HAS_NO_FEES";case Status.CustomFeeDenominationMustBeFungibleCommon:return"CUSTOM_FEE_DENOMINATION_MUST_BE_FUNGIBLE_COMMON";case Status.CustomFractionalFeeOnlyAllowedForFungibleCommon:return"CUSTOM_FRACTIONAL_FEE_ONLY_ALLOWED_FOR_FUNGIBLE_COMMON";case Status.InvalidCustomFeeScheduleKey:return"INVALID_CUSTOM_FEE_SCHEDULE_KEY";case Status.InvalidTokenMintMetadata:return"INVALID_TOKEN_MINT_METADATA";case Status.InvalidTokenBurnMetadata:return"INVALID_TOKEN_BURN_METADATA";case Status.CurrentTreasuryStillOwnsNfts:return"CURRENT_TREASURY_STILL_OWNS_NFTS";case Status.AccountStillOwnsNfts:return"ACCOUNT_STILL_OWNS_NFTS";case Status.TreasuryMustOwnBurnedNft:return"TREASURY_MUST_OWN_BURNED_NFT";case Status.AccountDoesNotOwnWipedNft:return"ACCOUNT_DOES_NOT_OWN_WIPED_NFT";case Status.AccountAmountTransfersOnlyAllowedForFungibleCommon:return"ACCOUNT_AMOUNT_TRANSFERS_ONLY_ALLOWED_FOR_FUNGIBLE_COMMON";case Status.MaxNftsInPriceRegimeHaveBeenMinted:return"MAX_NFTS_IN_PRICE_REGIME_HAVE_BEEN_MINTED";case Status.PayerAccountDeleted:return"PAYER_ACCOUNT_DELETED";case Status.CustomFeeChargingExceededMaxRecursionDepth:return"CUSTOM_FEE_CHARGING_EXCEEDED_MAX_RECURSION_DEPTH";case Status.CustomFeeChargingExceededMaxAccountAmounts:return"CUSTOM_FEE_CHARGING_EXCEEDED_MAX_ACCOUNT_AMOUNTS";case Status.InsufficientSenderAccountBalanceForCustomFee:return"INSUFFICIENT_SENDER_ACCOUNT_BALANCE_FOR_CUSTOM_FEE";case Status.SerialNumberLimitReached:return"SERIAL_NUMBER_LIMIT_REACHED";case Status.CustomRoyaltyFeeOnlyAllowedForNonFungibleUnique:return"CUSTOM_ROYALTY_FEE_ONLY_ALLOWED_FOR_NON_FUNGIBLE_UNIQUE";case Status.NoRemainingAutomaticAssociations:return"NO_REMAINING_AUTOMATIC_ASSOCIATIONS";case Status.ExistingAutomaticAssociationsExceedGivenLimit:return"EXISTING_AUTOMATIC_ASSOCIATIONS_EXCEED_GIVEN_LIMIT";case Status.RequestedNumAutomaticAssociationsExceedsAssociationLimit:return"REQUESTED_NUM_AUTOMATIC_ASSOCIATIONS_EXCEEDS_ASSOCIATION_LIMIT";case Status.TokenIsPaused:return"TOKEN_IS_PAUSED";case Status.TokenHasNoPauseKey:return"TOKEN_HAS_NO_PAUSE_KEY";case Status.InvalidPauseKey:return"INVALID_PAUSE_KEY";case Status.FreezeUpdateFileDoesNotExist:return"FREEZE_UPDATE_FILE_DOES_NOT_EXIST";case Status.FreezeUpdateFileHashDoesNotMatch:return"FREEZE_UPDATE_FILE_HASH_DOES_NOT_MATCH";case Status.NoUpgradeHasBeenPrepared:return"NO_UPGRADE_HAS_BEEN_PREPARED";case Status.NoFreezeIsScheduled:return"NO_FREEZE_IS_SCHEDULED";case Status.UpdateFileHashChangedSincePrepareUpgrade:return"UPDATE_FILE_HASH_CHANGED_SINCE_PREPARE_UPGRADE";case Status.FreezeStartTimeMustBeFuture:return"FREEZE_START_TIME_MUST_BE_FUTURE";case Status.PreparedUpdateFileIsImmutable:return"PREPARED_UPDATE_FILE_IS_IMMUTABLE";case Status.FreezeAlreadyScheduled:return"FREEZE_ALREADY_SCHEDULED";case Status.FreezeUpgradeInProgress:return"FREEZE_UPGRADE_IN_PROGRESS";case Status.UpdateFileIdDoesNotMatchPrepared:return"UPDATE_FILE_ID_DOES_NOT_MATCH_PREPARED";case Status.UpdateFileHashDoesNotMatchPrepared:return"UPDATE_FILE_HASH_DOES_NOT_MATCH_PREPARED";case Status.ConsensusGasExhausted:return"CONSENSUS_GAS_EXHAUSTED";case Status.RevertedSuccess:return"REVERTED_SUCCESS";case Status.MaxStorageInPriceRegimeHasBeenUsed:return"MAX_STORAGE_IN_PRICE_REGIME_HAS_BEEN_USED";case Status.InvalidAliasKey:return"INVALID_ALIAS_KEY";case Status.UnexpectedTokenDecimals:return"UNEXPECTED_TOKEN_DECIMALS";case Status.InvalidProxyAccountId:return"INVALID_PROXY_ACCOUNT_ID";case Status.InvalidTransferAccountId:return"INVALID_TRANSFER_ACCOUNT_ID";case Status.InvalidFeeCollectorAccountId:return"INVALID_FEE_COLLECTOR_ACCOUNT_ID";case Status.AliasIsImmutable:return"ALIAS_IS_IMMUTABLE";case Status.SpenderAccountSameAsOwner:return"SPENDER_ACCOUNT_SAME_AS_OWNER";case Status.AmountExceedsTokenMaxSupply:return"AMOUNT_EXCEEDS_TOKEN_MAX_SUPPLY";case Status.NegativeAllowanceAmount:return"NEGATIVE_ALLOWANCE_AMOUNT";case Status.CannotApproveForAllFungibleCommon:return"CANNOT_APPROVE_FOR_ALL_FUNGIBLE_COMMON";case Status.SpenderDoesNotHaveAllowance:return"SPENDER_DOES_NOT_HAVE_ALLOWANCE";case Status.AmountExceedsAllowance:return"AMOUNT_EXCEEDS_ALLOWANCE";case Status.MaxAllowancesExceeded:return"MAX_ALLOWANCES_EXCEEDED";case Status.EmptyAllowances:return"EMPTY_ALLOWANCES";case Status.SpenderAccountRepeatedInAllowances:return"SPENDER_ACCOUNT_REPEATED_IN_ALLOWANCES";case Status.RepeatedSerialNumsInNftAllowances:return"REPEATED_SERIAL_NUMS_IN_NFT_ALLOWANCES";case Status.FungibleTokenInNftAllowances:return"FUNGIBLE_TOKEN_IN_NFT_ALLOWANCES";case Status.NftInFungibleTokenAllowances:return"NFT_IN_FUNGIBLE_TOKEN_ALLOWANCES";case Status.InvalidAllowanceOwnerId:return"INVALID_ALLOWANCE_OWNER_ID";case Status.InvalidAllowanceSpenderId:return"INVALID_ALLOWANCE_SPENDER_ID";case Status.RepeatedAllowancesToDelete:return"REPEATED_ALLOWANCES_TO_DELETE";case Status.InvalidDelegatingSpender:return"INVALID_DELEGATING_SPENDER";case Status.DelegatingSpenderCannotGrantApproveForAll:return"DELEGATING_SPENDER_CANNOT_GRANT_APPROVE_FOR_ALL";case Status.DelegatingSpenderDoesNotHaveApproveForAll:return"DELEGATING_SPENDER_DOES_NOT_HAVE_APPROVE_FOR_ALL";case Status.ScheduleExpirationTimeTooFarInFuture:return"SCHEDULE_EXPIRATION_TIME_TOO_FAR_IN_FUTURE";case Status.ScheduleExpirationTimeMustBeHigherThanConsensusTime:return"SCHEDULE_EXPIRATION_TIME_MUST_BE_HIGHER_THAN_CONSENSUS_TIME";case Status.ScheduleFutureThrottleExceeded:return"SCHEDULE_FUTURE_THROTTLE_EXCEEDED";case Status.ScheduleFutureGasLimitExceeded:return"SCHEDULE_FUTURE_GAS_LIMIT_EXCEEDED";case Status.InvalidEthereumTransaction:return"INVALID_ETHEREUM_TRANSACTION";case Status.WrongChainId:return"WRONG_CHAIN_ID";case Status.WrongNonce:return"WRONG_NONCE";case Status.AccessListUnsupported:return"ACCESS_LIST_UNSUPPORTED";case Status.SchedulePendingExpiration:return"SCHEDULE_PENDING_EXPIRATION";case Status.ContractIsTokenTreasury:return"CONTRACT_IS_TOKEN_TREASURY";case Status.ContractHasNonZeroTokenBalances:return"CONTRACT_HAS_NON_ZERO_TOKEN_BALANCES";case Status.ContractExpiredAndPendingRemoval:return"CONTRACT_EXPIRED_AND_PENDING_REMOVAL";case Status.ContractHasNoAutoRenewAccount:return"CONTRACT_HAS_NO_AUTO_RENEW_ACCOUNT";case Status.PermanentRemovalRequiresSystemInitiation:return"PERMANENT_REMOVAL_REQUIRES_SYSTEM_INITIATION";case Status.ProxyAccountIdFieldIsDeprecated:return"PROXY_ACCOUNT_ID_FIELD_IS_DEPRECATED";case Status.SelfStakingIsNotAllowed:return"SELF_STAKING_IS_NOT_ALLOWED";case Status.InvalidStakingId:return"INVALID_STAKING_ID";case Status.StakingNotEnabled:return"STAKING_NOT_ENABLED";case Status.InvalidPrngRange:return"INVALID_PRNG_RANGE";case Status.MaxEntitiesInPriceRegimeHaveBeenCreated:return"MAX_ENTITIES_IN_PRICE_REGIME_HAVE_BEEN_CREATED";case Status.InvalidFullPrefixSignatureForPrecompile:return"INVALID_FULL_PREFIX_SIGNATURE_FOR_PRECOMPILE";case Status.InsufficientBalancesForStorageRent:return"INSUFFICIENT_BALANCES_FOR_STORAGE_RENT";case Status.MaxChildRecordsExceeded:return"MAX_CHILD_RECORDS_EXCEEDED";case Status.InsufficientBalancesForRenewalFees:return"INSUFFICIENT_BALANCES_FOR_RENEWAL_FEES";case Status.TransactionHasUnknownFields:return"TRANSACTION_HAS_UNKNOWN_FIELDS";case Status.AccountIsImmutable:return"ACCOUNT_IS_IMMUTABLE";case Status.AliasAlreadyAssigned:return"ALIAS_ALREADY_ASSIGNED";default:return`UNKNOWN (${this._code})`}}static _fromCode(e){switch(e){case 0:return Status.Ok;case 1:return Status.InvalidTransaction;case 2:return Status.PayerAccountNotFound;case 3:return Status.InvalidNodeAccount;case 4:return Status.TransactionExpired;case 5:return Status.InvalidTransactionStart;case 6:return Status.InvalidTransactionDuration;case 7:return Status.InvalidSignature;case 8:return Status.MemoTooLong;case 9:return Status.InsufficientTxFee;case 10:return Status.InsufficientPayerBalance;case 11:return Status.DuplicateTransaction;case 12:return Status.Busy;case 13:return Status.NotSupported;case 14:return Status.InvalidFileId;case 15:return Status.InvalidAccountId;case 16:return Status.InvalidContractId;case 17:return Status.InvalidTransactionId;case 18:return Status.ReceiptNotFound;case 19:return Status.RecordNotFound;case 20:return Status.InvalidSolidityId;case 21:return Status.Unknown;case 22:return Status.Success;case 23:return Status.FailInvalid;case 24:return Status.FailFee;case 25:return Status.FailBalance;case 26:return Status.KeyRequired;case 27:return Status.BadEncoding;case 28:return Status.InsufficientAccountBalance;case 29:return Status.InvalidSolidityAddress;case 30:return Status.InsufficientGas;case 31:return Status.ContractSizeLimitExceeded;case 32:return Status.LocalCallModificationException;case 33:return Status.ContractRevertExecuted;case 34:return Status.ContractExecutionException;case 35:return Status.InvalidReceivingNodeAccount;case 36:return Status.MissingQueryHeader;case 37:return Status.AccountUpdateFailed;case 38:return Status.InvalidKeyEncoding;case 39:return Status.NullSolidityAddress;case 40:return Status.ContractUpdateFailed;case 41:return Status.InvalidQueryHeader;case 42:return Status.InvalidFeeSubmitted;case 43:return Status.InvalidPayerSignature;case 44:return Status.KeyNotProvided;case 45:return Status.InvalidExpirationTime;case 46:return Status.NoWaclKey;case 47:return Status.FileContentEmpty;case 48:return Status.InvalidAccountAmounts;case 49:return Status.EmptyTransactionBody;case 50:return Status.InvalidTransactionBody;case 51:return Status.InvalidSignatureTypeMismatchingKey;case 52:return Status.InvalidSignatureCountMismatchingKey;case 53:return Status.EmptyLiveHashBody;case 54:return Status.EmptyLiveHash;case 55:return Status.EmptyLiveHashKeys;case 56:return Status.InvalidLiveHashSize;case 57:return Status.EmptyQueryBody;case 58:return Status.EmptyLiveHashQuery;case 59:return Status.LiveHashNotFound;case 60:return Status.AccountIdDoesNotExist;case 61:return Status.LiveHashAlreadyExists;case 62:return Status.InvalidFileWacl;case 63:return Status.SerializationFailed;case 64:return Status.TransactionOversize;case 65:return Status.TransactionTooManyLayers;case 66:return Status.ContractDeleted;case 67:return Status.PlatformNotActive;case 68:return Status.KeyPrefixMismatch;case 69:return Status.PlatformTransactionNotCreated;case 70:return Status.InvalidRenewalPeriod;case 71:return Status.InvalidPayerAccountId;case 72:return Status.AccountDeleted;case 73:return Status.FileDeleted;case 74:return Status.AccountRepeatedInAccountAmounts;case 75:return Status.SettingNegativeAccountBalance;case 76:return Status.ObtainerRequired;case 77:return Status.ObtainerSameContractId;case 78:return Status.ObtainerDoesNotExist;case 79:return Status.ModifyingImmutableContract;case 80:return Status.FileSystemException;case 81:return Status.AutorenewDurationNotInRange;case 82:return Status.ErrorDecodingBytestring;case 83:return Status.ContractFileEmpty;case 84:return Status.ContractBytecodeEmpty;case 85:return Status.InvalidInitialBalance;case 86:return Status.InvalidReceiveRecordThreshold;case 87:return Status.InvalidSendRecordThreshold;case 88:return Status.AccountIsNotGenesisAccount;case 89:return Status.PayerAccountUnauthorized;case 90:return Status.InvalidFreezeTransactionBody;case 91:return Status.FreezeTransactionBodyNotFound;case 92:return Status.TransferListSizeLimitExceeded;case 93:return Status.ResultSizeLimitExceeded;case 94:return Status.NotSpecialAccount;case 95:return Status.ContractNegativeGas;case 96:return Status.ContractNegativeValue;case 97:return Status.InvalidFeeFile;case 98:return Status.InvalidExchangeRateFile;case 99:return Status.InsufficientLocalCallGas;case 100:return Status.EntityNotAllowedToDelete;case 101:return Status.AuthorizationFailed;case 102:return Status.FileUploadedProtoInvalid;case 103:return Status.FileUploadedProtoNotSavedToDisk;case 104:return Status.FeeScheduleFilePartUploaded;case 105:return Status.ExchangeRateChangeLimitExceeded;case 106:return Status.MaxContractStorageExceeded;case 107:return Status.TransferAccountSameAsDeleteAccount;case 108:return Status.TotalLedgerBalanceInvalid;case 110:return Status.ExpirationReductionNotAllowed;case 111:return Status.MaxGasLimitExceeded;case 112:return Status.MaxFileSizeExceeded;case 113:return Status.ReceiverSigRequired;case 150:return Status.InvalidTopicId;case 155:return Status.InvalidAdminKey;case 156:return Status.InvalidSubmitKey;case 157:return Status.Unauthorized;case 158:return Status.InvalidTopicMessage;case 159:return Status.InvalidAutorenewAccount;case 160:return Status.AutorenewAccountNotAllowed;case 162:return Status.TopicExpired;case 163:return Status.InvalidChunkNumber;case 164:return Status.InvalidChunkTransactionId;case 165:return Status.AccountFrozenForToken;case 166:return Status.TokensPerAccountLimitExceeded;case 167:return Status.InvalidTokenId;case 168:return Status.InvalidTokenDecimals;case 169:return Status.InvalidTokenInitialSupply;case 170:return Status.InvalidTreasuryAccountForToken;case 171:return Status.InvalidTokenSymbol;case 172:return Status.TokenHasNoFreezeKey;case 173:return Status.TransfersNotZeroSumForToken;case 174:return Status.MissingTokenSymbol;case 175:return Status.TokenSymbolTooLong;case 176:return Status.AccountKycNotGrantedForToken;case 177:return Status.TokenHasNoKycKey;case 178:return Status.InsufficientTokenBalance;case 179:return Status.TokenWasDeleted;case 180:return Status.TokenHasNoSupplyKey;case 181:return Status.TokenHasNoWipeKey;case 182:return Status.InvalidTokenMintAmount;case 183:return Status.InvalidTokenBurnAmount;case 184:return Status.TokenNotAssociatedToAccount;case 185:return Status.CannotWipeTokenTreasuryAccount;case 186:return Status.InvalidKycKey;case 187:return Status.InvalidWipeKey;case 188:return Status.InvalidFreezeKey;case 189:return Status.InvalidSupplyKey;case 190:return Status.MissingTokenName;case 191:return Status.TokenNameTooLong;case 192:return Status.InvalidWipingAmount;case 193:return Status.TokenIsImmutable;case 194:return Status.TokenAlreadyAssociatedToAccount;case 195:return Status.TransactionRequiresZeroTokenBalances;case 196:return Status.AccountIsTreasury;case 197:return Status.TokenIdRepeatedInTokenList;case 198:return Status.TokenTransferListSizeLimitExceeded;case 199:return Status.EmptyTokenTransferBody;case 200:return Status.EmptyTokenTransferAccountAmounts;case 201:return Status.InvalidScheduleId;case 202:return Status.ScheduleIsImmutable;case 203:return Status.InvalidSchedulePayerId;case 204:return Status.InvalidScheduleAccountId;case 205:return Status.NoNewValidSignatures;case 206:return Status.UnresolvableRequiredSigners;case 207:return Status.ScheduledTransactionNotInWhitelist;case 208:return Status.SomeSignaturesWereInvalid;case 209:return Status.TransactionIdFieldNotAllowed;case 210:return Status.IdenticalScheduleAlreadyCreated;case 211:return Status.InvalidZeroByteInString;case 212:return Status.ScheduleAlreadyDeleted;case 213:return Status.ScheduleAlreadyExecuted;case 214:return Status.MessageSizeTooLarge;case 215:return Status.OperationRepeatedInBucketGroups;case 216:return Status.BucketCapacityOverflow;case 217:return Status.NodeCapacityNotSufficientForOperation;case 218:return Status.BucketHasNoThrottleGroups;case 219:return Status.ThrottleGroupHasZeroOpsPerSec;case 220:return Status.SuccessButMissingExpectedOperation;case 221:return Status.UnparseableThrottleDefinitions;case 222:return Status.InvalidThrottleDefinitions;case 223:return Status.AccountExpiredAndPendingRemoval;case 224:return Status.InvalidTokenMaxSupply;case 225:return Status.InvalidTokenNftSerialNumber;case 226:return Status.InvalidNftId;case 227:return Status.MetadataTooLong;case 228:return Status.BatchSizeLimitExceeded;case 229:return Status.InvalidQueryRange;case 230:return Status.FractionDividesByZero;case 231:return Status.InsufficientPayerBalanceForCustomFee;case 232:return Status.CustomFeesListTooLong;case 233:return Status.InvalidCustomFeeCollector;case 234:return Status.InvalidTokenIdInCustomFees;case 235:return Status.TokenNotAssociatedToFeeCollector;case 236:return Status.TokenMaxSupplyReached;case 237:return Status.SenderDoesNotOwnNftSerialNo;case 238:return Status.CustomFeeNotFullySpecified;case 239:return Status.CustomFeeMustBePositive;case 240:return Status.TokenHasNoFeeScheduleKey;case 241:return Status.CustomFeeOutsideNumericRange;case 242:return Status.RoyaltyFractionCannotExceedOne;case 243:return Status.FractionalFeeMaxAmountLessThanMinAmount;case 244:return Status.CustomScheduleAlreadyHasNoFees;case 245:return Status.CustomFeeDenominationMustBeFungibleCommon;case 246:return Status.CustomFractionalFeeOnlyAllowedForFungibleCommon;case 247:return Status.InvalidCustomFeeScheduleKey;case 248:return Status.InvalidTokenMintMetadata;case 249:return Status.InvalidTokenBurnMetadata;case 250:return Status.CurrentTreasuryStillOwnsNfts;case 251:return Status.AccountStillOwnsNfts;case 252:return Status.TreasuryMustOwnBurnedNft;case 253:return Status.AccountDoesNotOwnWipedNft;case 254:return Status.AccountAmountTransfersOnlyAllowedForFungibleCommon;case 255:return Status.MaxNftsInPriceRegimeHaveBeenMinted;case 256:return Status.PayerAccountDeleted;case 257:return Status.CustomFeeChargingExceededMaxRecursionDepth;case 258:return Status.CustomFeeChargingExceededMaxAccountAmounts;case 259:return Status.InsufficientSenderAccountBalanceForCustomFee;case 260:return Status.SerialNumberLimitReached;case 261:return Status.CustomRoyaltyFeeOnlyAllowedForNonFungibleUnique;case 262:return Status.NoRemainingAutomaticAssociations;case 263:return Status.ExistingAutomaticAssociationsExceedGivenLimit;case 264:return Status.RequestedNumAutomaticAssociationsExceedsAssociationLimit;case 265:return Status.TokenIsPaused;case 266:return Status.TokenHasNoPauseKey;case 267:return Status.InvalidPauseKey;case 268:return Status.FreezeUpdateFileDoesNotExist;case 269:return Status.FreezeUpdateFileHashDoesNotMatch;case 270:return Status.NoUpgradeHasBeenPrepared;case 271:return Status.NoFreezeIsScheduled;case 272:return Status.UpdateFileHashChangedSincePrepareUpgrade;case 273:return Status.FreezeStartTimeMustBeFuture;case 274:return Status.PreparedUpdateFileIsImmutable;case 275:return Status.FreezeAlreadyScheduled;case 276:return Status.FreezeUpgradeInProgress;case 277:return Status.UpdateFileIdDoesNotMatchPrepared;case 278:return Status.UpdateFileHashDoesNotMatchPrepared;case 279:return Status.ConsensusGasExhausted;case 280:return Status.RevertedSuccess;case 281:return Status.MaxStorageInPriceRegimeHasBeenUsed;case 282:return Status.InvalidAliasKey;case 283:return Status.UnexpectedTokenDecimals;case 284:return Status.InvalidProxyAccountId;case 285:return Status.InvalidTransferAccountId;case 286:return Status.InvalidFeeCollectorAccountId;case 287:return Status.AliasIsImmutable;case 288:return Status.SpenderAccountSameAsOwner;case 289:return Status.AmountExceedsTokenMaxSupply;case 290:return Status.NegativeAllowanceAmount;case 291:return Status.CannotApproveForAllFungibleCommon;case 292:return Status.SpenderDoesNotHaveAllowance;case 293:return Status.AmountExceedsAllowance;case 294:return Status.MaxAllowancesExceeded;case 295:return Status.EmptyAllowances;case 296:return Status.SpenderAccountRepeatedInAllowances;case 297:return Status.RepeatedSerialNumsInNftAllowances;case 298:return Status.FungibleTokenInNftAllowances;case 299:return Status.NftInFungibleTokenAllowances;case 300:return Status.InvalidAllowanceOwnerId;case 301:return Status.InvalidAllowanceSpenderId;case 302:return Status.RepeatedAllowancesToDelete;case 303:return Status.InvalidDelegatingSpender;case 304:return Status.DelegatingSpenderCannotGrantApproveForAll;case 305:return Status.DelegatingSpenderDoesNotHaveApproveForAll;case 306:return Status.ScheduleExpirationTimeTooFarInFuture;case 307:return Status.ScheduleExpirationTimeMustBeHigherThanConsensusTime;case 308:return Status.ScheduleFutureThrottleExceeded;case 309:return Status.ScheduleFutureGasLimitExceeded;case 310:return Status.InvalidEthereumTransaction;case 311:return Status.WrongChainId;case 312:return Status.WrongNonce;case 313:return Status.AccessListUnsupported;case 314:return Status.SchedulePendingExpiration;case 315:return Status.ContractIsTokenTreasury;case 316:return Status.ContractHasNonZeroTokenBalances;case 317:return Status.ContractExpiredAndPendingRemoval;case 318:return Status.ContractHasNoAutoRenewAccount;case 319:return Status.PermanentRemovalRequiresSystemInitiation;case 320:return Status.ProxyAccountIdFieldIsDeprecated;case 321:return Status.SelfStakingIsNotAllowed;case 322:return Status.InvalidStakingId;case 323:return Status.StakingNotEnabled;case 324:return Status.InvalidPrngRange;case 325:return Status.MaxEntitiesInPriceRegimeHaveBeenCreated;case 326:return Status.InvalidFullPrefixSignatureForPrecompile;case 327:return Status.InsufficientBalancesForStorageRent;case 328:return Status.MaxChildRecordsExceeded;case 329:return Status.InsufficientBalancesForRenewalFees;case 330:return Status.TransactionHasUnknownFields;case 331:return Status.AccountIsImmutable;case 332:return Status.AliasAlreadyAssigned;default:throw new Error(`(BUG) Status.fromCode() does not handle code: ${e}`)}}valueOf(){return this._code}}Status.Ok=new Status(0);Status.InvalidTransaction=new Status(1);Status.PayerAccountNotFound=new Status(2);Status.InvalidNodeAccount=new Status(3);Status.TransactionExpired=new Status(4);Status.InvalidTransactionStart=new Status(5);Status.InvalidTransactionDuration=new Status(6);Status.InvalidSignature=new Status(7);Status.MemoTooLong=new Status(8);Status.InsufficientTxFee=new Status(9);Status.InsufficientPayerBalance=new Status(10);Status.DuplicateTransaction=new Status(11);Status.Busy=new Status(12);Status.NotSupported=new Status(13);Status.InvalidFileId=new Status(14);Status.InvalidAccountId=new Status(15);Status.InvalidContractId=new Status(16);Status.InvalidTransactionId=new Status(17);Status.ReceiptNotFound=new Status(18);Status.RecordNotFound=new Status(19);Status.InvalidSolidityId=new Status(20);Status.Unknown=new Status(21);Status.Success=new Status(22);Status.FailInvalid=new Status(23);Status.FailFee=new Status(24);Status.FailBalance=new Status(25);Status.KeyRequired=new Status(26);Status.BadEncoding=new Status(27);Status.InsufficientAccountBalance=new Status(28);Status.InvalidSolidityAddress=new Status(29);Status.InsufficientGas=new Status(30);Status.ContractSizeLimitExceeded=new Status(31);Status.LocalCallModificationException=new Status(32);Status.ContractRevertExecuted=new Status(33);Status.ContractExecutionException=new Status(34);Status.InvalidReceivingNodeAccount=new Status(35);Status.MissingQueryHeader=new Status(36);Status.AccountUpdateFailed=new Status(37);Status.InvalidKeyEncoding=new Status(38);Status.NullSolidityAddress=new Status(39);Status.ContractUpdateFailed=new Status(40);Status.InvalidQueryHeader=new Status(41);Status.InvalidFeeSubmitted=new Status(42);Status.InvalidPayerSignature=new Status(43);Status.KeyNotProvided=new Status(44);Status.InvalidExpirationTime=new Status(45);Status.NoWaclKey=new Status(46);Status.FileContentEmpty=new Status(47);Status.InvalidAccountAmounts=new Status(48);Status.EmptyTransactionBody=new Status(49);Status.InvalidTransactionBody=new Status(50);Status.InvalidSignatureTypeMismatchingKey=new Status(51);Status.InvalidSignatureCountMismatchingKey=new Status(52);Status.EmptyLiveHashBody=new Status(53);Status.EmptyLiveHash=new Status(54);Status.EmptyLiveHashKeys=new Status(55);Status.InvalidLiveHashSize=new Status(56);Status.EmptyQueryBody=new Status(57);Status.EmptyLiveHashQuery=new Status(58);Status.LiveHashNotFound=new Status(59);Status.AccountIdDoesNotExist=new Status(60);Status.LiveHashAlreadyExists=new Status(61);Status.InvalidFileWacl=new Status(62);Status.SerializationFailed=new Status(63);Status.TransactionOversize=new Status(64);Status.TransactionTooManyLayers=new Status(65);Status.ContractDeleted=new Status(66);Status.PlatformNotActive=new Status(67);Status.KeyPrefixMismatch=new Status(68);Status.PlatformTransactionNotCreated=new Status(69);Status.InvalidRenewalPeriod=new Status(70);Status.InvalidPayerAccountId=new Status(71);Status.AccountDeleted=new Status(72);Status.FileDeleted=new Status(73);Status.AccountRepeatedInAccountAmounts=new Status(74);Status.SettingNegativeAccountBalance=new Status(75);Status.ObtainerRequired=new Status(76);Status.ObtainerSameContractId=new Status(77);Status.ObtainerDoesNotExist=new Status(78);Status.ModifyingImmutableContract=new Status(79);Status.FileSystemException=new Status(80);Status.AutorenewDurationNotInRange=new Status(81);Status.ErrorDecodingBytestring=new Status(82);Status.ContractFileEmpty=new Status(83);Status.ContractBytecodeEmpty=new Status(84);Status.InvalidInitialBalance=new Status(85);Status.InvalidReceiveRecordThreshold=new Status(86);Status.InvalidSendRecordThreshold=new Status(87);Status.AccountIsNotGenesisAccount=new Status(88);Status.PayerAccountUnauthorized=new Status(89);Status.InvalidFreezeTransactionBody=new Status(90);Status.FreezeTransactionBodyNotFound=new Status(91);Status.TransferListSizeLimitExceeded=new Status(92);Status.ResultSizeLimitExceeded=new Status(93);Status.NotSpecialAccount=new Status(94);Status.ContractNegativeGas=new Status(95);Status.ContractNegativeValue=new Status(96);Status.InvalidFeeFile=new Status(97);Status.InvalidExchangeRateFile=new Status(98);Status.InsufficientLocalCallGas=new Status(99);Status.EntityNotAllowedToDelete=new Status(100);Status.AuthorizationFailed=new Status(101);Status.FileUploadedProtoInvalid=new Status(102);Status.FileUploadedProtoNotSavedToDisk=new Status(103);Status.FeeScheduleFilePartUploaded=new Status(104);Status.ExchangeRateChangeLimitExceeded=new Status(105);Status.MaxContractStorageExceeded=new Status(106);Status.TransferAccountSameAsDeleteAccount=new Status(107);Status.TotalLedgerBalanceInvalid=new Status(108);Status.ExpirationReductionNotAllowed=new Status(110);Status.MaxGasLimitExceeded=new Status(111);Status.MaxFileSizeExceeded=new Status(112);Status.ReceiverSigRequired=new Status(113);Status.InvalidTopicId=new Status(150);Status.InvalidAdminKey=new Status(155);Status.InvalidSubmitKey=new Status(156);Status.Unauthorized=new Status(157);Status.InvalidTopicMessage=new Status(158);Status.InvalidAutorenewAccount=new Status(159);Status.AutorenewAccountNotAllowed=new Status(160);Status.TopicExpired=new Status(162);Status.InvalidChunkNumber=new Status(163);Status.InvalidChunkTransactionId=new Status(164);Status.AccountFrozenForToken=new Status(165);Status.TokensPerAccountLimitExceeded=new Status(166);Status.InvalidTokenId=new Status(167);Status.InvalidTokenDecimals=new Status(168);Status.InvalidTokenInitialSupply=new Status(169);Status.InvalidTreasuryAccountForToken=new Status(170);Status.InvalidTokenSymbol=new Status(171);Status.TokenHasNoFreezeKey=new Status(172);Status.TransfersNotZeroSumForToken=new Status(173);Status.MissingTokenSymbol=new Status(174);Status.TokenSymbolTooLong=new Status(175);Status.AccountKycNotGrantedForToken=new Status(176);Status.TokenHasNoKycKey=new Status(177);Status.InsufficientTokenBalance=new Status(178);Status.TokenWasDeleted=new Status(179);Status.TokenHasNoSupplyKey=new Status(180);Status.TokenHasNoWipeKey=new Status(181);Status.InvalidTokenMintAmount=new Status(182);Status.InvalidTokenBurnAmount=new Status(183);Status.TokenNotAssociatedToAccount=new Status(184);Status.CannotWipeTokenTreasuryAccount=new Status(185);Status.InvalidKycKey=new Status(186);Status.InvalidWipeKey=new Status(187);Status.InvalidFreezeKey=new Status(188);Status.InvalidSupplyKey=new Status(189);Status.MissingTokenName=new Status(190);Status.TokenNameTooLong=new Status(191);Status.InvalidWipingAmount=new Status(192);Status.TokenIsImmutable=new Status(193);Status.TokenAlreadyAssociatedToAccount=new Status(194);Status.TransactionRequiresZeroTokenBalances=new Status(195);Status.AccountIsTreasury=new Status(196);Status.TokenIdRepeatedInTokenList=new Status(197);Status.TokenTransferListSizeLimitExceeded=new Status(198);Status.EmptyTokenTransferBody=new Status(199);Status.EmptyTokenTransferAccountAmounts=new Status(200);Status.InvalidScheduleId=new Status(201);Status.ScheduleIsImmutable=new Status(202);Status.InvalidSchedulePayerId=new Status(203);Status.InvalidScheduleAccountId=new Status(204);Status.NoNewValidSignatures=new Status(205);Status.UnresolvableRequiredSigners=new Status(206);Status.ScheduledTransactionNotInWhitelist=new Status(207);Status.SomeSignaturesWereInvalid=new Status(208);Status.TransactionIdFieldNotAllowed=new Status(209);Status.IdenticalScheduleAlreadyCreated=new Status(210);Status.InvalidZeroByteInString=new Status(211);Status.ScheduleAlreadyDeleted=new Status(212);Status.ScheduleAlreadyExecuted=new Status(213);Status.MessageSizeTooLarge=new Status(214);Status.OperationRepeatedInBucketGroups=new Status(215);Status.BucketCapacityOverflow=new Status(216);Status.NodeCapacityNotSufficientForOperation=new Status(217);Status.BucketHasNoThrottleGroups=new Status(218);Status.ThrottleGroupHasZeroOpsPerSec=new Status(219);Status.SuccessButMissingExpectedOperation=new Status(220);Status.UnparseableThrottleDefinitions=new Status(221);Status.InvalidThrottleDefinitions=new Status(222);Status.AccountExpiredAndPendingRemoval=new Status(223);Status.InvalidTokenMaxSupply=new Status(224);Status.InvalidTokenNftSerialNumber=new Status(225);Status.InvalidNftId=new Status(226);Status.MetadataTooLong=new Status(227);Status.BatchSizeLimitExceeded=new Status(228);Status.InvalidQueryRange=new Status(229);Status.FractionDividesByZero=new Status(230);Status.InsufficientPayerBalanceForCustomFee=new Status(231);Status.CustomFeesListTooLong=new Status(232);Status.InvalidCustomFeeCollector=new Status(233);Status.InvalidTokenIdInCustomFees=new Status(234);Status.TokenNotAssociatedToFeeCollector=new Status(235);Status.TokenMaxSupplyReached=new Status(236);Status.SenderDoesNotOwnNftSerialNo=new Status(237);Status.CustomFeeNotFullySpecified=new Status(238);Status.CustomFeeMustBePositive=new Status(239);Status.TokenHasNoFeeScheduleKey=new Status(240);Status.CustomFeeOutsideNumericRange=new Status(241);Status.RoyaltyFractionCannotExceedOne=new Status(242);Status.FractionalFeeMaxAmountLessThanMinAmount=new Status(243);Status.CustomScheduleAlreadyHasNoFees=new Status(244);Status.CustomFeeDenominationMustBeFungibleCommon=new Status(245);Status.CustomFractionalFeeOnlyAllowedForFungibleCommon=new Status(246);Status.InvalidCustomFeeScheduleKey=new Status(247);Status.InvalidTokenMintMetadata=new Status(248);Status.InvalidTokenBurnMetadata=new Status(249);Status.CurrentTreasuryStillOwnsNfts=new Status(250);Status.AccountStillOwnsNfts=new Status(251);Status.TreasuryMustOwnBurnedNft=new Status(252);Status.AccountDoesNotOwnWipedNft=new Status(253);Status.AccountAmountTransfersOnlyAllowedForFungibleCommon=new Status(254);Status.MaxNftsInPriceRegimeHaveBeenMinted=new Status(255);Status.PayerAccountDeleted=new Status(256);Status.CustomFeeChargingExceededMaxRecursionDepth=new Status(257);Status.CustomFeeChargingExceededMaxAccountAmounts=new Status(258);Status.InsufficientSenderAccountBalanceForCustomFee=new Status(259);Status.SerialNumberLimitReached=new Status(260);Status.CustomRoyaltyFeeOnlyAllowedForNonFungibleUnique=new Status(261);Status.NoRemainingAutomaticAssociations=new Status(262);Status.ExistingAutomaticAssociationsExceedGivenLimit=new Status(263);Status.RequestedNumAutomaticAssociationsExceedsAssociationLimit=new Status(264);Status.TokenIsPaused=new Status(265);Status.TokenHasNoPauseKey=new Status(266);Status.InvalidPauseKey=new Status(267);Status.FreezeUpdateFileDoesNotExist=new Status(268);Status.FreezeUpdateFileHashDoesNotMatch=new Status(269);Status.NoUpgradeHasBeenPrepared=new Status(270);Status.NoFreezeIsScheduled=new Status(271);Status.UpdateFileHashChangedSincePrepareUpgrade=new Status(272);Status.FreezeStartTimeMustBeFuture=new Status(273);Status.PreparedUpdateFileIsImmutable=new Status(274);Status.FreezeAlreadyScheduled=new Status(275);Status.FreezeUpgradeInProgress=new Status(276);Status.UpdateFileIdDoesNotMatchPrepared=new Status(277);Status.UpdateFileHashDoesNotMatchPrepared=new Status(278);Status.ConsensusGasExhausted=new Status(279);Status.RevertedSuccess=new Status(280);Status.MaxStorageInPriceRegimeHasBeenUsed=new Status(281);Status.InvalidAliasKey=new Status(282);Status.UnexpectedTokenDecimals=new Status(283);Status.InvalidProxyAccountId=new Status(284);Status.InvalidTransferAccountId=new Status(285);Status.InvalidFeeCollectorAccountId=new Status(286);Status.AliasIsImmutable=new Status(287);Status.SpenderAccountSameAsOwner=new Status(288);Status.AmountExceedsTokenMaxSupply=new Status(289);Status.NegativeAllowanceAmount=new Status(290);Status.CannotApproveForAllFungibleCommon=new Status(291);Status.SpenderDoesNotHaveAllowance=new Status(292);Status.AmountExceedsAllowance=new Status(293);Status.MaxAllowancesExceeded=new Status(294);Status.EmptyAllowances=new Status(295);Status.SpenderAccountRepeatedInAllowances=new Status(296);Status.RepeatedSerialNumsInNftAllowances=new Status(297);Status.FungibleTokenInNftAllowances=new Status(298);Status.NftInFungibleTokenAllowances=new Status(299);Status.InvalidAllowanceOwnerId=new Status(300);Status.InvalidAllowanceSpenderId=new Status(301);Status.RepeatedAllowancesToDelete=new Status(302);Status.InvalidDelegatingSpender=new Status(303);Status.DelegatingSpenderCannotGrantApproveForAll=new Status(304);Status.DelegatingSpenderDoesNotHaveApproveForAll=new Status(305);Status.ScheduleExpirationTimeTooFarInFuture=new Status(306);Status.ScheduleExpirationTimeMustBeHigherThanConsensusTime=new Status(307);Status.ScheduleFutureThrottleExceeded=new Status(308);Status.ScheduleFutureGasLimitExceeded=new Status(309);Status.InvalidEthereumTransaction=new Status(310);Status.WrongChainId=new Status(311);Status.WrongNonce=new Status(312);Status.AccessListUnsupported=new Status(313);Status.SchedulePendingExpiration=new Status(314);Status.ContractIsTokenTreasury=new Status(315);Status.ContractHasNonZeroTokenBalances=new Status(316);Status.ContractExpiredAndPendingRemoval=new Status(317);Status.ContractHasNoAutoRenewAccount=new Status(318);Status.PermanentRemovalRequiresSystemInitiation=new Status(319);Status.ProxyAccountIdFieldIsDeprecated=new Status(320);Status.SelfStakingIsNotAllowed=new Status(321);Status.InvalidStakingId=new Status(322);Status.StakingNotEnabled=new Status(323);Status.InvalidPrngRange=new Status(324);Status.MaxEntitiesInPriceRegimeHaveBeenCreated=new Status(325);Status.InvalidFullPrefixSignatureForPrecompile=new Status(326);Status.InsufficientBalancesForStorageRent=new Status(327);Status.MaxChildRecordsExceeded=new Status(328);Status.InsufficientBalancesForRenewalFees=new Status(329);Status.TransactionHasUnknownFields=new Status(330);Status.AccountIsImmutable=new Status(331);Status.AliasAlreadyAssigned=new Status(332);var lib={},proto$7={};(function(n){var e=o(minimal);Object.defineProperty(n,"__esModule",{value:!0}),n.proto=n.google=n.default=n.com=void 0;function t(_){if(typeof WeakMap!="function")return null;var p=new WeakMap,a=new WeakMap;return(t=function(u){return u?a:p})(_)}function o(_,p){if(!p&&_&&_.__esModule)return _;if(_===null||typeof _!="object"&&typeof _!="function")return{default:_};var a=t(p);if(a&&a.has(_))return a.get(_);var u={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in _)if(b!="default"&&Object.prototype.hasOwnProperty.call(_,b)){var w=y?Object.getOwnPropertyDescriptor(_,b):null;w&&(w.get||w.set)?Object.defineProperty(u,b,w):u[b]=_[b]}return u.default=_,a&&a.set(_,u),u}const c=e.Reader,l=e.Writer,h=e.util,d=e.roots.hashgraph||(e.roots.hashgraph={});n.default=d;const g=d.com=(()=>({hedera:function(){return{mirror:function(){return{api:function(){return{proto:function(){return{ConsensusTopicQuery:function(){function b(w){if(w)for(var T=Object.keys(w),B=0;B<T.length;++B)w[T[B]]!=null&&(this[T[B]]=w[T[B]])}return b.prototype.topicID=null,b.prototype.consensusStartTime=null,b.prototype.consensusEndTime=null,b.prototype.limit=h.Long?h.Long.fromBits(0,0,!0):0,b.create=function(w){return new b(w)},b.encode=function(w,T){return T||(T=l.create()),w.topicID!=null&&Object.hasOwnProperty.call(w,"topicID")&&d.proto.TopicID.encode(w.topicID,T.uint32(10).fork()).ldelim(),w.consensusStartTime!=null&&Object.hasOwnProperty.call(w,"consensusStartTime")&&d.proto.Timestamp.encode(w.consensusStartTime,T.uint32(18).fork()).ldelim(),w.consensusEndTime!=null&&Object.hasOwnProperty.call(w,"consensusEndTime")&&d.proto.Timestamp.encode(w.consensusEndTime,T.uint32(26).fork()).ldelim(),w.limit!=null&&Object.hasOwnProperty.call(w,"limit")&&T.uint32(32).uint64(w.limit),T},b.decode=function(w,T){w instanceof c||(w=c.create(w));for(var B=T===void 0?w.len:w.pos+T,H=new d.com.hedera.mirror.api.proto.ConsensusTopicQuery,J;w.pos<B;)switch(J=w.uint32(),J>>>3){case 1:{H.topicID=d.proto.TopicID.decode(w,w.uint32());break}case 2:{H.consensusStartTime=d.proto.Timestamp.decode(w,w.uint32());break}case 3:{H.consensusEndTime=d.proto.Timestamp.decode(w,w.uint32());break}case 4:{H.limit=w.uint64();break}default:w.skipType(7&J)}return H},b.getTypeUrl=function(w){return w===void 0&&(w="type.googleapis.com"),w+"/com.hedera.mirror.api.proto.ConsensusTopicQuery"},b}(),ConsensusTopicResponse:function(){function b(w){if(w)for(var T=Object.keys(w),B=0;B<T.length;++B)w[T[B]]!=null&&(this[T[B]]=w[T[B]])}return b.prototype.consensusTimestamp=null,b.prototype.message=h.newBuffer([]),b.prototype.runningHash=h.newBuffer([]),b.prototype.sequenceNumber=h.Long?h.Long.fromBits(0,0,!0):0,b.prototype.runningHashVersion=h.Long?h.Long.fromBits(0,0,!0):0,b.prototype.chunkInfo=null,b.create=function(w){return new b(w)},b.encode=function(w,T){return T||(T=l.create()),w.consensusTimestamp!=null&&Object.hasOwnProperty.call(w,"consensusTimestamp")&&d.proto.Timestamp.encode(w.consensusTimestamp,T.uint32(10).fork()).ldelim(),w.message!=null&&Object.hasOwnProperty.call(w,"message")&&T.uint32(18).bytes(w.message),w.runningHash!=null&&Object.hasOwnProperty.call(w,"runningHash")&&T.uint32(26).bytes(w.runningHash),w.sequenceNumber!=null&&Object.hasOwnProperty.call(w,"sequenceNumber")&&T.uint32(32).uint64(w.sequenceNumber),w.runningHashVersion!=null&&Object.hasOwnProperty.call(w,"runningHashVersion")&&T.uint32(40).uint64(w.runningHashVersion),w.chunkInfo!=null&&Object.hasOwnProperty.call(w,"chunkInfo")&&d.proto.ConsensusMessageChunkInfo.encode(w.chunkInfo,T.uint32(50).fork()).ldelim(),T},b.decode=function(w,T){w instanceof c||(w=c.create(w));for(var B=T===void 0?w.len:w.pos+T,H=new d.com.hedera.mirror.api.proto.ConsensusTopicResponse,J;w.pos<B;)switch(J=w.uint32(),J>>>3){case 1:{H.consensusTimestamp=d.proto.Timestamp.decode(w,w.uint32());break}case 2:{H.message=w.bytes();break}case 3:{H.runningHash=w.bytes();break}case 4:{H.sequenceNumber=w.uint64();break}case 5:{H.runningHashVersion=w.uint64();break}case 6:{H.chunkInfo=d.proto.ConsensusMessageChunkInfo.decode(w,w.uint32());break}default:w.skipType(7&J)}return H},b.getTypeUrl=function(w){return w===void 0&&(w="type.googleapis.com"),w+"/com.hedera.mirror.api.proto.ConsensusTopicResponse"},b}(),ConsensusService:function(){function b(w,T,B){e.rpc.Service.call(this,w,T,B)}return(b.prototype=Object.create(e.rpc.Service.prototype)).constructor=b,b.create=function(w,T,B){return new this(w,T,B)},Object.defineProperty(b.prototype.subscribeTopic=function w(T,B){return this.rpcCall(w,d.com.hedera.mirror.api.proto.ConsensusTopicQuery,d.com.hedera.mirror.api.proto.ConsensusTopicResponse,T,B)},"name",{value:"subscribeTopic"}),b}(),AddressBookQuery:function(){function b(w){if(w)for(var T=Object.keys(w),B=0;B<T.length;++B)w[T[B]]!=null&&(this[T[B]]=w[T[B]])}return b.prototype.fileId=null,b.prototype.limit=0,b.create=function(w){return new b(w)},b.encode=function(w,T){return T||(T=l.create()),w.fileId!=null&&Object.hasOwnProperty.call(w,"fileId")&&d.proto.FileID.encode(w.fileId,T.uint32(10).fork()).ldelim(),w.limit!=null&&Object.hasOwnProperty.call(w,"limit")&&T.uint32(16).int32(w.limit),T},b.decode=function(w,T){w instanceof c||(w=c.create(w));for(var B=T===void 0?w.len:w.pos+T,H=new d.com.hedera.mirror.api.proto.AddressBookQuery,J;w.pos<B;)switch(J=w.uint32(),J>>>3){case 1:{H.fileId=d.proto.FileID.decode(w,w.uint32());break}case 2:{H.limit=w.int32();break}default:w.skipType(7&J)}return H},b.getTypeUrl=function(w){return w===void 0&&(w="type.googleapis.com"),w+"/com.hedera.mirror.api.proto.AddressBookQuery"},b}(),NetworkService:function(){function b(w,T,B){e.rpc.Service.call(this,w,T,B)}return(b.prototype=Object.create(e.rpc.Service.prototype)).constructor=b,b.create=function(w,T,B){return new this(w,T,B)},Object.defineProperty(b.prototype.getNodes=function w(T,B){return this.rpcCall(w,d.com.hedera.mirror.api.proto.AddressBookQuery,d.proto.NodeAddress,T,B)},"name",{value:"getNodes"}),b}()}}()}}()}}()}}()}))();n.com=g;const m=d.proto=(()=>({TransactionList:function(){function p(a){if(this.transactionList=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.transactionList=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.transactionList!=null&&a.transactionList.length)for(var y=0;y<a.transactionList.length;++y)d.proto.Transaction.encode(a.transactionList[y],u.uint32(10).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransactionList,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.transactionList&&b.transactionList.length||(b.transactionList=[]),b.transactionList.push(d.proto.Transaction.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransactionList"},p}(),ShardID:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.shardNum=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.shardNum!=null&&Object.hasOwnProperty.call(a,"shardNum")&&u.uint32(8).int64(a.shardNum),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ShardID,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.shardNum=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ShardID"},p}(),RealmID:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.shardNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.realmNum=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.shardNum!=null&&Object.hasOwnProperty.call(a,"shardNum")&&u.uint32(8).int64(a.shardNum),a.realmNum!=null&&Object.hasOwnProperty.call(a,"realmNum")&&u.uint32(16).int64(a.realmNum),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.RealmID,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.shardNum=a.int64();break}case 2:{b.realmNum=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.RealmID"},p}(),AccountID:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.shardNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.realmNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.accountNum=null,p.prototype.alias=null;let a;return Object.defineProperty(p.prototype,"account",{get:h.oneOfGetter(a=["accountNum","alias"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.shardNum!=null&&Object.hasOwnProperty.call(u,"shardNum")&&y.uint32(8).int64(u.shardNum),u.realmNum!=null&&Object.hasOwnProperty.call(u,"realmNum")&&y.uint32(16).int64(u.realmNum),u.accountNum!=null&&Object.hasOwnProperty.call(u,"accountNum")&&y.uint32(24).int64(u.accountNum),u.alias!=null&&Object.hasOwnProperty.call(u,"alias")&&y.uint32(34).bytes(u.alias),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.AccountID,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.shardNum=u.int64();break}case 2:{w.realmNum=u.int64();break}case 3:{w.accountNum=u.int64();break}case 4:{w.alias=u.bytes();break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.AccountID"},p}(),FileID:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.shardNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.realmNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.fileNum=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.shardNum!=null&&Object.hasOwnProperty.call(a,"shardNum")&&u.uint32(8).int64(a.shardNum),a.realmNum!=null&&Object.hasOwnProperty.call(a,"realmNum")&&u.uint32(16).int64(a.realmNum),a.fileNum!=null&&Object.hasOwnProperty.call(a,"fileNum")&&u.uint32(24).int64(a.fileNum),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FileID,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.shardNum=a.int64();break}case 2:{b.realmNum=a.int64();break}case 3:{b.fileNum=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FileID"},p}(),ContractID:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.shardNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.realmNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.contractNum=null,p.prototype.evmAddress=null;let a;return Object.defineProperty(p.prototype,"contract",{get:h.oneOfGetter(a=["contractNum","evmAddress"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.shardNum!=null&&Object.hasOwnProperty.call(u,"shardNum")&&y.uint32(8).int64(u.shardNum),u.realmNum!=null&&Object.hasOwnProperty.call(u,"realmNum")&&y.uint32(16).int64(u.realmNum),u.contractNum!=null&&Object.hasOwnProperty.call(u,"contractNum")&&y.uint32(24).int64(u.contractNum),u.evmAddress!=null&&Object.hasOwnProperty.call(u,"evmAddress")&&y.uint32(34).bytes(u.evmAddress),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.ContractID,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.shardNum=u.int64();break}case 2:{w.realmNum=u.int64();break}case 3:{w.contractNum=u.int64();break}case 4:{w.evmAddress=u.bytes();break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.ContractID"},p}(),TransactionID:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.transactionValidStart=null,p.prototype.accountID=null,p.prototype.scheduled=!1,p.prototype.nonce=0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.transactionValidStart!=null&&Object.hasOwnProperty.call(a,"transactionValidStart")&&d.proto.Timestamp.encode(a.transactionValidStart,u.uint32(10).fork()).ldelim(),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(18).fork()).ldelim(),a.scheduled!=null&&Object.hasOwnProperty.call(a,"scheduled")&&u.uint32(24).bool(a.scheduled),a.nonce!=null&&Object.hasOwnProperty.call(a,"nonce")&&u.uint32(32).int32(a.nonce),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransactionID,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.transactionValidStart=d.proto.Timestamp.decode(a,a.uint32());break}case 2:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.scheduled=a.bool();break}case 4:{b.nonce=a.int32();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransactionID"},p}(),AccountAmount:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.accountID=null,p.prototype.amount=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.isApproval=!1,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(10).fork()).ldelim(),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(16).sint64(a.amount),a.isApproval!=null&&Object.hasOwnProperty.call(a,"isApproval")&&u.uint32(24).bool(a.isApproval),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.AccountAmount,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.amount=a.sint64();break}case 3:{b.isApproval=a.bool();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.AccountAmount"},p}(),TransferList:function(){function p(a){if(this.accountAmounts=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.accountAmounts=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.accountAmounts!=null&&a.accountAmounts.length)for(var y=0;y<a.accountAmounts.length;++y)d.proto.AccountAmount.encode(a.accountAmounts[y],u.uint32(10).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransferList,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.accountAmounts&&b.accountAmounts.length||(b.accountAmounts=[]),b.accountAmounts.push(d.proto.AccountAmount.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransferList"},p}(),NftTransfer:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.senderAccountID=null,p.prototype.receiverAccountID=null,p.prototype.serialNumber=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.isApproval=!1,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.senderAccountID!=null&&Object.hasOwnProperty.call(a,"senderAccountID")&&d.proto.AccountID.encode(a.senderAccountID,u.uint32(10).fork()).ldelim(),a.receiverAccountID!=null&&Object.hasOwnProperty.call(a,"receiverAccountID")&&d.proto.AccountID.encode(a.receiverAccountID,u.uint32(18).fork()).ldelim(),a.serialNumber!=null&&Object.hasOwnProperty.call(a,"serialNumber")&&u.uint32(24).int64(a.serialNumber),a.isApproval!=null&&Object.hasOwnProperty.call(a,"isApproval")&&u.uint32(32).bool(a.isApproval),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NftTransfer,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.senderAccountID=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.receiverAccountID=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.serialNumber=a.int64();break}case 4:{b.isApproval=a.bool();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NftTransfer"},p}(),TokenTransferList:function(){function p(a){if(this.transfers=[],this.nftTransfers=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.prototype.transfers=h.emptyArray,p.prototype.nftTransfers=h.emptyArray,p.prototype.expectedDecimals=null,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),a.transfers!=null&&a.transfers.length)for(var y=0;y<a.transfers.length;++y)d.proto.AccountAmount.encode(a.transfers[y],u.uint32(18).fork()).ldelim();if(a.nftTransfers!=null&&a.nftTransfers.length)for(var y=0;y<a.nftTransfers.length;++y)d.proto.NftTransfer.encode(a.nftTransfers[y],u.uint32(26).fork()).ldelim();return a.expectedDecimals!=null&&Object.hasOwnProperty.call(a,"expectedDecimals")&&d.google.protobuf.UInt32Value.encode(a.expectedDecimals,u.uint32(34).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenTransferList,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.transfers&&b.transfers.length||(b.transfers=[]),b.transfers.push(d.proto.AccountAmount.decode(a,a.uint32()));break}case 3:{b.nftTransfers&&b.nftTransfers.length||(b.nftTransfers=[]),b.nftTransfers.push(d.proto.NftTransfer.decode(a,a.uint32()));break}case 4:{b.expectedDecimals=d.google.protobuf.UInt32Value.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenTransferList"},p}(),Fraction:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.numerator=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.denominator=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.numerator!=null&&Object.hasOwnProperty.call(a,"numerator")&&u.uint32(8).int64(a.numerator),a.denominator!=null&&Object.hasOwnProperty.call(a,"denominator")&&u.uint32(16).int64(a.denominator),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.Fraction,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.numerator=a.int64();break}case 2:{b.denominator=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.Fraction"},p}(),TopicID:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.shardNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.realmNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.topicNum=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.shardNum!=null&&Object.hasOwnProperty.call(a,"shardNum")&&u.uint32(8).int64(a.shardNum),a.realmNum!=null&&Object.hasOwnProperty.call(a,"realmNum")&&u.uint32(16).int64(a.realmNum),a.topicNum!=null&&Object.hasOwnProperty.call(a,"topicNum")&&u.uint32(24).int64(a.topicNum),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TopicID,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.shardNum=a.int64();break}case 2:{b.realmNum=a.int64();break}case 3:{b.topicNum=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TopicID"},p}(),TokenID:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.shardNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.realmNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.tokenNum=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.shardNum!=null&&Object.hasOwnProperty.call(a,"shardNum")&&u.uint32(8).int64(a.shardNum),a.realmNum!=null&&Object.hasOwnProperty.call(a,"realmNum")&&u.uint32(16).int64(a.realmNum),a.tokenNum!=null&&Object.hasOwnProperty.call(a,"tokenNum")&&u.uint32(24).int64(a.tokenNum),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenID,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.shardNum=a.int64();break}case 2:{b.realmNum=a.int64();break}case 3:{b.tokenNum=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenID"},p}(),ScheduleID:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.shardNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.realmNum=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.scheduleNum=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.shardNum!=null&&Object.hasOwnProperty.call(a,"shardNum")&&u.uint32(8).int64(a.shardNum),a.realmNum!=null&&Object.hasOwnProperty.call(a,"realmNum")&&u.uint32(16).int64(a.realmNum),a.scheduleNum!=null&&Object.hasOwnProperty.call(a,"scheduleNum")&&u.uint32(24).int64(a.scheduleNum),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ScheduleID,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.shardNum=a.int64();break}case 2:{b.realmNum=a.int64();break}case 3:{b.scheduleNum=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ScheduleID"},p}(),TokenType:function(){const p={},a=Object.create(p);return a[p[0]="FUNGIBLE_COMMON"]=0,a[p[1]="NON_FUNGIBLE_UNIQUE"]=1,a}(),SubType:function(){const p={},a=Object.create(p);return a[p[0]="DEFAULT"]=0,a[p[1]="TOKEN_FUNGIBLE_COMMON"]=1,a[p[2]="TOKEN_NON_FUNGIBLE_UNIQUE"]=2,a[p[3]="TOKEN_FUNGIBLE_COMMON_WITH_CUSTOM_FEES"]=3,a[p[4]="TOKEN_NON_FUNGIBLE_UNIQUE_WITH_CUSTOM_FEES"]=4,a[p[5]="SCHEDULE_CREATE_CONTRACT_CALL"]=5,a}(),TokenSupplyType:function(){const p={},a=Object.create(p);return a[p[0]="INFINITE"]=0,a[p[1]="FINITE"]=1,a}(),TokenFreezeStatus:function(){const p={},a=Object.create(p);return a[p[0]="FreezeNotApplicable"]=0,a[p[1]="Frozen"]=1,a[p[2]="Unfrozen"]=2,a}(),TokenKycStatus:function(){const p={},a=Object.create(p);return a[p[0]="KycNotApplicable"]=0,a[p[1]="Granted"]=1,a[p[2]="Revoked"]=2,a}(),TokenPauseStatus:function(){const p={},a=Object.create(p);return a[p[0]="PauseNotApplicable"]=0,a[p[1]="Paused"]=1,a[p[2]="Unpaused"]=2,a}(),Key:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.contractID=null,p.prototype.ed25519=null,p.prototype.RSA_3072=null,p.prototype.ECDSA_384=null,p.prototype.thresholdKey=null,p.prototype.keyList=null,p.prototype.ECDSASecp256k1=null,p.prototype.delegatableContractId=null;let a;return Object.defineProperty(p.prototype,"key",{get:h.oneOfGetter(a=["contractID","ed25519","RSA_3072","ECDSA_384","thresholdKey","keyList","ECDSASecp256k1","delegatableContractId"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.contractID!=null&&Object.hasOwnProperty.call(u,"contractID")&&d.proto.ContractID.encode(u.contractID,y.uint32(10).fork()).ldelim(),u.ed25519!=null&&Object.hasOwnProperty.call(u,"ed25519")&&y.uint32(18).bytes(u.ed25519),u.RSA_3072!=null&&Object.hasOwnProperty.call(u,"RSA_3072")&&y.uint32(26).bytes(u.RSA_3072),u.ECDSA_384!=null&&Object.hasOwnProperty.call(u,"ECDSA_384")&&y.uint32(34).bytes(u.ECDSA_384),u.thresholdKey!=null&&Object.hasOwnProperty.call(u,"thresholdKey")&&d.proto.ThresholdKey.encode(u.thresholdKey,y.uint32(42).fork()).ldelim(),u.keyList!=null&&Object.hasOwnProperty.call(u,"keyList")&&d.proto.KeyList.encode(u.keyList,y.uint32(50).fork()).ldelim(),u.ECDSASecp256k1!=null&&Object.hasOwnProperty.call(u,"ECDSASecp256k1")&&y.uint32(58).bytes(u.ECDSASecp256k1),u.delegatableContractId!=null&&Object.hasOwnProperty.call(u,"delegatableContractId")&&d.proto.ContractID.encode(u.delegatableContractId,y.uint32(66).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.Key,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.contractID=d.proto.ContractID.decode(u,u.uint32());break}case 2:{w.ed25519=u.bytes();break}case 3:{w.RSA_3072=u.bytes();break}case 4:{w.ECDSA_384=u.bytes();break}case 5:{w.thresholdKey=d.proto.ThresholdKey.decode(u,u.uint32());break}case 6:{w.keyList=d.proto.KeyList.decode(u,u.uint32());break}case 7:{w.ECDSASecp256k1=u.bytes();break}case 8:{w.delegatableContractId=d.proto.ContractID.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.Key"},p}(),ThresholdKey:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.threshold=0,p.prototype.keys=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.threshold!=null&&Object.hasOwnProperty.call(a,"threshold")&&u.uint32(8).uint32(a.threshold),a.keys!=null&&Object.hasOwnProperty.call(a,"keys")&&d.proto.KeyList.encode(a.keys,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ThresholdKey,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.threshold=a.uint32();break}case 2:{b.keys=d.proto.KeyList.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ThresholdKey"},p}(),KeyList:function(){function p(a){if(this.keys=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.keys=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.keys!=null&&a.keys.length)for(var y=0;y<a.keys.length;++y)d.proto.Key.encode(a.keys[y],u.uint32(10).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.KeyList,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.keys&&b.keys.length||(b.keys=[]),b.keys.push(d.proto.Key.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.KeyList"},p}(),Signature:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.contract=null,p.prototype.ed25519=null,p.prototype.RSA_3072=null,p.prototype.ECDSA_384=null,p.prototype.thresholdSignature=null,p.prototype.signatureList=null;let a;return Object.defineProperty(p.prototype,"signature",{get:h.oneOfGetter(a=["contract","ed25519","RSA_3072","ECDSA_384","thresholdSignature","signatureList"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.contract!=null&&Object.hasOwnProperty.call(u,"contract")&&y.uint32(10).bytes(u.contract),u.ed25519!=null&&Object.hasOwnProperty.call(u,"ed25519")&&y.uint32(18).bytes(u.ed25519),u.RSA_3072!=null&&Object.hasOwnProperty.call(u,"RSA_3072")&&y.uint32(26).bytes(u.RSA_3072),u.ECDSA_384!=null&&Object.hasOwnProperty.call(u,"ECDSA_384")&&y.uint32(34).bytes(u.ECDSA_384),u.thresholdSignature!=null&&Object.hasOwnProperty.call(u,"thresholdSignature")&&d.proto.ThresholdSignature.encode(u.thresholdSignature,y.uint32(42).fork()).ldelim(),u.signatureList!=null&&Object.hasOwnProperty.call(u,"signatureList")&&d.proto.SignatureList.encode(u.signatureList,y.uint32(50).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.Signature,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.contract=u.bytes();break}case 2:{w.ed25519=u.bytes();break}case 3:{w.RSA_3072=u.bytes();break}case 4:{w.ECDSA_384=u.bytes();break}case 5:{w.thresholdSignature=d.proto.ThresholdSignature.decode(u,u.uint32());break}case 6:{w.signatureList=d.proto.SignatureList.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.Signature"},p}(),ThresholdSignature:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.sigs=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.sigs!=null&&Object.hasOwnProperty.call(a,"sigs")&&d.proto.SignatureList.encode(a.sigs,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ThresholdSignature,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 2:{b.sigs=d.proto.SignatureList.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ThresholdSignature"},p}(),SignatureList:function(){function p(a){if(this.sigs=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.sigs=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.sigs!=null&&a.sigs.length)for(var y=0;y<a.sigs.length;++y)d.proto.Signature.encode(a.sigs[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.SignatureList,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 2:{b.sigs&&b.sigs.length||(b.sigs=[]),b.sigs.push(d.proto.Signature.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.SignatureList"},p}(),SignaturePair:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.pubKeyPrefix=h.newBuffer([]),p.prototype.contract=null,p.prototype.ed25519=null,p.prototype.RSA_3072=null,p.prototype.ECDSA_384=null,p.prototype.ECDSASecp256k1=null;let a;return Object.defineProperty(p.prototype,"signature",{get:h.oneOfGetter(a=["contract","ed25519","RSA_3072","ECDSA_384","ECDSASecp256k1"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.pubKeyPrefix!=null&&Object.hasOwnProperty.call(u,"pubKeyPrefix")&&y.uint32(10).bytes(u.pubKeyPrefix),u.contract!=null&&Object.hasOwnProperty.call(u,"contract")&&y.uint32(18).bytes(u.contract),u.ed25519!=null&&Object.hasOwnProperty.call(u,"ed25519")&&y.uint32(26).bytes(u.ed25519),u.RSA_3072!=null&&Object.hasOwnProperty.call(u,"RSA_3072")&&y.uint32(34).bytes(u.RSA_3072),u.ECDSA_384!=null&&Object.hasOwnProperty.call(u,"ECDSA_384")&&y.uint32(42).bytes(u.ECDSA_384),u.ECDSASecp256k1!=null&&Object.hasOwnProperty.call(u,"ECDSASecp256k1")&&y.uint32(50).bytes(u.ECDSASecp256k1),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.SignaturePair,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.pubKeyPrefix=u.bytes();break}case 2:{w.contract=u.bytes();break}case 3:{w.ed25519=u.bytes();break}case 4:{w.RSA_3072=u.bytes();break}case 5:{w.ECDSA_384=u.bytes();break}case 6:{w.ECDSASecp256k1=u.bytes();break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.SignaturePair"},p}(),SignatureMap:function(){function p(a){if(this.sigPair=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.sigPair=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.sigPair!=null&&a.sigPair.length)for(var y=0;y<a.sigPair.length;++y)d.proto.SignaturePair.encode(a.sigPair[y],u.uint32(10).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.SignatureMap,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.sigPair&&b.sigPair.length||(b.sigPair=[]),b.sigPair.push(d.proto.SignaturePair.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.SignatureMap"},p}(),HederaFunctionality:function(){const p={},a=Object.create(p);return a[p[0]="NONE"]=0,a[p[1]="CryptoTransfer"]=1,a[p[2]="CryptoUpdate"]=2,a[p[3]="CryptoDelete"]=3,a[p[4]="CryptoAddLiveHash"]=4,a[p[5]="CryptoDeleteLiveHash"]=5,a[p[6]="ContractCall"]=6,a[p[7]="ContractCreate"]=7,a[p[8]="ContractUpdate"]=8,a[p[9]="FileCreate"]=9,a[p[10]="FileAppend"]=10,a[p[11]="FileUpdate"]=11,a[p[12]="FileDelete"]=12,a[p[13]="CryptoGetAccountBalance"]=13,a[p[14]="CryptoGetAccountRecords"]=14,a[p[15]="CryptoGetInfo"]=15,a[p[16]="ContractCallLocal"]=16,a[p[17]="ContractGetInfo"]=17,a[p[18]="ContractGetBytecode"]=18,a[p[19]="GetBySolidityID"]=19,a[p[20]="GetByKey"]=20,a[p[21]="CryptoGetLiveHash"]=21,a[p[22]="CryptoGetStakers"]=22,a[p[23]="FileGetContents"]=23,a[p[24]="FileGetInfo"]=24,a[p[25]="TransactionGetRecord"]=25,a[p[26]="ContractGetRecords"]=26,a[p[27]="CryptoCreate"]=27,a[p[28]="SystemDelete"]=28,a[p[29]="SystemUndelete"]=29,a[p[30]="ContractDelete"]=30,a[p[31]="Freeze"]=31,a[p[32]="CreateTransactionRecord"]=32,a[p[33]="CryptoAccountAutoRenew"]=33,a[p[34]="ContractAutoRenew"]=34,a[p[35]="GetVersionInfo"]=35,a[p[36]="TransactionGetReceipt"]=36,a[p[50]="ConsensusCreateTopic"]=50,a[p[51]="ConsensusUpdateTopic"]=51,a[p[52]="ConsensusDeleteTopic"]=52,a[p[53]="ConsensusGetTopicInfo"]=53,a[p[54]="ConsensusSubmitMessage"]=54,a[p[55]="UncheckedSubmit"]=55,a[p[56]="TokenCreate"]=56,a[p[58]="TokenGetInfo"]=58,a[p[59]="TokenFreezeAccount"]=59,a[p[60]="TokenUnfreezeAccount"]=60,a[p[61]="TokenGrantKycToAccount"]=61,a[p[62]="TokenRevokeKycFromAccount"]=62,a[p[63]="TokenDelete"]=63,a[p[64]="TokenUpdate"]=64,a[p[65]="TokenMint"]=65,a[p[66]="TokenBurn"]=66,a[p[67]="TokenAccountWipe"]=67,a[p[68]="TokenAssociateToAccount"]=68,a[p[69]="TokenDissociateFromAccount"]=69,a[p[70]="ScheduleCreate"]=70,a[p[71]="ScheduleDelete"]=71,a[p[72]="ScheduleSign"]=72,a[p[73]="ScheduleGetInfo"]=73,a[p[74]="TokenGetAccountNftInfos"]=74,a[p[75]="TokenGetNftInfo"]=75,a[p[76]="TokenGetNftInfos"]=76,a[p[77]="TokenFeeScheduleUpdate"]=77,a[p[78]="NetworkGetExecutionTime"]=78,a[p[79]="TokenPause"]=79,a[p[80]="TokenUnpause"]=80,a[p[81]="CryptoApproveAllowance"]=81,a[p[82]="CryptoDeleteAllowance"]=82,a[p[83]="GetAccountDetails"]=83,a[p[84]="EthereumTransaction"]=84,a[p[85]="NodeStakeUpdate"]=85,a[p[86]="UtilPrng"]=86,a}(),FeeComponents:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.min=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.max=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.constant=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.bpt=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.vpt=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.rbh=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.sbh=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.gas=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.tv=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.bpr=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.sbpr=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.min!=null&&Object.hasOwnProperty.call(a,"min")&&u.uint32(8).int64(a.min),a.max!=null&&Object.hasOwnProperty.call(a,"max")&&u.uint32(16).int64(a.max),a.constant!=null&&Object.hasOwnProperty.call(a,"constant")&&u.uint32(24).int64(a.constant),a.bpt!=null&&Object.hasOwnProperty.call(a,"bpt")&&u.uint32(32).int64(a.bpt),a.vpt!=null&&Object.hasOwnProperty.call(a,"vpt")&&u.uint32(40).int64(a.vpt),a.rbh!=null&&Object.hasOwnProperty.call(a,"rbh")&&u.uint32(48).int64(a.rbh),a.sbh!=null&&Object.hasOwnProperty.call(a,"sbh")&&u.uint32(56).int64(a.sbh),a.gas!=null&&Object.hasOwnProperty.call(a,"gas")&&u.uint32(64).int64(a.gas),a.tv!=null&&Object.hasOwnProperty.call(a,"tv")&&u.uint32(72).int64(a.tv),a.bpr!=null&&Object.hasOwnProperty.call(a,"bpr")&&u.uint32(80).int64(a.bpr),a.sbpr!=null&&Object.hasOwnProperty.call(a,"sbpr")&&u.uint32(88).int64(a.sbpr),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FeeComponents,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.min=a.int64();break}case 2:{b.max=a.int64();break}case 3:{b.constant=a.int64();break}case 4:{b.bpt=a.int64();break}case 5:{b.vpt=a.int64();break}case 6:{b.rbh=a.int64();break}case 7:{b.sbh=a.int64();break}case 8:{b.gas=a.int64();break}case 9:{b.tv=a.int64();break}case 10:{b.bpr=a.int64();break}case 11:{b.sbpr=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FeeComponents"},p}(),TransactionFeeSchedule:function(){function p(a){if(this.fees=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.hederaFunctionality=0,p.prototype.feeData=null,p.prototype.fees=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.hederaFunctionality!=null&&Object.hasOwnProperty.call(a,"hederaFunctionality")&&u.uint32(8).int32(a.hederaFunctionality),a.feeData!=null&&Object.hasOwnProperty.call(a,"feeData")&&d.proto.FeeData.encode(a.feeData,u.uint32(18).fork()).ldelim(),a.fees!=null&&a.fees.length)for(var y=0;y<a.fees.length;++y)d.proto.FeeData.encode(a.fees[y],u.uint32(26).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransactionFeeSchedule,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.hederaFunctionality=a.int32();break}case 2:{b.feeData=d.proto.FeeData.decode(a,a.uint32());break}case 3:{b.fees&&b.fees.length||(b.fees=[]),b.fees.push(d.proto.FeeData.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransactionFeeSchedule"},p}(),FeeData:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.nodedata=null,p.prototype.networkdata=null,p.prototype.servicedata=null,p.prototype.subType=0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.nodedata!=null&&Object.hasOwnProperty.call(a,"nodedata")&&d.proto.FeeComponents.encode(a.nodedata,u.uint32(10).fork()).ldelim(),a.networkdata!=null&&Object.hasOwnProperty.call(a,"networkdata")&&d.proto.FeeComponents.encode(a.networkdata,u.uint32(18).fork()).ldelim(),a.servicedata!=null&&Object.hasOwnProperty.call(a,"servicedata")&&d.proto.FeeComponents.encode(a.servicedata,u.uint32(26).fork()).ldelim(),a.subType!=null&&Object.hasOwnProperty.call(a,"subType")&&u.uint32(32).int32(a.subType),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FeeData,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.nodedata=d.proto.FeeComponents.decode(a,a.uint32());break}case 2:{b.networkdata=d.proto.FeeComponents.decode(a,a.uint32());break}case 3:{b.servicedata=d.proto.FeeComponents.decode(a,a.uint32());break}case 4:{b.subType=a.int32();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FeeData"},p}(),FeeSchedule:function(){function p(a){if(this.transactionFeeSchedule=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.transactionFeeSchedule=h.emptyArray,p.prototype.expiryTime=null,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.transactionFeeSchedule!=null&&a.transactionFeeSchedule.length)for(var y=0;y<a.transactionFeeSchedule.length;++y)d.proto.TransactionFeeSchedule.encode(a.transactionFeeSchedule[y],u.uint32(10).fork()).ldelim();return a.expiryTime!=null&&Object.hasOwnProperty.call(a,"expiryTime")&&d.proto.TimestampSeconds.encode(a.expiryTime,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FeeSchedule,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.transactionFeeSchedule&&b.transactionFeeSchedule.length||(b.transactionFeeSchedule=[]),b.transactionFeeSchedule.push(d.proto.TransactionFeeSchedule.decode(a,a.uint32()));break}case 2:{b.expiryTime=d.proto.TimestampSeconds.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FeeSchedule"},p}(),CurrentAndNextFeeSchedule:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.currentFeeSchedule=null,p.prototype.nextFeeSchedule=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.currentFeeSchedule!=null&&Object.hasOwnProperty.call(a,"currentFeeSchedule")&&d.proto.FeeSchedule.encode(a.currentFeeSchedule,u.uint32(10).fork()).ldelim(),a.nextFeeSchedule!=null&&Object.hasOwnProperty.call(a,"nextFeeSchedule")&&d.proto.FeeSchedule.encode(a.nextFeeSchedule,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CurrentAndNextFeeSchedule,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.currentFeeSchedule=d.proto.FeeSchedule.decode(a,a.uint32());break}case 2:{b.nextFeeSchedule=d.proto.FeeSchedule.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CurrentAndNextFeeSchedule"},p}(),ServiceEndpoint:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.ipAddressV4=h.newBuffer([]),p.prototype.port=0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.ipAddressV4!=null&&Object.hasOwnProperty.call(a,"ipAddressV4")&&u.uint32(10).bytes(a.ipAddressV4),a.port!=null&&Object.hasOwnProperty.call(a,"port")&&u.uint32(16).int32(a.port),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ServiceEndpoint,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.ipAddressV4=a.bytes();break}case 2:{b.port=a.int32();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ServiceEndpoint"},p}(),NodeAddress:function(){function p(a){if(this.serviceEndpoint=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.ipAddress=h.newBuffer([]),p.prototype.portno=0,p.prototype.memo=h.newBuffer([]),p.prototype.RSA_PubKey="",p.prototype.nodeId=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.nodeAccountId=null,p.prototype.nodeCertHash=h.newBuffer([]),p.prototype.serviceEndpoint=h.emptyArray,p.prototype.description="",p.prototype.stake=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.ipAddress!=null&&Object.hasOwnProperty.call(a,"ipAddress")&&u.uint32(10).bytes(a.ipAddress),a.portno!=null&&Object.hasOwnProperty.call(a,"portno")&&u.uint32(16).int32(a.portno),a.memo!=null&&Object.hasOwnProperty.call(a,"memo")&&u.uint32(26).bytes(a.memo),a.RSA_PubKey!=null&&Object.hasOwnProperty.call(a,"RSA_PubKey")&&u.uint32(34).string(a.RSA_PubKey),a.nodeId!=null&&Object.hasOwnProperty.call(a,"nodeId")&&u.uint32(40).int64(a.nodeId),a.nodeAccountId!=null&&Object.hasOwnProperty.call(a,"nodeAccountId")&&d.proto.AccountID.encode(a.nodeAccountId,u.uint32(50).fork()).ldelim(),a.nodeCertHash!=null&&Object.hasOwnProperty.call(a,"nodeCertHash")&&u.uint32(58).bytes(a.nodeCertHash),a.serviceEndpoint!=null&&a.serviceEndpoint.length)for(var y=0;y<a.serviceEndpoint.length;++y)d.proto.ServiceEndpoint.encode(a.serviceEndpoint[y],u.uint32(66).fork()).ldelim();return a.description!=null&&Object.hasOwnProperty.call(a,"description")&&u.uint32(74).string(a.description),a.stake!=null&&Object.hasOwnProperty.call(a,"stake")&&u.uint32(80).int64(a.stake),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NodeAddress,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.ipAddress=a.bytes();break}case 2:{b.portno=a.int32();break}case 3:{b.memo=a.bytes();break}case 4:{b.RSA_PubKey=a.string();break}case 5:{b.nodeId=a.int64();break}case 6:{b.nodeAccountId=d.proto.AccountID.decode(a,a.uint32());break}case 7:{b.nodeCertHash=a.bytes();break}case 8:{b.serviceEndpoint&&b.serviceEndpoint.length||(b.serviceEndpoint=[]),b.serviceEndpoint.push(d.proto.ServiceEndpoint.decode(a,a.uint32()));break}case 9:{b.description=a.string();break}case 10:{b.stake=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NodeAddress"},p}(),NodeAddressBook:function(){function p(a){if(this.nodeAddress=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.nodeAddress=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.nodeAddress!=null&&a.nodeAddress.length)for(var y=0;y<a.nodeAddress.length;++y)d.proto.NodeAddress.encode(a.nodeAddress[y],u.uint32(10).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NodeAddressBook,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.nodeAddress&&b.nodeAddress.length||(b.nodeAddress=[]),b.nodeAddress.push(d.proto.NodeAddress.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NodeAddressBook"},p}(),SemanticVersion:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.major=0,p.prototype.minor=0,p.prototype.patch=0,p.prototype.pre="",p.prototype.build="",p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.major!=null&&Object.hasOwnProperty.call(a,"major")&&u.uint32(8).int32(a.major),a.minor!=null&&Object.hasOwnProperty.call(a,"minor")&&u.uint32(16).int32(a.minor),a.patch!=null&&Object.hasOwnProperty.call(a,"patch")&&u.uint32(24).int32(a.patch),a.pre!=null&&Object.hasOwnProperty.call(a,"pre")&&u.uint32(34).string(a.pre),a.build!=null&&Object.hasOwnProperty.call(a,"build")&&u.uint32(42).string(a.build),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.SemanticVersion,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.major=a.int32();break}case 2:{b.minor=a.int32();break}case 3:{b.patch=a.int32();break}case 4:{b.pre=a.string();break}case 5:{b.build=a.string();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.SemanticVersion"},p}(),Setting:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.name="",p.prototype.value="",p.prototype.data=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.name!=null&&Object.hasOwnProperty.call(a,"name")&&u.uint32(10).string(a.name),a.value!=null&&Object.hasOwnProperty.call(a,"value")&&u.uint32(18).string(a.value),a.data!=null&&Object.hasOwnProperty.call(a,"data")&&u.uint32(26).bytes(a.data),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.Setting,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.name=a.string();break}case 2:{b.value=a.string();break}case 3:{b.data=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.Setting"},p}(),ServicesConfigurationList:function(){function p(a){if(this.nameValue=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.nameValue=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.nameValue!=null&&a.nameValue.length)for(var y=0;y<a.nameValue.length;++y)d.proto.Setting.encode(a.nameValue[y],u.uint32(10).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ServicesConfigurationList,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.nameValue&&b.nameValue.length||(b.nameValue=[]),b.nameValue.push(d.proto.Setting.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ServicesConfigurationList"},p}(),TokenRelationship:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenId=null,p.prototype.symbol="",p.prototype.balance=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.kycStatus=0,p.prototype.freezeStatus=0,p.prototype.decimals=0,p.prototype.automaticAssociation=!1,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(10).fork()).ldelim(),a.symbol!=null&&Object.hasOwnProperty.call(a,"symbol")&&u.uint32(18).string(a.symbol),a.balance!=null&&Object.hasOwnProperty.call(a,"balance")&&u.uint32(24).uint64(a.balance),a.kycStatus!=null&&Object.hasOwnProperty.call(a,"kycStatus")&&u.uint32(32).int32(a.kycStatus),a.freezeStatus!=null&&Object.hasOwnProperty.call(a,"freezeStatus")&&u.uint32(40).int32(a.freezeStatus),a.decimals!=null&&Object.hasOwnProperty.call(a,"decimals")&&u.uint32(48).uint32(a.decimals),a.automaticAssociation!=null&&Object.hasOwnProperty.call(a,"automaticAssociation")&&u.uint32(56).bool(a.automaticAssociation),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenRelationship,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.symbol=a.string();break}case 3:{b.balance=a.uint64();break}case 4:{b.kycStatus=a.int32();break}case 5:{b.freezeStatus=a.int32();break}case 6:{b.decimals=a.uint32();break}case 7:{b.automaticAssociation=a.bool();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenRelationship"},p}(),TokenBalance:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenId=null,p.prototype.balance=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.decimals=0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(10).fork()).ldelim(),a.balance!=null&&Object.hasOwnProperty.call(a,"balance")&&u.uint32(16).uint64(a.balance),a.decimals!=null&&Object.hasOwnProperty.call(a,"decimals")&&u.uint32(24).uint32(a.decimals),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenBalance,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.balance=a.uint64();break}case 3:{b.decimals=a.uint32();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenBalance"},p}(),TokenBalances:function(){function p(a){if(this.tokenBalances=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenBalances=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.tokenBalances!=null&&a.tokenBalances.length)for(var y=0;y<a.tokenBalances.length;++y)d.proto.TokenBalance.encode(a.tokenBalances[y],u.uint32(10).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenBalances,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenBalances&&b.tokenBalances.length||(b.tokenBalances=[]),b.tokenBalances.push(d.proto.TokenBalance.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenBalances"},p}(),TokenAssociation:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenId=null,p.prototype.accountId=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(10).fork()).ldelim(),a.accountId!=null&&Object.hasOwnProperty.call(a,"accountId")&&d.proto.AccountID.encode(a.accountId,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenAssociation,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.accountId=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenAssociation"},p}(),StakingInfo:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.declineReward=!1,p.prototype.stakePeriodStart=null,p.prototype.pendingReward=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.stakedToMe=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.stakedAccountId=null,p.prototype.stakedNodeId=null;let a;return Object.defineProperty(p.prototype,"stakedId",{get:h.oneOfGetter(a=["stakedAccountId","stakedNodeId"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.declineReward!=null&&Object.hasOwnProperty.call(u,"declineReward")&&y.uint32(8).bool(u.declineReward),u.stakePeriodStart!=null&&Object.hasOwnProperty.call(u,"stakePeriodStart")&&d.proto.Timestamp.encode(u.stakePeriodStart,y.uint32(18).fork()).ldelim(),u.pendingReward!=null&&Object.hasOwnProperty.call(u,"pendingReward")&&y.uint32(24).int64(u.pendingReward),u.stakedToMe!=null&&Object.hasOwnProperty.call(u,"stakedToMe")&&y.uint32(32).int64(u.stakedToMe),u.stakedAccountId!=null&&Object.hasOwnProperty.call(u,"stakedAccountId")&&d.proto.AccountID.encode(u.stakedAccountId,y.uint32(42).fork()).ldelim(),u.stakedNodeId!=null&&Object.hasOwnProperty.call(u,"stakedNodeId")&&y.uint32(48).int64(u.stakedNodeId),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.StakingInfo,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.declineReward=u.bool();break}case 2:{w.stakePeriodStart=d.proto.Timestamp.decode(u,u.uint32());break}case 3:{w.pendingReward=u.int64();break}case 4:{w.stakedToMe=u.int64();break}case 5:{w.stakedAccountId=d.proto.AccountID.decode(u,u.uint32());break}case 6:{w.stakedNodeId=u.int64();break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.StakingInfo"},p}(),Timestamp:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.seconds=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.nanos=0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.seconds!=null&&Object.hasOwnProperty.call(a,"seconds")&&u.uint32(8).int64(a.seconds),a.nanos!=null&&Object.hasOwnProperty.call(a,"nanos")&&u.uint32(16).int32(a.nanos),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.Timestamp,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.seconds=a.int64();break}case 2:{b.nanos=a.int32();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.Timestamp"},p}(),TimestampSeconds:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.seconds=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.seconds!=null&&Object.hasOwnProperty.call(a,"seconds")&&u.uint32(8).int64(a.seconds),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TimestampSeconds,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.seconds=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TimestampSeconds"},p}(),ConsensusCreateTopicTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.memo="",p.prototype.adminKey=null,p.prototype.submitKey=null,p.prototype.autoRenewPeriod=null,p.prototype.autoRenewAccount=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.memo!=null&&Object.hasOwnProperty.call(a,"memo")&&u.uint32(10).string(a.memo),a.adminKey!=null&&Object.hasOwnProperty.call(a,"adminKey")&&d.proto.Key.encode(a.adminKey,u.uint32(18).fork()).ldelim(),a.submitKey!=null&&Object.hasOwnProperty.call(a,"submitKey")&&d.proto.Key.encode(a.submitKey,u.uint32(26).fork()).ldelim(),a.autoRenewPeriod!=null&&Object.hasOwnProperty.call(a,"autoRenewPeriod")&&d.proto.Duration.encode(a.autoRenewPeriod,u.uint32(50).fork()).ldelim(),a.autoRenewAccount!=null&&Object.hasOwnProperty.call(a,"autoRenewAccount")&&d.proto.AccountID.encode(a.autoRenewAccount,u.uint32(58).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ConsensusCreateTopicTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.memo=a.string();break}case 2:{b.adminKey=d.proto.Key.decode(a,a.uint32());break}case 3:{b.submitKey=d.proto.Key.decode(a,a.uint32());break}case 6:{b.autoRenewPeriod=d.proto.Duration.decode(a,a.uint32());break}case 7:{b.autoRenewAccount=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ConsensusCreateTopicTransactionBody"},p}(),Duration:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.seconds=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.seconds!=null&&Object.hasOwnProperty.call(a,"seconds")&&u.uint32(8).int64(a.seconds),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.Duration,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.seconds=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.Duration"},p}(),ConsensusDeleteTopicTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.topicID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.topicID!=null&&Object.hasOwnProperty.call(a,"topicID")&&d.proto.TopicID.encode(a.topicID,u.uint32(10).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ConsensusDeleteTopicTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.topicID=d.proto.TopicID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ConsensusDeleteTopicTransactionBody"},p}(),ConsensusGetTopicInfoQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.topicID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.topicID!=null&&Object.hasOwnProperty.call(a,"topicID")&&d.proto.TopicID.encode(a.topicID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ConsensusGetTopicInfoQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.topicID=d.proto.TopicID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ConsensusGetTopicInfoQuery"},p}(),ConsensusGetTopicInfoResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.topicID=null,p.prototype.topicInfo=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.topicID!=null&&Object.hasOwnProperty.call(a,"topicID")&&d.proto.TopicID.encode(a.topicID,u.uint32(18).fork()).ldelim(),a.topicInfo!=null&&Object.hasOwnProperty.call(a,"topicInfo")&&d.proto.ConsensusTopicInfo.encode(a.topicInfo,u.uint32(42).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ConsensusGetTopicInfoResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.topicID=d.proto.TopicID.decode(a,a.uint32());break}case 5:{b.topicInfo=d.proto.ConsensusTopicInfo.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ConsensusGetTopicInfoResponse"},p}(),ResponseType:function(){const p={},a=Object.create(p);return a[p[0]="ANSWER_ONLY"]=0,a[p[1]="ANSWER_STATE_PROOF"]=1,a[p[2]="COST_ANSWER"]=2,a[p[3]="COST_ANSWER_STATE_PROOF"]=3,a}(),QueryHeader:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.payment=null,p.prototype.responseType=0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.payment!=null&&Object.hasOwnProperty.call(a,"payment")&&d.proto.Transaction.encode(a.payment,u.uint32(10).fork()).ldelim(),a.responseType!=null&&Object.hasOwnProperty.call(a,"responseType")&&u.uint32(16).int32(a.responseType),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.QueryHeader,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.payment=d.proto.Transaction.decode(a,a.uint32());break}case 2:{b.responseType=a.int32();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.QueryHeader"},p}(),Transaction:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.body=null,p.prototype.sigs=null,p.prototype.sigMap=null,p.prototype.bodyBytes=h.newBuffer([]),p.prototype.signedTransactionBytes=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.body!=null&&Object.hasOwnProperty.call(a,"body")&&d.proto.TransactionBody.encode(a.body,u.uint32(10).fork()).ldelim(),a.sigs!=null&&Object.hasOwnProperty.call(a,"sigs")&&d.proto.SignatureList.encode(a.sigs,u.uint32(18).fork()).ldelim(),a.sigMap!=null&&Object.hasOwnProperty.call(a,"sigMap")&&d.proto.SignatureMap.encode(a.sigMap,u.uint32(26).fork()).ldelim(),a.bodyBytes!=null&&Object.hasOwnProperty.call(a,"bodyBytes")&&u.uint32(34).bytes(a.bodyBytes),a.signedTransactionBytes!=null&&Object.hasOwnProperty.call(a,"signedTransactionBytes")&&u.uint32(42).bytes(a.signedTransactionBytes),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.Transaction,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.body=d.proto.TransactionBody.decode(a,a.uint32());break}case 2:{b.sigs=d.proto.SignatureList.decode(a,a.uint32());break}case 3:{b.sigMap=d.proto.SignatureMap.decode(a,a.uint32());break}case 4:{b.bodyBytes=a.bytes();break}case 5:{b.signedTransactionBytes=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.Transaction"},p}(),TransactionBody:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.transactionID=null,p.prototype.nodeAccountID=null,p.prototype.transactionFee=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.transactionValidDuration=null,p.prototype.generateRecord=!1,p.prototype.memo="",p.prototype.contractCall=null,p.prototype.contractCreateInstance=null,p.prototype.contractUpdateInstance=null,p.prototype.contractDeleteInstance=null,p.prototype.ethereumTransaction=null,p.prototype.cryptoAddLiveHash=null,p.prototype.cryptoApproveAllowance=null,p.prototype.cryptoDeleteAllowance=null,p.prototype.cryptoCreateAccount=null,p.prototype.cryptoDelete=null,p.prototype.cryptoDeleteLiveHash=null,p.prototype.cryptoTransfer=null,p.prototype.cryptoUpdateAccount=null,p.prototype.fileAppend=null,p.prototype.fileCreate=null,p.prototype.fileDelete=null,p.prototype.fileUpdate=null,p.prototype.systemDelete=null,p.prototype.systemUndelete=null,p.prototype.freeze=null,p.prototype.consensusCreateTopic=null,p.prototype.consensusUpdateTopic=null,p.prototype.consensusDeleteTopic=null,p.prototype.consensusSubmitMessage=null,p.prototype.uncheckedSubmit=null,p.prototype.tokenCreation=null,p.prototype.tokenFreeze=null,p.prototype.tokenUnfreeze=null,p.prototype.tokenGrantKyc=null,p.prototype.tokenRevokeKyc=null,p.prototype.tokenDeletion=null,p.prototype.tokenUpdate=null,p.prototype.tokenMint=null,p.prototype.tokenBurn=null,p.prototype.tokenWipe=null,p.prototype.tokenAssociate=null,p.prototype.tokenDissociate=null,p.prototype.tokenFeeScheduleUpdate=null,p.prototype.tokenPause=null,p.prototype.tokenUnpause=null,p.prototype.scheduleCreate=null,p.prototype.scheduleDelete=null,p.prototype.scheduleSign=null,p.prototype.nodeStakeUpdate=null,p.prototype.utilPrng=null;let a;return Object.defineProperty(p.prototype,"data",{get:h.oneOfGetter(a=["contractCall","contractCreateInstance","contractUpdateInstance","contractDeleteInstance","ethereumTransaction","cryptoAddLiveHash","cryptoApproveAllowance","cryptoDeleteAllowance","cryptoCreateAccount","cryptoDelete","cryptoDeleteLiveHash","cryptoTransfer","cryptoUpdateAccount","fileAppend","fileCreate","fileDelete","fileUpdate","systemDelete","systemUndelete","freeze","consensusCreateTopic","consensusUpdateTopic","consensusDeleteTopic","consensusSubmitMessage","uncheckedSubmit","tokenCreation","tokenFreeze","tokenUnfreeze","tokenGrantKyc","tokenRevokeKyc","tokenDeletion","tokenUpdate","tokenMint","tokenBurn","tokenWipe","tokenAssociate","tokenDissociate","tokenFeeScheduleUpdate","tokenPause","tokenUnpause","scheduleCreate","scheduleDelete","scheduleSign","nodeStakeUpdate","utilPrng"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.transactionID!=null&&Object.hasOwnProperty.call(u,"transactionID")&&d.proto.TransactionID.encode(u.transactionID,y.uint32(10).fork()).ldelim(),u.nodeAccountID!=null&&Object.hasOwnProperty.call(u,"nodeAccountID")&&d.proto.AccountID.encode(u.nodeAccountID,y.uint32(18).fork()).ldelim(),u.transactionFee!=null&&Object.hasOwnProperty.call(u,"transactionFee")&&y.uint32(24).uint64(u.transactionFee),u.transactionValidDuration!=null&&Object.hasOwnProperty.call(u,"transactionValidDuration")&&d.proto.Duration.encode(u.transactionValidDuration,y.uint32(34).fork()).ldelim(),u.generateRecord!=null&&Object.hasOwnProperty.call(u,"generateRecord")&&y.uint32(40).bool(u.generateRecord),u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&y.uint32(50).string(u.memo),u.contractCall!=null&&Object.hasOwnProperty.call(u,"contractCall")&&d.proto.ContractCallTransactionBody.encode(u.contractCall,y.uint32(58).fork()).ldelim(),u.contractCreateInstance!=null&&Object.hasOwnProperty.call(u,"contractCreateInstance")&&d.proto.ContractCreateTransactionBody.encode(u.contractCreateInstance,y.uint32(66).fork()).ldelim(),u.contractUpdateInstance!=null&&Object.hasOwnProperty.call(u,"contractUpdateInstance")&&d.proto.ContractUpdateTransactionBody.encode(u.contractUpdateInstance,y.uint32(74).fork()).ldelim(),u.cryptoAddLiveHash!=null&&Object.hasOwnProperty.call(u,"cryptoAddLiveHash")&&d.proto.CryptoAddLiveHashTransactionBody.encode(u.cryptoAddLiveHash,y.uint32(82).fork()).ldelim(),u.cryptoCreateAccount!=null&&Object.hasOwnProperty.call(u,"cryptoCreateAccount")&&d.proto.CryptoCreateTransactionBody.encode(u.cryptoCreateAccount,y.uint32(90).fork()).ldelim(),u.cryptoDelete!=null&&Object.hasOwnProperty.call(u,"cryptoDelete")&&d.proto.CryptoDeleteTransactionBody.encode(u.cryptoDelete,y.uint32(98).fork()).ldelim(),u.cryptoDeleteLiveHash!=null&&Object.hasOwnProperty.call(u,"cryptoDeleteLiveHash")&&d.proto.CryptoDeleteLiveHashTransactionBody.encode(u.cryptoDeleteLiveHash,y.uint32(106).fork()).ldelim(),u.cryptoTransfer!=null&&Object.hasOwnProperty.call(u,"cryptoTransfer")&&d.proto.CryptoTransferTransactionBody.encode(u.cryptoTransfer,y.uint32(114).fork()).ldelim(),u.cryptoUpdateAccount!=null&&Object.hasOwnProperty.call(u,"cryptoUpdateAccount")&&d.proto.CryptoUpdateTransactionBody.encode(u.cryptoUpdateAccount,y.uint32(122).fork()).ldelim(),u.fileAppend!=null&&Object.hasOwnProperty.call(u,"fileAppend")&&d.proto.FileAppendTransactionBody.encode(u.fileAppend,y.uint32(130).fork()).ldelim(),u.fileCreate!=null&&Object.hasOwnProperty.call(u,"fileCreate")&&d.proto.FileCreateTransactionBody.encode(u.fileCreate,y.uint32(138).fork()).ldelim(),u.fileDelete!=null&&Object.hasOwnProperty.call(u,"fileDelete")&&d.proto.FileDeleteTransactionBody.encode(u.fileDelete,y.uint32(146).fork()).ldelim(),u.fileUpdate!=null&&Object.hasOwnProperty.call(u,"fileUpdate")&&d.proto.FileUpdateTransactionBody.encode(u.fileUpdate,y.uint32(154).fork()).ldelim(),u.systemDelete!=null&&Object.hasOwnProperty.call(u,"systemDelete")&&d.proto.SystemDeleteTransactionBody.encode(u.systemDelete,y.uint32(162).fork()).ldelim(),u.systemUndelete!=null&&Object.hasOwnProperty.call(u,"systemUndelete")&&d.proto.SystemUndeleteTransactionBody.encode(u.systemUndelete,y.uint32(170).fork()).ldelim(),u.contractDeleteInstance!=null&&Object.hasOwnProperty.call(u,"contractDeleteInstance")&&d.proto.ContractDeleteTransactionBody.encode(u.contractDeleteInstance,y.uint32(178).fork()).ldelim(),u.freeze!=null&&Object.hasOwnProperty.call(u,"freeze")&&d.proto.FreezeTransactionBody.encode(u.freeze,y.uint32(186).fork()).ldelim(),u.consensusCreateTopic!=null&&Object.hasOwnProperty.call(u,"consensusCreateTopic")&&d.proto.ConsensusCreateTopicTransactionBody.encode(u.consensusCreateTopic,y.uint32(194).fork()).ldelim(),u.consensusUpdateTopic!=null&&Object.hasOwnProperty.call(u,"consensusUpdateTopic")&&d.proto.ConsensusUpdateTopicTransactionBody.encode(u.consensusUpdateTopic,y.uint32(202).fork()).ldelim(),u.consensusDeleteTopic!=null&&Object.hasOwnProperty.call(u,"consensusDeleteTopic")&&d.proto.ConsensusDeleteTopicTransactionBody.encode(u.consensusDeleteTopic,y.uint32(210).fork()).ldelim(),u.consensusSubmitMessage!=null&&Object.hasOwnProperty.call(u,"consensusSubmitMessage")&&d.proto.ConsensusSubmitMessageTransactionBody.encode(u.consensusSubmitMessage,y.uint32(218).fork()).ldelim(),u.uncheckedSubmit!=null&&Object.hasOwnProperty.call(u,"uncheckedSubmit")&&d.proto.UncheckedSubmitBody.encode(u.uncheckedSubmit,y.uint32(226).fork()).ldelim(),u.tokenCreation!=null&&Object.hasOwnProperty.call(u,"tokenCreation")&&d.proto.TokenCreateTransactionBody.encode(u.tokenCreation,y.uint32(234).fork()).ldelim(),u.tokenFreeze!=null&&Object.hasOwnProperty.call(u,"tokenFreeze")&&d.proto.TokenFreezeAccountTransactionBody.encode(u.tokenFreeze,y.uint32(250).fork()).ldelim(),u.tokenUnfreeze!=null&&Object.hasOwnProperty.call(u,"tokenUnfreeze")&&d.proto.TokenUnfreezeAccountTransactionBody.encode(u.tokenUnfreeze,y.uint32(258).fork()).ldelim(),u.tokenGrantKyc!=null&&Object.hasOwnProperty.call(u,"tokenGrantKyc")&&d.proto.TokenGrantKycTransactionBody.encode(u.tokenGrantKyc,y.uint32(266).fork()).ldelim(),u.tokenRevokeKyc!=null&&Object.hasOwnProperty.call(u,"tokenRevokeKyc")&&d.proto.TokenRevokeKycTransactionBody.encode(u.tokenRevokeKyc,y.uint32(274).fork()).ldelim(),u.tokenDeletion!=null&&Object.hasOwnProperty.call(u,"tokenDeletion")&&d.proto.TokenDeleteTransactionBody.encode(u.tokenDeletion,y.uint32(282).fork()).ldelim(),u.tokenUpdate!=null&&Object.hasOwnProperty.call(u,"tokenUpdate")&&d.proto.TokenUpdateTransactionBody.encode(u.tokenUpdate,y.uint32(290).fork()).ldelim(),u.tokenMint!=null&&Object.hasOwnProperty.call(u,"tokenMint")&&d.proto.TokenMintTransactionBody.encode(u.tokenMint,y.uint32(298).fork()).ldelim(),u.tokenBurn!=null&&Object.hasOwnProperty.call(u,"tokenBurn")&&d.proto.TokenBurnTransactionBody.encode(u.tokenBurn,y.uint32(306).fork()).ldelim(),u.tokenWipe!=null&&Object.hasOwnProperty.call(u,"tokenWipe")&&d.proto.TokenWipeAccountTransactionBody.encode(u.tokenWipe,y.uint32(314).fork()).ldelim(),u.tokenAssociate!=null&&Object.hasOwnProperty.call(u,"tokenAssociate")&&d.proto.TokenAssociateTransactionBody.encode(u.tokenAssociate,y.uint32(322).fork()).ldelim(),u.tokenDissociate!=null&&Object.hasOwnProperty.call(u,"tokenDissociate")&&d.proto.TokenDissociateTransactionBody.encode(u.tokenDissociate,y.uint32(330).fork()).ldelim(),u.scheduleCreate!=null&&Object.hasOwnProperty.call(u,"scheduleCreate")&&d.proto.ScheduleCreateTransactionBody.encode(u.scheduleCreate,y.uint32(338).fork()).ldelim(),u.scheduleDelete!=null&&Object.hasOwnProperty.call(u,"scheduleDelete")&&d.proto.ScheduleDeleteTransactionBody.encode(u.scheduleDelete,y.uint32(346).fork()).ldelim(),u.scheduleSign!=null&&Object.hasOwnProperty.call(u,"scheduleSign")&&d.proto.ScheduleSignTransactionBody.encode(u.scheduleSign,y.uint32(354).fork()).ldelim(),u.tokenFeeScheduleUpdate!=null&&Object.hasOwnProperty.call(u,"tokenFeeScheduleUpdate")&&d.proto.TokenFeeScheduleUpdateTransactionBody.encode(u.tokenFeeScheduleUpdate,y.uint32(362).fork()).ldelim(),u.tokenPause!=null&&Object.hasOwnProperty.call(u,"tokenPause")&&d.proto.TokenPauseTransactionBody.encode(u.tokenPause,y.uint32(370).fork()).ldelim(),u.tokenUnpause!=null&&Object.hasOwnProperty.call(u,"tokenUnpause")&&d.proto.TokenUnpauseTransactionBody.encode(u.tokenUnpause,y.uint32(378).fork()).ldelim(),u.cryptoApproveAllowance!=null&&Object.hasOwnProperty.call(u,"cryptoApproveAllowance")&&d.proto.CryptoApproveAllowanceTransactionBody.encode(u.cryptoApproveAllowance,y.uint32(386).fork()).ldelim(),u.cryptoDeleteAllowance!=null&&Object.hasOwnProperty.call(u,"cryptoDeleteAllowance")&&d.proto.CryptoDeleteAllowanceTransactionBody.encode(u.cryptoDeleteAllowance,y.uint32(394).fork()).ldelim(),u.ethereumTransaction!=null&&Object.hasOwnProperty.call(u,"ethereumTransaction")&&d.proto.EthereumTransactionBody.encode(u.ethereumTransaction,y.uint32(402).fork()).ldelim(),u.nodeStakeUpdate!=null&&Object.hasOwnProperty.call(u,"nodeStakeUpdate")&&d.proto.NodeStakeUpdateTransactionBody.encode(u.nodeStakeUpdate,y.uint32(410).fork()).ldelim(),u.utilPrng!=null&&Object.hasOwnProperty.call(u,"utilPrng")&&d.proto.UtilPrngTransactionBody.encode(u.utilPrng,y.uint32(418).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.TransactionBody,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.transactionID=d.proto.TransactionID.decode(u,u.uint32());break}case 2:{w.nodeAccountID=d.proto.AccountID.decode(u,u.uint32());break}case 3:{w.transactionFee=u.uint64();break}case 4:{w.transactionValidDuration=d.proto.Duration.decode(u,u.uint32());break}case 5:{w.generateRecord=u.bool();break}case 6:{w.memo=u.string();break}case 7:{w.contractCall=d.proto.ContractCallTransactionBody.decode(u,u.uint32());break}case 8:{w.contractCreateInstance=d.proto.ContractCreateTransactionBody.decode(u,u.uint32());break}case 9:{w.contractUpdateInstance=d.proto.ContractUpdateTransactionBody.decode(u,u.uint32());break}case 22:{w.contractDeleteInstance=d.proto.ContractDeleteTransactionBody.decode(u,u.uint32());break}case 50:{w.ethereumTransaction=d.proto.EthereumTransactionBody.decode(u,u.uint32());break}case 10:{w.cryptoAddLiveHash=d.proto.CryptoAddLiveHashTransactionBody.decode(u,u.uint32());break}case 48:{w.cryptoApproveAllowance=d.proto.CryptoApproveAllowanceTransactionBody.decode(u,u.uint32());break}case 49:{w.cryptoDeleteAllowance=d.proto.CryptoDeleteAllowanceTransactionBody.decode(u,u.uint32());break}case 11:{w.cryptoCreateAccount=d.proto.CryptoCreateTransactionBody.decode(u,u.uint32());break}case 12:{w.cryptoDelete=d.proto.CryptoDeleteTransactionBody.decode(u,u.uint32());break}case 13:{w.cryptoDeleteLiveHash=d.proto.CryptoDeleteLiveHashTransactionBody.decode(u,u.uint32());break}case 14:{w.cryptoTransfer=d.proto.CryptoTransferTransactionBody.decode(u,u.uint32());break}case 15:{w.cryptoUpdateAccount=d.proto.CryptoUpdateTransactionBody.decode(u,u.uint32());break}case 16:{w.fileAppend=d.proto.FileAppendTransactionBody.decode(u,u.uint32());break}case 17:{w.fileCreate=d.proto.FileCreateTransactionBody.decode(u,u.uint32());break}case 18:{w.fileDelete=d.proto.FileDeleteTransactionBody.decode(u,u.uint32());break}case 19:{w.fileUpdate=d.proto.FileUpdateTransactionBody.decode(u,u.uint32());break}case 20:{w.systemDelete=d.proto.SystemDeleteTransactionBody.decode(u,u.uint32());break}case 21:{w.systemUndelete=d.proto.SystemUndeleteTransactionBody.decode(u,u.uint32());break}case 23:{w.freeze=d.proto.FreezeTransactionBody.decode(u,u.uint32());break}case 24:{w.consensusCreateTopic=d.proto.ConsensusCreateTopicTransactionBody.decode(u,u.uint32());break}case 25:{w.consensusUpdateTopic=d.proto.ConsensusUpdateTopicTransactionBody.decode(u,u.uint32());break}case 26:{w.consensusDeleteTopic=d.proto.ConsensusDeleteTopicTransactionBody.decode(u,u.uint32());break}case 27:{w.consensusSubmitMessage=d.proto.ConsensusSubmitMessageTransactionBody.decode(u,u.uint32());break}case 28:{w.uncheckedSubmit=d.proto.UncheckedSubmitBody.decode(u,u.uint32());break}case 29:{w.tokenCreation=d.proto.TokenCreateTransactionBody.decode(u,u.uint32());break}case 31:{w.tokenFreeze=d.proto.TokenFreezeAccountTransactionBody.decode(u,u.uint32());break}case 32:{w.tokenUnfreeze=d.proto.TokenUnfreezeAccountTransactionBody.decode(u,u.uint32());break}case 33:{w.tokenGrantKyc=d.proto.TokenGrantKycTransactionBody.decode(u,u.uint32());break}case 34:{w.tokenRevokeKyc=d.proto.TokenRevokeKycTransactionBody.decode(u,u.uint32());break}case 35:{w.tokenDeletion=d.proto.TokenDeleteTransactionBody.decode(u,u.uint32());break}case 36:{w.tokenUpdate=d.proto.TokenUpdateTransactionBody.decode(u,u.uint32());break}case 37:{w.tokenMint=d.proto.TokenMintTransactionBody.decode(u,u.uint32());break}case 38:{w.tokenBurn=d.proto.TokenBurnTransactionBody.decode(u,u.uint32());break}case 39:{w.tokenWipe=d.proto.TokenWipeAccountTransactionBody.decode(u,u.uint32());break}case 40:{w.tokenAssociate=d.proto.TokenAssociateTransactionBody.decode(u,u.uint32());break}case 41:{w.tokenDissociate=d.proto.TokenDissociateTransactionBody.decode(u,u.uint32());break}case 45:{w.tokenFeeScheduleUpdate=d.proto.TokenFeeScheduleUpdateTransactionBody.decode(u,u.uint32());break}case 46:{w.tokenPause=d.proto.TokenPauseTransactionBody.decode(u,u.uint32());break}case 47:{w.tokenUnpause=d.proto.TokenUnpauseTransactionBody.decode(u,u.uint32());break}case 42:{w.scheduleCreate=d.proto.ScheduleCreateTransactionBody.decode(u,u.uint32());break}case 43:{w.scheduleDelete=d.proto.ScheduleDeleteTransactionBody.decode(u,u.uint32());break}case 44:{w.scheduleSign=d.proto.ScheduleSignTransactionBody.decode(u,u.uint32());break}case 51:{w.nodeStakeUpdate=d.proto.NodeStakeUpdateTransactionBody.decode(u,u.uint32());break}case 52:{w.utilPrng=d.proto.UtilPrngTransactionBody.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.TransactionBody"},p}(),SystemDeleteTransactionBody:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.fileID=null,p.prototype.contractID=null,p.prototype.expirationTime=null;let a;return Object.defineProperty(p.prototype,"id",{get:h.oneOfGetter(a=["fileID","contractID"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.fileID!=null&&Object.hasOwnProperty.call(u,"fileID")&&d.proto.FileID.encode(u.fileID,y.uint32(10).fork()).ldelim(),u.contractID!=null&&Object.hasOwnProperty.call(u,"contractID")&&d.proto.ContractID.encode(u.contractID,y.uint32(18).fork()).ldelim(),u.expirationTime!=null&&Object.hasOwnProperty.call(u,"expirationTime")&&d.proto.TimestampSeconds.encode(u.expirationTime,y.uint32(26).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.SystemDeleteTransactionBody,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.fileID=d.proto.FileID.decode(u,u.uint32());break}case 2:{w.contractID=d.proto.ContractID.decode(u,u.uint32());break}case 3:{w.expirationTime=d.proto.TimestampSeconds.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.SystemDeleteTransactionBody"},p}(),SystemUndeleteTransactionBody:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.fileID=null,p.prototype.contractID=null;let a;return Object.defineProperty(p.prototype,"id",{get:h.oneOfGetter(a=["fileID","contractID"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.fileID!=null&&Object.hasOwnProperty.call(u,"fileID")&&d.proto.FileID.encode(u.fileID,y.uint32(10).fork()).ldelim(),u.contractID!=null&&Object.hasOwnProperty.call(u,"contractID")&&d.proto.ContractID.encode(u.contractID,y.uint32(18).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.SystemUndeleteTransactionBody,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.fileID=d.proto.FileID.decode(u,u.uint32());break}case 2:{w.contractID=d.proto.ContractID.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.SystemUndeleteTransactionBody"},p}(),FreezeTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.startHour=0,p.prototype.startMin=0,p.prototype.endHour=0,p.prototype.endMin=0,p.prototype.updateFile=null,p.prototype.fileHash=h.newBuffer([]),p.prototype.startTime=null,p.prototype.freezeType=0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.startHour!=null&&Object.hasOwnProperty.call(a,"startHour")&&u.uint32(8).int32(a.startHour),a.startMin!=null&&Object.hasOwnProperty.call(a,"startMin")&&u.uint32(16).int32(a.startMin),a.endHour!=null&&Object.hasOwnProperty.call(a,"endHour")&&u.uint32(24).int32(a.endHour),a.endMin!=null&&Object.hasOwnProperty.call(a,"endMin")&&u.uint32(32).int32(a.endMin),a.updateFile!=null&&Object.hasOwnProperty.call(a,"updateFile")&&d.proto.FileID.encode(a.updateFile,u.uint32(42).fork()).ldelim(),a.fileHash!=null&&Object.hasOwnProperty.call(a,"fileHash")&&u.uint32(50).bytes(a.fileHash),a.startTime!=null&&Object.hasOwnProperty.call(a,"startTime")&&d.proto.Timestamp.encode(a.startTime,u.uint32(58).fork()).ldelim(),a.freezeType!=null&&Object.hasOwnProperty.call(a,"freezeType")&&u.uint32(64).int32(a.freezeType),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FreezeTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.startHour=a.int32();break}case 2:{b.startMin=a.int32();break}case 3:{b.endHour=a.int32();break}case 4:{b.endMin=a.int32();break}case 5:{b.updateFile=d.proto.FileID.decode(a,a.uint32());break}case 6:{b.fileHash=a.bytes();break}case 7:{b.startTime=d.proto.Timestamp.decode(a,a.uint32());break}case 8:{b.freezeType=a.int32();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FreezeTransactionBody"},p}(),FreezeType:function(){const p={},a=Object.create(p);return a[p[0]="UNKNOWN_FREEZE_TYPE"]=0,a[p[1]="FREEZE_ONLY"]=1,a[p[2]="PREPARE_UPGRADE"]=2,a[p[3]="FREEZE_UPGRADE"]=3,a[p[4]="FREEZE_ABORT"]=4,a[p[5]="TELEMETRY_UPGRADE"]=5,a}(),ContractCallTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.contractID=null,p.prototype.gas=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.amount=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.functionParameters=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.contractID!=null&&Object.hasOwnProperty.call(a,"contractID")&&d.proto.ContractID.encode(a.contractID,u.uint32(10).fork()).ldelim(),a.gas!=null&&Object.hasOwnProperty.call(a,"gas")&&u.uint32(16).int64(a.gas),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(24).int64(a.amount),a.functionParameters!=null&&Object.hasOwnProperty.call(a,"functionParameters")&&u.uint32(34).bytes(a.functionParameters),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractCallTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.contractID=d.proto.ContractID.decode(a,a.uint32());break}case 2:{b.gas=a.int64();break}case 3:{b.amount=a.int64();break}case 4:{b.functionParameters=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractCallTransactionBody"},p}(),ContractCreateTransactionBody:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.fileID=null,p.prototype.initcode=null,p.prototype.adminKey=null,p.prototype.gas=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.initialBalance=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.proxyAccountID=null,p.prototype.autoRenewPeriod=null,p.prototype.constructorParameters=h.newBuffer([]),p.prototype.shardID=null,p.prototype.realmID=null,p.prototype.newRealmAdminKey=null,p.prototype.memo="",p.prototype.maxAutomaticTokenAssociations=0,p.prototype.autoRenewAccountId=null,p.prototype.stakedAccountId=null,p.prototype.stakedNodeId=null,p.prototype.declineReward=!1;let a;return Object.defineProperty(p.prototype,"initcodeSource",{get:h.oneOfGetter(a=["fileID","initcode"]),set:h.oneOfSetter(a)}),Object.defineProperty(p.prototype,"stakedId",{get:h.oneOfGetter(a=["stakedAccountId","stakedNodeId"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.fileID!=null&&Object.hasOwnProperty.call(u,"fileID")&&d.proto.FileID.encode(u.fileID,y.uint32(10).fork()).ldelim(),u.adminKey!=null&&Object.hasOwnProperty.call(u,"adminKey")&&d.proto.Key.encode(u.adminKey,y.uint32(26).fork()).ldelim(),u.gas!=null&&Object.hasOwnProperty.call(u,"gas")&&y.uint32(32).int64(u.gas),u.initialBalance!=null&&Object.hasOwnProperty.call(u,"initialBalance")&&y.uint32(40).int64(u.initialBalance),u.proxyAccountID!=null&&Object.hasOwnProperty.call(u,"proxyAccountID")&&d.proto.AccountID.encode(u.proxyAccountID,y.uint32(50).fork()).ldelim(),u.autoRenewPeriod!=null&&Object.hasOwnProperty.call(u,"autoRenewPeriod")&&d.proto.Duration.encode(u.autoRenewPeriod,y.uint32(66).fork()).ldelim(),u.constructorParameters!=null&&Object.hasOwnProperty.call(u,"constructorParameters")&&y.uint32(74).bytes(u.constructorParameters),u.shardID!=null&&Object.hasOwnProperty.call(u,"shardID")&&d.proto.ShardID.encode(u.shardID,y.uint32(82).fork()).ldelim(),u.realmID!=null&&Object.hasOwnProperty.call(u,"realmID")&&d.proto.RealmID.encode(u.realmID,y.uint32(90).fork()).ldelim(),u.newRealmAdminKey!=null&&Object.hasOwnProperty.call(u,"newRealmAdminKey")&&d.proto.Key.encode(u.newRealmAdminKey,y.uint32(98).fork()).ldelim(),u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&y.uint32(106).string(u.memo),u.maxAutomaticTokenAssociations!=null&&Object.hasOwnProperty.call(u,"maxAutomaticTokenAssociations")&&y.uint32(112).int32(u.maxAutomaticTokenAssociations),u.autoRenewAccountId!=null&&Object.hasOwnProperty.call(u,"autoRenewAccountId")&&d.proto.AccountID.encode(u.autoRenewAccountId,y.uint32(122).fork()).ldelim(),u.initcode!=null&&Object.hasOwnProperty.call(u,"initcode")&&y.uint32(130).bytes(u.initcode),u.stakedAccountId!=null&&Object.hasOwnProperty.call(u,"stakedAccountId")&&d.proto.AccountID.encode(u.stakedAccountId,y.uint32(138).fork()).ldelim(),u.stakedNodeId!=null&&Object.hasOwnProperty.call(u,"stakedNodeId")&&y.uint32(144).int64(u.stakedNodeId),u.declineReward!=null&&Object.hasOwnProperty.call(u,"declineReward")&&y.uint32(152).bool(u.declineReward),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.ContractCreateTransactionBody,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.fileID=d.proto.FileID.decode(u,u.uint32());break}case 16:{w.initcode=u.bytes();break}case 3:{w.adminKey=d.proto.Key.decode(u,u.uint32());break}case 4:{w.gas=u.int64();break}case 5:{w.initialBalance=u.int64();break}case 6:{w.proxyAccountID=d.proto.AccountID.decode(u,u.uint32());break}case 8:{w.autoRenewPeriod=d.proto.Duration.decode(u,u.uint32());break}case 9:{w.constructorParameters=u.bytes();break}case 10:{w.shardID=d.proto.ShardID.decode(u,u.uint32());break}case 11:{w.realmID=d.proto.RealmID.decode(u,u.uint32());break}case 12:{w.newRealmAdminKey=d.proto.Key.decode(u,u.uint32());break}case 13:{w.memo=u.string();break}case 14:{w.maxAutomaticTokenAssociations=u.int32();break}case 15:{w.autoRenewAccountId=d.proto.AccountID.decode(u,u.uint32());break}case 17:{w.stakedAccountId=d.proto.AccountID.decode(u,u.uint32());break}case 18:{w.stakedNodeId=u.int64();break}case 19:{w.declineReward=u.bool();break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.ContractCreateTransactionBody"},p}(),ContractUpdateTransactionBody:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.contractID=null,p.prototype.expirationTime=null,p.prototype.adminKey=null,p.prototype.proxyAccountID=null,p.prototype.autoRenewPeriod=null,p.prototype.fileID=null,p.prototype.memo=null,p.prototype.memoWrapper=null,p.prototype.maxAutomaticTokenAssociations=null,p.prototype.autoRenewAccountId=null,p.prototype.stakedAccountId=null,p.prototype.stakedNodeId=null,p.prototype.declineReward=null;let a;return Object.defineProperty(p.prototype,"memoField",{get:h.oneOfGetter(a=["memo","memoWrapper"]),set:h.oneOfSetter(a)}),Object.defineProperty(p.prototype,"stakedId",{get:h.oneOfGetter(a=["stakedAccountId","stakedNodeId"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.contractID!=null&&Object.hasOwnProperty.call(u,"contractID")&&d.proto.ContractID.encode(u.contractID,y.uint32(10).fork()).ldelim(),u.expirationTime!=null&&Object.hasOwnProperty.call(u,"expirationTime")&&d.proto.Timestamp.encode(u.expirationTime,y.uint32(18).fork()).ldelim(),u.adminKey!=null&&Object.hasOwnProperty.call(u,"adminKey")&&d.proto.Key.encode(u.adminKey,y.uint32(26).fork()).ldelim(),u.proxyAccountID!=null&&Object.hasOwnProperty.call(u,"proxyAccountID")&&d.proto.AccountID.encode(u.proxyAccountID,y.uint32(50).fork()).ldelim(),u.autoRenewPeriod!=null&&Object.hasOwnProperty.call(u,"autoRenewPeriod")&&d.proto.Duration.encode(u.autoRenewPeriod,y.uint32(58).fork()).ldelim(),u.fileID!=null&&Object.hasOwnProperty.call(u,"fileID")&&d.proto.FileID.encode(u.fileID,y.uint32(66).fork()).ldelim(),u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&y.uint32(74).string(u.memo),u.memoWrapper!=null&&Object.hasOwnProperty.call(u,"memoWrapper")&&d.google.protobuf.StringValue.encode(u.memoWrapper,y.uint32(82).fork()).ldelim(),u.maxAutomaticTokenAssociations!=null&&Object.hasOwnProperty.call(u,"maxAutomaticTokenAssociations")&&d.google.protobuf.Int32Value.encode(u.maxAutomaticTokenAssociations,y.uint32(90).fork()).ldelim(),u.autoRenewAccountId!=null&&Object.hasOwnProperty.call(u,"autoRenewAccountId")&&d.proto.AccountID.encode(u.autoRenewAccountId,y.uint32(98).fork()).ldelim(),u.stakedAccountId!=null&&Object.hasOwnProperty.call(u,"stakedAccountId")&&d.proto.AccountID.encode(u.stakedAccountId,y.uint32(106).fork()).ldelim(),u.stakedNodeId!=null&&Object.hasOwnProperty.call(u,"stakedNodeId")&&y.uint32(112).int64(u.stakedNodeId),u.declineReward!=null&&Object.hasOwnProperty.call(u,"declineReward")&&d.google.protobuf.BoolValue.encode(u.declineReward,y.uint32(122).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.ContractUpdateTransactionBody,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.contractID=d.proto.ContractID.decode(u,u.uint32());break}case 2:{w.expirationTime=d.proto.Timestamp.decode(u,u.uint32());break}case 3:{w.adminKey=d.proto.Key.decode(u,u.uint32());break}case 6:{w.proxyAccountID=d.proto.AccountID.decode(u,u.uint32());break}case 7:{w.autoRenewPeriod=d.proto.Duration.decode(u,u.uint32());break}case 8:{w.fileID=d.proto.FileID.decode(u,u.uint32());break}case 9:{w.memo=u.string();break}case 10:{w.memoWrapper=d.google.protobuf.StringValue.decode(u,u.uint32());break}case 11:{w.maxAutomaticTokenAssociations=d.google.protobuf.Int32Value.decode(u,u.uint32());break}case 12:{w.autoRenewAccountId=d.proto.AccountID.decode(u,u.uint32());break}case 13:{w.stakedAccountId=d.proto.AccountID.decode(u,u.uint32());break}case 14:{w.stakedNodeId=u.int64();break}case 15:{w.declineReward=d.google.protobuf.BoolValue.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.ContractUpdateTransactionBody"},p}(),LiveHash:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.accountId=null,p.prototype.hash=h.newBuffer([]),p.prototype.keys=null,p.prototype.duration=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.accountId!=null&&Object.hasOwnProperty.call(a,"accountId")&&d.proto.AccountID.encode(a.accountId,u.uint32(10).fork()).ldelim(),a.hash!=null&&Object.hasOwnProperty.call(a,"hash")&&u.uint32(18).bytes(a.hash),a.keys!=null&&Object.hasOwnProperty.call(a,"keys")&&d.proto.KeyList.encode(a.keys,u.uint32(26).fork()).ldelim(),a.duration!=null&&Object.hasOwnProperty.call(a,"duration")&&d.proto.Duration.encode(a.duration,u.uint32(42).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.LiveHash,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.accountId=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.hash=a.bytes();break}case 3:{b.keys=d.proto.KeyList.decode(a,a.uint32());break}case 5:{b.duration=d.proto.Duration.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.LiveHash"},p}(),CryptoAddLiveHashTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.liveHash=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.liveHash!=null&&Object.hasOwnProperty.call(a,"liveHash")&&d.proto.LiveHash.encode(a.liveHash,u.uint32(26).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoAddLiveHashTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 3:{b.liveHash=d.proto.LiveHash.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoAddLiveHashTransactionBody"},p}(),CryptoCreateTransactionBody:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.key=null,p.prototype.initialBalance=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.proxyAccountID=null,p.prototype.sendRecordThreshold=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.receiveRecordThreshold=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.receiverSigRequired=!1,p.prototype.autoRenewPeriod=null,p.prototype.shardID=null,p.prototype.realmID=null,p.prototype.newRealmAdminKey=null,p.prototype.memo="",p.prototype.maxAutomaticTokenAssociations=0,p.prototype.stakedAccountId=null,p.prototype.stakedNodeId=null,p.prototype.declineReward=!1,p.prototype.alias=h.newBuffer([]);let a;return Object.defineProperty(p.prototype,"stakedId",{get:h.oneOfGetter(a=["stakedAccountId","stakedNodeId"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.key!=null&&Object.hasOwnProperty.call(u,"key")&&d.proto.Key.encode(u.key,y.uint32(10).fork()).ldelim(),u.initialBalance!=null&&Object.hasOwnProperty.call(u,"initialBalance")&&y.uint32(16).uint64(u.initialBalance),u.proxyAccountID!=null&&Object.hasOwnProperty.call(u,"proxyAccountID")&&d.proto.AccountID.encode(u.proxyAccountID,y.uint32(26).fork()).ldelim(),u.sendRecordThreshold!=null&&Object.hasOwnProperty.call(u,"sendRecordThreshold")&&y.uint32(48).uint64(u.sendRecordThreshold),u.receiveRecordThreshold!=null&&Object.hasOwnProperty.call(u,"receiveRecordThreshold")&&y.uint32(56).uint64(u.receiveRecordThreshold),u.receiverSigRequired!=null&&Object.hasOwnProperty.call(u,"receiverSigRequired")&&y.uint32(64).bool(u.receiverSigRequired),u.autoRenewPeriod!=null&&Object.hasOwnProperty.call(u,"autoRenewPeriod")&&d.proto.Duration.encode(u.autoRenewPeriod,y.uint32(74).fork()).ldelim(),u.shardID!=null&&Object.hasOwnProperty.call(u,"shardID")&&d.proto.ShardID.encode(u.shardID,y.uint32(82).fork()).ldelim(),u.realmID!=null&&Object.hasOwnProperty.call(u,"realmID")&&d.proto.RealmID.encode(u.realmID,y.uint32(90).fork()).ldelim(),u.newRealmAdminKey!=null&&Object.hasOwnProperty.call(u,"newRealmAdminKey")&&d.proto.Key.encode(u.newRealmAdminKey,y.uint32(98).fork()).ldelim(),u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&y.uint32(106).string(u.memo),u.maxAutomaticTokenAssociations!=null&&Object.hasOwnProperty.call(u,"maxAutomaticTokenAssociations")&&y.uint32(112).int32(u.maxAutomaticTokenAssociations),u.stakedAccountId!=null&&Object.hasOwnProperty.call(u,"stakedAccountId")&&d.proto.AccountID.encode(u.stakedAccountId,y.uint32(122).fork()).ldelim(),u.stakedNodeId!=null&&Object.hasOwnProperty.call(u,"stakedNodeId")&&y.uint32(128).int64(u.stakedNodeId),u.declineReward!=null&&Object.hasOwnProperty.call(u,"declineReward")&&y.uint32(136).bool(u.declineReward),u.alias!=null&&Object.hasOwnProperty.call(u,"alias")&&y.uint32(146).bytes(u.alias),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.CryptoCreateTransactionBody,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.key=d.proto.Key.decode(u,u.uint32());break}case 2:{w.initialBalance=u.uint64();break}case 3:{w.proxyAccountID=d.proto.AccountID.decode(u,u.uint32());break}case 6:{w.sendRecordThreshold=u.uint64();break}case 7:{w.receiveRecordThreshold=u.uint64();break}case 8:{w.receiverSigRequired=u.bool();break}case 9:{w.autoRenewPeriod=d.proto.Duration.decode(u,u.uint32());break}case 10:{w.shardID=d.proto.ShardID.decode(u,u.uint32());break}case 11:{w.realmID=d.proto.RealmID.decode(u,u.uint32());break}case 12:{w.newRealmAdminKey=d.proto.Key.decode(u,u.uint32());break}case 13:{w.memo=u.string();break}case 14:{w.maxAutomaticTokenAssociations=u.int32();break}case 15:{w.stakedAccountId=d.proto.AccountID.decode(u,u.uint32());break}case 16:{w.stakedNodeId=u.int64();break}case 17:{w.declineReward=u.bool();break}case 18:{w.alias=u.bytes();break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.CryptoCreateTransactionBody"},p}(),CryptoDeleteTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.transferAccountID=null,p.prototype.deleteAccountID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.transferAccountID!=null&&Object.hasOwnProperty.call(a,"transferAccountID")&&d.proto.AccountID.encode(a.transferAccountID,u.uint32(10).fork()).ldelim(),a.deleteAccountID!=null&&Object.hasOwnProperty.call(a,"deleteAccountID")&&d.proto.AccountID.encode(a.deleteAccountID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoDeleteTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.transferAccountID=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.deleteAccountID=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoDeleteTransactionBody"},p}(),CryptoDeleteLiveHashTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.accountOfLiveHash=null,p.prototype.liveHashToDelete=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.accountOfLiveHash!=null&&Object.hasOwnProperty.call(a,"accountOfLiveHash")&&d.proto.AccountID.encode(a.accountOfLiveHash,u.uint32(10).fork()).ldelim(),a.liveHashToDelete!=null&&Object.hasOwnProperty.call(a,"liveHashToDelete")&&u.uint32(18).bytes(a.liveHashToDelete),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoDeleteLiveHashTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.accountOfLiveHash=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.liveHashToDelete=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoDeleteLiveHashTransactionBody"},p}(),CryptoTransferTransactionBody:function(){function p(a){if(this.tokenTransfers=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.transfers=null,p.prototype.tokenTransfers=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.transfers!=null&&Object.hasOwnProperty.call(a,"transfers")&&d.proto.TransferList.encode(a.transfers,u.uint32(10).fork()).ldelim(),a.tokenTransfers!=null&&a.tokenTransfers.length)for(var y=0;y<a.tokenTransfers.length;++y)d.proto.TokenTransferList.encode(a.tokenTransfers[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoTransferTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.transfers=d.proto.TransferList.decode(a,a.uint32());break}case 2:{b.tokenTransfers&&b.tokenTransfers.length||(b.tokenTransfers=[]),b.tokenTransfers.push(d.proto.TokenTransferList.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoTransferTransactionBody"},p}(),CryptoUpdateTransactionBody:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.accountIDToUpdate=null,p.prototype.key=null,p.prototype.proxyAccountID=null,p.prototype.proxyFraction=0,p.prototype.sendRecordThreshold=null,p.prototype.sendRecordThresholdWrapper=null,p.prototype.receiveRecordThreshold=null,p.prototype.receiveRecordThresholdWrapper=null,p.prototype.autoRenewPeriod=null,p.prototype.expirationTime=null,p.prototype.receiverSigRequired=null,p.prototype.receiverSigRequiredWrapper=null,p.prototype.memo=null,p.prototype.maxAutomaticTokenAssociations=null,p.prototype.stakedAccountId=null,p.prototype.stakedNodeId=null,p.prototype.declineReward=null;let a;return Object.defineProperty(p.prototype,"sendRecordThresholdField",{get:h.oneOfGetter(a=["sendRecordThreshold","sendRecordThresholdWrapper"]),set:h.oneOfSetter(a)}),Object.defineProperty(p.prototype,"receiveRecordThresholdField",{get:h.oneOfGetter(a=["receiveRecordThreshold","receiveRecordThresholdWrapper"]),set:h.oneOfSetter(a)}),Object.defineProperty(p.prototype,"receiverSigRequiredField",{get:h.oneOfGetter(a=["receiverSigRequired","receiverSigRequiredWrapper"]),set:h.oneOfSetter(a)}),Object.defineProperty(p.prototype,"stakedId",{get:h.oneOfGetter(a=["stakedAccountId","stakedNodeId"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.accountIDToUpdate!=null&&Object.hasOwnProperty.call(u,"accountIDToUpdate")&&d.proto.AccountID.encode(u.accountIDToUpdate,y.uint32(18).fork()).ldelim(),u.key!=null&&Object.hasOwnProperty.call(u,"key")&&d.proto.Key.encode(u.key,y.uint32(26).fork()).ldelim(),u.proxyAccountID!=null&&Object.hasOwnProperty.call(u,"proxyAccountID")&&d.proto.AccountID.encode(u.proxyAccountID,y.uint32(34).fork()).ldelim(),u.proxyFraction!=null&&Object.hasOwnProperty.call(u,"proxyFraction")&&y.uint32(40).int32(u.proxyFraction),u.sendRecordThreshold!=null&&Object.hasOwnProperty.call(u,"sendRecordThreshold")&&y.uint32(48).uint64(u.sendRecordThreshold),u.receiveRecordThreshold!=null&&Object.hasOwnProperty.call(u,"receiveRecordThreshold")&&y.uint32(56).uint64(u.receiveRecordThreshold),u.autoRenewPeriod!=null&&Object.hasOwnProperty.call(u,"autoRenewPeriod")&&d.proto.Duration.encode(u.autoRenewPeriod,y.uint32(66).fork()).ldelim(),u.expirationTime!=null&&Object.hasOwnProperty.call(u,"expirationTime")&&d.proto.Timestamp.encode(u.expirationTime,y.uint32(74).fork()).ldelim(),u.receiverSigRequired!=null&&Object.hasOwnProperty.call(u,"receiverSigRequired")&&y.uint32(80).bool(u.receiverSigRequired),u.sendRecordThresholdWrapper!=null&&Object.hasOwnProperty.call(u,"sendRecordThresholdWrapper")&&d.google.protobuf.UInt64Value.encode(u.sendRecordThresholdWrapper,y.uint32(90).fork()).ldelim(),u.receiveRecordThresholdWrapper!=null&&Object.hasOwnProperty.call(u,"receiveRecordThresholdWrapper")&&d.google.protobuf.UInt64Value.encode(u.receiveRecordThresholdWrapper,y.uint32(98).fork()).ldelim(),u.receiverSigRequiredWrapper!=null&&Object.hasOwnProperty.call(u,"receiverSigRequiredWrapper")&&d.google.protobuf.BoolValue.encode(u.receiverSigRequiredWrapper,y.uint32(106).fork()).ldelim(),u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&d.google.protobuf.StringValue.encode(u.memo,y.uint32(114).fork()).ldelim(),u.maxAutomaticTokenAssociations!=null&&Object.hasOwnProperty.call(u,"maxAutomaticTokenAssociations")&&d.google.protobuf.Int32Value.encode(u.maxAutomaticTokenAssociations,y.uint32(122).fork()).ldelim(),u.stakedAccountId!=null&&Object.hasOwnProperty.call(u,"stakedAccountId")&&d.proto.AccountID.encode(u.stakedAccountId,y.uint32(130).fork()).ldelim(),u.stakedNodeId!=null&&Object.hasOwnProperty.call(u,"stakedNodeId")&&y.uint32(136).int64(u.stakedNodeId),u.declineReward!=null&&Object.hasOwnProperty.call(u,"declineReward")&&d.google.protobuf.BoolValue.encode(u.declineReward,y.uint32(146).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.CryptoUpdateTransactionBody,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 2:{w.accountIDToUpdate=d.proto.AccountID.decode(u,u.uint32());break}case 3:{w.key=d.proto.Key.decode(u,u.uint32());break}case 4:{w.proxyAccountID=d.proto.AccountID.decode(u,u.uint32());break}case 5:{w.proxyFraction=u.int32();break}case 6:{w.sendRecordThreshold=u.uint64();break}case 11:{w.sendRecordThresholdWrapper=d.google.protobuf.UInt64Value.decode(u,u.uint32());break}case 7:{w.receiveRecordThreshold=u.uint64();break}case 12:{w.receiveRecordThresholdWrapper=d.google.protobuf.UInt64Value.decode(u,u.uint32());break}case 8:{w.autoRenewPeriod=d.proto.Duration.decode(u,u.uint32());break}case 9:{w.expirationTime=d.proto.Timestamp.decode(u,u.uint32());break}case 10:{w.receiverSigRequired=u.bool();break}case 13:{w.receiverSigRequiredWrapper=d.google.protobuf.BoolValue.decode(u,u.uint32());break}case 14:{w.memo=d.google.protobuf.StringValue.decode(u,u.uint32());break}case 15:{w.maxAutomaticTokenAssociations=d.google.protobuf.Int32Value.decode(u,u.uint32());break}case 16:{w.stakedAccountId=d.proto.AccountID.decode(u,u.uint32());break}case 17:{w.stakedNodeId=u.int64();break}case 18:{w.declineReward=d.google.protobuf.BoolValue.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.CryptoUpdateTransactionBody"},p}(),CryptoApproveAllowanceTransactionBody:function(){function p(a){if(this.cryptoAllowances=[],this.nftAllowances=[],this.tokenAllowances=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.cryptoAllowances=h.emptyArray,p.prototype.nftAllowances=h.emptyArray,p.prototype.tokenAllowances=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.cryptoAllowances!=null&&a.cryptoAllowances.length)for(var y=0;y<a.cryptoAllowances.length;++y)d.proto.CryptoAllowance.encode(a.cryptoAllowances[y],u.uint32(10).fork()).ldelim();if(a.nftAllowances!=null&&a.nftAllowances.length)for(var y=0;y<a.nftAllowances.length;++y)d.proto.NftAllowance.encode(a.nftAllowances[y],u.uint32(18).fork()).ldelim();if(a.tokenAllowances!=null&&a.tokenAllowances.length)for(var y=0;y<a.tokenAllowances.length;++y)d.proto.TokenAllowance.encode(a.tokenAllowances[y],u.uint32(26).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoApproveAllowanceTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.cryptoAllowances&&b.cryptoAllowances.length||(b.cryptoAllowances=[]),b.cryptoAllowances.push(d.proto.CryptoAllowance.decode(a,a.uint32()));break}case 2:{b.nftAllowances&&b.nftAllowances.length||(b.nftAllowances=[]),b.nftAllowances.push(d.proto.NftAllowance.decode(a,a.uint32()));break}case 3:{b.tokenAllowances&&b.tokenAllowances.length||(b.tokenAllowances=[]),b.tokenAllowances.push(d.proto.TokenAllowance.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoApproveAllowanceTransactionBody"},p}(),CryptoAllowance:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.owner=null,p.prototype.spender=null,p.prototype.amount=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.owner!=null&&Object.hasOwnProperty.call(a,"owner")&&d.proto.AccountID.encode(a.owner,u.uint32(10).fork()).ldelim(),a.spender!=null&&Object.hasOwnProperty.call(a,"spender")&&d.proto.AccountID.encode(a.spender,u.uint32(18).fork()).ldelim(),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(24).int64(a.amount),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoAllowance,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.owner=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.spender=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.amount=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoAllowance"},p}(),NftAllowance:function(){function p(a){if(this.serialNumbers=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenId=null,p.prototype.owner=null,p.prototype.spender=null,p.prototype.serialNumbers=h.emptyArray,p.prototype.approvedForAll=null,p.prototype.delegatingSpender=null,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(10).fork()).ldelim(),a.owner!=null&&Object.hasOwnProperty.call(a,"owner")&&d.proto.AccountID.encode(a.owner,u.uint32(18).fork()).ldelim(),a.spender!=null&&Object.hasOwnProperty.call(a,"spender")&&d.proto.AccountID.encode(a.spender,u.uint32(26).fork()).ldelim(),a.serialNumbers!=null&&a.serialNumbers.length){u.uint32(34).fork();for(var y=0;y<a.serialNumbers.length;++y)u.int64(a.serialNumbers[y]);u.ldelim()}return a.approvedForAll!=null&&Object.hasOwnProperty.call(a,"approvedForAll")&&d.google.protobuf.BoolValue.encode(a.approvedForAll,u.uint32(42).fork()).ldelim(),a.delegatingSpender!=null&&Object.hasOwnProperty.call(a,"delegatingSpender")&&d.proto.AccountID.encode(a.delegatingSpender,u.uint32(50).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NftAllowance,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.owner=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.spender=d.proto.AccountID.decode(a,a.uint32());break}case 4:{if(b.serialNumbers&&b.serialNumbers.length||(b.serialNumbers=[]),(7&w)==2)for(var T=a.uint32()+a.pos;a.pos<T;)b.serialNumbers.push(a.int64());else b.serialNumbers.push(a.int64());break}case 5:{b.approvedForAll=d.google.protobuf.BoolValue.decode(a,a.uint32());break}case 6:{b.delegatingSpender=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NftAllowance"},p}(),TokenAllowance:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenId=null,p.prototype.owner=null,p.prototype.spender=null,p.prototype.amount=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(10).fork()).ldelim(),a.owner!=null&&Object.hasOwnProperty.call(a,"owner")&&d.proto.AccountID.encode(a.owner,u.uint32(18).fork()).ldelim(),a.spender!=null&&Object.hasOwnProperty.call(a,"spender")&&d.proto.AccountID.encode(a.spender,u.uint32(26).fork()).ldelim(),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(32).int64(a.amount),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenAllowance,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.owner=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.spender=d.proto.AccountID.decode(a,a.uint32());break}case 4:{b.amount=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenAllowance"},p}(),CryptoDeleteAllowanceTransactionBody:function(){function p(a){if(this.nftAllowances=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.nftAllowances=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.nftAllowances!=null&&a.nftAllowances.length)for(var y=0;y<a.nftAllowances.length;++y)d.proto.NftRemoveAllowance.encode(a.nftAllowances[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoDeleteAllowanceTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 2:{b.nftAllowances&&b.nftAllowances.length||(b.nftAllowances=[]),b.nftAllowances.push(d.proto.NftRemoveAllowance.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoDeleteAllowanceTransactionBody"},p}(),NftRemoveAllowance:function(){function p(a){if(this.serialNumbers=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenId=null,p.prototype.owner=null,p.prototype.serialNumbers=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(10).fork()).ldelim(),a.owner!=null&&Object.hasOwnProperty.call(a,"owner")&&d.proto.AccountID.encode(a.owner,u.uint32(18).fork()).ldelim(),a.serialNumbers!=null&&a.serialNumbers.length){u.uint32(26).fork();for(var y=0;y<a.serialNumbers.length;++y)u.int64(a.serialNumbers[y]);u.ldelim()}return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NftRemoveAllowance,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.owner=d.proto.AccountID.decode(a,a.uint32());break}case 3:{if(b.serialNumbers&&b.serialNumbers.length||(b.serialNumbers=[]),(7&w)==2)for(var T=a.uint32()+a.pos;a.pos<T;)b.serialNumbers.push(a.int64());else b.serialNumbers.push(a.int64());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NftRemoveAllowance"},p}(),EthereumTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.ethereumData=h.newBuffer([]),p.prototype.callData=null,p.prototype.maxGasAllowance=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.ethereumData!=null&&Object.hasOwnProperty.call(a,"ethereumData")&&u.uint32(10).bytes(a.ethereumData),a.callData!=null&&Object.hasOwnProperty.call(a,"callData")&&d.proto.FileID.encode(a.callData,u.uint32(18).fork()).ldelim(),a.maxGasAllowance!=null&&Object.hasOwnProperty.call(a,"maxGasAllowance")&&u.uint32(24).int64(a.maxGasAllowance),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.EthereumTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.ethereumData=a.bytes();break}case 2:{b.callData=d.proto.FileID.decode(a,a.uint32());break}case 3:{b.maxGasAllowance=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.EthereumTransactionBody"},p}(),FileAppendTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.fileID=null,p.prototype.contents=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.fileID!=null&&Object.hasOwnProperty.call(a,"fileID")&&d.proto.FileID.encode(a.fileID,u.uint32(18).fork()).ldelim(),a.contents!=null&&Object.hasOwnProperty.call(a,"contents")&&u.uint32(34).bytes(a.contents),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FileAppendTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 2:{b.fileID=d.proto.FileID.decode(a,a.uint32());break}case 4:{b.contents=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FileAppendTransactionBody"},p}(),FileCreateTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.expirationTime=null,p.prototype.keys=null,p.prototype.contents=h.newBuffer([]),p.prototype.shardID=null,p.prototype.realmID=null,p.prototype.newRealmAdminKey=null,p.prototype.memo="",p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.expirationTime!=null&&Object.hasOwnProperty.call(a,"expirationTime")&&d.proto.Timestamp.encode(a.expirationTime,u.uint32(18).fork()).ldelim(),a.keys!=null&&Object.hasOwnProperty.call(a,"keys")&&d.proto.KeyList.encode(a.keys,u.uint32(26).fork()).ldelim(),a.contents!=null&&Object.hasOwnProperty.call(a,"contents")&&u.uint32(34).bytes(a.contents),a.shardID!=null&&Object.hasOwnProperty.call(a,"shardID")&&d.proto.ShardID.encode(a.shardID,u.uint32(42).fork()).ldelim(),a.realmID!=null&&Object.hasOwnProperty.call(a,"realmID")&&d.proto.RealmID.encode(a.realmID,u.uint32(50).fork()).ldelim(),a.newRealmAdminKey!=null&&Object.hasOwnProperty.call(a,"newRealmAdminKey")&&d.proto.Key.encode(a.newRealmAdminKey,u.uint32(58).fork()).ldelim(),a.memo!=null&&Object.hasOwnProperty.call(a,"memo")&&u.uint32(66).string(a.memo),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FileCreateTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 2:{b.expirationTime=d.proto.Timestamp.decode(a,a.uint32());break}case 3:{b.keys=d.proto.KeyList.decode(a,a.uint32());break}case 4:{b.contents=a.bytes();break}case 5:{b.shardID=d.proto.ShardID.decode(a,a.uint32());break}case 6:{b.realmID=d.proto.RealmID.decode(a,a.uint32());break}case 7:{b.newRealmAdminKey=d.proto.Key.decode(a,a.uint32());break}case 8:{b.memo=a.string();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FileCreateTransactionBody"},p}(),FileDeleteTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.fileID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.fileID!=null&&Object.hasOwnProperty.call(a,"fileID")&&d.proto.FileID.encode(a.fileID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FileDeleteTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 2:{b.fileID=d.proto.FileID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FileDeleteTransactionBody"},p}(),FileUpdateTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.fileID=null,p.prototype.expirationTime=null,p.prototype.keys=null,p.prototype.contents=h.newBuffer([]),p.prototype.memo=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.fileID!=null&&Object.hasOwnProperty.call(a,"fileID")&&d.proto.FileID.encode(a.fileID,u.uint32(10).fork()).ldelim(),a.expirationTime!=null&&Object.hasOwnProperty.call(a,"expirationTime")&&d.proto.Timestamp.encode(a.expirationTime,u.uint32(18).fork()).ldelim(),a.keys!=null&&Object.hasOwnProperty.call(a,"keys")&&d.proto.KeyList.encode(a.keys,u.uint32(26).fork()).ldelim(),a.contents!=null&&Object.hasOwnProperty.call(a,"contents")&&u.uint32(34).bytes(a.contents),a.memo!=null&&Object.hasOwnProperty.call(a,"memo")&&d.google.protobuf.StringValue.encode(a.memo,u.uint32(42).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FileUpdateTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.fileID=d.proto.FileID.decode(a,a.uint32());break}case 2:{b.expirationTime=d.proto.Timestamp.decode(a,a.uint32());break}case 3:{b.keys=d.proto.KeyList.decode(a,a.uint32());break}case 4:{b.contents=a.bytes();break}case 5:{b.memo=d.google.protobuf.StringValue.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FileUpdateTransactionBody"},p}(),ContractDeleteTransactionBody:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.contractID=null,p.prototype.transferAccountID=null,p.prototype.transferContractID=null,p.prototype.permanentRemoval=!1;let a;return Object.defineProperty(p.prototype,"obtainers",{get:h.oneOfGetter(a=["transferAccountID","transferContractID"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.contractID!=null&&Object.hasOwnProperty.call(u,"contractID")&&d.proto.ContractID.encode(u.contractID,y.uint32(10).fork()).ldelim(),u.transferAccountID!=null&&Object.hasOwnProperty.call(u,"transferAccountID")&&d.proto.AccountID.encode(u.transferAccountID,y.uint32(18).fork()).ldelim(),u.transferContractID!=null&&Object.hasOwnProperty.call(u,"transferContractID")&&d.proto.ContractID.encode(u.transferContractID,y.uint32(26).fork()).ldelim(),u.permanentRemoval!=null&&Object.hasOwnProperty.call(u,"permanentRemoval")&&y.uint32(32).bool(u.permanentRemoval),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.ContractDeleteTransactionBody,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.contractID=d.proto.ContractID.decode(u,u.uint32());break}case 2:{w.transferAccountID=d.proto.AccountID.decode(u,u.uint32());break}case 3:{w.transferContractID=d.proto.ContractID.decode(u,u.uint32());break}case 4:{w.permanentRemoval=u.bool();break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.ContractDeleteTransactionBody"},p}(),ConsensusUpdateTopicTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.topicID=null,p.prototype.memo=null,p.prototype.expirationTime=null,p.prototype.adminKey=null,p.prototype.submitKey=null,p.prototype.autoRenewPeriod=null,p.prototype.autoRenewAccount=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.topicID!=null&&Object.hasOwnProperty.call(a,"topicID")&&d.proto.TopicID.encode(a.topicID,u.uint32(10).fork()).ldelim(),a.memo!=null&&Object.hasOwnProperty.call(a,"memo")&&d.google.protobuf.StringValue.encode(a.memo,u.uint32(18).fork()).ldelim(),a.expirationTime!=null&&Object.hasOwnProperty.call(a,"expirationTime")&&d.proto.Timestamp.encode(a.expirationTime,u.uint32(34).fork()).ldelim(),a.adminKey!=null&&Object.hasOwnProperty.call(a,"adminKey")&&d.proto.Key.encode(a.adminKey,u.uint32(50).fork()).ldelim(),a.submitKey!=null&&Object.hasOwnProperty.call(a,"submitKey")&&d.proto.Key.encode(a.submitKey,u.uint32(58).fork()).ldelim(),a.autoRenewPeriod!=null&&Object.hasOwnProperty.call(a,"autoRenewPeriod")&&d.proto.Duration.encode(a.autoRenewPeriod,u.uint32(66).fork()).ldelim(),a.autoRenewAccount!=null&&Object.hasOwnProperty.call(a,"autoRenewAccount")&&d.proto.AccountID.encode(a.autoRenewAccount,u.uint32(74).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ConsensusUpdateTopicTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.topicID=d.proto.TopicID.decode(a,a.uint32());break}case 2:{b.memo=d.google.protobuf.StringValue.decode(a,a.uint32());break}case 4:{b.expirationTime=d.proto.Timestamp.decode(a,a.uint32());break}case 6:{b.adminKey=d.proto.Key.decode(a,a.uint32());break}case 7:{b.submitKey=d.proto.Key.decode(a,a.uint32());break}case 8:{b.autoRenewPeriod=d.proto.Duration.decode(a,a.uint32());break}case 9:{b.autoRenewAccount=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ConsensusUpdateTopicTransactionBody"},p}(),ConsensusMessageChunkInfo:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.initialTransactionID=null,p.prototype.total=0,p.prototype.number=0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.initialTransactionID!=null&&Object.hasOwnProperty.call(a,"initialTransactionID")&&d.proto.TransactionID.encode(a.initialTransactionID,u.uint32(10).fork()).ldelim(),a.total!=null&&Object.hasOwnProperty.call(a,"total")&&u.uint32(16).int32(a.total),a.number!=null&&Object.hasOwnProperty.call(a,"number")&&u.uint32(24).int32(a.number),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ConsensusMessageChunkInfo,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.initialTransactionID=d.proto.TransactionID.decode(a,a.uint32());break}case 2:{b.total=a.int32();break}case 3:{b.number=a.int32();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ConsensusMessageChunkInfo"},p}(),ConsensusSubmitMessageTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.topicID=null,p.prototype.message=h.newBuffer([]),p.prototype.chunkInfo=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.topicID!=null&&Object.hasOwnProperty.call(a,"topicID")&&d.proto.TopicID.encode(a.topicID,u.uint32(10).fork()).ldelim(),a.message!=null&&Object.hasOwnProperty.call(a,"message")&&u.uint32(18).bytes(a.message),a.chunkInfo!=null&&Object.hasOwnProperty.call(a,"chunkInfo")&&d.proto.ConsensusMessageChunkInfo.encode(a.chunkInfo,u.uint32(26).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ConsensusSubmitMessageTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.topicID=d.proto.TopicID.decode(a,a.uint32());break}case 2:{b.message=a.bytes();break}case 3:{b.chunkInfo=d.proto.ConsensusMessageChunkInfo.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ConsensusSubmitMessageTransactionBody"},p}(),UncheckedSubmitBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.transactionBytes=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.transactionBytes!=null&&Object.hasOwnProperty.call(a,"transactionBytes")&&u.uint32(10).bytes(a.transactionBytes),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.UncheckedSubmitBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.transactionBytes=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.UncheckedSubmitBody"},p}(),TokenCreateTransactionBody:function(){function p(a){if(this.customFees=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.name="",p.prototype.symbol="",p.prototype.decimals=0,p.prototype.initialSupply=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.treasury=null,p.prototype.adminKey=null,p.prototype.kycKey=null,p.prototype.freezeKey=null,p.prototype.wipeKey=null,p.prototype.supplyKey=null,p.prototype.freezeDefault=!1,p.prototype.expiry=null,p.prototype.autoRenewAccount=null,p.prototype.autoRenewPeriod=null,p.prototype.memo="",p.prototype.tokenType=0,p.prototype.supplyType=0,p.prototype.maxSupply=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.feeScheduleKey=null,p.prototype.customFees=h.emptyArray,p.prototype.pauseKey=null,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.name!=null&&Object.hasOwnProperty.call(a,"name")&&u.uint32(10).string(a.name),a.symbol!=null&&Object.hasOwnProperty.call(a,"symbol")&&u.uint32(18).string(a.symbol),a.decimals!=null&&Object.hasOwnProperty.call(a,"decimals")&&u.uint32(24).uint32(a.decimals),a.initialSupply!=null&&Object.hasOwnProperty.call(a,"initialSupply")&&u.uint32(32).uint64(a.initialSupply),a.treasury!=null&&Object.hasOwnProperty.call(a,"treasury")&&d.proto.AccountID.encode(a.treasury,u.uint32(42).fork()).ldelim(),a.adminKey!=null&&Object.hasOwnProperty.call(a,"adminKey")&&d.proto.Key.encode(a.adminKey,u.uint32(50).fork()).ldelim(),a.kycKey!=null&&Object.hasOwnProperty.call(a,"kycKey")&&d.proto.Key.encode(a.kycKey,u.uint32(58).fork()).ldelim(),a.freezeKey!=null&&Object.hasOwnProperty.call(a,"freezeKey")&&d.proto.Key.encode(a.freezeKey,u.uint32(66).fork()).ldelim(),a.wipeKey!=null&&Object.hasOwnProperty.call(a,"wipeKey")&&d.proto.Key.encode(a.wipeKey,u.uint32(74).fork()).ldelim(),a.supplyKey!=null&&Object.hasOwnProperty.call(a,"supplyKey")&&d.proto.Key.encode(a.supplyKey,u.uint32(82).fork()).ldelim(),a.freezeDefault!=null&&Object.hasOwnProperty.call(a,"freezeDefault")&&u.uint32(88).bool(a.freezeDefault),a.expiry!=null&&Object.hasOwnProperty.call(a,"expiry")&&d.proto.Timestamp.encode(a.expiry,u.uint32(106).fork()).ldelim(),a.autoRenewAccount!=null&&Object.hasOwnProperty.call(a,"autoRenewAccount")&&d.proto.AccountID.encode(a.autoRenewAccount,u.uint32(114).fork()).ldelim(),a.autoRenewPeriod!=null&&Object.hasOwnProperty.call(a,"autoRenewPeriod")&&d.proto.Duration.encode(a.autoRenewPeriod,u.uint32(122).fork()).ldelim(),a.memo!=null&&Object.hasOwnProperty.call(a,"memo")&&u.uint32(130).string(a.memo),a.tokenType!=null&&Object.hasOwnProperty.call(a,"tokenType")&&u.uint32(136).int32(a.tokenType),a.supplyType!=null&&Object.hasOwnProperty.call(a,"supplyType")&&u.uint32(144).int32(a.supplyType),a.maxSupply!=null&&Object.hasOwnProperty.call(a,"maxSupply")&&u.uint32(152).int64(a.maxSupply),a.feeScheduleKey!=null&&Object.hasOwnProperty.call(a,"feeScheduleKey")&&d.proto.Key.encode(a.feeScheduleKey,u.uint32(162).fork()).ldelim(),a.customFees!=null&&a.customFees.length)for(var y=0;y<a.customFees.length;++y)d.proto.CustomFee.encode(a.customFees[y],u.uint32(170).fork()).ldelim();return a.pauseKey!=null&&Object.hasOwnProperty.call(a,"pauseKey")&&d.proto.Key.encode(a.pauseKey,u.uint32(178).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenCreateTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.name=a.string();break}case 2:{b.symbol=a.string();break}case 3:{b.decimals=a.uint32();break}case 4:{b.initialSupply=a.uint64();break}case 5:{b.treasury=d.proto.AccountID.decode(a,a.uint32());break}case 6:{b.adminKey=d.proto.Key.decode(a,a.uint32());break}case 7:{b.kycKey=d.proto.Key.decode(a,a.uint32());break}case 8:{b.freezeKey=d.proto.Key.decode(a,a.uint32());break}case 9:{b.wipeKey=d.proto.Key.decode(a,a.uint32());break}case 10:{b.supplyKey=d.proto.Key.decode(a,a.uint32());break}case 11:{b.freezeDefault=a.bool();break}case 13:{b.expiry=d.proto.Timestamp.decode(a,a.uint32());break}case 14:{b.autoRenewAccount=d.proto.AccountID.decode(a,a.uint32());break}case 15:{b.autoRenewPeriod=d.proto.Duration.decode(a,a.uint32());break}case 16:{b.memo=a.string();break}case 17:{b.tokenType=a.int32();break}case 18:{b.supplyType=a.int32();break}case 19:{b.maxSupply=a.int64();break}case 20:{b.feeScheduleKey=d.proto.Key.decode(a,a.uint32());break}case 21:{b.customFees&&b.customFees.length||(b.customFees=[]),b.customFees.push(d.proto.CustomFee.decode(a,a.uint32()));break}case 22:{b.pauseKey=d.proto.Key.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenCreateTransactionBody"},p}(),FractionalFee:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.fractionalAmount=null,p.prototype.minimumAmount=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.maximumAmount=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.netOfTransfers=!1,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.fractionalAmount!=null&&Object.hasOwnProperty.call(a,"fractionalAmount")&&d.proto.Fraction.encode(a.fractionalAmount,u.uint32(10).fork()).ldelim(),a.minimumAmount!=null&&Object.hasOwnProperty.call(a,"minimumAmount")&&u.uint32(16).int64(a.minimumAmount),a.maximumAmount!=null&&Object.hasOwnProperty.call(a,"maximumAmount")&&u.uint32(24).int64(a.maximumAmount),a.netOfTransfers!=null&&Object.hasOwnProperty.call(a,"netOfTransfers")&&u.uint32(32).bool(a.netOfTransfers),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FractionalFee,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.fractionalAmount=d.proto.Fraction.decode(a,a.uint32());break}case 2:{b.minimumAmount=a.int64();break}case 3:{b.maximumAmount=a.int64();break}case 4:{b.netOfTransfers=a.bool();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FractionalFee"},p}(),FixedFee:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.amount=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.denominatingTokenId=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(8).int64(a.amount),a.denominatingTokenId!=null&&Object.hasOwnProperty.call(a,"denominatingTokenId")&&d.proto.TokenID.encode(a.denominatingTokenId,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FixedFee,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.amount=a.int64();break}case 2:{b.denominatingTokenId=d.proto.TokenID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FixedFee"},p}(),RoyaltyFee:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.exchangeValueFraction=null,p.prototype.fallbackFee=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.exchangeValueFraction!=null&&Object.hasOwnProperty.call(a,"exchangeValueFraction")&&d.proto.Fraction.encode(a.exchangeValueFraction,u.uint32(10).fork()).ldelim(),a.fallbackFee!=null&&Object.hasOwnProperty.call(a,"fallbackFee")&&d.proto.FixedFee.encode(a.fallbackFee,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.RoyaltyFee,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.exchangeValueFraction=d.proto.Fraction.decode(a,a.uint32());break}case 2:{b.fallbackFee=d.proto.FixedFee.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.RoyaltyFee"},p}(),CustomFee:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.fixedFee=null,p.prototype.fractionalFee=null,p.prototype.royaltyFee=null,p.prototype.feeCollectorAccountId=null,p.prototype.allCollectorsAreExempt=!1;let a;return Object.defineProperty(p.prototype,"fee",{get:h.oneOfGetter(a=["fixedFee","fractionalFee","royaltyFee"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.fixedFee!=null&&Object.hasOwnProperty.call(u,"fixedFee")&&d.proto.FixedFee.encode(u.fixedFee,y.uint32(10).fork()).ldelim(),u.fractionalFee!=null&&Object.hasOwnProperty.call(u,"fractionalFee")&&d.proto.FractionalFee.encode(u.fractionalFee,y.uint32(18).fork()).ldelim(),u.feeCollectorAccountId!=null&&Object.hasOwnProperty.call(u,"feeCollectorAccountId")&&d.proto.AccountID.encode(u.feeCollectorAccountId,y.uint32(26).fork()).ldelim(),u.royaltyFee!=null&&Object.hasOwnProperty.call(u,"royaltyFee")&&d.proto.RoyaltyFee.encode(u.royaltyFee,y.uint32(34).fork()).ldelim(),u.allCollectorsAreExempt!=null&&Object.hasOwnProperty.call(u,"allCollectorsAreExempt")&&y.uint32(40).bool(u.allCollectorsAreExempt),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.CustomFee,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.fixedFee=d.proto.FixedFee.decode(u,u.uint32());break}case 2:{w.fractionalFee=d.proto.FractionalFee.decode(u,u.uint32());break}case 4:{w.royaltyFee=d.proto.RoyaltyFee.decode(u,u.uint32());break}case 3:{w.feeCollectorAccountId=d.proto.AccountID.decode(u,u.uint32());break}case 5:{w.allCollectorsAreExempt=u.bool();break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.CustomFee"},p}(),AssessedCustomFee:function(){function p(a){if(this.effectivePayerAccountId=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.amount=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.tokenId=null,p.prototype.feeCollectorAccountId=null,p.prototype.effectivePayerAccountId=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(8).int64(a.amount),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(18).fork()).ldelim(),a.feeCollectorAccountId!=null&&Object.hasOwnProperty.call(a,"feeCollectorAccountId")&&d.proto.AccountID.encode(a.feeCollectorAccountId,u.uint32(26).fork()).ldelim(),a.effectivePayerAccountId!=null&&a.effectivePayerAccountId.length)for(var y=0;y<a.effectivePayerAccountId.length;++y)d.proto.AccountID.encode(a.effectivePayerAccountId[y],u.uint32(34).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.AssessedCustomFee,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.amount=a.int64();break}case 2:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 3:{b.feeCollectorAccountId=d.proto.AccountID.decode(a,a.uint32());break}case 4:{b.effectivePayerAccountId&&b.effectivePayerAccountId.length||(b.effectivePayerAccountId=[]),b.effectivePayerAccountId.push(d.proto.AccountID.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.AssessedCustomFee"},p}(),TokenFreezeAccountTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.prototype.account=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),a.account!=null&&Object.hasOwnProperty.call(a,"account")&&d.proto.AccountID.encode(a.account,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenFreezeAccountTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.account=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenFreezeAccountTransactionBody"},p}(),TokenUnfreezeAccountTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.prototype.account=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),a.account!=null&&Object.hasOwnProperty.call(a,"account")&&d.proto.AccountID.encode(a.account,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenUnfreezeAccountTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.account=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenUnfreezeAccountTransactionBody"},p}(),TokenGrantKycTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.prototype.account=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),a.account!=null&&Object.hasOwnProperty.call(a,"account")&&d.proto.AccountID.encode(a.account,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenGrantKycTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.account=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenGrantKycTransactionBody"},p}(),TokenRevokeKycTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.prototype.account=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),a.account!=null&&Object.hasOwnProperty.call(a,"account")&&d.proto.AccountID.encode(a.account,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenRevokeKycTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.account=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenRevokeKycTransactionBody"},p}(),TokenDeleteTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenDeleteTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenDeleteTransactionBody"},p}(),TokenUpdateTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.prototype.symbol="",p.prototype.name="",p.prototype.treasury=null,p.prototype.adminKey=null,p.prototype.kycKey=null,p.prototype.freezeKey=null,p.prototype.wipeKey=null,p.prototype.supplyKey=null,p.prototype.autoRenewAccount=null,p.prototype.autoRenewPeriod=null,p.prototype.expiry=null,p.prototype.memo=null,p.prototype.feeScheduleKey=null,p.prototype.pauseKey=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),a.symbol!=null&&Object.hasOwnProperty.call(a,"symbol")&&u.uint32(18).string(a.symbol),a.name!=null&&Object.hasOwnProperty.call(a,"name")&&u.uint32(26).string(a.name),a.treasury!=null&&Object.hasOwnProperty.call(a,"treasury")&&d.proto.AccountID.encode(a.treasury,u.uint32(34).fork()).ldelim(),a.adminKey!=null&&Object.hasOwnProperty.call(a,"adminKey")&&d.proto.Key.encode(a.adminKey,u.uint32(42).fork()).ldelim(),a.kycKey!=null&&Object.hasOwnProperty.call(a,"kycKey")&&d.proto.Key.encode(a.kycKey,u.uint32(50).fork()).ldelim(),a.freezeKey!=null&&Object.hasOwnProperty.call(a,"freezeKey")&&d.proto.Key.encode(a.freezeKey,u.uint32(58).fork()).ldelim(),a.wipeKey!=null&&Object.hasOwnProperty.call(a,"wipeKey")&&d.proto.Key.encode(a.wipeKey,u.uint32(66).fork()).ldelim(),a.supplyKey!=null&&Object.hasOwnProperty.call(a,"supplyKey")&&d.proto.Key.encode(a.supplyKey,u.uint32(74).fork()).ldelim(),a.autoRenewAccount!=null&&Object.hasOwnProperty.call(a,"autoRenewAccount")&&d.proto.AccountID.encode(a.autoRenewAccount,u.uint32(82).fork()).ldelim(),a.autoRenewPeriod!=null&&Object.hasOwnProperty.call(a,"autoRenewPeriod")&&d.proto.Duration.encode(a.autoRenewPeriod,u.uint32(90).fork()).ldelim(),a.expiry!=null&&Object.hasOwnProperty.call(a,"expiry")&&d.proto.Timestamp.encode(a.expiry,u.uint32(98).fork()).ldelim(),a.memo!=null&&Object.hasOwnProperty.call(a,"memo")&&d.google.protobuf.StringValue.encode(a.memo,u.uint32(106).fork()).ldelim(),a.feeScheduleKey!=null&&Object.hasOwnProperty.call(a,"feeScheduleKey")&&d.proto.Key.encode(a.feeScheduleKey,u.uint32(114).fork()).ldelim(),a.pauseKey!=null&&Object.hasOwnProperty.call(a,"pauseKey")&&d.proto.Key.encode(a.pauseKey,u.uint32(122).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenUpdateTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.symbol=a.string();break}case 3:{b.name=a.string();break}case 4:{b.treasury=d.proto.AccountID.decode(a,a.uint32());break}case 5:{b.adminKey=d.proto.Key.decode(a,a.uint32());break}case 6:{b.kycKey=d.proto.Key.decode(a,a.uint32());break}case 7:{b.freezeKey=d.proto.Key.decode(a,a.uint32());break}case 8:{b.wipeKey=d.proto.Key.decode(a,a.uint32());break}case 9:{b.supplyKey=d.proto.Key.decode(a,a.uint32());break}case 10:{b.autoRenewAccount=d.proto.AccountID.decode(a,a.uint32());break}case 11:{b.autoRenewPeriod=d.proto.Duration.decode(a,a.uint32());break}case 12:{b.expiry=d.proto.Timestamp.decode(a,a.uint32());break}case 13:{b.memo=d.google.protobuf.StringValue.decode(a,a.uint32());break}case 14:{b.feeScheduleKey=d.proto.Key.decode(a,a.uint32());break}case 15:{b.pauseKey=d.proto.Key.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenUpdateTransactionBody"},p}(),TokenMintTransactionBody:function(){function p(a){if(this.metadata=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.prototype.amount=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.metadata=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(16).uint64(a.amount),a.metadata!=null&&a.metadata.length)for(var y=0;y<a.metadata.length;++y)u.uint32(26).bytes(a.metadata[y]);return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenMintTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.amount=a.uint64();break}case 3:{b.metadata&&b.metadata.length||(b.metadata=[]),b.metadata.push(a.bytes());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenMintTransactionBody"},p}(),TokenBurnTransactionBody:function(){function p(a){if(this.serialNumbers=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.prototype.amount=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.serialNumbers=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(16).uint64(a.amount),a.serialNumbers!=null&&a.serialNumbers.length){u.uint32(26).fork();for(var y=0;y<a.serialNumbers.length;++y)u.int64(a.serialNumbers[y]);u.ldelim()}return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenBurnTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.amount=a.uint64();break}case 3:{if(b.serialNumbers&&b.serialNumbers.length||(b.serialNumbers=[]),(7&w)==2)for(var T=a.uint32()+a.pos;a.pos<T;)b.serialNumbers.push(a.int64());else b.serialNumbers.push(a.int64());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenBurnTransactionBody"},p}(),TokenWipeAccountTransactionBody:function(){function p(a){if(this.serialNumbers=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.prototype.account=null,p.prototype.amount=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.serialNumbers=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),a.account!=null&&Object.hasOwnProperty.call(a,"account")&&d.proto.AccountID.encode(a.account,u.uint32(18).fork()).ldelim(),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(24).uint64(a.amount),a.serialNumbers!=null&&a.serialNumbers.length){u.uint32(34).fork();for(var y=0;y<a.serialNumbers.length;++y)u.int64(a.serialNumbers[y]);u.ldelim()}return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenWipeAccountTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.account=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.amount=a.uint64();break}case 4:{if(b.serialNumbers&&b.serialNumbers.length||(b.serialNumbers=[]),(7&w)==2)for(var T=a.uint32()+a.pos;a.pos<T;)b.serialNumbers.push(a.int64());else b.serialNumbers.push(a.int64());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenWipeAccountTransactionBody"},p}(),TokenAssociateTransactionBody:function(){function p(a){if(this.tokens=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.account=null,p.prototype.tokens=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.account!=null&&Object.hasOwnProperty.call(a,"account")&&d.proto.AccountID.encode(a.account,u.uint32(10).fork()).ldelim(),a.tokens!=null&&a.tokens.length)for(var y=0;y<a.tokens.length;++y)d.proto.TokenID.encode(a.tokens[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenAssociateTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.account=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.tokens&&b.tokens.length||(b.tokens=[]),b.tokens.push(d.proto.TokenID.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenAssociateTransactionBody"},p}(),TokenDissociateTransactionBody:function(){function p(a){if(this.tokens=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.account=null,p.prototype.tokens=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.account!=null&&Object.hasOwnProperty.call(a,"account")&&d.proto.AccountID.encode(a.account,u.uint32(10).fork()).ldelim(),a.tokens!=null&&a.tokens.length)for(var y=0;y<a.tokens.length;++y)d.proto.TokenID.encode(a.tokens[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenDissociateTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.account=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.tokens&&b.tokens.length||(b.tokens=[]),b.tokens.push(d.proto.TokenID.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenDissociateTransactionBody"},p}(),TokenFeeScheduleUpdateTransactionBody:function(){function p(a){if(this.customFees=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenId=null,p.prototype.customFees=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(10).fork()).ldelim(),a.customFees!=null&&a.customFees.length)for(var y=0;y<a.customFees.length;++y)d.proto.CustomFee.encode(a.customFees[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenFeeScheduleUpdateTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.customFees&&b.customFees.length||(b.customFees=[]),b.customFees.push(d.proto.CustomFee.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenFeeScheduleUpdateTransactionBody"},p}(),TokenPauseTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenPauseTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenPauseTransactionBody"},p}(),TokenUnpauseTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.token=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(10).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenUnpauseTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.token=d.proto.TokenID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenUnpauseTransactionBody"},p}(),ScheduleCreateTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.scheduledTransactionBody=null,p.prototype.memo="",p.prototype.adminKey=null,p.prototype.payerAccountID=null,p.prototype.expirationTime=null,p.prototype.waitForExpiry=!1,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.scheduledTransactionBody!=null&&Object.hasOwnProperty.call(a,"scheduledTransactionBody")&&d.proto.SchedulableTransactionBody.encode(a.scheduledTransactionBody,u.uint32(10).fork()).ldelim(),a.memo!=null&&Object.hasOwnProperty.call(a,"memo")&&u.uint32(18).string(a.memo),a.adminKey!=null&&Object.hasOwnProperty.call(a,"adminKey")&&d.proto.Key.encode(a.adminKey,u.uint32(26).fork()).ldelim(),a.payerAccountID!=null&&Object.hasOwnProperty.call(a,"payerAccountID")&&d.proto.AccountID.encode(a.payerAccountID,u.uint32(34).fork()).ldelim(),a.expirationTime!=null&&Object.hasOwnProperty.call(a,"expirationTime")&&d.proto.Timestamp.encode(a.expirationTime,u.uint32(42).fork()).ldelim(),a.waitForExpiry!=null&&Object.hasOwnProperty.call(a,"waitForExpiry")&&u.uint32(104).bool(a.waitForExpiry),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ScheduleCreateTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.scheduledTransactionBody=d.proto.SchedulableTransactionBody.decode(a,a.uint32());break}case 2:{b.memo=a.string();break}case 3:{b.adminKey=d.proto.Key.decode(a,a.uint32());break}case 4:{b.payerAccountID=d.proto.AccountID.decode(a,a.uint32());break}case 5:{b.expirationTime=d.proto.Timestamp.decode(a,a.uint32());break}case 13:{b.waitForExpiry=a.bool();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ScheduleCreateTransactionBody"},p}(),SchedulableTransactionBody:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.transactionFee=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.memo="",p.prototype.contractCall=null,p.prototype.contractCreateInstance=null,p.prototype.contractUpdateInstance=null,p.prototype.contractDeleteInstance=null,p.prototype.cryptoApproveAllowance=null,p.prototype.cryptoDeleteAllowance=null,p.prototype.cryptoCreateAccount=null,p.prototype.cryptoDelete=null,p.prototype.cryptoTransfer=null,p.prototype.cryptoUpdateAccount=null,p.prototype.fileAppend=null,p.prototype.fileCreate=null,p.prototype.fileDelete=null,p.prototype.fileUpdate=null,p.prototype.systemDelete=null,p.prototype.systemUndelete=null,p.prototype.freeze=null,p.prototype.consensusCreateTopic=null,p.prototype.consensusUpdateTopic=null,p.prototype.consensusDeleteTopic=null,p.prototype.consensusSubmitMessage=null,p.prototype.tokenCreation=null,p.prototype.tokenFreeze=null,p.prototype.tokenUnfreeze=null,p.prototype.tokenGrantKyc=null,p.prototype.tokenRevokeKyc=null,p.prototype.tokenDeletion=null,p.prototype.tokenUpdate=null,p.prototype.tokenMint=null,p.prototype.tokenBurn=null,p.prototype.tokenWipe=null,p.prototype.tokenAssociate=null,p.prototype.tokenDissociate=null,p.prototype.tokenFeeScheduleUpdate=null,p.prototype.tokenPause=null,p.prototype.tokenUnpause=null,p.prototype.scheduleDelete=null,p.prototype.utilPrng=null;let a;return Object.defineProperty(p.prototype,"data",{get:h.oneOfGetter(a=["contractCall","contractCreateInstance","contractUpdateInstance","contractDeleteInstance","cryptoApproveAllowance","cryptoDeleteAllowance","cryptoCreateAccount","cryptoDelete","cryptoTransfer","cryptoUpdateAccount","fileAppend","fileCreate","fileDelete","fileUpdate","systemDelete","systemUndelete","freeze","consensusCreateTopic","consensusUpdateTopic","consensusDeleteTopic","consensusSubmitMessage","tokenCreation","tokenFreeze","tokenUnfreeze","tokenGrantKyc","tokenRevokeKyc","tokenDeletion","tokenUpdate","tokenMint","tokenBurn","tokenWipe","tokenAssociate","tokenDissociate","tokenFeeScheduleUpdate","tokenPause","tokenUnpause","scheduleDelete","utilPrng"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.transactionFee!=null&&Object.hasOwnProperty.call(u,"transactionFee")&&y.uint32(8).uint64(u.transactionFee),u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&y.uint32(18).string(u.memo),u.contractCall!=null&&Object.hasOwnProperty.call(u,"contractCall")&&d.proto.ContractCallTransactionBody.encode(u.contractCall,y.uint32(26).fork()).ldelim(),u.contractCreateInstance!=null&&Object.hasOwnProperty.call(u,"contractCreateInstance")&&d.proto.ContractCreateTransactionBody.encode(u.contractCreateInstance,y.uint32(34).fork()).ldelim(),u.contractUpdateInstance!=null&&Object.hasOwnProperty.call(u,"contractUpdateInstance")&&d.proto.ContractUpdateTransactionBody.encode(u.contractUpdateInstance,y.uint32(42).fork()).ldelim(),u.contractDeleteInstance!=null&&Object.hasOwnProperty.call(u,"contractDeleteInstance")&&d.proto.ContractDeleteTransactionBody.encode(u.contractDeleteInstance,y.uint32(50).fork()).ldelim(),u.cryptoCreateAccount!=null&&Object.hasOwnProperty.call(u,"cryptoCreateAccount")&&d.proto.CryptoCreateTransactionBody.encode(u.cryptoCreateAccount,y.uint32(58).fork()).ldelim(),u.cryptoDelete!=null&&Object.hasOwnProperty.call(u,"cryptoDelete")&&d.proto.CryptoDeleteTransactionBody.encode(u.cryptoDelete,y.uint32(66).fork()).ldelim(),u.cryptoTransfer!=null&&Object.hasOwnProperty.call(u,"cryptoTransfer")&&d.proto.CryptoTransferTransactionBody.encode(u.cryptoTransfer,y.uint32(74).fork()).ldelim(),u.cryptoUpdateAccount!=null&&Object.hasOwnProperty.call(u,"cryptoUpdateAccount")&&d.proto.CryptoUpdateTransactionBody.encode(u.cryptoUpdateAccount,y.uint32(82).fork()).ldelim(),u.fileAppend!=null&&Object.hasOwnProperty.call(u,"fileAppend")&&d.proto.FileAppendTransactionBody.encode(u.fileAppend,y.uint32(90).fork()).ldelim(),u.fileCreate!=null&&Object.hasOwnProperty.call(u,"fileCreate")&&d.proto.FileCreateTransactionBody.encode(u.fileCreate,y.uint32(98).fork()).ldelim(),u.fileDelete!=null&&Object.hasOwnProperty.call(u,"fileDelete")&&d.proto.FileDeleteTransactionBody.encode(u.fileDelete,y.uint32(106).fork()).ldelim(),u.fileUpdate!=null&&Object.hasOwnProperty.call(u,"fileUpdate")&&d.proto.FileUpdateTransactionBody.encode(u.fileUpdate,y.uint32(114).fork()).ldelim(),u.systemDelete!=null&&Object.hasOwnProperty.call(u,"systemDelete")&&d.proto.SystemDeleteTransactionBody.encode(u.systemDelete,y.uint32(122).fork()).ldelim(),u.systemUndelete!=null&&Object.hasOwnProperty.call(u,"systemUndelete")&&d.proto.SystemUndeleteTransactionBody.encode(u.systemUndelete,y.uint32(130).fork()).ldelim(),u.freeze!=null&&Object.hasOwnProperty.call(u,"freeze")&&d.proto.FreezeTransactionBody.encode(u.freeze,y.uint32(138).fork()).ldelim(),u.consensusCreateTopic!=null&&Object.hasOwnProperty.call(u,"consensusCreateTopic")&&d.proto.ConsensusCreateTopicTransactionBody.encode(u.consensusCreateTopic,y.uint32(146).fork()).ldelim(),u.consensusUpdateTopic!=null&&Object.hasOwnProperty.call(u,"consensusUpdateTopic")&&d.proto.ConsensusUpdateTopicTransactionBody.encode(u.consensusUpdateTopic,y.uint32(154).fork()).ldelim(),u.consensusDeleteTopic!=null&&Object.hasOwnProperty.call(u,"consensusDeleteTopic")&&d.proto.ConsensusDeleteTopicTransactionBody.encode(u.consensusDeleteTopic,y.uint32(162).fork()).ldelim(),u.consensusSubmitMessage!=null&&Object.hasOwnProperty.call(u,"consensusSubmitMessage")&&d.proto.ConsensusSubmitMessageTransactionBody.encode(u.consensusSubmitMessage,y.uint32(170).fork()).ldelim(),u.tokenCreation!=null&&Object.hasOwnProperty.call(u,"tokenCreation")&&d.proto.TokenCreateTransactionBody.encode(u.tokenCreation,y.uint32(178).fork()).ldelim(),u.tokenFreeze!=null&&Object.hasOwnProperty.call(u,"tokenFreeze")&&d.proto.TokenFreezeAccountTransactionBody.encode(u.tokenFreeze,y.uint32(186).fork()).ldelim(),u.tokenUnfreeze!=null&&Object.hasOwnProperty.call(u,"tokenUnfreeze")&&d.proto.TokenUnfreezeAccountTransactionBody.encode(u.tokenUnfreeze,y.uint32(194).fork()).ldelim(),u.tokenGrantKyc!=null&&Object.hasOwnProperty.call(u,"tokenGrantKyc")&&d.proto.TokenGrantKycTransactionBody.encode(u.tokenGrantKyc,y.uint32(202).fork()).ldelim(),u.tokenRevokeKyc!=null&&Object.hasOwnProperty.call(u,"tokenRevokeKyc")&&d.proto.TokenRevokeKycTransactionBody.encode(u.tokenRevokeKyc,y.uint32(210).fork()).ldelim(),u.tokenDeletion!=null&&Object.hasOwnProperty.call(u,"tokenDeletion")&&d.proto.TokenDeleteTransactionBody.encode(u.tokenDeletion,y.uint32(218).fork()).ldelim(),u.tokenUpdate!=null&&Object.hasOwnProperty.call(u,"tokenUpdate")&&d.proto.TokenUpdateTransactionBody.encode(u.tokenUpdate,y.uint32(226).fork()).ldelim(),u.tokenMint!=null&&Object.hasOwnProperty.call(u,"tokenMint")&&d.proto.TokenMintTransactionBody.encode(u.tokenMint,y.uint32(234).fork()).ldelim(),u.tokenBurn!=null&&Object.hasOwnProperty.call(u,"tokenBurn")&&d.proto.TokenBurnTransactionBody.encode(u.tokenBurn,y.uint32(242).fork()).ldelim(),u.tokenWipe!=null&&Object.hasOwnProperty.call(u,"tokenWipe")&&d.proto.TokenWipeAccountTransactionBody.encode(u.tokenWipe,y.uint32(250).fork()).ldelim(),u.tokenAssociate!=null&&Object.hasOwnProperty.call(u,"tokenAssociate")&&d.proto.TokenAssociateTransactionBody.encode(u.tokenAssociate,y.uint32(258).fork()).ldelim(),u.tokenDissociate!=null&&Object.hasOwnProperty.call(u,"tokenDissociate")&&d.proto.TokenDissociateTransactionBody.encode(u.tokenDissociate,y.uint32(266).fork()).ldelim(),u.scheduleDelete!=null&&Object.hasOwnProperty.call(u,"scheduleDelete")&&d.proto.ScheduleDeleteTransactionBody.encode(u.scheduleDelete,y.uint32(274).fork()).ldelim(),u.tokenPause!=null&&Object.hasOwnProperty.call(u,"tokenPause")&&d.proto.TokenPauseTransactionBody.encode(u.tokenPause,y.uint32(282).fork()).ldelim(),u.tokenUnpause!=null&&Object.hasOwnProperty.call(u,"tokenUnpause")&&d.proto.TokenUnpauseTransactionBody.encode(u.tokenUnpause,y.uint32(290).fork()).ldelim(),u.cryptoApproveAllowance!=null&&Object.hasOwnProperty.call(u,"cryptoApproveAllowance")&&d.proto.CryptoApproveAllowanceTransactionBody.encode(u.cryptoApproveAllowance,y.uint32(298).fork()).ldelim(),u.cryptoDeleteAllowance!=null&&Object.hasOwnProperty.call(u,"cryptoDeleteAllowance")&&d.proto.CryptoDeleteAllowanceTransactionBody.encode(u.cryptoDeleteAllowance,y.uint32(306).fork()).ldelim(),u.tokenFeeScheduleUpdate!=null&&Object.hasOwnProperty.call(u,"tokenFeeScheduleUpdate")&&d.proto.TokenFeeScheduleUpdateTransactionBody.encode(u.tokenFeeScheduleUpdate,y.uint32(314).fork()).ldelim(),u.utilPrng!=null&&Object.hasOwnProperty.call(u,"utilPrng")&&d.proto.UtilPrngTransactionBody.encode(u.utilPrng,y.uint32(322).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.SchedulableTransactionBody,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.transactionFee=u.uint64();break}case 2:{w.memo=u.string();break}case 3:{w.contractCall=d.proto.ContractCallTransactionBody.decode(u,u.uint32());break}case 4:{w.contractCreateInstance=d.proto.ContractCreateTransactionBody.decode(u,u.uint32());break}case 5:{w.contractUpdateInstance=d.proto.ContractUpdateTransactionBody.decode(u,u.uint32());break}case 6:{w.contractDeleteInstance=d.proto.ContractDeleteTransactionBody.decode(u,u.uint32());break}case 37:{w.cryptoApproveAllowance=d.proto.CryptoApproveAllowanceTransactionBody.decode(u,u.uint32());break}case 38:{w.cryptoDeleteAllowance=d.proto.CryptoDeleteAllowanceTransactionBody.decode(u,u.uint32());break}case 7:{w.cryptoCreateAccount=d.proto.CryptoCreateTransactionBody.decode(u,u.uint32());break}case 8:{w.cryptoDelete=d.proto.CryptoDeleteTransactionBody.decode(u,u.uint32());break}case 9:{w.cryptoTransfer=d.proto.CryptoTransferTransactionBody.decode(u,u.uint32());break}case 10:{w.cryptoUpdateAccount=d.proto.CryptoUpdateTransactionBody.decode(u,u.uint32());break}case 11:{w.fileAppend=d.proto.FileAppendTransactionBody.decode(u,u.uint32());break}case 12:{w.fileCreate=d.proto.FileCreateTransactionBody.decode(u,u.uint32());break}case 13:{w.fileDelete=d.proto.FileDeleteTransactionBody.decode(u,u.uint32());break}case 14:{w.fileUpdate=d.proto.FileUpdateTransactionBody.decode(u,u.uint32());break}case 15:{w.systemDelete=d.proto.SystemDeleteTransactionBody.decode(u,u.uint32());break}case 16:{w.systemUndelete=d.proto.SystemUndeleteTransactionBody.decode(u,u.uint32());break}case 17:{w.freeze=d.proto.FreezeTransactionBody.decode(u,u.uint32());break}case 18:{w.consensusCreateTopic=d.proto.ConsensusCreateTopicTransactionBody.decode(u,u.uint32());break}case 19:{w.consensusUpdateTopic=d.proto.ConsensusUpdateTopicTransactionBody.decode(u,u.uint32());break}case 20:{w.consensusDeleteTopic=d.proto.ConsensusDeleteTopicTransactionBody.decode(u,u.uint32());break}case 21:{w.consensusSubmitMessage=d.proto.ConsensusSubmitMessageTransactionBody.decode(u,u.uint32());break}case 22:{w.tokenCreation=d.proto.TokenCreateTransactionBody.decode(u,u.uint32());break}case 23:{w.tokenFreeze=d.proto.TokenFreezeAccountTransactionBody.decode(u,u.uint32());break}case 24:{w.tokenUnfreeze=d.proto.TokenUnfreezeAccountTransactionBody.decode(u,u.uint32());break}case 25:{w.tokenGrantKyc=d.proto.TokenGrantKycTransactionBody.decode(u,u.uint32());break}case 26:{w.tokenRevokeKyc=d.proto.TokenRevokeKycTransactionBody.decode(u,u.uint32());break}case 27:{w.tokenDeletion=d.proto.TokenDeleteTransactionBody.decode(u,u.uint32());break}case 28:{w.tokenUpdate=d.proto.TokenUpdateTransactionBody.decode(u,u.uint32());break}case 29:{w.tokenMint=d.proto.TokenMintTransactionBody.decode(u,u.uint32());break}case 30:{w.tokenBurn=d.proto.TokenBurnTransactionBody.decode(u,u.uint32());break}case 31:{w.tokenWipe=d.proto.TokenWipeAccountTransactionBody.decode(u,u.uint32());break}case 32:{w.tokenAssociate=d.proto.TokenAssociateTransactionBody.decode(u,u.uint32());break}case 33:{w.tokenDissociate=d.proto.TokenDissociateTransactionBody.decode(u,u.uint32());break}case 39:{w.tokenFeeScheduleUpdate=d.proto.TokenFeeScheduleUpdateTransactionBody.decode(u,u.uint32());break}case 35:{w.tokenPause=d.proto.TokenPauseTransactionBody.decode(u,u.uint32());break}case 36:{w.tokenUnpause=d.proto.TokenUnpauseTransactionBody.decode(u,u.uint32());break}case 34:{w.scheduleDelete=d.proto.ScheduleDeleteTransactionBody.decode(u,u.uint32());break}case 40:{w.utilPrng=d.proto.UtilPrngTransactionBody.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.SchedulableTransactionBody"},p}(),ScheduleDeleteTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.scheduleID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.scheduleID!=null&&Object.hasOwnProperty.call(a,"scheduleID")&&d.proto.ScheduleID.encode(a.scheduleID,u.uint32(10).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ScheduleDeleteTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.scheduleID=d.proto.ScheduleID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ScheduleDeleteTransactionBody"},p}(),UtilPrngTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.range=0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.range!=null&&Object.hasOwnProperty.call(a,"range")&&u.uint32(8).int32(a.range),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.UtilPrngTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.range=a.int32();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.UtilPrngTransactionBody"},p}(),ScheduleSignTransactionBody:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.scheduleID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.scheduleID!=null&&Object.hasOwnProperty.call(a,"scheduleID")&&d.proto.ScheduleID.encode(a.scheduleID,u.uint32(10).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ScheduleSignTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.scheduleID=d.proto.ScheduleID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ScheduleSignTransactionBody"},p}(),NodeStakeUpdateTransactionBody:function(){function p(a){if(this.nodeStake=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.endOfStakingPeriod=null,p.prototype.nodeStake=h.emptyArray,p.prototype.maxStakingRewardRatePerHbar=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.nodeRewardFeeFraction=null,p.prototype.stakingPeriodsStored=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.stakingPeriod=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.stakingRewardFeeFraction=null,p.prototype.stakingStartThreshold=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.stakingRewardRate=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.endOfStakingPeriod!=null&&Object.hasOwnProperty.call(a,"endOfStakingPeriod")&&d.proto.Timestamp.encode(a.endOfStakingPeriod,u.uint32(10).fork()).ldelim(),a.nodeStake!=null&&a.nodeStake.length)for(var y=0;y<a.nodeStake.length;++y)d.proto.NodeStake.encode(a.nodeStake[y],u.uint32(18).fork()).ldelim();return a.maxStakingRewardRatePerHbar!=null&&Object.hasOwnProperty.call(a,"maxStakingRewardRatePerHbar")&&u.uint32(24).int64(a.maxStakingRewardRatePerHbar),a.nodeRewardFeeFraction!=null&&Object.hasOwnProperty.call(a,"nodeRewardFeeFraction")&&d.proto.Fraction.encode(a.nodeRewardFeeFraction,u.uint32(34).fork()).ldelim(),a.stakingPeriodsStored!=null&&Object.hasOwnProperty.call(a,"stakingPeriodsStored")&&u.uint32(40).int64(a.stakingPeriodsStored),a.stakingPeriod!=null&&Object.hasOwnProperty.call(a,"stakingPeriod")&&u.uint32(48).int64(a.stakingPeriod),a.stakingRewardFeeFraction!=null&&Object.hasOwnProperty.call(a,"stakingRewardFeeFraction")&&d.proto.Fraction.encode(a.stakingRewardFeeFraction,u.uint32(58).fork()).ldelim(),a.stakingStartThreshold!=null&&Object.hasOwnProperty.call(a,"stakingStartThreshold")&&u.uint32(64).int64(a.stakingStartThreshold),a.stakingRewardRate!=null&&Object.hasOwnProperty.call(a,"stakingRewardRate")&&u.uint32(72).int64(a.stakingRewardRate),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NodeStakeUpdateTransactionBody,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.endOfStakingPeriod=d.proto.Timestamp.decode(a,a.uint32());break}case 2:{b.nodeStake&&b.nodeStake.length||(b.nodeStake=[]),b.nodeStake.push(d.proto.NodeStake.decode(a,a.uint32()));break}case 3:{b.maxStakingRewardRatePerHbar=a.int64();break}case 4:{b.nodeRewardFeeFraction=d.proto.Fraction.decode(a,a.uint32());break}case 5:{b.stakingPeriodsStored=a.int64();break}case 6:{b.stakingPeriod=a.int64();break}case 7:{b.stakingRewardFeeFraction=d.proto.Fraction.decode(a,a.uint32());break}case 8:{b.stakingStartThreshold=a.int64();break}case 9:{b.stakingRewardRate=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NodeStakeUpdateTransactionBody"},p}(),NodeStake:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.maxStake=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.minStake=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.nodeId=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.rewardRate=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.stake=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.stakeNotRewarded=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.stakeRewarded=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.maxStake!=null&&Object.hasOwnProperty.call(a,"maxStake")&&u.uint32(8).int64(a.maxStake),a.minStake!=null&&Object.hasOwnProperty.call(a,"minStake")&&u.uint32(16).int64(a.minStake),a.nodeId!=null&&Object.hasOwnProperty.call(a,"nodeId")&&u.uint32(24).int64(a.nodeId),a.rewardRate!=null&&Object.hasOwnProperty.call(a,"rewardRate")&&u.uint32(32).int64(a.rewardRate),a.stake!=null&&Object.hasOwnProperty.call(a,"stake")&&u.uint32(40).int64(a.stake),a.stakeNotRewarded!=null&&Object.hasOwnProperty.call(a,"stakeNotRewarded")&&u.uint32(48).int64(a.stakeNotRewarded),a.stakeRewarded!=null&&Object.hasOwnProperty.call(a,"stakeRewarded")&&u.uint32(56).int64(a.stakeRewarded),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NodeStake,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.maxStake=a.int64();break}case 2:{b.minStake=a.int64();break}case 3:{b.nodeId=a.int64();break}case 4:{b.rewardRate=a.int64();break}case 5:{b.stake=a.int64();break}case 6:{b.stakeNotRewarded=a.int64();break}case 7:{b.stakeRewarded=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NodeStake"},p}(),ResponseHeader:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.nodeTransactionPrecheckCode=0,p.prototype.responseType=0,p.prototype.cost=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.stateProof=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.nodeTransactionPrecheckCode!=null&&Object.hasOwnProperty.call(a,"nodeTransactionPrecheckCode")&&u.uint32(8).int32(a.nodeTransactionPrecheckCode),a.responseType!=null&&Object.hasOwnProperty.call(a,"responseType")&&u.uint32(16).int32(a.responseType),a.cost!=null&&Object.hasOwnProperty.call(a,"cost")&&u.uint32(24).uint64(a.cost),a.stateProof!=null&&Object.hasOwnProperty.call(a,"stateProof")&&u.uint32(34).bytes(a.stateProof),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ResponseHeader,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.nodeTransactionPrecheckCode=a.int32();break}case 2:{b.responseType=a.int32();break}case 3:{b.cost=a.uint64();break}case 4:{b.stateProof=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ResponseHeader"},p}(),TransactionResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.nodeTransactionPrecheckCode=0,p.prototype.cost=h.Long?h.Long.fromBits(0,0,!0):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.nodeTransactionPrecheckCode!=null&&Object.hasOwnProperty.call(a,"nodeTransactionPrecheckCode")&&u.uint32(8).int32(a.nodeTransactionPrecheckCode),a.cost!=null&&Object.hasOwnProperty.call(a,"cost")&&u.uint32(16).uint64(a.cost),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransactionResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.nodeTransactionPrecheckCode=a.int32();break}case 2:{b.cost=a.uint64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransactionResponse"},p}(),ResponseCodeEnum:function(){const p={},a=Object.create(p);return a[p[0]="OK"]=0,a[p[1]="INVALID_TRANSACTION"]=1,a[p[2]="PAYER_ACCOUNT_NOT_FOUND"]=2,a[p[3]="INVALID_NODE_ACCOUNT"]=3,a[p[4]="TRANSACTION_EXPIRED"]=4,a[p[5]="INVALID_TRANSACTION_START"]=5,a[p[6]="INVALID_TRANSACTION_DURATION"]=6,a[p[7]="INVALID_SIGNATURE"]=7,a[p[8]="MEMO_TOO_LONG"]=8,a[p[9]="INSUFFICIENT_TX_FEE"]=9,a[p[10]="INSUFFICIENT_PAYER_BALANCE"]=10,a[p[11]="DUPLICATE_TRANSACTION"]=11,a[p[12]="BUSY"]=12,a[p[13]="NOT_SUPPORTED"]=13,a[p[14]="INVALID_FILE_ID"]=14,a[p[15]="INVALID_ACCOUNT_ID"]=15,a[p[16]="INVALID_CONTRACT_ID"]=16,a[p[17]="INVALID_TRANSACTION_ID"]=17,a[p[18]="RECEIPT_NOT_FOUND"]=18,a[p[19]="RECORD_NOT_FOUND"]=19,a[p[20]="INVALID_SOLIDITY_ID"]=20,a[p[21]="UNKNOWN"]=21,a[p[22]="SUCCESS"]=22,a[p[23]="FAIL_INVALID"]=23,a[p[24]="FAIL_FEE"]=24,a[p[25]="FAIL_BALANCE"]=25,a[p[26]="KEY_REQUIRED"]=26,a[p[27]="BAD_ENCODING"]=27,a[p[28]="INSUFFICIENT_ACCOUNT_BALANCE"]=28,a[p[29]="INVALID_SOLIDITY_ADDRESS"]=29,a[p[30]="INSUFFICIENT_GAS"]=30,a[p[31]="CONTRACT_SIZE_LIMIT_EXCEEDED"]=31,a[p[32]="LOCAL_CALL_MODIFICATION_EXCEPTION"]=32,a[p[33]="CONTRACT_REVERT_EXECUTED"]=33,a[p[34]="CONTRACT_EXECUTION_EXCEPTION"]=34,a[p[35]="INVALID_RECEIVING_NODE_ACCOUNT"]=35,a[p[36]="MISSING_QUERY_HEADER"]=36,a[p[37]="ACCOUNT_UPDATE_FAILED"]=37,a[p[38]="INVALID_KEY_ENCODING"]=38,a[p[39]="NULL_SOLIDITY_ADDRESS"]=39,a[p[40]="CONTRACT_UPDATE_FAILED"]=40,a[p[41]="INVALID_QUERY_HEADER"]=41,a[p[42]="INVALID_FEE_SUBMITTED"]=42,a[p[43]="INVALID_PAYER_SIGNATURE"]=43,a[p[44]="KEY_NOT_PROVIDED"]=44,a[p[45]="INVALID_EXPIRATION_TIME"]=45,a[p[46]="NO_WACL_KEY"]=46,a[p[47]="FILE_CONTENT_EMPTY"]=47,a[p[48]="INVALID_ACCOUNT_AMOUNTS"]=48,a[p[49]="EMPTY_TRANSACTION_BODY"]=49,a[p[50]="INVALID_TRANSACTION_BODY"]=50,a[p[51]="INVALID_SIGNATURE_TYPE_MISMATCHING_KEY"]=51,a[p[52]="INVALID_SIGNATURE_COUNT_MISMATCHING_KEY"]=52,a[p[53]="EMPTY_LIVE_HASH_BODY"]=53,a[p[54]="EMPTY_LIVE_HASH"]=54,a[p[55]="EMPTY_LIVE_HASH_KEYS"]=55,a[p[56]="INVALID_LIVE_HASH_SIZE"]=56,a[p[57]="EMPTY_QUERY_BODY"]=57,a[p[58]="EMPTY_LIVE_HASH_QUERY"]=58,a[p[59]="LIVE_HASH_NOT_FOUND"]=59,a[p[60]="ACCOUNT_ID_DOES_NOT_EXIST"]=60,a[p[61]="LIVE_HASH_ALREADY_EXISTS"]=61,a[p[62]="INVALID_FILE_WACL"]=62,a[p[63]="SERIALIZATION_FAILED"]=63,a[p[64]="TRANSACTION_OVERSIZE"]=64,a[p[65]="TRANSACTION_TOO_MANY_LAYERS"]=65,a[p[66]="CONTRACT_DELETED"]=66,a[p[67]="PLATFORM_NOT_ACTIVE"]=67,a[p[68]="KEY_PREFIX_MISMATCH"]=68,a[p[69]="PLATFORM_TRANSACTION_NOT_CREATED"]=69,a[p[70]="INVALID_RENEWAL_PERIOD"]=70,a[p[71]="INVALID_PAYER_ACCOUNT_ID"]=71,a[p[72]="ACCOUNT_DELETED"]=72,a[p[73]="FILE_DELETED"]=73,a[p[74]="ACCOUNT_REPEATED_IN_ACCOUNT_AMOUNTS"]=74,a[p[75]="SETTING_NEGATIVE_ACCOUNT_BALANCE"]=75,a[p[76]="OBTAINER_REQUIRED"]=76,a[p[77]="OBTAINER_SAME_CONTRACT_ID"]=77,a[p[78]="OBTAINER_DOES_NOT_EXIST"]=78,a[p[79]="MODIFYING_IMMUTABLE_CONTRACT"]=79,a[p[80]="FILE_SYSTEM_EXCEPTION"]=80,a[p[81]="AUTORENEW_DURATION_NOT_IN_RANGE"]=81,a[p[82]="ERROR_DECODING_BYTESTRING"]=82,a[p[83]="CONTRACT_FILE_EMPTY"]=83,a[p[84]="CONTRACT_BYTECODE_EMPTY"]=84,a[p[85]="INVALID_INITIAL_BALANCE"]=85,a[p[86]="INVALID_RECEIVE_RECORD_THRESHOLD"]=86,a[p[87]="INVALID_SEND_RECORD_THRESHOLD"]=87,a[p[88]="ACCOUNT_IS_NOT_GENESIS_ACCOUNT"]=88,a[p[89]="PAYER_ACCOUNT_UNAUTHORIZED"]=89,a[p[90]="INVALID_FREEZE_TRANSACTION_BODY"]=90,a[p[91]="FREEZE_TRANSACTION_BODY_NOT_FOUND"]=91,a[p[92]="TRANSFER_LIST_SIZE_LIMIT_EXCEEDED"]=92,a[p[93]="RESULT_SIZE_LIMIT_EXCEEDED"]=93,a[p[94]="NOT_SPECIAL_ACCOUNT"]=94,a[p[95]="CONTRACT_NEGATIVE_GAS"]=95,a[p[96]="CONTRACT_NEGATIVE_VALUE"]=96,a[p[97]="INVALID_FEE_FILE"]=97,a[p[98]="INVALID_EXCHANGE_RATE_FILE"]=98,a[p[99]="INSUFFICIENT_LOCAL_CALL_GAS"]=99,a[p[100]="ENTITY_NOT_ALLOWED_TO_DELETE"]=100,a[p[101]="AUTHORIZATION_FAILED"]=101,a[p[102]="FILE_UPLOADED_PROTO_INVALID"]=102,a[p[103]="FILE_UPLOADED_PROTO_NOT_SAVED_TO_DISK"]=103,a[p[104]="FEE_SCHEDULE_FILE_PART_UPLOADED"]=104,a[p[105]="EXCHANGE_RATE_CHANGE_LIMIT_EXCEEDED"]=105,a[p[106]="MAX_CONTRACT_STORAGE_EXCEEDED"]=106,a[p[107]="TRANSFER_ACCOUNT_SAME_AS_DELETE_ACCOUNT"]=107,a[p[108]="TOTAL_LEDGER_BALANCE_INVALID"]=108,a[p[110]="EXPIRATION_REDUCTION_NOT_ALLOWED"]=110,a[p[111]="MAX_GAS_LIMIT_EXCEEDED"]=111,a[p[112]="MAX_FILE_SIZE_EXCEEDED"]=112,a[p[113]="RECEIVER_SIG_REQUIRED"]=113,a[p[150]="INVALID_TOPIC_ID"]=150,a[p[155]="INVALID_ADMIN_KEY"]=155,a[p[156]="INVALID_SUBMIT_KEY"]=156,a[p[157]="UNAUTHORIZED"]=157,a[p[158]="INVALID_TOPIC_MESSAGE"]=158,a[p[159]="INVALID_AUTORENEW_ACCOUNT"]=159,a[p[160]="AUTORENEW_ACCOUNT_NOT_ALLOWED"]=160,a[p[162]="TOPIC_EXPIRED"]=162,a[p[163]="INVALID_CHUNK_NUMBER"]=163,a[p[164]="INVALID_CHUNK_TRANSACTION_ID"]=164,a[p[165]="ACCOUNT_FROZEN_FOR_TOKEN"]=165,a[p[166]="TOKENS_PER_ACCOUNT_LIMIT_EXCEEDED"]=166,a[p[167]="INVALID_TOKEN_ID"]=167,a[p[168]="INVALID_TOKEN_DECIMALS"]=168,a[p[169]="INVALID_TOKEN_INITIAL_SUPPLY"]=169,a[p[170]="INVALID_TREASURY_ACCOUNT_FOR_TOKEN"]=170,a[p[171]="INVALID_TOKEN_SYMBOL"]=171,a[p[172]="TOKEN_HAS_NO_FREEZE_KEY"]=172,a[p[173]="TRANSFERS_NOT_ZERO_SUM_FOR_TOKEN"]=173,a[p[174]="MISSING_TOKEN_SYMBOL"]=174,a[p[175]="TOKEN_SYMBOL_TOO_LONG"]=175,a[p[176]="ACCOUNT_KYC_NOT_GRANTED_FOR_TOKEN"]=176,a[p[177]="TOKEN_HAS_NO_KYC_KEY"]=177,a[p[178]="INSUFFICIENT_TOKEN_BALANCE"]=178,a[p[179]="TOKEN_WAS_DELETED"]=179,a[p[180]="TOKEN_HAS_NO_SUPPLY_KEY"]=180,a[p[181]="TOKEN_HAS_NO_WIPE_KEY"]=181,a[p[182]="INVALID_TOKEN_MINT_AMOUNT"]=182,a[p[183]="INVALID_TOKEN_BURN_AMOUNT"]=183,a[p[184]="TOKEN_NOT_ASSOCIATED_TO_ACCOUNT"]=184,a[p[185]="CANNOT_WIPE_TOKEN_TREASURY_ACCOUNT"]=185,a[p[186]="INVALID_KYC_KEY"]=186,a[p[187]="INVALID_WIPE_KEY"]=187,a[p[188]="INVALID_FREEZE_KEY"]=188,a[p[189]="INVALID_SUPPLY_KEY"]=189,a[p[190]="MISSING_TOKEN_NAME"]=190,a[p[191]="TOKEN_NAME_TOO_LONG"]=191,a[p[192]="INVALID_WIPING_AMOUNT"]=192,a[p[193]="TOKEN_IS_IMMUTABLE"]=193,a[p[194]="TOKEN_ALREADY_ASSOCIATED_TO_ACCOUNT"]=194,a[p[195]="TRANSACTION_REQUIRES_ZERO_TOKEN_BALANCES"]=195,a[p[196]="ACCOUNT_IS_TREASURY"]=196,a[p[197]="TOKEN_ID_REPEATED_IN_TOKEN_LIST"]=197,a[p[198]="TOKEN_TRANSFER_LIST_SIZE_LIMIT_EXCEEDED"]=198,a[p[199]="EMPTY_TOKEN_TRANSFER_BODY"]=199,a[p[200]="EMPTY_TOKEN_TRANSFER_ACCOUNT_AMOUNTS"]=200,a[p[201]="INVALID_SCHEDULE_ID"]=201,a[p[202]="SCHEDULE_IS_IMMUTABLE"]=202,a[p[203]="INVALID_SCHEDULE_PAYER_ID"]=203,a[p[204]="INVALID_SCHEDULE_ACCOUNT_ID"]=204,a[p[205]="NO_NEW_VALID_SIGNATURES"]=205,a[p[206]="UNRESOLVABLE_REQUIRED_SIGNERS"]=206,a[p[207]="SCHEDULED_TRANSACTION_NOT_IN_WHITELIST"]=207,a[p[208]="SOME_SIGNATURES_WERE_INVALID"]=208,a[p[209]="TRANSACTION_ID_FIELD_NOT_ALLOWED"]=209,a[p[210]="IDENTICAL_SCHEDULE_ALREADY_CREATED"]=210,a[p[211]="INVALID_ZERO_BYTE_IN_STRING"]=211,a[p[212]="SCHEDULE_ALREADY_DELETED"]=212,a[p[213]="SCHEDULE_ALREADY_EXECUTED"]=213,a[p[214]="MESSAGE_SIZE_TOO_LARGE"]=214,a[p[215]="OPERATION_REPEATED_IN_BUCKET_GROUPS"]=215,a[p[216]="BUCKET_CAPACITY_OVERFLOW"]=216,a[p[217]="NODE_CAPACITY_NOT_SUFFICIENT_FOR_OPERATION"]=217,a[p[218]="BUCKET_HAS_NO_THROTTLE_GROUPS"]=218,a[p[219]="THROTTLE_GROUP_HAS_ZERO_OPS_PER_SEC"]=219,a[p[220]="SUCCESS_BUT_MISSING_EXPECTED_OPERATION"]=220,a[p[221]="UNPARSEABLE_THROTTLE_DEFINITIONS"]=221,a[p[222]="INVALID_THROTTLE_DEFINITIONS"]=222,a[p[223]="ACCOUNT_EXPIRED_AND_PENDING_REMOVAL"]=223,a[p[224]="INVALID_TOKEN_MAX_SUPPLY"]=224,a[p[225]="INVALID_TOKEN_NFT_SERIAL_NUMBER"]=225,a[p[226]="INVALID_NFT_ID"]=226,a[p[227]="METADATA_TOO_LONG"]=227,a[p[228]="BATCH_SIZE_LIMIT_EXCEEDED"]=228,a[p[229]="INVALID_QUERY_RANGE"]=229,a[p[230]="FRACTION_DIVIDES_BY_ZERO"]=230,a[p[231]="INSUFFICIENT_PAYER_BALANCE_FOR_CUSTOM_FEE"]=231,a[p[232]="CUSTOM_FEES_LIST_TOO_LONG"]=232,a[p[233]="INVALID_CUSTOM_FEE_COLLECTOR"]=233,a[p[234]="INVALID_TOKEN_ID_IN_CUSTOM_FEES"]=234,a[p[235]="TOKEN_NOT_ASSOCIATED_TO_FEE_COLLECTOR"]=235,a[p[236]="TOKEN_MAX_SUPPLY_REACHED"]=236,a[p[237]="SENDER_DOES_NOT_OWN_NFT_SERIAL_NO"]=237,a[p[238]="CUSTOM_FEE_NOT_FULLY_SPECIFIED"]=238,a[p[239]="CUSTOM_FEE_MUST_BE_POSITIVE"]=239,a[p[240]="TOKEN_HAS_NO_FEE_SCHEDULE_KEY"]=240,a[p[241]="CUSTOM_FEE_OUTSIDE_NUMERIC_RANGE"]=241,a[p[242]="ROYALTY_FRACTION_CANNOT_EXCEED_ONE"]=242,a[p[243]="FRACTIONAL_FEE_MAX_AMOUNT_LESS_THAN_MIN_AMOUNT"]=243,a[p[244]="CUSTOM_SCHEDULE_ALREADY_HAS_NO_FEES"]=244,a[p[245]="CUSTOM_FEE_DENOMINATION_MUST_BE_FUNGIBLE_COMMON"]=245,a[p[246]="CUSTOM_FRACTIONAL_FEE_ONLY_ALLOWED_FOR_FUNGIBLE_COMMON"]=246,a[p[247]="INVALID_CUSTOM_FEE_SCHEDULE_KEY"]=247,a[p[248]="INVALID_TOKEN_MINT_METADATA"]=248,a[p[249]="INVALID_TOKEN_BURN_METADATA"]=249,a[p[250]="CURRENT_TREASURY_STILL_OWNS_NFTS"]=250,a[p[251]="ACCOUNT_STILL_OWNS_NFTS"]=251,a[p[252]="TREASURY_MUST_OWN_BURNED_NFT"]=252,a[p[253]="ACCOUNT_DOES_NOT_OWN_WIPED_NFT"]=253,a[p[254]="ACCOUNT_AMOUNT_TRANSFERS_ONLY_ALLOWED_FOR_FUNGIBLE_COMMON"]=254,a[p[255]="MAX_NFTS_IN_PRICE_REGIME_HAVE_BEEN_MINTED"]=255,a[p[256]="PAYER_ACCOUNT_DELETED"]=256,a[p[257]="CUSTOM_FEE_CHARGING_EXCEEDED_MAX_RECURSION_DEPTH"]=257,a[p[258]="CUSTOM_FEE_CHARGING_EXCEEDED_MAX_ACCOUNT_AMOUNTS"]=258,a[p[259]="INSUFFICIENT_SENDER_ACCOUNT_BALANCE_FOR_CUSTOM_FEE"]=259,a[p[260]="SERIAL_NUMBER_LIMIT_REACHED"]=260,a[p[261]="CUSTOM_ROYALTY_FEE_ONLY_ALLOWED_FOR_NON_FUNGIBLE_UNIQUE"]=261,a[p[262]="NO_REMAINING_AUTOMATIC_ASSOCIATIONS"]=262,a[p[263]="EXISTING_AUTOMATIC_ASSOCIATIONS_EXCEED_GIVEN_LIMIT"]=263,a[p[264]="REQUESTED_NUM_AUTOMATIC_ASSOCIATIONS_EXCEEDS_ASSOCIATION_LIMIT"]=264,a[p[265]="TOKEN_IS_PAUSED"]=265,a[p[266]="TOKEN_HAS_NO_PAUSE_KEY"]=266,a[p[267]="INVALID_PAUSE_KEY"]=267,a[p[268]="FREEZE_UPDATE_FILE_DOES_NOT_EXIST"]=268,a[p[269]="FREEZE_UPDATE_FILE_HASH_DOES_NOT_MATCH"]=269,a[p[270]="NO_UPGRADE_HAS_BEEN_PREPARED"]=270,a[p[271]="NO_FREEZE_IS_SCHEDULED"]=271,a[p[272]="UPDATE_FILE_HASH_CHANGED_SINCE_PREPARE_UPGRADE"]=272,a[p[273]="FREEZE_START_TIME_MUST_BE_FUTURE"]=273,a[p[274]="PREPARED_UPDATE_FILE_IS_IMMUTABLE"]=274,a[p[275]="FREEZE_ALREADY_SCHEDULED"]=275,a[p[276]="FREEZE_UPGRADE_IN_PROGRESS"]=276,a[p[277]="UPDATE_FILE_ID_DOES_NOT_MATCH_PREPARED"]=277,a[p[278]="UPDATE_FILE_HASH_DOES_NOT_MATCH_PREPARED"]=278,a[p[279]="CONSENSUS_GAS_EXHAUSTED"]=279,a[p[280]="REVERTED_SUCCESS"]=280,a[p[281]="MAX_STORAGE_IN_PRICE_REGIME_HAS_BEEN_USED"]=281,a[p[282]="INVALID_ALIAS_KEY"]=282,a[p[283]="UNEXPECTED_TOKEN_DECIMALS"]=283,a[p[284]="INVALID_PROXY_ACCOUNT_ID"]=284,a[p[285]="INVALID_TRANSFER_ACCOUNT_ID"]=285,a[p[286]="INVALID_FEE_COLLECTOR_ACCOUNT_ID"]=286,a[p[287]="ALIAS_IS_IMMUTABLE"]=287,a[p[288]="SPENDER_ACCOUNT_SAME_AS_OWNER"]=288,a[p[289]="AMOUNT_EXCEEDS_TOKEN_MAX_SUPPLY"]=289,a[p[290]="NEGATIVE_ALLOWANCE_AMOUNT"]=290,a[p[291]="CANNOT_APPROVE_FOR_ALL_FUNGIBLE_COMMON"]=291,a[p[292]="SPENDER_DOES_NOT_HAVE_ALLOWANCE"]=292,a[p[293]="AMOUNT_EXCEEDS_ALLOWANCE"]=293,a[p[294]="MAX_ALLOWANCES_EXCEEDED"]=294,a[p[295]="EMPTY_ALLOWANCES"]=295,a[p[296]="SPENDER_ACCOUNT_REPEATED_IN_ALLOWANCES"]=296,a[p[297]="REPEATED_SERIAL_NUMS_IN_NFT_ALLOWANCES"]=297,a[p[298]="FUNGIBLE_TOKEN_IN_NFT_ALLOWANCES"]=298,a[p[299]="NFT_IN_FUNGIBLE_TOKEN_ALLOWANCES"]=299,a[p[300]="INVALID_ALLOWANCE_OWNER_ID"]=300,a[p[301]="INVALID_ALLOWANCE_SPENDER_ID"]=301,a[p[302]="REPEATED_ALLOWANCES_TO_DELETE"]=302,a[p[303]="INVALID_DELEGATING_SPENDER"]=303,a[p[304]="DELEGATING_SPENDER_CANNOT_GRANT_APPROVE_FOR_ALL"]=304,a[p[305]="DELEGATING_SPENDER_DOES_NOT_HAVE_APPROVE_FOR_ALL"]=305,a[p[306]="SCHEDULE_EXPIRATION_TIME_TOO_FAR_IN_FUTURE"]=306,a[p[307]="SCHEDULE_EXPIRATION_TIME_MUST_BE_HIGHER_THAN_CONSENSUS_TIME"]=307,a[p[308]="SCHEDULE_FUTURE_THROTTLE_EXCEEDED"]=308,a[p[309]="SCHEDULE_FUTURE_GAS_LIMIT_EXCEEDED"]=309,a[p[310]="INVALID_ETHEREUM_TRANSACTION"]=310,a[p[311]="WRONG_CHAIN_ID"]=311,a[p[312]="WRONG_NONCE"]=312,a[p[313]="ACCESS_LIST_UNSUPPORTED"]=313,a[p[314]="SCHEDULE_PENDING_EXPIRATION"]=314,a[p[315]="CONTRACT_IS_TOKEN_TREASURY"]=315,a[p[316]="CONTRACT_HAS_NON_ZERO_TOKEN_BALANCES"]=316,a[p[317]="CONTRACT_EXPIRED_AND_PENDING_REMOVAL"]=317,a[p[318]="CONTRACT_HAS_NO_AUTO_RENEW_ACCOUNT"]=318,a[p[319]="PERMANENT_REMOVAL_REQUIRES_SYSTEM_INITIATION"]=319,a[p[320]="PROXY_ACCOUNT_ID_FIELD_IS_DEPRECATED"]=320,a[p[321]="SELF_STAKING_IS_NOT_ALLOWED"]=321,a[p[322]="INVALID_STAKING_ID"]=322,a[p[323]="STAKING_NOT_ENABLED"]=323,a[p[324]="INVALID_PRNG_RANGE"]=324,a[p[325]="MAX_ENTITIES_IN_PRICE_REGIME_HAVE_BEEN_CREATED"]=325,a[p[326]="INVALID_FULL_PREFIX_SIGNATURE_FOR_PRECOMPILE"]=326,a[p[327]="INSUFFICIENT_BALANCES_FOR_STORAGE_RENT"]=327,a[p[328]="MAX_CHILD_RECORDS_EXCEEDED"]=328,a[p[329]="INSUFFICIENT_BALANCES_FOR_RENEWAL_FEES"]=329,a[p[330]="TRANSACTION_HAS_UNKNOWN_FIELDS"]=330,a[p[331]="ACCOUNT_IS_IMMUTABLE"]=331,a[p[332]="ALIAS_ALREADY_ASSIGNED"]=332,a}(),ConsensusTopicInfo:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.memo="",p.prototype.runningHash=h.newBuffer([]),p.prototype.sequenceNumber=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.expirationTime=null,p.prototype.adminKey=null,p.prototype.submitKey=null,p.prototype.autoRenewPeriod=null,p.prototype.autoRenewAccount=null,p.prototype.ledgerId=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.memo!=null&&Object.hasOwnProperty.call(a,"memo")&&u.uint32(10).string(a.memo),a.runningHash!=null&&Object.hasOwnProperty.call(a,"runningHash")&&u.uint32(18).bytes(a.runningHash),a.sequenceNumber!=null&&Object.hasOwnProperty.call(a,"sequenceNumber")&&u.uint32(24).uint64(a.sequenceNumber),a.expirationTime!=null&&Object.hasOwnProperty.call(a,"expirationTime")&&d.proto.Timestamp.encode(a.expirationTime,u.uint32(34).fork()).ldelim(),a.adminKey!=null&&Object.hasOwnProperty.call(a,"adminKey")&&d.proto.Key.encode(a.adminKey,u.uint32(42).fork()).ldelim(),a.submitKey!=null&&Object.hasOwnProperty.call(a,"submitKey")&&d.proto.Key.encode(a.submitKey,u.uint32(50).fork()).ldelim(),a.autoRenewPeriod!=null&&Object.hasOwnProperty.call(a,"autoRenewPeriod")&&d.proto.Duration.encode(a.autoRenewPeriod,u.uint32(58).fork()).ldelim(),a.autoRenewAccount!=null&&Object.hasOwnProperty.call(a,"autoRenewAccount")&&d.proto.AccountID.encode(a.autoRenewAccount,u.uint32(66).fork()).ldelim(),a.ledgerId!=null&&Object.hasOwnProperty.call(a,"ledgerId")&&u.uint32(74).bytes(a.ledgerId),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ConsensusTopicInfo,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.memo=a.string();break}case 2:{b.runningHash=a.bytes();break}case 3:{b.sequenceNumber=a.uint64();break}case 4:{b.expirationTime=d.proto.Timestamp.decode(a,a.uint32());break}case 5:{b.adminKey=d.proto.Key.decode(a,a.uint32());break}case 6:{b.submitKey=d.proto.Key.decode(a,a.uint32());break}case 7:{b.autoRenewPeriod=d.proto.Duration.decode(a,a.uint32());break}case 8:{b.autoRenewAccount=d.proto.AccountID.decode(a,a.uint32());break}case 9:{b.ledgerId=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ConsensusTopicInfo"},p}(),ConsensusService:function(){function p(a,u,y){e.rpc.Service.call(this,a,u,y)}return(p.prototype=Object.create(e.rpc.Service.prototype)).constructor=p,p.create=function(a,u,y){return new this(a,u,y)},Object.defineProperty(p.prototype.createTopic=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"createTopic"}),Object.defineProperty(p.prototype.updateTopic=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"updateTopic"}),Object.defineProperty(p.prototype.deleteTopic=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"deleteTopic"}),Object.defineProperty(p.prototype.getTopicInfo=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getTopicInfo"}),Object.defineProperty(p.prototype.submitMessage=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"submitMessage"}),p}(),Query:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.getByKey=null,p.prototype.getBySolidityID=null,p.prototype.contractCallLocal=null,p.prototype.contractGetInfo=null,p.prototype.contractGetBytecode=null,p.prototype.ContractGetRecords=null,p.prototype.cryptogetAccountBalance=null,p.prototype.cryptoGetAccountRecords=null,p.prototype.cryptoGetInfo=null,p.prototype.cryptoGetLiveHash=null,p.prototype.cryptoGetProxyStakers=null,p.prototype.fileGetContents=null,p.prototype.fileGetInfo=null,p.prototype.transactionGetReceipt=null,p.prototype.transactionGetRecord=null,p.prototype.transactionGetFastRecord=null,p.prototype.consensusGetTopicInfo=null,p.prototype.networkGetVersionInfo=null,p.prototype.tokenGetInfo=null,p.prototype.scheduleGetInfo=null,p.prototype.tokenGetAccountNftInfos=null,p.prototype.tokenGetNftInfo=null,p.prototype.tokenGetNftInfos=null,p.prototype.networkGetExecutionTime=null,p.prototype.accountDetails=null;let a;return Object.defineProperty(p.prototype,"query",{get:h.oneOfGetter(a=["getByKey","getBySolidityID","contractCallLocal","contractGetInfo","contractGetBytecode","ContractGetRecords","cryptogetAccountBalance","cryptoGetAccountRecords","cryptoGetInfo","cryptoGetLiveHash","cryptoGetProxyStakers","fileGetContents","fileGetInfo","transactionGetReceipt","transactionGetRecord","transactionGetFastRecord","consensusGetTopicInfo","networkGetVersionInfo","tokenGetInfo","scheduleGetInfo","tokenGetAccountNftInfos","tokenGetNftInfo","tokenGetNftInfos","networkGetExecutionTime","accountDetails"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.getByKey!=null&&Object.hasOwnProperty.call(u,"getByKey")&&d.proto.GetByKeyQuery.encode(u.getByKey,y.uint32(10).fork()).ldelim(),u.getBySolidityID!=null&&Object.hasOwnProperty.call(u,"getBySolidityID")&&d.proto.GetBySolidityIDQuery.encode(u.getBySolidityID,y.uint32(18).fork()).ldelim(),u.contractCallLocal!=null&&Object.hasOwnProperty.call(u,"contractCallLocal")&&d.proto.ContractCallLocalQuery.encode(u.contractCallLocal,y.uint32(26).fork()).ldelim(),u.contractGetInfo!=null&&Object.hasOwnProperty.call(u,"contractGetInfo")&&d.proto.ContractGetInfoQuery.encode(u.contractGetInfo,y.uint32(34).fork()).ldelim(),u.contractGetBytecode!=null&&Object.hasOwnProperty.call(u,"contractGetBytecode")&&d.proto.ContractGetBytecodeQuery.encode(u.contractGetBytecode,y.uint32(42).fork()).ldelim(),u.ContractGetRecords!=null&&Object.hasOwnProperty.call(u,"ContractGetRecords")&&d.proto.ContractGetRecordsQuery.encode(u.ContractGetRecords,y.uint32(50).fork()).ldelim(),u.cryptogetAccountBalance!=null&&Object.hasOwnProperty.call(u,"cryptogetAccountBalance")&&d.proto.CryptoGetAccountBalanceQuery.encode(u.cryptogetAccountBalance,y.uint32(58).fork()).ldelim(),u.cryptoGetAccountRecords!=null&&Object.hasOwnProperty.call(u,"cryptoGetAccountRecords")&&d.proto.CryptoGetAccountRecordsQuery.encode(u.cryptoGetAccountRecords,y.uint32(66).fork()).ldelim(),u.cryptoGetInfo!=null&&Object.hasOwnProperty.call(u,"cryptoGetInfo")&&d.proto.CryptoGetInfoQuery.encode(u.cryptoGetInfo,y.uint32(74).fork()).ldelim(),u.cryptoGetLiveHash!=null&&Object.hasOwnProperty.call(u,"cryptoGetLiveHash")&&d.proto.CryptoGetLiveHashQuery.encode(u.cryptoGetLiveHash,y.uint32(82).fork()).ldelim(),u.cryptoGetProxyStakers!=null&&Object.hasOwnProperty.call(u,"cryptoGetProxyStakers")&&d.proto.CryptoGetStakersQuery.encode(u.cryptoGetProxyStakers,y.uint32(90).fork()).ldelim(),u.fileGetContents!=null&&Object.hasOwnProperty.call(u,"fileGetContents")&&d.proto.FileGetContentsQuery.encode(u.fileGetContents,y.uint32(98).fork()).ldelim(),u.fileGetInfo!=null&&Object.hasOwnProperty.call(u,"fileGetInfo")&&d.proto.FileGetInfoQuery.encode(u.fileGetInfo,y.uint32(106).fork()).ldelim(),u.transactionGetReceipt!=null&&Object.hasOwnProperty.call(u,"transactionGetReceipt")&&d.proto.TransactionGetReceiptQuery.encode(u.transactionGetReceipt,y.uint32(114).fork()).ldelim(),u.transactionGetRecord!=null&&Object.hasOwnProperty.call(u,"transactionGetRecord")&&d.proto.TransactionGetRecordQuery.encode(u.transactionGetRecord,y.uint32(122).fork()).ldelim(),u.transactionGetFastRecord!=null&&Object.hasOwnProperty.call(u,"transactionGetFastRecord")&&d.proto.TransactionGetFastRecordQuery.encode(u.transactionGetFastRecord,y.uint32(130).fork()).ldelim(),u.consensusGetTopicInfo!=null&&Object.hasOwnProperty.call(u,"consensusGetTopicInfo")&&d.proto.ConsensusGetTopicInfoQuery.encode(u.consensusGetTopicInfo,y.uint32(402).fork()).ldelim(),u.networkGetVersionInfo!=null&&Object.hasOwnProperty.call(u,"networkGetVersionInfo")&&d.proto.NetworkGetVersionInfoQuery.encode(u.networkGetVersionInfo,y.uint32(410).fork()).ldelim(),u.tokenGetInfo!=null&&Object.hasOwnProperty.call(u,"tokenGetInfo")&&d.proto.TokenGetInfoQuery.encode(u.tokenGetInfo,y.uint32(418).fork()).ldelim(),u.scheduleGetInfo!=null&&Object.hasOwnProperty.call(u,"scheduleGetInfo")&&d.proto.ScheduleGetInfoQuery.encode(u.scheduleGetInfo,y.uint32(426).fork()).ldelim(),u.tokenGetAccountNftInfos!=null&&Object.hasOwnProperty.call(u,"tokenGetAccountNftInfos")&&d.proto.TokenGetAccountNftInfosQuery.encode(u.tokenGetAccountNftInfos,y.uint32(434).fork()).ldelim(),u.tokenGetNftInfo!=null&&Object.hasOwnProperty.call(u,"tokenGetNftInfo")&&d.proto.TokenGetNftInfoQuery.encode(u.tokenGetNftInfo,y.uint32(442).fork()).ldelim(),u.tokenGetNftInfos!=null&&Object.hasOwnProperty.call(u,"tokenGetNftInfos")&&d.proto.TokenGetNftInfosQuery.encode(u.tokenGetNftInfos,y.uint32(450).fork()).ldelim(),u.networkGetExecutionTime!=null&&Object.hasOwnProperty.call(u,"networkGetExecutionTime")&&d.proto.NetworkGetExecutionTimeQuery.encode(u.networkGetExecutionTime,y.uint32(458).fork()).ldelim(),u.accountDetails!=null&&Object.hasOwnProperty.call(u,"accountDetails")&&d.proto.GetAccountDetailsQuery.encode(u.accountDetails,y.uint32(466).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.Query,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.getByKey=d.proto.GetByKeyQuery.decode(u,u.uint32());break}case 2:{w.getBySolidityID=d.proto.GetBySolidityIDQuery.decode(u,u.uint32());break}case 3:{w.contractCallLocal=d.proto.ContractCallLocalQuery.decode(u,u.uint32());break}case 4:{w.contractGetInfo=d.proto.ContractGetInfoQuery.decode(u,u.uint32());break}case 5:{w.contractGetBytecode=d.proto.ContractGetBytecodeQuery.decode(u,u.uint32());break}case 6:{w.ContractGetRecords=d.proto.ContractGetRecordsQuery.decode(u,u.uint32());break}case 7:{w.cryptogetAccountBalance=d.proto.CryptoGetAccountBalanceQuery.decode(u,u.uint32());break}case 8:{w.cryptoGetAccountRecords=d.proto.CryptoGetAccountRecordsQuery.decode(u,u.uint32());break}case 9:{w.cryptoGetInfo=d.proto.CryptoGetInfoQuery.decode(u,u.uint32());break}case 10:{w.cryptoGetLiveHash=d.proto.CryptoGetLiveHashQuery.decode(u,u.uint32());break}case 11:{w.cryptoGetProxyStakers=d.proto.CryptoGetStakersQuery.decode(u,u.uint32());break}case 12:{w.fileGetContents=d.proto.FileGetContentsQuery.decode(u,u.uint32());break}case 13:{w.fileGetInfo=d.proto.FileGetInfoQuery.decode(u,u.uint32());break}case 14:{w.transactionGetReceipt=d.proto.TransactionGetReceiptQuery.decode(u,u.uint32());break}case 15:{w.transactionGetRecord=d.proto.TransactionGetRecordQuery.decode(u,u.uint32());break}case 16:{w.transactionGetFastRecord=d.proto.TransactionGetFastRecordQuery.decode(u,u.uint32());break}case 50:{w.consensusGetTopicInfo=d.proto.ConsensusGetTopicInfoQuery.decode(u,u.uint32());break}case 51:{w.networkGetVersionInfo=d.proto.NetworkGetVersionInfoQuery.decode(u,u.uint32());break}case 52:{w.tokenGetInfo=d.proto.TokenGetInfoQuery.decode(u,u.uint32());break}case 53:{w.scheduleGetInfo=d.proto.ScheduleGetInfoQuery.decode(u,u.uint32());break}case 54:{w.tokenGetAccountNftInfos=d.proto.TokenGetAccountNftInfosQuery.decode(u,u.uint32());break}case 55:{w.tokenGetNftInfo=d.proto.TokenGetNftInfoQuery.decode(u,u.uint32());break}case 56:{w.tokenGetNftInfos=d.proto.TokenGetNftInfosQuery.decode(u,u.uint32());break}case 57:{w.networkGetExecutionTime=d.proto.NetworkGetExecutionTimeQuery.decode(u,u.uint32());break}case 58:{w.accountDetails=d.proto.GetAccountDetailsQuery.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.Query"},p}(),GetByKeyQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.key=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.key!=null&&Object.hasOwnProperty.call(a,"key")&&d.proto.Key.encode(a.key,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.GetByKeyQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.key=d.proto.Key.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.GetByKeyQuery"},p}(),EntityID:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.accountID=null,p.prototype.liveHash=null,p.prototype.fileID=null,p.prototype.contractID=null;let a;return Object.defineProperty(p.prototype,"entity",{get:h.oneOfGetter(a=["accountID","liveHash","fileID","contractID"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.accountID!=null&&Object.hasOwnProperty.call(u,"accountID")&&d.proto.AccountID.encode(u.accountID,y.uint32(10).fork()).ldelim(),u.liveHash!=null&&Object.hasOwnProperty.call(u,"liveHash")&&d.proto.LiveHash.encode(u.liveHash,y.uint32(18).fork()).ldelim(),u.fileID!=null&&Object.hasOwnProperty.call(u,"fileID")&&d.proto.FileID.encode(u.fileID,y.uint32(26).fork()).ldelim(),u.contractID!=null&&Object.hasOwnProperty.call(u,"contractID")&&d.proto.ContractID.encode(u.contractID,y.uint32(34).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.EntityID,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.accountID=d.proto.AccountID.decode(u,u.uint32());break}case 2:{w.liveHash=d.proto.LiveHash.decode(u,u.uint32());break}case 3:{w.fileID=d.proto.FileID.decode(u,u.uint32());break}case 4:{w.contractID=d.proto.ContractID.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.EntityID"},p}(),GetByKeyResponse:function(){function p(a){if(this.entities=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.entities=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.entities!=null&&a.entities.length)for(var y=0;y<a.entities.length;++y)d.proto.EntityID.encode(a.entities[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.GetByKeyResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.entities&&b.entities.length||(b.entities=[]),b.entities.push(d.proto.EntityID.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.GetByKeyResponse"},p}(),GetBySolidityIDQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.solidityID="",p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.solidityID!=null&&Object.hasOwnProperty.call(a,"solidityID")&&u.uint32(18).string(a.solidityID),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.GetBySolidityIDQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.solidityID=a.string();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.GetBySolidityIDQuery"},p}(),GetBySolidityIDResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.accountID=null,p.prototype.fileID=null,p.prototype.contractID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(18).fork()).ldelim(),a.fileID!=null&&Object.hasOwnProperty.call(a,"fileID")&&d.proto.FileID.encode(a.fileID,u.uint32(26).fork()).ldelim(),a.contractID!=null&&Object.hasOwnProperty.call(a,"contractID")&&d.proto.ContractID.encode(a.contractID,u.uint32(34).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.GetBySolidityIDResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.fileID=d.proto.FileID.decode(a,a.uint32());break}case 4:{b.contractID=d.proto.ContractID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.GetBySolidityIDResponse"},p}(),ContractLoginfo:function(){function p(a){if(this.topic=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.contractID=null,p.prototype.bloom=h.newBuffer([]),p.prototype.topic=h.emptyArray,p.prototype.data=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.contractID!=null&&Object.hasOwnProperty.call(a,"contractID")&&d.proto.ContractID.encode(a.contractID,u.uint32(10).fork()).ldelim(),a.bloom!=null&&Object.hasOwnProperty.call(a,"bloom")&&u.uint32(18).bytes(a.bloom),a.topic!=null&&a.topic.length)for(var y=0;y<a.topic.length;++y)u.uint32(26).bytes(a.topic[y]);return a.data!=null&&Object.hasOwnProperty.call(a,"data")&&u.uint32(34).bytes(a.data),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractLoginfo,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.contractID=d.proto.ContractID.decode(a,a.uint32());break}case 2:{b.bloom=a.bytes();break}case 3:{b.topic&&b.topic.length||(b.topic=[]),b.topic.push(a.bytes());break}case 4:{b.data=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractLoginfo"},p}(),ContractFunctionResult:function(){function p(a){if(this.logInfo=[],this.createdContractIDs=[],this.contractNonces=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.contractID=null,p.prototype.contractCallResult=h.newBuffer([]),p.prototype.errorMessage="",p.prototype.bloom=h.newBuffer([]),p.prototype.gasUsed=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.logInfo=h.emptyArray,p.prototype.createdContractIDs=h.emptyArray,p.prototype.evmAddress=null,p.prototype.gas=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.amount=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.functionParameters=h.newBuffer([]),p.prototype.senderId=null,p.prototype.contractNonces=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.contractID!=null&&Object.hasOwnProperty.call(a,"contractID")&&d.proto.ContractID.encode(a.contractID,u.uint32(10).fork()).ldelim(),a.contractCallResult!=null&&Object.hasOwnProperty.call(a,"contractCallResult")&&u.uint32(18).bytes(a.contractCallResult),a.errorMessage!=null&&Object.hasOwnProperty.call(a,"errorMessage")&&u.uint32(26).string(a.errorMessage),a.bloom!=null&&Object.hasOwnProperty.call(a,"bloom")&&u.uint32(34).bytes(a.bloom),a.gasUsed!=null&&Object.hasOwnProperty.call(a,"gasUsed")&&u.uint32(40).uint64(a.gasUsed),a.logInfo!=null&&a.logInfo.length)for(var y=0;y<a.logInfo.length;++y)d.proto.ContractLoginfo.encode(a.logInfo[y],u.uint32(50).fork()).ldelim();if(a.createdContractIDs!=null&&a.createdContractIDs.length)for(var y=0;y<a.createdContractIDs.length;++y)d.proto.ContractID.encode(a.createdContractIDs[y],u.uint32(58).fork()).ldelim();if(a.evmAddress!=null&&Object.hasOwnProperty.call(a,"evmAddress")&&d.google.protobuf.BytesValue.encode(a.evmAddress,u.uint32(74).fork()).ldelim(),a.gas!=null&&Object.hasOwnProperty.call(a,"gas")&&u.uint32(80).int64(a.gas),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(88).int64(a.amount),a.functionParameters!=null&&Object.hasOwnProperty.call(a,"functionParameters")&&u.uint32(98).bytes(a.functionParameters),a.senderId!=null&&Object.hasOwnProperty.call(a,"senderId")&&d.proto.AccountID.encode(a.senderId,u.uint32(106).fork()).ldelim(),a.contractNonces!=null&&a.contractNonces.length)for(var y=0;y<a.contractNonces.length;++y)d.proto.ContractNonceInfo.encode(a.contractNonces[y],u.uint32(114).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractFunctionResult,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.contractID=d.proto.ContractID.decode(a,a.uint32());break}case 2:{b.contractCallResult=a.bytes();break}case 3:{b.errorMessage=a.string();break}case 4:{b.bloom=a.bytes();break}case 5:{b.gasUsed=a.uint64();break}case 6:{b.logInfo&&b.logInfo.length||(b.logInfo=[]),b.logInfo.push(d.proto.ContractLoginfo.decode(a,a.uint32()));break}case 7:{b.createdContractIDs&&b.createdContractIDs.length||(b.createdContractIDs=[]),b.createdContractIDs.push(d.proto.ContractID.decode(a,a.uint32()));break}case 9:{b.evmAddress=d.google.protobuf.BytesValue.decode(a,a.uint32());break}case 10:{b.gas=a.int64();break}case 11:{b.amount=a.int64();break}case 12:{b.functionParameters=a.bytes();break}case 13:{b.senderId=d.proto.AccountID.decode(a,a.uint32());break}case 14:{b.contractNonces&&b.contractNonces.length||(b.contractNonces=[]),b.contractNonces.push(d.proto.ContractNonceInfo.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractFunctionResult"},p}(),ContractCallLocalQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.contractID=null,p.prototype.gas=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.functionParameters=h.newBuffer([]),p.prototype.maxResultSize=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.senderId=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.contractID!=null&&Object.hasOwnProperty.call(a,"contractID")&&d.proto.ContractID.encode(a.contractID,u.uint32(18).fork()).ldelim(),a.gas!=null&&Object.hasOwnProperty.call(a,"gas")&&u.uint32(24).int64(a.gas),a.functionParameters!=null&&Object.hasOwnProperty.call(a,"functionParameters")&&u.uint32(34).bytes(a.functionParameters),a.maxResultSize!=null&&Object.hasOwnProperty.call(a,"maxResultSize")&&u.uint32(40).int64(a.maxResultSize),a.senderId!=null&&Object.hasOwnProperty.call(a,"senderId")&&d.proto.AccountID.encode(a.senderId,u.uint32(50).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractCallLocalQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.contractID=d.proto.ContractID.decode(a,a.uint32());break}case 3:{b.gas=a.int64();break}case 4:{b.functionParameters=a.bytes();break}case 5:{b.maxResultSize=a.int64();break}case 6:{b.senderId=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractCallLocalQuery"},p}(),ContractCallLocalResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.functionResult=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.functionResult!=null&&Object.hasOwnProperty.call(a,"functionResult")&&d.proto.ContractFunctionResult.encode(a.functionResult,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractCallLocalResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.functionResult=d.proto.ContractFunctionResult.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractCallLocalResponse"},p}(),ContractNonceInfo:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.contractId=null,p.prototype.nonce=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.contractId!=null&&Object.hasOwnProperty.call(a,"contractId")&&d.proto.ContractID.encode(a.contractId,u.uint32(10).fork()).ldelim(),a.nonce!=null&&Object.hasOwnProperty.call(a,"nonce")&&u.uint32(16).int64(a.nonce),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractNonceInfo,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.contractId=d.proto.ContractID.decode(a,a.uint32());break}case 2:{b.nonce=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractNonceInfo"},p}(),ContractGetInfoQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.contractID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.contractID!=null&&Object.hasOwnProperty.call(a,"contractID")&&d.proto.ContractID.encode(a.contractID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractGetInfoQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.contractID=d.proto.ContractID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractGetInfoQuery"},p}(),ContractGetInfoResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.contractInfo=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.contractInfo!=null&&Object.hasOwnProperty.call(a,"contractInfo")&&d.proto.ContractGetInfoResponse.ContractInfo.encode(a.contractInfo,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractGetInfoResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.contractInfo=d.proto.ContractGetInfoResponse.ContractInfo.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractGetInfoResponse"},p.ContractInfo=function(){function a(u){if(this.tokenRelationships=[],u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.contractID=null,a.prototype.accountID=null,a.prototype.contractAccountID="",a.prototype.adminKey=null,a.prototype.expirationTime=null,a.prototype.autoRenewPeriod=null,a.prototype.storage=h.Long?h.Long.fromBits(0,0,!1):0,a.prototype.memo="",a.prototype.balance=h.Long?h.Long.fromBits(0,0,!0):0,a.prototype.deleted=!1,a.prototype.tokenRelationships=h.emptyArray,a.prototype.ledgerId=h.newBuffer([]),a.prototype.autoRenewAccountId=null,a.prototype.maxAutomaticTokenAssociations=0,a.prototype.stakingInfo=null,a.create=function(u){return new a(u)},a.encode=function(u,y){if(y||(y=l.create()),u.contractID!=null&&Object.hasOwnProperty.call(u,"contractID")&&d.proto.ContractID.encode(u.contractID,y.uint32(10).fork()).ldelim(),u.accountID!=null&&Object.hasOwnProperty.call(u,"accountID")&&d.proto.AccountID.encode(u.accountID,y.uint32(18).fork()).ldelim(),u.contractAccountID!=null&&Object.hasOwnProperty.call(u,"contractAccountID")&&y.uint32(26).string(u.contractAccountID),u.adminKey!=null&&Object.hasOwnProperty.call(u,"adminKey")&&d.proto.Key.encode(u.adminKey,y.uint32(34).fork()).ldelim(),u.expirationTime!=null&&Object.hasOwnProperty.call(u,"expirationTime")&&d.proto.Timestamp.encode(u.expirationTime,y.uint32(42).fork()).ldelim(),u.autoRenewPeriod!=null&&Object.hasOwnProperty.call(u,"autoRenewPeriod")&&d.proto.Duration.encode(u.autoRenewPeriod,y.uint32(50).fork()).ldelim(),u.storage!=null&&Object.hasOwnProperty.call(u,"storage")&&y.uint32(56).int64(u.storage),u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&y.uint32(66).string(u.memo),u.balance!=null&&Object.hasOwnProperty.call(u,"balance")&&y.uint32(72).uint64(u.balance),u.deleted!=null&&Object.hasOwnProperty.call(u,"deleted")&&y.uint32(80).bool(u.deleted),u.tokenRelationships!=null&&u.tokenRelationships.length)for(var b=0;b<u.tokenRelationships.length;++b)d.proto.TokenRelationship.encode(u.tokenRelationships[b],y.uint32(90).fork()).ldelim();return u.ledgerId!=null&&Object.hasOwnProperty.call(u,"ledgerId")&&y.uint32(98).bytes(u.ledgerId),u.autoRenewAccountId!=null&&Object.hasOwnProperty.call(u,"autoRenewAccountId")&&d.proto.AccountID.encode(u.autoRenewAccountId,y.uint32(106).fork()).ldelim(),u.maxAutomaticTokenAssociations!=null&&Object.hasOwnProperty.call(u,"maxAutomaticTokenAssociations")&&y.uint32(112).int32(u.maxAutomaticTokenAssociations),u.stakingInfo!=null&&Object.hasOwnProperty.call(u,"stakingInfo")&&d.proto.StakingInfo.encode(u.stakingInfo,y.uint32(122).fork()).ldelim(),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.ContractGetInfoResponse.ContractInfo,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.contractID=d.proto.ContractID.decode(u,u.uint32());break}case 2:{w.accountID=d.proto.AccountID.decode(u,u.uint32());break}case 3:{w.contractAccountID=u.string();break}case 4:{w.adminKey=d.proto.Key.decode(u,u.uint32());break}case 5:{w.expirationTime=d.proto.Timestamp.decode(u,u.uint32());break}case 6:{w.autoRenewPeriod=d.proto.Duration.decode(u,u.uint32());break}case 7:{w.storage=u.int64();break}case 8:{w.memo=u.string();break}case 9:{w.balance=u.uint64();break}case 10:{w.deleted=u.bool();break}case 11:{w.tokenRelationships&&w.tokenRelationships.length||(w.tokenRelationships=[]),w.tokenRelationships.push(d.proto.TokenRelationship.decode(u,u.uint32()));break}case 12:{w.ledgerId=u.bytes();break}case 13:{w.autoRenewAccountId=d.proto.AccountID.decode(u,u.uint32());break}case 14:{w.maxAutomaticTokenAssociations=u.int32();break}case 15:{w.stakingInfo=d.proto.StakingInfo.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.ContractGetInfoResponse.ContractInfo"},a}(),p}(),ContractGetBytecodeQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.contractID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.contractID!=null&&Object.hasOwnProperty.call(a,"contractID")&&d.proto.ContractID.encode(a.contractID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractGetBytecodeQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.contractID=d.proto.ContractID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractGetBytecodeQuery"},p}(),ContractGetBytecodeResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.bytecode=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.bytecode!=null&&Object.hasOwnProperty.call(a,"bytecode")&&u.uint32(50).bytes(a.bytecode),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractGetBytecodeResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 6:{b.bytecode=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractGetBytecodeResponse"},p}(),ContractGetRecordsQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.contractID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.contractID!=null&&Object.hasOwnProperty.call(a,"contractID")&&d.proto.ContractID.encode(a.contractID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractGetRecordsQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.contractID=d.proto.ContractID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractGetRecordsQuery"},p}(),ContractGetRecordsResponse:function(){function p(a){if(this.records=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.contractID=null,p.prototype.records=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.contractID!=null&&Object.hasOwnProperty.call(a,"contractID")&&d.proto.ContractID.encode(a.contractID,u.uint32(18).fork()).ldelim(),a.records!=null&&a.records.length)for(var y=0;y<a.records.length;++y)d.proto.TransactionRecord.encode(a.records[y],u.uint32(26).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractGetRecordsResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.contractID=d.proto.ContractID.decode(a,a.uint32());break}case 3:{b.records&&b.records.length||(b.records=[]),b.records.push(d.proto.TransactionRecord.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractGetRecordsResponse"},p}(),TransactionRecord:function(){function p(u){if(this.tokenTransferLists=[],this.assessedCustomFees=[],this.automaticTokenAssociations=[],this.paidStakingRewards=[],u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.receipt=null,p.prototype.transactionHash=h.newBuffer([]),p.prototype.consensusTimestamp=null,p.prototype.transactionID=null,p.prototype.memo="",p.prototype.transactionFee=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.contractCallResult=null,p.prototype.contractCreateResult=null,p.prototype.transferList=null,p.prototype.tokenTransferLists=h.emptyArray,p.prototype.scheduleRef=null,p.prototype.assessedCustomFees=h.emptyArray,p.prototype.automaticTokenAssociations=h.emptyArray,p.prototype.parentConsensusTimestamp=null,p.prototype.alias=h.newBuffer([]),p.prototype.ethereumHash=h.newBuffer([]),p.prototype.paidStakingRewards=h.emptyArray,p.prototype.prngBytes=null,p.prototype.prngNumber=null,p.prototype.evmAddress=h.newBuffer([]);let a;return Object.defineProperty(p.prototype,"body",{get:h.oneOfGetter(a=["contractCallResult","contractCreateResult"]),set:h.oneOfSetter(a)}),Object.defineProperty(p.prototype,"entropy",{get:h.oneOfGetter(a=["prngBytes","prngNumber"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){if(y||(y=l.create()),u.receipt!=null&&Object.hasOwnProperty.call(u,"receipt")&&d.proto.TransactionReceipt.encode(u.receipt,y.uint32(10).fork()).ldelim(),u.transactionHash!=null&&Object.hasOwnProperty.call(u,"transactionHash")&&y.uint32(18).bytes(u.transactionHash),u.consensusTimestamp!=null&&Object.hasOwnProperty.call(u,"consensusTimestamp")&&d.proto.Timestamp.encode(u.consensusTimestamp,y.uint32(26).fork()).ldelim(),u.transactionID!=null&&Object.hasOwnProperty.call(u,"transactionID")&&d.proto.TransactionID.encode(u.transactionID,y.uint32(34).fork()).ldelim(),u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&y.uint32(42).string(u.memo),u.transactionFee!=null&&Object.hasOwnProperty.call(u,"transactionFee")&&y.uint32(48).uint64(u.transactionFee),u.contractCallResult!=null&&Object.hasOwnProperty.call(u,"contractCallResult")&&d.proto.ContractFunctionResult.encode(u.contractCallResult,y.uint32(58).fork()).ldelim(),u.contractCreateResult!=null&&Object.hasOwnProperty.call(u,"contractCreateResult")&&d.proto.ContractFunctionResult.encode(u.contractCreateResult,y.uint32(66).fork()).ldelim(),u.transferList!=null&&Object.hasOwnProperty.call(u,"transferList")&&d.proto.TransferList.encode(u.transferList,y.uint32(82).fork()).ldelim(),u.tokenTransferLists!=null&&u.tokenTransferLists.length)for(var b=0;b<u.tokenTransferLists.length;++b)d.proto.TokenTransferList.encode(u.tokenTransferLists[b],y.uint32(90).fork()).ldelim();if(u.scheduleRef!=null&&Object.hasOwnProperty.call(u,"scheduleRef")&&d.proto.ScheduleID.encode(u.scheduleRef,y.uint32(98).fork()).ldelim(),u.assessedCustomFees!=null&&u.assessedCustomFees.length)for(var b=0;b<u.assessedCustomFees.length;++b)d.proto.AssessedCustomFee.encode(u.assessedCustomFees[b],y.uint32(106).fork()).ldelim();if(u.automaticTokenAssociations!=null&&u.automaticTokenAssociations.length)for(var b=0;b<u.automaticTokenAssociations.length;++b)d.proto.TokenAssociation.encode(u.automaticTokenAssociations[b],y.uint32(114).fork()).ldelim();if(u.parentConsensusTimestamp!=null&&Object.hasOwnProperty.call(u,"parentConsensusTimestamp")&&d.proto.Timestamp.encode(u.parentConsensusTimestamp,y.uint32(122).fork()).ldelim(),u.alias!=null&&Object.hasOwnProperty.call(u,"alias")&&y.uint32(130).bytes(u.alias),u.ethereumHash!=null&&Object.hasOwnProperty.call(u,"ethereumHash")&&y.uint32(138).bytes(u.ethereumHash),u.paidStakingRewards!=null&&u.paidStakingRewards.length)for(var b=0;b<u.paidStakingRewards.length;++b)d.proto.AccountAmount.encode(u.paidStakingRewards[b],y.uint32(146).fork()).ldelim();return u.prngBytes!=null&&Object.hasOwnProperty.call(u,"prngBytes")&&y.uint32(154).bytes(u.prngBytes),u.prngNumber!=null&&Object.hasOwnProperty.call(u,"prngNumber")&&y.uint32(160).int32(u.prngNumber),u.evmAddress!=null&&Object.hasOwnProperty.call(u,"evmAddress")&&y.uint32(170).bytes(u.evmAddress),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.TransactionRecord,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.receipt=d.proto.TransactionReceipt.decode(u,u.uint32());break}case 2:{w.transactionHash=u.bytes();break}case 3:{w.consensusTimestamp=d.proto.Timestamp.decode(u,u.uint32());break}case 4:{w.transactionID=d.proto.TransactionID.decode(u,u.uint32());break}case 5:{w.memo=u.string();break}case 6:{w.transactionFee=u.uint64();break}case 7:{w.contractCallResult=d.proto.ContractFunctionResult.decode(u,u.uint32());break}case 8:{w.contractCreateResult=d.proto.ContractFunctionResult.decode(u,u.uint32());break}case 10:{w.transferList=d.proto.TransferList.decode(u,u.uint32());break}case 11:{w.tokenTransferLists&&w.tokenTransferLists.length||(w.tokenTransferLists=[]),w.tokenTransferLists.push(d.proto.TokenTransferList.decode(u,u.uint32()));break}case 12:{w.scheduleRef=d.proto.ScheduleID.decode(u,u.uint32());break}case 13:{w.assessedCustomFees&&w.assessedCustomFees.length||(w.assessedCustomFees=[]),w.assessedCustomFees.push(d.proto.AssessedCustomFee.decode(u,u.uint32()));break}case 14:{w.automaticTokenAssociations&&w.automaticTokenAssociations.length||(w.automaticTokenAssociations=[]),w.automaticTokenAssociations.push(d.proto.TokenAssociation.decode(u,u.uint32()));break}case 15:{w.parentConsensusTimestamp=d.proto.Timestamp.decode(u,u.uint32());break}case 16:{w.alias=u.bytes();break}case 17:{w.ethereumHash=u.bytes();break}case 18:{w.paidStakingRewards&&w.paidStakingRewards.length||(w.paidStakingRewards=[]),w.paidStakingRewards.push(d.proto.AccountAmount.decode(u,u.uint32()));break}case 19:{w.prngBytes=u.bytes();break}case 20:{w.prngNumber=u.int32();break}case 21:{w.evmAddress=u.bytes();break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.TransactionRecord"},p}(),TransactionReceipt:function(){function p(a){if(this.serialNumbers=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.status=0,p.prototype.accountID=null,p.prototype.fileID=null,p.prototype.contractID=null,p.prototype.exchangeRate=null,p.prototype.topicID=null,p.prototype.topicSequenceNumber=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.topicRunningHash=h.newBuffer([]),p.prototype.topicRunningHashVersion=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.tokenID=null,p.prototype.newTotalSupply=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.scheduleID=null,p.prototype.scheduledTransactionID=null,p.prototype.serialNumbers=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.status!=null&&Object.hasOwnProperty.call(a,"status")&&u.uint32(8).int32(a.status),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(18).fork()).ldelim(),a.fileID!=null&&Object.hasOwnProperty.call(a,"fileID")&&d.proto.FileID.encode(a.fileID,u.uint32(26).fork()).ldelim(),a.contractID!=null&&Object.hasOwnProperty.call(a,"contractID")&&d.proto.ContractID.encode(a.contractID,u.uint32(34).fork()).ldelim(),a.exchangeRate!=null&&Object.hasOwnProperty.call(a,"exchangeRate")&&d.proto.ExchangeRateSet.encode(a.exchangeRate,u.uint32(42).fork()).ldelim(),a.topicID!=null&&Object.hasOwnProperty.call(a,"topicID")&&d.proto.TopicID.encode(a.topicID,u.uint32(50).fork()).ldelim(),a.topicSequenceNumber!=null&&Object.hasOwnProperty.call(a,"topicSequenceNumber")&&u.uint32(56).uint64(a.topicSequenceNumber),a.topicRunningHash!=null&&Object.hasOwnProperty.call(a,"topicRunningHash")&&u.uint32(66).bytes(a.topicRunningHash),a.topicRunningHashVersion!=null&&Object.hasOwnProperty.call(a,"topicRunningHashVersion")&&u.uint32(72).uint64(a.topicRunningHashVersion),a.tokenID!=null&&Object.hasOwnProperty.call(a,"tokenID")&&d.proto.TokenID.encode(a.tokenID,u.uint32(82).fork()).ldelim(),a.newTotalSupply!=null&&Object.hasOwnProperty.call(a,"newTotalSupply")&&u.uint32(88).uint64(a.newTotalSupply),a.scheduleID!=null&&Object.hasOwnProperty.call(a,"scheduleID")&&d.proto.ScheduleID.encode(a.scheduleID,u.uint32(98).fork()).ldelim(),a.scheduledTransactionID!=null&&Object.hasOwnProperty.call(a,"scheduledTransactionID")&&d.proto.TransactionID.encode(a.scheduledTransactionID,u.uint32(106).fork()).ldelim(),a.serialNumbers!=null&&a.serialNumbers.length){u.uint32(114).fork();for(var y=0;y<a.serialNumbers.length;++y)u.int64(a.serialNumbers[y]);u.ldelim()}return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransactionReceipt,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.status=a.int32();break}case 2:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.fileID=d.proto.FileID.decode(a,a.uint32());break}case 4:{b.contractID=d.proto.ContractID.decode(a,a.uint32());break}case 5:{b.exchangeRate=d.proto.ExchangeRateSet.decode(a,a.uint32());break}case 6:{b.topicID=d.proto.TopicID.decode(a,a.uint32());break}case 7:{b.topicSequenceNumber=a.uint64();break}case 8:{b.topicRunningHash=a.bytes();break}case 9:{b.topicRunningHashVersion=a.uint64();break}case 10:{b.tokenID=d.proto.TokenID.decode(a,a.uint32());break}case 11:{b.newTotalSupply=a.uint64();break}case 12:{b.scheduleID=d.proto.ScheduleID.decode(a,a.uint32());break}case 13:{b.scheduledTransactionID=d.proto.TransactionID.decode(a,a.uint32());break}case 14:{if(b.serialNumbers&&b.serialNumbers.length||(b.serialNumbers=[]),(7&w)==2)for(var T=a.uint32()+a.pos;a.pos<T;)b.serialNumbers.push(a.int64());else b.serialNumbers.push(a.int64());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransactionReceipt"},p}(),ExchangeRate:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.hbarEquiv=0,p.prototype.centEquiv=0,p.prototype.expirationTime=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.hbarEquiv!=null&&Object.hasOwnProperty.call(a,"hbarEquiv")&&u.uint32(8).int32(a.hbarEquiv),a.centEquiv!=null&&Object.hasOwnProperty.call(a,"centEquiv")&&u.uint32(16).int32(a.centEquiv),a.expirationTime!=null&&Object.hasOwnProperty.call(a,"expirationTime")&&d.proto.TimestampSeconds.encode(a.expirationTime,u.uint32(26).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ExchangeRate,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.hbarEquiv=a.int32();break}case 2:{b.centEquiv=a.int32();break}case 3:{b.expirationTime=d.proto.TimestampSeconds.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ExchangeRate"},p}(),ExchangeRateSet:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.currentRate=null,p.prototype.nextRate=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.currentRate!=null&&Object.hasOwnProperty.call(a,"currentRate")&&d.proto.ExchangeRate.encode(a.currentRate,u.uint32(10).fork()).ldelim(),a.nextRate!=null&&Object.hasOwnProperty.call(a,"nextRate")&&d.proto.ExchangeRate.encode(a.nextRate,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ExchangeRateSet,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.currentRate=d.proto.ExchangeRate.decode(a,a.uint32());break}case 2:{b.nextRate=d.proto.ExchangeRate.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ExchangeRateSet"},p}(),CryptoGetAccountBalanceQuery:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.header=null,p.prototype.accountID=null,p.prototype.contractID=null;let a;return Object.defineProperty(p.prototype,"balanceSource",{get:h.oneOfGetter(a=["accountID","contractID"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.header!=null&&Object.hasOwnProperty.call(u,"header")&&d.proto.QueryHeader.encode(u.header,y.uint32(10).fork()).ldelim(),u.accountID!=null&&Object.hasOwnProperty.call(u,"accountID")&&d.proto.AccountID.encode(u.accountID,y.uint32(18).fork()).ldelim(),u.contractID!=null&&Object.hasOwnProperty.call(u,"contractID")&&d.proto.ContractID.encode(u.contractID,y.uint32(26).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.CryptoGetAccountBalanceQuery,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.header=d.proto.QueryHeader.decode(u,u.uint32());break}case 2:{w.accountID=d.proto.AccountID.decode(u,u.uint32());break}case 3:{w.contractID=d.proto.ContractID.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.CryptoGetAccountBalanceQuery"},p}(),CryptoGetAccountBalanceResponse:function(){function p(a){if(this.tokenBalances=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.accountID=null,p.prototype.balance=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.tokenBalances=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(18).fork()).ldelim(),a.balance!=null&&Object.hasOwnProperty.call(a,"balance")&&u.uint32(24).uint64(a.balance),a.tokenBalances!=null&&a.tokenBalances.length)for(var y=0;y<a.tokenBalances.length;++y)d.proto.TokenBalance.encode(a.tokenBalances[y],u.uint32(34).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoGetAccountBalanceResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.balance=a.uint64();break}case 4:{b.tokenBalances&&b.tokenBalances.length||(b.tokenBalances=[]),b.tokenBalances.push(d.proto.TokenBalance.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoGetAccountBalanceResponse"},p}(),CryptoGetAccountRecordsQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.accountID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoGetAccountRecordsQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoGetAccountRecordsQuery"},p}(),CryptoGetAccountRecordsResponse:function(){function p(a){if(this.records=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.accountID=null,p.prototype.records=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(18).fork()).ldelim(),a.records!=null&&a.records.length)for(var y=0;y<a.records.length;++y)d.proto.TransactionRecord.encode(a.records[y],u.uint32(26).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoGetAccountRecordsResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.records&&b.records.length||(b.records=[]),b.records.push(d.proto.TransactionRecord.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoGetAccountRecordsResponse"},p}(),CryptoGetInfoQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.accountID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoGetInfoQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoGetInfoQuery"},p}(),CryptoGetInfoResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.accountInfo=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.accountInfo!=null&&Object.hasOwnProperty.call(a,"accountInfo")&&d.proto.CryptoGetInfoResponse.AccountInfo.encode(a.accountInfo,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoGetInfoResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.accountInfo=d.proto.CryptoGetInfoResponse.AccountInfo.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoGetInfoResponse"},p.AccountInfo=function(){function a(u){if(this.liveHashes=[],this.tokenRelationships=[],u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.accountID=null,a.prototype.contractAccountID="",a.prototype.deleted=!1,a.prototype.proxyAccountID=null,a.prototype.proxyReceived=h.Long?h.Long.fromBits(0,0,!1):0,a.prototype.key=null,a.prototype.balance=h.Long?h.Long.fromBits(0,0,!0):0,a.prototype.generateSendRecordThreshold=h.Long?h.Long.fromBits(0,0,!0):0,a.prototype.generateReceiveRecordThreshold=h.Long?h.Long.fromBits(0,0,!0):0,a.prototype.receiverSigRequired=!1,a.prototype.expirationTime=null,a.prototype.autoRenewPeriod=null,a.prototype.liveHashes=h.emptyArray,a.prototype.tokenRelationships=h.emptyArray,a.prototype.memo="",a.prototype.ownedNfts=h.Long?h.Long.fromBits(0,0,!1):0,a.prototype.maxAutomaticTokenAssociations=0,a.prototype.alias=h.newBuffer([]),a.prototype.ledgerId=h.newBuffer([]),a.prototype.ethereumNonce=h.Long?h.Long.fromBits(0,0,!1):0,a.prototype.stakingInfo=null,a.create=function(u){return new a(u)},a.encode=function(u,y){if(y||(y=l.create()),u.accountID!=null&&Object.hasOwnProperty.call(u,"accountID")&&d.proto.AccountID.encode(u.accountID,y.uint32(10).fork()).ldelim(),u.contractAccountID!=null&&Object.hasOwnProperty.call(u,"contractAccountID")&&y.uint32(18).string(u.contractAccountID),u.deleted!=null&&Object.hasOwnProperty.call(u,"deleted")&&y.uint32(24).bool(u.deleted),u.proxyAccountID!=null&&Object.hasOwnProperty.call(u,"proxyAccountID")&&d.proto.AccountID.encode(u.proxyAccountID,y.uint32(34).fork()).ldelim(),u.proxyReceived!=null&&Object.hasOwnProperty.call(u,"proxyReceived")&&y.uint32(48).int64(u.proxyReceived),u.key!=null&&Object.hasOwnProperty.call(u,"key")&&d.proto.Key.encode(u.key,y.uint32(58).fork()).ldelim(),u.balance!=null&&Object.hasOwnProperty.call(u,"balance")&&y.uint32(64).uint64(u.balance),u.generateSendRecordThreshold!=null&&Object.hasOwnProperty.call(u,"generateSendRecordThreshold")&&y.uint32(72).uint64(u.generateSendRecordThreshold),u.generateReceiveRecordThreshold!=null&&Object.hasOwnProperty.call(u,"generateReceiveRecordThreshold")&&y.uint32(80).uint64(u.generateReceiveRecordThreshold),u.receiverSigRequired!=null&&Object.hasOwnProperty.call(u,"receiverSigRequired")&&y.uint32(88).bool(u.receiverSigRequired),u.expirationTime!=null&&Object.hasOwnProperty.call(u,"expirationTime")&&d.proto.Timestamp.encode(u.expirationTime,y.uint32(98).fork()).ldelim(),u.autoRenewPeriod!=null&&Object.hasOwnProperty.call(u,"autoRenewPeriod")&&d.proto.Duration.encode(u.autoRenewPeriod,y.uint32(106).fork()).ldelim(),u.liveHashes!=null&&u.liveHashes.length)for(var b=0;b<u.liveHashes.length;++b)d.proto.LiveHash.encode(u.liveHashes[b],y.uint32(114).fork()).ldelim();if(u.tokenRelationships!=null&&u.tokenRelationships.length)for(var b=0;b<u.tokenRelationships.length;++b)d.proto.TokenRelationship.encode(u.tokenRelationships[b],y.uint32(122).fork()).ldelim();return u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&y.uint32(130).string(u.memo),u.ownedNfts!=null&&Object.hasOwnProperty.call(u,"ownedNfts")&&y.uint32(136).int64(u.ownedNfts),u.maxAutomaticTokenAssociations!=null&&Object.hasOwnProperty.call(u,"maxAutomaticTokenAssociations")&&y.uint32(144).int32(u.maxAutomaticTokenAssociations),u.alias!=null&&Object.hasOwnProperty.call(u,"alias")&&y.uint32(154).bytes(u.alias),u.ledgerId!=null&&Object.hasOwnProperty.call(u,"ledgerId")&&y.uint32(162).bytes(u.ledgerId),u.ethereumNonce!=null&&Object.hasOwnProperty.call(u,"ethereumNonce")&&y.uint32(168).int64(u.ethereumNonce),u.stakingInfo!=null&&Object.hasOwnProperty.call(u,"stakingInfo")&&d.proto.StakingInfo.encode(u.stakingInfo,y.uint32(178).fork()).ldelim(),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.CryptoGetInfoResponse.AccountInfo,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.accountID=d.proto.AccountID.decode(u,u.uint32());break}case 2:{w.contractAccountID=u.string();break}case 3:{w.deleted=u.bool();break}case 4:{w.proxyAccountID=d.proto.AccountID.decode(u,u.uint32());break}case 6:{w.proxyReceived=u.int64();break}case 7:{w.key=d.proto.Key.decode(u,u.uint32());break}case 8:{w.balance=u.uint64();break}case 9:{w.generateSendRecordThreshold=u.uint64();break}case 10:{w.generateReceiveRecordThreshold=u.uint64();break}case 11:{w.receiverSigRequired=u.bool();break}case 12:{w.expirationTime=d.proto.Timestamp.decode(u,u.uint32());break}case 13:{w.autoRenewPeriod=d.proto.Duration.decode(u,u.uint32());break}case 14:{w.liveHashes&&w.liveHashes.length||(w.liveHashes=[]),w.liveHashes.push(d.proto.LiveHash.decode(u,u.uint32()));break}case 15:{w.tokenRelationships&&w.tokenRelationships.length||(w.tokenRelationships=[]),w.tokenRelationships.push(d.proto.TokenRelationship.decode(u,u.uint32()));break}case 16:{w.memo=u.string();break}case 17:{w.ownedNfts=u.int64();break}case 18:{w.maxAutomaticTokenAssociations=u.int32();break}case 19:{w.alias=u.bytes();break}case 20:{w.ledgerId=u.bytes();break}case 21:{w.ethereumNonce=u.int64();break}case 22:{w.stakingInfo=d.proto.StakingInfo.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.CryptoGetInfoResponse.AccountInfo"},a}(),p}(),CryptoGetLiveHashQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.accountID=null,p.prototype.hash=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(18).fork()).ldelim(),a.hash!=null&&Object.hasOwnProperty.call(a,"hash")&&u.uint32(26).bytes(a.hash),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoGetLiveHashQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.hash=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoGetLiveHashQuery"},p}(),CryptoGetLiveHashResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.liveHash=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.liveHash!=null&&Object.hasOwnProperty.call(a,"liveHash")&&d.proto.LiveHash.encode(a.liveHash,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoGetLiveHashResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.liveHash=d.proto.LiveHash.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoGetLiveHashResponse"},p}(),CryptoGetStakersQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.accountID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoGetStakersQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoGetStakersQuery"},p}(),ProxyStaker:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.accountID=null,p.prototype.amount=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(10).fork()).ldelim(),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(16).int64(a.amount),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ProxyStaker,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.amount=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ProxyStaker"},p}(),AllProxyStakers:function(){function p(a){if(this.proxyStaker=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.accountID=null,p.prototype.proxyStaker=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(10).fork()).ldelim(),a.proxyStaker!=null&&a.proxyStaker.length)for(var y=0;y<a.proxyStaker.length;++y)d.proto.ProxyStaker.encode(a.proxyStaker[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.AllProxyStakers,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.proxyStaker&&b.proxyStaker.length||(b.proxyStaker=[]),b.proxyStaker.push(d.proto.ProxyStaker.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.AllProxyStakers"},p}(),CryptoGetStakersResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.stakers=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.stakers!=null&&Object.hasOwnProperty.call(a,"stakers")&&d.proto.AllProxyStakers.encode(a.stakers,u.uint32(26).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.CryptoGetStakersResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 3:{b.stakers=d.proto.AllProxyStakers.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.CryptoGetStakersResponse"},p}(),FileGetContentsQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.fileID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.fileID!=null&&Object.hasOwnProperty.call(a,"fileID")&&d.proto.FileID.encode(a.fileID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FileGetContentsQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.fileID=d.proto.FileID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FileGetContentsQuery"},p}(),FileGetContentsResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.fileContents=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.fileContents!=null&&Object.hasOwnProperty.call(a,"fileContents")&&d.proto.FileGetContentsResponse.FileContents.encode(a.fileContents,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FileGetContentsResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.fileContents=d.proto.FileGetContentsResponse.FileContents.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FileGetContentsResponse"},p.FileContents=function(){function a(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.fileID=null,a.prototype.contents=h.newBuffer([]),a.create=function(u){return new a(u)},a.encode=function(u,y){return y||(y=l.create()),u.fileID!=null&&Object.hasOwnProperty.call(u,"fileID")&&d.proto.FileID.encode(u.fileID,y.uint32(10).fork()).ldelim(),u.contents!=null&&Object.hasOwnProperty.call(u,"contents")&&y.uint32(18).bytes(u.contents),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.FileGetContentsResponse.FileContents,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.fileID=d.proto.FileID.decode(u,u.uint32());break}case 2:{w.contents=u.bytes();break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.FileGetContentsResponse.FileContents"},a}(),p}(),FileGetInfoQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.fileID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.fileID!=null&&Object.hasOwnProperty.call(a,"fileID")&&d.proto.FileID.encode(a.fileID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FileGetInfoQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.fileID=d.proto.FileID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FileGetInfoQuery"},p}(),FileGetInfoResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.fileInfo=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.fileInfo!=null&&Object.hasOwnProperty.call(a,"fileInfo")&&d.proto.FileGetInfoResponse.FileInfo.encode(a.fileInfo,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.FileGetInfoResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.fileInfo=d.proto.FileGetInfoResponse.FileInfo.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.FileGetInfoResponse"},p.FileInfo=function(){function a(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.fileID=null,a.prototype.size=h.Long?h.Long.fromBits(0,0,!1):0,a.prototype.expirationTime=null,a.prototype.deleted=!1,a.prototype.keys=null,a.prototype.memo="",a.prototype.ledgerId=h.newBuffer([]),a.create=function(u){return new a(u)},a.encode=function(u,y){return y||(y=l.create()),u.fileID!=null&&Object.hasOwnProperty.call(u,"fileID")&&d.proto.FileID.encode(u.fileID,y.uint32(10).fork()).ldelim(),u.size!=null&&Object.hasOwnProperty.call(u,"size")&&y.uint32(16).int64(u.size),u.expirationTime!=null&&Object.hasOwnProperty.call(u,"expirationTime")&&d.proto.Timestamp.encode(u.expirationTime,y.uint32(26).fork()).ldelim(),u.deleted!=null&&Object.hasOwnProperty.call(u,"deleted")&&y.uint32(32).bool(u.deleted),u.keys!=null&&Object.hasOwnProperty.call(u,"keys")&&d.proto.KeyList.encode(u.keys,y.uint32(42).fork()).ldelim(),u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&y.uint32(50).string(u.memo),u.ledgerId!=null&&Object.hasOwnProperty.call(u,"ledgerId")&&y.uint32(58).bytes(u.ledgerId),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.FileGetInfoResponse.FileInfo,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.fileID=d.proto.FileID.decode(u,u.uint32());break}case 2:{w.size=u.int64();break}case 3:{w.expirationTime=d.proto.Timestamp.decode(u,u.uint32());break}case 4:{w.deleted=u.bool();break}case 5:{w.keys=d.proto.KeyList.decode(u,u.uint32());break}case 6:{w.memo=u.string();break}case 7:{w.ledgerId=u.bytes();break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.FileGetInfoResponse.FileInfo"},a}(),p}(),TransactionGetReceiptQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.transactionID=null,p.prototype.includeDuplicates=!1,p.prototype.includeChildReceipts=!1,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.transactionID!=null&&Object.hasOwnProperty.call(a,"transactionID")&&d.proto.TransactionID.encode(a.transactionID,u.uint32(18).fork()).ldelim(),a.includeDuplicates!=null&&Object.hasOwnProperty.call(a,"includeDuplicates")&&u.uint32(24).bool(a.includeDuplicates),a.includeChildReceipts!=null&&Object.hasOwnProperty.call(a,"includeChildReceipts")&&u.uint32(32).bool(a.includeChildReceipts),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransactionGetReceiptQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.transactionID=d.proto.TransactionID.decode(a,a.uint32());break}case 3:{b.includeDuplicates=a.bool();break}case 4:{b.includeChildReceipts=a.bool();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransactionGetReceiptQuery"},p}(),TransactionGetReceiptResponse:function(){function p(a){if(this.duplicateTransactionReceipts=[],this.childTransactionReceipts=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.receipt=null,p.prototype.duplicateTransactionReceipts=h.emptyArray,p.prototype.childTransactionReceipts=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.receipt!=null&&Object.hasOwnProperty.call(a,"receipt")&&d.proto.TransactionReceipt.encode(a.receipt,u.uint32(18).fork()).ldelim(),a.duplicateTransactionReceipts!=null&&a.duplicateTransactionReceipts.length)for(var y=0;y<a.duplicateTransactionReceipts.length;++y)d.proto.TransactionReceipt.encode(a.duplicateTransactionReceipts[y],u.uint32(34).fork()).ldelim();if(a.childTransactionReceipts!=null&&a.childTransactionReceipts.length)for(var y=0;y<a.childTransactionReceipts.length;++y)d.proto.TransactionReceipt.encode(a.childTransactionReceipts[y],u.uint32(42).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransactionGetReceiptResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.receipt=d.proto.TransactionReceipt.decode(a,a.uint32());break}case 4:{b.duplicateTransactionReceipts&&b.duplicateTransactionReceipts.length||(b.duplicateTransactionReceipts=[]),b.duplicateTransactionReceipts.push(d.proto.TransactionReceipt.decode(a,a.uint32()));break}case 5:{b.childTransactionReceipts&&b.childTransactionReceipts.length||(b.childTransactionReceipts=[]),b.childTransactionReceipts.push(d.proto.TransactionReceipt.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransactionGetReceiptResponse"},p}(),TransactionGetRecordQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.transactionID=null,p.prototype.includeDuplicates=!1,p.prototype.includeChildRecords=!1,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.transactionID!=null&&Object.hasOwnProperty.call(a,"transactionID")&&d.proto.TransactionID.encode(a.transactionID,u.uint32(18).fork()).ldelim(),a.includeDuplicates!=null&&Object.hasOwnProperty.call(a,"includeDuplicates")&&u.uint32(24).bool(a.includeDuplicates),a.includeChildRecords!=null&&Object.hasOwnProperty.call(a,"includeChildRecords")&&u.uint32(32).bool(a.includeChildRecords),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransactionGetRecordQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.transactionID=d.proto.TransactionID.decode(a,a.uint32());break}case 3:{b.includeDuplicates=a.bool();break}case 4:{b.includeChildRecords=a.bool();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransactionGetRecordQuery"},p}(),TransactionGetRecordResponse:function(){function p(a){if(this.duplicateTransactionRecords=[],this.childTransactionRecords=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.transactionRecord=null,p.prototype.duplicateTransactionRecords=h.emptyArray,p.prototype.childTransactionRecords=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.transactionRecord!=null&&Object.hasOwnProperty.call(a,"transactionRecord")&&d.proto.TransactionRecord.encode(a.transactionRecord,u.uint32(26).fork()).ldelim(),a.duplicateTransactionRecords!=null&&a.duplicateTransactionRecords.length)for(var y=0;y<a.duplicateTransactionRecords.length;++y)d.proto.TransactionRecord.encode(a.duplicateTransactionRecords[y],u.uint32(34).fork()).ldelim();if(a.childTransactionRecords!=null&&a.childTransactionRecords.length)for(var y=0;y<a.childTransactionRecords.length;++y)d.proto.TransactionRecord.encode(a.childTransactionRecords[y],u.uint32(42).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransactionGetRecordResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 3:{b.transactionRecord=d.proto.TransactionRecord.decode(a,a.uint32());break}case 4:{b.duplicateTransactionRecords&&b.duplicateTransactionRecords.length||(b.duplicateTransactionRecords=[]),b.duplicateTransactionRecords.push(d.proto.TransactionRecord.decode(a,a.uint32()));break}case 5:{b.childTransactionRecords&&b.childTransactionRecords.length||(b.childTransactionRecords=[]),b.childTransactionRecords.push(d.proto.TransactionRecord.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransactionGetRecordResponse"},p}(),TransactionGetFastRecordQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.transactionID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.transactionID!=null&&Object.hasOwnProperty.call(a,"transactionID")&&d.proto.TransactionID.encode(a.transactionID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransactionGetFastRecordQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.transactionID=d.proto.TransactionID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransactionGetFastRecordQuery"},p}(),TransactionGetFastRecordResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.transactionRecord=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.transactionRecord!=null&&Object.hasOwnProperty.call(a,"transactionRecord")&&d.proto.TransactionRecord.encode(a.transactionRecord,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TransactionGetFastRecordResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.transactionRecord=d.proto.TransactionRecord.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TransactionGetFastRecordResponse"},p}(),NetworkGetVersionInfoQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NetworkGetVersionInfoQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NetworkGetVersionInfoQuery"},p}(),NetworkGetVersionInfoResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.hapiProtoVersion=null,p.prototype.hederaServicesVersion=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.hapiProtoVersion!=null&&Object.hasOwnProperty.call(a,"hapiProtoVersion")&&d.proto.SemanticVersion.encode(a.hapiProtoVersion,u.uint32(18).fork()).ldelim(),a.hederaServicesVersion!=null&&Object.hasOwnProperty.call(a,"hederaServicesVersion")&&d.proto.SemanticVersion.encode(a.hederaServicesVersion,u.uint32(26).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NetworkGetVersionInfoResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.hapiProtoVersion=d.proto.SemanticVersion.decode(a,a.uint32());break}case 3:{b.hederaServicesVersion=d.proto.SemanticVersion.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NetworkGetVersionInfoResponse"},p}(),NetworkGetExecutionTimeQuery:function(){function p(a){if(this.transactionIds=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.transactionIds=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.transactionIds!=null&&a.transactionIds.length)for(var y=0;y<a.transactionIds.length;++y)d.proto.TransactionID.encode(a.transactionIds[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NetworkGetExecutionTimeQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.transactionIds&&b.transactionIds.length||(b.transactionIds=[]),b.transactionIds.push(d.proto.TransactionID.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NetworkGetExecutionTimeQuery"},p}(),NetworkGetExecutionTimeResponse:function(){function p(a){if(this.executionTimes=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.executionTimes=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.executionTimes!=null&&a.executionTimes.length){u.uint32(18).fork();for(var y=0;y<a.executionTimes.length;++y)u.uint64(a.executionTimes[y]);u.ldelim()}return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NetworkGetExecutionTimeResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{if(b.executionTimes&&b.executionTimes.length||(b.executionTimes=[]),(7&w)==2)for(var T=a.uint32()+a.pos;a.pos<T;)b.executionTimes.push(a.uint64());else b.executionTimes.push(a.uint64());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NetworkGetExecutionTimeResponse"},p}(),TokenGetInfoQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.token=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.token!=null&&Object.hasOwnProperty.call(a,"token")&&d.proto.TokenID.encode(a.token,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenGetInfoQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.token=d.proto.TokenID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenGetInfoQuery"},p}(),TokenInfo:function(){function p(a){if(this.customFees=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenId=null,p.prototype.name="",p.prototype.symbol="",p.prototype.decimals=0,p.prototype.totalSupply=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.treasury=null,p.prototype.adminKey=null,p.prototype.kycKey=null,p.prototype.freezeKey=null,p.prototype.wipeKey=null,p.prototype.supplyKey=null,p.prototype.defaultFreezeStatus=0,p.prototype.defaultKycStatus=0,p.prototype.deleted=!1,p.prototype.autoRenewAccount=null,p.prototype.autoRenewPeriod=null,p.prototype.expiry=null,p.prototype.memo="",p.prototype.tokenType=0,p.prototype.supplyType=0,p.prototype.maxSupply=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.feeScheduleKey=null,p.prototype.customFees=h.emptyArray,p.prototype.pauseKey=null,p.prototype.pauseStatus=0,p.prototype.ledgerId=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(10).fork()).ldelim(),a.name!=null&&Object.hasOwnProperty.call(a,"name")&&u.uint32(18).string(a.name),a.symbol!=null&&Object.hasOwnProperty.call(a,"symbol")&&u.uint32(26).string(a.symbol),a.decimals!=null&&Object.hasOwnProperty.call(a,"decimals")&&u.uint32(32).uint32(a.decimals),a.totalSupply!=null&&Object.hasOwnProperty.call(a,"totalSupply")&&u.uint32(40).uint64(a.totalSupply),a.treasury!=null&&Object.hasOwnProperty.call(a,"treasury")&&d.proto.AccountID.encode(a.treasury,u.uint32(50).fork()).ldelim(),a.adminKey!=null&&Object.hasOwnProperty.call(a,"adminKey")&&d.proto.Key.encode(a.adminKey,u.uint32(58).fork()).ldelim(),a.kycKey!=null&&Object.hasOwnProperty.call(a,"kycKey")&&d.proto.Key.encode(a.kycKey,u.uint32(66).fork()).ldelim(),a.freezeKey!=null&&Object.hasOwnProperty.call(a,"freezeKey")&&d.proto.Key.encode(a.freezeKey,u.uint32(74).fork()).ldelim(),a.wipeKey!=null&&Object.hasOwnProperty.call(a,"wipeKey")&&d.proto.Key.encode(a.wipeKey,u.uint32(82).fork()).ldelim(),a.supplyKey!=null&&Object.hasOwnProperty.call(a,"supplyKey")&&d.proto.Key.encode(a.supplyKey,u.uint32(90).fork()).ldelim(),a.defaultFreezeStatus!=null&&Object.hasOwnProperty.call(a,"defaultFreezeStatus")&&u.uint32(96).int32(a.defaultFreezeStatus),a.defaultKycStatus!=null&&Object.hasOwnProperty.call(a,"defaultKycStatus")&&u.uint32(104).int32(a.defaultKycStatus),a.deleted!=null&&Object.hasOwnProperty.call(a,"deleted")&&u.uint32(112).bool(a.deleted),a.autoRenewAccount!=null&&Object.hasOwnProperty.call(a,"autoRenewAccount")&&d.proto.AccountID.encode(a.autoRenewAccount,u.uint32(122).fork()).ldelim(),a.autoRenewPeriod!=null&&Object.hasOwnProperty.call(a,"autoRenewPeriod")&&d.proto.Duration.encode(a.autoRenewPeriod,u.uint32(130).fork()).ldelim(),a.expiry!=null&&Object.hasOwnProperty.call(a,"expiry")&&d.proto.Timestamp.encode(a.expiry,u.uint32(138).fork()).ldelim(),a.memo!=null&&Object.hasOwnProperty.call(a,"memo")&&u.uint32(146).string(a.memo),a.tokenType!=null&&Object.hasOwnProperty.call(a,"tokenType")&&u.uint32(152).int32(a.tokenType),a.supplyType!=null&&Object.hasOwnProperty.call(a,"supplyType")&&u.uint32(160).int32(a.supplyType),a.maxSupply!=null&&Object.hasOwnProperty.call(a,"maxSupply")&&u.uint32(168).int64(a.maxSupply),a.feeScheduleKey!=null&&Object.hasOwnProperty.call(a,"feeScheduleKey")&&d.proto.Key.encode(a.feeScheduleKey,u.uint32(178).fork()).ldelim(),a.customFees!=null&&a.customFees.length)for(var y=0;y<a.customFees.length;++y)d.proto.CustomFee.encode(a.customFees[y],u.uint32(186).fork()).ldelim();return a.pauseKey!=null&&Object.hasOwnProperty.call(a,"pauseKey")&&d.proto.Key.encode(a.pauseKey,u.uint32(194).fork()).ldelim(),a.pauseStatus!=null&&Object.hasOwnProperty.call(a,"pauseStatus")&&u.uint32(200).int32(a.pauseStatus),a.ledgerId!=null&&Object.hasOwnProperty.call(a,"ledgerId")&&u.uint32(210).bytes(a.ledgerId),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenInfo,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.name=a.string();break}case 3:{b.symbol=a.string();break}case 4:{b.decimals=a.uint32();break}case 5:{b.totalSupply=a.uint64();break}case 6:{b.treasury=d.proto.AccountID.decode(a,a.uint32());break}case 7:{b.adminKey=d.proto.Key.decode(a,a.uint32());break}case 8:{b.kycKey=d.proto.Key.decode(a,a.uint32());break}case 9:{b.freezeKey=d.proto.Key.decode(a,a.uint32());break}case 10:{b.wipeKey=d.proto.Key.decode(a,a.uint32());break}case 11:{b.supplyKey=d.proto.Key.decode(a,a.uint32());break}case 12:{b.defaultFreezeStatus=a.int32();break}case 13:{b.defaultKycStatus=a.int32();break}case 14:{b.deleted=a.bool();break}case 15:{b.autoRenewAccount=d.proto.AccountID.decode(a,a.uint32());break}case 16:{b.autoRenewPeriod=d.proto.Duration.decode(a,a.uint32());break}case 17:{b.expiry=d.proto.Timestamp.decode(a,a.uint32());break}case 18:{b.memo=a.string();break}case 19:{b.tokenType=a.int32();break}case 20:{b.supplyType=a.int32();break}case 21:{b.maxSupply=a.int64();break}case 22:{b.feeScheduleKey=d.proto.Key.decode(a,a.uint32());break}case 23:{b.customFees&&b.customFees.length||(b.customFees=[]),b.customFees.push(d.proto.CustomFee.decode(a,a.uint32()));break}case 24:{b.pauseKey=d.proto.Key.decode(a,a.uint32());break}case 25:{b.pauseStatus=a.int32();break}case 26:{b.ledgerId=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenInfo"},p}(),TokenGetInfoResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.tokenInfo=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.tokenInfo!=null&&Object.hasOwnProperty.call(a,"tokenInfo")&&d.proto.TokenInfo.encode(a.tokenInfo,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenGetInfoResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.tokenInfo=d.proto.TokenInfo.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenGetInfoResponse"},p}(),ScheduleGetInfoQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.scheduleID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.scheduleID!=null&&Object.hasOwnProperty.call(a,"scheduleID")&&d.proto.ScheduleID.encode(a.scheduleID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ScheduleGetInfoQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.scheduleID=d.proto.ScheduleID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ScheduleGetInfoQuery"},p}(),ScheduleInfo:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.scheduleID=null,p.prototype.deletionTime=null,p.prototype.executionTime=null,p.prototype.expirationTime=null,p.prototype.scheduledTransactionBody=null,p.prototype.memo="",p.prototype.adminKey=null,p.prototype.signers=null,p.prototype.creatorAccountID=null,p.prototype.payerAccountID=null,p.prototype.scheduledTransactionID=null,p.prototype.ledgerId=h.newBuffer([]),p.prototype.waitForExpiry=!1;let a;return Object.defineProperty(p.prototype,"data",{get:h.oneOfGetter(a=["deletionTime","executionTime"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.scheduleID!=null&&Object.hasOwnProperty.call(u,"scheduleID")&&d.proto.ScheduleID.encode(u.scheduleID,y.uint32(10).fork()).ldelim(),u.deletionTime!=null&&Object.hasOwnProperty.call(u,"deletionTime")&&d.proto.Timestamp.encode(u.deletionTime,y.uint32(18).fork()).ldelim(),u.executionTime!=null&&Object.hasOwnProperty.call(u,"executionTime")&&d.proto.Timestamp.encode(u.executionTime,y.uint32(26).fork()).ldelim(),u.expirationTime!=null&&Object.hasOwnProperty.call(u,"expirationTime")&&d.proto.Timestamp.encode(u.expirationTime,y.uint32(34).fork()).ldelim(),u.scheduledTransactionBody!=null&&Object.hasOwnProperty.call(u,"scheduledTransactionBody")&&d.proto.SchedulableTransactionBody.encode(u.scheduledTransactionBody,y.uint32(42).fork()).ldelim(),u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&y.uint32(50).string(u.memo),u.adminKey!=null&&Object.hasOwnProperty.call(u,"adminKey")&&d.proto.Key.encode(u.adminKey,y.uint32(58).fork()).ldelim(),u.signers!=null&&Object.hasOwnProperty.call(u,"signers")&&d.proto.KeyList.encode(u.signers,y.uint32(66).fork()).ldelim(),u.creatorAccountID!=null&&Object.hasOwnProperty.call(u,"creatorAccountID")&&d.proto.AccountID.encode(u.creatorAccountID,y.uint32(74).fork()).ldelim(),u.payerAccountID!=null&&Object.hasOwnProperty.call(u,"payerAccountID")&&d.proto.AccountID.encode(u.payerAccountID,y.uint32(82).fork()).ldelim(),u.scheduledTransactionID!=null&&Object.hasOwnProperty.call(u,"scheduledTransactionID")&&d.proto.TransactionID.encode(u.scheduledTransactionID,y.uint32(90).fork()).ldelim(),u.ledgerId!=null&&Object.hasOwnProperty.call(u,"ledgerId")&&y.uint32(98).bytes(u.ledgerId),u.waitForExpiry!=null&&Object.hasOwnProperty.call(u,"waitForExpiry")&&y.uint32(104).bool(u.waitForExpiry),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.ScheduleInfo,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.scheduleID=d.proto.ScheduleID.decode(u,u.uint32());break}case 2:{w.deletionTime=d.proto.Timestamp.decode(u,u.uint32());break}case 3:{w.executionTime=d.proto.Timestamp.decode(u,u.uint32());break}case 4:{w.expirationTime=d.proto.Timestamp.decode(u,u.uint32());break}case 5:{w.scheduledTransactionBody=d.proto.SchedulableTransactionBody.decode(u,u.uint32());break}case 6:{w.memo=u.string();break}case 7:{w.adminKey=d.proto.Key.decode(u,u.uint32());break}case 8:{w.signers=d.proto.KeyList.decode(u,u.uint32());break}case 9:{w.creatorAccountID=d.proto.AccountID.decode(u,u.uint32());break}case 10:{w.payerAccountID=d.proto.AccountID.decode(u,u.uint32());break}case 11:{w.scheduledTransactionID=d.proto.TransactionID.decode(u,u.uint32());break}case 12:{w.ledgerId=u.bytes();break}case 13:{w.waitForExpiry=u.bool();break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.ScheduleInfo"},p}(),ScheduleGetInfoResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.scheduleInfo=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.scheduleInfo!=null&&Object.hasOwnProperty.call(a,"scheduleInfo")&&d.proto.ScheduleInfo.encode(a.scheduleInfo,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ScheduleGetInfoResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.scheduleInfo=d.proto.ScheduleInfo.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ScheduleGetInfoResponse"},p}(),TokenGetAccountNftInfosQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.accountID=null,p.prototype.start=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.end=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(18).fork()).ldelim(),a.start!=null&&Object.hasOwnProperty.call(a,"start")&&u.uint32(24).int64(a.start),a.end!=null&&Object.hasOwnProperty.call(a,"end")&&u.uint32(32).int64(a.end),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenGetAccountNftInfosQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.start=a.int64();break}case 4:{b.end=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenGetAccountNftInfosQuery"},p}(),TokenGetAccountNftInfosResponse:function(){function p(a){if(this.nfts=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.nfts=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.nfts!=null&&a.nfts.length)for(var y=0;y<a.nfts.length;++y)d.proto.TokenNftInfo.encode(a.nfts[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenGetAccountNftInfosResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.nfts&&b.nfts.length||(b.nfts=[]),b.nfts.push(d.proto.TokenNftInfo.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenGetAccountNftInfosResponse"},p}(),NftID:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenID=null,p.prototype.serialNumber=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.tokenID!=null&&Object.hasOwnProperty.call(a,"tokenID")&&d.proto.TokenID.encode(a.tokenID,u.uint32(10).fork()).ldelim(),a.serialNumber!=null&&Object.hasOwnProperty.call(a,"serialNumber")&&u.uint32(16).int64(a.serialNumber),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.NftID,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenID=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.serialNumber=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.NftID"},p}(),TokenGetNftInfoQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.nftID=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.nftID!=null&&Object.hasOwnProperty.call(a,"nftID")&&d.proto.NftID.encode(a.nftID,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenGetNftInfoQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.nftID=d.proto.NftID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenGetNftInfoQuery"},p}(),TokenNftInfo:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.nftID=null,p.prototype.accountID=null,p.prototype.creationTime=null,p.prototype.metadata=h.newBuffer([]),p.prototype.ledgerId=h.newBuffer([]),p.prototype.spenderId=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.nftID!=null&&Object.hasOwnProperty.call(a,"nftID")&&d.proto.NftID.encode(a.nftID,u.uint32(10).fork()).ldelim(),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(18).fork()).ldelim(),a.creationTime!=null&&Object.hasOwnProperty.call(a,"creationTime")&&d.proto.Timestamp.encode(a.creationTime,u.uint32(26).fork()).ldelim(),a.metadata!=null&&Object.hasOwnProperty.call(a,"metadata")&&u.uint32(34).bytes(a.metadata),a.ledgerId!=null&&Object.hasOwnProperty.call(a,"ledgerId")&&u.uint32(42).bytes(a.ledgerId),a.spenderId!=null&&Object.hasOwnProperty.call(a,"spenderId")&&d.proto.AccountID.encode(a.spenderId,u.uint32(50).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenNftInfo,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.nftID=d.proto.NftID.decode(a,a.uint32());break}case 2:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.creationTime=d.proto.Timestamp.decode(a,a.uint32());break}case 4:{b.metadata=a.bytes();break}case 5:{b.ledgerId=a.bytes();break}case 6:{b.spenderId=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenNftInfo"},p}(),TokenGetNftInfoResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.nft=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.nft!=null&&Object.hasOwnProperty.call(a,"nft")&&d.proto.TokenNftInfo.encode(a.nft,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenGetNftInfoResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.nft=d.proto.TokenNftInfo.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenGetNftInfoResponse"},p}(),TokenGetNftInfosQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.tokenID=null,p.prototype.start=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.end=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.tokenID!=null&&Object.hasOwnProperty.call(a,"tokenID")&&d.proto.TokenID.encode(a.tokenID,u.uint32(18).fork()).ldelim(),a.start!=null&&Object.hasOwnProperty.call(a,"start")&&u.uint32(24).int64(a.start),a.end!=null&&Object.hasOwnProperty.call(a,"end")&&u.uint32(32).int64(a.end),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenGetNftInfosQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.tokenID=d.proto.TokenID.decode(a,a.uint32());break}case 3:{b.start=a.int64();break}case 4:{b.end=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenGetNftInfosQuery"},p}(),TokenGetNftInfosResponse:function(){function p(a){if(this.nfts=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.tokenID=null,p.prototype.nfts=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.tokenID!=null&&Object.hasOwnProperty.call(a,"tokenID")&&d.proto.TokenID.encode(a.tokenID,u.uint32(18).fork()).ldelim(),a.nfts!=null&&a.nfts.length)for(var y=0;y<a.nfts.length;++y)d.proto.TokenNftInfo.encode(a.nfts[y],u.uint32(26).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenGetNftInfosResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.tokenID=d.proto.TokenID.decode(a,a.uint32());break}case 3:{b.nfts&&b.nfts.length||(b.nfts=[]),b.nfts.push(d.proto.TokenNftInfo.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenGetNftInfosResponse"},p}(),GetAccountDetailsQuery:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.accountId=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.QueryHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.accountId!=null&&Object.hasOwnProperty.call(a,"accountId")&&d.proto.AccountID.encode(a.accountId,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.GetAccountDetailsQuery,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.QueryHeader.decode(a,a.uint32());break}case 2:{b.accountId=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.GetAccountDetailsQuery"},p}(),GetAccountDetailsResponse:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.header=null,p.prototype.accountDetails=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.header!=null&&Object.hasOwnProperty.call(a,"header")&&d.proto.ResponseHeader.encode(a.header,u.uint32(10).fork()).ldelim(),a.accountDetails!=null&&Object.hasOwnProperty.call(a,"accountDetails")&&d.proto.GetAccountDetailsResponse.AccountDetails.encode(a.accountDetails,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.GetAccountDetailsResponse,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.header=d.proto.ResponseHeader.decode(a,a.uint32());break}case 2:{b.accountDetails=d.proto.GetAccountDetailsResponse.AccountDetails.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.GetAccountDetailsResponse"},p.AccountDetails=function(){function a(u){if(this.tokenRelationships=[],this.grantedCryptoAllowances=[],this.grantedNftAllowances=[],this.grantedTokenAllowances=[],u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.accountId=null,a.prototype.contractAccountId="",a.prototype.deleted=!1,a.prototype.proxyAccountId=null,a.prototype.proxyReceived=h.Long?h.Long.fromBits(0,0,!1):0,a.prototype.key=null,a.prototype.balance=h.Long?h.Long.fromBits(0,0,!0):0,a.prototype.receiverSigRequired=!1,a.prototype.expirationTime=null,a.prototype.autoRenewPeriod=null,a.prototype.tokenRelationships=h.emptyArray,a.prototype.memo="",a.prototype.ownedNfts=h.Long?h.Long.fromBits(0,0,!1):0,a.prototype.maxAutomaticTokenAssociations=0,a.prototype.alias=h.newBuffer([]),a.prototype.ledgerId=h.newBuffer([]),a.prototype.grantedCryptoAllowances=h.emptyArray,a.prototype.grantedNftAllowances=h.emptyArray,a.prototype.grantedTokenAllowances=h.emptyArray,a.create=function(u){return new a(u)},a.encode=function(u,y){if(y||(y=l.create()),u.accountId!=null&&Object.hasOwnProperty.call(u,"accountId")&&d.proto.AccountID.encode(u.accountId,y.uint32(10).fork()).ldelim(),u.contractAccountId!=null&&Object.hasOwnProperty.call(u,"contractAccountId")&&y.uint32(18).string(u.contractAccountId),u.deleted!=null&&Object.hasOwnProperty.call(u,"deleted")&&y.uint32(24).bool(u.deleted),u.proxyAccountId!=null&&Object.hasOwnProperty.call(u,"proxyAccountId")&&d.proto.AccountID.encode(u.proxyAccountId,y.uint32(34).fork()).ldelim(),u.proxyReceived!=null&&Object.hasOwnProperty.call(u,"proxyReceived")&&y.uint32(40).int64(u.proxyReceived),u.key!=null&&Object.hasOwnProperty.call(u,"key")&&d.proto.Key.encode(u.key,y.uint32(50).fork()).ldelim(),u.balance!=null&&Object.hasOwnProperty.call(u,"balance")&&y.uint32(56).uint64(u.balance),u.receiverSigRequired!=null&&Object.hasOwnProperty.call(u,"receiverSigRequired")&&y.uint32(64).bool(u.receiverSigRequired),u.expirationTime!=null&&Object.hasOwnProperty.call(u,"expirationTime")&&d.proto.Timestamp.encode(u.expirationTime,y.uint32(74).fork()).ldelim(),u.autoRenewPeriod!=null&&Object.hasOwnProperty.call(u,"autoRenewPeriod")&&d.proto.Duration.encode(u.autoRenewPeriod,y.uint32(82).fork()).ldelim(),u.tokenRelationships!=null&&u.tokenRelationships.length)for(var b=0;b<u.tokenRelationships.length;++b)d.proto.TokenRelationship.encode(u.tokenRelationships[b],y.uint32(90).fork()).ldelim();if(u.memo!=null&&Object.hasOwnProperty.call(u,"memo")&&y.uint32(98).string(u.memo),u.ownedNfts!=null&&Object.hasOwnProperty.call(u,"ownedNfts")&&y.uint32(104).int64(u.ownedNfts),u.maxAutomaticTokenAssociations!=null&&Object.hasOwnProperty.call(u,"maxAutomaticTokenAssociations")&&y.uint32(112).int32(u.maxAutomaticTokenAssociations),u.alias!=null&&Object.hasOwnProperty.call(u,"alias")&&y.uint32(122).bytes(u.alias),u.ledgerId!=null&&Object.hasOwnProperty.call(u,"ledgerId")&&y.uint32(130).bytes(u.ledgerId),u.grantedCryptoAllowances!=null&&u.grantedCryptoAllowances.length)for(var b=0;b<u.grantedCryptoAllowances.length;++b)d.proto.GrantedCryptoAllowance.encode(u.grantedCryptoAllowances[b],y.uint32(138).fork()).ldelim();if(u.grantedNftAllowances!=null&&u.grantedNftAllowances.length)for(var b=0;b<u.grantedNftAllowances.length;++b)d.proto.GrantedNftAllowance.encode(u.grantedNftAllowances[b],y.uint32(146).fork()).ldelim();if(u.grantedTokenAllowances!=null&&u.grantedTokenAllowances.length)for(var b=0;b<u.grantedTokenAllowances.length;++b)d.proto.GrantedTokenAllowance.encode(u.grantedTokenAllowances[b],y.uint32(154).fork()).ldelim();return y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.GetAccountDetailsResponse.AccountDetails,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.accountId=d.proto.AccountID.decode(u,u.uint32());break}case 2:{w.contractAccountId=u.string();break}case 3:{w.deleted=u.bool();break}case 4:{w.proxyAccountId=d.proto.AccountID.decode(u,u.uint32());break}case 5:{w.proxyReceived=u.int64();break}case 6:{w.key=d.proto.Key.decode(u,u.uint32());break}case 7:{w.balance=u.uint64();break}case 8:{w.receiverSigRequired=u.bool();break}case 9:{w.expirationTime=d.proto.Timestamp.decode(u,u.uint32());break}case 10:{w.autoRenewPeriod=d.proto.Duration.decode(u,u.uint32());break}case 11:{w.tokenRelationships&&w.tokenRelationships.length||(w.tokenRelationships=[]),w.tokenRelationships.push(d.proto.TokenRelationship.decode(u,u.uint32()));break}case 12:{w.memo=u.string();break}case 13:{w.ownedNfts=u.int64();break}case 14:{w.maxAutomaticTokenAssociations=u.int32();break}case 15:{w.alias=u.bytes();break}case 16:{w.ledgerId=u.bytes();break}case 17:{w.grantedCryptoAllowances&&w.grantedCryptoAllowances.length||(w.grantedCryptoAllowances=[]),w.grantedCryptoAllowances.push(d.proto.GrantedCryptoAllowance.decode(u,u.uint32()));break}case 18:{w.grantedNftAllowances&&w.grantedNftAllowances.length||(w.grantedNftAllowances=[]),w.grantedNftAllowances.push(d.proto.GrantedNftAllowance.decode(u,u.uint32()));break}case 19:{w.grantedTokenAllowances&&w.grantedTokenAllowances.length||(w.grantedTokenAllowances=[]),w.grantedTokenAllowances.push(d.proto.GrantedTokenAllowance.decode(u,u.uint32()));break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.GetAccountDetailsResponse.AccountDetails"},a}(),p}(),GrantedCryptoAllowance:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.spender=null,p.prototype.amount=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.spender!=null&&Object.hasOwnProperty.call(a,"spender")&&d.proto.AccountID.encode(a.spender,u.uint32(10).fork()).ldelim(),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(16).int64(a.amount),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.GrantedCryptoAllowance,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.spender=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.amount=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.GrantedCryptoAllowance"},p}(),GrantedNftAllowance:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenId=null,p.prototype.spender=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(10).fork()).ldelim(),a.spender!=null&&Object.hasOwnProperty.call(a,"spender")&&d.proto.AccountID.encode(a.spender,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.GrantedNftAllowance,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.spender=d.proto.AccountID.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.GrantedNftAllowance"},p}(),GrantedTokenAllowance:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenId=null,p.prototype.spender=null,p.prototype.amount=h.Long?h.Long.fromBits(0,0,!1):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(10).fork()).ldelim(),a.spender!=null&&Object.hasOwnProperty.call(a,"spender")&&d.proto.AccountID.encode(a.spender,u.uint32(18).fork()).ldelim(),a.amount!=null&&Object.hasOwnProperty.call(a,"amount")&&u.uint32(24).int64(a.amount),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.GrantedTokenAllowance,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.spender=d.proto.AccountID.decode(a,a.uint32());break}case 3:{b.amount=a.int64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.GrantedTokenAllowance"},p}(),Response:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.getByKey=null,p.prototype.getBySolidityID=null,p.prototype.contractCallLocal=null,p.prototype.contractGetBytecodeResponse=null,p.prototype.contractGetInfo=null,p.prototype.contractGetRecordsResponse=null,p.prototype.cryptogetAccountBalance=null,p.prototype.cryptoGetAccountRecords=null,p.prototype.cryptoGetInfo=null,p.prototype.cryptoGetLiveHash=null,p.prototype.cryptoGetProxyStakers=null,p.prototype.fileGetContents=null,p.prototype.fileGetInfo=null,p.prototype.transactionGetReceipt=null,p.prototype.transactionGetRecord=null,p.prototype.transactionGetFastRecord=null,p.prototype.consensusGetTopicInfo=null,p.prototype.networkGetVersionInfo=null,p.prototype.tokenGetInfo=null,p.prototype.scheduleGetInfo=null,p.prototype.tokenGetAccountNftInfos=null,p.prototype.tokenGetNftInfo=null,p.prototype.tokenGetNftInfos=null,p.prototype.networkGetExecutionTime=null,p.prototype.accountDetails=null;let a;return Object.defineProperty(p.prototype,"response",{get:h.oneOfGetter(a=["getByKey","getBySolidityID","contractCallLocal","contractGetBytecodeResponse","contractGetInfo","contractGetRecordsResponse","cryptogetAccountBalance","cryptoGetAccountRecords","cryptoGetInfo","cryptoGetLiveHash","cryptoGetProxyStakers","fileGetContents","fileGetInfo","transactionGetReceipt","transactionGetRecord","transactionGetFastRecord","consensusGetTopicInfo","networkGetVersionInfo","tokenGetInfo","scheduleGetInfo","tokenGetAccountNftInfos","tokenGetNftInfo","tokenGetNftInfos","networkGetExecutionTime","accountDetails"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.getByKey!=null&&Object.hasOwnProperty.call(u,"getByKey")&&d.proto.GetByKeyResponse.encode(u.getByKey,y.uint32(10).fork()).ldelim(),u.getBySolidityID!=null&&Object.hasOwnProperty.call(u,"getBySolidityID")&&d.proto.GetBySolidityIDResponse.encode(u.getBySolidityID,y.uint32(18).fork()).ldelim(),u.contractCallLocal!=null&&Object.hasOwnProperty.call(u,"contractCallLocal")&&d.proto.ContractCallLocalResponse.encode(u.contractCallLocal,y.uint32(26).fork()).ldelim(),u.contractGetInfo!=null&&Object.hasOwnProperty.call(u,"contractGetInfo")&&d.proto.ContractGetInfoResponse.encode(u.contractGetInfo,y.uint32(34).fork()).ldelim(),u.contractGetBytecodeResponse!=null&&Object.hasOwnProperty.call(u,"contractGetBytecodeResponse")&&d.proto.ContractGetBytecodeResponse.encode(u.contractGetBytecodeResponse,y.uint32(42).fork()).ldelim(),u.contractGetRecordsResponse!=null&&Object.hasOwnProperty.call(u,"contractGetRecordsResponse")&&d.proto.ContractGetRecordsResponse.encode(u.contractGetRecordsResponse,y.uint32(50).fork()).ldelim(),u.cryptogetAccountBalance!=null&&Object.hasOwnProperty.call(u,"cryptogetAccountBalance")&&d.proto.CryptoGetAccountBalanceResponse.encode(u.cryptogetAccountBalance,y.uint32(58).fork()).ldelim(),u.cryptoGetAccountRecords!=null&&Object.hasOwnProperty.call(u,"cryptoGetAccountRecords")&&d.proto.CryptoGetAccountRecordsResponse.encode(u.cryptoGetAccountRecords,y.uint32(66).fork()).ldelim(),u.cryptoGetInfo!=null&&Object.hasOwnProperty.call(u,"cryptoGetInfo")&&d.proto.CryptoGetInfoResponse.encode(u.cryptoGetInfo,y.uint32(74).fork()).ldelim(),u.cryptoGetLiveHash!=null&&Object.hasOwnProperty.call(u,"cryptoGetLiveHash")&&d.proto.CryptoGetLiveHashResponse.encode(u.cryptoGetLiveHash,y.uint32(82).fork()).ldelim(),u.cryptoGetProxyStakers!=null&&Object.hasOwnProperty.call(u,"cryptoGetProxyStakers")&&d.proto.CryptoGetStakersResponse.encode(u.cryptoGetProxyStakers,y.uint32(90).fork()).ldelim(),u.fileGetContents!=null&&Object.hasOwnProperty.call(u,"fileGetContents")&&d.proto.FileGetContentsResponse.encode(u.fileGetContents,y.uint32(98).fork()).ldelim(),u.fileGetInfo!=null&&Object.hasOwnProperty.call(u,"fileGetInfo")&&d.proto.FileGetInfoResponse.encode(u.fileGetInfo,y.uint32(106).fork()).ldelim(),u.transactionGetReceipt!=null&&Object.hasOwnProperty.call(u,"transactionGetReceipt")&&d.proto.TransactionGetReceiptResponse.encode(u.transactionGetReceipt,y.uint32(114).fork()).ldelim(),u.transactionGetRecord!=null&&Object.hasOwnProperty.call(u,"transactionGetRecord")&&d.proto.TransactionGetRecordResponse.encode(u.transactionGetRecord,y.uint32(122).fork()).ldelim(),u.transactionGetFastRecord!=null&&Object.hasOwnProperty.call(u,"transactionGetFastRecord")&&d.proto.TransactionGetFastRecordResponse.encode(u.transactionGetFastRecord,y.uint32(130).fork()).ldelim(),u.consensusGetTopicInfo!=null&&Object.hasOwnProperty.call(u,"consensusGetTopicInfo")&&d.proto.ConsensusGetTopicInfoResponse.encode(u.consensusGetTopicInfo,y.uint32(1202).fork()).ldelim(),u.networkGetVersionInfo!=null&&Object.hasOwnProperty.call(u,"networkGetVersionInfo")&&d.proto.NetworkGetVersionInfoResponse.encode(u.networkGetVersionInfo,y.uint32(1210).fork()).ldelim(),u.tokenGetInfo!=null&&Object.hasOwnProperty.call(u,"tokenGetInfo")&&d.proto.TokenGetInfoResponse.encode(u.tokenGetInfo,y.uint32(1218).fork()).ldelim(),u.scheduleGetInfo!=null&&Object.hasOwnProperty.call(u,"scheduleGetInfo")&&d.proto.ScheduleGetInfoResponse.encode(u.scheduleGetInfo,y.uint32(1226).fork()).ldelim(),u.tokenGetAccountNftInfos!=null&&Object.hasOwnProperty.call(u,"tokenGetAccountNftInfos")&&d.proto.TokenGetAccountNftInfosResponse.encode(u.tokenGetAccountNftInfos,y.uint32(1234).fork()).ldelim(),u.tokenGetNftInfo!=null&&Object.hasOwnProperty.call(u,"tokenGetNftInfo")&&d.proto.TokenGetNftInfoResponse.encode(u.tokenGetNftInfo,y.uint32(1242).fork()).ldelim(),u.tokenGetNftInfos!=null&&Object.hasOwnProperty.call(u,"tokenGetNftInfos")&&d.proto.TokenGetNftInfosResponse.encode(u.tokenGetNftInfos,y.uint32(1250).fork()).ldelim(),u.networkGetExecutionTime!=null&&Object.hasOwnProperty.call(u,"networkGetExecutionTime")&&d.proto.NetworkGetExecutionTimeResponse.encode(u.networkGetExecutionTime,y.uint32(1258).fork()).ldelim(),u.accountDetails!=null&&Object.hasOwnProperty.call(u,"accountDetails")&&d.proto.GetAccountDetailsResponse.encode(u.accountDetails,y.uint32(1266).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.Response,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.getByKey=d.proto.GetByKeyResponse.decode(u,u.uint32());break}case 2:{w.getBySolidityID=d.proto.GetBySolidityIDResponse.decode(u,u.uint32());break}case 3:{w.contractCallLocal=d.proto.ContractCallLocalResponse.decode(u,u.uint32());break}case 5:{w.contractGetBytecodeResponse=d.proto.ContractGetBytecodeResponse.decode(u,u.uint32());break}case 4:{w.contractGetInfo=d.proto.ContractGetInfoResponse.decode(u,u.uint32());break}case 6:{w.contractGetRecordsResponse=d.proto.ContractGetRecordsResponse.decode(u,u.uint32());break}case 7:{w.cryptogetAccountBalance=d.proto.CryptoGetAccountBalanceResponse.decode(u,u.uint32());break}case 8:{w.cryptoGetAccountRecords=d.proto.CryptoGetAccountRecordsResponse.decode(u,u.uint32());break}case 9:{w.cryptoGetInfo=d.proto.CryptoGetInfoResponse.decode(u,u.uint32());break}case 10:{w.cryptoGetLiveHash=d.proto.CryptoGetLiveHashResponse.decode(u,u.uint32());break}case 11:{w.cryptoGetProxyStakers=d.proto.CryptoGetStakersResponse.decode(u,u.uint32());break}case 12:{w.fileGetContents=d.proto.FileGetContentsResponse.decode(u,u.uint32());break}case 13:{w.fileGetInfo=d.proto.FileGetInfoResponse.decode(u,u.uint32());break}case 14:{w.transactionGetReceipt=d.proto.TransactionGetReceiptResponse.decode(u,u.uint32());break}case 15:{w.transactionGetRecord=d.proto.TransactionGetRecordResponse.decode(u,u.uint32());break}case 16:{w.transactionGetFastRecord=d.proto.TransactionGetFastRecordResponse.decode(u,u.uint32());break}case 150:{w.consensusGetTopicInfo=d.proto.ConsensusGetTopicInfoResponse.decode(u,u.uint32());break}case 151:{w.networkGetVersionInfo=d.proto.NetworkGetVersionInfoResponse.decode(u,u.uint32());break}case 152:{w.tokenGetInfo=d.proto.TokenGetInfoResponse.decode(u,u.uint32());break}case 153:{w.scheduleGetInfo=d.proto.ScheduleGetInfoResponse.decode(u,u.uint32());break}case 154:{w.tokenGetAccountNftInfos=d.proto.TokenGetAccountNftInfosResponse.decode(u,u.uint32());break}case 155:{w.tokenGetNftInfo=d.proto.TokenGetNftInfoResponse.decode(u,u.uint32());break}case 156:{w.tokenGetNftInfos=d.proto.TokenGetNftInfosResponse.decode(u,u.uint32());break}case 157:{w.networkGetExecutionTime=d.proto.NetworkGetExecutionTimeResponse.decode(u,u.uint32());break}case 158:{w.accountDetails=d.proto.GetAccountDetailsResponse.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.Response"},p}(),CryptoService:function(){function p(a,u,y){e.rpc.Service.call(this,a,u,y)}return(p.prototype=Object.create(e.rpc.Service.prototype)).constructor=p,p.create=function(a,u,y){return new this(a,u,y)},Object.defineProperty(p.prototype.createAccount=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"createAccount"}),Object.defineProperty(p.prototype.updateAccount=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"updateAccount"}),Object.defineProperty(p.prototype.cryptoTransfer=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"cryptoTransfer"}),Object.defineProperty(p.prototype.cryptoDelete=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"cryptoDelete"}),Object.defineProperty(p.prototype.approveAllowances=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"approveAllowances"}),Object.defineProperty(p.prototype.deleteAllowances=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"deleteAllowances"}),Object.defineProperty(p.prototype.addLiveHash=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"addLiveHash"}),Object.defineProperty(p.prototype.deleteLiveHash=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"deleteLiveHash"}),Object.defineProperty(p.prototype.getLiveHash=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getLiveHash"}),Object.defineProperty(p.prototype.getAccountRecords=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getAccountRecords"}),Object.defineProperty(p.prototype.cryptoGetBalance=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"cryptoGetBalance"}),Object.defineProperty(p.prototype.getAccountInfo=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getAccountInfo"}),Object.defineProperty(p.prototype.getTransactionReceipts=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getTransactionReceipts"}),Object.defineProperty(p.prototype.getFastTransactionRecord=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getFastTransactionRecord"}),Object.defineProperty(p.prototype.getTxRecordByTxID=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getTxRecordByTxID"}),Object.defineProperty(p.prototype.getStakersByAccountID=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getStakersByAccountID"}),p}(),FileService:function(){function p(a,u,y){e.rpc.Service.call(this,a,u,y)}return(p.prototype=Object.create(e.rpc.Service.prototype)).constructor=p,p.create=function(a,u,y){return new this(a,u,y)},Object.defineProperty(p.prototype.createFile=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"createFile"}),Object.defineProperty(p.prototype.updateFile=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"updateFile"}),Object.defineProperty(p.prototype.deleteFile=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"deleteFile"}),Object.defineProperty(p.prototype.appendContent=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"appendContent"}),Object.defineProperty(p.prototype.getFileContent=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getFileContent"}),Object.defineProperty(p.prototype.getFileInfo=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getFileInfo"}),Object.defineProperty(p.prototype.systemDelete=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"systemDelete"}),Object.defineProperty(p.prototype.systemUndelete=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"systemUndelete"}),p}(),FreezeService:function(){function p(a,u,y){e.rpc.Service.call(this,a,u,y)}return(p.prototype=Object.create(e.rpc.Service.prototype)).constructor=p,p.create=function(a,u,y){return new this(a,u,y)},Object.defineProperty(p.prototype.freeze=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"freeze"}),p}(),NetworkService:function(){function p(a,u,y){e.rpc.Service.call(this,a,u,y)}return(p.prototype=Object.create(e.rpc.Service.prototype)).constructor=p,p.create=function(a,u,y){return new this(a,u,y)},Object.defineProperty(p.prototype.getVersionInfo=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getVersionInfo"}),Object.defineProperty(p.prototype.getExecutionTime=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getExecutionTime"}),Object.defineProperty(p.prototype.uncheckedSubmit=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"uncheckedSubmit"}),Object.defineProperty(p.prototype.getAccountDetails=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getAccountDetails"}),p}(),ScheduleService:function(){function p(a,u,y){e.rpc.Service.call(this,a,u,y)}return(p.prototype=Object.create(e.rpc.Service.prototype)).constructor=p,p.create=function(a,u,y){return new this(a,u,y)},Object.defineProperty(p.prototype.createSchedule=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"createSchedule"}),Object.defineProperty(p.prototype.signSchedule=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"signSchedule"}),Object.defineProperty(p.prototype.deleteSchedule=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"deleteSchedule"}),Object.defineProperty(p.prototype.getScheduleInfo=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getScheduleInfo"}),p}(),SmartContractService:function(){function p(a,u,y){e.rpc.Service.call(this,a,u,y)}return(p.prototype=Object.create(e.rpc.Service.prototype)).constructor=p,p.create=function(a,u,y){return new this(a,u,y)},Object.defineProperty(p.prototype.createContract=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"createContract"}),Object.defineProperty(p.prototype.updateContract=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"updateContract"}),Object.defineProperty(p.prototype.contractCallMethod=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"contractCallMethod"}),Object.defineProperty(p.prototype.getContractInfo=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getContractInfo"}),Object.defineProperty(p.prototype.contractCallLocalMethod=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"contractCallLocalMethod"}),Object.defineProperty(p.prototype.contractGetBytecode=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"ContractGetBytecode"}),Object.defineProperty(p.prototype.getBySolidityID=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getBySolidityID"}),Object.defineProperty(p.prototype.getTxRecordByContractID=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getTxRecordByContractID"}),Object.defineProperty(p.prototype.deleteContract=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"deleteContract"}),Object.defineProperty(p.prototype.systemDelete=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"systemDelete"}),Object.defineProperty(p.prototype.systemUndelete=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"systemUndelete"}),Object.defineProperty(p.prototype.callEthereum=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"callEthereum"}),p}(),ThrottleGroup:function(){function p(a){if(this.operations=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.operations=h.emptyArray,p.prototype.milliOpsPerSec=h.Long?h.Long.fromBits(0,0,!0):0,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.operations!=null&&a.operations.length){u.uint32(10).fork();for(var y=0;y<a.operations.length;++y)u.int32(a.operations[y]);u.ldelim()}return a.milliOpsPerSec!=null&&Object.hasOwnProperty.call(a,"milliOpsPerSec")&&u.uint32(16).uint64(a.milliOpsPerSec),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ThrottleGroup,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{if(b.operations&&b.operations.length||(b.operations=[]),(7&w)==2)for(var T=a.uint32()+a.pos;a.pos<T;)b.operations.push(a.int32());else b.operations.push(a.int32());break}case 2:{b.milliOpsPerSec=a.uint64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ThrottleGroup"},p}(),ThrottleBucket:function(){function p(a){if(this.throttleGroups=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.name="",p.prototype.burstPeriodMs=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.throttleGroups=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.name!=null&&Object.hasOwnProperty.call(a,"name")&&u.uint32(10).string(a.name),a.burstPeriodMs!=null&&Object.hasOwnProperty.call(a,"burstPeriodMs")&&u.uint32(16).uint64(a.burstPeriodMs),a.throttleGroups!=null&&a.throttleGroups.length)for(var y=0;y<a.throttleGroups.length;++y)d.proto.ThrottleGroup.encode(a.throttleGroups[y],u.uint32(26).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ThrottleBucket,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.name=a.string();break}case 2:{b.burstPeriodMs=a.uint64();break}case 3:{b.throttleGroups&&b.throttleGroups.length||(b.throttleGroups=[]),b.throttleGroups.push(d.proto.ThrottleGroup.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ThrottleBucket"},p}(),ThrottleDefinitions:function(){function p(a){if(this.throttleBuckets=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.throttleBuckets=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.throttleBuckets!=null&&a.throttleBuckets.length)for(var y=0;y<a.throttleBuckets.length;++y)d.proto.ThrottleBucket.encode(a.throttleBuckets[y],u.uint32(10).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ThrottleDefinitions,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.throttleBuckets&&b.throttleBuckets.length||(b.throttleBuckets=[]),b.throttleBuckets.push(d.proto.ThrottleBucket.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ThrottleDefinitions"},p}(),TokenService:function(){function p(a,u,y){e.rpc.Service.call(this,a,u,y)}return(p.prototype=Object.create(e.rpc.Service.prototype)).constructor=p,p.create=function(a,u,y){return new this(a,u,y)},Object.defineProperty(p.prototype.createToken=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"createToken"}),Object.defineProperty(p.prototype.updateToken=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"updateToken"}),Object.defineProperty(p.prototype.mintToken=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"mintToken"}),Object.defineProperty(p.prototype.burnToken=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"burnToken"}),Object.defineProperty(p.prototype.deleteToken=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"deleteToken"}),Object.defineProperty(p.prototype.wipeTokenAccount=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"wipeTokenAccount"}),Object.defineProperty(p.prototype.freezeTokenAccount=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"freezeTokenAccount"}),Object.defineProperty(p.prototype.unfreezeTokenAccount=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"unfreezeTokenAccount"}),Object.defineProperty(p.prototype.grantKycToTokenAccount=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"grantKycToTokenAccount"}),Object.defineProperty(p.prototype.revokeKycFromTokenAccount=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"revokeKycFromTokenAccount"}),Object.defineProperty(p.prototype.associateTokens=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"associateTokens"}),Object.defineProperty(p.prototype.dissociateTokens=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"dissociateTokens"}),Object.defineProperty(p.prototype.updateTokenFeeSchedule=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"updateTokenFeeSchedule"}),Object.defineProperty(p.prototype.getTokenInfo=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getTokenInfo"}),Object.defineProperty(p.prototype.getAccountNftInfos=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getAccountNftInfos"}),Object.defineProperty(p.prototype.getTokenNftInfo=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getTokenNftInfo"}),Object.defineProperty(p.prototype.getTokenNftInfos=function a(u,y){return this.rpcCall(a,d.proto.Query,d.proto.Response,u,y)},"name",{value:"getTokenNftInfos"}),Object.defineProperty(p.prototype.pauseToken=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"pauseToken"}),Object.defineProperty(p.prototype.unpauseToken=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"unpauseToken"}),p}(),SignedTransaction:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.bodyBytes=h.newBuffer([]),p.prototype.sigMap=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.bodyBytes!=null&&Object.hasOwnProperty.call(a,"bodyBytes")&&u.uint32(10).bytes(a.bodyBytes),a.sigMap!=null&&Object.hasOwnProperty.call(a,"sigMap")&&d.proto.SignatureMap.encode(a.sigMap,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.SignedTransaction,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.bodyBytes=a.bytes();break}case 2:{b.sigMap=d.proto.SignatureMap.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.SignedTransaction"},p}(),UtilService:function(){function p(a,u,y){e.rpc.Service.call(this,a,u,y)}return(p.prototype=Object.create(e.rpc.Service.prototype)).constructor=p,p.create=function(a,u,y){return new this(a,u,y)},Object.defineProperty(p.prototype.prng=function a(u,y){return this.rpcCall(a,d.proto.Transaction,d.proto.TransactionResponse,u,y)},"name",{value:"prng"}),p}(),TokenUnitBalance:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.tokenId=null,p.prototype.balance=h.Long?h.Long.fromBits(0,0,!0):0,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.tokenId!=null&&Object.hasOwnProperty.call(a,"tokenId")&&d.proto.TokenID.encode(a.tokenId,u.uint32(10).fork()).ldelim(),a.balance!=null&&Object.hasOwnProperty.call(a,"balance")&&u.uint32(16).uint64(a.balance),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.TokenUnitBalance,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.tokenId=d.proto.TokenID.decode(a,a.uint32());break}case 2:{b.balance=a.uint64();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.TokenUnitBalance"},p}(),SingleAccountBalances:function(){function p(a){if(this.tokenUnitBalances=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.accountID=null,p.prototype.hbarBalance=h.Long?h.Long.fromBits(0,0,!0):0,p.prototype.tokenUnitBalances=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.accountID!=null&&Object.hasOwnProperty.call(a,"accountID")&&d.proto.AccountID.encode(a.accountID,u.uint32(10).fork()).ldelim(),a.hbarBalance!=null&&Object.hasOwnProperty.call(a,"hbarBalance")&&u.uint32(16).uint64(a.hbarBalance),a.tokenUnitBalances!=null&&a.tokenUnitBalances.length)for(var y=0;y<a.tokenUnitBalances.length;++y)d.proto.TokenUnitBalance.encode(a.tokenUnitBalances[y],u.uint32(26).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.SingleAccountBalances,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.accountID=d.proto.AccountID.decode(a,a.uint32());break}case 2:{b.hbarBalance=a.uint64();break}case 3:{b.tokenUnitBalances&&b.tokenUnitBalances.length||(b.tokenUnitBalances=[]),b.tokenUnitBalances.push(d.proto.TokenUnitBalance.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.SingleAccountBalances"},p}(),AllAccountBalances:function(){function p(a){if(this.allAccounts=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.consensusTimestamp=null,p.prototype.allAccounts=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.consensusTimestamp!=null&&Object.hasOwnProperty.call(a,"consensusTimestamp")&&d.proto.Timestamp.encode(a.consensusTimestamp,u.uint32(10).fork()).ldelim(),a.allAccounts!=null&&a.allAccounts.length)for(var y=0;y<a.allAccounts.length;++y)d.proto.SingleAccountBalances.encode(a.allAccounts[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.AllAccountBalances,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.consensusTimestamp=d.proto.Timestamp.decode(a,a.uint32());break}case 2:{b.allAccounts&&b.allAccounts.length||(b.allAccounts=[]),b.allAccounts.push(d.proto.SingleAccountBalances.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.AllAccountBalances"},p}(),ContractActions:function(){function p(a){if(this.contractActions=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.contractActions=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.contractActions!=null&&a.contractActions.length)for(var y=0;y<a.contractActions.length;++y)d.proto.ContractAction.encode(a.contractActions[y],u.uint32(10).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractActions,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.contractActions&&b.contractActions.length||(b.contractActions=[]),b.contractActions.push(d.proto.ContractAction.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractActions"},p}(),ContractActionType:function(){const p={},a=Object.create(p);return a[p[0]="NO_ACTION"]=0,a[p[1]="CALL"]=1,a[p[2]="CREATE"]=2,a[p[3]="PRECOMPILE"]=3,a[p[4]="SYSTEM"]=4,a}(),CallOperationType:function(){const p={},a=Object.create(p);return a[p[0]="OP_UNKNOWN"]=0,a[p[1]="OP_CALL"]=1,a[p[2]="OP_CALLCODE"]=2,a[p[3]="OP_DELEGATECALL"]=3,a[p[4]="OP_STATICCALL"]=4,a[p[5]="OP_CREATE"]=5,a[p[6]="OP_CREATE2"]=6,a}(),ContractAction:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.callType=0,p.prototype.callingAccount=null,p.prototype.callingContract=null,p.prototype.gas=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.input=h.newBuffer([]),p.prototype.recipientAccount=null,p.prototype.recipientContract=null,p.prototype.targetedAddress=null,p.prototype.value=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.gasUsed=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.output=null,p.prototype.revertReason=null,p.prototype.error=null,p.prototype.callDepth=0,p.prototype.callOperationType=0;let a;return Object.defineProperty(p.prototype,"caller",{get:h.oneOfGetter(a=["callingAccount","callingContract"]),set:h.oneOfSetter(a)}),Object.defineProperty(p.prototype,"recipient",{get:h.oneOfGetter(a=["recipientAccount","recipientContract","targetedAddress"]),set:h.oneOfSetter(a)}),Object.defineProperty(p.prototype,"resultData",{get:h.oneOfGetter(a=["output","revertReason","error"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.callType!=null&&Object.hasOwnProperty.call(u,"callType")&&y.uint32(8).int32(u.callType),u.callingAccount!=null&&Object.hasOwnProperty.call(u,"callingAccount")&&d.proto.AccountID.encode(u.callingAccount,y.uint32(18).fork()).ldelim(),u.callingContract!=null&&Object.hasOwnProperty.call(u,"callingContract")&&d.proto.ContractID.encode(u.callingContract,y.uint32(26).fork()).ldelim(),u.gas!=null&&Object.hasOwnProperty.call(u,"gas")&&y.uint32(32).int64(u.gas),u.input!=null&&Object.hasOwnProperty.call(u,"input")&&y.uint32(42).bytes(u.input),u.recipientAccount!=null&&Object.hasOwnProperty.call(u,"recipientAccount")&&d.proto.AccountID.encode(u.recipientAccount,y.uint32(50).fork()).ldelim(),u.recipientContract!=null&&Object.hasOwnProperty.call(u,"recipientContract")&&d.proto.ContractID.encode(u.recipientContract,y.uint32(58).fork()).ldelim(),u.targetedAddress!=null&&Object.hasOwnProperty.call(u,"targetedAddress")&&y.uint32(66).bytes(u.targetedAddress),u.value!=null&&Object.hasOwnProperty.call(u,"value")&&y.uint32(72).int64(u.value),u.gasUsed!=null&&Object.hasOwnProperty.call(u,"gasUsed")&&y.uint32(80).int64(u.gasUsed),u.output!=null&&Object.hasOwnProperty.call(u,"output")&&y.uint32(90).bytes(u.output),u.revertReason!=null&&Object.hasOwnProperty.call(u,"revertReason")&&y.uint32(98).bytes(u.revertReason),u.error!=null&&Object.hasOwnProperty.call(u,"error")&&y.uint32(106).bytes(u.error),u.callDepth!=null&&Object.hasOwnProperty.call(u,"callDepth")&&y.uint32(112).int32(u.callDepth),u.callOperationType!=null&&Object.hasOwnProperty.call(u,"callOperationType")&&y.uint32(120).int32(u.callOperationType),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.ContractAction,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.callType=u.int32();break}case 2:{w.callingAccount=d.proto.AccountID.decode(u,u.uint32());break}case 3:{w.callingContract=d.proto.ContractID.decode(u,u.uint32());break}case 4:{w.gas=u.int64();break}case 5:{w.input=u.bytes();break}case 6:{w.recipientAccount=d.proto.AccountID.decode(u,u.uint32());break}case 7:{w.recipientContract=d.proto.ContractID.decode(u,u.uint32());break}case 8:{w.targetedAddress=u.bytes();break}case 9:{w.value=u.int64();break}case 10:{w.gasUsed=u.int64();break}case 11:{w.output=u.bytes();break}case 12:{w.revertReason=u.bytes();break}case 13:{w.error=u.bytes();break}case 14:{w.callDepth=u.int32();break}case 15:{w.callOperationType=u.int32();break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.ContractAction"},p}(),ContractBytecode:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.contractId=null,p.prototype.initcode=h.newBuffer([]),p.prototype.runtimeBytecode=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.contractId!=null&&Object.hasOwnProperty.call(a,"contractId")&&d.proto.ContractID.encode(a.contractId,u.uint32(10).fork()).ldelim(),a.initcode!=null&&Object.hasOwnProperty.call(a,"initcode")&&u.uint32(18).bytes(a.initcode),a.runtimeBytecode!=null&&Object.hasOwnProperty.call(a,"runtimeBytecode")&&u.uint32(26).bytes(a.runtimeBytecode),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractBytecode,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.contractId=d.proto.ContractID.decode(a,a.uint32());break}case 2:{b.initcode=a.bytes();break}case 3:{b.runtimeBytecode=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractBytecode"},p}(),ContractStateChanges:function(){function p(a){if(this.contractStateChanges=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.contractStateChanges=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.contractStateChanges!=null&&a.contractStateChanges.length)for(var y=0;y<a.contractStateChanges.length;++y)d.proto.ContractStateChange.encode(a.contractStateChanges[y],u.uint32(10).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractStateChanges,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.contractStateChanges&&b.contractStateChanges.length||(b.contractStateChanges=[]),b.contractStateChanges.push(d.proto.ContractStateChange.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractStateChanges"},p}(),ContractStateChange:function(){function p(a){if(this.storageChanges=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.contractId=null,p.prototype.storageChanges=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.contractId!=null&&Object.hasOwnProperty.call(a,"contractId")&&d.proto.ContractID.encode(a.contractId,u.uint32(10).fork()).ldelim(),a.storageChanges!=null&&a.storageChanges.length)for(var y=0;y<a.storageChanges.length;++y)d.proto.StorageChange.encode(a.storageChanges[y],u.uint32(18).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.ContractStateChange,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.contractId=d.proto.ContractID.decode(a,a.uint32());break}case 2:{b.storageChanges&&b.storageChanges.length||(b.storageChanges=[]),b.storageChanges.push(d.proto.StorageChange.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.ContractStateChange"},p}(),StorageChange:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.slot=h.newBuffer([]),p.prototype.valueRead=h.newBuffer([]),p.prototype.valueWritten=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.slot!=null&&Object.hasOwnProperty.call(a,"slot")&&u.uint32(10).bytes(a.slot),a.valueRead!=null&&Object.hasOwnProperty.call(a,"valueRead")&&u.uint32(18).bytes(a.valueRead),a.valueWritten!=null&&Object.hasOwnProperty.call(a,"valueWritten")&&d.google.protobuf.BytesValue.encode(a.valueWritten,u.uint32(26).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.StorageChange,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.slot=a.bytes();break}case 2:{b.valueRead=a.bytes();break}case 3:{b.valueWritten=d.google.protobuf.BytesValue.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.StorageChange"},p}(),HashAlgorithm:function(){const p={},a=Object.create(p);return a[p[0]="HASH_ALGORITHM_UNKNOWN"]=0,a[p[1]="SHA_384"]=1,a}(),HashObject:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.algorithm=0,p.prototype.length=0,p.prototype.hash=h.newBuffer([]),p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.algorithm!=null&&Object.hasOwnProperty.call(a,"algorithm")&&u.uint32(8).int32(a.algorithm),a.length!=null&&Object.hasOwnProperty.call(a,"length")&&u.uint32(16).int32(a.length),a.hash!=null&&Object.hasOwnProperty.call(a,"hash")&&u.uint32(26).bytes(a.hash),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.HashObject,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.algorithm=a.int32();break}case 2:{b.length=a.int32();break}case 3:{b.hash=a.bytes();break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.HashObject"},p}(),RecordStreamFile:function(){function p(a){if(this.recordStreamItems=[],this.sidecars=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.hapiProtoVersion=null,p.prototype.startObjectRunningHash=null,p.prototype.recordStreamItems=h.emptyArray,p.prototype.endObjectRunningHash=null,p.prototype.blockNumber=h.Long?h.Long.fromBits(0,0,!1):0,p.prototype.sidecars=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.hapiProtoVersion!=null&&Object.hasOwnProperty.call(a,"hapiProtoVersion")&&d.proto.SemanticVersion.encode(a.hapiProtoVersion,u.uint32(10).fork()).ldelim(),a.startObjectRunningHash!=null&&Object.hasOwnProperty.call(a,"startObjectRunningHash")&&d.proto.HashObject.encode(a.startObjectRunningHash,u.uint32(18).fork()).ldelim(),a.recordStreamItems!=null&&a.recordStreamItems.length)for(var y=0;y<a.recordStreamItems.length;++y)d.proto.RecordStreamItem.encode(a.recordStreamItems[y],u.uint32(26).fork()).ldelim();if(a.endObjectRunningHash!=null&&Object.hasOwnProperty.call(a,"endObjectRunningHash")&&d.proto.HashObject.encode(a.endObjectRunningHash,u.uint32(34).fork()).ldelim(),a.blockNumber!=null&&Object.hasOwnProperty.call(a,"blockNumber")&&u.uint32(40).int64(a.blockNumber),a.sidecars!=null&&a.sidecars.length)for(var y=0;y<a.sidecars.length;++y)d.proto.SidecarMetadata.encode(a.sidecars[y],u.uint32(50).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.RecordStreamFile,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.hapiProtoVersion=d.proto.SemanticVersion.decode(a,a.uint32());break}case 2:{b.startObjectRunningHash=d.proto.HashObject.decode(a,a.uint32());break}case 3:{b.recordStreamItems&&b.recordStreamItems.length||(b.recordStreamItems=[]),b.recordStreamItems.push(d.proto.RecordStreamItem.decode(a,a.uint32()));break}case 4:{b.endObjectRunningHash=d.proto.HashObject.decode(a,a.uint32());break}case 5:{b.blockNumber=a.int64();break}case 6:{b.sidecars&&b.sidecars.length||(b.sidecars=[]),b.sidecars.push(d.proto.SidecarMetadata.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.RecordStreamFile"},p}(),RecordStreamItem:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.transaction=null,p.prototype.record=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.transaction!=null&&Object.hasOwnProperty.call(a,"transaction")&&d.proto.Transaction.encode(a.transaction,u.uint32(10).fork()).ldelim(),a.record!=null&&Object.hasOwnProperty.call(a,"record")&&d.proto.TransactionRecord.encode(a.record,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.RecordStreamItem,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.transaction=d.proto.Transaction.decode(a,a.uint32());break}case 2:{b.record=d.proto.TransactionRecord.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.RecordStreamItem"},p}(),SidecarMetadata:function(){function p(a){if(this.types=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.hash=null,p.prototype.id=0,p.prototype.types=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.hash!=null&&Object.hasOwnProperty.call(a,"hash")&&d.proto.HashObject.encode(a.hash,u.uint32(10).fork()).ldelim(),a.id!=null&&Object.hasOwnProperty.call(a,"id")&&u.uint32(16).int32(a.id),a.types!=null&&a.types.length){u.uint32(26).fork();for(var y=0;y<a.types.length;++y)u.int32(a.types[y]);u.ldelim()}return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.SidecarMetadata,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.hash=d.proto.HashObject.decode(a,a.uint32());break}case 2:{b.id=a.int32();break}case 3:{if(b.types&&b.types.length||(b.types=[]),(7&w)==2)for(var T=a.uint32()+a.pos;a.pos<T;)b.types.push(a.int32());else b.types.push(a.int32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.SidecarMetadata"},p}(),SidecarType:function(){const p={},a=Object.create(p);return a[p[0]="SIDECAR_TYPE_UNKNOWN"]=0,a[p[1]="CONTRACT_STATE_CHANGE"]=1,a[p[2]="CONTRACT_ACTION"]=2,a[p[3]="CONTRACT_BYTECODE"]=3,a}(),SidecarFile:function(){function p(a){if(this.sidecarRecords=[],a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.sidecarRecords=h.emptyArray,p.create=function(a){return new p(a)},p.encode=function(a,u){if(u||(u=l.create()),a.sidecarRecords!=null&&a.sidecarRecords.length)for(var y=0;y<a.sidecarRecords.length;++y)d.proto.TransactionSidecarRecord.encode(a.sidecarRecords[y],u.uint32(10).fork()).ldelim();return u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.SidecarFile,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.sidecarRecords&&b.sidecarRecords.length||(b.sidecarRecords=[]),b.sidecarRecords.push(d.proto.TransactionSidecarRecord.decode(a,a.uint32()));break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.SidecarFile"},p}(),TransactionSidecarRecord:function(){function p(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}p.prototype.consensusTimestamp=null,p.prototype.migration=!1,p.prototype.stateChanges=null,p.prototype.actions=null,p.prototype.bytecode=null;let a;return Object.defineProperty(p.prototype,"sidecarRecords",{get:h.oneOfGetter(a=["stateChanges","actions","bytecode"]),set:h.oneOfSetter(a)}),p.create=function(u){return new p(u)},p.encode=function(u,y){return y||(y=l.create()),u.consensusTimestamp!=null&&Object.hasOwnProperty.call(u,"consensusTimestamp")&&d.proto.Timestamp.encode(u.consensusTimestamp,y.uint32(10).fork()).ldelim(),u.migration!=null&&Object.hasOwnProperty.call(u,"migration")&&y.uint32(16).bool(u.migration),u.stateChanges!=null&&Object.hasOwnProperty.call(u,"stateChanges")&&d.proto.ContractStateChanges.encode(u.stateChanges,y.uint32(26).fork()).ldelim(),u.actions!=null&&Object.hasOwnProperty.call(u,"actions")&&d.proto.ContractActions.encode(u.actions,y.uint32(34).fork()).ldelim(),u.bytecode!=null&&Object.hasOwnProperty.call(u,"bytecode")&&d.proto.ContractBytecode.encode(u.bytecode,y.uint32(42).fork()).ldelim(),y},p.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.proto.TransactionSidecarRecord,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.consensusTimestamp=d.proto.Timestamp.decode(u,u.uint32());break}case 2:{w.migration=u.bool();break}case 3:{w.stateChanges=d.proto.ContractStateChanges.decode(u,u.uint32());break}case 4:{w.actions=d.proto.ContractActions.decode(u,u.uint32());break}case 5:{w.bytecode=d.proto.ContractBytecode.decode(u,u.uint32());break}default:u.skipType(7&T)}return w},p.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/proto.TransactionSidecarRecord"},p}(),SignatureFile:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.fileSignature=null,p.prototype.metadataSignature=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.fileSignature!=null&&Object.hasOwnProperty.call(a,"fileSignature")&&d.proto.SignatureObject.encode(a.fileSignature,u.uint32(10).fork()).ldelim(),a.metadataSignature!=null&&Object.hasOwnProperty.call(a,"metadataSignature")&&d.proto.SignatureObject.encode(a.metadataSignature,u.uint32(18).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.SignatureFile,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.fileSignature=d.proto.SignatureObject.decode(a,a.uint32());break}case 2:{b.metadataSignature=d.proto.SignatureObject.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.SignatureFile"},p}(),SignatureObject:function(){function p(a){if(a)for(var u=Object.keys(a),y=0;y<u.length;++y)a[u[y]]!=null&&(this[u[y]]=a[u[y]])}return p.prototype.type=0,p.prototype.length=0,p.prototype.checksum=0,p.prototype.signature=h.newBuffer([]),p.prototype.hashObject=null,p.create=function(a){return new p(a)},p.encode=function(a,u){return u||(u=l.create()),a.type!=null&&Object.hasOwnProperty.call(a,"type")&&u.uint32(8).int32(a.type),a.length!=null&&Object.hasOwnProperty.call(a,"length")&&u.uint32(16).int32(a.length),a.checksum!=null&&Object.hasOwnProperty.call(a,"checksum")&&u.uint32(24).int32(a.checksum),a.signature!=null&&Object.hasOwnProperty.call(a,"signature")&&u.uint32(34).bytes(a.signature),a.hashObject!=null&&Object.hasOwnProperty.call(a,"hashObject")&&d.proto.HashObject.encode(a.hashObject,u.uint32(42).fork()).ldelim(),u},p.decode=function(a,u){a instanceof c||(a=c.create(a));for(var y=u===void 0?a.len:a.pos+u,b=new d.proto.SignatureObject,w;a.pos<y;)switch(w=a.uint32(),w>>>3){case 1:{b.type=a.int32();break}case 2:{b.length=a.int32();break}case 3:{b.checksum=a.int32();break}case 4:{b.signature=a.bytes();break}case 5:{b.hashObject=d.proto.HashObject.decode(a,a.uint32());break}default:a.skipType(7&w)}return b},p.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/proto.SignatureObject"},p}(),SignatureType:function(){const p={},a=Object.create(p);return a[p[0]="SIGNATURE_TYPE_UNKNOWN"]=0,a[p[1]="SHA_384_WITH_RSA"]=1,a}()}))();n.proto=m;const v=d.google=(()=>({protobuf:function(){return{DoubleValue:function(){function a(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.value=0,a.create=function(u){return new a(u)},a.encode=function(u,y){return y||(y=l.create()),u.value!=null&&Object.hasOwnProperty.call(u,"value")&&y.uint32(9).double(u.value),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.google.protobuf.DoubleValue,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.value=u.double();break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/google.protobuf.DoubleValue"},a}(),FloatValue:function(){function a(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.value=0,a.create=function(u){return new a(u)},a.encode=function(u,y){return y||(y=l.create()),u.value!=null&&Object.hasOwnProperty.call(u,"value")&&y.uint32(13).float(u.value),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.google.protobuf.FloatValue,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.value=u.float();break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/google.protobuf.FloatValue"},a}(),Int64Value:function(){function a(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.value=h.Long?h.Long.fromBits(0,0,!1):0,a.create=function(u){return new a(u)},a.encode=function(u,y){return y||(y=l.create()),u.value!=null&&Object.hasOwnProperty.call(u,"value")&&y.uint32(8).int64(u.value),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.google.protobuf.Int64Value,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.value=u.int64();break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/google.protobuf.Int64Value"},a}(),UInt64Value:function(){function a(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.value=h.Long?h.Long.fromBits(0,0,!0):0,a.create=function(u){return new a(u)},a.encode=function(u,y){return y||(y=l.create()),u.value!=null&&Object.hasOwnProperty.call(u,"value")&&y.uint32(8).uint64(u.value),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.google.protobuf.UInt64Value,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.value=u.uint64();break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/google.protobuf.UInt64Value"},a}(),Int32Value:function(){function a(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.value=0,a.create=function(u){return new a(u)},a.encode=function(u,y){return y||(y=l.create()),u.value!=null&&Object.hasOwnProperty.call(u,"value")&&y.uint32(8).int32(u.value),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.google.protobuf.Int32Value,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.value=u.int32();break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/google.protobuf.Int32Value"},a}(),UInt32Value:function(){function a(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.value=0,a.create=function(u){return new a(u)},a.encode=function(u,y){return y||(y=l.create()),u.value!=null&&Object.hasOwnProperty.call(u,"value")&&y.uint32(8).uint32(u.value),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.google.protobuf.UInt32Value,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.value=u.uint32();break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/google.protobuf.UInt32Value"},a}(),BoolValue:function(){function a(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.value=!1,a.create=function(u){return new a(u)},a.encode=function(u,y){return y||(y=l.create()),u.value!=null&&Object.hasOwnProperty.call(u,"value")&&y.uint32(8).bool(u.value),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.google.protobuf.BoolValue,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.value=u.bool();break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/google.protobuf.BoolValue"},a}(),StringValue:function(){function a(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.value="",a.create=function(u){return new a(u)},a.encode=function(u,y){return y||(y=l.create()),u.value!=null&&Object.hasOwnProperty.call(u,"value")&&y.uint32(10).string(u.value),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.google.protobuf.StringValue,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.value=u.string();break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/google.protobuf.StringValue"},a}(),BytesValue:function(){function a(u){if(u)for(var y=Object.keys(u),b=0;b<y.length;++b)u[y[b]]!=null&&(this[y[b]]=u[y[b]])}return a.prototype.value=h.newBuffer([]),a.create=function(u){return new a(u)},a.encode=function(u,y){return y||(y=l.create()),u.value!=null&&Object.hasOwnProperty.call(u,"value")&&y.uint32(10).bytes(u.value),y},a.decode=function(u,y){u instanceof c||(u=c.create(u));for(var b=y===void 0?u.len:u.pos+y,w=new d.google.protobuf.BytesValue,T;u.pos<b;)switch(T=u.uint32(),T>>>3){case 1:{w.value=u.bytes();break}default:u.skipType(7&T)}return w},a.getTypeUrl=function(u){return u===void 0&&(u="type.googleapis.com"),u+"/google.protobuf.BytesValue"},a}()}}()}))();n.google=v})(proto$7);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.proto=n.google=n.com=n.Writer=n.Reader=void 0;var e=h(minimal),t=c(long),o=h(proto$7);function c(p){return p&&p.__esModule?p:{default:p}}function l(p){if(typeof WeakMap!="function")return null;var a=new WeakMap,u=new WeakMap;return(l=function(y){return y?u:a})(p)}function h(p,a){if(!a&&p&&p.__esModule)return p;if(p===null||typeof p!="object"&&typeof p!="function")return{default:p};var u=l(a);if(u&&u.has(p))return u.get(p);var y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in p)if(w!="default"&&Object.prototype.hasOwnProperty.call(p,w)){var T=b?Object.getOwnPropertyDescriptor(p,w):null;T&&(T.get||T.set)?Object.defineProperty(y,w,T):y[w]=p[w]}return y.default=p,u&&u.set(p,y),y}(()=>{var p=e.util;p.Long==null&&(console.log("Patching Protobuf Long.js instance..."),p.Long=t.default,e.Reader._configure!=null&&e.Reader._configure(e.BufferReader))})();const d=e.Reader;n.Reader=d;const g=e.Writer;n.Writer=g;const m=o.proto;n.proto=m;const v=o.com;n.com=v;const _=o.google;n.google=_})(lib);const index=getDefaultExportFromCjs(lib),HashgraphProto=_mergeNamespaces({__proto__:null,default:index},[lib]);class EvmAddress extends Key{constructor(e){super(),this._bytes=e}static fromString(e){return new EvmAddress(decode$5(e))}static fromBytes(e){return new EvmAddress(e)}toBytes(){return this._bytes}toString(){return encode$3(this._bytes)}equals(e){return arrayEqual$2(this._bytes,e._bytes)}}class AccountId{constructor(e,t,o,c,l){const h=constructor(e,t,o);this.shard=h.shard,this.realm=h.realm,this.num=h.num,this.aliasKey=c??null,this.evmAddress=l??null,this._checksum=null}static fromString(e){let t=Long$1.ZERO,o=Long$1.ZERO,c=Long$1.ZERO,l,h;if(e.startsWith("0x")&&e.length==42||e.length==40)h=EvmAddress.fromString(e);else{const d=fromStringSplitter(e);if(Number.isNaN(d.shard)||Number.isNaN(d.realm))throw new Error("invalid format for entity ID");d.shard!=null&&(t=Long$1.fromString(d.shard)),d.realm!=null&&(o=Long$1.fromString(d.realm)),d.numOrHex.length<20?c=Long$1.fromString(d.numOrHex):d.numOrHex.length==40?h=EvmAddress.fromString(d.numOrHex):l=PublicKey.fromString(d.numOrHex)}return new AccountId(t,o,c,l,h)}static fromEvmAddress(e,t,o){const c=typeof o=="string"?EvmAddress.fromString(o):o;return isLongZeroAddress(c.toBytes())?this.fromSolidityAddress(c.toString()):new AccountId(e,t,0,void 0,c)}static fromEvmPublicAddress(e){return new AccountId(0,0,0,void 0,e)}static _fromProtobuf(e){let t,o;return e.alias!=null&&(e.alias.length===20?o=EvmAddress.fromBytes(e.alias):t=Key._fromProtobufKey(lib.proto.Key.decode(e.alias))),t instanceof PublicKey||(t=void 0),new AccountId(e.shardNum!=null?e.shardNum:0,e.realmNum!=null?e.realmNum:0,e.accountNum!=null?e.accountNum:0,t,o)}get checksum(){return this._checksum}getEvmAddress(){return this.evmAddress}async populateAccountNum(e){if(this.evmAddress===null)throw new Error("field `evmAddress` should not be null");const t=e.mirrorNetwork[0].slice(0,e.mirrorNetwork[0].indexOf(":"));await new Promise(l=>{setTimeout(l,3e3)});const o=`https://${t}/api/v1/accounts/${this.evmAddress.toString()}`,c=(await axios$1.get(o)).data.account;return this.num=Long$1.fromString(c.slice(c.lastIndexOf(".")+1)),this}async populateAccountEvmAddress(e){if(this.num===null)throw new Error("field `num` should not be null");const t=e.mirrorNetwork[0].slice(0,e.mirrorNetwork[0].indexOf(":"));await new Promise(l=>{setTimeout(l,3e3)});const o=`https://${t}/api/v1/accounts/${this.num.toString()}`,c=(await axios$1.get(o)).data.evm_address;return this.evmAddress=EvmAddress.fromString(c),this}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){if(this.aliasKey!=null)throw new Error("cannot calculate checksum with an account ID that has a aliasKey");validateChecksum(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(e){return AccountId._fromProtobuf(lib.proto.AccountID.decode(e))}static fromSolidityAddress(e){return isLongZeroAddress(decode$5(e))?new AccountId(...fromSolidityAddress(e)):this.fromEvmAddress(0,0,e)}toSolidityAddress(){return this.evmAddress!=null?this.evmAddress.toString():this.aliasKey!=null&&this.aliasKey._key._type=="secp256k1"?this.aliasKey.toEvmAddress():toSolidityAddress([this.shard,this.realm,this.num])}_toProtobuf(){let e=null;return this.aliasKey!=null?e=lib.proto.Key.encode(this.aliasKey._toProtobufKey()).finish():this.evmAddress!=null&&(e=this.evmAddress._bytes),{alias:e,accountNum:this.aliasKey!=null?null:this.num,shardNum:this.shard,realmNum:this.realm}}toBytes(){return lib.proto.AccountID.encode(this._toProtobuf()).finish()}toString(){let e=this.num.toString();return this.aliasKey!=null?e=this.aliasKey.toString():this.evmAddress!=null&&(e=this.evmAddress.toString()),`${this.shard.toString()}.${this.realm.toString()}.${e}`}toStringWithChecksum(e){if(this.aliasKey!=null)throw new Error("cannot calculate checksum with an account ID that has a aliasKey");return toStringWithChecksum(this.toString(),e)}equals(e){let t=!1;return this.aliasKey!=null&&e.aliasKey!=null?t=this.aliasKey.equals(e.aliasKey):this.evmAddress!=null&&e.evmAddress!=null?t=this.evmAddress.equals(e.evmAddress):this.aliasKey==null&&e.aliasKey==null&&this.evmAddress==null&&e.evmAddress==null&&(t=this.num.eq(e.num)),this.shard.eq(e.shard)&&this.realm.eq(e.realm)&&t}clone(){const e=new AccountId(this);return e._checksum=this._checksum,e.aliasKey=this.aliasKey,e.evmAddress=this.evmAddress,e}compare(e){let t=this.shard.compare(e.shard);if(t!=0||(t=this.realm.compare(e.realm),t!=0))return t;if(this.aliasKey!=null&&e.aliasKey!=null){const o=this.aliasKey.toString(),c=e.aliasKey.toString();return o>c?1:o<c?-1:0}else if(this.evmAddress!=null&&e.evmAddress!=null){const o=this.evmAddress.toString(),c=e.evmAddress.toString();return o>c?1:o<c?-1:0}else return this.aliasKey==null&&e.aliasKey==null&&this.evmAddress==null&&e.evmAddress==null?this.num.compare(e.num):1}}CACHE$1.setAccountIdConstructor((n,e,t)=>new AccountId(n,e,Long$1.ZERO,t));class GrpcStatus{constructor(e){this._code=e,Object.freeze(this)}static _fromValue(e){switch(e){case 0:return GrpcStatus.Ok;case 1:return GrpcStatus.Cancelled;case 2:return GrpcStatus.Unknown;case 3:return GrpcStatus.InvalidArgument;case 4:return GrpcStatus.DeadlineExceeded;case 5:return GrpcStatus.NotFound;case 6:return GrpcStatus.AlreadyExists;case 7:return GrpcStatus.PermissionDenied;case 8:return GrpcStatus.ResourceExhausted;case 9:return GrpcStatus.FailedPrecondition;case 10:return GrpcStatus.Aborted;case 11:return GrpcStatus.OutOfRange;case 12:return GrpcStatus.Unimplemented;case 13:return GrpcStatus.Internal;case 14:return GrpcStatus.Unavailable;case 15:return GrpcStatus.DataLoss;case 16:return GrpcStatus.Unauthenticated;case 17:return GrpcStatus.Timeout;case 18:return GrpcStatus.GrpcWeb;default:throw new Error("(BUG) non-exhaustive GrpcStatus switch statement")}}toString(){switch(this){case GrpcStatus.Ok:return"OK";case GrpcStatus.Cancelled:return"CANCELLED";case GrpcStatus.Unknown:return"UNKNOWN";case GrpcStatus.InvalidArgument:return"INVALID_ARGUMENT";case GrpcStatus.DeadlineExceeded:return"DEADLINE_EXCEEDED";case GrpcStatus.NotFound:return"NOT_FOUND";case GrpcStatus.AlreadyExists:return"ALREADY_EXISTS";case GrpcStatus.PermissionDenied:return"PERMISSION_DENIED";case GrpcStatus.Unauthenticated:return"UNAUTHENTICATED";case GrpcStatus.ResourceExhausted:return"RESOURCE_EXHAUSTED";case GrpcStatus.FailedPrecondition:return"FAILED_PRECONDITION";case GrpcStatus.Aborted:return"ABORTED";case GrpcStatus.OutOfRange:return"OUT_OF_RANGE";case GrpcStatus.Unimplemented:return"UNIMPLEMENTED";case GrpcStatus.Internal:return"INTERNAL";case GrpcStatus.Unavailable:return"UNAVAILABLE";case GrpcStatus.DataLoss:return"DATA_LOSS";case GrpcStatus.Timeout:return"TIMEOUT";case GrpcStatus.GrpcWeb:return"GRPC_WEB";default:return`UNKNOWN (${this._code})`}}valueOf(){return this._code}}GrpcStatus.Ok=new GrpcStatus(0);GrpcStatus.Cancelled=new GrpcStatus(1);GrpcStatus.Unknown=new GrpcStatus(2);GrpcStatus.InvalidArgument=new GrpcStatus(3);GrpcStatus.DeadlineExceeded=new GrpcStatus(4);GrpcStatus.NotFound=new GrpcStatus(5);GrpcStatus.AlreadyExists=new GrpcStatus(6);GrpcStatus.PermissionDenied=new GrpcStatus(7);GrpcStatus.ResourceExhausted=new GrpcStatus(8);GrpcStatus.FailedPrecondition=new GrpcStatus(9);GrpcStatus.Aborted=new GrpcStatus(10);GrpcStatus.OutOfRange=new GrpcStatus(11);GrpcStatus.Unimplemented=new GrpcStatus(12);GrpcStatus.Internal=new GrpcStatus(13);GrpcStatus.Unavailable=new GrpcStatus(14);GrpcStatus.DataLoss=new GrpcStatus(15);GrpcStatus.Unauthenticated=new GrpcStatus(16);GrpcStatus.Timeout=new GrpcStatus(17);GrpcStatus.GrpcWeb=new GrpcStatus(18);class GrpcServiceError extends Error{constructor(e){super(`gRPC service failed with status: ${e.toString()}`),this.status=e,this.name="GrpcServiceError",typeof Error.captureStackTrace<"u"&&Error.captureStackTrace(this,GrpcServiceError)}static _fromResponse(e){if(e.code!=null&&e.details!=null){const t=GrpcStatus._fromValue(e.code),o=new GrpcServiceError(t);return o.message=e.details,o}else return e}}class List{constructor(){this.list=[],this.locked=!1,this.index=0}setList(e){if(this.locked)throw new Error("list is locked");return this.list=e,this.index=0,this}push(...e){if(this.locked)throw new Error("list is locked");return this.list.push(...e),this}setLocked(){return this.locked=!0,this}clear(){this.list=[],this.index=0}get(e){return this.list[e]}set(e,t){return e===this.length?this.list.push(t):this.list[e]=t,this}setIfAbsent(e,t){return(e==this.length||this.list[e]==null)&&this.set(e,t()),this}get next(){return this.get(this.advance())}get current(){return this.get(this.index)}advance(){const e=this.index;return this.index=(this.index+1)%this.list.length,e}get isEmpty(){return this.length===0}get length(){return this.list.length}clone(){const e=new List;return e.list=this.list,e.locked=this.locked,e}}class HttpStatus{constructor(e){this._code=e,Object.freeze(this)}static _fromValue(e){return new HttpStatus(e)}toString(){return this._code.toString()}valueOf(){return this._code}}class HttpError extends Error{constructor(e){super(`failed with error code: ${e.toString()}`),this.status=e,this.name="HttpError",typeof Error.captureStackTrace<"u"&&Error.captureStackTrace(this,HttpError)}}const ExecutionState={Finished:"Finished",Retry:"Retry",Error:"Error"},RST_STREAM=/\brst[^0-9a-zA-Z]stream\b/i;class Executable{constructor(){this._maxAttempts=10,this._nodeAccountIds=new List,this._signOnDemand=!1,this._minBackoff=null,this._maxBackoff=8e3,this._operator=null,this._requestTimeout=null,this._grpcDeadline=null,this._logger=null}get nodeAccountIds(){return this._nodeAccountIds.isEmpty?null:(this._nodeAccountIds.setLocked(),this._nodeAccountIds.list)}setNodeAccountIds(e){return this._nodeAccountIds.setList(e).setLocked(),this}get maxRetries(){return console.warn("Deprecated: use maxAttempts instead"),this.maxAttempts}setMaxRetries(e){return console.warn("Deprecated: use setMaxAttempts() instead"),this.setMaxAttempts(e)}get maxAttempts(){return this._maxAttempts}setMaxAttempts(e){return this._maxAttempts=e,this}get grpcDeadline(){return this._grpcDeadline}setGrpcDeadline(e){return this._grpcDeadline=e,this}setMinBackoff(e){if(e==null)throw new Error("minBackoff cannot be null.");if(this._maxBackoff!=null&&e>this._maxBackoff)throw new Error("minBackoff cannot be larger than maxBackoff.");return this._minBackoff=e,this}get minBackoff(){return this._minBackoff}setMaxBackoff(e){if(e==null)throw new Error("maxBackoff cannot be null.");if(this._minBackoff!=null&&e<this._minBackoff)throw new Error("maxBackoff cannot be smaller than minBackoff.");return this._maxBackoff=e,this}get maxBackoff(){return this._maxBackoff}_beforeExecute(e){throw new Error("not implemented")}_makeRequestAsync(){throw new Error("not implemented")}_mapStatusError(e,t){throw new Error("not implemented")}_mapResponse(e,t,o){throw new Error("not implemented")}_execute(e,t){throw new Error("not implemented")}_getTransactionId(){throw new Error("not implemented")}_getLogId(){throw new Error("not implemented")}_requestToBytes(e){throw new Error("not implemented")}_responseToBytes(e){throw new Error("not implemented")}_advanceRequest(){this._nodeAccountIds.advance()}_shouldRetry(e,t){throw new Error("not implemented")}_shouldRetryExceptionally(e){return e instanceof GrpcServiceError?e.status._code===GrpcStatus.Timeout._code||e.status._code===GrpcStatus.Unavailable._code||e.status._code===GrpcStatus.ResourceExhausted._code||e.status._code===GrpcStatus.GrpcWeb._code||e.status._code===GrpcStatus.Internal._code&&RST_STREAM.test(e.message):!0}_setOperatorWith(e,t,o){return this._operator={transactionSigner:o,accountId:e,publicKey:t},this}async executeWithSigner(e){return e.call(this)}async execute(e,t){this._logger=this._logger==null?e._logger!=null?e._logger:null:this._logger,this._requestTimeout==null&&(this._requestTimeout=t??e.requestTimeout),await this._beforeExecute(e),this._maxBackoff==null&&(this._maxBackoff=e.maxBackoff),this._minBackoff==null&&(this._minBackoff=e.minBackoff);const o=e._maxAttempts!=null?e._maxAttempts:this._maxAttempts,c=Date.now();let l=null;for(let h=1;h<=o;h+=1){if(this._requestTimeout!=null&&c+this._requestTimeout<=Date.now())throw new Error("timeout exceeded");let d,g;if(this._nodeAccountIds.locked?(d=this._nodeAccountIds.current,g=e._network.getNode(d)):(g=e._network.getNode(),d=g.accountId,this._nodeAccountIds.setList([d])),g==null)throw new Error(`NodeAccountId not recognized: ${d.toString()}`);const m=this._getLogId();this._logger&&this._logger.debug(`[${m}] Node AccountID: ${g.accountId.toString()}, IP: ${g.address.toString()}`);const v=g.getChannel(),_=await this._makeRequestAsync();this._advanceRequest();let p;if(!g.isHealthy()){this._logger&&this._logger.debug(`[${m}] node is not healthy, skipping waiting ${g.getRemainingTime()}`);continue}try{const y=[];this._grpcDeadline!=null&&y.push(new Promise((b,w)=>setTimeout(()=>w(new Error("grpc deadline exceeded")),this._grpcDeadline))),this._logger&&this._logger.trace(`[${this._getLogId()}] sending protobuf ${encode$3(this._requestToBytes(_))}`),y.push(this._execute(v,_)),p=await Promise.race(y)}catch(y){const b=GrpcServiceError._fromResponse(y);if(l=b,this._logger&&this._logger.debug(`[${m}] received error ${JSON.stringify(b)}`),(b instanceof GrpcServiceError||b instanceof HttpError)&&this._shouldRetryExceptionally(b)&&h<=o){this._logger&&this._logger.debug(`[${this._getLogId()}] node with accountId: ${g.accountId.toString()} and proxy IP: ${g.address.toString()} is unhealthy`),e._network.increaseBackoff(g);continue}throw y}this._logger&&this._logger.trace(`[${this._getLogId()}] sending protobuf ${encode$3(this._responseToBytes(p))}`),e._network.decreaseBackoff(g);const[a,u]=this._shouldRetry(_,p);switch(a!=null&&(l=a),u){case ExecutionState.Retry:await delayForAttempt(h,this._minBackoff,this._maxBackoff);continue;case ExecutionState.Finished:return this._mapResponse(p,d,_);case ExecutionState.Error:throw this._mapStatusError(_,p);default:throw new Error("(BUG) non-exhuastive switch statement for `ExecutionState`")}}throw new Error(`max attempts of ${o.toString()} was reached for request with last error being: ${l!=null?l.toString():""}`)}toBytes(){throw new Error("not implemented")}setLogger(e){return this._logger=e,this}get logger(){return this._logger}}function delayForAttempt(n,e,t){const o=Math.min(Math.floor(e*Math.pow(2,n)),t);return new Promise(c=>setTimeout(c,o))}const MAX_NS=Long$1.fromNumber(1e9);class Timestamp{constructor(e,t){this.seconds=e instanceof Long$1?e:Long$1.fromNumber(e),this.nanos=t instanceof Long$1?t:Long$1.fromNumber(t),Object.freeze(this)}static generate(){const e=Math.floor(Math.random()*5e3)+8e3,t=Date.now()-e,o=Math.floor(t/1e3)+CACHE$1.timeDrift,c=Math.floor(t%1e3)*1e6+Math.floor(Math.random()*1e6);return new Timestamp(o,c)}static fromDate(e){let t;if(typeof e=="number")t=Long$1.fromNumber(e);else if(typeof e=="string")t=Long$1.fromNumber(Date.parse(e)).mul(1e6);else if(e instanceof Date)t=Long$1.fromNumber(e.getTime()).mul(1e6);else throw new TypeError(`invalid type '${typeof e}' for 'data', expected 'Date'`);return new Timestamp(0,0).plusNanos(t)}toDate(){return new Date(this.seconds.toInt()*1e3+Math.floor(this.nanos.toInt()/1e6))}plusNanos(e){const t=this.nanos.add(e);return new Timestamp(this.seconds.add(t.div(MAX_NS)),t.mod(MAX_NS))}_toProtobuf(){return{seconds:this.seconds,nanos:this.nanos.toInt()}}static _fromProtobuf(e){return new Timestamp(e.seconds instanceof Long$1?e.seconds.toInt():e.seconds!=null?e.seconds:0,e.nanos!=null?e.nanos:0)}toString(){const e=String(this.nanos).padStart(9,"0");return`${this.seconds.toString()}.${e}`}compare(e){const t=this.seconds.compare(e.seconds);return t!=0?t:this.nanos.compare(e.nanos)}}class TransactionId{constructor(e,t,o=!1,c=null){this.accountId=e,this.validStart=t,this.scheduled=o,this.nonce=null,c!=null&&c!=0&&this.setNonce(c),Object.seal(this)}setNonce(e){return this.nonce=typeof e=="number"?Long$1.fromNumber(e):e,this}static withValidStart(e,t){return new TransactionId(e,t)}static generate(e){return new TransactionId(typeof e=="string"?AccountId.fromString(e):new AccountId(e),Timestamp.generate())}static fromString(e){let t,o,c,l,h,d;return[t,d]=e.split("@"),[o,d]=d.split("."),d.includes("?")?([c,d]=d.split("?scheduled"),l=!0,d.includes("/")?h=d.replace("/",""):h=null):d.includes("/")?([c,h]=d.split("/"),l=!1):c=d,new TransactionId(AccountId.fromString(t),new Timestamp(Long$1.fromValue(o),Long$1.fromValue(c)),l,h!=null?Long$1.fromString(h):null)}setScheduled(e){return this.scheduled=e,this}toString(){if(this.accountId!=null&&this.validStart!=null){const e=String(this.validStart.nanos).padStart(9,"0"),t=this.nonce!=null?"/".concat(this.nonce.toString()):"",o=this.scheduled?"?scheduled":"";return`${this.accountId.toString()}@${this.validStart.seconds.toString()}.${e}${o}${t}`}else throw new Error("neither `accountId` nor `validStart` are set")}static _fromProtobuf(e){if(e.accountID!=null&&e.transactionValidStart!=null)return new TransactionId(AccountId._fromProtobuf(e.accountID),Timestamp._fromProtobuf(e.transactionValidStart),e.scheduled!=null?e.scheduled:void 0,e.nonce!=null?e.nonce:void 0);throw new Error("Neither `nonce` or `accountID` and `transactionValidStart` are set")}_toProtobuf(){return{accountID:this.accountId!=null?this.accountId._toProtobuf():null,transactionValidStart:this.validStart!=null?this.validStart._toProtobuf():null,scheduled:this.scheduled,nonce:this.nonce!=null?this.nonce.toInt():null}}static fromBytes(e){return TransactionId._fromProtobuf(lib.proto.TransactionID.decode(e))}toBytes(){return lib.proto.TransactionID.encode(this._toProtobuf()).finish()}clone(){return new TransactionId(this.accountId,this.validStart,this.scheduled,this.nonce)}compare(e){const t=this.accountId.compare(e.accountId);return t!=0?t:this.validStart.compare(e.validStart)}getReceipt(e){return CACHE$1.transactionReceiptQueryConstructor().setTransactionId(this).execute(e)}async getRecord(e){return await this.getReceipt(e),CACHE$1.transactionRecordQueryConstructor().setTransactionId(this).execute(e)}}class PrecheckStatusError extends StatusError{constructor(e){super(e,`transaction ${e.transactionId.toString()} failed precheck with status ${e.status.toString()}`),this.contractFunctionResult=e.contractFunctionResult}toJSON(){return{name:this.name,status:this.status.toString(),transactionId:this.transactionId.toString(),message:this.message,contractFunctionResult:this.contractFunctionResult}}}class MaxQueryPaymentExceeded extends Error{constructor(e,t){super(),this.message=`query cost of ${e.toString()} HBAR exceeds max set on client: ${t.toString()} HBAR`,this.name="MaxQueryPaymentExceededError",this.queryCost=e,this.maxQueryPayment=t}}const QUERY_REGISTRY=new Map;class Query extends Executable{constructor(){super(),this._paymentTransactionId=null,this._paymentTransactions=[],this._queryPayment=null,this._maxQueryPayment=null,this._timestamp=Date.now()}static fromBytes(e){const t=lib.proto.Query.decode(e);if(t.query==null)throw new Error("(BUG) query.query was not set in the protobuf");const o=QUERY_REGISTRY.get(t.query);if(o==null)throw new Error(`(BUG) Query.fromBytes() not implemented for type ${t.query}`);return o(t)}toBytes(){return lib.proto.Query.encode(this._makeRequest()).finish()}setQueryPayment(e){return this._queryPayment=e,this}setMaxQueryPayment(e){return this._maxQueryPayment=e,this}async getCost(e){if(this._nodeAccountIds.isEmpty&&this._nodeAccountIds.setList(e._network.getNodeAccountIdsForExecute()),COST_QUERY.length!=1)throw new Error("CostQuery has not been loaded yet");this._timestamp=Date.now();const t=await COST_QUERY[0](this).execute(e);return Hbar.fromTinybars(t._valueInTinybar.multipliedBy(1.1).toFixed(0))}setPaymentTransactionId(e){return this._paymentTransactionId=e,this}get paymentTransactionId(){return this._paymentTransactionId}_getTransactionId(){if(this._paymentTransactionId==null)throw new Error("Query.PaymentTransactionId was not set duration execution");return this._paymentTransactionId}_isPaymentRequired(){return!0}_validateChecksums(e){}async _beforeExecute(e){if(this._paymentTransactions.length>0)return;if(e.isAutoValidateChecksumsEnabled()&&this._validateChecksums(e),this._nodeAccountIds.isEmpty&&this._nodeAccountIds.setList(e._network.getNodeAccountIdsForExecute()),this._operator=this._operator!=null?this._operator:e._operator,this._paymentTransactionId==null)if(this._isPaymentRequired())if(this._operator!=null)this._paymentTransactionId=TransactionId.generate(this._operator.accountId);else throw new Error("`client` must have an `operator` or an explicit payment transaction must be provided");else this._paymentTransactionId=TransactionId.generate(new AccountId(0));let t=new Hbar(0);const o=this._maxQueryPayment!=null?this._maxQueryPayment:e.maxQueryPayment;if(this._queryPayment!=null)t=this._queryPayment;else if(this._paymentTransactions.length===0&&this._isPaymentRequired()){const c=await this.getCost(e);if(o.toTinybars().toInt()<c.toTinybars().toInt())throw new MaxQueryPaymentExceeded(c,o);t=c,this._logger&&this._logger.debug(`[${this._getLogId()}] received cost for query ${t.toString()}`)}this._queryPayment=t,this._timestamp=Date.now(),this._nodeAccountIds.setLocked();for(const c of this._nodeAccountIds.list){const l=this._getLogId(),h=this._paymentTransactionId,d=this._queryPayment;this._logger&&this._logger.debug(`[${l}] making a payment transaction for node ${c.toString()} and transaction ID ${h.toString()} with amount ${d.toString()}`),this._paymentTransactions.push(await _makePaymentTransaction(h,c,this._isPaymentRequired()?this._operator:null,d))}}_mapResponseHeader(e){throw new Error("not implemented")}_makeRequestHeader(){let e={};return this._isPaymentRequired()&&this._paymentTransactions.length>0&&(e={responseType:lib.proto.ResponseType.ANSWER_ONLY,payment:this._paymentTransactions[this._nodeAccountIds.index]}),e}_onMakeRequest(e){throw new Error("not implemented")}_makeRequest(){let e={};return this._isPaymentRequired()&&this._paymentTransactions!=null&&(e={payment:this._paymentTransactions[this._nodeAccountIds.index],responseType:lib.proto.ResponseType.ANSWER_ONLY}),this._onMakeRequest(e)}async _makeRequestAsync(){let e={responseType:lib.proto.ResponseType.ANSWER_ONLY};if(this._isPaymentRequired()&&this._paymentTransactions!=null)if(this._nodeAccountIds.locked)e.payment=this._paymentTransactions[this._nodeAccountIds.index];else{const t=this._getLogId(),o=this._nodeAccountIds.current,c=this._paymentTransactionId,l=this._queryPayment;this._logger&&this._logger.debug(`[${t}] making a payment transaction for node ${o.toString()} and transaction ID ${c.toString()} with amount ${l.toString()}`),e.payment=await _makePaymentTransaction(c,o,this._isPaymentRequired()?this._operator:null,l)}return this._onMakeRequest(e)}_shouldRetry(e,t){const{nodeTransactionPrecheckCode:o}=this._mapResponseHeader(t),c=Status._fromCode(o??lib.proto.ResponseCodeEnum.OK);switch(this._logger&&this._logger.debug(`[${this._getLogId()}] received status ${c.toString()}`),c){case Status.Busy:case Status.Unknown:case Status.PlatformTransactionNotCreated:return[c,ExecutionState.Retry];case Status.Ok:return[c,ExecutionState.Finished];default:return[c,ExecutionState.Error]}}_mapStatusError(e,t){const{nodeTransactionPrecheckCode:o}=this._mapResponseHeader(t),c=Status._fromCode(o??lib.proto.ResponseCodeEnum.OK);return new PrecheckStatusError({status:c,transactionId:this._getTransactionId(),contractFunctionResult:null})}_requestToBytes(e){return lib.proto.Query.encode(e).finish()}_responseToBytes(e){return lib.proto.Response.encode(e).finish()}}async function _makePaymentTransaction(n,e,t,o){const c=[];t!=null?(c.push({accountID:t.accountId._toProtobuf(),amount:o.negated().toTinybars()}),c.push({accountID:e._toProtobuf(),amount:o.toTinybars()})):(c.push({accountID:new AccountId(0)._toProtobuf(),amount:o.negated().toTinybars()}),c.push({accountID:e._toProtobuf(),amount:o.toTinybars()}));const l={transactionID:n._toProtobuf(),nodeAccountID:e._toProtobuf(),transactionFee:new Hbar(1).toTinybars(),transactionValidDuration:{seconds:Long$1.fromNumber(120)},cryptoTransfer:{transfers:{accountAmounts:c}}},h={bodyBytes:lib.proto.TransactionBody.encode(l).finish()};if(t!=null){const d=await t.transactionSigner(h.bodyBytes);h.sigMap={sigPair:[t.publicKey._toProtobufSignature(d)]}}return{signedTransactionBytes:lib.proto.SignedTransaction.encode(h).finish()}}const COST_QUERY=[];class ContractId extends Key{constructor(e,t,o,c){super();const l=constructor(e,t,o);this.shard=l.shard,this.realm=l.realm,this.num=l.num,this.evmAddress=c??null,this._checksum=null}static fromEvmAddress(e,t,o){return isLongZeroAddress(decode$5(o))?this.fromEvmAddress(0,0,o):new ContractId(e,t,0,decode$5(o))}static fromString(e){const t=fromStringSplitter(e);if(Number.isNaN(t.shard)||Number.isNaN(t.realm))throw new Error("invalid format for entity ID");const o=t.shard!=null?Long$1.fromString(t.shard):Long$1.ZERO,c=t.realm!=null?Long$1.fromString(t.realm):Long$1.ZERO,[l,h]=t.numOrHex.length<40?[Long$1.fromString(t.numOrHex),void 0]:[Long$1.ZERO,decode$5(t.numOrHex)];return new ContractId(o,c,l,h)}static _fromProtobuf(e){return new ContractId(e.shardNum!=null?e.shardNum:0,e.realmNum!=null?e.realmNum:0,e.contractNum!=null?e.contractNum:0)}get checksum(){return this._checksum}async populateAccountNum(e){if(this.evmAddress===null)throw new Error("field `evmAddress` should not be null");const o=`https://${e.mirrorNetwork[0].slice(0,e.mirrorNetwork[0].indexOf(":"))}/api/v1/contracts/${encode$3(this.evmAddress)}`,c=(await axios$1.get(o)).data.contract_id;return this.num=Long$1.fromString(c.slice(c.lastIndexOf(".")+1)),this}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){validateChecksum(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(e){return ContractId._fromProtobuf(lib.proto.ContractID.decode(e))}static fromSolidityAddress(e){return isLongZeroAddress(decode$5(e))?new ContractId(...fromSolidityAddress(e)):this.fromEvmAddress(0,0,e)}toSolidityAddress(){return this.evmAddress!=null?encode$3(this.evmAddress):toSolidityAddress([this.shard,this.realm,this.num])}_toProtobuf(){return{contractNum:this.num,shardNum:this.shard,realmNum:this.realm,evmAddress:this.evmAddress}}toString(){return this.evmAddress!=null?`${this.shard.toString()}.${this.realm.toString()}.${encode$3(this.evmAddress)}`:`${this.shard.toString()}.${this.realm.toString()}.${this.num.toString()}`}toStringWithChecksum(e){return toStringWithChecksum(this.toString(),e)}toBytes(){return lib.proto.ContractID.encode(this._toProtobuf()).finish()}clone(){const e=new ContractId(this);return e._checksum=this._checksum,e.evmAddress=this.evmAddress,e}compare(e){return compare([this.shard,this.realm,this.num],[e.shard,e.realm,e.num])}equals(e){let t=!1;return this.evmAddress!=null&&e.evmAddress!=null&&(t=arrayEqual(this.evmAddress,e.evmAddress)),this.shard.eq(e.shard)&&this.realm.eq(e.realm)&&this.num.eq(e.num)&&t}_toProtobufKey(){return{contractID:this._toProtobuf()}}static __fromProtobufKey(e){return ContractId._fromProtobuf(e)}}CACHE$1.setContractId(n=>ContractId.__fromProtobufKey(n));class FileId{constructor(e,t,o){const c=constructor(e,t,o);this.shard=c.shard,this.realm=c.realm,this.num=c.num,this._checksum=null}static fromString(e){const t=fromString(e),o=new FileId(t);return o._checksum=t.checksum,o}static _fromProtobuf(e){return new FileId(e.shardNum!=null?Long$1.fromString(e.shardNum.toString()):0,e.realmNum!=null?Long$1.fromString(e.realmNum.toString()):0,e.fileNum!=null?Long$1.fromString(e.fileNum.toString()):0)}get checksum(){return this._checksum}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){validateChecksum(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(e){return FileId._fromProtobuf(lib.proto.FileID.decode(e))}static fromSolidityAddress(e){const[t,o,c]=fromSolidityAddress(e);return new FileId(t,o,c)}toSolidityAddress(){return toSolidityAddress([this.shard,this.realm,this.num])}_toProtobuf(){return{fileNum:this.num,shardNum:this.shard,realmNum:this.realm}}toString(){return`${this.shard.toString()}.${this.realm.toString()}.${this.num.toString()}`}toStringWithChecksum(e){return toStringWithChecksum(this.toString(),e)}toBytes(){return lib.proto.FileID.encode(this._toProtobuf()).finish()}clone(){const e=new FileId(this);return e._checksum=this._checksum,e}compare(e){return compare([this.shard,this.realm,this.num],[e.shard,e.realm,e.num])}}FileId.ADDRESS_BOOK=new FileId(102);FileId.FEE_SCHEDULE=new FileId(111);FileId.EXCHANGE_RATES=new FileId(112);class TopicId{constructor(e,t,o){const c=constructor(e,t,o);this.shard=c.shard,this.realm=c.realm,this.num=c.num,this._checksum=null}static fromString(e){const t=fromString(e),o=new TopicId(t);return o._checksum=t.checksum,o}static _fromProtobuf(e){return new TopicId(e.shardNum!=null?e.shardNum:0,e.realmNum!=null?e.realmNum:0,e.topicNum!=null?e.topicNum:0)}get checksum(){return this._checksum}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){validateChecksum(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(e){return TopicId._fromProtobuf(lib.proto.TopicID.decode(e))}static fromSolidityAddress(e){const[t,o,c]=fromSolidityAddress(e);return new TopicId(t,o,c)}toSolidityAddress(){return toSolidityAddress([this.shard,this.realm,this.num])}_toProtobuf(){return{topicNum:this.num,shardNum:this.shard,realmNum:this.realm}}toString(){return`${this.shard.toString()}.${this.realm.toString()}.${this.num.toString()}`}toStringWithChecksum(e){return toStringWithChecksum(this.toString(),e)}toBytes(){return lib.proto.TopicID.encode(this._toProtobuf()).finish()}clone(){const e=new TopicId(this);return e._checksum=this._checksum,e}compare(e){return compare([this.shard,this.realm,this.num],[e.shard,e.realm,e.num])}}class TokenId{constructor(e,t,o){const c=constructor(e,t,o);this.shard=c.shard,this.realm=c.realm,this.num=c.num,this._checksum=null}static fromString(e){const t=fromString(e),o=new TokenId(t);return o._checksum=t.checksum,o}static _fromProtobuf(e){return new TokenId(e.shardNum!=null?e.shardNum:0,e.realmNum!=null?e.realmNum:0,e.tokenNum!=null?e.tokenNum:0)}get checksum(){return this._checksum}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){validateChecksum(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(e){return TokenId._fromProtobuf(lib.proto.TokenID.decode(e))}static fromSolidityAddress(e){return new TokenId(...fromSolidityAddress(e))}toSolidityAddress(){return toSolidityAddress([this.shard,this.realm,this.num])}_toProtobuf(){return{tokenNum:this.num,shardNum:this.shard,realmNum:this.realm}}toString(){return`${this.shard.toString()}.${this.realm.toString()}.${this.num.toString()}`}toStringWithChecksum(e){return toStringWithChecksum(this.toString(),e)}toBytes(){return lib.proto.TokenID.encode(this._toProtobuf()).finish()}clone(){const e=new TokenId(this);return e._checksum=this._checksum,e}compare(e){return compare([this.shard,this.realm,this.num],[e.shard,e.realm,e.num])}}class ScheduleId{constructor(e,t,o){const c=constructor(e,t,o);this.shard=c.shard,this.realm=c.realm,this.num=c.num,this._checksum=null}static fromString(e){const t=fromString(e),o=new ScheduleId(t);return o._checksum=t.checksum,o}static _fromProtobuf(e){return new ScheduleId(e.shardNum!=null?e.shardNum:0,e.realmNum!=null?e.realmNum:0,e.scheduleNum!=null?e.scheduleNum:0)}get checksum(){return this._checksum}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){validateChecksum(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(e){return ScheduleId._fromProtobuf(lib.proto.ScheduleID.decode(e))}static fromSolidityAddress(e){return new ScheduleId(...fromSolidityAddress(e))}toSolidityAddress(){return toSolidityAddress([this.shard,this.realm,this.num])}_toProtobuf(){return{scheduleNum:this.num,shardNum:this.shard,realmNum:this.realm}}toString(){return`${this.shard.toString()}.${this.realm.toString()}.${this.num.toString()}`}toStringWithChecksum(e){return toStringWithChecksum(this.toString(),e)}toBytes(){return lib.proto.ScheduleID.encode(this._toProtobuf()).finish()}clone(){const e=new ScheduleId(this);return e._checksum=this._checksum,e}compare(e){return compare([this.shard,this.realm,this.num],[e.shard,e.realm,e.num])}}class ExchangeRate{constructor(e){this.hbars=e.hbars,this.cents=e.cents,this.expirationTime=e.expirationTime,this.exchangeRateInCents=e.cents/e.hbars,Object.freeze(this)}static _fromProtobuf(e){return new ExchangeRate({hbars:e.hbarEquiv,cents:e.centEquiv,expirationTime:new Date(e.expirationTime!=null&&e.expirationTime.seconds!=null?Long$1.isLong(e.expirationTime.seconds)?e.expirationTime.seconds.toInt()*1e3:e.expirationTime.seconds:0)})}_toProtobuf(){return{hbarEquiv:this.hbars,centEquiv:this.cents,expirationTime:{seconds:Long$1.fromNumber(Math.trunc(this.expirationTime.getTime()/1e3))}}}}class TransactionReceipt{constructor(e){this.status=e.status,this.accountId=e.accountId,this.fileId=e.fileId,this.contractId=e.contractId,this.topicId=e.topicId,this.tokenId=e.tokenId,this.scheduleId=e.scheduleId,this.exchangeRate=e.exchangeRate,this.topicSequenceNumber=e.topicSequenceNumber,this.topicRunningHash=e.topicRunningHash,this.totalSupply=e.totalSupply,this.scheduledTransactionId=e.scheduledTransactionId,this.serials=e.serials,this.duplicates=e.duplicates,this.children=e.children,Object.freeze(this)}_toProtobuf(){const e=this.duplicates.map(o=>o._toProtobuf().receipt),t=this.children.map(o=>o._toProtobuf().receipt);return{duplicateTransactionReceipts:e,childTransactionReceipts:t,receipt:{status:this.status.valueOf(),accountID:this.accountId!=null?this.accountId._toProtobuf():null,fileID:this.fileId!=null?this.fileId._toProtobuf():null,contractID:this.contractId!=null?this.contractId._toProtobuf():null,topicID:this.topicId!=null?this.topicId._toProtobuf():null,tokenID:this.tokenId!=null?this.tokenId._toProtobuf():null,scheduleID:this.scheduleId!=null?this.scheduleId._toProtobuf():null,topicRunningHash:this.topicRunningHash==null?null:this.topicRunningHash,topicSequenceNumber:this.topicSequenceNumber,exchangeRate:{nextRate:null,currentRate:this.exchangeRate!=null?this.exchangeRate._toProtobuf():null},scheduledTransactionID:this.scheduledTransactionId!=null?this.scheduledTransactionId._toProtobuf():null,serialNumbers:this.serials,newTotalSupply:this.totalSupply}}}static _fromProtobuf(e){const t=e.receipt,o=t.exchangeRate,c=e.childTransactionReceipts!=null?e.childTransactionReceipts.map(h=>TransactionReceipt._fromProtobuf({receipt:h})):[],l=e.duplicateTransactionReceipts!=null?e.duplicateTransactionReceipts.map(h=>TransactionReceipt._fromProtobuf({receipt:h})):[];return new TransactionReceipt({status:Status._fromCode(t.status!=null?t.status:0),accountId:t.accountID!=null?AccountId._fromProtobuf(t.accountID):null,fileId:t.fileID!=null?FileId._fromProtobuf(t.fileID):null,contractId:t.contractID!=null?ContractId._fromProtobuf(t.contractID):null,topicId:t.topicID!=null?TopicId._fromProtobuf(t.topicID):null,tokenId:t.tokenID!=null?TokenId._fromProtobuf(t.tokenID):null,scheduleId:t.scheduleID!=null?ScheduleId._fromProtobuf(t.scheduleID):null,exchangeRate:t.exchangeRate!=null?ExchangeRate._fromProtobuf(o.currentRate):null,topicSequenceNumber:t.topicSequenceNumber==null?null:Long$1.fromString(t.topicSequenceNumber.toString()),topicRunningHash:t.topicRunningHash!=null?new Uint8Array(t.topicRunningHash):null,totalSupply:t.newTotalSupply!=null?Long$1.fromString(t.newTotalSupply.toString()):null,scheduledTransactionId:t.scheduledTransactionID!=null?TransactionId._fromProtobuf(t.scheduledTransactionID):null,serials:t.serialNumbers!=null?t.serialNumbers.map(h=>Long$1.fromValue(h)):[],children:c,duplicates:l})}static fromBytes(e){return TransactionReceipt._fromProtobuf(lib.proto.TransactionGetReceiptResponse.decode(e))}toBytes(){return lib.proto.TransactionGetReceiptResponse.encode(this._toProtobuf()).finish()}}const{proto:proto$6}=HashgraphProto;class TransactionReceiptQuery extends Query{constructor(e={}){super(),this._transactionId=null,this._includeChildren=null,this._includeDuplicates=null,this._validateStatus=!0,e.transactionId!=null&&this.setTransactionId(e.transactionId),e.includeChildren!=null&&this.setIncludeChildren(e.includeChildren),e.includeDuplicates!=null&&this.setIncludeDuplicates(e.includeDuplicates),e.validateStatus!=null&&this.setValidateStatus(e.validateStatus)}static _fromProtobuf(e){const t=e.transactionGetReceipt;return new TransactionReceiptQuery({transactionId:t.transactionID?TransactionId._fromProtobuf(t.transactionID):void 0,includeDuplicates:t.includeDuplicates!=null?t.includeDuplicates:void 0,includeChildren:t.includeChildReceipts!=null?t.includeChildReceipts:void 0})}get transactionId(){return this._transactionId}setTransactionId(e){return this._transactionId=typeof e=="string"?TransactionId.fromString(e):e.clone(),this}setIncludeDuplicates(e){return this._includeDuplicates=e,this}get includeDuplicates(){return this._includeDuplicates!=null?this._includeDuplicates:!1}setIncludeChildren(e){return this._includeChildren=e,this}get includeChildren(){return this._includeChildren!=null?this._includeChildren:!1}setValidateStatus(e){return this._validateStatus=e,this}get validateStatus(){return this._validateStatus}_isPaymentRequired(){return!1}_shouldRetry(e,t){const{nodeTransactionPrecheckCode:o}=this._mapResponseHeader(t);let c=Status._fromCode(o??proto$6.ResponseCodeEnum.OK);switch(this._logger&&this._logger.debug(`[${this._getLogId()}] received node precheck status ${c.toString()}`),c){case Status.Busy:case Status.Unknown:case Status.ReceiptNotFound:return[c,ExecutionState.Retry];case Status.Ok:break;default:return[c,ExecutionState.Error]}const d=t.transactionGetReceipt.receipt.status;switch(c=Status._fromCode(d),this._logger&&this._logger.debug(`[${this._getLogId()}] received receipt status ${c.toString()}`),c){case Status.Busy:case Status.Unknown:case Status.ReceiptNotFound:return[c,ExecutionState.Retry];case Status.Success:return[c,ExecutionState.Finished];default:return[c,this._validateStatus?ExecutionState.Error:ExecutionState.Finished]}}_getTransactionId(){return this._transactionId!=null?this._transactionId:super._getTransactionId()}_mapStatusError(e,t){const{nodeTransactionPrecheckCode:o}=this._mapResponseHeader(t);let c=Status._fromCode(o??proto$6.ResponseCodeEnum.OK);switch(c){case Status.Ok:break;default:return new PrecheckStatusError({status:c,transactionId:this._getTransactionId(),contractFunctionResult:null})}const l=t.transactionGetReceipt,d=l.receipt.status;if(c=Status._fromCode(d),this._transactionId==null)throw new Error("Failed to construct `ReceiptStatusError` because `transactionId` is `null`");return new ReceiptStatusError({status:c,transactionId:this._transactionId,transactionReceipt:TransactionReceipt._fromProtobuf(l)})}_validateChecksums(e){this._transactionId!=null&&this._transactionId.accountId!=null&&this._transactionId.accountId.validateChecksum(e)}_execute(e,t){return e.crypto.getTransactionReceipts(t)}_mapResponseHeader(e){return e.transactionGetReceipt.header}_mapResponse(e,t,o){const c=e.transactionGetReceipt;return Promise.resolve(TransactionReceipt._fromProtobuf(c))}_onMakeRequest(e){return{transactionGetReceipt:{header:e,transactionID:this._transactionId!=null?this._transactionId._toProtobuf():null,includeDuplicates:this._includeDuplicates,includeChildReceipts:this._includeChildren}}}_getLogId(){return`TransactionReceiptQuery:${this._timestamp.toString()}`}}QUERY_REGISTRY.set("transactionGetReceipt",TransactionReceiptQuery._fromProtobuf);class Transfer{constructor(e){this.accountId=e.accountId instanceof AccountId?e.accountId:AccountId.fromString(e.accountId),this.amount=e.amount instanceof Hbar?e.amount:new Hbar(e.amount),this.isApproved=e.isApproved}static _fromProtobuf(e){const t=[];for(const o of e)t.push(new Transfer({accountId:AccountId._fromProtobuf(o.accountID),amount:Hbar.fromTinybars(o.amount!=null?o.amount:0),isApproved:o.isApproval}));return t}_toProtobuf(){return{accountID:this.accountId._toProtobuf(),amount:this.amount.toTinybars(),isApproval:this.isApproved}}}class ContractLogInfo{constructor(e){this.contractId=e.contractId,this.bloom=e.bloom,this.topics=e.topics,this.data=e.data,Object.freeze(this)}static _fromProtobuf(e){return new ContractLogInfo({contractId:ContractId._fromProtobuf(e.contractID),bloom:e.bloom!=null?e.bloom:new Uint8Array,topics:e.topic!=null?e.topic:[],data:e.data!=null?e.data:new Uint8Array})}_toProtobuf(){return{contractID:this.contractId._toProtobuf(),bloom:this.bloom,topic:this.topics,data:this.data}}}function decode(n){return new TextDecoder().decode(n)}function encode(n){return new TextEncoder().encode(n)}const{proto:proto$5}=HashgraphProto;class ContractNonceInfo{constructor(e){this.contractId=e.contractId,this.nonce=e.nonce,Object.freeze(this)}static _fromProtobuf(e){return new ContractNonceInfo({contractId:ContractId._fromProtobuf(e.contractId),nonce:e.nonce!=null?e.nonce:Long$1.ZERO})}_toProtobuf(){return{contractId:this.contractId._toProtobuf(),nonce:this.nonce}}static fromBytes(e){return ContractNonceInfo._fromProtobuf(proto$5.ContractNonceInfo.decode(e))}toBytes(){return proto$5.ContractNonceInfo.encode(this._toProtobuf()).finish()}toJSON(){return{contractId:this.contractId.toString(),nonce:this.nonce.toNumber()}}toString(){return JSON.stringify(this.toJSON())}equals(e){return this.contractId.equals(e.contractId)&&this.nonce.eq(e.nonce)}}class ContractFunctionResult{constructor(e){this._createResult=e._createResult,this.contractId=e.contractId,this.bytes=e.bytes,this.errorMessage=e.errorMessage,this.bloom=e.bloom,this.gasUsed=e.gasUsed,this.logs=e.logs,this.createdContractIds=e.createdContractIds,this.evmAddress=e.evmAddress,this.stateChanges=e.stateChanges,this.gas=e.gas,this.amount=e.amount,this.functionParameters=e.functionParameters,this.senderAccountId=e.senderAccountId,this.contractNonces=e.contractNonces}static _fromProtobuf(e,t){const o=e.contractID,c=e.gasUsed,l=e.gas?e.gas:-1,h=e.amount?e.amount:-1;return new ContractFunctionResult({_createResult:t,bytes:e.contractCallResult,contractId:o!=null?ContractId._fromProtobuf(o):null,errorMessage:e.errorMessage!=null?e.errorMessage:null,bloom:e.bloom,gasUsed:c instanceof Long$1?c:Long$1.fromValue(c),logs:(e.logInfo!=null?e.logInfo:[]).map(d=>ContractLogInfo._fromProtobuf(d)),createdContractIds:(e.createdContractIDs!=null?e.createdContractIDs:[]).map(d=>ContractId._fromProtobuf(d)),evmAddress:e.evmAddress!=null&&e.evmAddress.value!=null?e.evmAddress.value:null,stateChanges:[],gas:l instanceof Long$1?l:Long$1.fromValue(l),amount:h instanceof Long$1?h:Long$1.fromValue(h),functionParameters:e.functionParameters,senderAccountId:e.senderId!=null?AccountId._fromProtobuf(e.senderId):null,contractNonces:(e.contractNonces!=null?e.contractNonces:[]).map(d=>ContractNonceInfo._fromProtobuf(d))})}asBytes(){return this.bytes}getString(e){return decode(this.getBytes(e))}getBytes(e){const t=this.getInt32(e),o=safeView(this.bytes).getInt32(t+28);return this.bytes.subarray(t+32,t+32+o)}getBytes32(e){return this.bytes.subarray((e??0)*32,(e??0)*32+32)}getBool(e){return this.bytes[(e??0)*32+31]!==0}getInt8(e){const t=(e??0)*32+31;return safeView(this.bytes).getInt8(t)}getUint8(e){return this.bytes[(e??0)*32+31]}getInt32(e){const t=(e??0)*32+28;return safeView(this.bytes).getInt32(t)}getUint32(e){const t=(e??0)*32+28;return safeView(this.bytes).getUint32(t)}getInt40(e){const t=defaultAbiCoder.decode(["int40"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint40(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(27,32)),16)}getInt48(e){const t=defaultAbiCoder.decode(["int48"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint48(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(26,32)),16)}getInt56(e){const t=defaultAbiCoder.decode(["int56"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint56(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(25,32)),16)}getInt64(e){const t=defaultAbiCoder.decode(["int64"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint64(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(24,32)),16)}getInt72(e){const t=defaultAbiCoder.decode(["int72"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint72(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(23,32)),16)}getInt80(e){const t=defaultAbiCoder.decode(["int80"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint80(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(22,32)),16)}getInt88(e){const t=defaultAbiCoder.decode(["int88"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint88(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(21,32)),16)}getInt96(e){const t=defaultAbiCoder.decode(["int96"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint96(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(20,32)),16)}getInt104(e){const t=defaultAbiCoder.decode(["int104"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint104(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(19,32)),16)}getInt112(e){const t=defaultAbiCoder.decode(["int112"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint112(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(18,32)),16)}getInt120(e){const t=defaultAbiCoder.decode(["int120"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint120(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(17,32)),16)}getInt128(e){const t=defaultAbiCoder.decode(["int128"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint128(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(16,32)),16)}getInt136(e){const t=defaultAbiCoder.decode(["int136"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint136(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(15,32)),16)}getInt144(e){const t=defaultAbiCoder.decode(["int144"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint144(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(14,32)),16)}getInt152(e){const t=defaultAbiCoder.decode(["int152"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint152(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(13,32)),16)}getInt160(e){const t=defaultAbiCoder.decode(["int160"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint160(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(12,32)),16)}getInt168(e){const t=defaultAbiCoder.decode(["int168"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint168(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(11,32)),16)}getInt176(e){const t=defaultAbiCoder.decode(["int176"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint176(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(10,32)),16)}getInt184(e){const t=defaultAbiCoder.decode(["int184"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint184(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(9,32)),16)}getInt192(e){const t=defaultAbiCoder.decode(["int192"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint192(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(8,32)),16)}getInt200(e){const t=defaultAbiCoder.decode(["int200"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint200(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(7,32)),16)}getInt208(e){const t=defaultAbiCoder.decode(["int208"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint208(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(6,32)),16)}getInt216(e){const t=defaultAbiCoder.decode(["int216"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint216(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(5,32)),16)}getInt224(e){const t=defaultAbiCoder.decode(["int224"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint224(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(4,32)),16)}getInt232(e){const t=defaultAbiCoder.decode(["int232"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint232(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(3,32)),16)}getInt240(e){const t=defaultAbiCoder.decode(["int240"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint240(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(2,32)),16)}getInt248(e){const t=defaultAbiCoder.decode(["int248"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint248(e){return new BigNumber(encode$3(this._getBytes32(e).subarray(1,32)),16)}getInt256(e){const t=defaultAbiCoder.decode(["int256"],this._getBytes32(e??0));return new BigNumber(t.toString())}getUint256(e){return new BigNumber(encode$3(this._getBytes32(e)),16)}getAddress(e){return encode$3(this.bytes.subarray((e??0)*32+12,(e??0)*32+32))}getResult(e){return defaultAbiCoder.decode(e,this.bytes)}_getBytes32(e){return this.bytes.subarray((e??0)*32,(e??0)*32+32)}_toProtobuf(){return{contractID:this.contractId!=null?this.contractId._toProtobuf():null,contractCallResult:this.bytes,errorMessage:this.errorMessage,bloom:this.bloom,gasUsed:this.gasUsed,logInfo:this.logs.map(e=>e._toProtobuf()),createdContractIDs:this.createdContractIds.map(e=>e._toProtobuf()),evmAddress:this.evmAddress!=null?{value:this.evmAddress}:null,gas:this.gas,amount:this.amount,functionParameters:this.functionParameters,senderId:this.senderAccountId!=null?this.senderAccountId._toProtobuf():null,contractNonces:this.contractNonces.map(e=>e._toProtobuf())}}}class ObjectMap{constructor(e){this._map=new Map,this.__map=new Map,this._fromString=e}get(e){const t=typeof e=="string"?e:e.toString(),o=this._map.get(t);return o??null}_set(e,t){const o=typeof e=="string"?e:e.toString();this._map.set(o,t),this.__map.set(e,t)}values(){return this._map.values()}get size(){return this._map.size}keys(){return this.__map.keys()}[Symbol.iterator](){return this.__map[Symbol.iterator]()}toString(){const e={};for(const[t,o]of this._map)e[t]=o;return JSON.stringify(e)}}class TokenTransferAccountMap extends ObjectMap{constructor(){super(e=>AccountId.fromString(e))}}class TokenTransferMap extends ObjectMap{constructor(){super(e=>TokenId.fromString(e))}__set(e,t,o){const c=e.toString();let l=this._map.get(c);l==null&&(l=new TokenTransferAccountMap,this._map.set(c,l),this.__map.set(e,l)),l._set(t,o)}static _fromProtobuf(e){const t=new TokenTransferMap;for(const o of e){const c=TokenId._fromProtobuf(o.token);for(const l of o.transfers!=null?o.transfers:[]){const h=AccountId._fromProtobuf(l.accountID);t.__set(c,h,l.amount)}}return t}_toProtobuf(){const e=[];for(const[t,o]of this){const c=[];for(const[l,h]of o)c.push({accountID:l._toProtobuf(),amount:h});e.push({token:t._toProtobuf(),transfers:c})}return e}}class TokenNftTransferMap extends ObjectMap{constructor(){super(e=>TokenId.fromString(e))}__set(e,t){const o=e.toString();let c=this._map.get(o);c==null&&(c=[],this._map.set(o,c),this.__map.set(e,c)),c.push(t)}static _fromProtobuf(e){const t=new TokenNftTransferMap;for(const o of e){const c=TokenId._fromProtobuf(o.token);for(const l of o.nftTransfers!=null?o.nftTransfers:[]){const h=AccountId._fromProtobuf(l.senderAccountID),d=AccountId._fromProtobuf(l.receiverAccountID);t.__set(c,{sender:h,recipient:d,serial:Long$1.fromValue(l.serialNumber),isApproved:!1})}}return t}_toProtobuf(){const e=[];for(const[t,o]of this){const c=[];for(const l of o)c.push({senderAccountID:l.sender._toProtobuf(),receiverAccountID:l.recipient._toProtobuf(),serialNumber:l.serial});e.push({token:t._toProtobuf(),nftTransfers:c})}return e}}class AssessedCustomFee{constructor(e={}){this._feeCollectorAccountId=null,e.feeCollectorAccountId!=null&&this.setFeeCollectorAccountId(e.feeCollectorAccountId),this._tokenId=null,e.tokenId!=null&&this.setTokenId(e.tokenId),this._amount=null,e.amount!=null&&this.setAmount(e.amount),this._payerAccountIds=null,e.payerAccountIds!=null&&this.setPayerAccountIds(e.payerAccountIds)}get feeCollectorAccountId(){return this._feeCollectorAccountId}setFeeCollectorAccountId(e){return this._feeCollectorAccountId=typeof e=="string"?AccountId.fromString(e):e,this}get tokenId(){return this._tokenId}setTokenId(e){return this._tokenId=typeof e=="string"?TokenId.fromString(e):e,this}get amount(){return this._amount}setAmount(e){return this._amount=typeof e=="number"?Long$1.fromNumber(e):e,this}get payerAccountIds(){return this._payerAccountIds}setPayerAccountIds(e){return this._payerAccountIds=e,this}static _fromProtobuf(e){return new AssessedCustomFee({feeCollectorAccountId:e.feeCollectorAccountId!=null?AccountId._fromProtobuf(e.feeCollectorAccountId):void 0,tokenId:e.tokenId!=null?TokenId._fromProtobuf(e.tokenId):void 0,amount:e.amount!=null?e.amount:void 0,payerAccountIds:e.effectivePayerAccountId!=null?e.effectivePayerAccountId.map(t=>AccountId._fromProtobuf(t)):void 0})}_toProtobuf(){return{feeCollectorAccountId:this.feeCollectorAccountId!=null?this.feeCollectorAccountId._toProtobuf():null,tokenId:this._tokenId!=null?this._tokenId._toProtobuf():null,amount:this._amount,effectivePayerAccountId:this._payerAccountIds!=null?this._payerAccountIds.map(e=>e._toProtobuf()):null}}}class TokenAssociation{constructor(e={}){this._accountId=null,e.accountId!=null&&this.setAccountId(e.accountId),this._tokenId=null,e.tokenId!=null&&this.setTokenId(e.tokenId),this._defaultMaxTransactionFee=new Hbar(5)}get accountId(){return this._accountId}setAccountId(e){return this._accountId=typeof e=="string"?AccountId.fromString(e):e,this}get tokenId(){return this._tokenId}setTokenId(e){return this._tokenId=typeof e=="string"?TokenId.fromString(e):e,this}static _fromProtobuf(e){return new TokenAssociation({accountId:e.accountId!=null?AccountId._fromProtobuf(e.accountId):void 0,tokenId:e.tokenId!=null?TokenId._fromProtobuf(e.tokenId):void 0})}_toProtobuf(){return{accountId:this._accountId!=null?this._accountId._toProtobuf():void 0,tokenId:this._tokenId!=null?this._tokenId._toProtobuf():void 0}}}class TokenTransfer{constructor(e){this.tokenId=e.tokenId instanceof TokenId?e.tokenId:TokenId.fromString(e.tokenId),this.accountId=e.accountId instanceof AccountId?e.accountId:AccountId.fromString(e.accountId),this.expectedDecimals=e.expectedDecimals,this.amount=Long$1.fromValue(e.amount),this.isApproved=e.isApproved}static _fromProtobuf(e){const t=[];for(const o of e){const c=TokenId._fromProtobuf(o.token),l=o.expectedDecimals!=null?o.expectedDecimals.value:null;for(const h of o.transfers!=null?o.transfers:[])t.push(new TokenTransfer({tokenId:c,accountId:AccountId._fromProtobuf(h.accountID),expectedDecimals:l,amount:h.amount!=null?h.amount:Long$1.ZERO,isApproved:h.isApproval==!0}))}return t}_toProtobuf(){return{accountID:this.accountId._toProtobuf(),amount:this.amount,isApproval:this.isApproved}}}class TransactionRecord{constructor(e){this.receipt=e.receipt,this.transactionHash=e.transactionHash,this.consensusTimestamp=e.consensusTimestamp,this.transactionId=e.transactionId,this.transactionMemo=e.transactionMemo,this.transactionFee=e.transactionFee,this.transfers=e.transfers,this.contractFunctionResult=e.contractFunctionResult!=null?e.contractFunctionResult:null,this.tokenTransfers=e.tokenTransfers,this.tokenTransfersList=e.tokenTransfersList,this.scheduleRef=e.scheduleRef,this.assessedCustomFees=e.assessedCustomFees,this.nftTransfers=e.nftTransfers,this.automaticTokenAssociations=e.automaticTokenAssociations,this.parentConsensusTimestamp=e.parentConsensusTimestamp,this.aliasKey=e.aliasKey,this.duplicates=e.duplicates,this.children=e.children,this.hbarAllowanceAdjustments=e.hbarAllowanceAdjustments,this.tokenAllowanceAdjustments=e.tokenAllowanceAdjustments,this.nftAllowanceAdjustments=e.nftAllowanceAdjustments,this.ethereumHash=e.ethereumHash,this.paidStakingRewards=e.paidStakingRewards,this.prngBytes=e.prngBytes,this.prngNumber=e.prngNumber,this.evmAddress=e.evmAddress,Object.freeze(this)}_toProtobuf(){const e=this.tokenTransfers._toProtobuf(),t=this.nftTransfers._toProtobuf(),o=[];for(const h of e)for(const d of t)h.token!=null&&d.token!=null&&h.token.shardNum===d.token.shardNum&&h.token.realmNum===d.token.realmNum&&h.token.tokenNum===d.token.tokenNum?o.push({token:h.token,transfers:h.transfers,nftTransfers:h.nftTransfers}):(o.push(h),o.push(d));const c=this.duplicates.map(h=>h._toProtobuf().transactionRecord),l=this.children.map(h=>h._toProtobuf().transactionRecord);return{duplicateTransactionRecords:c,childTransactionRecords:l,transactionRecord:{receipt:this.receipt._toProtobuf().receipt,transactionHash:this.transactionHash!=null?this.transactionHash:null,consensusTimestamp:this.consensusTimestamp!=null?this.consensusTimestamp._toProtobuf():null,transactionID:this.transactionId!=null?this.transactionId._toProtobuf():null,memo:this.transactionMemo!=null?this.transactionMemo:null,transactionFee:this.transactionFee!=null?this.transactionFee.toTinybars():null,contractCallResult:this.contractFunctionResult!=null&&!this.contractFunctionResult._createResult?this.contractFunctionResult._toProtobuf():null,contractCreateResult:this.contractFunctionResult!=null&&this.contractFunctionResult._createResult?this.contractFunctionResult._toProtobuf():null,transferList:this.transfers!=null?{accountAmounts:this.transfers.map(h=>h._toProtobuf())}:null,tokenTransferLists:o,scheduleRef:this.scheduleRef!=null?this.scheduleRef._toProtobuf():null,assessedCustomFees:this.assessedCustomFees.map(h=>h._toProtobuf()),automaticTokenAssociations:this.automaticTokenAssociations.map(h=>h._toProtobuf()),parentConsensusTimestamp:this.parentConsensusTimestamp!=null?this.parentConsensusTimestamp._toProtobuf():null,alias:this.aliasKey!=null?lib.proto.Key.encode(this.aliasKey._toProtobufKey()).finish():null,ethereumHash:this.ethereumHash,paidStakingRewards:this.paidStakingRewards.map(h=>h._toProtobuf()),prngBytes:this.prngBytes,prngNumber:this.prngNumber!=null?this.prngNumber:null,evmAddress:this.evmAddress!=null?this.evmAddress.toBytes():null}}}static _fromProtobuf(e){const t=e.transactionRecord;let o=t.alias!=null&&t.alias.length>0?Key._fromProtobufKey(lib.proto.Key.decode(t.alias)):null;o instanceof PublicKey||(o=null);const c=e.childTransactionRecords!=null?e.childTransactionRecords.map(d=>TransactionRecord._fromProtobuf({transactionRecord:d})):[],l=e.duplicateTransactionRecords!=null?e.duplicateTransactionRecords.map(d=>TransactionRecord._fromProtobuf({transactionRecord:d})):[],h=t.contractCallResult!=null?ContractFunctionResult._fromProtobuf(t.contractCallResult,!1):t.contractCreateResult!=null?ContractFunctionResult._fromProtobuf(t.contractCreateResult,!0):void 0;return new TransactionRecord({receipt:TransactionReceipt._fromProtobuf({receipt:t.receipt}),transactionHash:t.transactionHash!=null?t.transactionHash:new Uint8Array,consensusTimestamp:Timestamp._fromProtobuf(t.consensusTimestamp),transactionId:TransactionId._fromProtobuf(t.transactionID),transactionMemo:t.memo!=null?t.memo:"",transactionFee:Hbar.fromTinybars(t.transactionFee!=null?t.transactionFee:0),transfers:Transfer._fromProtobuf(t.transferList!=null?t.transferList.accountAmounts!=null?t.transferList.accountAmounts:[]:[]),contractFunctionResult:h,tokenTransfers:TokenTransferMap._fromProtobuf(t.tokenTransferLists!=null?t.tokenTransferLists:[]),tokenTransfersList:TokenTransfer._fromProtobuf(t.tokenTransferLists!=null?t.tokenTransferLists:[]),scheduleRef:t.scheduleRef!=null?ScheduleId._fromProtobuf(t.scheduleRef):null,assessedCustomFees:t.assessedCustomFees!=null?t.assessedCustomFees.map(d=>AssessedCustomFee._fromProtobuf(d)):[],nftTransfers:TokenNftTransferMap._fromProtobuf(t.tokenTransferLists!=null?t.tokenTransferLists:[]),automaticTokenAssociations:t.automaticTokenAssociations!=null?t.automaticTokenAssociations.map(d=>TokenAssociation._fromProtobuf(d)):[],parentConsensusTimestamp:t.parentConsensusTimestamp!=null?Timestamp._fromProtobuf(t.parentConsensusTimestamp):null,aliasKey:o,duplicates:l,children:c,hbarAllowanceAdjustments:[],tokenAllowanceAdjustments:[],nftAllowanceAdjustments:[],ethereumHash:t.ethereumHash!=null?t.ethereumHash:null,paidStakingRewards:t.paidStakingRewards!=null?Transfer._fromProtobuf(t.paidStakingRewards):[],prngBytes:t.prngBytes!=null?t.prngBytes:null,prngNumber:t.prngNumber!=null?t.prngNumber:null,evmAddress:t.evmAddress!=null?EvmAddress.fromBytes(t.evmAddress):null})}static fromBytes(e){return TransactionRecord._fromProtobuf(lib.proto.TransactionGetRecordResponse.decode(e))}toBytes(){return lib.proto.TransactionGetRecordResponse.encode(this._toProtobuf()).finish()}}class RecordStatusError extends StatusError{constructor(e){super(e,`Record for transaction ${e.transactionId.toString()} contained error status ${e.status.toString()}`),this.transactionRecord=e.transactionRecord}}const{proto:proto$4}=HashgraphProto;class TransactionRecordQuery extends Query{constructor(e={}){super(),this._transactionId=null,this._includeChildren=null,this._includeDuplicates=null,this._validateReceiptStatus=!0,e.transactionId!=null&&this.setTransactionId(e.transactionId),e.includeChildren!=null&&this.setIncludeChildren(e.includeChildren),e.includeDuplicates!=null&&this.setIncludeDuplicates(e.includeDuplicates),e.validateReceiptStatus!=null&&this.setValidateReceiptStatus(e.validateReceiptStatus)}get transactionId(){return this._transactionId}static _fromProtobuf(e){const t=e.transactionGetRecord;return new TransactionRecordQuery({transactionId:t.transactionID?TransactionId._fromProtobuf(t.transactionID):void 0,includeChildren:t.includeChildRecords!=null?t.includeChildRecords:void 0,includeDuplicates:t.includeDuplicates!=null?t.includeDuplicates:void 0})}setTransactionId(e){return this._transactionId=typeof e=="string"?TransactionId.fromString(e):e.clone(),this}setIncludeChildren(e){return this._includeChildren=e,this}get includeChildren(){return this._includeChildren!=null?this._includeChildren:!1}setIncludeDuplicates(e){return this._duplicates=e,this}get includeDuplicates(){return this._duplicates!=null?this._duplicates:!1}setValidateReceiptStatus(e){return this._validateReceiptStatus=e,this}get validateReceiptStatus(){return this._validateReceiptStatus}_shouldRetry(e,t){const{nodeTransactionPrecheckCode:o}=this._mapResponseHeader(t);let c=Status._fromCode(o??proto$4.ResponseCodeEnum.OK);switch(this._logger&&this._logger.debug(`[${this._getLogId()}] received node precheck status ${c.toString()}`),c){case Status.Busy:case Status.Unknown:case Status.ReceiptNotFound:case Status.RecordNotFound:return[c,ExecutionState.Retry];case Status.Ok:break;default:return[c,ExecutionState.Error]}const l=t.transactionGetRecord;if(l.header.responseType===lib.proto.ResponseType.COST_ANSWER)return[c,ExecutionState.Finished];const m=l.transactionRecord.receipt.status;switch(c=Status._fromCode(m),this._logger&&this._logger.debug(`[${this._getLogId()}] received record's receipt ${c.toString()}`),c){case Status.Ok:case Status.Busy:case Status.Unknown:case Status.ReceiptNotFound:case Status.RecordNotFound:return[c,ExecutionState.Retry];case Status.Success:return[c,ExecutionState.Finished];default:return[c,this._validateReceiptStatus?ExecutionState.Error:ExecutionState.Finished]}}_mapStatusError(e,t){const{nodeTransactionPrecheckCode:o}=this._mapResponseHeader(t);let c=Status._fromCode(o??proto$4.ResponseCodeEnum.OK);switch(c){case Status.Ok:break;case Status.ContractRevertExecuted:return new RecordStatusError({status:c,transactionId:this._getTransactionId(),transactionRecord:TransactionRecord._fromProtobuf({transactionRecord:t.transactionGetRecord.transactionRecord})});default:return new PrecheckStatusError({status:c,transactionId:this._getTransactionId(),contractFunctionResult:null})}const d=t.transactionGetRecord.transactionRecord.receipt,g=d.status;switch(c=Status._fromCode(g),c){case Status.ContractRevertExecuted:return new RecordStatusError({status:c,transactionId:this._getTransactionId(),transactionRecord:TransactionRecord._fromProtobuf({transactionRecord:t.transactionGetRecord.transactionRecord})});default:return new ReceiptStatusError({status:c,transactionId:this._getTransactionId(),transactionReceipt:TransactionReceipt._fromProtobuf({receipt:d})})}}_validateChecksums(e){this._transactionId!=null&&this._transactionId.accountId!=null&&this._transactionId.accountId.validateChecksum(e)}_execute(e,t){return e.crypto.getTxRecordByTxID(t)}_mapResponseHeader(e){return e.transactionGetRecord.header}_mapResponse(e,t,o){const c=e.transactionGetRecord;return Promise.resolve(TransactionRecord._fromProtobuf(c))}_onMakeRequest(e){return{transactionGetRecord:{header:e,transactionID:this._transactionId!=null?this._transactionId._toProtobuf():null,includeChildRecords:this._includeChildren,includeDuplicates:this._includeDuplicates}}}_getLogId(){return`TransactionRecordQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("transactionGetRecord",TransactionRecordQuery._fromProtobuf);class TransactionResponse{constructor(e){this.nodeId=e.nodeId,this.transactionHash=e.transactionHash,this.transactionId=e.transactionId,Object.freeze(this)}static fromJSON(e){return new TransactionResponse({nodeId:AccountId.fromString(e.nodeId),transactionHash:decode$5(e.transactionHash),transactionId:TransactionId.fromString(e.transactionId)})}async getReceipt(e){const t=await this.getReceiptQuery().execute(e);if(t.status!==Status.Success)throw new ReceiptStatusError({transactionReceipt:t,status:t.status,transactionId:this.transactionId});return t}async getRecord(e){return await this.getReceipt(e),this.getRecordQuery().execute(e)}async getVerboseRecord(e){try{return await this.getReceiptQuery().execute(e),this.getRecordQuery().execute(e)}catch{return this.getRecordQuery().execute(e)}}async getReceiptWithSigner(e){const t=await this.getReceiptQuery().executeWithSigner(e);if(t.status!==Status.Success)throw new ReceiptStatusError({transactionReceipt:t,status:t.status,transactionId:this.transactionId});return t}async getRecordWithSigner(e){return await this.getReceiptWithSigner(e),this.getRecordQuery().executeWithSigner(e)}getReceiptQuery(){return new TransactionReceiptQuery().setTransactionId(this.transactionId).setNodeAccountIds([this.nodeId])}getRecordQuery(){return new TransactionRecordQuery().setTransactionId(this.transactionId).setNodeAccountIds([this.nodeId])}toJSON(){return{nodeId:this.nodeId.toString(),transactionHash:encode$3(this.transactionHash),transactionId:this.transactionId.toString()}}toString(){return JSON.stringify(this.toJSON())}}async function digest(n){return new Uint8Array(await window.crypto.subtle.digest("SHA-384",n))}class TransactionHashMap extends ObjectMap{constructor(){super(e=>AccountId.fromString(e))}static async _fromTransaction(e){const t=new TransactionHashMap;for(let o=0;o<e._nodeAccountIds.length;o++){const c=e._nodeAccountIds.list[o],l=e._transactions.get(o),h=await digest(l.signedTransactionBytes);t._set(c,h)}return t}}class NodeAccountIdSignatureMap extends ObjectMap{constructor(){super(e=>PublicKey.fromString(e))}static _fromTransactionSigMap(e){const t=new NodeAccountIdSignatureMap,o=e.sigPair!=null?e.sigPair:[];for(const c of o)c.pubKeyPrefix!=null&&(c.ed25519!=null?t._set(PublicKey.fromBytesED25519(c.pubKeyPrefix),c.ed25519):c.ECDSASecp256k1!=null&&t._set(PublicKey.fromBytesECDSA(c.pubKeyPrefix),c.ECDSASecp256k1));return t}}class SignatureMap extends ObjectMap{constructor(){super(e=>AccountId.fromString(e))}static _fromTransaction(e){const t=new SignatureMap;for(let o=0;o<e._nodeAccountIds.length;o++){const c=e._signedTransactions.get(o).sigMap;c!=null&&t._set(e._nodeAccountIds.list[o],NodeAccountIdSignatureMap._fromTransactionSigMap(c))}return t}}const DEFAULT_AUTO_RENEW_PERIOD=Long$1.fromValue(7776e3),DEFAULT_RECORD_THRESHOLD=Hbar.fromTinybars(Long$1.fromString("9223372036854775807")),DEFAULT_TRANSACTION_VALID_DURATION=120,CHUNK_SIZE=1024,TRANSACTION_REGISTRY=new Map;class Transaction extends Executable{constructor(){super(),this._transactions=new List,this._signedTransactions=new List,this._signerPublicKeys=new Set,this._transactionValidDuration=DEFAULT_TRANSACTION_VALID_DURATION,this._defaultMaxTransactionFee=new Hbar(2),this._maxTransactionFee=null,this._transactionMemo="",this._transactionIds=new List,this._publicKeys=[],this._transactionSigners=[],this._regenerateTransactionId=null}static fromBytes(e){const t=[],o=[],c=[],l=[],h=[],d=[],g=lib.proto.TransactionList.decode(e).transactionList;if(g.length===0){const _=lib.proto.Transaction.decode(e);_.signedTransactionBytes.length!==0?g.push(_):g.push({signedTransactionBytes:lib.proto.SignedTransaction.encode({bodyBytes:_.bodyBytes,sigMap:_.sigMap}).finish()})}for(const _ of g){if(_.signedTransactionBytes==null)throw new Error("Transaction.signedTransactionBytes are null");const p=lib.proto.SignedTransaction.decode(_.signedTransactionBytes);t.push(p);const a=lib.proto.TransactionBody.decode(p.bodyBytes);if(a.data==null)throw new Error("(BUG) body.data was not set in the protobuf");if(d.push(a),a.transactionID!=null){const u=TransactionId._fromProtobuf(a.transactionID);l.includes(u.toString())||(o.push(u),l.push(u.toString()))}if(a.nodeAccountID!=null){const u=AccountId._fromProtobuf(a.nodeAccountID);h.includes(u.toString())||(c.push(u),h.push(u.toString()))}}const m=d[0];if(m==null||m.data==null)throw new Error("No transaction found in bytes or failed to decode TransactionBody");const v=TRANSACTION_REGISTRY.get(m.data);if(v==null)throw new Error(`(BUG) Transaction.fromBytes() not implemented for type ${m.data}`);return v(g,t,o,c,d)}schedule(){if(this._requireNotFrozen(),SCHEDULE_CREATE_TRANSACTION.length!=1)throw new Error("ScheduleCreateTransaction has not been loaded yet");return SCHEDULE_CREATE_TRANSACTION[0]()._setScheduledTransaction(this)}static _fromProtobufTransactions(e,t,o,c,l,h){const d=h[0];for(let m=0;m<c.length;m++)for(let v=0;v<l.length-1;v++)if(!compare$1(h[m*l.length+v],h[m*l.length+v+1],new Set(["nodeAccountID"])))throw new Error("failed to validate transaction bodies");const g=new AccountId(0);for(let m=0;m<l.length;m++)l[m].equals(g)&&l.splice(m--,1);e._transactions.setList(t),e._signedTransactions.setList(o).setLocked(),e._transactionIds.setList(c).setLocked(),e._nodeAccountIds.setList(l).setLocked(),e._transactionValidDuration=d.transactionValidDuration!=null&&d.transactionValidDuration.seconds!=null?Long$1.fromValue(d.transactionValidDuration.seconds).toInt():DEFAULT_TRANSACTION_VALID_DURATION,e._maxTransactionFee=d.transactionFee!=null?Hbar.fromTinybars(d.transactionFee):new Hbar(0),e._transactionMemo=d.memo!=null?d.memo:"";for(let m=0;m<l.length;m++){const v=o[m];if(v.sigMap!=null&&v.sigMap.sigPair!=null)for(const _ of v.sigMap.sigPair)e._signerPublicKeys.add(encode$3(_.pubKeyPrefix)),e._publicKeys.push(PublicKey.fromBytes(_.pubKeyPrefix)),e._transactionSigners.push(null)}return e}setNodeAccountIds(e){return this._requireNotFrozen(),super.setNodeAccountIds(e),this}get transactionValidDuration(){return this._transactionValidDuration}setTransactionValidDuration(e){return this._requireNotFrozen(),this._transactionValidDuration=e,this}get maxTransactionFee(){return this._maxTransactionFee}setMaxTransactionFee(e){return this._requireNotFrozen(),this._maxTransactionFee=e instanceof Hbar?e:new Hbar(e),this}get regenerateTransactionId(){return this._regenerateTransactionId}setRegenerateTransactionId(e){return this._requireNotFrozen(),this._regenerateTransactionId=e,this}get transactionMemo(){return this._transactionMemo}setTransactionMemo(e){return this._requireNotFrozen(),this._transactionMemo=e,this}get transactionId(){return this._transactionIds.isEmpty?null:(this._transactionIds.setLocked(),this._transactionIds.current)}setTransactionId(e){return this._requireNotFrozen(),this._transactionIds.setList([e]).setLocked(),this}sign(e){return this.signWith(e.publicKey,t=>Promise.resolve(e.sign(t)))}async signWith(e,t){this._signOnDemand||this._requireFrozen();const o=e.toBytesRaw(),c=encode$3(o);if(this._signerPublicKeys.has(c))return this;if(this._transactions.clear(),this._signerPublicKeys.add(c),this._signOnDemand)return this._publicKeys.push(e),this._transactionSigners.push(t),this;this._transactionIds.setLocked(),this._nodeAccountIds.setLocked();for(const l of this._signedTransactions.list){const h=l.bodyBytes,d=await t(h);l.sigMap==null&&(l.sigMap={}),l.sigMap.sigPair==null&&(l.sigMap.sigPair=[]),l.sigMap.sigPair.push(e._toProtobufSignature(d))}return this}signWithOperator(e){const t=e._operator;if(t==null)throw new Error("`client` must have an operator to sign with the operator");return this._isFrozen()||this.freezeWith(e),this.signWith(t.publicKey,t.transactionSigner)}addSignature(e,t){this._requireOneNodeAccountId(),this.isFrozen()||this.freeze();const o=e.toBytesRaw(),c=encode$3(o);if(this._signerPublicKeys.has(c))return this;this._transactions.clear(),this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),this._signedTransactions.setLocked();for(const l of this._signedTransactions.list)l.sigMap==null&&(l.sigMap={}),l.sigMap.sigPair==null&&(l.sigMap.sigPair=[]),l.sigMap.sigPair.push(e._toProtobufSignature(t));return this._signerPublicKeys.add(c),this._publicKeys.push(e),this._transactionSigners.push(null),this}getSignatures(){return this._requireFrozen(),this._requireNotSignOnDemand(),this._buildAllTransactions(),this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),SignatureMap._fromTransaction(this)}async getSignaturesAsync(){return this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),await this._buildAllTransactionsAsync(),this._transactions.setLocked(),this._signedTransactions.setLocked(),SignatureMap._fromTransaction(this)}_setTransactionId(){if(this._operatorAccountId==null&&this._transactionIds.isEmpty)throw new Error("`transactionId` must be set or `client` must be provided with `freezeWith`")}_setNodeAccountIds(e){if(this._nodeAccountIds.isEmpty){if(e==null)throw new Error("`nodeAccountId` must be set or `client` must be provided with `freezeWith`");this._nodeAccountIds.setList(e._network.getNodeAccountIdsForExecute())}}_buildSignedTransactions(){this._signedTransactions.locked||this._signedTransactions.setList(this._nodeAccountIds.list.map(e=>this._makeSignedTransaction(e)))}freeze(){return this.freezeWith(null)}_freezeWithAccountId(e){this._operatorAccountId==null&&(this._operatorAccountId=e)}freezeWith(e){if(this._signOnDemand=e!=null?e.signOnDemand:!1,this._operator=e!=null?e._operator:null,this._freezeWithAccountId(e!=null?e.operatorAccountId:null),this._maxTransactionFee=this._maxTransactionFee==null?e!=null&&e.defaultMaxTransactionFee!=null?e.defaultMaxTransactionFee:this._defaultMaxTransactionFee:this._maxTransactionFee,this._regenerateTransactionId=e!=null&&this._regenerateTransactionId==null?e.defaultRegenerateTransactionId:this._regenerateTransactionId,this._setNodeAccountIds(e),this._setTransactionId(),e!=null)for(const t of this._transactionIds.list)t.accountId!=null&&t.accountId.validateChecksum(e);return this._buildNewTransactionIdList(),this._signOnDemand||this._buildSignedTransactions(),this}async signWithSigner(e){return await e.signTransaction(this),this}async freezeWithSigner(e){return await e.populateTransaction(this),this.freeze(),this}toBytes(){return this._requireFrozen(),this._requireNotSignOnDemand(),this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),this._buildAllTransactions(),lib.proto.TransactionList.encode({transactionList:this._transactions.list}).finish()}async toBytesAsync(){return this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),await this._buildAllTransactionsAsync(),this._transactions.setLocked(),this._signedTransactions.setLocked(),lib.proto.TransactionList.encode({transactionList:this._transactions.list}).finish()}async getTransactionHash(){return this._requireFrozen(),this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),await this._buildAllTransactionsAsync(),this._transactions.setLocked(),this._signedTransactions.setLocked(),digest(this._transactions.get(0).signedTransactionBytes)}async getTransactionHashPerNode(){return this._requireFrozen(),this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),await this._buildAllTransactionsAsync(),await TransactionHashMap._fromTransaction(this)}isFrozen(){return this._signedTransactions.length>0}_getTransactionId(){const e=this.transactionId;if(e==null)throw new Error("transaction must have been frozen before getting the transaction ID, try calling `freeze`");return e}_validateChecksums(e){}async _beforeExecute(e){this._logger&&this._logger.info(`Network used: ${e._network.networkName}`),this._isFrozen()||this.freezeWith(e),e.isAutoValidateChecksumsEnabled()&&this._validateChecksums(e),(this._operator==null||this._operator==null)&&(this._operator=e!=null?e._operator:null),(this._operatorAccountId==null||this._operatorAccountId==null)&&(this._operatorAccountId=e!=null&&e._operator!=null?e._operator.accountId:null),this._operator!=null&&await this.signWith(this._operator.publicKey,this._operator.transactionSigner)}async _makeRequestAsync(){const e=this._transactionIds.index*this._nodeAccountIds.length+this._nodeAccountIds.index;return this._signOnDemand?await this._buildTransactionAsync():(this._buildTransaction(e),this._transactions.get(e))}async _signTransaction(){const e=this._makeSignedTransaction(this._nodeAccountIds.next),t=e.bodyBytes;for(let o=0;o<this._publicKeys.length;o++){const c=this._publicKeys[o],l=this._transactionSigners[o];if(l==null)continue;const h=await l(t);e.sigMap==null&&(e.sigMap={}),e.sigMap.sigPair==null&&(e.sigMap.sigPair=[]),e.sigMap.sigPair.push(c._toProtobufSignature(h))}return e}_buildNewTransactionIdList(){if(this._transactionIds.locked||this._operatorAccountId==null)return;const e=TransactionId.withValidStart(this._operatorAccountId,Timestamp.generate());this._transactionIds.set(this._transactionIds.index,e)}_buildAllTransactions(){for(let e=0;e<this._signedTransactions.length;e++)this._buildTransaction(e)}async _buildAllTransactionsAsync(){if(!this._signOnDemand){this._buildAllTransactions();return}if(this._buildSignedTransactions(),!this._transactions.locked)for(let e=0;e<this._signedTransactions.length;e++)this._transactions.push(await this._buildTransactionAsync())}_buildTransaction(e){if(this._transactions.length<e)for(let t=this._transactions.length;t<e;t++)this._transactions.push(null);this._transactions.setIfAbsent(e,()=>({signedTransactionBytes:lib.proto.SignedTransaction.encode(this._signedTransactions.get(e)).finish()}))}async _buildTransactionAsync(){return{signedTransactionBytes:lib.proto.SignedTransaction.encode(await this._signTransaction()).finish()}}_shouldRetry(e,t){const{nodeTransactionPrecheckCode:o}=t,c=Status._fromCode(o??lib.proto.ResponseCodeEnum.OK);switch(this._logger&&(this._logger.debug(`[${this._getLogId()}] received status ${c.toString()}`),this._logger.info(`SDK Transaction Status Response: ${c.toString()}`)),c){case Status.Busy:case Status.Unknown:case Status.PlatformTransactionNotCreated:case Status.PlatformNotActive:return[c,ExecutionState.Retry];case Status.Ok:return[c,ExecutionState.Finished];case Status.TransactionExpired:return this._transactionIds.locked||this._regenerateTransactionId!=null&&!this._regenerateTransactionId?[c,ExecutionState.Error]:(this._buildNewTransactionIdList(),[c,ExecutionState.Retry]);default:return[c,ExecutionState.Error]}}_mapStatusError(e,t){const{nodeTransactionPrecheckCode:o}=t,c=Status._fromCode(o??lib.proto.ResponseCodeEnum.OK);return this._logger&&this._logger.info(`Transaction Error Info: ${c.toString()}, ${this.transactionId.toString()}`),new PrecheckStatusError({status:c,transactionId:this._getTransactionId(),contractFunctionResult:null})}async _mapResponse(e,t,o){const c=await digest(o.signedTransactionBytes),l=this._getTransactionId();return this._transactionIds.advance(),this._logger&&this._logger.info(`Transaction Info: ${JSON.stringify(new TransactionResponse({nodeId:t,transactionHash:c,transactionId:l}).toJSON())}`),new TransactionResponse({nodeId:t,transactionHash:c,transactionId:l})}_makeSignedTransaction(e){const t=this._makeTransactionBody(e);return this._logger&&this._logger.info(`Transaction Body: ${JSON.stringify(t)}`),{bodyBytes:lib.proto.TransactionBody.encode(t).finish(),sigMap:{sigPair:[]}}}_makeTransactionBody(e){return{[this._getTransactionDataCase()]:this._makeTransactionData(),transactionFee:this._maxTransactionFee!=null?this._maxTransactionFee.toTinybars():null,memo:this._transactionMemo,transactionID:this._transactionIds.current._toProtobuf(),nodeAccountID:e!=null?e._toProtobuf():null,transactionValidDuration:{seconds:Long$1.fromNumber(this._transactionValidDuration)}}}_getTransactionDataCase(){throw new Error("not implemented")}_getScheduledTransactionBody(){return{memo:this.transactionMemo,transactionFee:this._maxTransactionFee==null?this._defaultMaxTransactionFee.toTinybars():this._maxTransactionFee.toTinybars(),[this._getTransactionDataCase()]:this._makeTransactionData()}}_makeTransactionData(){throw new Error("not implemented")}_isFrozen(){return this._signOnDemand||this._signedTransactions.length>0||this._transactions.length>0}_requireNotFrozen(){if(this._isFrozen())throw new Error("transaction is immutable; it has at least one signature or has been explicitly frozen")}_requireNotSignOnDemand(){if(this._signOnDemand)throw new Error("Please use `toBytesAsync()` if `signOnDemand` is enabled")}_requireFrozen(){if(!this._isFrozen())throw new Error("transaction must have been frozen before calculating the hash will be stable, try calling `freeze`")}_requireOneNodeAccountId(){if(this._nodeAccountIds.length!=1)throw"transaction did not have exactly one node ID set"}_requestToBytes(e){return lib.proto.Transaction.encode(e).finish()}_responseToBytes(e){return lib.proto.TransactionResponse.encode(e).finish()}}const SCHEDULE_CREATE_TRANSACTION=[];class NftId{constructor(e,t){this.tokenId=e,this.serial=typeof t=="number"?Long$1.fromNumber(t):t,Object.freeze(this)}static fromString(e){const t=e.split("/").length>1?e.split("/"):e.split("@");for(const l of t)if(l==="")throw new Error("invalid format for NftId: use [token]/[serial] or [token]@[serial]");const o=TokenId.fromString(t[0]),c=Long$1.fromString(t[1]);return new NftId(o,c)}static _fromProtobuf(e){return new NftId(TokenId._fromProtobuf(e.tokenID),e.serialNumber!=null?e.serialNumber:Long$1.ZERO)}static fromBytes(e){return NftId._fromProtobuf(lib.proto.NftID.decode(e))}_toProtobuf(){return{tokenID:this.tokenId._toProtobuf(),serialNumber:Long$1.fromValue(this.serial!==void 0?this.serial:0)}}toString(){return`${this.tokenId.toString()}/${this.serial.toString()}`}toBytes(){return lib.proto.NftID.encode(this._toProtobuf()).finish()}}class HbarAllowance{constructor(e){this.spenderAccountId=e.spenderAccountId,this.ownerAccountId=e.ownerAccountId,this.amount=e.amount,Object.freeze(this)}static _fromProtobuf(e){return new HbarAllowance({spenderAccountId:AccountId._fromProtobuf(e.spender),ownerAccountId:e.owner!=null?AccountId._fromProtobuf(e.owner):null,amount:Hbar.fromTinybars(e.amount!=null?e.amount:0)})}static _fromGrantedProtobuf(e,t){return new HbarAllowance({spenderAccountId:AccountId._fromProtobuf(e.spender),ownerAccountId:t,amount:Hbar.fromTinybars(e.amount!=null?e.amount:0)})}_toProtobuf(){return{owner:this.ownerAccountId!=null?this.ownerAccountId._toProtobuf():null,spender:this.spenderAccountId!=null?this.spenderAccountId._toProtobuf():null,amount:this.amount!=null?this.amount.toTinybars():null}}_validateChecksums(e){this.spenderAccountId!=null&&this.spenderAccountId.validateChecksum(e),this.spenderAccountId!=null&&this.spenderAccountId.validateChecksum(e)}toJSON(){return{ownerAccountId:this.ownerAccountId!=null?this.ownerAccountId.toString():null,spenderAccountId:this.spenderAccountId!=null?this.spenderAccountId.toString():null,amount:this.amount!=null?this.amount.toString():null}}}class TokenAllowance{constructor(e){this.tokenId=e.tokenId,this.spenderAccountId=e.spenderAccountId,this.ownerAccountId=e.ownerAccountId,this.amount=e.amount,Object.freeze(this)}static _fromProtobuf(e){return new TokenAllowance({tokenId:TokenId._fromProtobuf(e.tokenId),spenderAccountId:AccountId._fromProtobuf(e.spender),ownerAccountId:e.owner!=null?AccountId._fromProtobuf(e.owner):null,amount:e.amount!=null?Long$1.fromValue(e.amount):null})}static _fromGrantedProtobuf(e,t){return new TokenAllowance({tokenId:TokenId._fromProtobuf(e.tokenId),spenderAccountId:AccountId._fromProtobuf(e.spender),ownerAccountId:t,amount:e.amount!=null?Long$1.fromValue(e.amount):null})}_toProtobuf(){return{tokenId:this.tokenId._toProtobuf(),spender:this.spenderAccountId!=null?this.spenderAccountId._toProtobuf():null,owner:this.ownerAccountId!=null?this.ownerAccountId._toProtobuf():null,amount:this.amount}}_validateChecksums(e){this.tokenId.validateChecksum(e),this.ownerAccountId!=null&&this.ownerAccountId.validateChecksum(e),this.spenderAccountId!=null&&this.spenderAccountId.validateChecksum(e)}}class TokenNftAllowance{constructor(e){this.tokenId=e.tokenId,this.spenderAccountId=e.spenderAccountId,this.ownerAccountId=e.ownerAccountId,this.serialNumbers=e.serialNumbers,this.allSerials=e.allSerials,this.delegatingSpender=e.delegatingSpender,Object.freeze(this)}static _fromProtobuf(e){const t=e.approvedForAll!=null&&e.approvedForAll.value==!0;return new TokenNftAllowance({tokenId:TokenId._fromProtobuf(e.tokenId),spenderAccountId:e.spender!=null?AccountId._fromProtobuf(e.spender):null,ownerAccountId:e.owner!=null?AccountId._fromProtobuf(e.owner):null,serialNumbers:t?null:e.serialNumbers!=null?e.serialNumbers.map(o=>Long$1.fromValue(o)):[],allSerials:t,delegatingSpender:e.delegatingSpender!=null?AccountId._fromProtobuf(e.delegatingSpender):null})}static _fromGrantedProtobuf(e,t){return new TokenNftAllowance({tokenId:TokenId._fromProtobuf(e.tokenId),spenderAccountId:AccountId._fromProtobuf(e.spender),ownerAccountId:t,serialNumbers:[],allSerials:null,delegatingSpender:null})}static _fromRemoveProtobuf(e){return new TokenNftAllowance({tokenId:TokenId._fromProtobuf(e.tokenId),spenderAccountId:null,ownerAccountId:e.owner!=null?AccountId._fromProtobuf(e.owner):null,serialNumbers:e.serialNumbers!=null?e.serialNumbers.map(t=>Long$1.fromValue(t)):[],allSerials:null,delegatingSpender:null})}_toProtobuf(){return{tokenId:this.tokenId._toProtobuf(),spender:this.spenderAccountId!=null?this.spenderAccountId._toProtobuf():null,owner:this.ownerAccountId!=null?this.ownerAccountId._toProtobuf():null,approvedForAll:this.serialNumbers==null?{value:this.allSerials}:null,serialNumbers:this.serialNumbers,delegatingSpender:this.delegatingSpender!=null?this.delegatingSpender._toProtobuf():null}}_validateChecksums(e){this.tokenId.validateChecksum(e),this.ownerAccountId!=null&&this.ownerAccountId.validateChecksum(e),this.spenderAccountId!=null&&this.spenderAccountId.validateChecksum(e)}}class AccountAllowanceApproveTransaction extends Transaction{constructor(e={}){super(),this._hbarApprovals=e.hbarApprovals!=null?e.hbarApprovals:[],this._tokenApprovals=e.tokenApprovals!=null?e.tokenApprovals:[],this._nftApprovals=e.nftApprovals!=null?e.nftApprovals:[]}static _fromProtobuf(e,t,o,c,l){const d=l[0].cryptoApproveAllowance;return Transaction._fromProtobufTransactions(new AccountAllowanceApproveTransaction({hbarApprovals:(d.cryptoAllowances!=null?d.cryptoAllowances:[]).map(g=>HbarAllowance._fromProtobuf(g)),tokenApprovals:(d.tokenAllowances!=null?d.tokenAllowances:[]).map(g=>TokenAllowance._fromProtobuf(g)),nftApprovals:(d.nftAllowances!=null?d.nftAllowances:[]).map(g=>TokenNftAllowance._fromProtobuf(g))}),e,t,o,c,l)}get hbarApprovals(){return this._hbarApprovals}approveHbarAllowance(e,t,o){return this._requireNotFrozen(),this._hbarApprovals.push(new HbarAllowance({spenderAccountId:typeof t=="string"?AccountId.fromString(t):t instanceof ContractId?AccountId.fromEvmAddress(0,0,t.toSolidityAddress()):t,ownerAccountId:typeof e=="string"?AccountId.fromString(e):e instanceof ContractId?AccountId.fromEvmAddress(0,0,e.toSolidityAddress()):e,amount:o instanceof Hbar?o:new Hbar(o)})),this}addHbarAllowance(e,t){return this._requireNotFrozen(),this._hbarApprovals.push(new HbarAllowance({spenderAccountId:typeof e=="string"?AccountId.fromString(e):e,amount:t instanceof Hbar?t:new Hbar(t),ownerAccountId:null})),this}get tokenApprovals(){return this._tokenApprovals}approveTokenAllowance(e,t,o,c){return this._requireNotFrozen(),this._tokenApprovals.push(new TokenAllowance({tokenId:typeof e=="string"?TokenId.fromString(e):e,spenderAccountId:typeof o=="string"?AccountId.fromString(o):o instanceof ContractId?AccountId.fromEvmAddress(0,0,o.toSolidityAddress()):o,ownerAccountId:typeof t=="string"?AccountId.fromString(t):t instanceof ContractId?AccountId.fromEvmAddress(0,0,t.toSolidityAddress()):t,amount:typeof c=="number"?Long$1.fromNumber(c):c})),this}addTokenAllowance(e,t,o){return this._requireNotFrozen(),this._tokenApprovals.push(new TokenAllowance({tokenId:typeof e=="string"?TokenId.fromString(e):e,spenderAccountId:typeof t=="string"?AccountId.fromString(t):t,amount:typeof o=="number"?Long$1.fromNumber(o):o,ownerAccountId:null})),this}addTokenNftAllowance(e,t){return this._approveTokenNftAllowance(e,null,t,null)}get tokenNftApprovals(){return this._nftApprovals}_approveTokenNftAllowance(e,t,o,c){this._requireNotFrozen();const l=typeof e=="string"?NftId.fromString(e):e,h=typeof o=="string"?AccountId.fromString(o):o instanceof ContractId?AccountId.fromEvmAddress(0,0,o.toSolidityAddress()):o;let d=!1;for(const g of this._nftApprovals)if(g.tokenId.compare(l.tokenId)===0&&g.spenderAccountId!=null&&g.spenderAccountId.compare(h)===0){g.serialNumbers!=null&&g.serialNumbers.push(l.serial),d=!0;break}return d||this._nftApprovals.push(new TokenNftAllowance({tokenId:l.tokenId,spenderAccountId:h,ownerAccountId:typeof t=="string"?AccountId.fromString(t):t instanceof ContractId?AccountId.fromEvmAddress(0,0,t.toSolidityAddress()):t,serialNumbers:[l.serial],allSerials:!1,delegatingSpender:typeof c=="string"?AccountId.fromString(c):c})),this}approveTokenNftAllowance(e,t,o){return this._approveTokenNftAllowance(e,t,o,null)}approveTokenNftAllowanceWithDelegatingSpender(e,t,o,c){return this._approveTokenNftAllowance(e,t,o,c)}_approveAllTokenNftAllowance(e,t,o,c){return this._requireNotFrozen(),this._nftApprovals.push(new TokenNftAllowance({tokenId:typeof e=="string"?TokenId.fromString(e):e,spenderAccountId:typeof o=="string"?AccountId.fromString(o):o instanceof ContractId?AccountId.fromEvmAddress(0,0,o.toSolidityAddress()):o,ownerAccountId:typeof t=="string"?AccountId.fromString(t):t instanceof ContractId?AccountId.fromEvmAddress(0,0,t.toSolidityAddress()):t,serialNumbers:null,allSerials:c,delegatingSpender:null})),this}addAllTokenNftAllowance(e,t,o){return this._approveAllTokenNftAllowance(e,t,o,!0)}approveTokenNftAllowanceAllSerials(e,t,o){return this._approveAllTokenNftAllowance(e,t,o,!0)}deleteTokenNftAllowanceAllSerials(e,t,o){return this._approveAllTokenNftAllowance(e,t,o,!1)}_validateChecksums(e){this._hbarApprovals.map(t=>t._validateChecksums(e)),this._tokenApprovals.map(t=>t._validateChecksums(e)),this._nftApprovals.map(t=>t._validateChecksums(e))}_execute(e,t){return e.crypto.approveAllowances(t)}_getTransactionDataCase(){return"cryptoApproveAllowance"}_makeTransactionData(){return{cryptoAllowances:this._hbarApprovals.map(e=>e._toProtobuf()),tokenAllowances:this._tokenApprovals.map(e=>e._toProtobuf()),nftAllowances:this._nftApprovals.map(e=>e._toProtobuf())}}_getLogId(){return`AccountAllowanceApproveTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("cryptoApproveAllowance",AccountAllowanceApproveTransaction._fromProtobuf);class AccountAllowanceDeleteTransaction extends Transaction{constructor(e={}){super(),this._nftAllowances=e.nftAllowances!=null?e.nftAllowances:[]}static _fromProtobuf(e,t,o,c,l){const d=l[0].cryptoDeleteAllowance;return Transaction._fromProtobufTransactions(new AccountAllowanceDeleteTransaction({nftAllowances:(d.nftAllowances!=null?d.nftAllowances:[]).map(g=>TokenNftAllowance._fromProtobuf(g))}),e,t,o,c,l)}get tokenNftAllowanceDeletions(){return this._nftAllowances}deleteAllTokenNftAllowances(e,t){this._requireNotFrozen();const o=typeof e=="string"?NftId.fromString(e):e,c=typeof t=="string"?AccountId.fromString(t):t;let l=!1;for(const h of this._nftAllowances)if(h.tokenId.compare(o.tokenId)===0){h.serialNumbers!=null&&h.serialNumbers.push(o.serial),l=!0;break}return l||this._nftAllowances.push(new TokenNftAllowance({tokenId:o.tokenId,spenderAccountId:null,serialNumbers:[o.serial],ownerAccountId:c,allSerials:!1,delegatingSpender:null})),this}_validateChecksums(e){this._nftAllowances.map(t=>t._validateChecksums(e))}_execute(e,t){return e.crypto.deleteAllowances(t)}_getTransactionDataCase(){return"cryptoDeleteAllowance"}_makeTransactionData(){return{nftAllowances:this._nftAllowances.map(e=>e._toProtobuf())}}_getLogId(){return`AccountAllowanceDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("cryptoDeleteAllowance",AccountAllowanceDeleteTransaction._fromProtobuf);class TokenBalanceMap extends ObjectMap{constructor(){super(e=>TokenId.fromString(e))}}class TokenDecimalMap extends ObjectMap{constructor(){super(e=>TokenId.fromString(e))}}class AccountBalance{constructor(e){this.hbars=e.hbars,this.tokens=e.tokens,this.tokenDecimals=e.tokenDecimals,Object.freeze(this)}static fromBytes(e){return AccountBalance._fromProtobuf(lib.proto.CryptoGetAccountBalanceResponse.decode(e))}static _fromProtobuf(e){const t=new TokenBalanceMap,o=new TokenDecimalMap;if(e.tokenBalances!=null)for(const c of e.tokenBalances){const l=TokenId._fromProtobuf(c.tokenId);o._set(l,c.decimals!=null?c.decimals:0),t._set(l,Long$1.fromValue(c.balance))}return new AccountBalance({hbars:Hbar.fromTinybars(e.balance),tokens:t,tokenDecimals:o})}_toProtobuf(){const e=[];for(const[t,o]of this.tokens!=null?this.tokens:[])e.push({tokenId:t._toProtobuf(),balance:o,decimals:this.tokenDecimals!=null?this.tokenDecimals.get(t):null});return{balance:this.hbars.toTinybars(),tokenBalances:e}}toBytes(){return lib.proto.CryptoGetAccountBalanceResponse.encode(this._toProtobuf()).finish()}toString(){return JSON.stringify(this.toJSON())}toJSON(){const e=[];for(const[t,o]of this.tokens!=null?this.tokens:[]){const c=this.tokenDecimals!=null?this.tokenDecimals.get(t):null;e.push({tokenId:t.toString(),balance:o.toString(),decimals:c??0})}return{hbars:this.hbars.toString(),tokens:e}}}class AccountBalanceQuery extends Query{constructor(e={}){super(),this._accountId=null,this._contractId=null,e.accountId!=null&&this.setAccountId(e.accountId),e.contractId!=null&&this.setContractId(e.contractId)}static _fromProtobuf(e){const t=e.cryptogetAccountBalance;return new AccountBalanceQuery({accountId:t.accountID!=null?AccountId._fromProtobuf(t.accountID):void 0,contractId:t.contractID!=null?ContractId._fromProtobuf(t.contractID):void 0})}get accountId(){return this._accountId}setAccountId(e){return this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}get contractId(){return this._contractId}setContractId(e){return this._contractId=typeof e=="string"?ContractId.fromString(e):e.clone(),this}_isPaymentRequired(){return!1}_validateChecksums(e){this._accountId!=null&&this._accountId.validateChecksum(e),this._contractId!=null&&this._contractId.validateChecksum(e)}_execute(e,t){return e.crypto.cryptoGetBalance(t)}_mapResponseHeader(e){return e.cryptogetAccountBalance.header}_mapResponse(e,t,o){const c=e.cryptogetAccountBalance;return Promise.resolve(AccountBalance._fromProtobuf(c))}_onMakeRequest(e){return{cryptogetAccountBalance:{header:e,accountID:this._accountId!=null?this._accountId._toProtobuf():null,contractID:this._contractId!=null?this._contractId._toProtobuf():null}}}_getLogId(){return`AccountBalanceQuery:${this._timestamp.toString()}`}}QUERY_REGISTRY.set("cryptogetAccountBalance",AccountBalanceQuery._fromProtobuf);class Duration{constructor(e){this.seconds=e instanceof Long$1?e:Long$1.fromNumber(e),Object.freeze(this)}_toProtobuf(){return{seconds:this.seconds}}static _fromProtobuf(e){return new Duration(e.seconds)}}class AccountCreateTransaction extends Transaction{constructor(e={}){super(),this._key=null,this._initialBalance=null,this._sendRecordThreshold=DEFAULT_RECORD_THRESHOLD,this._receiveRecordThreshold=DEFAULT_RECORD_THRESHOLD,this._receiverSignatureRequired=!1,this._proxyAccountId=null,this._autoRenewPeriod=new Duration(DEFAULT_AUTO_RENEW_PERIOD),this._accountMemo=null,this._maxAutomaticTokenAssociations=null,this._stakedAccountId=null,this._stakedNodeId=null,this._declineStakingReward=!1,this._alias=null,e.key!=null&&this.setKey(e.key),e.receiverSignatureRequired!=null&&this.setReceiverSignatureRequired(e.receiverSignatureRequired),e.initialBalance!=null&&this.setInitialBalance(e.initialBalance),e.proxyAccountId!=null&&this.setProxyAccountId(e.proxyAccountId),e.autoRenewPeriod!=null&&this.setAutoRenewPeriod(e.autoRenewPeriod),e.accountMemo!=null&&this.setAccountMemo(e.accountMemo),e.maxAutomaticTokenAssociations!=null&&this.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations),e.stakedAccountId!=null&&this.setStakedAccountId(e.stakedAccountId),e.stakedNodeId!=null&&this.setStakedNodeId(e.stakedNodeId),e.declineStakingReward!=null&&this.setDeclineStakingReward(e.declineStakingReward),e.alias!=null&&this.setAlias(e.alias)}static _fromProtobuf(e,t,o,c,l){const d=l[0].cryptoCreateAccount;let g;return d.alias!=null&&d.alias.length>0&&d.alias.length===20&&(g=EvmAddress.fromBytes(d.alias)),Transaction._fromProtobufTransactions(new AccountCreateTransaction({key:d.key!=null?Key._fromProtobufKey(d.key):void 0,initialBalance:d.initialBalance!=null?d.initialBalance:void 0,receiverSignatureRequired:d.receiverSigRequired!=null?d.receiverSigRequired:void 0,proxyAccountId:d.proxyAccountID!=null?AccountId._fromProtobuf(d.proxyAccountID):void 0,autoRenewPeriod:d.autoRenewPeriod!=null&&d.autoRenewPeriod.seconds!=null?d.autoRenewPeriod.seconds:void 0,accountMemo:d.memo!=null?d.memo:void 0,maxAutomaticTokenAssociations:d.maxAutomaticTokenAssociations!=null?d.maxAutomaticTokenAssociations:void 0,stakedAccountId:d.stakedAccountId!=null?AccountId._fromProtobuf(d.stakedAccountId):void 0,stakedNodeId:d.stakedNodeId!=null?d.stakedNodeId:void 0,declineStakingReward:d.declineReward==!0,alias:g}),e,t,o,c,l)}get key(){return this._key}setKey(e){return this._requireNotFrozen(),this._key=e,this}get initialBalance(){return this._initialBalance}setInitialBalance(e){return this._requireNotFrozen(),this._initialBalance=e instanceof Hbar?e:new Hbar(e),this}get receiverSignatureRequired(){return this._receiverSignatureRequired}setReceiverSignatureRequired(e){return this._requireNotFrozen(),this._receiverSignatureRequired=e,this}get proxyAccountId(){return this._proxyAccountId}setProxyAccountId(e){return this._requireNotFrozen(),this._proxyAccountId=e,this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof Duration?e:new Duration(e),this}get accountMemo(){return this._accountMemo}setAccountMemo(e){return this._requireNotFrozen(),this._accountMemo=e,this}get maxAutomaticTokenAssociations(){return this._maxAutomaticTokenAssociations}setMaxAutomaticTokenAssociations(e){return this._requireNotFrozen(),this._maxAutomaticTokenAssociations=typeof e=="number"?Long$1.fromNumber(e):e,this}get stakedAccountId(){return this._stakedAccountId}setStakedAccountId(e){return this._requireNotFrozen(),this._stakedAccountId=typeof e=="string"?AccountId.fromString(e):e,this}get stakedNodeId(){return this._stakedNodeId}setStakedNodeId(e){return this._requireNotFrozen(),this._stakedNodeId=Long$1.fromValue(e),this}get declineStakingRewards(){return this._declineStakingReward}setDeclineStakingReward(e){return this._requireNotFrozen(),this._declineStakingReward=e,this}get alias(){return this._alias}setAlias(e){if(typeof e=="string")if(e.startsWith("0x")&&e.length==42||e.length==40)this._alias=EvmAddress.fromString(e);else throw new Error('evmAddress must be a valid EVM address with or without "0x" prefix');else this._alias=e;return this}_validateChecksums(e){this._proxyAccountId!=null&&this._proxyAccountId.validateChecksum(e)}_execute(e,t){return e.crypto.createAccount(t)}_getTransactionDataCase(){return"cryptoCreateAccount"}_makeTransactionData(){let e=null;return this._alias!=null&&(e=this._alias.toBytes()),{key:this._key!=null?this._key._toProtobufKey():null,initialBalance:this._initialBalance!=null?this._initialBalance.toTinybars():null,autoRenewPeriod:this._autoRenewPeriod._toProtobuf(),proxyAccountID:this._proxyAccountId!=null?this._proxyAccountId._toProtobuf():null,receiveRecordThreshold:this._receiveRecordThreshold.toTinybars(),sendRecordThreshold:this._sendRecordThreshold.toTinybars(),receiverSigRequired:this._receiverSignatureRequired,memo:this._accountMemo,maxAutomaticTokenAssociations:this._maxAutomaticTokenAssociations!=null?this._maxAutomaticTokenAssociations.toInt():null,stakedAccountId:this.stakedAccountId!=null?this.stakedAccountId._toProtobuf():null,stakedNodeId:this.stakedNodeId,declineReward:this.declineStakingRewards,alias:e}}_getLogId(){return`AccountCreateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("cryptoCreateAccount",AccountCreateTransaction._fromProtobuf);class AccountDeleteTransaction extends Transaction{constructor(e={}){super(),this._accountId=null,this._transferAccountId=null,e.accountId!=null&&this.setAccountId(e.accountId),e.transferAccountId!=null&&this.setTransferAccountId(e.transferAccountId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].cryptoDelete;return Transaction._fromProtobufTransactions(new AccountDeleteTransaction({accountId:d.deleteAccountID!=null?AccountId._fromProtobuf(d.deleteAccountID):void 0,transferAccountId:d.transferAccountID!=null?AccountId._fromProtobuf(d.transferAccountID):void 0}),e,t,o,c,l)}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}get transferAccountId(){return this._transferAccountId}setTransferAccountId(e){return this._requireNotFrozen(),this._transferAccountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._accountId!=null&&this._accountId.validateChecksum(e),this._transferAccountId!=null&&this._transferAccountId.validateChecksum(e)}_execute(e,t){return e.crypto.cryptoDelete(t)}_getTransactionDataCase(){return"cryptoDelete"}_makeTransactionData(){return{deleteAccountID:this._accountId!=null?this._accountId._toProtobuf():null,transferAccountID:this._transferAccountId!=null?this._transferAccountId._toProtobuf():null}}_getLogId(){return`AccountDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("cryptoDelete",AccountDeleteTransaction._fromProtobuf);class StakingInfo{constructor(e){this.declineStakingReward=e.declineStakingReward,this.stakePeriodStart=e.stakePeriodStart,this.pendingReward=e.pendingReward,this.stakedToMe=e.stakedToMe,this.stakedAccountId=e.stakedAccountId,this.stakedNodeId=e.stakedNodeId,Object.freeze(this)}static _fromProtobuf(e){return new StakingInfo({declineStakingReward:e.declineReward==!0,stakePeriodStart:e.stakePeriodStart!=null?Timestamp._fromProtobuf(e.stakePeriodStart):null,pendingReward:e.pendingReward!=null?Hbar.fromTinybars(e.pendingReward):null,stakedToMe:e.stakedToMe!=null?Hbar.fromTinybars(e.stakedToMe):null,stakedAccountId:e.stakedAccountId!=null?AccountId._fromProtobuf(e.stakedAccountId):null,stakedNodeId:e.stakedNodeId!=null?e.stakedNodeId:null})}_toProtobuf(){return{declineReward:this.declineStakingReward,stakePeriodStart:this.stakePeriodStart!=null?this.stakePeriodStart._toProtobuf():null,pendingReward:this.pendingReward!=null?this.pendingReward.toTinybars():null,stakedToMe:this.stakedToMe!=null?this.stakedToMe.toTinybars():null,stakedAccountId:this.stakedAccountId!=null?this.stakedAccountId._toProtobuf():null,stakedNodeId:this.stakedNodeId}}static fromBytes(e){return StakingInfo._fromProtobuf(lib.proto.StakingInfo.decode(e))}toBytes(){return lib.proto.StakingInfo.encode(this._toProtobuf()).finish()}toString(){return JSON.stringify(this.toJSON())}toJSON(){return{declineStakingReward:this.declineStakingReward,stakePeriodStart:this.stakePeriodStart!=null?this.stakePeriodStart.toString():null,pendingReward:this.pendingReward!=null?this.pendingReward.toString():null,stakedToMe:this.stakedToMe!=null?this.stakedToMe.toString():null,stakedAccountId:this.stakedAccountId!=null?this.stakedAccountId.toString():null,stakedNodeId:this.stakedNodeId!=null?this.stakedNodeId.toString():null}}}class LiveHash{constructor(e){this.accountId=e.accountId,this.hash=e.hash,this.keys=e.keys,this.duration=e.duration,Object.freeze(this)}static _fromProtobuf(e){const t=e;return new LiveHash({accountId:AccountId._fromProtobuf(t.accountId),hash:t.hash!=null?t.hash:new Uint8Array,keys:t.keys!=null?KeyList.__fromProtobufKeyList(t.keys):new KeyList,duration:Duration._fromProtobuf(t.duration)})}_toProtobuf(){return{accountId:this.accountId._toProtobuf(),hash:this.hash,keys:this.keys._toProtobufKey().keyList,duration:this.duration._toProtobuf()}}}class TokenRelationship{constructor(e){this.tokenId=e.tokenId,this.symbol=e.symbol,this.balance=e.balance,this.isKycGranted=e.isKycGranted,this.isFrozen=e.isFrozen,this.automaticAssociation=e.automaticAssociation,Object.freeze(this)}static _fromProtobuf(e){const t=TokenId._fromProtobuf(e.tokenId),o=e.kycStatus==null||e.kycStatus===0?null:e.kycStatus===1,c=e.freezeStatus==null||e.freezeStatus===0?null:e.freezeStatus===1;return new TokenRelationship({tokenId:t,symbol:e.symbol,balance:e.balance!=null?e.balance instanceof Long$1?e.balance:Long$1.fromValue(e.balance):Long$1.ZERO,isKycGranted:o,isFrozen:c,automaticAssociation:e.automaticAssociation!=null?e.automaticAssociation:null})}_toProtobuf(){return{tokenId:this.tokenId._toProtobuf(),symbol:this.symbol,balance:this.balance,kycStatus:this.isKycGranted==null?0:this.isKycGranted?1:2,freezeStatus:this.isFrozen==null?0:this.isFrozen?1:2,automaticAssociation:this.automaticAssociation}}}class TokenRelationshipMap extends ObjectMap{constructor(){super(e=>TokenId.fromString(e))}static _fromProtobuf(e){const t=new TokenRelationshipMap;for(const o of e){const c=TokenId._fromProtobuf(o.tokenId);t._set(c,TokenRelationship._fromProtobuf(o))}return t}_toProtobuf(){const e=[];for(const[t,o]of this)e.push(o._toProtobuf());return e}}class LedgerId{constructor(e){this._ledgerId=e,Object.freeze(this)}static fromString(e){switch(e){case NETNAMES[0]:case"0":return LedgerId.MAINNET;case NETNAMES[1]:case"1":return LedgerId.TESTNET;case NETNAMES[2]:case"2":return LedgerId.PREVIEWNET;case NETNAMES[3]:case"3":return LedgerId.LOCAL_NODE;default:{let t=decode$5(e);if(t.length==0&&e.length!=0)throw new Error("Default reached for fromString");return new LedgerId(t)}}}toString(){if(this._ledgerId.length==1)switch(this._ledgerId[0]){case 0:return NETNAMES[0];case 1:return NETNAMES[1];case 2:return NETNAMES[2];case 3:return NETNAMES[3];default:return encode$3(this._ledgerId)}else return encode$3(this._ledgerId)}static fromBytes(e){return new LedgerId(e)}toBytes(){return this._ledgerId}isMainnet(){return this.toString()==NETNAMES[0]}isTestnet(){return this.toString()==NETNAMES[1]}isPreviewnet(){return this.toString()==NETNAMES[2]}isLocalNode(){return this.toString()==NETNAMES[3]}}const NETNAMES=["mainnet","testnet","previewnet","local-node"];LedgerId.MAINNET=new LedgerId(new Uint8Array([0]));LedgerId.TESTNET=new LedgerId(new Uint8Array([1]));LedgerId.PREVIEWNET=new LedgerId(new Uint8Array([2]));LedgerId.LOCAL_NODE=new LedgerId(new Uint8Array([3]));class AccountInfo{constructor(e){this.accountId=e.accountId,this.contractAccountId=e.contractAccountId,this.isDeleted=e.isDeleted,this.proxyAccountId=e.proxyAccountId,this.proxyReceived=e.proxyReceived,this.key=e.key,this.balance=e.balance,this.sendRecordThreshold=e.sendRecordThreshold,this.receiveRecordThreshold=e.receiveRecordThreshold,this.isReceiverSignatureRequired=e.isReceiverSignatureRequired,this.expirationTime=e.expirationTime,this.autoRenewPeriod=e.autoRenewPeriod,this.liveHashes=e.liveHashes,this.tokenRelationships=e.tokenRelationships,this.accountMemo=e.accountMemo,this.ownedNfts=e.ownedNfts,this.maxAutomaticTokenAssociations=e.maxAutomaticTokenAssociations,this.aliasKey=e.aliasKey,this.ledgerId=e.ledgerId,this.hbarAllowances=e.hbarAllowances,this.tokenAllowances=e.tokenAllowances,this.nftAllowances=e.nftAllowances,this.ethereumNonce=e.ethereumNonce,this.stakingInfo=e.stakingInfo,Object.freeze(this)}static _fromProtobuf(e){let t=e.alias!=null&&e.alias.length>0?Key._fromProtobufKey(lib.proto.Key.decode(e.alias)):null;t instanceof PublicKey||(t=null);const o=AccountId._fromProtobuf(e.accountID);return new AccountInfo({accountId:o,contractAccountId:e.contractAccountID!=null?e.contractAccountID:null,isDeleted:e.deleted!=null?e.deleted:!1,key:Key._fromProtobufKey(e.key),balance:Hbar.fromTinybars(e.balance!=null?e.balance:0),sendRecordThreshold:Hbar.fromTinybars(e.generateSendRecordThreshold!=null?e.generateSendRecordThreshold:0),receiveRecordThreshold:Hbar.fromTinybars(e.generateReceiveRecordThreshold!=null?e.generateReceiveRecordThreshold:0),isReceiverSignatureRequired:e.receiverSigRequired!=null?e.receiverSigRequired:!1,expirationTime:Timestamp._fromProtobuf(e.expirationTime),autoRenewPeriod:e.autoRenewPeriod!=null?new Duration(e.autoRenewPeriod.seconds):new Duration(0),proxyAccountId:e.proxyAccountID!=null&&Long$1.fromValue(e.proxyAccountID.shardNum).toInt()!==0&&Long$1.fromValue(e.proxyAccountID.realmNum).toInt()!==0&&Long$1.fromValue(e.proxyAccountID.accountNum).toInt()!==0?AccountId._fromProtobuf(e.proxyAccountID):null,proxyReceived:Hbar.fromTinybars(e.proxyReceived!=null?e.proxyReceived:0),liveHashes:(e.liveHashes!=null?e.liveHashes:[]).map(c=>LiveHash._fromProtobuf(c)),tokenRelationships:TokenRelationshipMap._fromProtobuf(e.tokenRelationships!=null?e.tokenRelationships:[]),accountMemo:e.memo!=null?e.memo:"",ownedNfts:e.ownedNfts?e.ownedNfts:Long$1.ZERO,maxAutomaticTokenAssociations:e.maxAutomaticTokenAssociations?Long$1.fromNumber(e.maxAutomaticTokenAssociations):Long$1.ZERO,aliasKey:t,ledgerId:e.ledgerId!=null?LedgerId.fromBytes(e.ledgerId):null,hbarAllowances:[],tokenAllowances:[],nftAllowances:[],ethereumNonce:e.ethereumNonce!=null?e.ethereumNonce:null,stakingInfo:e.stakingInfo!=null?StakingInfo._fromProtobuf(e.stakingInfo):null})}_toProtobuf(){return{accountID:this.accountId._toProtobuf(),contractAccountID:this.contractAccountId,deleted:this.isDeleted,proxyAccountID:this.proxyAccountId!=null?this.proxyAccountId._toProtobuf():null,proxyReceived:this.proxyReceived.toTinybars(),key:this.key._toProtobufKey(),balance:this.balance.toTinybars(),generateSendRecordThreshold:this.sendRecordThreshold.toTinybars(),generateReceiveRecordThreshold:this.receiveRecordThreshold.toTinybars(),receiverSigRequired:this.isReceiverSignatureRequired,expirationTime:this.expirationTime._toProtobuf(),autoRenewPeriod:this.autoRenewPeriod._toProtobuf(),liveHashes:this.liveHashes.map(e=>e._toProtobuf()),tokenRelationships:this.tokenRelationships!=null?this.tokenRelationships._toProtobuf():null,memo:this.accountMemo,ownedNfts:this.ownedNfts,maxAutomaticTokenAssociations:this.maxAutomaticTokenAssociations.toInt(),alias:this.aliasKey!=null?lib.proto.Key.encode(this.aliasKey._toProtobufKey()).finish():null,ledgerId:this.ledgerId!=null?this.ledgerId.toBytes():null,ethereumNonce:this.ethereumNonce,stakingInfo:this.stakingInfo!=null?this.stakingInfo._toProtobuf():null}}static fromBytes(e){return AccountInfo._fromProtobuf(lib.proto.CryptoGetInfoResponse.AccountInfo.decode(e))}toBytes(){return lib.proto.CryptoGetInfoResponse.AccountInfo.encode(this._toProtobuf()).finish()}toString(){return JSON.stringify(this.toJSON())}toJSON(){return{balance:this.balance.toString(),accountId:this.accountId.toString(),contractAccountId:this.contractAccountId,isDeleted:this.isDeleted,proxyAccountId:this.proxyAccountId!=null?this.proxyAccountId.toString():null,proxyReceived:this.proxyReceived.toString(),key:this.key!=null?this.key.toString():null,sendRecordThreshold:this.sendRecordThreshold.toString(),receiveRecordThreshold:this.receiveRecordThreshold.toString(),isReceiverSignatureRequired:this.isReceiverSignatureRequired,expirationTime:this.expirationTime.toString(),autoRenewPeriod:this.autoRenewPeriod.toString(),accountMemo:this.accountMemo,ownedNfts:this.ownedNfts.toString(),maxAutomaticTokenAssociations:this.maxAutomaticTokenAssociations.toString(),aliasKey:this.aliasKey!=null?this.aliasKey.toString():null,ledgerId:this.ledgerId!=null?this.ledgerId.toString():null,ethereumNonce:this.ethereumNonce!=null?this.ethereumNonce.toString():null,stakingInfo:this.stakingInfo!=null?this.stakingInfo.toJSON():null}}}class AccountInfoQuery extends Query{constructor(e={}){super(),this._accountId=null,e.accountId!=null&&this.setAccountId(e.accountId)}static _fromProtobuf(e){const t=e.cryptoGetInfo;return new AccountInfoQuery({accountId:t.accountID!=null?AccountId._fromProtobuf(t.accountID):void 0})}get accountId(){return this._accountId}setAccountId(e){return this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._accountId!=null&&this._accountId.validateChecksum(e)}_execute(e,t){return e.crypto.getAccountInfo(t)}async getCost(e){return super.getCost(e)}_mapResponseHeader(e){return e.cryptoGetInfo.header}_mapResponse(e,t,o){const c=e.cryptoGetInfo;return Promise.resolve(AccountInfo._fromProtobuf(c.accountInfo))}_onMakeRequest(e){return{cryptoGetInfo:{header:e,accountID:this._accountId!=null?this._accountId._toProtobuf():null}}}_getLogId(){return`AccountInfoQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("cryptoGetInfo",AccountInfoQuery._fromProtobuf);class AccountRecordsQuery extends Query{constructor(e={}){super(),this._accountId=null,e.accountId!=null&&this.setAccountId(e.accountId)}static _fromProtobuf(e){const t=e.cryptoGetAccountRecords;return new AccountRecordsQuery({accountId:t.accountID!=null?AccountId._fromProtobuf(t.accountID):void 0})}get accountId(){return this._accountId}setAccountId(e){return this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._accountId!=null&&this._accountId.validateChecksum(e)}_execute(e,t){return e.crypto.getAccountRecords(t)}_mapResponseHeader(e){return e.cryptoGetAccountRecords.header}_mapResponse(e,t,o){const l=e.cryptoGetAccountRecords.records;return Promise.resolve(l.map(h=>TransactionRecord._fromProtobuf({transactionRecord:h})))}_onMakeRequest(e){return{cryptoGetAccountRecords:{header:e,accountID:this._accountId!=null?this._accountId._toProtobuf():null}}}_getLogId(){return`AccountRecordsQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("cryptoGetAccountRecords",AccountRecordsQuery._fromProtobuf);class ProxyStaker{constructor(e){this.accountId=e.accountId,this.amount=e.amount instanceof Hbar?e.amount:new Hbar(e.amount),Object.freeze(this)}static _fromProtobuf(e){return new ProxyStaker({accountId:AccountId._fromProtobuf(e.accountID),amount:Hbar.fromTinybars(e.amount!=null?e.amount:0)})}_toProtobuf(){return{accountID:this.accountId._toProtobuf(),amount:this.amount.toTinybars()}}}class AccountStakersQuery extends Query{constructor(e={}){super(),this._accountId=null,e.accountId!=null&&this.setAccountId(e.accountId)}static _fromProtobuf(e){const t=e.cryptoGetProxyStakers;return new AccountStakersQuery({accountId:t.accountID!=null?AccountId._fromProtobuf(t.accountID):void 0})}get accountId(){return this._accountId}setAccountId(e){return this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._accountId!=null&&this._accountId.validateChecksum(e)}_execute(e,t){return e.crypto.getStakersByAccountID(t)}_mapResponseHeader(e){return e.cryptoGetProxyStakers.header}_mapResponse(e){const o=e.cryptoGetProxyStakers.stakers;return Promise.resolve((o.proxyStaker!=null?o.proxyStaker:[]).map(c=>ProxyStaker._fromProtobuf(c)))}_onMakeRequest(e){return{cryptoGetProxyStakers:{header:e,accountID:this._accountId!=null?this._accountId._toProtobuf():null}}}_getLogId(){return`AccountStakersQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("cryptoGetProxyStakers",AccountStakersQuery._fromProtobuf);class AccountUpdateTransaction extends Transaction{constructor(e={}){super(),this._accountId=null,this._key=null,this._receiverSignatureRequired=!1,this._proxyAccountId=null,this._autoRenewPeriod=null,this._expirationTime=null,this._accountMemo=null,this._maxAutomaticTokenAssociations=null,this._aliasKey=null,this._stakedAccountId=null,this._stakedNodeId=null,this._declineStakingReward=null,e.accountId!=null&&this.setAccountId(e.accountId),e.key!=null&&this.setKey(e.key),e.receiverSignatureRequired!=null&&this.setReceiverSignatureRequired(e.receiverSignatureRequired),e.proxyAccountId!=null&&this.setProxyAccountId(e.proxyAccountId),e.autoRenewPeriod!=null&&this.setAutoRenewPeriod(e.autoRenewPeriod),e.expirationTime!=null&&this.setExpirationTime(e.expirationTime),e.accountMemo!=null&&this.setAccountMemo(e.accountMemo),e.maxAutomaticTokenAssociations!=null&&this.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations),e.stakedAccountId!=null&&this.setStakedAccountId(e.stakedAccountId),e.stakedNodeId!=null&&this.setStakedNodeId(e.stakedNodeId),e.declineStakingReward!=null&&this.setDeclineStakingReward(e.declineStakingReward)}static _fromProtobuf(e,t,o,c,l){const d=l[0].cryptoUpdateAccount;return Transaction._fromProtobufTransactions(new AccountUpdateTransaction({accountId:d.accountIDToUpdate!=null?AccountId._fromProtobuf(d.accountIDToUpdate):void 0,key:d.key!=null?Key._fromProtobufKey(d.key):void 0,receiverSignatureRequired:d.receiverSigRequired!=null?d.receiverSigRequired:void 0,proxyAccountId:d.proxyAccountID!=null?AccountId._fromProtobuf(d.proxyAccountID):void 0,autoRenewPeriod:d.autoRenewPeriod!=null&&d.autoRenewPeriod.seconds!=null?d.autoRenewPeriod.seconds:void 0,expirationTime:d.expirationTime!=null?Timestamp._fromProtobuf(d.expirationTime):void 0,accountMemo:d.memo!=null&&d.memo.value!=null?d.memo.value:void 0,maxAutomaticTokenAssociations:d.maxAutomaticTokenAssociations!=null&&d.maxAutomaticTokenAssociations.value!=null?Long$1.fromNumber(d.maxAutomaticTokenAssociations.value):void 0,stakedAccountId:d.stakedAccountId!=null?AccountId._fromProtobuf(d.stakedAccountId):void 0,stakedNodeId:d.stakedNodeId!=null?d.stakedNodeId:void 0,declineStakingReward:d.declineReward!=null&&!!d.declineReward}),e,t,o,c,l)}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}get key(){return this._key}setKey(e){return this._requireNotFrozen(),this._key=e,this}get receiverSignatureRequired(){return this._receiverSignatureRequired}setReceiverSignatureRequired(e){return this._requireNotFrozen(),this._receiverSignatureRequired=e,this}get proxyAccountId(){return this._proxyAccountId}setProxyAccountId(e){return this._requireNotFrozen(),this._proxyAccountId=e,this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof Duration?e:new Duration(e),this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof Date?Timestamp.fromDate(e):e,this}get accountMemo(){return this._accountMemo}setAccountMemo(e){return this._requireNotFrozen(),this._accountMemo=e,this}clearAccountMemo(){return this._requireNotFrozen(),this._accountMemo=null,this}get maxAutomaticTokenAssociations(){return this._maxAutomaticTokenAssociations}setMaxAutomaticTokenAssociations(e){return this._requireNotFrozen(),this._maxAutomaticTokenAssociations=typeof e=="number"?Long$1.fromNumber(e):e,this}get aliasKey(){return null}setAliasKey(e){return this}get stakedAccountId(){return this._stakedAccountId}setStakedAccountId(e){return this._requireNotFrozen(),this._stakedAccountId=typeof e=="string"?AccountId.fromString(e):e,this}clearStakedAccountId(){return this._requireNotFrozen(),this._stakedAccountId=new AccountId(0,0,0),this}get stakedNodeId(){return this._stakedNodeId}setStakedNodeId(e){return this._requireNotFrozen(),this._stakedNodeId=Long$1.fromValue(e),this}clearStakedNodeId(){return this._requireNotFrozen(),this._stakedNodeId=Long$1.fromNumber(-1),this}get declineStakingRewards(){return this._declineStakingReward}setDeclineStakingReward(e){return this._requireNotFrozen(),this._declineStakingReward=e,this}_validateChecksums(e){this._accountId!=null&&this._accountId.validateChecksum(e),this._proxyAccountId!=null&&this._proxyAccountId.validateChecksum(e)}_execute(e,t){return e.crypto.updateAccount(t)}_getTransactionDataCase(){return"cryptoUpdateAccount"}_makeTransactionData(){return{accountIDToUpdate:this._accountId!=null?this._accountId._toProtobuf():null,key:this._key!=null?this._key._toProtobufKey():null,expirationTime:this._expirationTime!=null?this._expirationTime._toProtobuf():null,proxyAccountID:this._proxyAccountId!=null?this._proxyAccountId._toProtobuf():null,autoRenewPeriod:this._autoRenewPeriod!=null?this._autoRenewPeriod._toProtobuf():null,receiverSigRequiredWrapper:this._receiverSignatureRequired==null?null:{value:this._receiverSignatureRequired},memo:this._accountMemo!=null?{value:this._accountMemo}:null,maxAutomaticTokenAssociations:this._maxAutomaticTokenAssociations!=null?{value:this._maxAutomaticTokenAssociations.toInt()}:null,stakedAccountId:this.stakedAccountId!=null?this.stakedAccountId._toProtobuf():null,stakedNodeId:this.stakedNodeId,declineReward:this.declineStakingRewards!=null?{value:this.declineStakingRewards}:null}}_getLogId(){return`AccountUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("cryptoUpdateAccount",AccountUpdateTransaction._fromProtobuf);class IPv4AddressPart{constructor(e={}){this._left=null,e.left!=null&&this.setLeft(e.left),this._right=null,e.right!=null&&this.setRight(e.right)}get left(){return this._left}setLeft(e){return this._left=e,this}get right(){return this._right}setRight(e){return this._right=e,this}toString(){return this._left!=null&&this._right!=null?`${this._left.toString()}.${this._right.toString()}`:""}}class IPv4Address{constructor(e={}){this._network=null,e.network!=null&&this.setNetwork(e.network),this._host=null,e.host!=null&&this.setHost(e.host)}get newtork(){return this._network}setNetwork(e){return this._network=e,this}get host(){return this._host}setHost(e){return this._host=e,this}static _fromProtobuf(e){return new IPv4Address({network:new IPv4AddressPart().setLeft(e[0]).setRight(e[1]),host:new IPv4AddressPart().setLeft(e[2]).setRight(e[3])})}_toProtobuf(){return Uint8Array.of(this._network!=null&&this._network._left!=null?this._network._left:0,this._network!=null&&this._network.right!=null?this._network.right:0,this._host!=null&&this._host.left!=null?this._host.left:0,this._host!=null&&this._host.right!=null?this._host.right:0)}toString(){return this._network!=null&&this._host!=null?`${this._network.toString()}.${this._host.toString()}`:""}}class EndPoint{constructor(e={}){this._address=null,e.address!=null&&this.setAddress(e.address),this._port=null,e.port!=null&&this.setPort(e.port)}get address(){return this.address}setAddress(e){return this._address=e,this}get port(){return this._port}setPort(e){return this._port=e,this}static _fromProtobuf(e){return new EndPoint({address:e.ipAddressV4!=null?IPv4Address._fromProtobuf(e.ipAddressV4):void 0,port:e.port!=null?e.port:void 0})}_toProtobuf(){return{ipAddressV4:this._address!=null?this._address._toProtobuf():null,port:this._port}}toString(){return`${this._address!=null?this._address.toString():""}:${this._port!=null?this._port.toString():""}`}toJSON(){return{address:this._address!=null?this._address.toString():null,port:this._port!=null?this._port.toString():null}}}class NodeAddress{constructor(e={}){this._publicKey=null,e.publicKey!=null&&this.setPublicKey(e.publicKey),this._nodeId=null,e.nodeId!=null&&this.setNodeId(e.nodeId),this._accountId=null,e.accountId!=null&&this.setAccountId(e.accountId),this._certHash=null,e.certHash!=null&&this.setCertHash(e.certHash),this._addresses=[],e.addresses!=null&&this.setAddresses(e.addresses),this._description=null,e.description!=null&&this.setDescription(e.description),this._stake=null,e.stake!=null&&this.setStake(e.stake)}get publicKey(){return this._publicKey}setPublicKey(e){return this._publicKey=e,this}get nodeId(){return this._nodeId}setNodeId(e){return this._nodeId=e,this}get accountId(){return this._accountId}setAccountId(e){return this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}get certHash(){return this._certHash}setCertHash(e){return this._certHash=e,this}get addresses(){return this._addresses}setAddresses(e){return this._addresses=e,this}get description(){return this._description}setDescription(e){return this._description=e,this}get stake(){return this._stake}setStake(e){return this._stake=e,this}static _fromProtobuf(e){return new NodeAddress({publicKey:e.RSA_PubKey!=null?e.RSA_PubKey:void 0,nodeId:e.nodeId!=null?e.nodeId:void 0,accountId:e.nodeAccountId!=null?AccountId._fromProtobuf(e.nodeAccountId):void 0,certHash:e.nodeCertHash!=null?e.nodeCertHash:void 0,addresses:e.serviceEndpoint!=null?e.serviceEndpoint.map(t=>EndPoint._fromProtobuf(t)):void 0,description:e.description!=null?e.description:void 0,stake:e.stake!=null?e.stake:void 0})}_toProtobuf(){return{RSA_PubKey:this._publicKey,nodeId:this._nodeId,nodeAccountId:this._accountId!=null?this._accountId._toProtobuf():null,nodeCertHash:this._certHash,serviceEndpoint:this._addresses.map(e=>e._toProtobuf()),description:this._description,stake:this._stake}}toString(){return JSON.stringify(this.toJSON())}toJSON(){return{publicKey:this._publicKey,nodeId:this._nodeId!=null?this._nodeId.toString():null,accountId:this._accountId!=null?this._accountId.toString():null,certHash:this._certHash!=null?decode(this._certHash):null,addresses:this._addresses.map(e=>e.toJSON()),description:this._description,stake:this._stake!=null?this._stake.toString():null}}}class NodeAddressBook{constructor(e={}){this._nodeAddresses=[],e.nodeAddresses!=null&&this.setNodeAddresses(e.nodeAddresses)}get nodeAddresses(){return this._nodeAddresses}setNodeAddresses(e){return this._nodeAddresses=e,this}static fromBytes(e){return NodeAddressBook._fromProtobuf(lib.proto.NodeAddressBook.decode(e))}static _fromProtobuf(e){return new NodeAddressBook({nodeAddresses:e.nodeAddress!=null?e.nodeAddress.map(t=>NodeAddress._fromProtobuf(t)):void 0})}_toProtobuf(){return{nodeAddress:this._nodeAddresses.map(e=>e._toProtobuf())}}toString(){return JSON.stringify(this.toJSON())}toJSON(){return{nodeAddresses:this._nodeAddresses.map(e=>e.toJSON())}}toBytes(){return lib.proto.NodeAddressBook.encode(this._toProtobuf()).finish()}}class AddressBookQuery extends Query{constructor(e={}){super(),this._fileId=null,e.fileId!=null&&this.setFileId(e.fileId),this._limit=null,e.limit!=null&&this.setLimit(e.limit),this._retryHandler=t=>{if(t!=null){if(t instanceof Error)return!0;switch(t.code){case 13:return RST_STREAM.test(t.details.toString());case 5:case 8:case 14:case 17:return!0;default:return!1}}return!1},this._addresses=[],this._attempt=0}get fileId(){return this._fileId}setFileId(e){return this._fileId=typeof e=="string"?FileId.fromString(e):e.clone(),this}get limit(){return this._limit}setLimit(e){return this._limit=e,this}setMaxAttempts(e){return this._maxAttempts=e,this}setMaxBackoff(e){return this._maxBackoff=e,this}execute(e,t){return new Promise((o,c)=>{this._makeServerStreamRequest(e,o,c,t)})}_makeServerStreamRequest(e,t,o,c){const l=lib.com.hedera.mirror.api.proto.AddressBookQuery.encode({fileId:this._fileId!=null?this._fileId._toProtobuf():null,limit:this._limit}).finish();e._mirrorNetwork.getNextMirrorNode().getChannel().makeServerStreamRequest("NetworkService","getNodes",l,h=>{this._addresses.push(NodeAddress._fromProtobuf(lib.proto.NodeAddress.decode(h))),this._limit!=null&&this._limit>0&&(this._limit=this._limit-1)},h=>{const d=h instanceof Error?h.message:h.details;if(this._attempt<this._maxAttempts&&!e.isClientShutDown&&this._retryHandler(h)){const g=Math.min(250*2**this._attempt,this._maxBackoff);this._attempt>=this._maxAttempts&&console.warn(`Error getting nodes from mirror for file ${this._fileId!=null?this._fileId.toString():"UNKNOWN"} during attempt ${this._attempt}. Waiting ${g} ms before next attempt: ${d}`),this._logger&&this._logger.debug(`Error getting nodes from mirror for file ${this._fileId!=null?this._fileId.toString():"UNKNOWN"} during attempt ${this._attempt}. Waiting ${g} ms before next attempt: ${d}`),this._attempt+=1,setTimeout(()=>{this._makeServerStreamRequest(e,t,o,c)},g)}else o(new Error("failed to query address book"))},()=>{t(new NodeAddressBook({nodeAddresses:this._addresses}))})}}CACHE$1.setAddressBookQueryConstructor(()=>new AddressBookQuery);class ContractByteCodeQuery extends Query{constructor(e={}){super(),this._contractId=null,e.contractId!=null&&this.setContractId(e.contractId)}static _fromProtobuf(e){const t=e.contractGetBytecode;return new ContractByteCodeQuery({contractId:t.contractID!=null?ContractId._fromProtobuf(t.contractID):void 0})}get contractId(){return this._contractId}setContractId(e){return this._contractId=typeof e=="string"?ContractId.fromString(e):e.clone(),this}_validateChecksums(e){this._contractId!=null&&this._contractId.validateChecksum(e)}_execute(e,t){return e.smartContract.contractGetBytecode(t)}_mapResponseHeader(e){return e.contractGetBytecodeResponse.header}_mapResponse(e){const t=e.contractGetBytecodeResponse;return Promise.resolve(t.bytecode!=null?t.bytecode:new Uint8Array)}_onMakeRequest(e){return{contractGetBytecode:{header:e,contractID:this._contractId!=null?this._contractId._toProtobuf():null}}}_getLogId(){return`ContractByteCodeQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("contractGetBytecode",ContractByteCodeQuery._fromProtobuf);const HEX_CHARS="0123456789abcdef".split(""),KECCAK_PADDING=[1,256,65536,16777216],SHIFT=[0,8,16,24],RC=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Keccak=n=>({blocks:[],reset:!0,block:0,start:0,blockCount:1600-(n<<1)>>5,outputBlocks:n>>5,s:(e=>[].concat(e,e,e,e,e))([0,0,0,0,0,0,0,0,0,0])}),update=(n,e)=>{for(var t=e.length,o=n.blocks,c=n.blockCount<<2,l=n.blockCount,h=n.outputBlocks,d=n.s,g=0,m,v;g<t;){if(n.reset)for(n.reset=!1,o[0]=n.block,m=1;m<l+1;++m)o[m]=0;if(typeof e!="string")for(m=n.start;g<t&&m<c;++g)o[m>>2]|=e[g]<<SHIFT[m++&3];else for(m=n.start;g<t&&m<c;++g)v=e.charCodeAt(g),v<128?o[m>>2]|=v<<SHIFT[m++&3]:v<2048?(o[m>>2]|=(192|v>>6)<<SHIFT[m++&3],o[m>>2]|=(128|v&63)<<SHIFT[m++&3]):v<55296||v>=57344?(o[m>>2]|=(224|v>>12)<<SHIFT[m++&3],o[m>>2]|=(128|v>>6&63)<<SHIFT[m++&3],o[m>>2]|=(128|v&63)<<SHIFT[m++&3]):(v=65536+((v&1023)<<10|e.charCodeAt(++g)&1023),o[m>>2]|=(240|v>>18)<<SHIFT[m++&3],o[m>>2]|=(128|v>>12&63)<<SHIFT[m++&3],o[m>>2]|=(128|v>>6&63)<<SHIFT[m++&3],o[m>>2]|=(128|v&63)<<SHIFT[m++&3]);if(n.lastByteIndex=m,m>=c){for(n.start=m-c,n.block=o[l],m=0;m<l;++m)d[m]^=o[m];f(d),n.reset=!0}else n.start=m}if(m=n.lastByteIndex,o[m>>2]|=KECCAK_PADDING[m&3],n.lastByteIndex===c)for(o[0]=o[l],m=1;m<l+1;++m)o[m]=0;for(o[l-1]|=2147483648,m=0;m<l;++m)d[m]^=o[m];f(d);var _="",p,a=0;for(m=0;a<h;){for(m=0;m<l&&a<h;++m,++a)p=d[m],_+=HEX_CHARS[p>>4&15]+HEX_CHARS[p&15]+HEX_CHARS[p>>12&15]+HEX_CHARS[p>>8&15]+HEX_CHARS[p>>20&15]+HEX_CHARS[p>>16&15]+HEX_CHARS[p>>28&15]+HEX_CHARS[p>>24&15];a%l===0&&(f(d),m=0)}return"0x"+_},f=n=>{var e,t,o,c,l,h,d,g,m,v,_,p,a,u,y,b,w,T,B,H,J,W,fe,re,se,ae,ee,P,C,E,k,F,j,Q,G,U,$,O,oe,ue,q,pe,be,ve,we,Ce,Re,Se,$e,De,Ne,pt,xt,Xe,yt,gt,ze,et,at,Ye,lt,dt,le;for(o=0;o<48;o+=2)c=n[0]^n[10]^n[20]^n[30]^n[40],l=n[1]^n[11]^n[21]^n[31]^n[41],h=n[2]^n[12]^n[22]^n[32]^n[42],d=n[3]^n[13]^n[23]^n[33]^n[43],g=n[4]^n[14]^n[24]^n[34]^n[44],m=n[5]^n[15]^n[25]^n[35]^n[45],v=n[6]^n[16]^n[26]^n[36]^n[46],_=n[7]^n[17]^n[27]^n[37]^n[47],p=n[8]^n[18]^n[28]^n[38]^n[48],a=n[9]^n[19]^n[29]^n[39]^n[49],e=p^(h<<1|d>>>31),t=a^(d<<1|h>>>31),n[0]^=e,n[1]^=t,n[10]^=e,n[11]^=t,n[20]^=e,n[21]^=t,n[30]^=e,n[31]^=t,n[40]^=e,n[41]^=t,e=c^(g<<1|m>>>31),t=l^(m<<1|g>>>31),n[2]^=e,n[3]^=t,n[12]^=e,n[13]^=t,n[22]^=e,n[23]^=t,n[32]^=e,n[33]^=t,n[42]^=e,n[43]^=t,e=h^(v<<1|_>>>31),t=d^(_<<1|v>>>31),n[4]^=e,n[5]^=t,n[14]^=e,n[15]^=t,n[24]^=e,n[25]^=t,n[34]^=e,n[35]^=t,n[44]^=e,n[45]^=t,e=g^(p<<1|a>>>31),t=m^(a<<1|p>>>31),n[6]^=e,n[7]^=t,n[16]^=e,n[17]^=t,n[26]^=e,n[27]^=t,n[36]^=e,n[37]^=t,n[46]^=e,n[47]^=t,e=v^(c<<1|l>>>31),t=_^(l<<1|c>>>31),n[8]^=e,n[9]^=t,n[18]^=e,n[19]^=t,n[28]^=e,n[29]^=t,n[38]^=e,n[39]^=t,n[48]^=e,n[49]^=t,u=n[0],y=n[1],Ce=n[11]<<4|n[10]>>>28,Re=n[10]<<4|n[11]>>>28,P=n[20]<<3|n[21]>>>29,C=n[21]<<3|n[20]>>>29,Ye=n[31]<<9|n[30]>>>23,lt=n[30]<<9|n[31]>>>23,pe=n[40]<<18|n[41]>>>14,be=n[41]<<18|n[40]>>>14,Q=n[2]<<1|n[3]>>>31,G=n[3]<<1|n[2]>>>31,b=n[13]<<12|n[12]>>>20,w=n[12]<<12|n[13]>>>20,Se=n[22]<<10|n[23]>>>22,$e=n[23]<<10|n[22]>>>22,E=n[33]<<13|n[32]>>>19,k=n[32]<<13|n[33]>>>19,dt=n[42]<<2|n[43]>>>30,le=n[43]<<2|n[42]>>>30,Xe=n[5]<<30|n[4]>>>2,yt=n[4]<<30|n[5]>>>2,U=n[14]<<6|n[15]>>>26,$=n[15]<<6|n[14]>>>26,T=n[25]<<11|n[24]>>>21,B=n[24]<<11|n[25]>>>21,De=n[34]<<15|n[35]>>>17,Ne=n[35]<<15|n[34]>>>17,F=n[45]<<29|n[44]>>>3,j=n[44]<<29|n[45]>>>3,re=n[6]<<28|n[7]>>>4,se=n[7]<<28|n[6]>>>4,gt=n[17]<<23|n[16]>>>9,ze=n[16]<<23|n[17]>>>9,O=n[26]<<25|n[27]>>>7,oe=n[27]<<25|n[26]>>>7,H=n[36]<<21|n[37]>>>11,J=n[37]<<21|n[36]>>>11,pt=n[47]<<24|n[46]>>>8,xt=n[46]<<24|n[47]>>>8,ve=n[8]<<27|n[9]>>>5,we=n[9]<<27|n[8]>>>5,ae=n[18]<<20|n[19]>>>12,ee=n[19]<<20|n[18]>>>12,et=n[29]<<7|n[28]>>>25,at=n[28]<<7|n[29]>>>25,ue=n[38]<<8|n[39]>>>24,q=n[39]<<8|n[38]>>>24,W=n[48]<<14|n[49]>>>18,fe=n[49]<<14|n[48]>>>18,n[0]=u^~b&T,n[1]=y^~w&B,n[10]=re^~ae&P,n[11]=se^~ee&C,n[20]=Q^~U&O,n[21]=G^~$&oe,n[30]=ve^~Ce&Se,n[31]=we^~Re&$e,n[40]=Xe^~gt&et,n[41]=yt^~ze&at,n[2]=b^~T&H,n[3]=w^~B&J,n[12]=ae^~P&E,n[13]=ee^~C&k,n[22]=U^~O&ue,n[23]=$^~oe&q,n[32]=Ce^~Se&De,n[33]=Re^~$e&Ne,n[42]=gt^~et&Ye,n[43]=ze^~at&lt,n[4]=T^~H&W,n[5]=B^~J&fe,n[14]=P^~E&F,n[15]=C^~k&j,n[24]=O^~ue&pe,n[25]=oe^~q&be,n[34]=Se^~De&pt,n[35]=$e^~Ne&xt,n[44]=et^~Ye&dt,n[45]=at^~lt&le,n[6]=H^~W&u,n[7]=J^~fe&y,n[16]=E^~F&re,n[17]=k^~j&se,n[26]=ue^~pe&Q,n[27]=q^~be&G,n[36]=De^~pt&ve,n[37]=Ne^~xt&we,n[46]=Ye^~dt&Xe,n[47]=lt^~le&yt,n[8]=W^~u&b,n[9]=fe^~y&w,n[18]=F^~re&ae,n[19]=j^~se&ee,n[28]=pe^~Q&U,n[29]=be^~G&$,n[38]=pt^~ve&Ce,n[39]=xt^~we&Re,n[48]=dt^~Xe&gt,n[49]=le^~yt&ze,n[0]^=RC[o],n[1]^=RC[o+1]},keccak=n=>e=>{var t;if(e.slice(0,2)==="0x"){t=[];for(var o=2,c=e.length;o<c;o+=2)t.push(parseInt(e.slice(o,o+2),16))}else t=e;return update(Keccak(n),t)},keccak256=keccak(256),ArgumentType={uint8:0,int8:1,uint16:2,int16:3,uint24:4,int24:5,uint32:6,int32:7,uint40:8,int40:9,uint48:10,int48:11,uint56:12,int56:13,uint64:14,int64:15,uint72:16,int72:17,uint80:18,int80:19,uint88:20,int88:21,uint96:22,int96:23,uint104:24,int104:25,uint112:26,int112:27,uint120:28,int120:29,uint128:30,int128:31,uint136:32,int136:33,uint144:34,int144:35,uint152:36,int152:37,uint160:38,int160:39,uint168:40,int168:41,uint176:42,int176:43,uint184:44,int184:45,uint192:46,int192:47,uint200:48,int200:49,uint208:50,int208:51,uint216:52,int216:53,uint224:54,int224:55,uint232:56,int232:57,uint240:58,int240:59,uint248:60,int248:61,uint256:62,int256:63,string:64,bool:65,bytes:66,bytes32:67,address:68,func:69};class ContractFunctionSelector{constructor(e){this.name=null,this._params="",this._paramTypes=[],e!=null&&(this._name=e)}addString(){return this._addParam({ty:ArgumentType.string,array:!1})}addStringArray(){return this._addParam({ty:ArgumentType.string,array:!0})}addBytes(){return this._addParam({ty:ArgumentType.bytes,array:!1})}addBytes32(){return this._addParam({ty:ArgumentType.bytes32,array:!1})}addBytesArray(){return this._addParam({ty:ArgumentType.bytes,array:!0})}addBytes32Array(){return this._addParam({ty:ArgumentType.bytes32,array:!0})}addInt8(){return this._addParam({ty:ArgumentType.int8,array:!1})}addUint8(){return this._addParam({ty:ArgumentType.uint8,array:!1})}addInt16(){return this._addParam({ty:ArgumentType.int16,array:!1})}addUint16(){return this._addParam({ty:ArgumentType.uint16,array:!1})}addInt24(){return this._addParam({ty:ArgumentType.int24,array:!1})}addUint24(){return this._addParam({ty:ArgumentType.uint24,array:!1})}addInt32(){return this._addParam({ty:ArgumentType.int32,array:!1})}addUint32(){return this._addParam({ty:ArgumentType.uint32,array:!1})}addInt40(){return this._addParam({ty:ArgumentType.int40,array:!1})}addUint40(){return this._addParam({ty:ArgumentType.uint40,array:!1})}addInt48(){return this._addParam({ty:ArgumentType.int48,array:!1})}addUint48(){return this._addParam({ty:ArgumentType.uint48,array:!1})}addInt56(){return this._addParam({ty:ArgumentType.int56,array:!1})}addUint56(){return this._addParam({ty:ArgumentType.uint56,array:!1})}addInt64(){return this._addParam({ty:ArgumentType.int64,array:!1})}addUint64(){return this._addParam({ty:ArgumentType.uint64,array:!1})}addInt72(){return this._addParam({ty:ArgumentType.int72,array:!1})}addUint72(){return this._addParam({ty:ArgumentType.uint72,array:!1})}addInt80(){return this._addParam({ty:ArgumentType.int80,array:!1})}addUint80(){return this._addParam({ty:ArgumentType.uint80,array:!1})}addInt88(){return this._addParam({ty:ArgumentType.int88,array:!1})}addUint88(){return this._addParam({ty:ArgumentType.uint88,array:!1})}addInt96(){return this._addParam({ty:ArgumentType.int96,array:!1})}addUint96(){return this._addParam({ty:ArgumentType.uint96,array:!1})}addInt104(){return this._addParam({ty:ArgumentType.int104,array:!1})}addUint104(){return this._addParam({ty:ArgumentType.uint104,array:!1})}addInt112(){return this._addParam({ty:ArgumentType.int112,array:!1})}addUint112(){return this._addParam({ty:ArgumentType.uint112,array:!1})}addInt120(){return this._addParam({ty:ArgumentType.int120,array:!1})}addUint120(){return this._addParam({ty:ArgumentType.uint120,array:!1})}addInt128(){return this._addParam({ty:ArgumentType.int128,array:!1})}addUint128(){return this._addParam({ty:ArgumentType.uint128,array:!1})}addInt136(){return this._addParam({ty:ArgumentType.int136,array:!1})}addUint136(){return this._addParam({ty:ArgumentType.uint136,array:!1})}addInt144(){return this._addParam({ty:ArgumentType.int144,array:!1})}addUint144(){return this._addParam({ty:ArgumentType.uint144,array:!1})}addInt152(){return this._addParam({ty:ArgumentType.int152,array:!1})}addUint152(){return this._addParam({ty:ArgumentType.uint152,array:!1})}addInt160(){return this._addParam({ty:ArgumentType.int160,array:!1})}addUint160(){return this._addParam({ty:ArgumentType.uint160,array:!1})}addInt168(){return this._addParam({ty:ArgumentType.int168,array:!1})}addUint168(){return this._addParam({ty:ArgumentType.uint168,array:!1})}addInt176(){return this._addParam({ty:ArgumentType.int176,array:!1})}addUint176(){return this._addParam({ty:ArgumentType.uint176,array:!1})}addInt184(){return this._addParam({ty:ArgumentType.int184,array:!1})}addUint184(){return this._addParam({ty:ArgumentType.uint184,array:!1})}addInt192(){return this._addParam({ty:ArgumentType.int192,array:!1})}addUint192(){return this._addParam({ty:ArgumentType.uint192,array:!1})}addInt200(){return this._addParam({ty:ArgumentType.int200,array:!1})}addUint200(){return this._addParam({ty:ArgumentType.uint200,array:!1})}addInt208(){return this._addParam({ty:ArgumentType.int208,array:!1})}addUint208(){return this._addParam({ty:ArgumentType.uint208,array:!1})}addInt216(){return this._addParam({ty:ArgumentType.int216,array:!1})}addUint216(){return this._addParam({ty:ArgumentType.uint216,array:!1})}addInt224(){return this._addParam({ty:ArgumentType.int224,array:!1})}addUint224(){return this._addParam({ty:ArgumentType.uint224,array:!1})}addInt232(){return this._addParam({ty:ArgumentType.int232,array:!1})}addUint232(){return this._addParam({ty:ArgumentType.uint232,array:!1})}addInt240(){return this._addParam({ty:ArgumentType.int240,array:!1})}addUint240(){return this._addParam({ty:ArgumentType.uint240,array:!1})}addInt248(){return this._addParam({ty:ArgumentType.int248,array:!1})}addUint248(){return this._addParam({ty:ArgumentType.uint248,array:!1})}addInt256(){return this._addParam({ty:ArgumentType.int256,array:!1})}addUint256(){return this._addParam({ty:ArgumentType.uint256,array:!1})}addInt8Array(){return this._addParam({ty:ArgumentType.int8,array:!0})}addUint8Array(){return this._addParam({ty:ArgumentType.uint8,array:!0})}addInt16Array(){return this._addParam({ty:ArgumentType.int16,array:!0})}addUint16Array(){return this._addParam({ty:ArgumentType.uint16,array:!0})}addInt24Array(){return this._addParam({ty:ArgumentType.int24,array:!0})}addUint24Array(){return this._addParam({ty:ArgumentType.uint24,array:!0})}addInt32Array(){return this._addParam({ty:ArgumentType.int32,array:!0})}addUint32Array(){return this._addParam({ty:ArgumentType.uint32,array:!0})}addInt40Array(){return this._addParam({ty:ArgumentType.int40,array:!0})}addUint40Array(){return this._addParam({ty:ArgumentType.uint40,array:!0})}addInt48Array(){return this._addParam({ty:ArgumentType.int48,array:!0})}addUint48Array(){return this._addParam({ty:ArgumentType.uint48,array:!0})}addInt56Array(){return this._addParam({ty:ArgumentType.int56,array:!0})}addUint56Array(){return this._addParam({ty:ArgumentType.uint56,array:!0})}addInt64Array(){return this._addParam({ty:ArgumentType.int64,array:!0})}addUint64Array(){return this._addParam({ty:ArgumentType.uint64,array:!0})}addInt72Array(){return this._addParam({ty:ArgumentType.int72,array:!0})}addUint72Array(){return this._addParam({ty:ArgumentType.uint72,array:!0})}addInt80Array(){return this._addParam({ty:ArgumentType.int80,array:!0})}addUint80Array(){return this._addParam({ty:ArgumentType.uint80,array:!0})}addInt88Array(){return this._addParam({ty:ArgumentType.int88,array:!0})}addUint88Array(){return this._addParam({ty:ArgumentType.uint88,array:!0})}addInt96Array(){return this._addParam({ty:ArgumentType.int96,array:!0})}addUint96Array(){return this._addParam({ty:ArgumentType.uint96,array:!0})}addInt104Array(){return this._addParam({ty:ArgumentType.int104,array:!0})}addUint104Array(){return this._addParam({ty:ArgumentType.uint104,array:!0})}addInt112Array(){return this._addParam({ty:ArgumentType.int112,array:!0})}addUint112Array(){return this._addParam({ty:ArgumentType.uint112,array:!0})}addInt120Array(){return this._addParam({ty:ArgumentType.int120,array:!0})}addUint120Array(){return this._addParam({ty:ArgumentType.uint120,array:!0})}addInt128Array(){return this._addParam({ty:ArgumentType.int128,array:!0})}addUint128Array(){return this._addParam({ty:ArgumentType.uint128,array:!0})}addInt136Array(){return this._addParam({ty:ArgumentType.int136,array:!0})}addUint136Array(){return this._addParam({ty:ArgumentType.uint136,array:!0})}addInt144Array(){return this._addParam({ty:ArgumentType.int144,array:!0})}addUint144Array(){return this._addParam({ty:ArgumentType.uint144,array:!0})}addInt152Array(){return this._addParam({ty:ArgumentType.int152,array:!0})}addUint152Array(){return this._addParam({ty:ArgumentType.uint152,array:!0})}addInt160Array(){return this._addParam({ty:ArgumentType.int160,array:!0})}addUint160Array(){return this._addParam({ty:ArgumentType.uint160,array:!0})}addInt168Array(){return this._addParam({ty:ArgumentType.int168,array:!0})}addUint168Array(){return this._addParam({ty:ArgumentType.uint168,array:!0})}addInt176Array(){return this._addParam({ty:ArgumentType.int176,array:!0})}addUint176Array(){return this._addParam({ty:ArgumentType.uint176,array:!0})}addInt184Array(){return this._addParam({ty:ArgumentType.int184,array:!0})}addUint184Array(){return this._addParam({ty:ArgumentType.uint184,array:!0})}addInt192Array(){return this._addParam({ty:ArgumentType.int192,array:!0})}addUint192Array(){return this._addParam({ty:ArgumentType.uint192,array:!0})}addInt200Array(){return this._addParam({ty:ArgumentType.int200,array:!0})}addUint200Array(){return this._addParam({ty:ArgumentType.uint200,array:!0})}addInt208Array(){return this._addParam({ty:ArgumentType.int208,array:!0})}addUint208Array(){return this._addParam({ty:ArgumentType.uint208,array:!0})}addInt216Array(){return this._addParam({ty:ArgumentType.int216,array:!0})}addUint216Array(){return this._addParam({ty:ArgumentType.uint216,array:!0})}addInt224Array(){return this._addParam({ty:ArgumentType.int224,array:!0})}addUint224Array(){return this._addParam({ty:ArgumentType.uint224,array:!0})}addInt232Array(){return this._addParam({ty:ArgumentType.int232,array:!0})}addUint232Array(){return this._addParam({ty:ArgumentType.uint232,array:!0})}addInt240Array(){return this._addParam({ty:ArgumentType.int240,array:!0})}addUint240Array(){return this._addParam({ty:ArgumentType.uint240,array:!0})}addInt248Array(){return this._addParam({ty:ArgumentType.int248,array:!0})}addUint248Array(){return this._addParam({ty:ArgumentType.uint248,array:!0})}addInt256Array(){return this._addParam({ty:ArgumentType.int256,array:!0})}addUint256Array(){return this._addParam({ty:ArgumentType.uint256,array:!0})}addBool(){return this._addParam({ty:ArgumentType.bool,array:!1})}addAddress(){return this._addParam({ty:ArgumentType.address,array:!1})}addAddressArray(){return this._addParam({ty:ArgumentType.address,array:!0})}addFunction(){return this._addParam({ty:ArgumentType.func,array:!1})}_addParam(e){return this._paramTypes.length>0&&(this._params+=","),this._params+=solidityTypeToString(e),this._paramTypes.push(e),this}_build(e){if(e!=null)this._name=e;else if(this._name==null)throw new Error("`name` required for ContractFunctionSelector");const t=encode$3(encode(this.toString()));return decode$5(keccak256(`0x${t}`)).slice(0,4)}toString(){return`${this._name!=null?this._name.toString():""}(${this._params})`}}function solidityTypeToString(n){let e="";switch(n.ty){case ArgumentType.uint8:e="uint8";break;case ArgumentType.int8:e="int8";break;case ArgumentType.uint16:e="uint16";break;case ArgumentType.int16:e="int16";break;case ArgumentType.uint24:e="uint24";break;case ArgumentType.int24:e="int24";break;case ArgumentType.uint32:e="uint32";break;case ArgumentType.int32:e="int32";break;case ArgumentType.uint40:e="uint40";break;case ArgumentType.int40:e="int40";break;case ArgumentType.uint48:e="uint48";break;case ArgumentType.int48:e="int48";break;case ArgumentType.uint56:e="uint56";break;case ArgumentType.int56:e="int56";break;case ArgumentType.uint64:e="uint64";break;case ArgumentType.int64:e="int64";break;case ArgumentType.uint72:e="uint72";break;case ArgumentType.int72:e="int72";break;case ArgumentType.uint80:e="uint80";break;case ArgumentType.int80:e="int80";break;case ArgumentType.uint88:e="uint88";break;case ArgumentType.int88:e="int88";break;case ArgumentType.uint96:e="uint96";break;case ArgumentType.int96:e="int96";break;case ArgumentType.uint104:e="uint104";break;case ArgumentType.int104:e="int104";break;case ArgumentType.uint112:e="uint112";break;case ArgumentType.int112:e="int112";break;case ArgumentType.uint120:e="uint120";break;case ArgumentType.int120:e="int120";break;case ArgumentType.uint128:e="uint128";break;case ArgumentType.int128:e="int128";break;case ArgumentType.uint136:e="uint136";break;case ArgumentType.int136:e="int136";break;case ArgumentType.uint144:e="uint144";break;case ArgumentType.int144:e="int144";break;case ArgumentType.uint152:e="uint152";break;case ArgumentType.int152:e="int152";break;case ArgumentType.uint160:e="uint160";break;case ArgumentType.int160:e="int160";break;case ArgumentType.uint168:e="uint168";break;case ArgumentType.int168:e="int168";break;case ArgumentType.uint176:e="uint176";break;case ArgumentType.int176:e="int176";break;case ArgumentType.uint184:e="uint184";break;case ArgumentType.int184:e="int184";break;case ArgumentType.uint192:e="uint192";break;case ArgumentType.int192:e="int192";break;case ArgumentType.uint200:e="uint200";break;case ArgumentType.int200:e="int200";break;case ArgumentType.uint208:e="uint208";break;case ArgumentType.int208:e="int208";break;case ArgumentType.uint216:e="uint216";break;case ArgumentType.int216:e="int216";break;case ArgumentType.uint224:e="uint224";break;case ArgumentType.int224:e="int224";break;case ArgumentType.uint232:e="uint232";break;case ArgumentType.int232:e="int232";break;case ArgumentType.uint240:e="uint240";break;case ArgumentType.int240:e="int240";break;case ArgumentType.uint248:e="uint248";break;case ArgumentType.int248:e="int248";break;case ArgumentType.uint256:e="uint256";break;case ArgumentType.int256:e="int256";break;case ArgumentType.string:e="string";break;case ArgumentType.bool:e="bool";break;case ArgumentType.bytes:e="bytes";break;case ArgumentType.bytes32:e="bytes32";break;case ArgumentType.address:e="address";break;case ArgumentType.func:e="function";break;default:e="";break}return n.array&&(e+="[]"),e}class ContractFunctionParameters{constructor(){this._selector=new ContractFunctionSelector,this._arguments=[]}addString(e){return this._selector.addString(),this._addParam(e,!0)}addStringArray(e){return this._selector.addStringArray(),this._addParam(e,!0)}addBytes(e){return this._selector.addBytes(),this._addParam(e,!0)}addBytes32(e){if(e.length!==32)throw new Error(`addBytes32 expected array to be of length 32, but received ${e.length}`);return this._selector.addBytes32(),this._addParam(e,!1)}addBytesArray(e){return this._selector.addBytesArray(),this._addParam(e,!0)}addBytes32Array(e){for(const[t,o]of e.entries())if(o.length!==32)throw new Error(`addBytes32 expected array to be of length 32, but received ${o.length}`);return this._selector.addBytes32Array(),this._addParam(e,!0)}addBool(e){return this._selector.addBool(),this._addParam(e,!1)}addInt8(e){return this._selector.addInt8(),this._addParam(convertToBigNumber(e),!1)}addUint8(e){return this._selector.addUint8(),this._addParam(convertToBigNumber(e),!1)}addInt16(e){return this._selector.addInt16(),this._addParam(convertToBigNumber(e),!1)}addUint16(e){return this._selector.addUint16(),this._addParam(convertToBigNumber(e),!1)}addInt24(e){return this._selector.addInt24(),this._addParam(convertToBigNumber(e),!1)}addUint24(e){return this._selector.addUint24(),this._addParam(convertToBigNumber(e),!1)}addInt32(e){return this._selector.addInt32(),this._addParam(convertToBigNumber(e),!1)}addUint32(e){return this._selector.addUint32(),this._addParam(convertToBigNumber(e),!1)}addInt40(e){return this._selector.addInt40(),this._addParam(convertToBigNumber(e),!1)}addUint40(e){return this._selector.addUint40(),this._addParam(convertToBigNumber(e),!1)}addInt48(e){return this._selector.addInt48(),this._addParam(convertToBigNumber(e),!1)}addUint48(e){return this._selector.addUint48(),this._addParam(convertToBigNumber(e),!1)}addInt56(e){return this._selector.addInt56(),this._addParam(convertToBigNumber(e),!1)}addUint56(e){return this._selector.addUint56(),this._addParam(convertToBigNumber(e),!1)}addInt64(e){return this._selector.addInt64(),this._addParam(convertToBigNumber(e),!1)}addUint64(e){return this._selector.addUint64(),this._addParam(convertToBigNumber(e),!1)}addInt72(e){return this._selector.addInt72(),this._addParam(convertToBigNumber(e),!1)}addUint72(e){return this._selector.addUint72(),this._addParam(convertToBigNumber(e),!1)}addInt80(e){return this._selector.addInt80(),this._addParam(convertToBigNumber(e),!1)}addUint80(e){return this._selector.addUint80(),this._addParam(convertToBigNumber(e),!1)}addInt88(e){return this._selector.addInt88(),this._addParam(convertToBigNumber(e),!1)}addUint88(e){return this._selector.addUint88(),this._addParam(convertToBigNumber(e),!1)}addInt96(e){return this._selector.addInt96(),this._addParam(convertToBigNumber(e),!1)}addUint96(e){return this._selector.addUint96(),this._addParam(convertToBigNumber(e),!1)}addInt104(e){return this._selector.addInt104(),this._addParam(convertToBigNumber(e),!1)}addUint104(e){return this._selector.addUint104(),this._addParam(convertToBigNumber(e),!1)}addInt112(e){return this._selector.addInt112(),this._addParam(convertToBigNumber(e),!1)}addUint112(e){return this._selector.addUint112(),this._addParam(convertToBigNumber(e),!1)}addInt120(e){return this._selector.addInt120(),this._addParam(convertToBigNumber(e),!1)}addUint120(e){return this._selector.addUint120(),this._addParam(convertToBigNumber(e),!1)}addInt128(e){return this._selector.addInt128(),this._addParam(convertToBigNumber(e),!1)}addUint128(e){return this._selector.addUint128(),this._addParam(convertToBigNumber(e),!1)}addInt136(e){return this._selector.addInt136(),this._addParam(convertToBigNumber(e),!1)}addUint136(e){return this._selector.addUint136(),this._addParam(convertToBigNumber(e),!1)}addInt144(e){return this._selector.addInt144(),this._addParam(convertToBigNumber(e),!1)}addUint144(e){return this._selector.addUint144(),this._addParam(convertToBigNumber(e),!1)}addInt152(e){return this._selector.addInt152(),this._addParam(convertToBigNumber(e),!1)}addUint152(e){return this._selector.addUint152(),this._addParam(convertToBigNumber(e),!1)}addInt160(e){return this._selector.addInt160(),this._addParam(convertToBigNumber(e),!1)}addUint160(e){return this._selector.addUint160(),this._addParam(convertToBigNumber(e),!1)}addInt168(e){return this._selector.addInt168(),this._addParam(convertToBigNumber(e),!1)}addUint168(e){return this._selector.addUint168(),this._addParam(convertToBigNumber(e),!1)}addInt176(e){return this._selector.addInt176(),this._addParam(convertToBigNumber(e),!1)}addUint176(e){return this._selector.addUint176(),this._addParam(convertToBigNumber(e),!1)}addInt184(e){return this._selector.addInt184(),this._addParam(convertToBigNumber(e),!1)}addUint184(e){return this._selector.addUint184(),this._addParam(convertToBigNumber(e),!1)}addInt192(e){return this._selector.addInt192(),this._addParam(convertToBigNumber(e),!1)}addUint192(e){return this._selector.addUint192(),this._addParam(convertToBigNumber(e),!1)}addInt200(e){return this._selector.addInt200(),this._addParam(convertToBigNumber(e),!1)}addUint200(e){return this._selector.addUint200(),this._addParam(convertToBigNumber(e),!1)}addInt208(e){return this._selector.addInt208(),this._addParam(convertToBigNumber(e),!1)}addUint208(e){return this._selector.addUint208(),this._addParam(convertToBigNumber(e),!1)}addInt216(e){return this._selector.addInt216(),this._addParam(convertToBigNumber(e),!1)}addUint216(e){return this._selector.addUint216(),this._addParam(convertToBigNumber(e),!1)}addInt224(e){return this._selector.addInt224(),this._addParam(convertToBigNumber(e),!1)}addUint224(e){return this._selector.addUint224(),this._addParam(convertToBigNumber(e),!1)}addInt232(e){return this._selector.addInt232(),this._addParam(convertToBigNumber(e),!1)}addUint232(e){return this._selector.addUint232(),this._addParam(convertToBigNumber(e),!1)}addInt240(e){return this._selector.addInt240(),this._addParam(convertToBigNumber(e),!1)}addUint240(e){return this._selector.addUint240(),this._addParam(convertToBigNumber(e),!1)}addInt248(e){return this._selector.addInt248(),this._addParam(convertToBigNumber(e),!1)}addUint248(e){return this._selector.addUint248(),this._addParam(convertToBigNumber(e),!1)}addInt256(e){return this._selector.addInt256(),this._addParam(convertToBigNumber(e),!1)}addUint256(e){return this._selector.addUint256(),this._addParam(convertToBigNumber(e),!1)}addInt8Array(e){return this._selector.addInt8Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint8Array(e){return this._selector.addUint8Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt16Array(e){return this._selector.addInt16Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint16Array(e){return this._selector.addUint16Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt24Array(e){return this._selector.addInt24Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint24Array(e){return this._selector.addUint24Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt32Array(e){return this._selector.addInt32Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint32Array(e){return this._selector.addUint32Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt40Array(e){return this._selector.addInt40Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint40Array(e){return this._selector.addUint40Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt48Array(e){return this._selector.addInt48Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint48Array(e){return this._selector.addUint48Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt56Array(e){return this._selector.addInt56Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint56Array(e){return this._selector.addUint56Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt64Array(e){return this._selector.addInt64Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint64Array(e){return this._selector.addUint64Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt72Array(e){return this._selector.addInt72Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint72Array(e){return this._selector.addUint72Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt80Array(e){return this._selector.addInt80Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint80Array(e){return this._selector.addUint80Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt88Array(e){return this._selector.addInt88Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint88Array(e){return this._selector.addUint88Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt96Array(e){return this._selector.addInt96Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint96Array(e){return this._selector.addUint96Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt104Array(e){return this._selector.addInt104Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint104Array(e){return this._selector.addUint104Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt112Array(e){return this._selector.addInt112Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint112Array(e){return this._selector.addUint112Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt120Array(e){return this._selector.addInt120Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint120Array(e){return this._selector.addUint120Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt128Array(e){return this._selector.addInt128Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint128Array(e){return this._selector.addUint128Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt136Array(e){return this._selector.addInt136Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint136Array(e){return this._selector.addUint136Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt144Array(e){return this._selector.addInt144Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint144Array(e){return this._selector.addUint144Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt152Array(e){return this._selector.addInt152Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint152Array(e){return this._selector.addUint152Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt160Array(e){return this._selector.addInt160Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint160Array(e){return this._selector.addUint160Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt168Array(e){return this._selector.addInt168Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint168Array(e){return this._selector.addUint168Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt176Array(e){return this._selector.addInt176Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint176Array(e){return this._selector.addUint176Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt184Array(e){return this._selector.addInt184Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint184Array(e){return this._selector.addUint184Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt192Array(e){return this._selector.addInt192Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint192Array(e){return this._selector.addUint192Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt200Array(e){return this._selector.addInt200Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint200Array(e){return this._selector.addUint200Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt208Array(e){return this._selector.addInt208Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint208Array(e){return this._selector.addUint208Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt216Array(e){return this._selector.addInt216Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint216Array(e){return this._selector.addUint216Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt224Array(e){return this._selector.addInt224Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint224Array(e){return this._selector.addUint224Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt232Array(e){return this._selector.addInt232Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint232Array(e){return this._selector.addUint232Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt240Array(e){return this._selector.addInt240Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint240Array(e){return this._selector.addUint240Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt248Array(e){return this._selector.addInt248Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint248Array(e){return this._selector.addUint248Array(),this._addParam(convertToBigNumberArray(e),!0)}addInt256Array(e){return this._selector.addInt256Array(),this._addParam(convertToBigNumberArray(e),!0)}addUint256Array(e){return this._selector.addUint256Array(),this._addParam(convertToBigNumberArray(e),!0)}addAddress(e){let t;if(typeof e=="string"){if(e.length!==40&&e.length!==42)throw new Error("`address` type requires parameter to be 40 or 42 characters");t=e}else t=e.toString();const o=t.length===40?decode$5(t):decode$5(t.substring(2));return this._selector.addAddress(),this._addParam(o,!1)}addAddressArray(e){const t=[];for(const[o,c]of e.entries()){let l;if(typeof c=="string"){if(c.length!==40&&c.length!==42)throw new Error("`address` type requires parameter to be 40 or 42 characters");l=c}else l=c.toString();const h=l.length===40?decode$5(l):decode$5(l.substring(2));t.push(h)}return this._selector.addAddressArray(),this._addParam(t,!0)}addFunction(e,t){const o=decode$5(e),c=t._build();if(o.length!==20)throw new Error("`function` type requires parameter `address` to be exactly 20 bytes");this._selector.addFunction();const l=new Uint8Array(24);return l.set(o,0),l.set(c,20),this._addParam(l,!1)}_addParam(e,t){const o=this._selector._paramTypes.length-1,c=argumentToBytes(e,this._selector._paramTypes[o]);return this._arguments.push({dynamic:t,value:c}),this}_build(e){const t=e!=null,o=t?4:0,c=this._arguments.length===0?o:this._arguments.length*32+this._arguments.map(d=>d.dynamic?d.value.length:0).reduce((d,g)=>d+g)+o,l=new Uint8Array(c);t&&l.set(this._selector._build(e),0);let h=32*this._arguments.length;for(const[d,{dynamic:g,value:m}]of this._arguments.entries())if(g){const v=safeView(l,o+d*32+28);v.setUint32(0,h),l.set(m,v.getUint32(0)+o),h+=m.length}else l.set(m,o+d*32);return l}}function argumentToBytes(n,e){let t=new Uint8Array(32),o=safeView(t),c;if(e.array){if(!Array.isArray(n))throw new TypeError("SolidityType indicates type is array, but parameter is not an array");const l=[];for(const[g,m]of n.entries()){const v=argumentToBytes(m,{ty:e.ty,array:!1});l.push(v)}const h=l.map(g=>g.length).reduce((g,m)=>g+m);switch(e.ty){case ArgumentType.uint8:case ArgumentType.int8:case ArgumentType.uint16:case ArgumentType.int16:case ArgumentType.uint32:case ArgumentType.int32:case ArgumentType.uint40:case ArgumentType.int40:case ArgumentType.uint48:case ArgumentType.int48:case ArgumentType.uint56:case ArgumentType.int56:case ArgumentType.uint64:case ArgumentType.int64:case ArgumentType.uint72:case ArgumentType.int72:case ArgumentType.uint80:case ArgumentType.int80:case ArgumentType.uint88:case ArgumentType.int88:case ArgumentType.uint96:case ArgumentType.int96:case ArgumentType.uint104:case ArgumentType.int104:case ArgumentType.uint112:case ArgumentType.int112:case ArgumentType.uint120:case ArgumentType.int120:case ArgumentType.uint128:case ArgumentType.int128:case ArgumentType.uint136:case ArgumentType.int136:case ArgumentType.uint144:case ArgumentType.int144:case ArgumentType.uint152:case ArgumentType.int152:case ArgumentType.uint160:case ArgumentType.int160:case ArgumentType.uint168:case ArgumentType.int168:case ArgumentType.uint176:case ArgumentType.int176:case ArgumentType.uint184:case ArgumentType.int184:case ArgumentType.uint192:case ArgumentType.int192:case ArgumentType.uint200:case ArgumentType.int200:case ArgumentType.uint208:case ArgumentType.int208:case ArgumentType.uint216:case ArgumentType.int216:case ArgumentType.uint224:case ArgumentType.int224:case ArgumentType.uint232:case ArgumentType.int232:case ArgumentType.uint240:case ArgumentType.int240:case ArgumentType.uint248:case ArgumentType.int248:case ArgumentType.uint256:case ArgumentType.int256:case ArgumentType.bool:case ArgumentType.bytes32:case ArgumentType.address:case ArgumentType.func:t=new Uint8Array(h+32);break;case ArgumentType.bytes:case ArgumentType.string:t=new Uint8Array(l.length*32+h+32);break;default:throw new TypeError(`Expected param type to be ArgumentType, but received ${e.ty}`)}o=safeView(t,28),o.setUint32(0,l.length);let d=32*l.length;for(const[g,m]of l.entries())switch(e.ty){case ArgumentType.uint8:case ArgumentType.int8:case ArgumentType.uint16:case ArgumentType.int16:case ArgumentType.uint24:case ArgumentType.int24:case ArgumentType.uint32:case ArgumentType.int32:case ArgumentType.uint40:case ArgumentType.int40:case ArgumentType.uint48:case ArgumentType.int48:case ArgumentType.uint56:case ArgumentType.int56:case ArgumentType.uint64:case ArgumentType.int64:case ArgumentType.uint72:case ArgumentType.int72:case ArgumentType.uint80:case ArgumentType.int80:case ArgumentType.uint88:case ArgumentType.int88:case ArgumentType.uint96:case ArgumentType.int96:case ArgumentType.uint104:case ArgumentType.int104:case ArgumentType.uint112:case ArgumentType.int112:case ArgumentType.uint120:case ArgumentType.int120:case ArgumentType.uint128:case ArgumentType.int128:case ArgumentType.uint136:case ArgumentType.int136:case ArgumentType.uint144:case ArgumentType.int144:case ArgumentType.uint152:case ArgumentType.int152:case ArgumentType.uint160:case ArgumentType.int160:case ArgumentType.uint168:case ArgumentType.int168:case ArgumentType.uint176:case ArgumentType.int176:case ArgumentType.uint184:case ArgumentType.int184:case ArgumentType.uint192:case ArgumentType.int192:case ArgumentType.uint200:case ArgumentType.int200:case ArgumentType.uint208:case ArgumentType.int208:case ArgumentType.uint216:case ArgumentType.int216:case ArgumentType.uint224:case ArgumentType.int224:case ArgumentType.uint232:case ArgumentType.int232:case ArgumentType.uint240:case ArgumentType.int240:case ArgumentType.uint248:case ArgumentType.int248:case ArgumentType.uint256:case ArgumentType.int256:case ArgumentType.bool:case ArgumentType.bytes32:case ArgumentType.address:case ArgumentType.func:t.set(m,g*32+32);break;case ArgumentType.bytes:case ArgumentType.string:const v=safeView(t,(g+1)*32+28);v.setUint32(0,d),t.set(m,v.getUint32(0)+32),d+=m.length;break;default:throw new TypeError(`Expected param type to be ArgumentType, but received ${e.ty}`)}return t}switch(e.ty){case ArgumentType.uint8:case ArgumentType.int8:case ArgumentType.uint16:case ArgumentType.int16:case ArgumentType.uint24:case ArgumentType.int24:case ArgumentType.uint32:case ArgumentType.int32:case ArgumentType.uint40:case ArgumentType.int40:case ArgumentType.uint48:case ArgumentType.int48:case ArgumentType.uint56:case ArgumentType.int56:case ArgumentType.uint64:case ArgumentType.int64:case ArgumentType.uint72:case ArgumentType.int72:case ArgumentType.uint80:case ArgumentType.int80:case ArgumentType.uint88:case ArgumentType.int88:case ArgumentType.uint96:case ArgumentType.int96:case ArgumentType.uint104:case ArgumentType.int104:case ArgumentType.uint112:case ArgumentType.int112:case ArgumentType.uint120:case ArgumentType.int120:case ArgumentType.uint128:case ArgumentType.int128:case ArgumentType.uint136:case ArgumentType.int136:case ArgumentType.uint144:case ArgumentType.int144:case ArgumentType.uint152:case ArgumentType.int152:case ArgumentType.uint160:case ArgumentType.int160:case ArgumentType.uint168:case ArgumentType.int168:case ArgumentType.uint176:case ArgumentType.int176:case ArgumentType.uint184:case ArgumentType.int184:case ArgumentType.uint192:case ArgumentType.int192:case ArgumentType.uint200:case ArgumentType.int200:case ArgumentType.uint208:case ArgumentType.int208:case ArgumentType.uint216:case ArgumentType.int216:case ArgumentType.uint224:case ArgumentType.int224:case ArgumentType.uint232:case ArgumentType.int232:case ArgumentType.uint240:case ArgumentType.int240:case ArgumentType.uint248:case ArgumentType.int248:case ArgumentType.int256:case ArgumentType.uint256:{let l=n.toString(16);n>0||n==0?l="0x"+l:l=l.slice(0,1)+"0x"+l.slice(1);const h=defaultAbiCoder.encode([solidityTypeToString(e)],[l]);return arrayify(h)}case ArgumentType.address:return t.set(n,32-20),t;case ArgumentType.bool:return t[31]=n?1:0,t;case ArgumentType.func:return t.set(n,32-24),t;case ArgumentType.bytes32:return t.set(n,0),t;case ArgumentType.bytes:case ArgumentType.string:return c=n instanceof Uint8Array?n:encode(n),Math.floor(c.length/32)>=0?Math.floor(c.length%32)!==0?t=new Uint8Array((Math.floor(c.length/32)+1)*32+32):t=new Uint8Array(Math.floor(c.length/32)*32+32):t=new Uint8Array(64),t.set(c,32),o=safeView(t,28),o.setUint32(0,c.length),t;default:throw new Error(`Unsupported argument type: ${e.toString()}`)}}class ContractCallQuery extends Query{constructor(e={}){super(),this._contractId=null,e.contractId!=null&&this.setContractId(e.contractId),this._gas=null,e.gas!=null&&this.setGas(e.gas),this._functionParameters=null,e.functionParameters!=null&&(e.functionParameters instanceof Uint8Array?this.setFunctionParameters(e.functionParameters):this.setFunction(e.functionParameters.name,e.functionParameters.parameters)),this._maxResultSize=null,e.maxResultSize!=null&&this.setMaxResultSize(e.maxResultSize),this._senderAccountId=null,e.senderAccountId!=null&&this.setSenderAccountId(e.senderAccountId)}static _fromProtobuf(e){const t=e.contractCallLocal;return new ContractCallQuery({contractId:t.contractID!=null?ContractId._fromProtobuf(t.contractID):void 0,gas:t.gas!=null?t.gas:void 0,functionParameters:t.functionParameters!=null?t.functionParameters:void 0,maxResultSize:t.maxResultSize!=null?t.maxResultSize:void 0})}get contractId(){return this._contractId}setContractId(e){return this._contractId=typeof e=="string"?ContractId.fromString(e):e.clone(),this}get gas(){return this._gas}setGas(e){return this._gas=e instanceof Long$1?e:Long$1.fromValue(e),this}get senderAccountId(){return this._senderAccountId}setSenderAccountId(e){return this._senderAccountId=typeof e=="string"?AccountId.fromString(e):e,this}get functionParameters(){return this._functionParameters}setFunctionParameters(e){return this._functionParameters=e,this}setFunction(e,t){return this._functionParameters=(t??new ContractFunctionParameters)._build(e),this}setMaxResultSize(e){return this._maxResultSize=e instanceof Long$1?e:Long$1.fromValue(e),this}_validateChecksums(e){this._contractId!=null&&this._contractId.validateChecksum(e)}_mapStatusError(e,t){const{nodeTransactionPrecheckCode:o}=this._mapResponseHeader(t),c=Status._fromCode(o??lib.proto.ResponseCodeEnum.OK);if(!t.contractCallLocal.functionResult)return new PrecheckStatusError({status:c,transactionId:this._getTransactionId(),contractFunctionResult:null});const h=this._mapResponseSync(t);return new PrecheckStatusError({status:c,transactionId:this._getTransactionId(),contractFunctionResult:h})}_execute(e,t){return e.smartContract.contractCallLocalMethod(t)}_mapResponseHeader(e){return e.contractCallLocal.header}_mapResponse(e){const t=e.contractCallLocal;return Promise.resolve(ContractFunctionResult._fromProtobuf(t.functionResult,!1))}_mapResponseSync(e){const t=e.contractCallLocal;return ContractFunctionResult._fromProtobuf(t.functionResult,!1)}_onMakeRequest(e){return{contractCallLocal:{header:e,contractID:this._contractId!=null?this._contractId._toProtobuf():null,gas:this._gas,maxResultSize:this._maxResultSize,functionParameters:this._functionParameters,senderId:this._senderAccountId!=null?this._senderAccountId._toProtobuf():null}}}_getLogId(){return`ContractCallQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("contractCallLocal",ContractCallQuery._fromProtobuf);class FileCreateTransaction extends Transaction{constructor(e={}){super(),this._keys=null,this._expirationTime=new Timestamp(0,0).plusNanos(Long$1.fromNumber(Date.now()).mul(1e6).add(DEFAULT_AUTO_RENEW_PERIOD.mul(1e9))),this._contents=null,this._fileMemo=null,this._defaultMaxTransactionFee=new Hbar(5),e.keys!=null&&this.setKeys(e.keys),e.expirationTime!=null&&this.setExpirationTime(e.expirationTime),e.contents!=null&&this.setContents(e.contents),e.fileMemo!=null&&this.setFileMemo(e.fileMemo)}static _fromProtobuf(e,t,o,c,l){const d=l[0].fileCreate;return Transaction._fromProtobufTransactions(new FileCreateTransaction({keys:d.keys!=null&&d.keys.keys!=null?d.keys.keys.map(g=>Key._fromProtobufKey(g)):void 0,expirationTime:d.expirationTime!=null?Timestamp._fromProtobuf(d.expirationTime):void 0,contents:d.contents!=null?d.contents:void 0,fileMemo:d.memo!=null?d.memo:void 0}),e,t,o,c,l)}get keys(){return this._keys}setKeys(e){if(this._requireNotFrozen(),e instanceof KeyList&&e.threshold!=null)throw new Error("Cannot set threshold key as file key");return this._keys=e instanceof KeyList?e.toArray():e,this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof Timestamp?e:Timestamp.fromDate(e),this}get contents(){return this._contents}setContents(e){return this._requireNotFrozen(),this._contents=e instanceof Uint8Array?e:encode(e),this}get fileMemo(){return this._fileMemo}setFileMemo(e){return this._requireNotFrozen(),this._fileMemo=e,this}_execute(e,t){return e.file.createFile(t)}_getTransactionDataCase(){return"fileCreate"}_makeTransactionData(){return{keys:this._keys!=null?{keys:this._keys.map(e=>e._toProtobufKey())}:null,expirationTime:this._expirationTime._toProtobuf(),contents:this._contents,memo:this._fileMemo}}_getLogId(){return`FileCreateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("fileCreate",FileCreateTransaction._fromProtobuf);class FileAppendTransaction extends Transaction{constructor(e={}){super(),this._fileId=null,this._contents=null,this._maxChunks=20,this._chunkSize=4096,this._defaultMaxTransactionFee=new Hbar(5),e.fileId!=null&&this.setFileId(e.fileId),e.contents!=null&&this.setContents(e.contents),e.maxChunks!=null&&this.setMaxChunks(e.maxChunks),e.chunkSize!=null&&this.setChunkSize(e.chunkSize),this._transactionIds=new List}static _fromProtobuf(e,t,o,c,l){const d=l[0].fileAppend;let g;for(let m=0;m<l.length;m+=c.length){const v=l[m].fileAppend;if(v.contents==null)break;if(g==null){g=new Uint8Array(v.contents);continue}const _=new Uint8Array(g.length+v.contents.length);_.set(g,0),_.set(v.contents,g.length),g=_}return Transaction._fromProtobufTransactions(new FileAppendTransaction({fileId:d.fileID!=null?FileId._fromProtobuf(d.fileID):void 0,contents:g}),e,t,o,c,l)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId=typeof e=="string"?FileId.fromString(e):e.clone(),this}get contents(){return this._contents}setContents(e){return this._requireNotFrozen(),this._contents=e instanceof Uint8Array?e:encode(e),this}get maxChunks(){return this._maxChunks}setMaxChunks(e){return this._requireNotFrozen(),this._maxChunks=e,this}get chunkSize(){return this._chunkSize}setChunkSize(e){return this._chunkSize=e,this}freezeWith(e){if(super.freezeWith(e),this._contents==null)return this;const t=Math.floor((this._contents.length+(this._chunkSize-1))/this._chunkSize);if(t>this._maxChunks)throw new Error(`Contents with size ${this._contents.length} too long for ${this._maxChunks} chunks`);let o=this._getTransactionId();this._transactionIds.locked=!1,this._transactions.clear(),this._transactionIds.clear(),this._signedTransactions.clear();for(let c=0;c<t;c++){this._transactionIds.push(o),this._transactionIds.advance();for(const l of this._nodeAccountIds.list)this._signedTransactions.push(this._makeSignedTransaction(l));o=new TransactionId(o.accountId,new Timestamp(o.validStart.seconds,o.validStart.nanos.add(1)))}return this._transactionIds.advance(),this._transactionIds.setLocked(),this}schedule(){if(this._requireNotFrozen(),this._contents!=null&&this._contents.length>this._chunkSize)throw new Error(`cannot schedule \`FileAppendTransaction\` with message over ${this._chunkSize} bytes`);return super.schedule()}async execute(e,t){return(await this.executeAll(e,t))[0]}async executeAll(e,t){super._isFrozen()||this.freezeWith(e);const o=this._getTransactionId(),c=e.operatorAccountId;c!=null&&c.equals(o.accountId)&&await super.signWithOperator(e);const l=[];let h=t;for(let d=0;d<this._transactionIds.length;d++){const g=Date.now(),m=await super.execute(e,h);h!=null&&(h=Date.now()-g),await m.getReceipt(e),l.push(m)}return l}_validateChecksums(e){this._fileId!=null&&this._fileId.validateChecksum(e)}_execute(e,t){return e.file.appendContent(t)}_getTransactionDataCase(){return"fileAppend"}_makeTransactionData(){const e=this._contents!=null?this._contents.length:0,t=this._transactionIds.index*this._chunkSize,o=Math.min(t+this._chunkSize,e);return{fileID:this._fileId!=null?this._fileId._toProtobuf():null,contents:this._contents!=null?this._contents.slice(t,o):null}}_getLogId(){return`FileAppendTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("fileAppend",FileAppendTransaction._fromProtobuf);class FileDeleteTransaction extends Transaction{constructor(e={}){super(),this._fileId=null,e.fileId!=null&&this.setFileId(e.fileId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].fileDelete;return Transaction._fromProtobufTransactions(new FileDeleteTransaction({fileId:d.fileID!=null?FileId._fromProtobuf(d.fileID):void 0}),e,t,o,c,l)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId=typeof e=="string"?FileId.fromString(e):e.clone(),this}_validateChecksums(e){this._fileId!=null&&this._fileId.validateChecksum(e)}_execute(e,t){return e.file.deleteFile(t)}_getTransactionDataCase(){return"fileDelete"}_makeTransactionData(){return{fileID:this._fileId!=null?this._fileId._toProtobuf():null}}_getLogId(){return`FileDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("fileDelete",FileDeleteTransaction._fromProtobuf);class ContractCreateTransaction extends Transaction{constructor(e={}){super(),this._bytecodeFileId=null,this._bytecode=null,this._adminKey=null,this._gas=null,this._initialBalance=null,this._proxyAccountId=null,this._autoRenewPeriod=new Duration(DEFAULT_AUTO_RENEW_PERIOD),this._constructorParameters=null,this._contractMemo=null,this._maxAutomaticTokenAssociations=null,this._defaultMaxTransactionFee=new Hbar(20),this._stakedAccountId=null,this._stakedNodeId=null,this._declineStakingReward=!1,this._autoRenewAccountId=null,e.bytecodeFileId!=null&&this.setBytecodeFileId(e.bytecodeFileId),e.bytecode!=null&&this.setBytecode(e.bytecode),e.adminKey!=null&&this.setAdminKey(e.adminKey),e.gas!=null&&this.setGas(e.gas),e.initialBalance!=null&&this.setInitialBalance(e.initialBalance),e.proxyAccountId!=null&&this.setProxyAccountId(e.proxyAccountId),e.autoRenewPeriod!=null&&this.setAutoRenewPeriod(e.autoRenewPeriod),e.constructorParameters!=null&&this.setConstructorParameters(e.constructorParameters),e.contractMemo!=null&&this.setContractMemo(e.contractMemo),e.maxAutomaticTokenAssociations!=null&&this.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations),e.stakedAccountId!=null&&this.setStakedAccountId(e.stakedAccountId),e.stakedNodeId!=null&&this.setStakedNodeId(e.stakedNodeId),e.declineStakingReward!=null&&this.setDeclineStakingReward(e.declineStakingReward),e.autoRenewAccountId!=null&&this.setAutoRenewAccountId(e.autoRenewAccountId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].contractCreateInstance;return Transaction._fromProtobufTransactions(new ContractCreateTransaction({bytecodeFileId:d.fileID!=null?FileId._fromProtobuf(d.fileID):void 0,adminKey:d.adminKey!=null?Key._fromProtobufKey(d.adminKey):void 0,gas:d.gas!=null?d.gas:void 0,initialBalance:d.initialBalance!=null?d.initialBalance:void 0,proxyAccountId:d.proxyAccountID!=null?AccountId._fromProtobuf(d.proxyAccountID):void 0,autoRenewPeriod:d.autoRenewPeriod!=null&&d.autoRenewPeriod.seconds!=null?d.autoRenewPeriod.seconds:void 0,constructorParameters:d.constructorParameters!=null?d.constructorParameters:void 0,contractMemo:d.memo!=null?d.memo:void 0,maxAutomaticTokenAssociations:d.maxAutomaticTokenAssociations!=null?d.maxAutomaticTokenAssociations:void 0,stakedAccountId:d.stakedAccountId!=null?AccountId._fromProtobuf(d.stakedAccountId):void 0,stakedNodeId:d.stakedNodeId!=null?d.stakedNodeId:void 0,declineStakingReward:d.declineReward==!0,autoRenewAccountId:d.autoRenewAccountId!=null?AccountId._fromProtobuf(d.autoRenewAccountId):void 0}),e,t,o,c,l)}get bytecodeFileId(){return this._bytecodeFileId}setBytecodeFileId(e){return this._requireNotFrozen(),this._bytecodeFileId=typeof e=="string"?FileId.fromString(e):e.clone(),this._bytecode=null,this}get bytecode(){return this._bytecode}setBytecode(e){return this._requireNotFrozen(),this._bytecode=e,this._bytecodeFileId=null,this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get gas(){return this._gas}setGas(e){return this._requireNotFrozen(),this._gas=e instanceof Long$1?e:Long$1.fromValue(e),this}get initialBalance(){return this._initialBalance}setInitialBalance(e){return this._requireNotFrozen(),this._initialBalance=e instanceof Hbar?e:new Hbar(e),this}get proxyAccountId(){return this._proxyAccountId}setProxyAccountId(e){return this._requireNotFrozen(),this._proxyAccountId=e instanceof AccountId?e:AccountId.fromString(e),this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof Duration?e:new Duration(e),this}get constructorParameters(){return this._constructorParameters}setConstructorParameters(e){return this._requireNotFrozen(),this._constructorParameters=e instanceof ContractFunctionParameters?e._build():e,this}get contractMemo(){return this._contractMemo}setContractMemo(e){return this._requireNotFrozen(),this._contractMemo=e,this}get maxAutomaticTokenAssociations(){return this._maxAutomaticTokenAssociations}setMaxAutomaticTokenAssociations(e){return this._maxAutomaticTokenAssociations=e,this}get stakedAccountId(){return this._stakedAccountId}setStakedAccountId(e){return this._requireNotFrozen(),this._stakedAccountId=typeof e=="string"?AccountId.fromString(e):e,this}get stakedNodeId(){return this._stakedNodeId}setStakedNodeId(e){return this._requireNotFrozen(),this._stakedNodeId=Long$1.fromValue(e),this}get declineStakingRewards(){return this._declineStakingReward}setDeclineStakingReward(e){return this._requireNotFrozen(),this._declineStakingReward=e,this}get autoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId=typeof e=="string"?AccountId.fromString(e):e,this}_validateChecksums(e){this._bytecodeFileId!=null&&this._bytecodeFileId.validateChecksum(e),this._proxyAccountId!=null&&this._proxyAccountId.validateChecksum(e)}_execute(e,t){return e.smartContract.createContract(t)}_getTransactionDataCase(){return"contractCreateInstance"}_makeTransactionData(){return{fileID:this._bytecodeFileId!=null?this._bytecodeFileId._toProtobuf():null,initcode:this._bytecode,adminKey:this._adminKey!=null?this._adminKey._toProtobufKey():null,gas:this._gas,initialBalance:this._initialBalance!=null?this._initialBalance.toTinybars():null,proxyAccountID:this._proxyAccountId!=null?this._proxyAccountId._toProtobuf():null,autoRenewPeriod:this._autoRenewPeriod._toProtobuf(),constructorParameters:this._constructorParameters,memo:this._contractMemo,maxAutomaticTokenAssociations:this._maxAutomaticTokenAssociations,stakedAccountId:this.stakedAccountId!=null?this.stakedAccountId._toProtobuf():null,stakedNodeId:this.stakedNodeId,declineReward:this.declineStakingRewards,autoRenewAccountId:this._autoRenewAccountId!=null?this._autoRenewAccountId._toProtobuf():null}}_getLogId(){return`ContractCreateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("contractCreateInstance",ContractCreateTransaction._fromProtobuf);class ContractDeleteTransaction extends Transaction{constructor(e={}){super(),this._contractId=null,this._transferAccountId=null,this._transferContractId=null,e.contractId!=null&&this.setContractId(e.contractId),e.transferAccountId!=null&&this.setTransferAccountId(e.transferAccountId),e.transferContractId!=null&&this.setTransferContractId(e.transferContractId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].contractDeleteInstance;return Transaction._fromProtobufTransactions(new ContractDeleteTransaction({contractId:d.contractID!=null?ContractId._fromProtobuf(d.contractID):void 0,transferAccountId:d.transferAccountID!=null?AccountId._fromProtobuf(d.transferAccountID):void 0,transferContractId:d.transferContractID!=null?ContractId._fromProtobuf(d.transferContractID):void 0}),e,t,o,c,l)}get contractId(){return this._contractId}setContractId(e){return this._requireNotFrozen(),this._contractId=typeof e=="string"?ContractId.fromString(e):e.clone(),this}get transferContractId(){return this._transferContractId}setTransferContractId(e){return this._requireNotFrozen(),this._transferContractId=e instanceof ContractId?e:ContractId.fromString(e),this}get transferAccountId(){return this._transferAccountId}setTransferAccountId(e){return this._requireNotFrozen(),this._transferAccountId=e instanceof AccountId?e:AccountId.fromString(e),this}_validateChecksums(e){this._contractId!=null&&this._contractId.validateChecksum(e),this._transferAccountId!=null&&this._transferAccountId.validateChecksum(e),this._transferContractId!=null&&this._transferContractId.validateChecksum(e)}_execute(e,t){return e.smartContract.deleteContract(t)}_getTransactionDataCase(){return"contractDeleteInstance"}_makeTransactionData(){return{contractID:this._contractId!=null?this._contractId._toProtobuf():null,transferAccountID:this._transferAccountId?this._transferAccountId._toProtobuf():null,transferContractID:this._transferContractId!=null?this._transferContractId._toProtobuf():null}}_getLogId(){return`ContractDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("contractDeleteInstance",ContractDeleteTransaction._fromProtobuf);class ContractExecuteTransaction extends Transaction{constructor(e={}){super(),this._contractId=null,this._gas=null,this._amount=null,this._functionParameters=null,e.contractId!=null&&this.setContractId(e.contractId),e.gas!=null&&this.setGas(e.gas),e.amount!=null&&this.setPayableAmount(e.amount),e.functionParameters!=null?this.setFunctionParameters(e.functionParameters):e.function!=null&&this.setFunction(e.function.name,e.function.parameters)}static _fromProtobuf(e,t,o,c,l){const d=l[0].contractCall;return Transaction._fromProtobufTransactions(new ContractExecuteTransaction({contractId:d.contractID!=null?ContractId._fromProtobuf(d.contractID):void 0,gas:d.gas!=null?d.gas:void 0,amount:d.amount!=null?Hbar.fromTinybars(d.amount):void 0,functionParameters:d.functionParameters!=null?d.functionParameters:void 0}),e,t,o,c,l)}get contractId(){return this._contractId}setContractId(e){return this._requireNotFrozen(),this._contractId=typeof e=="string"?ContractId.fromString(e):e.clone(),this}get gas(){return this._gas}setGas(e){return this._requireNotFrozen(),this._gas=e instanceof Long$1?e:Long$1.fromValue(e),this}get payableAmount(){return this._amount}setPayableAmount(e){return this._requireNotFrozen(),this._amount=e instanceof Hbar?e:new Hbar(e),this}get functionParameters(){return this._functionParameters}setFunctionParameters(e){return this._requireNotFrozen(),this._functionParameters=e,this}setFunction(e,t){return this._requireNotFrozen(),this._functionParameters=t!=null?t._build(e):new ContractFunctionParameters()._build(e),this}_validateChecksums(e){this._contractId!=null&&this._contractId.validateChecksum(e)}_execute(e,t){return e.smartContract.contractCallMethod(t)}_getTransactionDataCase(){return"contractCall"}_makeTransactionData(){return{contractID:this._contractId!=null?this._contractId._toProtobuf():null,gas:this._gas,amount:this._amount!=null?this._amount.toTinybars():null,functionParameters:this._functionParameters}}_getLogId(){return`ContractExecuteTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("contractCall",ContractExecuteTransaction._fromProtobuf);const{proto:proto$3}=HashgraphProto;class ContractInfo{constructor(e){this.contractId=e.contractId,this.accountId=e.accountId,this.contractAccountId=e.contractAccountId,this.adminKey=e.adminKey!=null?e.adminKey:null,this.expirationTime=e.expirationTime,this.autoRenewPeriod=e.autoRenewPeriod,this.autoRenewAccountId=e.autoRenewAccountId,this.storage=e.storage,this.contractMemo=e.contractMemo,this.balance=e.balance,this.isDeleted=e.isDeleted,this.tokenRelationships=e.tokenRelationships,this.ledgerId=e.ledgerId,this.stakingInfo=e.stakingInfo,Object.freeze(this)}static _fromProtobuf(e){const t=e.autoRenewPeriod.seconds;return new ContractInfo({contractId:ContractId._fromProtobuf(e.contractID),accountId:AccountId._fromProtobuf(e.accountID),contractAccountId:e.contractAccountID!=null?e.contractAccountID:"",adminKey:e.adminKey!=null?Key._fromProtobufKey(e.adminKey):null,expirationTime:Timestamp._fromProtobuf(e.expirationTime),autoRenewPeriod:new Duration(t),autoRenewAccountId:e.autoRenewAccountId!=null?AccountId._fromProtobuf(e.autoRenewAccountId):null,storage:e.storage!=null?e.storage instanceof Long$1?e.storage:Long$1.fromValue(e.storage):Long$1.ZERO,contractMemo:e.memo!=null?e.memo:"",balance:Hbar.fromTinybars(e.balance!=null?e.balance:0),isDeleted:e.deleted,tokenRelationships:TokenRelationshipMap._fromProtobuf(e.tokenRelationships!=null?e.tokenRelationships:[]),ledgerId:e.ledgerId!=null?LedgerId.fromBytes(e.ledgerId):null,stakingInfo:e.stakingInfo!=null?StakingInfo._fromProtobuf(e.stakingInfo):null})}_toProtobuf(){return{contractID:this.contractId._toProtobuf(),accountID:this.accountId._toProtobuf(),contractAccountID:this.contractAccountId,adminKey:this.adminKey!=null?this.adminKey._toProtobufKey():null,expirationTime:this.expirationTime._toProtobuf(),autoRenewPeriod:this.autoRenewPeriod!=null?this.autoRenewPeriod._toProtobuf():null,autoRenewAccountId:this.autoRenewAccountId!=null?this.autoRenewAccountId._toProtobuf():null,storage:this.storage,memo:this.contractMemo,balance:this.balance.toTinybars(),deleted:this.isDeleted,tokenRelationships:this.tokenRelationships!=null?this.tokenRelationships._toProtobuf():null,ledgerId:this.ledgerId!=null?this.ledgerId.toBytes():null,stakingInfo:this.stakingInfo!=null?this.stakingInfo._toProtobuf():null}}static fromBytes(e){return ContractInfo._fromProtobuf(proto$3.ContractGetInfoResponse.ContractInfo.decode(e))}toBytes(){return proto$3.ContractGetInfoResponse.ContractInfo.encode(this._toProtobuf()).finish()}}class ContractInfoQuery extends Query{constructor(e={}){super(),this._contractId=null,e.contractId!=null&&this.setContractId(e.contractId)}static _fromProtobuf(e){const t=e.contractGetInfo;return new ContractInfoQuery({contractId:t.contractID!=null?ContractId._fromProtobuf(t.contractID):void 0})}get contractId(){return this._contractId}setContractId(e){return this._contractId=typeof e=="string"?ContractId.fromString(e):e.clone(),this}_validateChecksums(e){this._contractId!=null&&this._contractId.validateChecksum(e)}_execute(e,t){return e.smartContract.getContractInfo(t)}async getCost(e){return super.getCost(e)}_mapResponseHeader(e){return e.contractGetInfo.header}_mapResponse(e,t,o){const c=e.contractGetInfo;return Promise.resolve(ContractInfo._fromProtobuf(c.contractInfo))}_onMakeRequest(e){return{contractGetInfo:{header:e,contractID:this._contractId!=null?this._contractId._toProtobuf():null}}}_getLogId(){return`ContractInfoQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("contractGetInfo",ContractInfoQuery._fromProtobuf);class ContractUpdateTransaction extends Transaction{constructor(e={}){super(),this._contractId=null,this._expirationTime=null,this._adminKey=null,this._proxyAccountId=null,this._autoRenewPeriod=null,this._bytecodeFileId=null,this._contractMemo=null,this._maxAutomaticTokenAssociations=null,this._stakedAccountId=null,this._stakedNodeId=null,this._declineStakingReward=null,this._autoRenewAccountId=null,e.contractId!=null&&this.setContractId(e.contractId),e.expirationTime!=null&&this.setExpirationTime(e.expirationTime),e.adminKey!=null&&this.setAdminKey(e.adminKey),e.proxyAccountId!=null&&this.setProxyAccountId(e.proxyAccountId),e.autoRenewPeriod!=null&&this.setAutoRenewPeriod(e.autoRenewPeriod),e.bytecodeFileId!=null&&this.setBytecodeFileId(e.bytecodeFileId),e.contractMemo!=null&&this.setContractMemo(e.contractMemo),e.maxAutomaticTokenAssociations!=null&&this.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations),e.stakedAccountId!=null&&this.setStakedAccountId(e.stakedAccountId),e.stakedNodeId!=null&&this.setStakedNodeId(e.stakedNodeId),e.declineStakingReward!=null&&this.setDeclineStakingReward(e.declineStakingReward),e.autoRenewAccountId!=null&&this.setAutoRenewAccountId(e.autoRenewAccountId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].contractUpdateInstance;let g;d.autoRenewPeriod!=null&&d.autoRenewPeriod.seconds!=null&&(g=d.autoRenewPeriod.seconds);let m;d.memoWrapper!=null&&d.memoWrapper.value!=null&&(m=d.memoWrapper.value);let v;return d.maxAutomaticTokenAssociations!=null&&d.maxAutomaticTokenAssociations.value!=null&&(v=d.maxAutomaticTokenAssociations.value),Transaction._fromProtobufTransactions(new ContractUpdateTransaction({contractId:d.contractID!=null?ContractId._fromProtobuf(d.contractID):void 0,bytecodeFileId:d.fileID!=null?FileId._fromProtobuf(d.fileID):void 0,expirationTime:d.expirationTime!=null?Timestamp._fromProtobuf(d.expirationTime):void 0,adminKey:d.adminKey!=null?Key._fromProtobufKey(d.adminKey):void 0,proxyAccountId:d.proxyAccountID!=null?AccountId._fromProtobuf(d.proxyAccountID):void 0,autoRenewPeriod:g,contractMemo:m,maxAutomaticTokenAssociations:v,stakedAccountId:d.stakedAccountId!=null?AccountId._fromProtobuf(d.stakedAccountId):void 0,stakedNodeId:d.stakedNodeId!=null?d.stakedNodeId:void 0,declineStakingReward:d.declineReward!=null&&!!d.declineReward,autoRenewAccountId:d.autoRenewAccountId!=null?AccountId._fromProtobuf(d.autoRenewAccountId):void 0}),e,t,o,c,l)}get contractId(){return this._contractId}setContractId(e){return this._requireNotFrozen(),this._contractId=typeof e=="string"?ContractId.fromString(e):e.clone(),this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof Timestamp?e:Timestamp.fromDate(e),this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get proxyAccountId(){return this._proxyAccountId}setProxyAccountId(e){return this._requireNotFrozen(),this._proxyAccountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof Duration?e:new Duration(e),this}get bytecodeFileId(){return this._bytecodeFileId}setBytecodeFileId(e){return console.warn("Deprecated: there is no replacement"),this._requireNotFrozen(),this._bytecodeFileId=typeof e=="string"?FileId.fromString(e):e.clone(),this}get contractMemo(){return this._contractMemo}setContractMemo(e){return this._requireNotFrozen(),this._contractMemo=e,this}clearContractMemo(){return this._requireNotFrozen(),this._contractMemo=null,this}get maxAutomaticTokenAssociations(){return this._maxAutomaticTokenAssociations}setMaxAutomaticTokenAssociations(e){return this._requireNotFrozen(),this._maxAutomaticTokenAssociations=e,this}get stakedAccountId(){return this._stakedAccountId}setStakedAccountId(e){return this._requireNotFrozen(),this._stakedAccountId=typeof e=="string"?AccountId.fromString(e):e,this}get stakedNodeId(){return this._stakedNodeId}setStakedNodeId(e){return this._requireNotFrozen(),this._stakedNodeId=Long$1.fromValue(e),this}get declineStakingRewards(){return this._declineStakingReward}setDeclineStakingReward(e){return this._requireNotFrozen(),this._declineStakingReward=e,this}get autoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId=typeof e=="string"?AccountId.fromString(e):e,this}clearAutoRenewAccountId(){return this._autoRenewAccountId=new AccountId(0),this}_validateChecksums(e){this._contractId!=null&&this._contractId.validateChecksum(e),this._bytecodeFileId!=null&&this._bytecodeFileId.validateChecksum(e),this._proxyAccountId!=null&&this._proxyAccountId.validateChecksum(e)}_execute(e,t){return e.smartContract.updateContract(t)}_getTransactionDataCase(){return"contractUpdateInstance"}_makeTransactionData(){return{contractID:this._contractId!=null?this._contractId._toProtobuf():null,expirationTime:this._expirationTime!=null?this._expirationTime._toProtobuf():null,adminKey:this._adminKey!=null?this._adminKey._toProtobufKey():null,proxyAccountID:this._proxyAccountId!=null?this._proxyAccountId._toProtobuf():null,autoRenewPeriod:this._autoRenewPeriod!=null?this._autoRenewPeriod._toProtobuf():null,fileID:this._bytecodeFileId?this._bytecodeFileId._toProtobuf():null,memoWrapper:this._contractMemo!=null?{value:this._contractMemo}:null,maxAutomaticTokenAssociations:this._maxAutomaticTokenAssociations!=null?{value:this._maxAutomaticTokenAssociations}:null,stakedAccountId:this.stakedAccountId!=null?this.stakedAccountId._toProtobuf():null,stakedNodeId:this.stakedNodeId,declineReward:this.declineStakingRewards!=null?{value:this.declineStakingRewards}:null,autoRenewAccountId:this._autoRenewAccountId!=null?this._autoRenewAccountId._toProtobuf():null}}_getLogId(){return`ContractUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("contractUpdateInstance",ContractUpdateTransaction._fromProtobuf);class CustomFee{constructor(e={}){this._feeCollectorAccountId=null,this._allCollectorsAreExempt=!1,e.feeCollectorAccountId!=null&&this.setFeeCollectorAccountId(e.feeCollectorAccountId),e.allCollectorsAreExempt!=null&&this.setAllCollectorsAreExempt(e.allCollectorsAreExempt)}get feeCollectorAccountId(){return this._feeCollectorAccountId}setFeeCollectorAccountId(e){return this._feeCollectorAccountId=typeof e=="string"?AccountId.fromString(e):e,this}get allCollectorsAreExempt(){return this._allCollectorsAreExempt}setAllCollectorsAreExempt(e){return this._allCollectorsAreExempt=e,this}static _fromProtobuf(e){throw new Error("not implemented")}_toProtobuf(){throw new Error("not implemented")}}class CustomFixedFee extends CustomFee{constructor(e={}){super(e),this._denominatingTokenId=null,e.denominatingTokenId!=null&&this.setDenominatingTokenId(e.denominatingTokenId),this._amount=null,e.amount!=null&&this.setAmount(e.amount)}setHbarAmount(e){return this._amount=e.toTinybars(),this._denominatingTokenId=null,this}get hbarAmount(){return this._denominatingTokenId!=null?null:Hbar.fromTinybars(this._amount!=null?this._amount:0)}setDenominatingTokenToSameToken(){return this._denominatingTokenId=new TokenId(0,0,0),this}get denominatingTokenId(){return this._denominatingTokenId}setDenominatingTokenId(e){return this._denominatingTokenId=typeof e=="string"?TokenId.fromString(e):e,this}get amount(){return this._amount}setAmount(e){return this._amount=typeof e=="number"?Long$1.fromNumber(e):e,this}static _fromProtobuf(e){const t=e.fixedFee;return new CustomFixedFee({feeCollectorAccountId:e.feeCollectorAccountId!=null?AccountId._fromProtobuf(e.feeCollectorAccountId):void 0,allCollectorsAreExempt:e.allCollectorsAreExempt!=null?e.allCollectorsAreExempt:void 0,denominatingTokenId:t.denominatingTokenId!=null?TokenId._fromProtobuf(t.denominatingTokenId):void 0,amount:t.amount!=null?t.amount:void 0})}_toProtobuf(){return{feeCollectorAccountId:this.feeCollectorAccountId!=null?this.feeCollectorAccountId._toProtobuf():null,allCollectorsAreExempt:this.allCollectorsAreExempt,fixedFee:{denominatingTokenId:this._denominatingTokenId!=null?this._denominatingTokenId._toProtobuf():null,amount:this._amount}}}}class FeeAssessmentMethod{constructor(e){this._value=e,Object.freeze(this)}toString(){switch(this){case FeeAssessmentMethod.Inclusive:return"INCLUSIVE";case FeeAssessmentMethod.Exclusive:return"EXCLUSIVE";default:return`UNKNOWN (${this._value.toString()})`}}static _fromValue(e){switch(e){case!1:return FeeAssessmentMethod.Inclusive;case!0:return FeeAssessmentMethod.Exclusive}}valueOf(){return this._value}}FeeAssessmentMethod.Inclusive=new FeeAssessmentMethod(!1);FeeAssessmentMethod.Exclusive=new FeeAssessmentMethod(!0);class CustomFractionalFee extends CustomFee{constructor(e={}){super(e),this._numerator=null,e.numerator!=null&&this.setNumerator(e.numerator),this._denominator=null,e.denominator!=null&&this.setDenominator(e.denominator),this._min=null,e.min!=null&&this.setMin(e.min),this._max,e.max!=null&&this.setMax(e.max),this._assessmentMethod,e.assessmentMethod!=null&&this.setAssessmentMethod(e.assessmentMethod)}get numerator(){return this._numerator}setNumerator(e){return this._numerator=typeof e=="number"?Long$1.fromNumber(e):e,this}get denominator(){return this._denominator}setDenominator(e){return this._denominator=typeof e=="number"?Long$1.fromNumber(e):e,this}get min(){return this._min}setMin(e){return this._min=typeof e=="number"?Long$1.fromNumber(e):e,this}get max(){return this._max}setMax(e){return this._max=typeof e=="number"?Long$1.fromNumber(e):e,this}get assessmentMethod(){return this._assessmentMethod}setAssessmentMethod(e){return this._assessmentMethod=e,this}static _fromProtobuf(e){const t=e.fractionalFee,o=t.fractionalAmount;return new CustomFractionalFee({feeCollectorAccountId:e.feeCollectorAccountId!=null?AccountId._fromProtobuf(e.feeCollectorAccountId):void 0,allCollectorsAreExempt:e.allCollectorsAreExempt!=null?e.allCollectorsAreExempt:void 0,numerator:o.numerator!=null?o.numerator:void 0,denominator:o.denominator!=null?o.denominator:void 0,min:t.minimumAmount!=null?t.minimumAmount:void 0,max:t.maximumAmount!=null?t.maximumAmount:void 0,assessmentMethod:t.netOfTransfers!=null?new FeeAssessmentMethod(t.netOfTransfers):void 0})}_toProtobuf(){return{feeCollectorAccountId:this.feeCollectorAccountId!=null?this.feeCollectorAccountId._toProtobuf():null,allCollectorsAreExempt:this.allCollectorsAreExempt,fractionalFee:{fractionalAmount:{numerator:this._numerator,denominator:this._denominator},minimumAmount:this._min,maximumAmount:this._max,netOfTransfers:this._assessmentMethod!=null?this._assessmentMethod.valueOf():!1}}}}class CustomRoyalyFee extends CustomFee{constructor(e={}){super(e),this._fallbackFee=null,e.fallbackFee!=null&&this.setFallbackFee(e.fallbackFee),this._numerator=null,e.numerator!=null&&this.setNumerator(e.numerator),this._denominator=null,e.denominator!=null&&this.setDenominator(e.denominator)}get fallbackFee(){return this._fallbackFee}setFallbackFee(e){return this._fallbackFee=e,this}get numerator(){return this._numerator}setNumerator(e){return this._numerator=typeof e=="number"?Long$1.fromNumber(e):e,this}get denominator(){return this._denominator}setDenominator(e){return this._denominator=typeof e=="number"?Long$1.fromNumber(e):e,this}static _fromProtobuf(e){const t=e.royaltyFee,o=t.exchangeValueFraction;return new CustomRoyalyFee({feeCollectorAccountId:e.feeCollectorAccountId!=null?AccountId._fromProtobuf(e.feeCollectorAccountId):void 0,allCollectorsAreExempt:e.allCollectorsAreExempt!=null?e.allCollectorsAreExempt:void 0,fallbackFee:t.fallbackFee!=null?CustomFixedFee._fromProtobuf({fixedFee:t.fallbackFee}):void 0,numerator:o.numerator!=null?o.numerator:void 0,denominator:o.denominator!=null?o.denominator:void 0})}_toProtobuf(){return{feeCollectorAccountId:this.feeCollectorAccountId!=null?this.feeCollectorAccountId._toProtobuf():null,allCollectorsAreExempt:this.allCollectorsAreExempt,royaltyFee:{exchangeValueFraction:{numerator:this._numerator,denominator:this._denominator},fallbackFee:this._fallbackFee!=null?this._fallbackFee._toProtobuf().fixedFee:null}}}}class DelegateContractId extends ContractId{constructor(e,t,o,c){super(e,t,o,c)}static fromEvmAddress(e,t,o){return new DelegateContractId(e,t,0,decode$5(o))}static fromString(e){return new DelegateContractId(ContractId.fromString(e))}static _fromProtobuf(e){return new DelegateContractId(ContractId._fromProtobuf(e))}static fromBytes(e){return new DelegateContractId(ContractId.fromBytes(e))}static fromSolidityAddress(e){return new DelegateContractId(ContractId.fromSolidityAddress(e))}clone(){const e=new DelegateContractId(this);return e._checksum=this._checksum,e}_toProtobufKey(){return{delegatableContractId:this._toProtobuf()}}static __fromProtobufKey(e){return DelegateContractId._fromProtobuf(e)}}CACHE$1.setDelegateContractId(n=>DelegateContractId.__fromProtobufKey(n));class EthereumTransaction extends Transaction{constructor(e={}){super(),this._ethereumData=null,this._callDataFileId=null,this._maxGasAllowance=null,e.ethereumData!=null&&this.setEthereumData(e.ethereumData),e.callData!=null&&this.setCallDataFileId(e.callData),e.callDataFileId!=null&&this.setCallDataFileId(e.callDataFileId),e.maxGasAllowance!=null&&this.setMaxGasAllowanceHbar(e.maxGasAllowance)}static _fromProtobuf(e,t,o,c,l){const d=l[0].ethereumTransaction;return Transaction._fromProtobufTransactions(new EthereumTransaction({ethereumData:d.ethereumData!=null?d.ethereumData:void 0,callData:d.callData!=null?FileId._fromProtobuf(d.callData):void 0,maxGasAllowance:d.maxGasAllowance!=null?Hbar.fromTinybars(d.maxGasAllowance):void 0}),e,t,o,c,l)}get ethereumData(){return this._ethereumData}setEthereumData(e){return this._requireNotFrozen(),this._ethereumData=e,this}get callData(){return this.callDataFileId}setCallData(e){return this.setCallDataFileId(e)}get callDataFileId(){return this._callDataFileId}setCallDataFileId(e){return this._requireNotFrozen(),this._callDataFileId=e,this}get maxGasAllowance(){return this._maxGasAllowance}setMaxGasAllowance(e){return this.setMaxGasAllowanceHbar(e)}setMaxGasAllowanceHbar(e){return this._requireNotFrozen(),this._maxGasAllowance=e instanceof Hbar?e:new Hbar(e),this}_validateChecksums(e){this._ethereumData!=null&&this._ethereumData instanceof FileId&&this._ethereumData.validateChecksum(e)}_execute(e,t){return e.smartContract.callEthereum(t)}_getTransactionDataCase(){return"ethereumTransaction"}_makeTransactionData(){return{ethereumData:this._ethereumData,callData:this._callDataFileId!=null?this._callDataFileId._toProtobuf():null,maxGasAllowance:this._maxGasAllowance!=null?this._maxGasAllowance.toTinybars():null}}_getLogId(){return`EthereumTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("ethereumTransaction",EthereumTransaction._fromProtobuf);class EthereumTransactionData{constructor(e){this.callData=e.callData}static fromBytes(e){if(e.length===0)throw new Error("empty bytes");switch(e[0]){case 1:return CACHE$1.ethereumTransactionDataEip2930FromBytes(e);case 2:return CACHE$1.ethereumTransactionDataEip1559FromBytes(e);default:return CACHE$1.ethereumTransactionDataLegacyFromBytes(e)}}toBytes(){throw new Error("not implemented")}toString(){throw new Error("not implemented")}toJSON(){throw new Error("not implemented")}}class EthereumTransactionDataLegacy extends EthereumTransactionData{constructor(e){super(e),this.nonce=e.nonce,this.gasPrice=e.gasPrice,this.gasLimit=e.gasLimit,this.to=e.to,this.value=e.value,this.v=e.v,this.r=e.r,this.s=e.s}static fromBytes(e){if(e.length===0)throw new Error("empty bytes");const t=decode$8(e);if(t.length!=9)throw new Error("invalid ethereum transaction data");return new EthereumTransactionDataLegacy({nonce:decode$5(t[0]),gasPrice:decode$5(t[1]),gasLimit:decode$5(t[2]),to:decode$5(t[3]),value:decode$5(t[4]),callData:decode$5(t[5]),v:decode$5(t[6]),r:decode$5(t[7]),s:decode$5(t[8])})}toBytes(){return decode$5(encode$8([this.nonce,this.gasPrice,this.gasLimit,this.to,this.value,this.callData,this.v,this.r,this.s]))}toString(){return JSON.stringify(this.toJSON(),null,2)}toJSON(){return{nonce:encode$3(this.nonce),gasPrice:encode$3(this.gasPrice),gasLimit:encode$3(this.gasLimit),to:encode$3(this.to),value:encode$3(this.value),callData:encode$3(this.callData),v:encode$3(this.v),r:encode$3(this.r),s:encode$3(this.s)}}}CACHE$1.setEthereumTransactionDataLegacyFromBytes(n=>EthereumTransactionDataLegacy.fromBytes(n));class EthereumTransactionDataEip1559 extends EthereumTransactionData{constructor(e){super(e),this.chainId=e.chainId,this.nonce=e.nonce,this.maxPriorityGas=e.maxPriorityGas,this.maxGas=e.maxGas,this.gasLimit=e.gasLimit,this.to=e.to,this.value=e.value,this.accessList=e.accessList,this.recId=e.recId,this.r=e.r,this.s=e.s}static fromBytes(e){if(e.length===0)throw new Error("empty bytes");const t=decode$8(e.subarray(1));if(!Array.isArray(t))throw new Error("ethereum data is not a list");if(t.length!=12)throw new Error("invalid ethereum transaction data");return new EthereumTransactionDataEip1559({chainId:decode$5(t[0]),nonce:decode$5(t[1]),maxPriorityGas:decode$5(t[2]),maxGas:decode$5(t[3]),gasLimit:decode$5(t[4]),to:decode$5(t[5]),value:decode$5(t[6]),callData:decode$5(t[7]),accessList:t[8].map(o=>decode$5(o)),recId:decode$5(t[9]),r:decode$5(t[10]),s:decode$5(t[11])})}toBytes(){const e=encode$8([this.chainId,this.nonce,this.maxPriorityGas,this.maxGas,this.gasLimit,this.to,this.value,this.callData,this.accessList,this.recId,this.r,this.s]);return decode$5("02"+e.substring(2))}toString(){return JSON.stringify(this.toJSON(),null,2)}toJSON(){return{chainId:encode$3(this.chainId),nonce:encode$3(this.nonce),maxPriorityGas:encode$3(this.maxPriorityGas),maxGas:encode$3(this.maxGas),gasLimit:encode$3(this.gasLimit),to:encode$3(this.to),value:encode$3(this.value),callData:encode$3(this.callData),accessList:this.accessList.map(e=>encode$3(e)),recId:encode$3(this.recId),r:encode$3(this.r),s:encode$3(this.s)}}}CACHE$1.setEthereumTransactionDataEip1559FromBytes(n=>EthereumTransactionDataEip1559.fromBytes(n));class EthereumTransactionDataEip2930 extends EthereumTransactionData{constructor(e){super(e),this.chainId=e.chainId,this.nonce=e.nonce,this.gasPrice=e.gasPrice,this.gasLimit=e.gasLimit,this.to=e.to,this.value=e.value,this.accessList=e.accessList,this.recId=e.recId,this.r=e.r,this.s=e.s}static fromBytes(e){if(e.length===0)throw new Error("empty bytes");const t=decode$8(e.subarray(1));if(!Array.isArray(t))throw new Error("ethereum data is not a list");if(t.length!==11)throw new Error("invalid ethereum transaction data");return new EthereumTransactionDataEip2930({chainId:decode$5(t[0]),nonce:decode$5(t[1]),gasPrice:decode$5(t[2]),gasLimit:decode$5(t[3]),to:decode$5(t[4]),value:decode$5(t[5]),callData:decode$5(t[6]),accessList:t[7].map(o=>decode$5(o)),recId:decode$5(t[8]),r:decode$5(t[9]),s:decode$5(t[10])})}toBytes(){const e=encode$8([this.chainId,this.nonce,this.gasPrice,this.gasLimit,this.to,this.value,this.callData,this.accessList,this.recId,this.r,this.s]);return decode$5("01"+e.substring(2))}toString(){return JSON.stringify(this.toJSON(),null,2)}toJSON(){return{chainId:encode$3(this.chainId),nonce:encode$3(this.nonce),gasPrice:encode$3(this.gasPrice),gasLimit:encode$3(this.gasLimit),to:encode$3(this.to),value:encode$3(this.value),callData:encode$3(this.callData),accessList:this.accessList.map(e=>encode$3(e)),recId:encode$3(this.recId),r:encode$3(this.r),s:encode$3(this.s)}}}CACHE$1.setEthereumTransactionDataEip2930FromBytes(n=>EthereumTransactionDataEip2930.fromBytes(n));class FeeDataType{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case FeeDataType.Default:return"DEFAULT";case FeeDataType.TokenFungibleCommon:return"TOKEN_FUNGIBLE_COMMON";case FeeDataType.TokenNonFungibleUnique:return"TOKEN_NON_FUNGIBLE_UNIQUE";case FeeDataType.TokenFungibleCommonWithCustomFees:return"TOKEN_FUNGIBLE_COMMON_WITH_CUSTOM_FEES";case FeeDataType.TokenNonFungibleUniqueWithCustomFees:return"TOKEN_NON_FUNGIBLE_UNIQUE_WITH_CUSTOM_FEES";case FeeDataType.ScheduleCreateContractCall:return"SCHEDULE_CREATE_CONTRACT_CALL";default:return`UNKNOWN (${this._code})`}}static _fromCode(e){switch(e){case 0:return FeeDataType.Default;case 1:return FeeDataType.TokenFungibleCommon;case 2:return FeeDataType.TokenNonFungibleUnique;case 3:return FeeDataType.TokenFungibleCommonWithCustomFees;case 4:return FeeDataType.TokenNonFungibleUniqueWithCustomFees;case 5:return FeeDataType.ScheduleCreateContractCall}throw new Error(`(BUG) SubType.fromCode() does not handle code: ${e}`)}valueOf(){return this._code}}FeeDataType.Default=new FeeDataType(0);FeeDataType.TokenFungibleCommon=new FeeDataType(1);FeeDataType.TokenNonFungibleUnique=new FeeDataType(2);FeeDataType.TokenFungibleCommonWithCustomFees=new FeeDataType(3);FeeDataType.TokenNonFungibleUniqueWithCustomFees=new FeeDataType(4);FeeDataType.ScheduleCreateContractCall=new FeeDataType(5);class RequestType{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case RequestType.None:return"NONE";case RequestType.CryptoTransfer:return"CryptoTransfer";case RequestType.CryptoUpdate:return"CryptoUpdate";case RequestType.CryptoDelete:return"CryptoDelete";case RequestType.CryptoAddLiveHash:return"CryptoAddLiveHash";case RequestType.CryptoDeleteLiveHash:return"CryptoDeleteLiveHash";case RequestType.ContractCall:return"ContractCall";case RequestType.ContractCreate:return"ContractCreate";case RequestType.ContractUpdate:return"ContractUpdate";case RequestType.FileCreate:return"FileCreate";case RequestType.FileAppend:return"FileAppend";case RequestType.FileUpdate:return"FileUpdate";case RequestType.FileDelete:return"FileDelete";case RequestType.CryptoGetAccountBalance:return"CryptoGetAccountBalance";case RequestType.CryptoGetAccountRecords:return"CryptoGetAccountRecords";case RequestType.CryptoGetInfo:return"CryptoGetInfo";case RequestType.ContractCallLocal:return"ContractCallLocal";case RequestType.ContractGetInfo:return"ContractGetInfo";case RequestType.ContractGetBytecode:return"ContractGetBytecode";case RequestType.GetBySolidityID:return"GetBySolidityID";case RequestType.GetByKey:return"GetByKey";case RequestType.CryptoGetLiveHash:return"CryptoGetLiveHash";case RequestType.CryptoGetStakers:return"CryptoGetStakers";case RequestType.FileGetContents:return"FileGetContents";case RequestType.FileGetInfo:return"FileGetInfo";case RequestType.TransactionGetRecord:return"TransactionGetRecord";case RequestType.ContractGetRecords:return"ContractGetRecords";case RequestType.CryptoCreate:return"CryptoCreate";case RequestType.SystemDelete:return"SystemDelete";case RequestType.SystemUndelete:return"SystemUndelete";case RequestType.ContractDelete:return"ContractDelete";case RequestType.Freeze:return"Freeze";case RequestType.CreateTransactionRecord:return"CreateTransactionRecord";case RequestType.CryptoAccountAutoRenew:return"CryptoAccountAutoRenew";case RequestType.ContractAutoRenew:return"ContractAutoRenew";case RequestType.GetVersionInfo:return"GetVersionInfo";case RequestType.TransactionGetReceipt:return"TransactionGetReceipt";case RequestType.ConsensusCreateTopic:return"ConsensusCreateTopic";case RequestType.ConsensusUpdateTopic:return"ConsensusUpdateTopic";case RequestType.ConsensusDeleteTopic:return"ConsensusDeleteTopic";case RequestType.ConsensusGetTopicInfo:return"ConsensusGetTopicInfo";case RequestType.ConsensusSubmitMessage:return"ConsensusSubmitMessage";case RequestType.UncheckedSubmit:return"UncheckedSubmit";case RequestType.TokenCreate:return"TokenCreate";case RequestType.TokenGetInfo:return"TokenGetInfo";case RequestType.TokenFreezeAccount:return"TokenFreezeAccount";case RequestType.TokenUnfreezeAccount:return"TokenUnfreezeAccount";case RequestType.TokenGrantKycToAccount:return"TokenGrantKycToAccount";case RequestType.TokenRevokeKycFromAccount:return"TokenRevokeKycFromAccount";case RequestType.TokenDelete:return"TokenDelete";case RequestType.TokenUpdate:return"TokenUpdate";case RequestType.TokenMint:return"TokenMint";case RequestType.TokenBurn:return"TokenBurn";case RequestType.TokenAccountWipe:return"TokenAccountWipe";case RequestType.TokenAssociateToAccount:return"TokenAssociateToAccount";case RequestType.TokenDissociateFromAccount:return"TokenDissociateFromAccount";case RequestType.ScheduleCreate:return"ScheduleCreate";case RequestType.ScheduleDelete:return"ScheduleDelete";case RequestType.ScheduleSign:return"ScheduleSign";case RequestType.ScheduleGetInfo:return"ScheduleGetInfo";case RequestType.TokenGetAccountNftInfos:return"TokenGetAccountNftInfos";case RequestType.TokenGetNftInfo:return"TokenGetNftInfo";case RequestType.TokenGetNftInfos:return"TokenGetNftInfos";case RequestType.TokenFeeScheduleUpdate:return"TokenFeeScheduleUpdate";case RequestType.NetworkGetExecutionTime:return"NetworkGetExecutionTime";case RequestType.TokenPause:return"TokenPause";case RequestType.TokenUnpause:return"TokenUnpause";case RequestType.CryptoApproveAllowance:return"CryptoApproveAllowance";case RequestType.CryptoDeleteAllowance:return"CryptoDeleteAllowance";case RequestType.GetAccountDetails:return"GetAccountDetails";case RequestType.EthereumTransaction:return"EthereumTransaction";case RequestType.NodeStakeUpdate:return"NodeStakeUpdate";case RequestType.Prng:return"UtilPrng";default:return`UNKNOWN (${this._code})`}}static _fromCode(e){switch(e){case 0:return RequestType.None;case 1:return RequestType.CryptoTransfer;case 2:return RequestType.CryptoUpdate;case 3:return RequestType.CryptoDelete;case 4:return RequestType.CryptoAddLiveHash;case 5:return RequestType.CryptoDeleteLiveHash;case 6:return RequestType.ContractCall;case 7:return RequestType.ContractCreate;case 8:return RequestType.ContractUpdate;case 9:return RequestType.FileCreate;case 10:return RequestType.FileAppend;case 11:return RequestType.FileUpdate;case 12:return RequestType.FileDelete;case 13:return RequestType.CryptoGetAccountBalance;case 14:return RequestType.CryptoGetAccountRecords;case 15:return RequestType.CryptoGetInfo;case 16:return RequestType.ContractCallLocal;case 17:return RequestType.ContractGetInfo;case 18:return RequestType.ContractGetBytecode;case 19:return RequestType.GetBySolidityID;case 20:return RequestType.GetByKey;case 21:return RequestType.CryptoGetLiveHash;case 22:return RequestType.CryptoGetStakers;case 23:return RequestType.FileGetContents;case 24:return RequestType.FileGetInfo;case 25:return RequestType.TransactionGetRecord;case 26:return RequestType.ContractGetRecords;case 27:return RequestType.CryptoCreate;case 28:return RequestType.SystemDelete;case 29:return RequestType.SystemUndelete;case 30:return RequestType.ContractDelete;case 31:return RequestType.Freeze;case 32:return RequestType.CreateTransactionRecord;case 33:return RequestType.CryptoAccountAutoRenew;case 34:return RequestType.ContractAutoRenew;case 35:return RequestType.GetVersionInfo;case 36:return RequestType.TransactionGetReceipt;case 50:return RequestType.ConsensusCreateTopic;case 51:return RequestType.ConsensusUpdateTopic;case 52:return RequestType.ConsensusDeleteTopic;case 53:return RequestType.ConsensusGetTopicInfo;case 54:return RequestType.ConsensusSubmitMessage;case 55:return RequestType.UncheckedSubmit;case 56:return RequestType.TokenCreate;case 58:return RequestType.TokenGetInfo;case 59:return RequestType.TokenFreezeAccount;case 60:return RequestType.TokenUnfreezeAccount;case 61:return RequestType.TokenGrantKycToAccount;case 62:return RequestType.TokenRevokeKycFromAccount;case 63:return RequestType.TokenDelete;case 64:return RequestType.TokenUpdate;case 65:return RequestType.TokenMint;case 66:return RequestType.TokenBurn;case 67:return RequestType.TokenAccountWipe;case 68:return RequestType.TokenAssociateToAccount;case 69:return RequestType.TokenDissociateFromAccount;case 70:return RequestType.ScheduleCreate;case 71:return RequestType.ScheduleDelete;case 72:return RequestType.ScheduleSign;case 73:return RequestType.ScheduleGetInfo;case 74:return RequestType.TokenGetAccountNftInfos;case 75:return RequestType.TokenGetNftInfo;case 76:return RequestType.TokenGetNftInfos;case 77:return RequestType.TokenFeeScheduleUpdate;case 78:return RequestType.NetworkGetExecutionTime;case 79:return RequestType.TokenPause;case 80:return RequestType.TokenUnpause;case 81:return RequestType.CryptoApproveAllowance;case 82:return RequestType.CryptoDeleteAllowance;case 83:return RequestType.GetAccountDetails;case 84:return RequestType.EthereumTransaction;case 85:return RequestType.NodeStakeUpdate;case 86:return RequestType.Prng}throw new Error(`(BUG) RequestType.fromCode() does not handle code: ${e}`)}valueOf(){return this._code}}RequestType.None=new RequestType(0);RequestType.CryptoTransfer=new RequestType(1);RequestType.CryptoUpdate=new RequestType(2);RequestType.CryptoDelete=new RequestType(3);RequestType.CryptoAddLiveHash=new RequestType(4);RequestType.CryptoDeleteLiveHash=new RequestType(5);RequestType.ContractCall=new RequestType(6);RequestType.ContractCreate=new RequestType(7);RequestType.ContractUpdate=new RequestType(8);RequestType.FileCreate=new RequestType(9);RequestType.FileAppend=new RequestType(10);RequestType.FileUpdate=new RequestType(11);RequestType.FileDelete=new RequestType(12);RequestType.CryptoGetAccountBalance=new RequestType(13);RequestType.CryptoGetAccountRecords=new RequestType(14);RequestType.CryptoGetInfo=new RequestType(15);RequestType.ContractCallLocal=new RequestType(16);RequestType.ContractGetInfo=new RequestType(17);RequestType.ContractGetBytecode=new RequestType(18);RequestType.GetBySolidityID=new RequestType(19);RequestType.GetByKey=new RequestType(20);RequestType.CryptoGetLiveHash=new RequestType(21);RequestType.CryptoGetStakers=new RequestType(22);RequestType.FileGetContents=new RequestType(23);RequestType.FileGetInfo=new RequestType(24);RequestType.TransactionGetRecord=new RequestType(25);RequestType.ContractGetRecords=new RequestType(26);RequestType.CryptoCreate=new RequestType(27);RequestType.SystemDelete=new RequestType(28);RequestType.SystemUndelete=new RequestType(29);RequestType.ContractDelete=new RequestType(30);RequestType.Freeze=new RequestType(31);RequestType.CreateTransactionRecord=new RequestType(32);RequestType.CryptoAccountAutoRenew=new RequestType(33);RequestType.ContractAutoRenew=new RequestType(34);RequestType.GetVersionInfo=new RequestType(35);RequestType.TransactionGetReceipt=new RequestType(36);RequestType.ConsensusCreateTopic=new RequestType(50);RequestType.ConsensusUpdateTopic=new RequestType(51);RequestType.ConsensusDeleteTopic=new RequestType(52);RequestType.ConsensusGetTopicInfo=new RequestType(53);RequestType.ConsensusSubmitMessage=new RequestType(54);RequestType.UncheckedSubmit=new RequestType(55);RequestType.TokenCreate=new RequestType(56);RequestType.TokenGetInfo=new RequestType(58);RequestType.TokenFreezeAccount=new RequestType(59);RequestType.TokenUnfreezeAccount=new RequestType(60);RequestType.TokenGrantKycToAccount=new RequestType(61);RequestType.TokenRevokeKycFromAccount=new RequestType(62);RequestType.TokenDelete=new RequestType(63);RequestType.TokenUpdate=new RequestType(64);RequestType.TokenMint=new RequestType(65);RequestType.TokenBurn=new RequestType(66);RequestType.TokenAccountWipe=new RequestType(67);RequestType.TokenAssociateToAccount=new RequestType(68);RequestType.TokenDissociateFromAccount=new RequestType(69);RequestType.ScheduleCreate=new RequestType(70);RequestType.ScheduleDelete=new RequestType(71);RequestType.ScheduleSign=new RequestType(72);RequestType.ScheduleGetInfo=new RequestType(73);RequestType.TokenGetAccountNftInfos=new RequestType(74);RequestType.TokenGetNftInfo=new RequestType(75);RequestType.TokenGetNftInfos=new RequestType(76);RequestType.TokenFeeScheduleUpdate=new RequestType(77);RequestType.NetworkGetExecutionTime=new RequestType(78);RequestType.TokenPause=new RequestType(79);RequestType.TokenUnpause=new RequestType(80);RequestType.CryptoApproveAllowance=new RequestType(81);RequestType.CryptoDeleteAllowance=new RequestType(82);RequestType.GetAccountDetails=new RequestType(83);RequestType.EthereumTransaction=new RequestType(84);RequestType.NodeStakeUpdate=new RequestType(85);RequestType.Prng=new RequestType(86);class FileContentsQuery extends Query{constructor(e={}){super(),this._fileId=null,e.fileId!=null&&this.setFileId(e.fileId)}static _fromProtobuf(e){const t=e.fileGetContents;return new FileContentsQuery({fileId:t.fileID!=null?FileId._fromProtobuf(t.fileID):void 0})}_validateChecksums(e){this._fileId!=null&&this._fileId.validateChecksum(e)}_execute(e,t){return e.file.getFileContent(t)}get fileId(){return this._fileId}setFileId(e){return this._fileId=typeof e=="string"?FileId.fromString(e):e.clone(),this}_mapResponseHeader(e){return e.fileGetContents.header}_mapResponse(e){const c=e.fileGetContents.fileContents.contents;return Promise.resolve(c)}_onMakeRequest(e){return{fileGetContents:{header:e,fileID:this._fileId!=null?this._fileId._toProtobuf():null}}}_getLogId(){return`FileContentsQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("fileGetContents",FileContentsQuery._fromProtobuf);const{proto:proto$2}=HashgraphProto;class FileInfo{constructor(e){this.fileId=e.fileId,this.size=e.size,this.expirationTime=e.expirationTime,this.isDeleted=e.isDeleted,this.keys=e.keys,this.fileMemo=e.fileMemo,this.ledgerId=e.ledgerId,Object.freeze(this)}static _fromProtobuf(e){const t=e.size;return new FileInfo({fileId:FileId._fromProtobuf(e.fileID),size:t instanceof Long$1?t:Long$1.fromValue(t),expirationTime:Timestamp._fromProtobuf(e.expirationTime),isDeleted:e.deleted,keys:e.keys!=null?KeyList.__fromProtobufKeyList(e.keys):new KeyList,fileMemo:e.memo!=null?e.memo:"",ledgerId:e.ledgerId!=null?LedgerId.fromBytes(e.ledgerId):null})}_toProtobuf(){return{fileID:this.fileId._toProtobuf(),size:this.size,expirationTime:this.expirationTime._toProtobuf(),deleted:this.isDeleted,keys:this.keys._toProtobufKey().keyList,memo:this.fileMemo,ledgerId:this.ledgerId!=null?this.ledgerId.toBytes():null}}static fromBytes(e){return FileInfo._fromProtobuf(lib.proto.FileGetInfoResponse.FileInfo.decode(e))}toBytes(){return proto$2.FileGetInfoResponse.FileInfo.encode(this._toProtobuf()).finish()}}class FileInfoQuery extends Query{constructor(e={}){super(),this._fileId=null,e.fileId!=null&&this.setFileId(e.fileId)}static _fromProtobuf(e){const t=e.fileGetInfo;return new FileInfoQuery({fileId:t.fileID!=null?FileId._fromProtobuf(t.fileID):void 0})}get fileId(){return this._fileId}setFileId(e){return this._fileId=typeof e=="string"?FileId.fromString(e):e.clone(),this}async getCost(e){return super.getCost(e)}_validateChecksums(e){this._fileId!=null&&this._fileId.validateChecksum(e)}_execute(e,t){return e.file.getFileInfo(t)}_mapResponseHeader(e){return e.fileGetInfo.header}_mapResponse(e,t,o){const c=e.fileGetInfo;return Promise.resolve(FileInfo._fromProtobuf(c.fileInfo))}_onMakeRequest(e){return{fileGetInfo:{header:e,fileID:this._fileId!=null?this._fileId._toProtobuf():null}}}_getLogId(){return`FileInfoQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("fileGetInfo",FileInfoQuery._fromProtobuf);class FileUpdateTransaction extends Transaction{constructor(e={}){super(),this._fileId=null,this._keys=null,this._expirationTime=null,this._contents=null,this._fileMemo=null,e.fileId!=null&&this.setFileId(e.fileId),e.keys!=null&&this.setKeys(e.keys),e.expirationTime!=null&&this.setExpirationTime(e.expirationTime),e.contents!=null&&this.setContents(e.contents),e.fileMemo!=null&&this.setFileMemo(e.fileMemo)}static _fromProtobuf(e,t,o,c,l){const d=l[0].fileUpdate;return Transaction._fromProtobufTransactions(new FileUpdateTransaction({fileId:d.fileID!=null?FileId._fromProtobuf(d.fileID):void 0,keys:d.keys!=null&&d.keys.keys!=null?d.keys.keys.map(g=>Key._fromProtobufKey(g)):void 0,expirationTime:d.expirationTime!=null?Timestamp._fromProtobuf(d.expirationTime):void 0,contents:d.contents!=null?d.contents:void 0,fileMemo:d.memo!=null&&d.memo.value!=null?d.memo.value:void 0}),e,t,o,c,l)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId=typeof e=="string"?FileId.fromString(e):e.clone(),this}get keys(){return this._keys}setKeys(e){if(this._requireNotFrozen(),e instanceof KeyList&&e.threshold!=null)throw new Error("Cannot set threshold key as file key");return this._keys=e instanceof KeyList?e.toArray():e,this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof Timestamp?e:Timestamp.fromDate(e),this}get contents(){return this._contents}setContents(e){return this._requireNotFrozen(),this._contents=e instanceof Uint8Array?e:encode(e),this}get fileMemo(){return this._fileMemo}setFileMemo(e){return this._requireNotFrozen(),this._fileMemo=e,this}clearFileMemo(){return this._requireNotFrozen(),this._fileMemo=null,this}_validateChecksums(e){this._fileId!=null&&this._fileId.validateChecksum(e)}_execute(e,t){return e.file.updateFile(t)}_getTransactionDataCase(){return"fileUpdate"}_makeTransactionData(){return{fileID:this._fileId!=null?this._fileId._toProtobuf():null,keys:this._keys!=null?{keys:this._keys.map(e=>e._toProtobufKey())}:null,expirationTime:this._expirationTime!=null?this._expirationTime._toProtobuf():null,contents:this._contents,memo:this._fileMemo!=null?{value:this._fileMemo}:null}}_getLogId(){return`FileUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("fileUpdate",FileUpdateTransaction._fromProtobuf);class FreezeType{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case FreezeType.UnknownFreezeType:return"UNKNOWN_FREEZE_TYPE";case FreezeType.FreezeOnly:return"FREEZE_ONLY";case FreezeType.PrepareUpgrade:return"PREPARE_UPGRADE";case FreezeType.FreezeUpgrade:return"FREEZE_UPGRADE";case FreezeType.FreezeAbort:return"FREEZE_ABORT";case FreezeType.TelemetryUpgrade:return"TELEMETRY_UPGRADE";default:return`UNKNOWN (${this._code})`}}static _fromCode(e){switch(e){case 0:return FreezeType.UnknownFreezeType;case 1:return FreezeType.FreezeOnly;case 2:return FreezeType.PrepareUpgrade;case 3:return FreezeType.FreezeUpgrade;case 4:return FreezeType.FreezeAbort;case 5:return FreezeType.TelemetryUpgrade;default:throw new Error(`(BUG) Status.fromCode() does not handle code: ${e}`)}}valueOf(){return this._code}}FreezeType.UnknownFreezeType=new FreezeType(0);FreezeType.FreezeOnly=new FreezeType(1);FreezeType.PrepareUpgrade=new FreezeType(2);FreezeType.FreezeUpgrade=new FreezeType(3);FreezeType.FreezeAbort=new FreezeType(4);FreezeType.TelemetryUpgrade=new FreezeType(5);class FreezeTransaction extends Transaction{constructor(e={}){super(),this._startTime=null,this._startTimestamp=null,this._endTime=null,this._fileId=null,this._fileHash=null,this._freezeType=null,e.startTime!=null&&this.setStartTime(e.startTime.hour,e.startTime.minute),e.endTime!=null&&this.setEndTime(e.endTime.hour,e.endTime.minute),e.startTimestamp!=null&&this.setStartTimestamp(e.startTimestamp),e.updateFileId!=null&&this.setUpdateFileId(e.updateFileId),e.fileId!=null&&this.setFileId(e.fileId),e.fileHash!=null&&this.setFileHash(e.fileHash),e.freezeType!=null&&this.setFreezeType(e.freezeType)}static _fromProtobuf(e,t,o,c,l){const d=l[0].freeze;return Transaction._fromProtobufTransactions(new FreezeTransaction({startTime:d.startHour!=null&&d.startMin!=null?{hour:d.startHour,minute:d.startMin}:void 0,endTime:d.endHour!=null&&d.endMin!=null?{hour:d.endHour,minute:d.endMin}:void 0,startTimestamp:d.startTime!=null?Timestamp._fromProtobuf(d.startTime):void 0,updateFileId:d.updateFile!=null?FileId._fromProtobuf(d.updateFile):void 0,fileHash:d.fileHash!=null?d.fileHash:void 0,freezeType:d.freezeType!=null?FreezeType._fromCode(d.freezeType):void 0}),e,t,o,c,l)}get startTime(){return null}setStartTime(e,t){if(this._requireNotFrozen(),typeof e=="string"){const o=e.split(":");this._startTime={hour:Number(o[0]),minute:Number(o[1])}}else this._startTime={hour:e,minute:t};return this}get startTimestamp(){return this._startTimestamp}setStartTimestamp(e){return this._requireNotFrozen(),this._startTimestamp=e,this}get endTime(){return console.warn("`FreezeTransaction.endTime` is deprecated"),this._endTime}setEndTime(e,t){if(console.warn("`FreezeTransaction.endTime` is deprecated"),this._requireNotFrozen(),typeof e=="string"){const o=e.split(":");this._endTime={hour:Number(o[0]),minute:Number(o[1])}}else this._endTime={hour:e,minute:t};return this}get updateFileId(){return this.fileId}setUpdateFileId(e){return this.setFileId(e)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId=e,this}get fileHash(){return this._fileHash}setFileHash(e){return this._requireNotFrozen(),this._fileHash=typeof e=="string"?decode$5(e):e,this}get freezeType(){return this._freezeType}setFreezeType(e){return this._requireNotFrozen(),this._freezeType=e,this}_getTransactionDataCase(){return"freeze"}_makeTransactionData(){return{startTime:this._startTimestamp!=null?this._startTimestamp._toProtobuf():null,updateFile:this._fileId!=null?this._fileId._toProtobuf():null,fileHash:this._fileHash,freezeType:this._freezeType!=null?this._freezeType.valueOf():null}}_getLogId(){return`FreezeTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("freeze",FreezeTransaction._fromProtobuf);class LiveHashAddTransaction extends Transaction{constructor(e={}){super(),this._hash=null,this._keys=null,this._duration=null,this._accountId=null,e.hash!=null&&this.setHash(e.hash),e.keys!=null&&this.setKeys(e.keys),e.duration!=null&&this.setDuration(e.duration),e.accountId!=null&&this.setAccountId(e.accountId)}static _fromProtobuf(e,t,o,c,l){const g=l[0].cryptoAddLiveHash.liveHash;return Transaction._fromProtobufTransactions(new LiveHashAddTransaction({hash:g.hash!=null?g.hash:void 0,keys:g.keys!=null&&g.keys.keys!=null?g.keys.keys.map(m=>Key._fromProtobufKey(m)):void 0,duration:g.duration!=null&&g.duration.seconds!=null?g.duration.seconds:void 0,accountId:g.accountId!=null?AccountId._fromProtobuf(g.accountId):void 0}),e,t,o,c,l)}get hash(){return this._hash}setHash(e){return this._requireNotFrozen(),this._hash=e,this}get keys(){return this._keys}setKeys(e){return this._requireNotFrozen(),this._keys=e instanceof KeyList?e.toArray():e,this}get duration(){return this._duration}setDuration(e){return this._requireNotFrozen(),this._duration=e instanceof Duration?e:new Duration(e),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._accountId!=null&&this._accountId.validateChecksum(e)}_execute(e,t){return e.crypto.addLiveHash(t)}_getTransactionDataCase(){return"cryptoAddLiveHash"}_makeTransactionData(){return{liveHash:{hash:this._hash,keys:this._keys!=null?{keys:this._keys.map(e=>e._toProtobufKey())}:void 0,duration:this._duration!=null?this._duration._toProtobuf():null,accountId:this._accountId!=null?this._accountId._toProtobuf():null}}}_getLogId(){return`LiveHashAddTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("cryptoAddLiveHash",LiveHashAddTransaction._fromProtobuf);class LiveHashDeleteTransaction extends Transaction{constructor(e={}){super(),this._hash=null,this._accountId=null,e.hash!=null&&this.setHash(e.hash),e.accountId!=null&&this.setAccountId(e.accountId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].cryptoDeleteLiveHash;return Transaction._fromProtobufTransactions(new LiveHashDeleteTransaction({hash:d.liveHashToDelete!=null?d.liveHashToDelete:void 0,accountId:d.accountOfLiveHash!=null?AccountId._fromProtobuf(d.accountOfLiveHash):void 0}),e,t,o,c,l)}get hash(){return this._hash}setHash(e){return this._requireNotFrozen(),this._hash=e,this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._accountId!=null&&this._accountId.validateChecksum(e)}_execute(e,t){return e.crypto.deleteLiveHash(t)}_getTransactionDataCase(){return"cryptoDeleteLiveHash"}_makeTransactionData(){return{liveHashToDelete:this._hash,accountOfLiveHash:this._accountId!=null?this._accountId._toProtobuf():null}}_getLogId(){return`LiveHashDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("cryptoDeleteLiveHash",LiveHashDeleteTransaction._fromProtobuf);class LiveHashQuery extends Query{constructor(e={}){super(),this._accountId=null,e.accountId!=null&&this.setAccountId(e.accountId),this._hash=null,e.hash!=null&&this.setHash(e.hash)}static _fromProtobuf(e){const t=e.cryptoGetLiveHash;return new LiveHashQuery({accountId:t.accountID!=null?AccountId._fromProtobuf(t.accountID):void 0,hash:t.hash!=null?t.hash:void 0})}get accountId(){return this._accountId}setAccountId(e){return this._accountId=e instanceof AccountId?e:AccountId.fromString(e),this}get liveHash(){return this._hash}setHash(e){return this._hash=e,this}_validateChecksums(e){this._accountId!=null&&this._accountId.validateChecksum(e)}_execute(e,t){return e.crypto.getLiveHash(t)}_mapResponseHeader(e){return e.cryptoGetLiveHash.header}_mapResponse(e){const t=e.cryptoGetLiveHash;return Promise.resolve(LiveHash._fromProtobuf(t.liveHash))}_onMakeRequest(e){return{cryptoGetLiveHash:{header:e,accountID:this._accountId!=null?this._accountId._toProtobuf():null,hash:this._hash}}}_getLogId(){return`LiveHashQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("cryptoGetLiveHash",LiveHashQuery._fromProtobuf);class SemanticVersion{constructor(e){this.major=e.major,this.minor=e.minor,this.patch=e.patch,Object.freeze(this)}static _fromProtobuf(e){return new SemanticVersion({major:e.major,minor:e.minor,patch:e.patch})}_toProtobuf(){return{major:this.major,minor:this.minor,patch:this.patch}}static fromBytes(e){return SemanticVersion._fromProtobuf(lib.proto.SemanticVersion.decode(e))}toBytes(){return lib.proto.SemanticVersion.encode(this._toProtobuf()).finish()}}class NetworkVersionInfo{constructor(e){this.protobufVersion=e.protobufVersion,this.servicesVesion=e.servicesVesion,Object.freeze(this)}static _fromProtobuf(e){return new NetworkVersionInfo({protobufVersion:SemanticVersion._fromProtobuf(e.hapiProtoVersion),servicesVesion:SemanticVersion._fromProtobuf(e.hederaServicesVersion)})}_toProtobuf(){return{hapiProtoVersion:this.protobufVersion._toProtobuf(),hederaServicesVersion:this.servicesVesion._toProtobuf()}}static fromBytes(e){return NetworkVersionInfo._fromProtobuf(lib.proto.NetworkGetVersionInfoResponse.decode(e))}toBytes(){return lib.proto.NetworkGetVersionInfoResponse.encode(this._toProtobuf()).finish()}}class NetworkVersionInfoQuery extends Query{constructor(){super()}static _fromProtobuf(e){return new NetworkVersionInfoQuery}_execute(e,t){return e.network.getVersionInfo(t)}_mapResponseHeader(e){return e.networkGetVersionInfo.header}_mapResponse(e){const t=e.networkGetVersionInfo;return Promise.resolve(NetworkVersionInfo._fromProtobuf(t))}_onMakeRequest(e){return{networkGetVersionInfo:{header:e}}}_getLogId(){return`NetworkVersionInfoQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("networkGetVersionInfo",NetworkVersionInfoQuery._fromProtobuf);class PrngTransaction extends Transaction{constructor(e={}){super(),this._range=null,e.range!=null&&this.setRange(e.range)}setRange(e){return this._range=e,this}get range(){return this._range}_validateChecksums(e){this._range!=null&&isNumber(this._range)&&this._validateChecksums(e)}_execute(e,t){return e.util.prng(t)}static _fromProtobuf(e,t,o,c,l){const d=l[0].utilPrng;return Transaction._fromProtobufTransactions(new PrngTransaction({range:d.range}),e,t,o,c,l)}_getTransactionDataCase(){return"utilPrng"}_makeTransactionData(){return{range:this.range}}_getLogId(){return`RandomGenerate:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("utilPrng",PrngTransaction._fromProtobuf);class ScheduleCreateTransaction extends Transaction{constructor(e={}){super(),this._adminKey=null,this._scheduledTransaction=null,this._payerAccountId=null,this._scheduleMemo=null,this._scheduledSignerPublicKeys=new Set,this._expirationTime=null,this._waitForExpiry=null,e.adminKey!=null&&this.setAdminKey(e.adminKey),e.payerAccountID!=null&&this.setPayerAccountId(e.payerAccountID),e.scheduleMemo!=null&&this.setScheduleMemo(e.scheduleMemo),this._defaultMaxTransactionFee=new Hbar(5)}static _fromProtobuf(e,t,o,c,l){const h=l[0],d=h.scheduleCreate,g=new ScheduleCreateTransaction({adminKey:d.adminKey!=null?Key._fromProtobufKey(d.adminKey):void 0,payerAccountID:d.payerAccountID!=null?AccountId._fromProtobuf(d.payerAccountID):void 0,scheduleMemo:d.memo!=null?d.memo:void 0,waitForExpiry:d.waitForExpiry!=null?d.waitForExpiry:void 0,expirationTime:d.expirationTime!=null?Timestamp._fromProtobuf(d.expirationTime):void 0});if(h.scheduleCreate!=null){const m=h.scheduleCreate.scheduledTransactionBody,v=lib.proto.TransactionBody.encode(m).finish(),p={signedTransactionBytes:lib.proto.SignedTransaction.encode({bodyBytes:v}).finish()},a=lib.proto.TransactionList.encode({transactionList:[p]}).finish(),u=Transaction.fromBytes(a);g._setScheduledTransaction(u)}return Transaction._fromProtobufTransactions(g,e,t,o,c,l)}_setScheduledTransaction(e){return this._scheduledTransaction=e,this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get payerAccountId(){return this._payerAccountId}setPayerAccountId(e){return this._requireNotFrozen(),this._payerAccountId=e,this}setScheduleMemo(e){return this._requireNotFrozen(),this._scheduleMemo=e,this}get getScheduleMemo(){return this._requireNotFrozen(),this._scheduleMemo}setScheduledTransaction(e){return this._requireNotFrozen(),e._requireNotFrozen(),this._scheduledTransaction=e.schedule()._scheduledTransaction,this}_validateChecksums(e){this._payerAccountId!=null&&this._payerAccountId.validateChecksum(e)}_execute(e,t){return e.schedule.createSchedule(t)}_getTransactionDataCase(){return"scheduleCreate"}_makeTransactionData(){return{adminKey:this._adminKey!=null?this._adminKey._toProtobufKey():null,payerAccountID:this._payerAccountId!=null?this._payerAccountId._toProtobuf():null,scheduledTransactionBody:this._scheduledTransaction!=null?this._scheduledTransaction._getScheduledTransactionBody():null,memo:this._scheduleMemo,waitForExpiry:this._waitForExpiry,expirationTime:this._expirationTime!=null?this._expirationTime._toProtobuf():null}}_getLogId(){return`ScheduleCreateTransaction:${this._transactionIds.current.validStart.toString()}`}setExpirationTime(e){return this._expirationTime=e,this}get expirationTime(){return this._requireNotFrozen(),this._expirationTime}setWaitForExpiry(e){return this._waitForExpiry=e,this}get waitForExpiry(){return this._requireNotFrozen(),this._waitForExpiry}}TRANSACTION_REGISTRY.set("scheduleCreate",ScheduleCreateTransaction._fromProtobuf);SCHEDULE_CREATE_TRANSACTION.push(()=>new ScheduleCreateTransaction);class ScheduleDeleteTransaction extends Transaction{constructor(e={}){super(),this._scheduleId=null,e.scheduleId!=null&&this.setScheduleId(e.scheduleId),this._defaultMaxTransactionFee=new Hbar(5)}static _fromProtobuf(e,t,o,c,l){const d=l[0].scheduleDelete;return Transaction._fromProtobufTransactions(new ScheduleDeleteTransaction({scheduleId:d.scheduleID!=null?ScheduleId._fromProtobuf(d.scheduleID):void 0}),e,t,o,c,l)}get scheduleId(){return this._scheduleId}setScheduleId(e){return this._requireNotFrozen(),this._scheduleId=typeof e=="string"?ScheduleId.fromString(e):e.clone(),this}_validateChecksums(e){this._scheduleId!=null&&this._scheduleId.validateChecksum(e)}_execute(e,t){return e.schedule.deleteSchedule(t)}_getTransactionDataCase(){return"scheduleDelete"}_makeTransactionData(){return{scheduleID:this._scheduleId!=null?this._scheduleId._toProtobuf():null}}_getLogId(){return`ScheduleDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("scheduleDelete",ScheduleDeleteTransaction._fromProtobuf);const{proto:proto$1}=HashgraphProto;class ScheduleInfo{constructor(e){this.scheduleId=e.scheduleId,this.creatorAccountId=e.creatorAccountID,this.payerAccountId=e.payerAccountID,this.schedulableTransactionBody=e.schedulableTransactionBody,this.signers=e.signers,this.scheduleMemo=e.scheduleMemo,this.adminKey=e.adminKey!=null?e.adminKey:null,this.expirationTime=e.expirationTime,this.executed=e.executed,this.deleted=e.deleted,this.scheduledTransactionId=e.scheduledTransactionId,this.waitForExpiry=e.waitForExpiry,Object.freeze(this)}static _fromProtobuf(e){return new ScheduleInfo({scheduleId:ScheduleId._fromProtobuf(e.scheduleID),creatorAccountID:e.creatorAccountID!=null?AccountId._fromProtobuf(e.creatorAccountID):null,payerAccountID:e.payerAccountID!=null?AccountId._fromProtobuf(e.payerAccountID):null,schedulableTransactionBody:e.scheduledTransactionBody!=null?e.scheduledTransactionBody:null,adminKey:e.adminKey!=null?Key._fromProtobufKey(e.adminKey):null,signers:e.signers!=null?KeyList.__fromProtobufKeyList(e.signers):null,scheduleMemo:e.memo!=null?e.memo:null,expirationTime:e.expirationTime!=null?Timestamp._fromProtobuf(e.expirationTime):null,executed:e.executionTime!=null?Timestamp._fromProtobuf(e.executionTime):null,deleted:e.deletionTime!=null?Timestamp._fromProtobuf(e.deletionTime):null,scheduledTransactionId:e.scheduledTransactionID!=null?TransactionId._fromProtobuf(e.scheduledTransactionID):null,waitForExpiry:e.waitForExpiry!=null?e.waitForExpiry:!1})}_toProtobuf(){return{scheduleID:this.scheduleId!=null?this.scheduleId._toProtobuf():null,creatorAccountID:this.creatorAccountId!=null?this.creatorAccountId._toProtobuf():null,payerAccountID:this.payerAccountId!=null?this.payerAccountId._toProtobuf():null,scheduledTransactionBody:this.schedulableTransactionBody!=null?this.schedulableTransactionBody:null,adminKey:this.adminKey!=null?this.adminKey._toProtobufKey():null,signers:this.signers!=null?this.signers._toProtobufKey().keyList:null,memo:this.scheduleMemo!=null?this.scheduleMemo:"",expirationTime:this.expirationTime!=null?this.expirationTime._toProtobuf():null,scheduledTransactionID:this.scheduledTransactionId!=null?this.scheduledTransactionId._toProtobuf():null,waitForExpiry:this.waitForExpiry}}get scheduledTransaction(){if(this.schedulableTransactionBody==null)throw new Error("Scheduled transaction body is empty");const e=new proto$1.SchedulableTransactionBody(this.schedulableTransactionBody),t=e.data;return Transaction.fromBytes(proto$1.TransactionList.encode({transactionList:[{signedTransactionBytes:proto$1.SignedTransaction.encode({bodyBytes:proto$1.TransactionBody.encode({transactionFee:this.schedulableTransactionBody.transactionFee,memo:this.schedulableTransactionBody.memo,[t]:e[t]}).finish()}).finish()}]}).finish())}}class ScheduleInfoQuery extends Query{constructor(e={}){super(),this._scheduleId=null,e.scheduleId!=null&&this.setScheduleId(e.scheduleId)}static _fromProtobuf(e){const t=e.scheduleGetInfo;return new ScheduleInfoQuery({scheduleId:t.scheduleID!=null?ScheduleId._fromProtobuf(t.scheduleID):void 0})}get scheduleId(){return this._scheduleId}setScheduleId(e){return this._scheduleId=typeof e=="string"?ScheduleId.fromString(e):e.clone(),this}async getCost(e){return super.getCost(e)}_validateChecksums(e){this._scheduleId!=null&&this._scheduleId.validateChecksum(e)}_execute(e,t){return e.schedule.getScheduleInfo(t)}_mapResponseHeader(e){return e.scheduleGetInfo.header}_mapResponse(e,t,o){const c=e.scheduleGetInfo;return Promise.resolve(ScheduleInfo._fromProtobuf(c.scheduleInfo))}_onMakeRequest(e){return{scheduleGetInfo:{header:e,scheduleID:this._scheduleId!=null?this._scheduleId._toProtobuf():null}}}_getLogId(){return`ScheduleInfoQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("scheduleGetInfo",ScheduleInfoQuery._fromProtobuf);class ScheduleSignTransaction extends Transaction{constructor(e={}){super(),this._scheduleId=null,e.scheduleId!=null&&this.setScheduleId(e.scheduleId),this._defaultMaxTransactionFee=new Hbar(5)}static _fromProtobuf(e,t,o,c,l){const d=l[0].scheduleSign;return Transaction._fromProtobufTransactions(new ScheduleSignTransaction({scheduleId:d.scheduleID!=null?ScheduleId._fromProtobuf(d.scheduleID):void 0}),e,t,o,c,l)}get scheduleId(){return this._scheduleId}setScheduleId(e){return this._requireNotFrozen(),this._scheduleId=typeof e=="string"?ScheduleId.fromString(e):e.clone(),this}_validateChecksums(e){this._scheduleId!=null&&this._scheduleId.validateChecksum(e)}_execute(e,t){return e.schedule.signSchedule(t)}_getTransactionDataCase(){return"scheduleSign"}_makeTransactionData(){return{scheduleID:this._scheduleId!=null?this._scheduleId._toProtobuf():null}}_getLogId(){return`ScheduleSignTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("scheduleSign",ScheduleSignTransaction._fromProtobuf);class SystemDeleteTransaction extends Transaction{constructor(e={}){super(),this._fileId=null,this._contractId=null,this._expirationTime=null,e.fileId!=null&&this.setFileId(e.fileId),e.contractId!=null&&this.setContractId(e.contractId),e.expirationTime!=null&&this.setExpirationTime(e.expirationTime)}static _fromProtobuf(e,t,o,c,l){const d=l[0].systemDelete;return Transaction._fromProtobufTransactions(new SystemDeleteTransaction({fileId:d.fileID!=null?FileId._fromProtobuf(d.fileID):void 0,contractId:d.contractID!=null?ContractId._fromProtobuf(d.contractID):void 0,expirationTime:d.expirationTime!=null?Timestamp._fromProtobuf(d.expirationTime):void 0}),e,t,o,c,l)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId=e instanceof FileId?e:FileId.fromString(e),this}get contractId(){return this._contractId}setContractId(e){return this._requireNotFrozen(),this._contractId=e instanceof ContractId?e:ContractId.fromString(e),this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e,this}_execute(e,t){return this._fileId!=null?e.file.systemDelete(t):e.smartContract.systemDelete(t)}_getTransactionDataCase(){return"systemDelete"}_makeTransactionData(){return{fileID:this._fileId!=null?this._fileId._toProtobuf():null,contractID:this._contractId!=null?this._contractId._toProtobuf():null,expirationTime:this._expirationTime!=null?this._expirationTime._toProtobuf():null}}_getLogId(){return`SystemDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("systemDelete",SystemDeleteTransaction._fromProtobuf);class SystemUndeleteTransaction extends Transaction{constructor(e={}){super(),this._fileId=null,this._contractId=null,e.fileId!=null&&this.setFileId(e.fileId),e.contractId!=null&&this.setContractId(e.contractId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].systemUndelete;return Transaction._fromProtobufTransactions(new SystemUndeleteTransaction({fileId:d.fileID!=null?FileId._fromProtobuf(d.fileID):void 0,contractId:d.contractID!=null?ContractId._fromProtobuf(d.contractID):void 0}),e,t,o,c,l)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId=e instanceof FileId?e:FileId.fromString(e),this}get contractId(){return this._contractId}setContractId(e){return this._requireNotFrozen(),this._contractId=e instanceof ContractId?e:ContractId.fromString(e),this}_execute(e,t){return this._fileId!=null?e.file.systemUndelete(t):e.smartContract.systemUndelete(t)}_getTransactionDataCase(){return"systemUndelete"}_makeTransactionData(){return{fileID:this._fileId!=null?this._fileId._toProtobuf():null,contractID:this._contractId!=null?this._contractId._toProtobuf():null}}_getLogId(){return`SystemUndeleteTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("systemUndelete",SystemUndeleteTransaction._fromProtobuf);class TokenAssociateTransaction extends Transaction{constructor(e={}){super(),this._tokenIds=null,this._accountId=null,this._defaultMaxTransactionFee=new Hbar(5),e.tokenIds!=null&&this.setTokenIds(e.tokenIds),e.accountId!=null&&this.setAccountId(e.accountId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenAssociate;return Transaction._fromProtobufTransactions(new TokenAssociateTransaction({tokenIds:d.tokens!=null?d.tokens.map(g=>TokenId._fromProtobuf(g)):void 0,accountId:d.account!=null?AccountId._fromProtobuf(d.account):void 0}),e,t,o,c,l)}get tokenIds(){return this._tokenIds}setTokenIds(e){return this._requireNotFrozen(),this._tokenIds=e.map(t=>typeof t=="string"?TokenId.fromString(t):t.clone()),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._accountId!=null&&this._accountId.validateChecksum(e);for(const t of this._tokenIds!=null?this._tokenIds:[])t?.validateChecksum(e)}_execute(e,t){return e.token.associateTokens(t)}_getTransactionDataCase(){return"tokenAssociate"}_makeTransactionData(){return{tokens:this._tokenIds!=null?this._tokenIds.map(e=>e._toProtobuf()):null,account:this._accountId!=null?this._accountId._toProtobuf():null}}_getLogId(){return`TokenAssociateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenAssociate",TokenAssociateTransaction._fromProtobuf);class TokenBurnTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,this._amount=null,this._serials=[],e.tokenId!=null&&this.setTokenId(e.tokenId),e.amount!=null&&this.setAmount(e.amount),e.serials!=null&&this.setSerials(e.serials)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenBurn;return Transaction._fromProtobufTransactions(new TokenBurnTransaction({tokenId:d.token!=null?TokenId._fromProtobuf(d.token):void 0,amount:d.amount!=null?d.amount:void 0,serials:d.serialNumbers!=null?d.serialNumbers:void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}get amount(){return this._amount}setAmount(e){return this._requireNotFrozen(),this._amount=e instanceof Long$1?e:Long$1.fromValue(e),this}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e)}get serials(){return this._serials}setSerials(e){return this._requireNotFrozen(),this._serials=e.map(t=>t instanceof Long$1?t:Long$1.fromValue(t)),this}_execute(e,t){return e.token.burnToken(t)}_getTransactionDataCase(){return"tokenBurn"}_makeTransactionData(){return{amount:this._amount,serialNumbers:this._serials,token:this._tokenId!=null?this._tokenId._toProtobuf():null}}_getLogId(){return`TokenBurnTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenBurn",TokenBurnTransaction._fromProtobuf);class TokenType{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case TokenType.FungibleCommon:return"FUNGIBLE_COMMON";case TokenType.NonFungibleUnique:return"NON_FUNGIBLE_UNIQUE";default:return`UNKNOWN (${this._code})`}}static _fromCode(e){switch(e){case 0:return TokenType.FungibleCommon;case 1:return TokenType.NonFungibleUnique}throw new Error(`(BUG) TokenType.fromCode() does not handle code: ${e}`)}valueOf(){return this._code}}TokenType.FungibleCommon=new TokenType(0);TokenType.NonFungibleUnique=new TokenType(1);class TokenSupplyType{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case TokenSupplyType.Infinite:return"INFINITE";case TokenSupplyType.Finite:return"FINITE";default:return`UNKNOWN (${this._code})`}}static _fromCode(e){switch(e){case 0:return TokenSupplyType.Infinite;case 1:return TokenSupplyType.Finite}throw new Error(`(BUG) TokenSupplyType.fromCode() does not handle code: ${e}`)}valueOf(){return this._code}}TokenSupplyType.Infinite=new TokenSupplyType(0);TokenSupplyType.Finite=new TokenSupplyType(1);class TokenCreateTransaction extends Transaction{constructor(e={}){super(),this._tokenName=null,this._tokenSymbol=null,this._decimals=null,this._initialSupply=null,this._treasuryAccountId=null,this._adminKey=null,this._kycKey=null,this._freezeKey=null,this._pauseKey=null,this._wipeKey=null,this._supplyKey=null,this._feeScheduleKey=null,this._freezeDefault=null,this._autoRenewAccountId=null,this._expirationTime=null,this._autoRenewPeriod=new Duration(DEFAULT_AUTO_RENEW_PERIOD),this._tokenMemo=null,this._customFees=[],this._tokenType=null,this._supplyType=null,this._maxSupply=null,this._defaultMaxTransactionFee=new Hbar(30),e.tokenName!=null&&this.setTokenName(e.tokenName),e.tokenSymbol!=null&&this.setTokenSymbol(e.tokenSymbol),e.decimals!=null&&this.setDecimals(e.decimals),e.initialSupply!=null&&this.setInitialSupply(e.initialSupply),e.treasuryAccountId!=null&&this.setTreasuryAccountId(e.treasuryAccountId),e.adminKey!=null&&this.setAdminKey(e.adminKey),e.kycKey!=null&&this.setKycKey(e.kycKey),e.freezeKey!=null&&this.setFreezeKey(e.freezeKey),e.pauseKey!=null&&this.setPauseKey(e.pauseKey),e.wipeKey!=null&&this.setWipeKey(e.wipeKey),e.supplyKey!=null&&this.setSupplyKey(e.supplyKey),e.feeScheduleKey!=null&&this.setFeeScheduleKey(e.feeScheduleKey),e.freezeDefault!=null&&this.setFreezeDefault(e.freezeDefault),e.autoRenewAccountId!=null&&this.setAutoRenewAccountId(e.autoRenewAccountId),e.expirationTime!=null&&this.setExpirationTime(e.expirationTime),e.autoRenewPeriod!=null&&this.setAutoRenewPeriod(e.autoRenewPeriod),e.tokenMemo!=null&&this.setTokenMemo(e.tokenMemo),e.customFees!=null&&this.setCustomFees(e.customFees),e.tokenType!=null&&this.setTokenType(e.tokenType),e.supplyType!=null&&this.setSupplyType(e.supplyType),e.maxSupply!=null&&this.setMaxSupply(e.maxSupply)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenCreation;return Transaction._fromProtobufTransactions(new TokenCreateTransaction({tokenName:d.name!=null?d.name:void 0,tokenSymbol:d.symbol!=null?d.symbol:void 0,decimals:d.decimals!=null?d.decimals:void 0,initialSupply:d.initialSupply!=null?d.initialSupply:void 0,treasuryAccountId:d.treasury!=null?AccountId._fromProtobuf(d.treasury):void 0,adminKey:d.adminKey!=null?Key._fromProtobufKey(d.adminKey):void 0,kycKey:d.kycKey!=null?Key._fromProtobufKey(d.kycKey):void 0,freezeKey:d.freezeKey!=null?Key._fromProtobufKey(d.freezeKey):void 0,pauseKey:d.pauseKey!=null?Key._fromProtobufKey(d.pauseKey):void 0,wipeKey:d.wipeKey!=null?Key._fromProtobufKey(d.wipeKey):void 0,supplyKey:d.supplyKey!=null?Key._fromProtobufKey(d.supplyKey):void 0,feeScheduleKey:d.feeScheduleKey!=null?Key._fromProtobufKey(d.feeScheduleKey):void 0,freezeDefault:d.freezeDefault!=null?d.freezeDefault:void 0,autoRenewAccountId:d.autoRenewAccount!=null?AccountId._fromProtobuf(d.autoRenewAccount):void 0,expirationTime:d.expiry!=null?Timestamp._fromProtobuf(d.expiry):void 0,autoRenewPeriod:d.autoRenewPeriod!=null?Duration._fromProtobuf(d.autoRenewPeriod):void 0,tokenMemo:d.memo!=null?d.memo:void 0,customFees:d.customFees!=null?d.customFees.map(g=>g.fixedFee!=null?CustomFixedFee._fromProtobuf(g):g.fractionalFee!=null?CustomFractionalFee._fromProtobuf(g):CustomRoyalyFee._fromProtobuf(g)):void 0,tokenType:d.tokenType!=null?TokenType._fromCode(d.tokenType):void 0,supplyType:d.supplyType!=null?TokenSupplyType._fromCode(d.supplyType):void 0,maxSupply:d.maxSupply!=null?d.maxSupply:void 0}),e,t,o,c,l)}get tokenName(){return this._tokenName}setTokenName(e){return this._requireNotFrozen(),this._tokenName=e,this}get tokenSymbol(){return this._tokenSymbol}setTokenSymbol(e){return this._requireNotFrozen(),this._tokenSymbol=e,this}get decimals(){return this._decimals}setDecimals(e){return this._requireNotFrozen(),this._decimals=e instanceof Long$1?e:Long$1.fromValue(e),this}get initialSupply(){return this._initialSupply}setInitialSupply(e){return this._requireNotFrozen(),this._initialSupply=Long$1.fromValue(e),this}get treasuryAccountId(){return this._treasuryAccountId}setTreasuryAccountId(e){return this._requireNotFrozen(),this._treasuryAccountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get kycKey(){return this._kycKey}setKycKey(e){return this._requireNotFrozen(),this._kycKey=e,this}get freezeKey(){return this._freezeKey}setFreezeKey(e){return this._requireNotFrozen(),this._freezeKey=e,this}get pauseKey(){return this._pauseKey}setPauseKey(e){return this._requireNotFrozen(),this._pauseKey=e,this}get wipeKey(){return this._wipeKey}setWipeKey(e){return this._requireNotFrozen(),this._wipeKey=e,this}get supplyKey(){return this._supplyKey}setSupplyKey(e){return this._requireNotFrozen(),this._supplyKey=e,this}get feeScheduleKey(){return this._feeScheduleKey}setFeeScheduleKey(e){return this._requireNotFrozen(),this._feeScheduleKey=e,this}get freezeDefault(){return this._freezeDefault}setFreezeDefault(e){return this._requireNotFrozen(),this._freezeDefault=e,this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._autoRenewPeriod=null,this._expirationTime=e instanceof Timestamp?e:Timestamp.fromDate(e),this}get autoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId=e instanceof AccountId?e:AccountId.fromString(e),this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof Duration?e:new Duration(e),this}get tokenMemo(){return this._tokenMemo}setTokenMemo(e){return this._requireNotFrozen(),this._tokenMemo=e,this}get customFees(){return this._customFees}setCustomFees(e){return this._customFees=e,this}get tokenType(){return this._tokenType}setTokenType(e){return this._tokenType=e,this}get supplyType(){return this._supplyType}setSupplyType(e){return this._supplyType=e,this}get maxSupply(){return this._maxSupply}setMaxSupply(e){return this._maxSupply=typeof e=="number"?Long$1.fromNumber(e):e,this}_freezeWithAccountId(e){super._freezeWithAccountId(e),this._autoRenewPeriod!=null&&e!=null&&(this._autoRenewAccountId=e)}freezeWith(e){return e!=null&&e.operatorAccountId!=null&&this._freezeWithAccountId(e.operatorAccountId),super.freezeWith(e)}_validateChecksums(e){this._treasuryAccountId!=null&&this._treasuryAccountId.validateChecksum(e),this._autoRenewAccountId!=null&&this._autoRenewAccountId.validateChecksum(e)}_execute(e,t){return e.token.createToken(t)}_getTransactionDataCase(){return"tokenCreation"}_makeTransactionData(){return{name:this._tokenName,symbol:this._tokenSymbol,decimals:this._decimals!=null?this._decimals.toInt():null,initialSupply:this._initialSupply,treasury:this._treasuryAccountId!=null?this._treasuryAccountId._toProtobuf():null,adminKey:this._adminKey!=null?this._adminKey._toProtobufKey():null,kycKey:this._kycKey!=null?this._kycKey._toProtobufKey():null,freezeKey:this._freezeKey!=null?this._freezeKey._toProtobufKey():null,pauseKey:this._pauseKey!=null?this._pauseKey._toProtobufKey():null,wipeKey:this._wipeKey!=null?this._wipeKey._toProtobufKey():null,supplyKey:this._supplyKey!=null?this._supplyKey._toProtobufKey():null,feeScheduleKey:this._feeScheduleKey!=null?this._feeScheduleKey._toProtobufKey():null,freezeDefault:this._freezeDefault,autoRenewAccount:this._autoRenewAccountId!=null?this._autoRenewAccountId._toProtobuf():null,expiry:this._expirationTime!=null?this._expirationTime._toProtobuf():null,autoRenewPeriod:this._autoRenewPeriod!=null?this._autoRenewPeriod._toProtobuf():null,memo:this._tokenMemo,customFees:this.customFees.map(e=>e._toProtobuf()),tokenType:this._tokenType!=null?this._tokenType._code:null,supplyType:this._supplyType!=null?this._supplyType._code:null,maxSupply:this.maxSupply}}_getLogId(){return`TokenCreateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenCreation",TokenCreateTransaction._fromProtobuf);class TokenDeleteTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,e.tokenId!=null&&this.setTokenId(e.tokenId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenDeletion;return Transaction._fromProtobufTransactions(new TokenDeleteTransaction({tokenId:d.token!=null?TokenId._fromProtobuf(d.token):void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e)}_execute(e,t){return e.token.deleteToken(t)}_getTransactionDataCase(){return"tokenDeletion"}_makeTransactionData(){return{token:this._tokenId!=null?this._tokenId._toProtobuf():null}}_getLogId(){return`TokenDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenDeletion",TokenDeleteTransaction._fromProtobuf);class TokenDissociateTransaction extends Transaction{constructor(e={}){super(),this._tokenIds=null,this._accountId=null,this._defaultMaxTransactionFee=new Hbar(5),e.tokenIds!=null&&this.setTokenIds(e.tokenIds),e.accountId!=null&&this.setAccountId(e.accountId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenDissociate;return Transaction._fromProtobufTransactions(new TokenDissociateTransaction({tokenIds:d.tokens!=null?d.tokens.map(g=>TokenId._fromProtobuf(g)):void 0,accountId:d.account!=null?AccountId._fromProtobuf(d.account):void 0}),e,t,o,c,l)}get tokenIds(){return this._tokenIds}setTokenIds(e){return this._requireNotFrozen(),this._tokenIds=e.map(t=>typeof t=="string"?TokenId.fromString(t):t.clone()),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._accountId!=null&&this._accountId.validateChecksum(e);for(const t of this._tokenIds!=null?this._tokenIds:[])t?.validateChecksum(e)}_execute(e,t){return e.token.dissociateTokens(t)}_getTransactionDataCase(){return"tokenDissociate"}_makeTransactionData(){return{tokens:this._tokenIds!=null?this._tokenIds.map(e=>e._toProtobuf()):null,account:this._accountId!=null?this._accountId._toProtobuf():null}}_getLogId(){return`TokenDissociateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenDissociate",TokenDissociateTransaction._fromProtobuf);class TokenFeeScheduleUpdateTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,this._customFees=[],e.tokenId!=null&&this.setTokenId(e.tokenId),e.customFees!=null&&this.setCustomFees(e.customFees)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenFeeScheduleUpdate;return Transaction._fromProtobufTransactions(new TokenFeeScheduleUpdateTransaction({tokenId:d.tokenId!=null?TokenId._fromProtobuf(d.tokenId):void 0,customFees:d.customFees!=null?d.customFees.map(g=>g.fixedFee!=null?CustomFixedFee._fromProtobuf(g):g.fractionalFee!=null?CustomFractionalFee._fromProtobuf(g):CustomRoyalyFee._fromProtobuf(g)):void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):TokenId._fromProtobuf(e._toProtobuf()),this}get customFees(){return this._customFees}setCustomFees(e){return this._requireNotFrozen(),this._customFees=e,this}_execute(e,t){return e.token.updateTokenFeeSchedule(t)}_getTransactionDataCase(){return"tokenFeeScheduleUpdate"}_makeTransactionData(){return{tokenId:this._tokenId!=null?this._tokenId._toProtobuf():null,customFees:this._customFees.map(e=>e._toProtobuf())}}_getLogId(){return`TokenFeeScheduleUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenFeeScheduleUpdate",TokenFeeScheduleUpdateTransaction._fromProtobuf);class TokenFreezeTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,this._accountId=null,e.tokenId!=null&&this.setTokenId(e.tokenId),e.accountId!=null&&this.setAccountId(e.accountId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenFreeze;return Transaction._fromProtobufTransactions(new TokenFreezeTransaction({tokenId:d.token!=null?TokenId._fromProtobuf(d.token):void 0,accountId:d.account!=null?AccountId._fromProtobuf(d.account):void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e),this._accountId!=null&&this._accountId.validateChecksum(e)}_execute(e,t){return e.token.freezeTokenAccount(t)}_getTransactionDataCase(){return"tokenFreeze"}_makeTransactionData(){return{token:this._tokenId!=null?this._tokenId._toProtobuf():null,account:this._accountId!=null?this._accountId._toProtobuf():null}}_getLogId(){return`TokenFreezeTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenFreeze",TokenFreezeTransaction._fromProtobuf);class TokenGrantKycTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,this._accountId=null,e.tokenId!=null&&this.setTokenId(e.tokenId),e.accountId!=null&&this.setAccountId(e.accountId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenGrantKyc;return Transaction._fromProtobufTransactions(new TokenGrantKycTransaction({tokenId:d.token!=null?TokenId._fromProtobuf(d.token):void 0,accountId:d.account!=null?AccountId._fromProtobuf(d.account):void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e),this._accountId!=null&&this._accountId.validateChecksum(e)}_execute(e,t){return e.token.grantKycToTokenAccount(t)}_getTransactionDataCase(){return"tokenGrantKyc"}_makeTransactionData(){return{token:this._tokenId!=null?this._tokenId._toProtobuf():null,account:this._accountId!=null?this._accountId._toProtobuf():null}}_getLogId(){return`TokenGrantKycTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenGrantKyc",TokenGrantKycTransaction._fromProtobuf);class TokenInfo{constructor(e){this.tokenId=e.tokenId,this.name=e.name,this.symbol=e.symbol,this.decimals=e.decimals,this.totalSupply=e.totalSupply,this.treasuryAccountId=e.treasuryAccountId,this.adminKey=e.adminKey,this.kycKey=e.kycKey,this.freezeKey=e.freezeKey,this.pauseKey=e.pauseKey,this.wipeKey=e.wipeKey,this.supplyKey=e.supplyKey,this.feeScheduleKey=e.feeScheduleKey,this.defaultFreezeStatus=e.defaultFreezeStatus,this.defaultKycStatus=e.defaultKycStatus,this.pauseStatus=e.pauseStatus,this.isDeleted=e.isDeleted,this.autoRenewAccountId=e.autoRenewAccountId,this.autoRenewPeriod=e.autoRenewPeriod,this.expirationTime=e.expirationTime,this.tokenMemo=e.tokenMemo,this.customFees=e.customFees,this.tokenType=e.tokenType,this.supplyType=e.supplyType,this.maxSupply=e.maxSupply,this.ledgerId=e.ledgerId}static _fromProtobuf(e){const t=e.defaultFreezeStatus,o=e.defaultKycStatus,c=e.pauseStatus,l=e.autoRenewAccount!=null?AccountId._fromProtobuf(e.autoRenewAccount):new AccountId(0);return new TokenInfo({tokenId:TokenId._fromProtobuf(e.tokenId),name:e.name,symbol:e.symbol,decimals:e.decimals,totalSupply:Long$1.fromValue(e.totalSupply),treasuryAccountId:e.treasury!=null?AccountId._fromProtobuf(e.treasury):null,adminKey:e.adminKey!=null?Key._fromProtobufKey(e.adminKey):null,kycKey:e.kycKey!=null?Key._fromProtobufKey(e.kycKey):null,freezeKey:e.freezeKey!=null?Key._fromProtobufKey(e.freezeKey):null,pauseKey:e.pauseKey!=null?Key._fromProtobufKey(e.pauseKey):null,wipeKey:e.wipeKey!=null?Key._fromProtobufKey(e.wipeKey):null,supplyKey:e.supplyKey!=null?Key._fromProtobufKey(e.supplyKey):null,feeScheduleKey:e.feeScheduleKey!=null?Key._fromProtobufKey(e.feeScheduleKey):null,defaultFreezeStatus:t===0?null:t==1,defaultKycStatus:o===0?null:o==1,pauseStatus:c===0?null:c==1,isDeleted:e.deleted,autoRenewAccountId:l.shard.toInt()==0&&l.realm.toInt()==0&&l.num.toInt()==0?null:l,autoRenewPeriod:e.autoRenewPeriod!=null?Duration._fromProtobuf(e.autoRenewPeriod):null,expirationTime:e.expiry!=null?Timestamp._fromProtobuf(e.expiry):null,tokenMemo:e.memo!=null?e.memo:"",customFees:e.customFees!=null?e.customFees.map(h=>h.fixedFee!=null?CustomFixedFee._fromProtobuf(h):h.fractionalFee!=null?CustomFractionalFee._fromProtobuf(h):CustomRoyalyFee._fromProtobuf(h)):[],tokenType:e.tokenType!=null?TokenType._fromCode(e.tokenType):null,supplyType:e.supplyType!=null?TokenSupplyType._fromCode(e.supplyType):null,maxSupply:e.maxSupply!=null?e.maxSupply:null,ledgerId:e.ledgerId!=null?LedgerId.fromBytes(e.ledgerId):null})}_toProtobuf(){return{tokenId:this.tokenId._toProtobuf(),name:this.name,symbol:this.symbol,decimals:this.decimals,totalSupply:this.totalSupply,treasury:this.treasuryAccountId!=null?this.treasuryAccountId._toProtobuf():null,adminKey:this.adminKey!=null?this.adminKey._toProtobufKey():null,kycKey:this.kycKey!=null?this.kycKey._toProtobufKey():null,freezeKey:this.freezeKey!=null?this.freezeKey._toProtobufKey():null,pauseKey:this.pauseKey!=null?this.pauseKey._toProtobufKey():null,wipeKey:this.wipeKey!=null?this.wipeKey._toProtobufKey():null,supplyKey:this.supplyKey!=null?this.supplyKey._toProtobufKey():null,feeScheduleKey:this.feeScheduleKey!=null?this.feeScheduleKey._toProtobufKey():null,defaultFreezeStatus:this.defaultFreezeStatus==null?0:this.defaultFreezeStatus?1:2,defaultKycStatus:this.defaultKycStatus==null?0:this.defaultKycStatus?1:2,pauseStatus:this.pauseStatus==null?0:this.pauseStatus?1:2,deleted:this.isDeleted,autoRenewAccount:this.autoRenewAccountId!=null?this.autoRenewAccountId._toProtobuf():void 0,autoRenewPeriod:this.autoRenewPeriod!=null?this.autoRenewPeriod._toProtobuf():null,expiry:this.expirationTime!=null?this.expirationTime._toProtobuf():null,memo:this.tokenMemo,customFees:this.customFees.map(e=>e._toProtobuf()),tokenType:this.tokenType!=null?this.tokenType._code:null,supplyType:this.supplyType!=null?this.supplyType._code:null,maxSupply:this.maxSupply,ledgerId:this.ledgerId!=null?this.ledgerId.toBytes():null}}static fromBytes(e){return TokenInfo._fromProtobuf(lib.proto.TokenInfo.decode(e))}toBytes(){return lib.proto.TokenInfo.encode(this._toProtobuf()).finish()}}class TokenInfoQuery extends Query{constructor(e={}){super(),this._tokenId=null,e.tokenId!=null&&this.setTokenId(e.tokenId)}static _fromProtobuf(e){const t=e.tokenGetInfo;return new TokenInfoQuery({tokenId:t.token!=null?TokenId._fromProtobuf(t.token):void 0})}get tokenId(){return this._tokenId}setTokenId(e){return this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}async getCost(e){return super.getCost(e)}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e)}_execute(e,t){return e.token.getTokenInfo(t)}_mapResponseHeader(e){return e.tokenGetInfo.header}_mapResponse(e,t,o){const c=e.tokenGetInfo;return Promise.resolve(TokenInfo._fromProtobuf(c.tokenInfo))}_onMakeRequest(e){return{tokenGetInfo:{header:e,token:this._tokenId!=null?this._tokenId._toProtobuf():null}}}_getLogId(){return`TokenInfoQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("tokenGetInfo",TokenInfoQuery._fromProtobuf);class TokenMintTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,this._amount=null,this._metadata=[],e.tokenId!=null&&this.setTokenId(e.tokenId),e.amount!=null&&this.setAmount(e.amount),e.metadata!=null&&this.setMetadata(e.metadata)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenMint;return Transaction._fromProtobufTransactions(new TokenMintTransaction({tokenId:d.token!=null?TokenId._fromProtobuf(d.token):void 0,amount:d.amount!=null?d.amount:void 0,metadata:d.metadata!=null?d.metadata:void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}get amount(){return this._amount}setAmount(e){return this._requireNotFrozen(),this._amount=e instanceof Long$1?e:Long$1.fromValue(e),this}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e)}get metadata(){return this._metadata}addMetadata(e){return this._requireNotFrozen(),typeof e=="string"&&console.warn("Passing a `string` for token metadata is considered a bug, and has been removed. Please provide a `Uint8Array` instead."),this._metadata.push(typeof e=="string"?decode$5(e):e),this}setMetadata(e){this._requireNotFrozen();for(const t of e)if(typeof t=="string"){console.warn("Passing a `string` for token metadata is considered a bug, and has been removed. Please provide a `Uint8Array` instead.");break}return this._metadata=e.map(t=>typeof t=="string"?decode$5(t):t),this}_execute(e,t){return e.token.mintToken(t)}_getTransactionDataCase(){return"tokenMint"}_makeTransactionData(){return{amount:this._amount,token:this._tokenId!=null?this._tokenId._toProtobuf():null,metadata:this._metadata}}_getLogId(){return`TokenMintTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenMint",TokenMintTransaction._fromProtobuf);class TokenNftInfo{constructor(e){this.nftId=e.nftId,this.accountId=e.accountId,this.creationTime=e.creationTime,this.metadata=e.metadata,this.ledgerId=e.ledgerId,this.spenderId=e.spenderId,Object.freeze(this)}static _fromProtobuf(e){return new TokenNftInfo({nftId:NftId._fromProtobuf(e.nftID),accountId:AccountId._fromProtobuf(e.accountID),creationTime:Timestamp._fromProtobuf(e.creationTime),metadata:e.metadata!==void 0?e.metadata:null,ledgerId:e.ledgerId!=null?LedgerId.fromBytes(e.ledgerId):null,spenderId:e.spenderId!=null?AccountId._fromProtobuf(e.spenderId):null})}_toProtobuf(){return{nftID:this.nftId._toProtobuf(),accountID:this.accountId._toProtobuf(),creationTime:this.creationTime._toProtobuf(),metadata:this.metadata,ledgerId:this.ledgerId!=null?this.ledgerId.toBytes():null,spenderId:this.spenderId!=null?this.spenderId._toProtobuf():null}}toJson(){return{nftId:this.nftId.toString(),accountId:this.accountId.toString(),creationTime:this.creationTime.toString(),metadata:this.metadata!=null?encode$3(this.metadata):null,ledgerId:this.ledgerId!=null?this.ledgerId.toString():null,spenderId:this.spenderId!=null?this.spenderId.toString():null}}toString(){return JSON.stringify(this.toJson())}}class TokenNftInfoQuery extends Query{constructor(e={}){super(),this._nftId=null,e.nftId!=null&&this.setNftId(e.nftId),this._accountId=null,e.accountId!=null&&this.setAccountId(e.accountId),this._tokenId=null,e.tokenId!=null&&this.setTokenId(e.tokenId),this._start=null,e.start!=null&&this.setStart(e.start),this._end=null,e.end!=null&&this.setEnd(e.end)}static _fromProtobuf(e){if(e.tokenGetNftInfo!=null){const t=e.tokenGetNftInfo;return new TokenNftInfoQuery({nftId:t.nftID!=null?NftId._fromProtobuf(t.nftID):void 0})}else if(e.tokenGetAccountNftInfos!=null){const t=e.tokenGetAccountNftInfos;return new TokenNftInfoQuery({accountId:t.accountID!=null?AccountId._fromProtobuf(t.accountID):void 0,start:t.start!=null?t.start:void 0,end:t.end!=null?t.end:void 0})}else{const t=e.tokenGetNftInfos;return new TokenNftInfoQuery({tokenId:t.tokenID!=null?TokenId._fromProtobuf(t.tokenID):void 0,start:t.start!=null?t.start:void 0,end:t.end!=null?t.end:void 0})}}get nftId(){return this._nftId}setNftId(e){return this._nftId=typeof e=="string"?NftId.fromString(e):NftId._fromProtobuf(e._toProtobuf()),this}get accountId(){return console.warn("`TokenNftInfoQuery.accountId` is deprecated with no replacement"),this._accountId}setAccountId(e){return console.warn("`TokenNftInfoQuery.setAccountId()` is deprecated with no replacement"),this._accountId=typeof e=="string"?AccountId.fromString(e):AccountId._fromProtobuf(e._toProtobuf()),this}get tokenId(){return console.warn("`TokenNftInfoQuery.tokenId` is deprecated with no replacement"),this._tokenId}setTokenId(e){return console.warn("`TokenNftInfoQuery.setTokenId()` is deprecated with no replacement"),this._tokenId=typeof e=="string"?TokenId.fromString(e):TokenId._fromProtobuf(e._toProtobuf()),this}get start(){return console.warn("`TokenNftInfoQuery.start` is deprecated with no replacement"),this._start}setStart(e){return console.warn("`TokenNftInfoQuery.setStart()` is deprecated with no replacement"),this._start=typeof e=="number"?Long$1.fromNumber(e):e,this}get end(){return console.warn("`TokenNftInfoQuery.end` is deprecated with no replacement"),this._end}setEnd(e){return console.warn("`TokenNftInfoQuery.setEnd()` is deprecated with no replacement"),this._end=typeof e=="number"?Long$1.fromNumber(e):e,this}async getCost(e){return super.getCost(e)}_execute(e,t){return e.token.getTokenNftInfo(t)}_mapResponseHeader(e){return e.tokenGetNftInfo.header}_mapResponse(e,t,o){const c=[e.tokenGetNftInfo.nft];return Promise.resolve(c.map(l=>TokenNftInfo._fromProtobuf(l)))}_onMakeRequest(e){return{tokenGetNftInfo:{header:e,nftID:this._nftId!=null?this._nftId._toProtobuf():null}}}_getLogId(){return`TokenNftInfoQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("tokenGetNftInfo",TokenNftInfoQuery._fromProtobuf);class TokenPauseTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,e.tokenId!=null&&this.setTokenId(e.tokenId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenPause;return Transaction._fromProtobufTransactions(new TokenPauseTransaction({tokenId:d.token!=null?TokenId._fromProtobuf(d.token):void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e)}_execute(e,t){return e.token.pauseToken(t)}_getTransactionDataCase(){return"tokenPause"}_makeTransactionData(){return{token:this._tokenId!=null?this._tokenId._toProtobuf():null}}_getLogId(){return`TokenPauseTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenPause",TokenPauseTransaction._fromProtobuf);class TokenRevokeKycTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,this._accountId=null,e.tokenId!=null&&this.setTokenId(e.tokenId),e.accountId!=null&&this.setAccountId(e.accountId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenRevokeKyc;return Transaction._fromProtobufTransactions(new TokenRevokeKycTransaction({tokenId:d.token!=null?TokenId._fromProtobuf(d.token):void 0,accountId:d.account!=null?AccountId._fromProtobuf(d.account):void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e),this._accountId!=null&&this._accountId.validateChecksum(e)}_execute(e,t){return e.token.revokeKycFromTokenAccount(t)}_getTransactionDataCase(){return"tokenRevokeKyc"}_makeTransactionData(){return{token:this._tokenId!=null?this._tokenId._toProtobuf():null,account:this._accountId!=null?this._accountId._toProtobuf():null}}_getLogId(){return`TokenRevokeKycTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenRevokeKyc",TokenRevokeKycTransaction._fromProtobuf);class TokenUnfreezeTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,this._accountId=null,e.tokenId!=null&&this.setTokenId(e.tokenId),e.accountId!=null&&this.setAccountId(e.accountId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenUnfreeze;return Transaction._fromProtobufTransactions(new TokenUnfreezeTransaction({tokenId:d.token!=null?TokenId._fromProtobuf(d.token):void 0,accountId:d.account!=null?AccountId._fromProtobuf(d.account):void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e),this._accountId!=null&&this._accountId.validateChecksum(e)}_execute(e,t){return e.token.unfreezeTokenAccount(t)}_getTransactionDataCase(){return"tokenUnfreeze"}_makeTransactionData(){return{token:this._tokenId!=null?this._tokenId._toProtobuf():null,account:this._accountId!=null?this._accountId._toProtobuf():null}}_getLogId(){return`TokenUnfreezeTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenUnfreeze",TokenUnfreezeTransaction._fromProtobuf);class TokenUnpauseTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,e.tokenId!=null&&this.setTokenId(e.tokenId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenUnpause;return Transaction._fromProtobufTransactions(new TokenUnpauseTransaction({tokenId:d.token!=null?TokenId._fromProtobuf(d.token):void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e)}_execute(e,t){return e.token.unpauseToken(t)}_getTransactionDataCase(){return"tokenUnpause"}_makeTransactionData(){return{token:this._tokenId!=null?this._tokenId._toProtobuf():null}}_getLogId(){return`TokenUnpauseTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenUnpause",TokenUnpauseTransaction._fromProtobuf);class TokenUpdateTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,this._tokenName=null,this._tokenSymbol=null,this._treasuryAccountId=null,this._adminKey=null,this._kycKey=null,this._freezeKey=null,this._wipeKey=null,this._supplyKey=null,this._autoRenewAccountId=null,this._expirationTime=null,this._autoRenewPeriod=null,this._tokenMemo=null,this._feeScheduleKey=null,this._pauseKey=null,e.tokenId!=null&&this.setTokenId(e.tokenId),e.tokenName!=null&&this.setTokenName(e.tokenName),e.tokenSymbol!=null&&this.setTokenSymbol(e.tokenSymbol),e.treasuryAccountId!=null&&this.setTreasuryAccountId(e.treasuryAccountId),e.adminKey!=null&&this.setAdminKey(e.adminKey),e.kycKey!=null&&this.setKycKey(e.kycKey),e.freezeKey!=null&&this.setFreezeKey(e.freezeKey),e.wipeKey!=null&&this.setWipeKey(e.wipeKey),e.supplyKey!=null&&this.setSupplyKey(e.supplyKey),e.autoRenewAccountId!=null&&this.setAutoRenewAccountId(e.autoRenewAccountId),e.expirationTime!=null&&this.setExpirationTime(e.expirationTime),e.autoRenewPeriod!=null&&this.setAutoRenewPeriod(e.autoRenewPeriod),e.tokenMemo!=null&&this.setTokenMemo(e.tokenMemo),e.feeScheduleKey!=null&&this.setFeeScheduleKey(e.feeScheduleKey),e.pauseKey!=null&&this.setPauseKey(e.pauseKey)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenUpdate;return Transaction._fromProtobufTransactions(new TokenUpdateTransaction({tokenId:d.token!=null?TokenId._fromProtobuf(d.token):void 0,tokenName:d.name!=null?d.name:void 0,tokenSymbol:d.symbol!=null?d.symbol:void 0,treasuryAccountId:d.treasury!=null?AccountId._fromProtobuf(d.treasury):void 0,adminKey:d.adminKey!=null?Key._fromProtobufKey(d.adminKey):void 0,kycKey:d.kycKey!=null?Key._fromProtobufKey(d.kycKey):void 0,freezeKey:d.freezeKey!=null?Key._fromProtobufKey(d.freezeKey):void 0,wipeKey:d.wipeKey!=null?Key._fromProtobufKey(d.wipeKey):void 0,supplyKey:d.supplyKey!=null?Key._fromProtobufKey(d.supplyKey):void 0,autoRenewAccountId:d.autoRenewAccount!=null?AccountId._fromProtobuf(d.autoRenewAccount):void 0,expirationTime:d.expiry!=null?Timestamp._fromProtobuf(d.expiry):void 0,autoRenewPeriod:d.autoRenewPeriod!=null?Duration._fromProtobuf(d.autoRenewPeriod):void 0,tokenMemo:d.memo!=null&&d.memo.value!=null?d.memo.value:void 0,feeScheduleKey:d.feeScheduleKey!=null?Key._fromProtobufKey(d.feeScheduleKey):void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}get tokenName(){return this._tokenName}setTokenName(e){return this._requireNotFrozen(),this._tokenName=e,this}get tokenSymbol(){return this._tokenSymbol}setTokenSymbol(e){return this._requireNotFrozen(),this._tokenSymbol=e,this}get treasuryAccountId(){return this._treasuryAccountId}setTreasuryAccountId(e){return this._requireNotFrozen(),this._treasuryAccountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get kycKey(){return this._kycKey}setKycKey(e){return this._requireNotFrozen(),this._kycKey=e,this}get freezeKey(){return this._freezeKey}setFreezeKey(e){return this._requireNotFrozen(),this._freezeKey=e,this}get wipeKey(){return this._wipeKey}setWipeKey(e){return this._requireNotFrozen(),this._wipeKey=e,this}get supplyKey(){return this._supplyKey}setSupplyKey(e){return this._requireNotFrozen(),this._supplyKey=e,this}setsupplyKey(e){return this._requireNotFrozen(),this._supplyKey=e,this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof Timestamp?e:Timestamp.fromDate(e),this}get autoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId=e instanceof AccountId?e:AccountId.fromString(e),this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof Duration?e:new Duration(e),this}get tokenMemo(){return this._tokenMemo}setTokenMemo(e){return this._requireNotFrozen(),this._tokenMemo=e,this}get feeScheduleKey(){return this._feeScheduleKey}setFeeScheduleKey(e){return this._requireNotFrozen(),this._feeScheduleKey=e,this}get pauseKey(){return this._pauseKey}setPauseKey(e){return this._requireNotFrozen(),this._pauseKey=e,this}clearTokenMemo(){return this._requireNotFrozen(),this._tokenMemo=null,this}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e),this._treasuryAccountId!=null&&this._treasuryAccountId.validateChecksum(e),this._autoRenewAccountId!=null&&this._autoRenewAccountId.validateChecksum(e)}_execute(e,t){return e.token.updateToken(t)}_getTransactionDataCase(){return"tokenUpdate"}_makeTransactionData(){return{token:this._tokenId!=null?this._tokenId._toProtobuf():null,name:this.tokenName,symbol:this.tokenSymbol,treasury:this._treasuryAccountId!=null?this._treasuryAccountId._toProtobuf():null,adminKey:this._adminKey!=null?this._adminKey._toProtobufKey():null,kycKey:this._kycKey!=null?this._kycKey._toProtobufKey():null,freezeKey:this._freezeKey!=null?this._freezeKey._toProtobufKey():null,pauseKey:this._pauseKey!=null?this._pauseKey._toProtobufKey():null,wipeKey:this._wipeKey!=null?this._wipeKey._toProtobufKey():null,supplyKey:this._supplyKey!=null?this._supplyKey._toProtobufKey():null,autoRenewAccount:this._autoRenewAccountId!=null?this._autoRenewAccountId._toProtobuf():null,expiry:this._expirationTime!=null?this._expirationTime._toProtobuf():null,autoRenewPeriod:this._autoRenewPeriod!=null?this._autoRenewPeriod._toProtobuf():null,memo:this._tokenMemo!=null?{value:this._tokenMemo}:null,feeScheduleKey:this._feeScheduleKey!=null?this._feeScheduleKey._toProtobufKey():null}}_getLogId(){return`TokenUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenUpdate",TokenUpdateTransaction._fromProtobuf);class TokenWipeTransaction extends Transaction{constructor(e={}){super(),this._tokenId=null,this._accountId=null,this._serials=[],this._amount=null,e.tokenId!=null&&this.setTokenId(e.tokenId),e.accountId!=null&&this.setAccountId(e.accountId),e.amount!=null&&this.setAmount(e.amount),e.serials!=null&&this.setSerials(e.serials)}static _fromProtobuf(e,t,o,c,l){const d=l[0].tokenWipe;return Transaction._fromProtobufTransactions(new TokenWipeTransaction({tokenId:d.token!=null?TokenId._fromProtobuf(d.token):void 0,accountId:d.account!=null?AccountId._fromProtobuf(d.account):void 0,amount:d.amount!=null?d.amount:void 0}),e,t,o,c,l)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId=typeof e=="string"?TokenId.fromString(e):e.clone(),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId=typeof e=="string"?AccountId.fromString(e):e.clone(),this}get amount(){return this._amount}setAmount(e){return this._requireNotFrozen(),this._amount=e instanceof Long$1?e:Long$1.fromValue(e),this}_validateChecksums(e){this._tokenId!=null&&this._tokenId.validateChecksum(e),this._accountId!=null&&this._accountId.validateChecksum(e)}get serials(){return this._serials}setSerials(e){return this._requireNotFrozen(),this._serials=e.map(t=>typeof t=="number"?Long$1.fromNumber(t):t),this}_execute(e,t){return e.token.wipeTokenAccount(t)}_getTransactionDataCase(){return"tokenWipe"}_makeTransactionData(){return{amount:this._amount,token:this._tokenId!=null?this._tokenId._toProtobuf():null,account:this._accountId!=null?this._accountId._toProtobuf():null,serialNumbers:this.serials}}_getLogId(){return`TokenWipeTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("tokenWipe",TokenWipeTransaction._fromProtobuf);class TopicCreateTransaction extends Transaction{constructor(e={}){super(),this._adminKey=null,this._submitKey=null,this._autoRenewAccountId=null,this._autoRenewPeriod=new Duration(DEFAULT_AUTO_RENEW_PERIOD),this._topicMemo=null,e.adminKey!=null&&this.setAdminKey(e.adminKey),e.submitKey!=null&&this.setSubmitKey(e.submitKey),e.autoRenewAccountId!=null&&this.setAutoRenewAccountId(e.autoRenewAccountId),e.autoRenewPeriod!=null&&this.setAutoRenewPeriod(e.autoRenewPeriod),e.topicMemo!=null&&this.setTopicMemo(e.topicMemo)}static _fromProtobuf(e,t,o,c,l){const d=l[0].consensusCreateTopic;return Transaction._fromProtobufTransactions(new TopicCreateTransaction({adminKey:d.adminKey!=null?Key._fromProtobufKey(d.adminKey):void 0,submitKey:d.submitKey!=null?Key._fromProtobufKey(d.submitKey):void 0,autoRenewAccountId:d.autoRenewAccount!=null?AccountId._fromProtobuf(d.autoRenewAccount):void 0,autoRenewPeriod:d.autoRenewPeriod!=null&&d.autoRenewPeriod.seconds!=null?d.autoRenewPeriod.seconds:void 0,topicMemo:d.memo!=null?d.memo:void 0}),e,t,o,c,l)}get topicMemo(){return this._topicMemo}getTopicMemo(){return this._topicMemo}setTopicMemo(e){return this._requireNotFrozen(),this._topicMemo=e,this}get adminKey(){return this._adminKey}getAdminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get submitKey(){return this._submitKey}getSubmitKey(){return this._submitKey}setSubmitKey(e){return this._requireNotFrozen(),this._submitKey=e,this}get autoRenewAccountId(){return this._autoRenewAccountId}getAutoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId=e instanceof AccountId?e:AccountId.fromString(e),this}get autoRenewPeriod(){return this._autoRenewPeriod}getAutoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof Duration?e:new Duration(e),this}_validateChecksums(e){this._autoRenewAccountId!=null&&this._autoRenewAccountId.validateChecksum(e)}_execute(e,t){return e.consensus.createTopic(t)}_getTransactionDataCase(){return"consensusCreateTopic"}_makeTransactionData(){return{adminKey:this._adminKey!=null?this._adminKey._toProtobufKey():null,submitKey:this._submitKey!=null?this._submitKey._toProtobufKey():null,autoRenewAccount:this._autoRenewAccountId!=null?this._autoRenewAccountId._toProtobuf():null,autoRenewPeriod:this._autoRenewPeriod._toProtobuf(),memo:this._topicMemo}}_getLogId(){return`TopicCreateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("consensusCreateTopic",TopicCreateTransaction._fromProtobuf);class TopicDeleteTransaction extends Transaction{constructor(e={}){super(),this._topicId=null,e.topicId!=null&&this.setTopicId(e.topicId)}static _fromProtobuf(e,t,o,c,l){const d=l[0].consensusDeleteTopic;return Transaction._fromProtobufTransactions(new TopicDeleteTransaction({topicId:d.topicID!=null?TopicId._fromProtobuf(d.topicID):void 0}),e,t,o,c,l)}get topicId(){return this._topicId}setTopicId(e){return this._requireNotFrozen(),this._topicId=typeof e=="string"?TopicId.fromString(e):e.clone(),this}_validateChecksums(e){this._topicId!=null&&this._topicId.validateChecksum(e)}_execute(e,t){return e.consensus.deleteTopic(t)}_getTransactionDataCase(){return"consensusDeleteTopic"}_makeTransactionData(){return{topicID:this._topicId!=null?this._topicId._toProtobuf():null}}_getLogId(){return`TopicDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("consensusDeleteTopic",TopicDeleteTransaction._fromProtobuf);class TopicInfo{constructor(e){this.topicId=e.topicId,this.topicMemo=e.topicMemo,this.runningHash=e.runningHash,this.sequenceNumber=e.sequenceNumber,this.expirationTime=e.expirationTime,this.adminKey=e.adminKey,this.submitKey=e.submitKey,this.autoRenewPeriod=e.autoRenewPeriod,this.autoRenewAccountId=e.autoRenewAccountId,this.ledgerId=e.ledgerId,Object.freeze(this)}static _fromProtobuf(e){const t=e.topicInfo;return new TopicInfo({topicId:TopicId._fromProtobuf(e.topicID),topicMemo:t.memo!=null?t.memo:"",runningHash:t.runningHash!=null?t.runningHash:new Uint8Array,sequenceNumber:t.sequenceNumber!=null?t.sequenceNumber instanceof Long$1?t.sequenceNumber:Long$1.fromValue(t.sequenceNumber):Long$1.ZERO,expirationTime:t.expirationTime!=null?Timestamp._fromProtobuf(t.expirationTime):null,adminKey:t.adminKey!=null?Key._fromProtobufKey(t.adminKey):null,submitKey:t.submitKey!=null?Key._fromProtobufKey(t.submitKey):null,autoRenewPeriod:t.autoRenewPeriod!=null?new Duration(t.autoRenewPeriod.seconds):null,autoRenewAccountId:t.autoRenewAccount!=null?AccountId._fromProtobuf(t.autoRenewAccount):null,ledgerId:t.ledgerId!=null?LedgerId.fromBytes(t.ledgerId):null})}_toProtobuf(){return{topicID:this.topicId._toProtobuf(),topicInfo:{memo:this.topicMemo,runningHash:this.runningHash,sequenceNumber:this.sequenceNumber,expirationTime:this.expirationTime!=null?this.expirationTime._toProtobuf():null,adminKey:this.adminKey!=null?this.adminKey._toProtobufKey():null,submitKey:this.submitKey!=null?this.submitKey._toProtobufKey():null,autoRenewPeriod:this.autoRenewPeriod!=null?this.autoRenewPeriod._toProtobuf():null,autoRenewAccount:this.autoRenewAccountId!=null?this.autoRenewAccountId._toProtobuf():null}}}static fromBytes(e){return TopicInfo._fromProtobuf({topicInfo:lib.proto.ConsensusTopicInfo.decode(e)})}toBytes(){return lib.proto.ConsensusTopicInfo.encode(this._toProtobuf().topicInfo).finish()}}class TopicInfoQuery extends Query{constructor(e={}){super(),this._topicId=null,e.topicId!=null&&this.setTopicId(e.topicId)}static _fromProtobuf(e){const t=e.consensusGetTopicInfo;return new TopicInfoQuery({topicId:t.topicID!=null?TopicId._fromProtobuf(t.topicID):void 0})}get topicId(){return this._topicId}setTopicId(e){return this._topicId=typeof e=="string"?TopicId.fromString(e):e.clone(),this}async getCost(e){return super.getCost(e)}_validateChecksums(e){this._topicId!=null&&this._topicId.validateChecksum(e)}_execute(e,t){return e.consensus.getTopicInfo(t)}_mapResponseHeader(e){return e.consensusGetTopicInfo.header}_mapResponse(e,t,o){return Promise.resolve(TopicInfo._fromProtobuf(e.consensusGetTopicInfo))}_onMakeRequest(e){return{consensusGetTopicInfo:{header:e,topicID:this._topicId!=null?this._topicId._toProtobuf():null}}}_getLogId(){return`TopicInfoQuery:${(this._paymentTransactionId!=null&&this._paymentTransactionId.validStart!=null?this._paymentTransactionId.validStart:this._timestamp).toString()}`}}QUERY_REGISTRY.set("consensusGetTopicInfo",TopicInfoQuery._fromProtobuf);class TopicMessageSubmitTransaction extends Transaction{constructor(e={}){super(),this._topicId=null,e.topicId!=null&&this.setTopicId(e.topicId),this._message=null,e.message!=null&&this.setMessage(e.message),this._maxChunks=20,this._chunkSize=CHUNK_SIZE,e.maxChunks!=null&&this.setMaxChunks(e.maxChunks),e.chunkSize!=null&&this.setChunkSize(e.chunkSize),this._chunkInfo=null}static _fromProtobuf(e,t,o,c,l){const d=l[0].consensusSubmitMessage;return Transaction._fromProtobufTransactions(new TopicMessageSubmitTransaction({topicId:d.topicID!=null?TopicId._fromProtobuf(d.topicID):void 0,message:d.message!=null?d.message:void 0}),e,t,o,c,l)}get topicId(){return this._topicId}setTopicId(e){return this._requireNotFrozen(),this._topicId=typeof e=="string"?TopicId.fromString(e):e.clone(),this}get message(){return this._message}getMessage(){return this._message}setMessage(e){return this._requireNotFrozen(),e=requireStringOrUint8Array(e),this._message=e instanceof Uint8Array?e:encode(e),this}get maxChunks(){return this._maxChunks}getMaxChunks(){return this._maxChunks}setMaxChunks(e){return this._requireNotFrozen(),this._maxChunks=e,this}get chunkSize(){return this._chunkSize}getChunkSize(){return this._chunkSize}setChunkSize(e){return this._chunkSize=e,this}freezeWith(e){if(super.freezeWith(e),this._message==null)return this;const t=Math.floor((this._message.length+(this._chunkSize-1))/this._chunkSize);if(t>this._maxChunks)throw new Error(`Message with size ${this._message.length} too long for ${this._maxChunks} chunks`);const o=this._getTransactionId()._toProtobuf();let c=this._getTransactionId();this._transactionIds.locked=!1,this._transactions.clear(),this._transactionIds.clear(),this._signedTransactions.clear();for(let l=0;l<t;l++){this._chunkInfo={initialTransactionID:o,total:t,number:l+1},this._transactionIds.push(c),this._transactionIds.advance();for(const h of this._nodeAccountIds.list)this._signedTransactions.push(this._makeSignedTransaction(h));c=new TransactionId(c.accountId,new Timestamp(c.validStart.seconds,c.validStart.nanos.add(1)))}return this._transactionIds.advance(),this._chunkInfo=null,this}schedule(){if(this._requireNotFrozen(),this._message!=null&&this._message.length>this._chunkSize)throw new Error(`cannot schedule \`TopicMessageSubmitTransaction\` with message over ${this._chunkSize} bytes`);return super.schedule()}async execute(e,t){return(await this.executeAll(e,t))[0]}async executeAll(e,t){super._isFrozen()||this.freezeWith(e);const o=this._getTransactionId(),c=e.operatorAccountId;c!=null&&c.equals(o.accountId)&&await super.signWithOperator(e);const l=[];let h=t;for(let d=0;d<this._transactionIds.length;d++){const g=Date.now();l.push(await super.execute(e,h)),h!=null&&(h=Date.now()-g)}return l}_execute(e,t){return e.consensus.submitMessage(t)}_getTransactionDataCase(){return"consensusSubmitMessage"}_makeTransactionData(){if(this._chunkInfo!=null&&this._message!=null){const t=(this._chunkInfo.number-1)*this._chunkSize;let o=t+this._chunkSize;return o>this._message.length&&(o=this._message.length),{topicID:this._topicId!=null?this._topicId._toProtobuf():null,message:this._message.slice(t,o),chunkInfo:this._chunkInfo}}else return{topicID:this._topicId!=null?this._topicId._toProtobuf():null,message:this._message}}_getLogId(){return`TopicMessageSubmitTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("consensusSubmitMessage",TopicMessageSubmitTransaction._fromProtobuf);class TopicUpdateTransaction extends Transaction{constructor(e={}){super(),this._topicId=null,e.topicId!=null&&this.setTopicId(e.topicId),this._topicMemo=null,e.topicMemo!=null&&this.setTopicMemo(e.topicMemo),this._submitKey=null,e.submitKey!=null&&this.setSubmitKey(e.submitKey),this._adminKey=null,e.adminKey!=null&&this.setAdminKey(e.adminKey),this._autoRenewAccountId=null,e.autoRenewAccountId!=null&&this.setAutoRenewAccountId(e.autoRenewAccountId),this._autoRenewPeriod=null,e.autoRenewPeriod!=null&&this.setAutoRenewPeriod(e.autoRenewPeriod),this._expirationTime=null,e.expirationTime!=null&&this.setExpirationTime(e.expirationTime)}static _fromProtobuf(e,t,o,c,l){const d=l[0].consensusUpdateTopic;return Transaction._fromProtobufTransactions(new TopicUpdateTransaction({topicId:d.topicID!=null?TopicId._fromProtobuf(d.topicID):void 0,adminKey:d.adminKey!=null?Key._fromProtobufKey(d.adminKey):void 0,submitKey:d.submitKey!=null?Key._fromProtobufKey(d.submitKey):void 0,autoRenewAccountId:d.autoRenewAccount!=null?AccountId._fromProtobuf(d.autoRenewAccount):void 0,autoRenewPeriod:d.autoRenewPeriod!=null&&d.autoRenewPeriod.seconds!=null?d.autoRenewPeriod.seconds:void 0,topicMemo:d.memo!=null&&d.memo.value!=null?d.memo.value:void 0,expirationTime:d.expirationTime!=null?Timestamp._fromProtobuf(d.expirationTime):void 0}),e,t,o,c,l)}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof Date?Timestamp.fromDate(e):e,this}get topicId(){return this._topicId}setTopicId(e){return this._requireNotFrozen(),this._topicId=typeof e=="string"?TopicId.fromString(e):e.clone(),this}clearTopicId(){return this._requireNotFrozen(),this._topicId=null,this}get topicMemo(){return this._topicMemo}setTopicMemo(e){return this._requireNotFrozen(),this._topicMemo=e,this}clearTopicMemo(){return this._requireNotFrozen(),this._topicMemo=null,this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}clearAdminKey(){return this._requireNotFrozen(),this._adminKey=null,this}get submitKey(){return this._submitKey}setSubmitKey(e){return this._requireNotFrozen(),this._submitKey=e,this}clearSubmitKey(){return this._requireNotFrozen(),this._submitKey=null,this}get autoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId=e instanceof AccountId?e:AccountId.fromString(e),this}clearAutoRenewAccountId(){return this._requireNotFrozen(),this._autoRenewAccountId=null,this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof Duration?e:new Duration(e),this}_validateChecksums(e){this._topicId!=null&&this._topicId.validateChecksum(e),this._autoRenewAccountId!=null&&this._autoRenewAccountId.validateChecksum(e)}_execute(e,t){return e.consensus.updateTopic(t)}_getTransactionDataCase(){return"consensusUpdateTopic"}_makeTransactionData(){return{topicID:this._topicId!=null?this._topicId._toProtobuf():null,adminKey:this._adminKey!=null?this._adminKey._toProtobufKey():null,submitKey:this._submitKey!=null?this._submitKey._toProtobufKey():null,memo:this._topicMemo!=null?{value:this._topicMemo}:null,autoRenewAccount:this._autoRenewAccountId!=null?this._autoRenewAccountId._toProtobuf():null,autoRenewPeriod:this._autoRenewPeriod!=null?this._autoRenewPeriod._toProtobuf():null,expirationTime:this._expirationTime!=null?this._expirationTime._toProtobuf():null}}_getLogId(){return`TopicUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("consensusUpdateTopic",TopicUpdateTransaction._fromProtobuf);class NullableTokenDecimalMap extends ObjectMap{constructor(){super(e=>TokenId.fromString(e))}}class HbarTransferMap extends ObjectMap{constructor(){super(e=>AccountId.fromString(e))}static _fromProtobuf(e){const t=new HbarTransferMap;for(const o of e.accountAmounts!=null?e.accountAmounts:[]){const c=AccountId._fromProtobuf(o.accountID);t._set(c,Hbar.fromTinybars(o.amount))}return t}}class TokenNftTransfer{constructor(e){this.tokenId=e.tokenId instanceof TokenId?e.tokenId:TokenId.fromString(e.tokenId),this.senderAccountId=e.senderAccountId instanceof AccountId?e.senderAccountId:AccountId.fromString(e.senderAccountId),this.receiverAccountId=e.receiverAccountId instanceof AccountId?e.receiverAccountId:AccountId.fromString(e.receiverAccountId),this.serialNumber=Long$1.fromValue(e.serialNumber),this.isApproved=e.isApproved}static _fromProtobuf(e){const t=[];for(const o of e){const c=TokenId._fromProtobuf(o.token);for(const l of o.nftTransfers!=null?o.nftTransfers:[])t.push(new TokenNftTransfer({tokenId:c,senderAccountId:AccountId._fromProtobuf(l.senderAccountID),receiverAccountId:AccountId._fromProtobuf(l.receiverAccountID),serialNumber:l.serialNumber!=null?l.serialNumber:Long$1.ZERO,isApproved:l.isApproval==!0}))}return t}_toProtobuf(){return{senderAccountID:this.senderAccountId._toProtobuf(),receiverAccountID:this.receiverAccountId._toProtobuf(),serialNumber:this.serialNumber,isApproval:this.isApproved}}}class TransferTransaction extends Transaction{constructor(e={}){super(),this._tokenTransfers=[],this._hbarTransfers=[],this._nftTransfers=[],this._defaultMaxTransactionFee=new Hbar(1);for(const t of e.tokenTransfers!=null?e.tokenTransfers:[])this.addTokenTransfer(t.tokenId,t.accountId,t.amount);for(const t of e.hbarTransfers!=null?e.hbarTransfers:[])this.addHbarTransfer(t.accountId,t.amount);for(const t of e.nftTransfers!=null?e.nftTransfers:[])this.addNftTransfer(t.tokenId,t.serial,t.sender,t.recipient)}static _fromProtobuf(e,t,o,c,l){const d=l[0].cryptoTransfer,g=new TransferTransaction;return g._tokenTransfers=TokenTransfer._fromProtobuf(d.tokenTransfers!=null?d.tokenTransfers:[]),g._hbarTransfers=Transfer._fromProtobuf(d.transfers!=null?d.transfers.accountAmounts!=null?d.transfers.accountAmounts:[]:[]),g._nftTransfers=TokenNftTransfer._fromProtobuf(d.tokenTransfers!=null?d.tokenTransfers:[]),Transaction._fromProtobufTransactions(g,e,t,o,c,l)}get tokenTransfers(){const e=new TokenTransferMap;for(const t of this._tokenTransfers){let o=e.get(t.tokenId);o!=null?o._set(t.accountId,t.amount):(o=new TokenTransferAccountMap,o._set(t.accountId,t.amount),e._set(t.tokenId,o))}return e}_addTokenTransfer(e,t,o,c){this._requireNotFrozen();const l=e instanceof TokenId?e:TokenId.fromString(e),h=t instanceof AccountId?t:AccountId.fromString(t),d=o instanceof Long$1?o:Long$1.fromNumber(o);for(const g of this._tokenTransfers)if(g.tokenId.compare(l)===0&&g.accountId.compare(h)===0)return g.amount=g.amount.add(d),g.expectedDecimals=null,this;return this._tokenTransfers.push(new TokenTransfer({tokenId:e,accountId:t,expectedDecimals:null,amount:o,isApproved:c})),this}addTokenTransfer(e,t,o){return this._addTokenTransfer(e,t,o,!1)}addApprovedTokenTransfer(e,t,o){return this._addTokenTransfer(e,t,o,!0)}addTokenTransferWithDecimals(e,t,o,c){this._requireNotFrozen();const l=e instanceof TokenId?e:TokenId.fromString(e),h=t instanceof AccountId?t:AccountId.fromString(t),d=o instanceof Long$1?o:Long$1.fromNumber(o);let g=!1;for(const m of this._tokenTransfers)if(m.tokenId.compare(l)===0){if(m.expectedDecimals!=null&&m.expectedDecimals!==c)throw new Error("expected decimals mis-match");m.expectedDecimals=c,m.accountId.compare(h)===0&&(m.amount=m.amount.add(d),m.expectedDecimals=c,g=!0)}return g?this:(this._tokenTransfers.push(new TokenTransfer({tokenId:e,accountId:t,expectedDecimals:c,amount:o,isApproved:!1})),this)}get tokenIdDecimals(){const e=new NullableTokenDecimalMap;for(const t of this._tokenTransfers)e._set(t.tokenId,t.expectedDecimals);return e}get hbarTransfers(){const e=new HbarTransferMap;for(const t of this._hbarTransfers)e._set(t.accountId,t.amount);return e}_addHbarTransfer(e,t,o){this._requireNotFrozen();const c=e instanceof AccountId?e.clone():AccountId.fromString(e),l=t instanceof Hbar?t:new Hbar(t);for(const h of this._hbarTransfers)if(h.accountId.compare(c)===0)return h.amount=Hbar.fromTinybars(h.amount.toTinybars().add(l.toTinybars())),this;return this._hbarTransfers.push(new Transfer({accountId:c,amount:l,isApproved:o})),this}addHbarTransfer(e,t){return this._addHbarTransfer(e,t,!1)}addApprovedHbarTransfer(e,t){return this._addHbarTransfer(e,t,!0)}_validateChecksums(e){for(const t of this._hbarTransfers)t.accountId.validateChecksum(e);for(const t of this._tokenTransfers)t.tokenId.validateChecksum(e),t.accountId.validateChecksum(e);for(const t of this._nftTransfers)t.tokenId.validateChecksum(e),t.senderAccountId.validateChecksum(e),t.receiverAccountId.validateChecksum(e)}get nftTransfers(){const e=new TokenNftTransferMap;for(const t of this._nftTransfers){const o=e.get(t.tokenId),c={sender:t.senderAccountId,recipient:t.receiverAccountId,serial:t.serialNumber,isApproved:t.isApproved};o!=null?o.push(c):e._set(t.tokenId,[c])}return e}_addNftTransfer(e,t,o,c,l){this._requireNotFrozen();let h,d,g;if(t instanceof NftId)h=t,d=typeof o=="string"?AccountId.fromString(o):o,g=typeof c=="string"?AccountId.fromString(c):c;else if(t instanceof TokenId)h=new NftId(t,o),d=typeof c=="string"?AccountId.fromString(c):c,g=typeof l=="string"?AccountId.fromString(l):l;else try{h=NftId.fromString(t),d=typeof o=="string"?AccountId.fromString(o):o,g=typeof c=="string"?AccountId.fromString(c):c}catch{const v=TokenId.fromString(t);h=new NftId(v,o),d=typeof c=="string"?AccountId.fromString(c):c,g=typeof l=="string"?AccountId.fromString(l):l}for(const m of this._nftTransfers)if(m.tokenId.compare(h.tokenId)===0&&m.serialNumber.compare(h.serial)===0)return m.senderAccountId=d,m.receiverAccountId=g,this;return this._nftTransfers.push(new TokenNftTransfer({tokenId:h.tokenId,serialNumber:h.serial,senderAccountId:d,receiverAccountId:g,isApproved:e})),this}addNftTransfer(e,t,o,c){return this._addNftTransfer(!1,e,t,o,c)}addApprovedNftTransfer(e,t,o,c){return this._addNftTransfer(!0,e,t,o,c)}setHbarTransferApproval(e,t){const o=typeof e=="string"?AccountId.fromString(e):e;for(const c of this._hbarTransfers)c.accountId.compare(o)===0&&(c.isApproved=t);return this}setTokenTransferApproval(e,t,o){const c=typeof e=="string"?TokenId.fromString(e):e,l=typeof t=="string"?AccountId.fromString(t):t;for(const h of this._tokenTransfers)h.tokenId.compare(c)===0&&h.accountId.compare(l)===0&&(h.isApproved=o);return this}setNftTransferApproval(e,t){const o=typeof e=="string"?NftId.fromString(e):e;for(const c of this._nftTransfers)c.tokenId.compare(o.tokenId)===0&&c.serialNumber.compare(o.serial)===0&&(c.isApproved=t);return this}_execute(e,t){return e.crypto.cryptoTransfer(t)}_getTransactionDataCase(){return"cryptoTransfer"}_makeTransactionData(){const e=[];this._tokenTransfers.sort((c,l)=>{const h=c.tokenId.compare(l.tokenId);return h!==0?h:c.accountId.compare(l.accountId)}),this._nftTransfers.sort((c,l)=>{const h=c.senderAccountId.compare(l.senderAccountId);if(h!=0)return h;const d=c.receiverAccountId.compare(l.receiverAccountId);return d!=0?d:c.serialNumber.compare(l.serialNumber)});let t=0,o=0;for(;t<this._tokenTransfers.length||o<this._nftTransfers.length;)if(t<this._tokenTransfers.length&&o<this._nftTransfers.length){const c=this._tokenTransfers[t].tokenId,l=this._nftTransfers[o].tokenId,h=e.length>0?e[e.length-1]:null,d=h!=null?h.tokenId:null;if(h!=null&&d!=null&&d.compare(c)===0){h.transfers.push(this._tokenTransfers[t++]);continue}if(h!=null&&d!=null&&d.compare(l)===0){h.nftTransfers.push(this._nftTransfers[o++]);continue}const g=c.compare(l);g===0?e.push({tokenId:c,expectedDecimals:this._tokenTransfers[t].expectedDecimals,transfers:[this._tokenTransfers[t++]],nftTransfers:[this._nftTransfers[o++]]}):g<0?e.push({tokenId:c,expectedDecimals:this._tokenTransfers[t].expectedDecimals,transfers:[this._tokenTransfers[t++]],nftTransfers:[]}):e.push({tokenId:l,expectedDecimals:null,transfers:[],nftTransfers:[this._nftTransfers[o++]]})}else if(t<this._tokenTransfers.length){const c=this._tokenTransfers[t].tokenId;let l;for(const d of e)d.tokenId.compare(c)===0&&(l=d);const h=l!=null?l.tokenId:null;if(l!=null&&h!=null&&h.compare(c)===0){l.transfers.push(this._tokenTransfers[t++]);continue}e.push({tokenId:c,expectedDecimals:this._tokenTransfers[t].expectedDecimals,transfers:[this._tokenTransfers[t++]],nftTransfers:[]})}else if(o<this._nftTransfers.length){const c=this._nftTransfers[o].tokenId;let l;for(const d of e)d.tokenId.compare(c)===0&&(l=d);const h=l!=null?l.tokenId:null;if(l!=null&&h!=null&&h.compare(c)===0){l.nftTransfers.push(this._nftTransfers[o++]);continue}e.push({tokenId:c,expectedDecimals:null,transfers:[],nftTransfers:[this._nftTransfers[o++]]})}return this._hbarTransfers.sort((c,l)=>c.accountId.compare(l.accountId)),{transfers:{accountAmounts:this._hbarTransfers.map(c=>({accountID:c.accountId._toProtobuf(),amount:c.amount.toTinybars(),isApproval:c.isApproved}))},tokenTransfers:e.map(c=>({token:c.tokenId._toProtobuf(),expectedDecimals:c.expectedDecimals!=null?{value:c.expectedDecimals}:null,transfers:c.transfers.map(l=>l._toProtobuf()),nftTransfers:c.nftTransfers.map(l=>l._toProtobuf())}))}}_getLogId(){return`TransferTransaction:${this._transactionIds.current.validStart.toString()}`}}TRANSACTION_REGISTRY.set("cryptoTransfer",TransferTransaction._fromProtobuf);function tryStringify(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}var quickFormatUnescaped=format$1;function format$1(n,e,t){var o=t&&t.stringify||tryStringify,c=1;if(typeof n=="object"&&n!==null){var l=e.length+c;if(l===1)return n;var h=new Array(l);h[0]=o(n);for(var d=1;d<l;d++)h[d]=o(e[d]);return h.join(" ")}if(typeof n!="string")return n;var g=e.length;if(g===0)return n;for(var m="",v=1-c,_=-1,p=n&&n.length||0,a=0;a<p;){if(n.charCodeAt(a)===37&&a+1<p){switch(_=_>-1?_:0,n.charCodeAt(a+1)){case 100:case 102:if(v>=g||e[v]==null)break;_<a&&(m+=n.slice(_,a)),m+=Number(e[v]),_=a+2,a++;break;case 105:if(v>=g||e[v]==null)break;_<a&&(m+=n.slice(_,a)),m+=Math.floor(Number(e[v])),_=a+2,a++;break;case 79:case 111:case 106:if(v>=g||e[v]===void 0)break;_<a&&(m+=n.slice(_,a));var u=typeof e[v];if(u==="string"){m+="'"+e[v]+"'",_=a+2,a++;break}if(u==="function"){m+=e[v].name||"<anonymous>",_=a+2,a++;break}m+=o(e[v]),_=a+2,a++;break;case 115:if(v>=g)break;_<a&&(m+=n.slice(_,a)),m+=String(e[v]),_=a+2,a++;break;case 37:_<a&&(m+=n.slice(_,a)),m+="%",_=a+2,a++,v--;break}++v}++a}return _===-1?n:(_<p&&(m+=n.slice(_)),m)}const format=quickFormatUnescaped,_console=pfGlobalThisOrFallback().console||{},stdSerializers={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:asErrValue,errWithCause:asErrValue};function levelToValue(n,e){return n==="silent"?1/0:e.levels.values[n]}const baseLogFunctionSymbol=Symbol("pino.logFuncs"),hierarchySymbol=Symbol("pino.hierarchy"),logFallbackMap={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function appendChildLogger(n,e){const t={logger:e,parent:n[hierarchySymbol]};e[hierarchySymbol]=t}function setupBaseLogFunctions(n,e,t){const o={};e.forEach(c=>{o[c]=t[c]?t[c]:_console[c]||_console[logFallbackMap[c]||"log"]||noop}),n[baseLogFunctionSymbol]=o}function shouldSerialize(n,e){return Array.isArray(n)?n.filter(function(o){return o!=="!stdSerializers.err"}):n===!0?Object.keys(e):!1}function pino(n){n=n||{},n.browser=n.browser||{};const e=n.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const t=n.browser.write||_console;n.browser.write&&(n.browser.asObject=!0);const o=n.serializers||{},c=shouldSerialize(n.browser.serialize,o);let l=n.browser.serialize;Array.isArray(n.browser.serialize)&&n.browser.serialize.indexOf("!stdSerializers.err")>-1&&(l=!1);const h=Object.keys(n.customLevels||{}),d=["error","fatal","warn","info","debug","trace"].concat(h);typeof t=="function"&&d.forEach(function(y){t[y]=t}),(n.enabled===!1||n.browser.disabled)&&(n.level="silent");const g=n.level||"info",m=Object.create(t);m.log||(m.log=noop),setupBaseLogFunctions(m,d,t),appendChildLogger({},m),Object.defineProperty(m,"levelVal",{get:_}),Object.defineProperty(m,"level",{get:p,set:a});const v={transmit:e,serialize:c,asObject:n.browser.asObject,levels:d,timestamp:getTimeFunction(n)};m.levels=getLevels(n),m.level=g,m.setMaxListeners=m.getMaxListeners=m.emit=m.addListener=m.on=m.prependListener=m.once=m.prependOnceListener=m.removeListener=m.removeAllListeners=m.listeners=m.listenerCount=m.eventNames=m.write=m.flush=noop,m.serializers=o,m._serialize=c,m._stdErrSerialize=l,m.child=u,e&&(m._logEvent=createLogEventShape());function _(){return levelToValue(this.level,this)}function p(){return this._level}function a(y){if(y!=="silent"&&!this.levels.values[y])throw Error("unknown level "+y);this._level=y,set(this,v,m,"error"),set(this,v,m,"fatal"),set(this,v,m,"warn"),set(this,v,m,"info"),set(this,v,m,"debug"),set(this,v,m,"trace"),h.forEach(b=>{set(this,v,m,b)})}function u(y,b){if(!y)throw new Error("missing bindings for child Pino");b=b||{},c&&y.serializers&&(b.serializers=y.serializers);const w=b.serializers;if(c&&w){var T=Object.assign({},o,w),B=n.browser.serialize===!0?Object.keys(T):c;delete y.serializers,applySerializers([y],B,T,this._stdErrSerialize)}function H(W){this._childLevel=(W._childLevel|0)+1,this.bindings=y,T&&(this.serializers=T,this._serialize=B),e&&(this._logEvent=createLogEventShape([].concat(W._logEvent.bindings,y)))}H.prototype=this;const J=new H(this);return appendChildLogger(this,J),J.level=this.level,J}return m}function getLevels(n){const e=n.customLevels||{},t=Object.assign({},pino.levels.values,e),o=Object.assign({},pino.levels.labels,invertObject(e));return{values:t,labels:o}}function invertObject(n){const e={};return Object.keys(n).forEach(function(t){e[n[t]]=t}),e}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};pino.stdSerializers=stdSerializers;pino.stdTimeFunctions=Object.assign({},{nullTime,epochTime,unixTime,isoTime});function getBindingChain(n){const e=[];n.bindings&&e.push(n.bindings);let t=n[hierarchySymbol];for(;t.parent;)t=t.parent,t.logger.bindings&&e.push(t.logger.bindings);return e.reverse()}function set(n,e,t,o){if(n[o]=levelToValue(n.level,t)>levelToValue(o,t)?noop:t[baseLogFunctionSymbol][o],!e.transmit&&n[o]===noop)return;n[o]=createWrap(n,e,t,o);const c=getBindingChain(n);c.length!==0&&(n[o]=prependBindingsInArguments(c,n[o]))}function prependBindingsInArguments(n,e){return function(){return e.apply(this,[...n,...arguments])}}function createWrap(n,e,t,o){return function(c){return function(){const h=e.timestamp(),d=new Array(arguments.length),g=Object.getPrototypeOf&&Object.getPrototypeOf(this)===_console?_console:this;for(var m=0;m<d.length;m++)d[m]=arguments[m];if(e.serialize&&!e.asObject&&applySerializers(d,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?c.call(g,asObject(this,o,d,h)):c.apply(g,d),e.transmit){const v=e.transmit.level||n._level,_=t.levels.values[v],p=t.levels.values[o];if(p<_)return;transmit(this,{ts:h,methodLevel:o,methodValue:p,transmitLevel:v,transmitValue:t.levels.values[e.transmit.level||n._level],send:e.transmit.send,val:levelToValue(n._level,t)},d)}}}(n[baseLogFunctionSymbol][o])}function asObject(n,e,t,o){n._serialize&&applySerializers(t,n._serialize,n.serializers,n._stdErrSerialize);const c=t.slice();let l=c[0];const h={};o&&(h.time=o),h.level=n.levels.values[e];let d=(n._childLevel|0)+1;if(d<1&&(d=1),l!==null&&typeof l=="object"){for(;d--&&typeof c[0]=="object";)Object.assign(h,c.shift());l=c.length?format(c.shift(),c):void 0}else typeof l=="string"&&(l=format(c.shift(),c));return l!==void 0&&(h.msg=l),h}function applySerializers(n,e,t,o){for(const c in n)if(o&&n[c]instanceof Error)n[c]=pino.stdSerializers.err(n[c]);else if(typeof n[c]=="object"&&!Array.isArray(n[c]))for(const l in n[c])e&&e.indexOf(l)>-1&&l in t&&(n[c][l]=t[l](n[c][l]))}function transmit(n,e,t){const o=e.send,c=e.ts,l=e.methodLevel,h=e.methodValue,d=e.val,g=n._logEvent.bindings;applySerializers(t,n._serialize||Object.keys(n.serializers),n.serializers,n._stdErrSerialize===void 0?!0:n._stdErrSerialize),n._logEvent.ts=c,n._logEvent.messages=t.filter(function(m){return g.indexOf(m)===-1}),n._logEvent.level.label=l,n._logEvent.level.value=h,o(l,n._logEvent,d),n._logEvent=createLogEventShape(g)}function createLogEventShape(n){return{ts:0,messages:[],bindings:n||[],level:{label:"",value:0}}}function asErrValue(n){const e={type:n.constructor.name,msg:n.message,stack:n.stack};for(const t in n)e[t]===void 0&&(e[t]=n[t]);return e}function getTimeFunction(n){return typeof n.timestamp=="function"?n.timestamp:n.timestamp===!1?nullTime:epochTime}function mock(){return{}}function passthrough(n){return n}function noop(){}function nullTime(){return!1}function epochTime(){return Date.now()}function unixTime(){return Math.round(Date.now()/1e3)}function isoTime(){return new Date(Date.now()).toISOString()}function pfGlobalThisOrFallback(){function n(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return n(self)||n(window)||n(this)||{}}}class LogLevel{constructor(e){this._name=e,Object.freeze(this)}toString(){switch(this){case LogLevel.Silent:return"silent";case LogLevel.Trace:return"trace";case LogLevel.Debug:return"debug";case LogLevel.Info:return"info";case LogLevel.Warn:return"warn";case LogLevel.Error:return"error";case LogLevel.Fatal:return"fatal";default:return`Unknown log level (${this._name})`}}static _fromString(e){switch(e){case"silent":return LogLevel.Silent;case"trace":return LogLevel.Trace;case"debug":return LogLevel.Debug;case"info":return LogLevel.Info;case"warn":return LogLevel.Warn;case"error":return LogLevel.Error;case"fatal":return LogLevel.Fatal;default:throw new Error(`Unknown log level: ${e}`)}}}LogLevel.Silent=new LogLevel("silent");LogLevel.Trace=new LogLevel("trace");LogLevel.Debug=new LogLevel("debug");LogLevel.Info=new LogLevel("info");LogLevel.Warn=new LogLevel("warn");LogLevel.Error=new LogLevel("error");LogLevel.Fatal=new LogLevel("fatal");class CostQuery extends Executable{constructor(e){super(),this._query=e,this._grpcDeadline=e._grpcDeadline,this._requestTimeout=e._requestTimeout,this._nodeAccountIds=e._nodeAccountIds.clone(),this._operator=e._operator,this._header=null}_getTransactionId(){return this._query._getTransactionId()}_getLogId(){return`CostQuery:${this._query._getLogId()}`}async _beforeExecute(e){if(e==null)throw new Error("Cannot do CostQuery without Client");const t=this._operator!=null?this._operator:e._operator;if(t==null)throw new Error("`client` must have an `operator` or an explicit payment transaction must be provided");this._query._nodeAccountIds.isEmpty&&this._query._nodeAccountIds.setList(e._network.getNodeAccountIdsForExecute());const o=TransactionId.generate(t.accountId);this._query.paymentTransactionId==null&&this._query.setPaymentTransactionId(o);const c=this._getLogId(),l=new AccountId(0),h=TransactionId.generate(new AccountId(0)),d=new Hbar(0);this._logger&&this._logger.debug(`[${c}] making a payment transaction for node ${l.toString()} and transaction ID ${h.toString()} with amount ${d.toString()}`),this._header={payment:await _makePaymentTransaction(h,new AccountId(0),t,d),responseType:lib.proto.ResponseType.COST_ANSWER}}_makeRequestAsync(){return Promise.resolve(this._query._onMakeRequest(this._header))}_shouldRetry(e,t){return this._query._shouldRetry(e,t)}_mapStatusError(e,t){return this._query._mapStatusError(e,t)}_mapResponse(e,t,o){const c=this._query._mapResponseHeader(e).cost;return Promise.resolve(Hbar.fromTinybars(c))}_execute(e,t){return this._query._execute(e,t)}_requestToBytes(e){return this._query._requestToBytes(e)}_responseToBytes(e){return this._query._responseToBytes(e)}}COST_QUERY.push(n=>new CostQuery(n));const HOST_AND_PORT=/^(\S+):(\d+)$/;class ManagedNodeAddress{constructor(e={}){if(e.address!=null){const t=HOST_AND_PORT.exec(e.address);if(t==null)throw new Error(`failed to parse address: ${e.address}`);this._address=t[1],this._port=t[2]!=null?parseInt(t[2]):null}else if(e.host!=null&&e.port!=null)this._address=e.host,this._port=e.port;else throw new Error(`failed to create a managed node address: ${JSON.stringify(e)}`);Object.freeze(this)}static fromString(e){return new ManagedNodeAddress({address:e})}toInsecure(){let e=this.port===50212?50211:this.port;return new ManagedNodeAddress({host:this.address,port:e})}toSecure(){let e=this.port===50211?50212:this.port;return new ManagedNodeAddress({host:this.address,port:e})}get address(){return this._address}get port(){return this._port}isTransportSecurity(){return this._port==50212||this._port==443}toString(){return this.port==null?this.address:`${this.address}:${this.port}`}}class ManagedNode{constructor(e={}){if(e.newNode!=null)this._address=typeof e.newNode.address=="string"?ManagedNodeAddress.fromString(e.newNode.address):e.newNode.address,this._cert=void 0,this._channel=null,this._channelInitFunction=e.newNode.channelInitFunction,this._lastUsed=Date.now(),this._readmitTime=Date.now(),this._useCount=0,this._badGrpcStatusCount=0,this._minBackoff=8e3,this._maxBackoff=1e3*60*60,this._currentBackoff=this._minBackoff;else if(e.cloneNode!=null)this._address=e.cloneNode.address,this._cert=e.cloneNode.node._cert,this._channel=e.cloneNode.node._channel,this._channelInitFunction=e.cloneNode.node._channelInitFunction,this._currentBackoff=e.cloneNode.node._currentBackoff,this._lastUsed=e.cloneNode.node._lastUsed,this._readmitTime=e.cloneNode.node._readmitTime,this._useCount=e.cloneNode.node._useCount,this._badGrpcStatusCount=e.cloneNode.node._badGrpcStatusCount,this._minBackoff=e.cloneNode.node._minBackoff,this._maxBackoff=e.cloneNode.node._minBackoff;else throw new Error(`failed to create ManagedNode: ${JSON.stringify(e)}`)}getKey(){throw new Error("not implemented")}setCert(e){return this}get address(){return this._address}get attempts(){return this._badGrpcStatusCount}get minBackoff(){return this._minBackoff}setMinBackoff(e){return this._currentBackoff<=e&&(this._currentBackoff=e),this._minBackoff=e,this}get maxBackoff(){return this._maxBackoff}setMaxBackoff(e){return this._currentBackoff<=e&&(this._currentBackoff=e),this._maxBackoff=e,this}getChannel(){return this._useCount++,this.__lastUsed=Date.now(),this._channel!=null?this._channel:(this._channel=this._channelInitFunction(this.address.toString(),this._cert),this._channel)}isHealthy(){return this._readmitTime<=Date.now()}increaseBackoff(){this._currentBackoff=Math.min(this._currentBackoff*2,this._maxBackoff),this._readmitTime=Date.now()+this._currentBackoff}decreaseBackoff(){this._currentBackoff=Math.max(this._currentBackoff/2,this._minBackoff)}getRemainingTime(){return this._readmitTime-this._lastUsed}backoff(){return new Promise(e=>setTimeout(e,this.getRemainingTime()))}compare(e){let t=this.getRemainingTime()-e.getRemainingTime();return t!=0||(t=this._currentBackoff-e._currentBackoff,t!=0)||(t=this._badGrpcStatusCount-e._badGrpcStatusCount,t!=0)||(t=this._useCount-e._useCount,t!=0)?t:this._lastUsed-e._lastUsed}close(){this._channel!=null&&this._channel.close(),this._channel=null}}const PREVIEWNET_CERTS={"0.0.3":`-----BEGIN CERTIFICATE-----
MIICnzCCAiWgAwIBAgIUenyqJ4UaFBbwokatcUqAwW3o3rswCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDAxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjIyMTU4WhgPMjI5NTA2MDcyMjIxNThaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAwMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEm5b1+oG9R0qt
zM7UZnS5l/xxUNHIHq5+NAvtlviCpJL19jrW9+/UOy00Qqc6vS6tS1hS+dNJmpiZ
FN0EHew4VDR7ACnL4LDJKmIHWjQ0iwvZo5kCpO0r9BtPN5FvaSxyo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUeciBviJtjeuue0GPf1xllNw7qvYwCgYIKoZIzj0EAwMDaAAwZQIw
JeG0H2HdsI1VhOYmJmYlNeKCNgAk+LMorzPmsIInVBO2HK2IrKfpReWDS/m5j51V
AjEAxKBxDezJDqAZHTkTXCg+X9Q9V6J6M5yDy5IS90aCWEo+W8C1Hc6hkn2/NrvT
PhwK
-----END CERTIFICATE-----
`,"0.0.4":`-----BEGIN CERTIFICATE-----
MIICnjCCAiWgAwIBAgIUUfjO8LyXBdzrzbAe1Yl+d34IDsIwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDExHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjIyMTU5WhgPMjI5NTA2MDcyMjIxNTlaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAxMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAERwfj4ZtD/wRb
f8h9NEMu2sQoLFK9Gc4SQ8o6j4ccLYGdgOoVoq4zzy4Jr7ZtCTuACfCfhp7wy8ra
+6cugccaSd6AzOKRSVZvQvkUTFKIoAOKwp6IhlU48rmi80MT07eyo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUCGhfVMP72Y0G5XUksE3dPgFHrzkwCgYIKoZIzj0EAwMDZwAwZAIw
cpX7irZWyuujWRYUs9kLNgB2YLQK+n8r1fH+tJg3+zkcZ2pzhGWmpUUZWOzsDqGC
AjBUbhlmrTc4LrEBN0EMiRYzfPD2kBZxusLBDIg/aDYERCMcsFvF1T9SsuasF/B+
cI8=
-----END CERTIFICATE-----
`,"0.0.5":`-----BEGIN CERTIFICATE-----
MIICnjCCAiWgAwIBAgIUIo4L+7xe/mUmpKy4qOAQEIxz8UMwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDIxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjIyMTU5WhgPMjI5NTA2MDcyMjIxNTlaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAyMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEoFgCjb1/7BUJ
EXKIPJLlsOSp/39G8l92wOSr7h+Py7iwVwu68H2ykftMOq3tRwDRXZHz7ViqcIZ9
lfMcS8sbRtVm9tBbNciVUqTLWX9nHr/c4PhKEi+LdgtSUr2+hHiWo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUMR89BHC3yKC4YwUgyBVQUGBCprQwCgYIKoZIzj0EAwMDZwAwZAIw
Us2BdslcScIwcmxoB60K7/1BPfQI8ccDZIMosas6U2zhinTnRKik1T0i+uHhLl8e
AjA5apAwSPTnP7j3Bo/FOCkfjTqOjwp2lUqzDJYKolKsHX2sy8hX9MkYiY46SaJ1
P+0=
-----END CERTIFICATE-----
`,"0.0.6":`-----BEGIN CERTIFICATE-----
MIICnzCCAiWgAwIBAgIUWpji03mJsR/16MP8BrOfpNz7aQMwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDMxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjIyMTU5WhgPMjI5NTA2MDcyMjIxNTlaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAzMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAE+KDMC99Q1rWi
+FwlytGMS5qzTDytCvk+PzdONnDZ/weNSv4j3BXSo588IwhIxLtfcBlyo/+PmE1c
5qGFXuMoZjGr22VpvogkRgPejD+Gawb4A2XHkMCD8NmO66uPw97po1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUN1qEI4eQ+WHavb9ypGV417NvhGowCgYIKoZIzj0EAwMDaAAwZQIw
L0khkiDOiFRa3wx9l5JNjaSRePPc3ZaTaJQkPYeauMaLWEvmC/0e2/e9gPm5qJ8E
AjEAgXQMko3vNB8VRN4XjyFJa8p/muZ/tLA15wPnb/boUmiZ+njDDSaiu8tIQrTB
gHW6
-----END CERTIFICATE-----
`,"0.0.7":`-----BEGIN CERTIFICATE-----
MIICnjCCAiWgAwIBAgIUEJ7AJvrqDUBNKbssGoJtww3v+WowCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDQxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjIyMjAwWhgPMjI5NTA2MDcyMjIyMDBaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDA0MR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEfgJ8w9GUWM3y
yusedZOFQrgXFVsdtRsMSHbqyVCN6+Wow6SIjy29GRMSP5R2aswupFgh6lXJRqnr
tY+hpRumFKsmSo+5+l8DBcql4rzs4utESTehM+Cq9LYc4A1z0UIRo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUMCm3UqSbT01Zr23hLzCGnXbDa+MwCgYIKoZIzj0EAwMDZwAwZAIw
FNcN7mKJo/bwpRT+y/KbYkCJsvljdbXzJOXXQ3e6J6R+0vLqcT25J/ry6pBZMUwR
AjAswu29z8KJCSxnWwnPpHDmkRT15zG/xS+pAmx3oeQSqp6ZD7qpdJE8zzhbfe5x
wAc=
-----END CERTIFICATE-----
`},TESTNET_CERTS={"0.0.3":`-----BEGIN CERTIFICATE-----
MIICoDCCAiWgAwIBAgIUMkNeM6Sbk9ZFYmRWZmSgTQHHWyUwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDAxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjIyMjU4WhgPMjI5NTA2MDcyMjIyNThaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAwMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAETLLoIMZjEhDP
KLHS7bJT4OTYGgR/8mB65yfx3KqMLYFF+q2SpWkIrYgUQLVEUEibVSnLlxRUzH7R
szcKynpTwh0W0yfWanZKQg+RWoKkEYlu2GvkUtJb8cRVM9NLmJUeo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUSrIepwFx8gZ8/G+WGaxs6GgkMtQwCgYIKoZIzj0EAwMDaQAwZgIx
AJxC0fjB1OrF9vkCKsfnPS3Z+1hscrZhEDG38NxdLEAfPQ5VmyrSBgJy11FBp8yB
0QIxAKzbge3Lf7iBMwYwm+2M/GiVgmHNMLdtrYuerWpdbYOHgRNAkyt57JoThn0u
Tzkd5Q==
-----END CERTIFICATE-----
`,"0.0.4":`-----BEGIN CERTIFICATE-----
MIICnzCCAiWgAwIBAgIUGLriiLPacglp6U+BtJcF9TI7xEUwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDExHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjIyMjU4WhgPMjI5NTA2MDcyMjIyNThaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAxMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEXhR9cb6mH9AE
GNSGk3OkxN1C/JW49ddYZ/XWD4InjS8D1kXmB1Y39v1mF0L1loG6lDT8Zp46zrj7
5zMONXZeD2b0mx5hHhtllPTpJ10Tlt9FDoyFbKwPRQ/SAPNADfuzo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUCaKtx8RZ1XJO9rmZMbIcFJZkcv4wCgYIKoZIzj0EAwMDaAAwZQIx
APhDW0VrNSmq8hODdhIVV4GyvpYhp3Fksg+sZr3DmUatwn+ptj+X+9IzgPl9QYE3
kAIwcy2ixgNkjC/DYVmgT4MpUnLneLK0gA23Vj2QwACaTH99H/ybqUH7srj0POB9
5wvV
-----END CERTIFICATE-----
`,"0.0.5":`-----BEGIN CERTIFICATE-----
MIICoDCCAiWgAwIBAgIUEMduome38hvAuIKoGjg/tHatQZMwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDIxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjIyMjU4WhgPMjI5NTA2MDcyMjIyNThaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAyMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEl1olzP1L4WgX
d7aujOXmTQZt3tEOGzkMa3S6qJwISLBI7Tb9KaW8zYIe9xWBVAwphCbD0wn9xpPV
wMr4uTn+JocugYBbe2YoUGzWTkxWnOEKXbh/nQJCe3XE/C0FY8fAo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQULfw7LVtTiUDVIvZwhhWW0soQtSQwCgYIKoZIzj0EAwMDaQAwZgIx
AID5v3Lo2zlnpFzTdJFqBpw6fV+vmpI+JBj61f264J/uHMbELiu2dwxhwWaMElX7
wQIxAJxccFr7Bf1KjaMyT2dq75zQzFuKDMj9x92yAqM2Gas/Yay+Ccpm8FBn7BFl
ke1Qwg==
-----END CERTIFICATE-----
`,"0.0.6":`-----BEGIN CERTIFICATE-----
MIICnzCCAiWgAwIBAgIUcCg/gZGxk/UjYkhW1jg4Zki+jfwwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDMxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjIyMjU5WhgPMjI5NTA2MDcyMjIyNTlaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAzMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEOSsXBZicyrxy
tHJHKh04Mvu6SKM49IC7rAXw5CjlOod5OTeHg0fa5vVoBME4mlWP+LsMMqf8welC
20b4wMwUC1Hnd66v8crX8L1wvZ9EmKLTvhTd65bS5zloMiSbpdF2o1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUgMMwqaGuUT6JCH0gsbqullaW6/QwCgYIKoZIzj0EAwMDaAAwZQIx
AMggJ1eMmT7C14z7wHCsOdDOgmzg733+a5dsuAcxknoz/sQLN8wqy1JxShWgEIA/
xwIweTDAX/4JZnr3mlSC57lYXbHk/c319VfN9Ybxg0FaDXa8tOqg7Ml6Uu3IGujQ
a3eY
-----END CERTIFICATE-----
`,"0.0.7":`-----BEGIN CERTIFICATE-----
MIICoDCCAiWgAwIBAgIUXADwhiD5acpA66GPoXuAevBfZBIwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDQxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjIyMjU5WhgPMjI5NTA2MDcyMjIyNTlaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDA0MR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEBgLhLiGz8qWu
50vzxSyQkrmhpxuHBJhpGzA0WaUJdAUlaUOL1753ZxxA08wUmcozILNEnMaQ+ROn
+fuGctv90ZcrSekODjxjbKH2ntVLP8xwkBRCTJ0WRBNenxxBD438o1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUhYOOD/z3ty9O5GuSTXnyujIqBRgwCgYIKoZIzj0EAwMDaQAwZgIx
AMxbZ4gvkXaORauQFUPRYwOJrihWIA+3ttGDua//YfEbshytQ8b4L65W/1Xs8eOd
DwIxAImwTzRam8tScdOzmuGgPcML2lkETMpMA2rZYVyEL/VNktIxvB2oE+4M0v5l
r8IbTA==
-----END CERTIFICATE-----
`},MAINNET_CERTS={"0.0.3":`-----BEGIN CERTIFICATE-----
MIICnjCCAiWgAwIBAgIUZWoT9TlgbZy+syLbqZhO5++1cVgwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDAxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjI0MjQ3WhgPMjI5NTA2MDcyMjQyNDdaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAwMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAE8NhDGK/dgWvD
RHEJ8af7CBDdhvujH5XIrLen33GTLY8DbJwJW2jdsLGx3+DRVVmeNQZxCbcGj0e2
IyypkG6s0mtnmeymD8mI3JU8m1aZiuIptZSH3Bw1BNn2hKU4x42co1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUbYGliiNtMkGaroQxXWCl+kYHDBwwCgYIKoZIzj0EAwMDZwAwZAIw
ImTOEYu0y73Ggt4NAjFFsN2sV7CsEL3NoJqJ7MZ6U+b3Ax1hnc1eE0oei6xH4VNF
AjBB4iZNvAn6Esiu4k+JPlYuMesplgMv33fU5GsfvLIovN8pOJDe0c+CUmsnfGbP
OsQ=
-----END CERTIFICATE-----
`,"0.0.4":`-----BEGIN CERTIFICATE-----
MIICnjCCAiWgAwIBAgIUEGWU0F4aKffY+le55ahQaScDYDwwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDExHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjI0MjQ3WhgPMjI5NTA2MDcyMjQyNDdaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAxMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEqW6TqxMmjL3h
9AVBgfVaFRZlXUcyWa+QYhzxr8sksgJqfDbmGtdaHIdiL1qCPuC4v4G3qrAbXZRm
TYNo5Lz0X2ic5pES6DbacdjOgHH7TAY4BVKkuVrydln2jjhh7SmBo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUcBlY5a1rV0H1iQuJMwWxrTEWQ6MwCgYIKoZIzj0EAwMDZwAwZAIw
R+mY9B2U26yD44s03hjz4TlpkyXbVfmgL3Elqo3lrWDJtvT4zpjGjxg3Q1P3SpZQ
AjAy9DRVrZPzq8iq5Ir7B8XgLQH5QL7SQ3tUL1HzXJYOukvn9Ofr+QADhpb0oJLB
Kug=
-----END CERTIFICATE-----
`,"0.0.5":`-----BEGIN CERTIFICATE-----
MIICnjCCAiWgAwIBAgIUbxzfD3ihIK5snumqqKtqtcBPSSQwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDIxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjI0MjQ3WhgPMjI5NTA2MDcyMjQyNDdaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAyMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEWoAjWmW7vpUr
U69wRbK9Firons4kRoin6N8lMjCD+xzsrsT6/wycpzC0F8fxfIvOYSMWRtinhOKl
ZAxp60OWYP87iH7RqWBAnHIJZj/znKTGd+8Sqp/RVQmButFHg/+Go1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUTMtwuDzI4Hun7SPp2Nb3scjUUXkwCgYIKoZIzj0EAwMDZwAwZAIw
HKAgaX39Lgc+4/xHXzZR9mi2p3pf6CDO85Xm56UR/t48HnBkRorR3TFCBXACeIIs
AjBtXglpDnRf6M+nVBlxLdwCQXiwr6vQJ9+dUo+suNkZ1JBmtHypyIqkG2yT4z9C
Lcs=
-----END CERTIFICATE-----
`,"0.0.6":`-----BEGIN CERTIFICATE-----
MIICoDCCAiWgAwIBAgIUPwXdJvpCJYO9lm6uQN3S1aBi3PswCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDMxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjI0MjQ4WhgPMjI5NTA2MDcyMjQyNDhaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDAzMR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAE8PwBQ0ywu+0t
eIYbaiKwzGEScQMOYFYAMw49++6bGRiH/XZjsypqlJWy3F/mB3+HNVZsqgB61Jpj
2p98Afkl57MYWhWM29t/x5qAQ8LhKGu2k+BOnCcvHDU2pR+fmFSOo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUgI4r3/iwzFN2wh76y/4XDBk7wgkwCgYIKoZIzj0EAwMDaQAwZgIx
ANAjwHdTWYMCCjrtb2NWzDpsKjf3m6ZcaxbEcM1ta/Zji/4x0+VRZa917CkfaEsr
LAIxAK/erPvIXRU9eNaK/TAQqppSRaF35G6iNnYjQZzfjTU2DczhT4oCjKzGoCHT
kI1zOg==
-----END CERTIFICATE-----
`,"0.0.7":`-----BEGIN CERTIFICATE-----
MIICnzCCAiWgAwIBAgIUXUGzJj13Ck2Cp0BKauLOdzgCPwIwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDQxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjI0MjQ4WhgPMjI5NTA2MDcyMjQyNDhaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDA0MR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAE8Ee64Tbu53i/
KsuLOJG3GQ4e9gQ+9BtEy7U8kfFzRHh6Ejn7LOW38ZdKX1HP4zXuUusjNvytqDvr
7eclitqnegcEOkIeFK3wQwBoNILuq+r4LRVi19V+AIcl5w3qkJvIo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQU2tbfu7hd7USgbS2WsG/6BduKEAMwCgYIKoZIzj0EAwMDaAAwZQIw
Rw/BOLoScmU7P/1JnNPsGarmnvcuJrokAv1wk6j8s5LGuQHReX+d+O3RPLggwcAY
AjEAjoZnt9simul4cVcVy4G/0f39atanUva17gyzlYXEYx7B6UloxLeEcZhlbBf8
GjRf
-----END CERTIFICATE-----
`,"0.0.8":"","0.0.9":"","0.0.10":`-----BEGIN CERTIFICATE-----
MIICnzCCAiWgAwIBAgIUNauEDBCmP9igXLWtRpzkQqIGo/wwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDcxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjI0MjQ5WhgPMjI5NTA2MDcyMjQyNDlaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDA3MR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEjbkoJBshQXUy
qm5K8ldpTDR94Wk8iEM7QwHfceIxK5pPgaVGRkoJyVLSK5LMH4jyaIHUrtA0lIBQ
o0MsYkq7TOOm7+vo1Yrd8EMbu5StMb3gsXUrj7E/SBKIxULak6hCo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUyKHMzIBPRV/mrgG7tIjzOiw2xbUwCgYIKoZIzj0EAwMDaAAwZQIx
ANsigVtLgTdKWBPVJPstWA0H8yihf0/dmM3GO4qp5keGTWz/O3tnom4iDB6eSrcA
jwIwU82Dh+Wxl3kAD3YJH5VhlfHTm1rPlJETBHZgvPBOYqippao6+WZFEpn2/IDC
NTjn
-----END CERTIFICATE-----
`,"0.0.11":`-----BEGIN CERTIFICATE-----
MIICnjCCAiWgAwIBAgIUWtnJm2kswnXYu7/S5BnnTQiDRcUwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDgxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjI0MjUwWhgPMjI5NTA2MDcyMjQyNTBaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDA4MR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEjY9Rl+s00xFV
tdTpAixLR4kJIGLfSLOdm+ofU/KuKMRSz5x1ORhIicppKZK24U5WLGXQU1fKLvxX
OmqwqL+6oAONmiHszqVdhWne4QPUba0yw7rf1/OI+IFF1HRK3shQo1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUb/htoTodbq5hjP5RNlQ0rkKwWB0wCgYIKoZIzj0EAwMDZwAwZAIw
bO+9yArr21XKXjYHPadEAYINDxgXEC3W8e3X6MJsHCIZITddWWOyXRNFhz504vN0
AjB8aBuhrKcg1b4CrQDZQcosyVPUGIZKkXdQFfbVdivKrGZvqLS+GdPLd3v2MmHY
orA=
-----END CERTIFICATE-----
`,"0.0.12":`-----BEGIN CERTIFICATE-----
MIICoDCCAiWgAwIBAgIUHBsegV0bKtwpHRoOnnhbK7CTHxMwCgYIKoZIzj0EAwMw
gYQxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExEDAOBgNVBAMMBzAw
MDAwMDkxHzAdBgkqhkiG9w0BCQEWEGFkbWluQGhlZGVyYS5jb20wIBcNMjEwODIz
MjI0MjUwWhgPMjI5NTA2MDcyMjQyNTBaMIGEMQswCQYDVQQGEwJVUzELMAkGA1UE
CAwCVFgxEzARBgNVBAcMClJpY2hhcmRzb24xDzANBgNVBAoMBkhlZGVyYTEPMA0G
A1UECwwGSGVkZXJhMRAwDgYDVQQDDAcwMDAwMDA5MR8wHQYJKoZIhvcNAQkBFhBh
ZG1pbkBoZWRlcmEuY29tMHYwEAYHKoZIzj0CAQYFK4EEACIDYgAEK+ZAs/00RXaj
buQJJy4zwr/YTj9h5V+vbY7sq9Z1RByEwTRRQOI3OuzzMq1EWKkVJKF/QF5b4yda
x6W9O/NT4EjBXH5XR5X1V6h7aT01YBqsxgMxuUP7kw9K+fW4k6Zao1QwUjAPBgNV
HREECDAGhwR/AAABMAsGA1UdDwQEAwIEsDATBgNVHSUEDDAKBggrBgEFBQcDATAd
BgNVHQ4EFgQUKbecoYirLjf2O2oPkoggEE2P7FcwCgYIKoZIzj0EAwMDaQAwZgIx
AP67wsVOkeFo/9QRo+PnZhzEvjOZ/+IUoUhimdljcVwn79tzNP+obf7VW3Oq1wH7
4wIxAL65+WmMTMoI2cN7TCiL7G/W2ChDsASeHfaP/4e4ZViNONWotlY9i9aS3Kwt
LTea1Q==
-----END CERTIFICATE-----
`,"0.0.13":`-----BEGIN CERTIFICATE-----
MIICoDCCAiegAwIBAgIUBNxMZRKru9jzFA8zsOAI4xkMFCMwCgYIKoZIzj0EAwMw
gYUxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExETAPBgNVBAMMCDAw
MDAwMDEwMR8wHQYJKoZIhvcNAQkBFhBhZG1pbkBoZWRlcmEuY29tMCAXDTIxMDgy
MzIyNDI1MFoYDzIyOTUwNjA3MjI0MjUwWjCBhTELMAkGA1UEBhMCVVMxCzAJBgNV
BAgMAlRYMRMwEQYDVQQHDApSaWNoYXJkc29uMQ8wDQYDVQQKDAZIZWRlcmExDzAN
BgNVBAsMBkhlZGVyYTERMA8GA1UEAwwIMDAwMDAwMTAxHzAdBgkqhkiG9w0BCQEW
EGFkbWluQGhlZGVyYS5jb20wdjAQBgcqhkjOPQIBBgUrgQQAIgNiAAShUi9sglwb
0U8QUrGOXJuHRXA9HP8RypkgNBwNRs1YcmPLcuwK70unWlkB81M44IQ7z/dG/0cW
hfFdRI5x4jAeiUFivmWmMLT6lJMPxJ0BkWTGVFVwI3SKcgSvHP9pNS2jVDBSMA8G
A1UdEQQIMAaHBH8AAAEwCwYDVR0PBAQDAgSwMBMGA1UdJQQMMAoGCCsGAQUFBwMB
MB0GA1UdDgQWBBSqIMCDzCKKwJJLCXhu9YJYPw6lsDAKBggqhkjOPQQDAwNnADBk
AjBl0bJG2A3443ybvrkKjWu8do6nDSR08/M49+19QfA1aDw0nb2sdCOE+xNitpQ9
7ngCMGuQHmnKA2EyOIVpNl2EtRoG+vdmLJQaoukhmCWjkGrQHkai473tGa9cRZ/8
+RZFzw==
-----END CERTIFICATE-----
`,"0.0.14":`-----BEGIN CERTIFICATE-----
MIICoTCCAiegAwIBAgIUJcQrEmPlIh0KWwiC2X6lZ/OdNs8wCgYIKoZIzj0EAwMw
gYUxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExETAPBgNVBAMMCDAw
MDAwMDExMR8wHQYJKoZIhvcNAQkBFhBhZG1pbkBoZWRlcmEuY29tMCAXDTIxMDgy
MzIyNDI1MVoYDzIyOTUwNjA3MjI0MjUxWjCBhTELMAkGA1UEBhMCVVMxCzAJBgNV
BAgMAlRYMRMwEQYDVQQHDApSaWNoYXJkc29uMQ8wDQYDVQQKDAZIZWRlcmExDzAN
BgNVBAsMBkhlZGVyYTERMA8GA1UEAwwIMDAwMDAwMTExHzAdBgkqhkiG9w0BCQEW
EGFkbWluQGhlZGVyYS5jb20wdjAQBgcqhkjOPQIBBgUrgQQAIgNiAASxRizKJSbB
HmG2amvTHLCyExJngCh42agaFkv5Ab9mZYbqZPe0nUn/8RlVAvEiRNggCMYXC6MU
e4J6D1aeLhYaa0UY8Fmxd20NUjAOWhJgUXds4ILMMVG+pevofeC8AsujVDBSMA8G
A1UdEQQIMAaHBH8AAAEwCwYDVR0PBAQDAgSwMBMGA1UdJQQMMAoGCCsGAQUFBwMB
MB0GA1UdDgQWBBS2Ic+LU/6Wssns4Yyf3N6E666xDzAKBggqhkjOPQQDAwNoADBl
AjAH0JMX48GD6vThA6FUsVnJmBID376PRZgxhuZvn9C0HawvNjZVQTkpzpYCwmia
dO4CMQCotakNxyiOxu/BbnPx6ld5+dqVCugsfqClhUhy8ROpNHfKxp3rW7HopowT
WiMlIyI=
-----END CERTIFICATE-----
`,"0.0.15":`-----BEGIN CERTIFICATE-----
MIICoDCCAiegAwIBAgIUSFFNFv1iquxd5txlWA3PlkNju2EwCgYIKoZIzj0EAwMw
gYUxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExETAPBgNVBAMMCDAw
MDAwMDEyMR8wHQYJKoZIhvcNAQkBFhBhZG1pbkBoZWRlcmEuY29tMCAXDTIxMDgy
MzIyNDI1MVoYDzIyOTUwNjA3MjI0MjUxWjCBhTELMAkGA1UEBhMCVVMxCzAJBgNV
BAgMAlRYMRMwEQYDVQQHDApSaWNoYXJkc29uMQ8wDQYDVQQKDAZIZWRlcmExDzAN
BgNVBAsMBkhlZGVyYTERMA8GA1UEAwwIMDAwMDAwMTIxHzAdBgkqhkiG9w0BCQEW
EGFkbWluQGhlZGVyYS5jb20wdjAQBgcqhkjOPQIBBgUrgQQAIgNiAAQus3nAPZkb
ja4Efo7iD4s8NLsFwEwQXQBgBGIJwtA2JRgLyXeWpuu125ib6qJzT8CHvQZhel3b
cwYWi4f2JpabMDepHELLxwZ9fILnAQ8GiHlzhrVq2NI15DI84dXVe4OjVDBSMA8G
A1UdEQQIMAaHBH8AAAEwCwYDVR0PBAQDAgSwMBMGA1UdJQQMMAoGCCsGAQUFBwMB
MB0GA1UdDgQWBBSEO/JFC5/fDcT2gtipDMYMMTd96DAKBggqhkjOPQQDAwNnADBk
AjBalAU47XQL4ziHD8lj21pcp3+R5FKzn96HclMT/vraknCT1Sl+vCf6EYsqmi6Z
+RwCMDpxL6P6OMqyE+HzAeYQ4Fa7MYEQfZGMjka4zxetBLvIpwUCT4EAO8gv9GoU
wCBUzQ==
-----END CERTIFICATE-----
`,"0.0.16":`-----BEGIN CERTIFICATE-----
MIICoDCCAiegAwIBAgIUdnkil4P+VthVMnqygVwGKLt7VfAwCgYIKoZIzj0EAwMw
gYUxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExETAPBgNVBAMMCDAw
MDAwMDEzMR8wHQYJKoZIhvcNAQkBFhBhZG1pbkBoZWRlcmEuY29tMCAXDTIxMDgy
MzIyNDI1MVoYDzIyOTUwNjA3MjI0MjUxWjCBhTELMAkGA1UEBhMCVVMxCzAJBgNV
BAgMAlRYMRMwEQYDVQQHDApSaWNoYXJkc29uMQ8wDQYDVQQKDAZIZWRlcmExDzAN
BgNVBAsMBkhlZGVyYTERMA8GA1UEAwwIMDAwMDAwMTMxHzAdBgkqhkiG9w0BCQEW
EGFkbWluQGhlZGVyYS5jb20wdjAQBgcqhkjOPQIBBgUrgQQAIgNiAARUdz9ig/iA
hEAth2YinHKY6WM63BAxUVItzgk65l1T4wTzwoK4XEwclY5vIeFmZy2e0s95lWgq
SI68VS9gmJ3xp8Q9wOel/bvuF2tvNZmF393TeoNQQVHrQM1yJAx+nPyjVDBSMA8G
A1UdEQQIMAaHBH8AAAEwCwYDVR0PBAQDAgSwMBMGA1UdJQQMMAoGCCsGAQUFBwMB
MB0GA1UdDgQWBBTBFdNwHKSRDo6CxfA1aglY0N8joTAKBggqhkjOPQQDAwNnADBk
AjAqPIel58Rcl2kDxZxJPD9mK9xW4TU+d2NuP3n140TQ6nPlw1OwCPI7a4i3wfEe
08ICMBbrpNRdFZcvy76KoLPfTPvqbtWWaR/0tLZg4Rjj3x7SYgUg3vrVDmodHGkb
4T2Raw==
-----END CERTIFICATE-----
`,"0.0.17":`-----BEGIN CERTIFICATE-----
MIICoDCCAiegAwIBAgIUDg+G4Ep+KEmIo+nCOY8DjFX60swwCgYIKoZIzj0EAwMw
gYUxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExETAPBgNVBAMMCDAw
MDAwMDE0MR8wHQYJKoZIhvcNAQkBFhBhZG1pbkBoZWRlcmEuY29tMCAXDTIxMDgy
MzIyNDI1MloYDzIyOTUwNjA3MjI0MjUyWjCBhTELMAkGA1UEBhMCVVMxCzAJBgNV
BAgMAlRYMRMwEQYDVQQHDApSaWNoYXJkc29uMQ8wDQYDVQQKDAZIZWRlcmExDzAN
BgNVBAsMBkhlZGVyYTERMA8GA1UEAwwIMDAwMDAwMTQxHzAdBgkqhkiG9w0BCQEW
EGFkbWluQGhlZGVyYS5jb20wdjAQBgcqhkjOPQIBBgUrgQQAIgNiAASCQRL5xUUh
1bsTXRPAf/qVFWEOxsJTiMlF3+UJ4MajWE5zmc2QNIzqj7NE24z3fNxgjViNK/8+
oBNQeqXfyJ/4etNMzTyG4JTsvWRAQ3aR1J4WDbfwpcgw6AIOKq9OLP6jVDBSMA8G
A1UdEQQIMAaHBH8AAAEwCwYDVR0PBAQDAgSwMBMGA1UdJQQMMAoGCCsGAQUFBwMB
MB0GA1UdDgQWBBQB9V2fygf48zyyVL3bnAxCLDUV9zAKBggqhkjOPQQDAwNnADBk
AjBonlThjjvi3fg7ODQcatPHBkp8Yon/p1ukm3YzYA3kitqroXU7BkmwRae2fbqD
TTICMHI+fAy+xWGwXAFNcvNTop11IIoszcgJJY+1Mc2Q/USk3pP6iezta+rvnaWu
7JySHg==
-----END CERTIFICATE-----
`,"0.0.18":`-----BEGIN CERTIFICATE-----
MIICojCCAiegAwIBAgIUBvI2Vq6O8yXNzbQlj6uQOdpd1lIwCgYIKoZIzj0EAwMw
gYUxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExETAPBgNVBAMMCDAw
MDAwMDE1MR8wHQYJKoZIhvcNAQkBFhBhZG1pbkBoZWRlcmEuY29tMCAXDTIxMDgy
MzIyNDI1MloYDzIyOTUwNjA3MjI0MjUyWjCBhTELMAkGA1UEBhMCVVMxCzAJBgNV
BAgMAlRYMRMwEQYDVQQHDApSaWNoYXJkc29uMQ8wDQYDVQQKDAZIZWRlcmExDzAN
BgNVBAsMBkhlZGVyYTERMA8GA1UEAwwIMDAwMDAwMTUxHzAdBgkqhkiG9w0BCQEW
EGFkbWluQGhlZGVyYS5jb20wdjAQBgcqhkjOPQIBBgUrgQQAIgNiAAR+jFDSzCdn
mMQpgz/vrmD/xioMioumUmyLAkB+voTNsMAOtiaDVbvJty3b4SJETv5tuZyaF5Gb
QAYuKsP7X8siCCVLZC9i9nCg46NHtuQkEmw1pzUUDmYFDfSV2tWedNqjVDBSMA8G
A1UdEQQIMAaHBH8AAAEwCwYDVR0PBAQDAgSwMBMGA1UdJQQMMAoGCCsGAQUFBwMB
MB0GA1UdDgQWBBSqvCmoaVEp2d9WPctby+ooPMGmvTAKBggqhkjOPQQDAwNpADBm
AjEA9fQ2OFZa7fAQGGYydfVaUF0ObxKj3T+hyl0jiCKLe+hyxJSrXCFS2BM71UiG
ZMVxAjEAmCzESBzTVvl4Uv3TyActGTijTCqTNpN3gJmQbZYjKVtqf8Wxj9WeH0pM
E8BlA/qE
-----END CERTIFICATE-----
`,"0.0.19":`-----BEGIN CERTIFICATE-----
MIICojCCAiegAwIBAgIUZBwp7UPLJkDgngbUIx5xjbAn+7YwCgYIKoZIzj0EAwMw
gYUxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExETAPBgNVBAMMCDAw
MDAwMDE2MR8wHQYJKoZIhvcNAQkBFhBhZG1pbkBoZWRlcmEuY29tMCAXDTIxMDgy
MzIyNDI1M1oYDzIyOTUwNjA3MjI0MjUzWjCBhTELMAkGA1UEBhMCVVMxCzAJBgNV
BAgMAlRYMRMwEQYDVQQHDApSaWNoYXJkc29uMQ8wDQYDVQQKDAZIZWRlcmExDzAN
BgNVBAsMBkhlZGVyYTERMA8GA1UEAwwIMDAwMDAwMTYxHzAdBgkqhkiG9w0BCQEW
EGFkbWluQGhlZGVyYS5jb20wdjAQBgcqhkjOPQIBBgUrgQQAIgNiAASCVYu2uF3T
kCkyRP0FfXVyyTA1z8DFqCKGrcODgGJuVAk59H6u8FIRsNipkb3BXFI0xGccok5X
T+t5bMaGDHYJ4fjU78UtPNmankQ5HoiMRJpy7Vn8mzizUzUqGpnhu6GjVDBSMA8G
A1UdEQQIMAaHBH8AAAEwCwYDVR0PBAQDAgSwMBMGA1UdJQQMMAoGCCsGAQUFBwMB
MB0GA1UdDgQWBBQzE6RGn4YlIbdrl0niKWTtJzfXoTAKBggqhkjOPQQDAwNpADBm
AjEAobnXnwlNGNWoHscbl/ytUBSyjC7V11sLYJqtORSRX3k2+bFGsg4ltmOVjTdd
lXatAjEA/Ja3jufmdruqfLa6qigXuYI00YaI96sOwNhdHlnksYfqF41nDe4BsSW6
eQ6N5M9d
-----END CERTIFICATE-----
`,"0.0.20":`-----BEGIN CERTIFICATE-----
MIICoTCCAiegAwIBAgIUE1ZRB5n+Yby+Mwgb2xAcVfTZ53kwCgYIKoZIzj0EAwMw
gYUxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJUWDETMBEGA1UEBwwKUmljaGFyZHNv
bjEPMA0GA1UECgwGSGVkZXJhMQ8wDQYDVQQLDAZIZWRlcmExETAPBgNVBAMMCDAw
MDAwMDE3MR8wHQYJKoZIhvcNAQkBFhBhZG1pbkBoZWRlcmEuY29tMCAXDTIxMDgy
MzIyNDI1M1oYDzIyOTUwNjA3MjI0MjUzWjCBhTELMAkGA1UEBhMCVVMxCzAJBgNV
BAgMAlRYMRMwEQYDVQQHDApSaWNoYXJkc29uMQ8wDQYDVQQKDAZIZWRlcmExDzAN
BgNVBAsMBkhlZGVyYTERMA8GA1UEAwwIMDAwMDAwMTcxHzAdBgkqhkiG9w0BCQEW
EGFkbWluQGhlZGVyYS5jb20wdjAQBgcqhkjOPQIBBgUrgQQAIgNiAAR0OfTmHjxT
kBiU3GMa/bTvlTswCDAuFQGIIpMWHaf6V4ighzmn20jCg0AVFStb2q7YLRr4HUx8
ToMzsd7/yjl74BwJgfZnL75T/JInwyMgOBiCTXEf6qVDvhNzL4QJuVujVDBSMA8G
A1UdEQQIMAaHBH8AAAEwCwYDVR0PBAQDAgSwMBMGA1UdJQQMMAoGCCsGAQUFBwMB
MB0GA1UdDgQWBBQFKRUUmdFcDFQzBN9XqMvLgPd7NzAKBggqhkjOPQQDAwNoADBl
AjEA5MUUXSehY3KVIv/2LMgrqo1kPiV39fwYuLSnsMJ67wK8yN1NAkkycg6q2K6g
rBIvAjB3J3a40TINOZTYG+eQs+MSWyfANJLRuJTEOorXzMWM6+05+JYhPnLA8hke
CRfzmSw=
-----END CERTIFICATE-----
`};class Node extends ManagedNode{constructor(e={}){if(super(e),e.newNode!=null)this._accountId=e.newNode.accountId,this._nodeAddress=null;else if(e.cloneNode!=null)this._accountId=e.cloneNode.node._accountId,this._nodeAddress=e.cloneNode.node._nodeAddress;else throw new Error(`failed to create node: ${JSON.stringify(e)}`)}getKey(){return this._accountId.toString()}toInsecure(){return new Node({cloneNode:{node:this,address:this._address.toInsecure()}})}toSecure(){return new Node({cloneNode:{node:this,address:this._address.toSecure()}})}setCert(e){switch(e.toString()){case"previewnet":this._cert=PREVIEWNET_CERTS[this._accountId.toString()];break;case"testnet":this._cert=TESTNET_CERTS[this._accountId.toString()];break;case"mainnet":this._cert=MAINNET_CERTS[this._accountId.toString()];break}return this}get accountId(){return this._accountId}get nodeAddress(){return this._nodeAddress}setNodeAddress(e){return this._nodeAddress=e,this}}const PREVIEWNET_ADDRESS_BOOK=NodeAddressBook._fromProtobuf(lib.proto.NodeAddressBook.decode(decode$5("0ad0070a0e33352e3233312e3230382e31343810a388031a05302e302e3322cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303039663166386131323163326664366337366664353038643365343239663063363462636234346338326137303537333535326161646361643037313536396537323139353866356135643039663935383766666166636662653533343161326630313134616361653334366566336339303231336433343336656262323766343335306339393063356338633366386531653336373037626330386434323536303832336533663234653039613033616430393535613530393830313936323964643034623237623235316463653035356633646463623061343164363666303934316230623837636466653334393864343630333861623564663036663632613561646530383539383537336138386338663538363064633134393261366531383634383561396231333235306536643137623830636433396335633831393130396537336361373332646232336566386261613737366563383563653030393162656362326564656662616135656433653564626662643166383835613466613838316166336631343461386135363538353335333364383933393335393230383662326431643336326534356266653166623435363833616261366336343039373961643662343638373731383437323663366562643538623265616538356337636665336662616265663566366363656438353030333462333834373230366332643637386333363138373630323662386433353165303032616635653066666536663562316632393566646332663436396361613264323338316561306234386361393837636332633865363335653862313963653565313732613933373631613864343930613961343531386437323535383830613134643737623762613737343839326239326134306262383133363265333466633664353137386439623330313132393334323035636237376662396132383234323733393435363461383535346561343732383661343766383632333965373563393437383963653938633939383434373832343632393434663631333136376437623530323033303130303031320218033a606666643661646137346133613334613930346265613437363033303836663862656633623662653138616265643434633464343065313266623133306239376264366238353561656335643062393062306238633733353464356633623065340acf070a0d332e3231312e3234382e31373210a388031a05302e302e3322cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303039663166386131323163326664366337366664353038643365343239663063363462636234346338326137303537333535326161646361643037313536396537323139353866356135643039663935383766666166636662653533343161326630313134616361653334366566336339303231336433343336656262323766343335306339393063356338633366386531653336373037626330386434323536303832336533663234653039613033616430393535613530393830313936323964643034623237623235316463653035356633646463623061343164363666303934316230623837636466653334393864343630333861623564663036663632613561646530383539383537336138386338663538363064633134393261366531383634383561396231333235306536643137623830636433396335633831393130396537336361373332646232336566386261613737366563383563653030393162656362326564656662616135656433653564626662643166383835613466613838316166336631343461386135363538353335333364383933393335393230383662326431643336326534356266653166623435363833616261366336343039373961643662343638373731383437323663366562643538623265616538356337636665336662616265663566366363656438353030333462333834373230366332643637386333363138373630323662386433353165303032616635653066666536663562316632393566646332663436396361613264323338316561306234386361393837636332633865363335653862313963653565313732613933373631613864343930613961343531386437323535383830613134643737623762613737343839326239326134306262383133363265333466633664353137386439623330313132393334323035636237376662396132383234323733393435363461383535346561343732383661343766383632333965373563393437383963653938633939383434373832343632393434663631333136376437623530323033303130303031320218033a606666643661646137346133613334613930346265613437363033303836663862656633623662653138616265643434633464343065313266623133306239376264366238353561656335643062393062306238633733353464356633623065340ace070a0c34302e3132312e36342e343810a388031a05302e302e3322cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303039663166386131323163326664366337366664353038643365343239663063363462636234346338326137303537333535326161646361643037313536396537323139353866356135643039663935383766666166636662653533343161326630313134616361653334366566336339303231336433343336656262323766343335306339393063356338633366386531653336373037626330386434323536303832336533663234653039613033616430393535613530393830313936323964643034623237623235316463653035356633646463623061343164363666303934316230623837636466653334393864343630333861623564663036663632613561646530383539383537336138386338663538363064633134393261366531383634383561396231333235306536643137623830636433396335633831393130396537336361373332646232336566386261613737366563383563653030393162656362326564656662616135656433653564626662643166383835613466613838316166336631343461386135363538353335333364383933393335393230383662326431643336326534356266653166623435363833616261366336343039373961643662343638373731383437323663366562643538623265616538356337636665336662616265663566366363656438353030333462333834373230366332643637386333363138373630323662386433353165303032616635653066666536663562316632393566646332663436396361613264323338316561306234386361393837636332633865363335653862313963653565313732613933373631613864343930613961343531386437323535383830613134643737623762613737343839326239326134306262383133363265333466633664353137386439623330313132393334323035636237376662396132383234323733393435363461383535346561343732383661343766383632333965373563393437383963653938633939383434373832343632393434663631333136376437623530323033303130303031320218033a606666643661646137346133613334613930346265613437363033303836663862656633623662653138616265643434633464343065313266623133306239376264366238353561656335643062393062306238633733353464356633623065340ad1070a0d33352e3139392e31352e31373710a388031a05302e302e3422cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633535376166353739666138333530316265383939623238393037373635626664666364353261623433326230313935613166316563643836666330306162366335353039623066646439376564643363623563656135366132393566333132616262353530383331646266393633663435303131386234666363366532326366343637363230306365396363386564666262663535386463363966303234323634616437643364616232336265643231333363323734653639333434383931353564623130383766393033373039303563363431383561363231316463373432666239613639303964383231383639343762323737343633646662336666306163643437656666313265616431663639373265663263313230333739336334356537373537356265346661313130633765343066613864623963363138376431313366343730343031343137393037316162663539626537643262306465383264653432313564633235353036623163396332366534393137343031633939373530366533373765366266303362363838373237653739343066616436396335653064613363643563626432626537373733353061656132643064343765393761343438633834626536636531333464363462656530393835633239313632663463316535363763636139336430366133633162653861626365333562353537666237376634666536373161363664656337393037353664306538383138313635663262616361613839316161653761633734333766633731373562366562366465623734373233373837353162623662663962306531343833663936363865396664626435363034633339623134643965326265646565633834366139383064373034643137316537626134623766636431613330643934356361313266343761333235643933393861613138663937303636303534643464313566633839393465326465626537336539323731643534383638336636316561343466623235303731653335313861373865643365623337653731613036393166323637303230333031303030312801320218043a606630643934616363663664666633373238373463396462643864373939326562333137616635303031636134313936616261323635383039636233643230306261393631613534333863336135656430356338336264663963643131356432320ad1070a0d332e3133332e3231332e31343610a388031a05302e302e3422cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633535376166353739666138333530316265383939623238393037373635626664666364353261623433326230313935613166316563643836666330306162366335353039623066646439376564643363623563656135366132393566333132616262353530383331646266393633663435303131386234666363366532326366343637363230306365396363386564666262663535386463363966303234323634616437643364616232336265643231333363323734653639333434383931353564623130383766393033373039303563363431383561363231316463373432666239613639303964383231383639343762323737343633646662336666306163643437656666313265616431663639373265663263313230333739336334356537373537356265346661313130633765343066613864623963363138376431313366343730343031343137393037316162663539626537643262306465383264653432313564633235353036623163396332366534393137343031633939373530366533373765366266303362363838373237653739343066616436396335653064613363643563626432626537373733353061656132643064343765393761343438633834626536636531333464363462656530393835633239313632663463316535363763636139336430366133633162653861626365333562353537666237376634666536373161363664656337393037353664306538383138313635663262616361613839316161653761633734333766633731373562366562366465623734373233373837353162623662663962306531343833663936363865396664626435363034633339623134643965326265646565633834366139383064373034643137316537626134623766636431613330643934356361313266343761333235643933393861613138663937303636303534643464313566633839393465326465626537336539323731643534383638336636316561343466623235303731653335313861373865643365623337653731613036393166323637303230333031303030312801320218043a606630643934616363663664666633373238373463396462643864373939326562333137616635303031636134313936616261323635383039636233643230306261393631613534333863336135656430356338336264663963643131356432320ad0070a0c34302e37302e31312e32303210a388031a05302e302e3422cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633535376166353739666138333530316265383939623238393037373635626664666364353261623433326230313935613166316563643836666330306162366335353039623066646439376564643363623563656135366132393566333132616262353530383331646266393633663435303131386234666363366532326366343637363230306365396363386564666262663535386463363966303234323634616437643364616232336265643231333363323734653639333434383931353564623130383766393033373039303563363431383561363231316463373432666239613639303964383231383639343762323737343633646662336666306163643437656666313265616431663639373265663263313230333739336334356537373537356265346661313130633765343066613864623963363138376431313366343730343031343137393037316162663539626537643262306465383264653432313564633235353036623163396332366534393137343031633939373530366533373765366266303362363838373237653739343066616436396335653064613363643563626432626537373733353061656132643064343765393761343438633834626536636531333464363462656530393835633239313632663463316535363763636139336430366133633162653861626365333562353537666237376634666536373161363664656337393037353664306538383138313635663262616361613839316161653761633734333766633731373562366562366465623734373233373837353162623662663962306531343833663936363865396664626435363034633339623134643965326265646565633834366139383064373034643137316537626134623766636431613330643934356361313266343761333235643933393861613138663937303636303534643464313566633839393465326465626537336539323731643534383638336636316561343466623235303731653335313861373865643365623337653731613036393166323637303230333031303030312801320218043a606630643934616363663664666633373238373463396462643864373939326562333137616635303031636134313936616261323635383039636233643230306261393631613534333863336135656430356338336264663963643131356432320ad2070a0e33352e3232352e3230312e31393510a388031a05302e302e3522cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030396261343537623733333035663034613931636334366231623936356334653834313735316162633862313431356130626164666431663332633234383233383661323237323565623765633734646561323165353036313764363438656135616333393337343161623031623865666233323132333962386434666462316466626562396533663339616134363538306464303435643138636134346430303263333764646235323763636534646463333262666337333431393637316634636134343634613366326138346663383563373161636630653561383936323664663639613831343734656431363532396638303161386166613937653433356334653034613936346133353735323732383838343365353866306130356366353135336565343530376232633638623364376662353461653661393561393539633837613132663633306539356337623162336333363935653835383636323431373932366437366331363938336661663631323235303338373435393037653963663133643637633261636435303363613435316338353933336163343131386163633237393830316362393638333439393033313435636564323736323964643038393136333137303933353837613737633232303563666135323534336235336333623665613135623834653364326333306331656437353261343633336333366232356239383933656130326164353632656239623738363862336234663437663461323565333536303634393632616337623235653538323934346630306433303739386132363266393231346438633565373464306138333736636332643662613634653138663565346134306166616336323530363264326361323363643238303037303833323164333833343331346630653538343438353932333236373361333265373061653064373131653331303538316263646231346538373133343639346336653039333066343662333762393664343961363435373339343733333165376535303764396535366465356536313436663266303230333031303030312802320218053a606361363738656263626433646338363438663765643033666235396630653231616636373531336561656535313331386536623534396265356163653930366564633166666132366439336135376163656339626537376634306561656564370ad1070a0d35322e31352e3130352e31333010a388031a05302e302e3522cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030396261343537623733333035663034613931636334366231623936356334653834313735316162633862313431356130626164666431663332633234383233383661323237323565623765633734646561323165353036313764363438656135616333393337343161623031623865666233323132333962386434666462316466626562396533663339616134363538306464303435643138636134346430303263333764646235323763636534646463333262666337333431393637316634636134343634613366326138346663383563373161636630653561383936323664663639613831343734656431363532396638303161386166613937653433356334653034613936346133353735323732383838343365353866306130356366353135336565343530376232633638623364376662353461653661393561393539633837613132663633306539356337623162336333363935653835383636323431373932366437366331363938336661663631323235303338373435393037653963663133643637633261636435303363613435316338353933336163343131386163633237393830316362393638333439393033313435636564323736323964643038393136333137303933353837613737633232303563666135323534336235336333623665613135623834653364326333306331656437353261343633336333366232356239383933656130326164353632656239623738363862336234663437663461323565333536303634393632616337623235653538323934346630306433303739386132363266393231346438633565373464306138333736636332643662613634653138663565346134306166616336323530363264326361323363643238303037303833323164333833343331346630653538343438353932333236373361333265373061653064373131653331303538316263646231346538373133343639346336653039333066343662333762393664343961363435373339343733333165376535303764396535366465356536313436663266303230333031303030312802320218053a606361363738656263626433646338363438663765643033666235396630653231616636373531336561656535313331386536623534396265356163653930366564633166666132366439336135376163656339626537376634306561656564370ad1070a0d3130342e34332e3234382e363310a388031a05302e302e3522cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030396261343537623733333035663034613931636334366231623936356334653834313735316162633862313431356130626164666431663332633234383233383661323237323565623765633734646561323165353036313764363438656135616333393337343161623031623865666233323132333962386434666462316466626562396533663339616134363538306464303435643138636134346430303263333764646235323763636534646463333262666337333431393637316634636134343634613366326138346663383563373161636630653561383936323664663639613831343734656431363532396638303161386166613937653433356334653034613936346133353735323732383838343365353866306130356366353135336565343530376232633638623364376662353461653661393561393539633837613132663633306539356337623162336333363935653835383636323431373932366437366331363938336661663631323235303338373435393037653963663133643637633261636435303363613435316338353933336163343131386163633237393830316362393638333439393033313435636564323736323964643038393136333137303933353837613737633232303563666135323534336235336333623665613135623834653364326333306331656437353261343633336333366232356239383933656130326164353632656239623738363862336234663437663461323565333536303634393632616337623235653538323934346630306433303739386132363266393231346438633565373464306138333736636332643662613634653138663565346134306166616336323530363264326361323363643238303037303833323164333833343331346630653538343438353932333236373361333265373061653064373131653331303538316263646231346538373133343639346336653039333066343662333762393664343961363435373339343733333165376535303764396535366465356536313436663266303230333031303030312802320218053a606361363738656263626433646338363438663765643033666235396630653231616636373531336561656535313331386536623534396265356163653930366564633166666132366439336135376163656339626537376634306561656564370ad2070a0e33352e3234372e3130392e31333510a388031a05302e302e3622cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633432636361633566626336393166626265626461383766666431653735626463643839323234393463663434666462636365653439373838353231633337386266373764623039333465633064323138336437633531646236366638363463313161623764653161633363346366646331663039336132643666333765326233346362653463383133316639363833616434323837386338336433353534633634356161313637626366623036346138336463343563356231313538343939663964393235383766666637616263643566323231636438313530353438343133303030666136653536353930383962316466643635373636656137386561656466636136623435343535666438616235393834646265333565353739356432633633356561373937346434336538656165346665626666653439326537303762343862316230666336343831616539653039643339313333303039623764323634303265366535326535653931623262333830643838663062653766623462333033653730323139373835303537616139346365393234633439323665393136353639323836653836623362613635316361326130613633646634663639303766656665333438336439336234636531643464303363373134323131313337356232633263353164346562383339653337616635333062326362643666353064346362333665323739333731373064396364646163306163653263633234623830346230613237333531636638333062373635323565323664666239646266343961303536363234613736383632343934653732363364306437306365626165393532393433653535383432663563616431336663663630613265366463663761316435333366336135626235346563323139313863373665353235626132393134363637353833316531376533366336316665383534393838323864303962373632303135343132623265353237383439626165633163666663373764653463323934633535303831316535393866663234646131356133343536396464303230333031303030312803320218063a603234373166336665383134303638316665393139313364326363303633663036356534343930616536326666356435343861356162653133316432616639366362653361633235626265323433363663613466386630653736636639343566330acf070a0b35342e3234312e33382e3110a388031a05302e302e3622cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633432636361633566626336393166626265626461383766666431653735626463643839323234393463663434666462636365653439373838353231633337386266373764623039333465633064323138336437633531646236366638363463313161623764653161633363346366646331663039336132643666333765326233346362653463383133316639363833616434323837386338336433353534633634356161313637626366623036346138336463343563356231313538343939663964393235383766666637616263643566323231636438313530353438343133303030666136653536353930383962316466643635373636656137386561656466636136623435343535666438616235393834646265333565353739356432633633356561373937346434336538656165346665626666653439326537303762343862316230666336343831616539653039643339313333303039623764323634303265366535326535653931623262333830643838663062653766623462333033653730323139373835303537616139346365393234633439323665393136353639323836653836623362613635316361326130613633646634663639303766656665333438336439336234636531643464303363373134323131313337356232633263353164346562383339653337616635333062326362643666353064346362333665323739333731373064396364646163306163653263633234623830346230613237333531636638333062373635323565323664666239646266343961303536363234613736383632343934653732363364306437306365626165393532393433653535383432663563616431336663663630613265366463663761316435333366336135626235346563323139313863373665353235626132393134363637353833316531376533366336316665383534393838323864303962373632303135343132623265353237383439626165633163666663373764653463323934633535303831316535393866663234646131356133343536396464303230333031303030312803320218063a603234373166336665383134303638316665393139313364326363303633663036356534343930616536326666356435343861356162653133316432616639366362653361633235626265323433363663613466386630653736636639343566330acf070a0b31332e38382e32322e343710a388031a05302e302e3622cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633432636361633566626336393166626265626461383766666431653735626463643839323234393463663434666462636365653439373838353231633337386266373764623039333465633064323138336437633531646236366638363463313161623764653161633363346366646331663039336132643666333765326233346362653463383133316639363833616434323837386338336433353534633634356161313637626366623036346138336463343563356231313538343939663964393235383766666637616263643566323231636438313530353438343133303030666136653536353930383962316466643635373636656137386561656466636136623435343535666438616235393834646265333565353739356432633633356561373937346434336538656165346665626666653439326537303762343862316230666336343831616539653039643339313333303039623764323634303265366535326535653931623262333830643838663062653766623462333033653730323139373835303537616139346365393234633439323665393136353639323836653836623362613635316361326130613633646634663639303766656665333438336439336234636531643464303363373134323131313337356232633263353164346562383339653337616635333062326362643666353064346362333665323739333731373064396364646163306163653263633234623830346230613237333531636638333062373635323565323664666239646266343961303536363234613736383632343934653732363364306437306365626165393532393433653535383432663563616431336663663630613265366463663761316435333366336135626235346563323139313863373665353235626132393134363637353833316531376533366336316665383534393838323864303962373632303135343132623265353237383439626165633163666663373764653463323934633535303831316535393866663234646131356133343536396464303230333031303030312803320218063a603234373166336665383134303638316665393139313364326363303633663036356534343930616536326666356435343861356162653133316432616639366362653361633235626265323433363663613466386630653736636639343566330ad0070a0c33352e3233352e36352e353110a388031a05302e302e3722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393032663034393061396237663564326364316330643936633661363939306635373362356630656235626462626133393636316566303233303932343139333434363639393639613638613463373037316433323939393066623137393265393030316362353539386561373163326436363736383234333230656534636162663164643335376165376632616462656463316231623061396439353632333737396234633463376234376334373837613136656537313838633732313731373736323461393236346162333963343166376666306234356138396264613430633461643037633464353936643566303964373035366263623561333566343466393561353963323636653039383932646362653436616435316632643262336539393161386636363538653166326362393463373733656234346334346538393264316535356331303736663136303833313965653635376534306631393239363735343361623432616232323233383664313735383665323533373438646162643032356535306235306165363035303732306532333964363465653666623435303763303631346464346265376166646231333330383930666633613665313736353237633331313661663132396139616335653333366439663630316537313237613664376438323061643266393032646163396232343836363861316261623038643130333432656136396137303937313332666637313230636336346663646537383430633635366261313733326261393565396333363735313137356534656333643834613765306432383834326234316262626264366632386534366333613636333365313832373936356335353832306435306461653262303436356363306434326531393562396431353332653632323565623939386436613439303739613861316364346430313735646533633837663937363134383437623363626231376161333462653832306237623361643938616333666165663939336136373738393734373832633063346165336661626263633433303230333031303030312804320218073a606633353738373364343131346131616566303361646336626136396566616632363930653232376162633136613666633665353034396136336662643936383830303462313465343633633230653338343336613361323464333138326464380ad1070a0d35342e3137372e35312e31323710a388031a05302e302e3722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393032663034393061396237663564326364316330643936633661363939306635373362356630656235626462626133393636316566303233303932343139333434363639393639613638613463373037316433323939393066623137393265393030316362353539386561373163326436363736383234333230656534636162663164643335376165376632616462656463316231623061396439353632333737396234633463376234376334373837613136656537313838633732313731373736323461393236346162333963343166376666306234356138396264613430633461643037633464353936643566303964373035366263623561333566343466393561353963323636653039383932646362653436616435316632643262336539393161386636363538653166326362393463373733656234346334346538393264316535356331303736663136303833313965653635376534306631393239363735343361623432616232323233383664313735383665323533373438646162643032356535306235306165363035303732306532333964363465653666623435303763303631346464346265376166646231333330383930666633613665313736353237633331313661663132396139616335653333366439663630316537313237613664376438323061643266393032646163396232343836363861316261623038643130333432656136396137303937313332666637313230636336346663646537383430633635366261313733326261393565396333363735313137356534656333643834613765306432383834326234316262626264366632386534366333613636333365313832373936356335353832306435306461653262303436356363306434326531393562396431353332653632323565623939386436613439303739613861316364346430313735646533633837663937363134383437623363626231376161333462653832306237623361643938616333666165663939336136373738393734373832633063346165336661626263633433303230333031303030312804320218073a606633353738373364343131346131616566303361646336626136396566616632363930653232376162633136613666633665353034396136336662643936383830303462313465343633633230653338343336613361323464333138326464380ad0070a0c31332e36342e3137302e343010a388031a05302e302e3722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393032663034393061396237663564326364316330643936633661363939306635373362356630656235626462626133393636316566303233303932343139333434363639393639613638613463373037316433323939393066623137393265393030316362353539386561373163326436363736383234333230656534636162663164643335376165376632616462656463316231623061396439353632333737396234633463376234376334373837613136656537313838633732313731373736323461393236346162333963343166376666306234356138396264613430633461643037633464353936643566303964373035366263623561333566343466393561353963323636653039383932646362653436616435316632643262336539393161386636363538653166326362393463373733656234346334346538393264316535356331303736663136303833313965653635376534306631393239363735343361623432616232323233383664313735383665323533373438646162643032356535306235306165363035303732306532333964363465653666623435303763303631346464346265376166646231333330383930666633613665313736353237633331313661663132396139616335653333366439663630316537313237613664376438323061643266393032646163396232343836363861316261623038643130333432656136396137303937313332666637313230636336346663646537383430633635366261313733326261393565396333363735313137356534656333643834613765306432383834326234316262626264366632386534366333613636333365313832373936356335353832306435306461653262303436356363306434326531393562396431353332653632323565623939386436613439303739613861316364346430313735646533633837663937363134383437623363626231376161333462653832306237623361643938616333666165663939336136373738393734373832633063346165336661626263633433303230333031303030312804320218073a606633353738373364343131346131616566303361646336626136396566616632363930653232376162633136613666633665353034396136336662643936383830303462313465343633633230653338343336613361323464333138326464380ad1070a0d33342e3130362e3234372e363510a388031a05302e302e3822cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393164376466666637386634656662653538393034353063356263396533353334626666616461643933666237616662313562633762636636376433643362343133626439393934306464383235363461646130346162326534656466306131633062386662376531613830393265393133386539363062653263633638623562393766353764323831633538373265393761343739666338343833363331363065333836336235376233336534383639623138356163653565333662643433616535666136373863396562363666316634303134373836383236623266386661376530303630663434303563306138663964613732303566663436383361323433666130663331356631616662623461346431343064303232333465343437336662393266636233386633656232386336306366376362666236346530363963313830383665346464363139333839323061653066643763313933653665313034653635623831376564393339386532333232333766646630383332326339636563303964343039393237326137633031356432326234646363393639663665613166353138393032313035646636303039326235356134316234663332623935376235376438346535623232333930356538363938393531373333656139663265323436316563306436353232656538313664353835306661636665623431326366663962393939343361383764633064303436343437636539336239376531366437336239366234323633393632663831666366393435386535373537376337383061366631363135616137613132333236373338653236396262373331663839653839313632326535373765613534343230626630636134366265366663346637316366323638316163303235326161383835653133626536373263643238343539303432376463643133376366333131363235653862656533623038666463616166343635623338376365376362333338313666326331346136623939616337643733343331386366633539623765643933396261666566383739303230333031303030312805320218083a603439333161373832303264353566313062333135373537383563336634333964623638313962643131303033646637626332636539326532396135313762376332313838306465623463303137393537343462353736636434336238343938640ad0070a0c33352e38332e38392e31373110a388031a05302e302e3822cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393164376466666637386634656662653538393034353063356263396533353334626666616461643933666237616662313562633762636636376433643362343133626439393934306464383235363461646130346162326534656466306131633062386662376531613830393265393133386539363062653263633638623562393766353764323831633538373265393761343739666338343833363331363065333836336235376233336534383639623138356163653565333662643433616535666136373863396562363666316634303134373836383236623266386661376530303630663434303563306138663964613732303566663436383361323433666130663331356631616662623461346431343064303232333465343437336662393266636233386633656232386336306366376362666236346530363963313830383665346464363139333839323061653066643763313933653665313034653635623831376564393339386532333232333766646630383332326339636563303964343039393237326137633031356432326234646363393639663665613166353138393032313035646636303039326235356134316234663332623935376235376438346535623232333930356538363938393531373333656139663265323436316563306436353232656538313664353835306661636665623431326366663962393939343361383764633064303436343437636539336239376531366437336239366234323633393632663831666366393435386535373537376337383061366631363135616137613132333236373338653236396262373331663839653839313632326535373765613534343230626630636134366265366663346637316366323638316163303235326161383835653133626536373263643238343539303432376463643133376366333131363235653862656533623038666463616166343635623338376365376362333338313666326331346136623939616337643733343331386366633539623765643933396261666566383739303230333031303030312805320218083a603439333161373832303264353566313062333135373537383563336634333964623638313962643131303033646637626332636539326532396135313762376332313838306465623463303137393537343462353736636434336238343938640ad1070a0d31332e37382e3233322e31393210a388031a05302e302e3822cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393164376466666637386634656662653538393034353063356263396533353334626666616461643933666237616662313562633762636636376433643362343133626439393934306464383235363461646130346162326534656466306131633062386662376531613830393265393133386539363062653263633638623562393766353764323831633538373265393761343739666338343833363331363065333836336235376233336534383639623138356163653565333662643433616535666136373863396562363666316634303134373836383236623266386661376530303630663434303563306138663964613732303566663436383361323433666130663331356631616662623461346431343064303232333465343437336662393266636233386633656232386336306366376362666236346530363963313830383665346464363139333839323061653066643763313933653665313034653635623831376564393339386532333232333766646630383332326339636563303964343039393237326137633031356432326234646363393639663665613166353138393032313035646636303039326235356134316234663332623935376235376438346535623232333930356538363938393531373333656139663265323436316563306436353232656538313664353835306661636665623431326366663962393939343361383764633064303436343437636539336239376531366437336239366234323633393632663831666366393435386535373537376337383061366631363135616137613132333236373338653236396262373331663839653839313632326535373765613534343230626630636134366265366663346637316366323638316163303235326161383835653133626536373263643238343539303432376463643133376366333131363235653862656533623038666463616166343635623338376365376362333338313666326331346136623939616337643733343331386366633539623765643933396261666566383739303230333031303030312805320218083a603439333161373832303264353566313062333135373537383563336634333964623638313962643131303033646637626332636539326532396135313762376332313838306465623463303137393537343462353736636434336238343938640ad0070a0c33342e3132352e32332e343910a388031a05302e302e3922cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633665313863386662663463643465623130343534326362323061616161323532643935663035326631303836643538316334346164373337626636363736633063336637383961663532363562386166623739623530393132646138346530616663663735343763623166666630386430353237303137656236646335636466383362353139363964343433333661363338376364373062393462663463396261663230323938343065356634663836336437303831663066613831653038363361646564623862383961356461633262623535326436653762396662613232326163323863353730373535333866633935373939323934326433343166613238373665366235303765396365376564353732653863666461356465666133363466646638643865323338323961346363626234373866313165656533623332616238356530373239353163356439343230313135666261333237303733343934663433623566366265626638343135326533353665376231366261373634623761336235326362323733343634303136336265313436356536643166613463366536663636363834613633356339613535366161373130306462653634356466386634633432336165343561303863623335623462633138373838366532323939623563303231306135666261336239343439663438336566393465643932326531653938633131336265313636623839633733353832323433313335643434323330366162653561373162373730313866663333356436646437393534323639376231363832333862393637323766643133333962356638326133623661353937643937363033376165323530363435366338623334653966626633626333323431303434316334626663386562613538353937323534656665626661613738383039613563383835343732396135626137386563653139666338343037646438383934613662633738343430333764383738636163653663313532633265383965386136346230363861366332333765303939393362653830363839303230333031303030312806320218093a603634653039383631356266343035663765643561343031333434366238396334383863666364366262323561346136373664633737656561313164333364373032363832663061363961383033306538633537373764306534323230333739390acf070a0b35302e31382e31372e393310a388031a05302e302e3922cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633665313863386662663463643465623130343534326362323061616161323532643935663035326631303836643538316334346164373337626636363736633063336637383961663532363562386166623739623530393132646138346530616663663735343763623166666630386430353237303137656236646335636466383362353139363964343433333661363338376364373062393462663463396261663230323938343065356634663836336437303831663066613831653038363361646564623862383961356461633262623535326436653762396662613232326163323863353730373535333866633935373939323934326433343166613238373665366235303765396365376564353732653863666461356465666133363466646638643865323338323961346363626234373866313165656533623332616238356530373239353163356439343230313135666261333237303733343934663433623566366265626638343135326533353665376231366261373634623761336235326362323733343634303136336265313436356536643166613463366536663636363834613633356339613535366161373130306462653634356466386634633432336165343561303863623335623462633138373838366532323939623563303231306135666261336239343439663438336566393465643932326531653938633131336265313636623839633733353832323433313335643434323330366162653561373162373730313866663333356436646437393534323639376231363832333862393637323766643133333962356638326133623661353937643937363033376165323530363435366338623334653966626633626333323431303434316334626663386562613538353937323534656665626661613738383039613563383835343732396135626137386563653139666338343037646438383934613662633738343430333764383738636163653663313532633265383965386136346230363861366332333765303939393362653830363839303230333031303030312806320218093a603634653039383631356266343035663765643561343031333434366238396334383863666364366262323561346136373664633737656561313164333364373032363832663061363961383033306538633537373764306534323230333739390ad1070a0d32302e3135302e3133362e383910a388031a05302e302e3922cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633665313863386662663463643465623130343534326362323061616161323532643935663035326631303836643538316334346164373337626636363736633063336637383961663532363562386166623739623530393132646138346530616663663735343763623166666630386430353237303137656236646335636466383362353139363964343433333661363338376364373062393462663463396261663230323938343065356634663836336437303831663066613831653038363361646564623862383961356461633262623535326436653762396662613232326163323863353730373535333866633935373939323934326433343166613238373665366235303765396365376564353732653863666461356465666133363466646638643865323338323961346363626234373866313165656533623332616238356530373239353163356439343230313135666261333237303733343934663433623566366265626638343135326533353665376231366261373634623761336235326362323733343634303136336265313436356536643166613463366536663636363834613633356339613535366161373130306462653634356466386634633432336165343561303863623335623462633138373838366532323939623563303231306135666261336239343439663438336566393465643932326531653938633131336265313636623839633733353832323433313335643434323330366162653561373162373730313866663333356436646437393534323639376231363832333862393637323766643133333962356638326133623661353937643937363033376165323530363435366338623334653966626633626333323431303434316334626663386562613538353937323534656665626661613738383039613563383835343732396135626137386563653139666338343037646438383934613662633738343430333764383738636163653663313532633265383965386136346230363861366332333765303939393362653830363839303230333031303030312806320218093a60363465303938363135626634303566376564356134303133343436623839633438386366636436626232356134613637366463373765656131316433336437303236383266306136396138303330653863353737376430653432323033373939"))),TESTNET_ADDRESS_BOOK=NodeAddressBook._fromProtobuf(lib.proto.NodeAddressBook.decode(decode$5("0a7f0a0c33342e39342e3130362e363110a388031a05302e302e33320218033a606131373165336261383334373637343761656232653261633464306531313563616161623931383230336230646665316364656162343433343338666332383961626338626138613661666638336462356631623333343034366461383863380a80010a0d35302e31382e3133322e32313110a388031a05302e302e33320218033a606131373165336261383334373637343761656232653261633464306531313563616161623931383230336230646665316364656162343433343338666332383961626338626138613661666638336462356631623333343034366461383863380a81010a0e3133382e39312e3134322e32313910a388031a05302e302e33320218033a606131373165336261383334373637343761656232653261633464306531313563616161623931383230336230646665316364656162343433343338666332383961626338626138613661666638336462356631623333343034366461383863380a82010a0d33352e3233372e3131392e353510a388031a05302e302e342801320218043a603734303964656332653439346236323765653439633639623239346265316365616562636133666463616633363738396538386663376435623065656635353631663532623832643335313931613339633266626564363032373236373136360a7f0a0a332e3231322e362e313310a388031a05302e302e342801320218043a603734303964656332653439346236323765653439633639623239346265316365616562636133666463616633363738396538386663376435623065656635353631663532623832643335313931613339633266626564363032373236373136360a82010a0d35322e3136382e37362e32343110a388031a05302e302e342801320218043a603734303964656332653439346236323765653439633639623239346265316365616562636133666463616633363738396538386663376435623065656635353631663532623832643335313931613339633266626564363032373236373136360a82010a0d33352e3234352e32372e31393310a388031a05302e302e352802320218053a603962313431363538346134613338306262383661366337643732303764386165646462633362363365613330353939383235356263653833353162613462356463613532633932383261353461366265643630646536336365303361616132340a80010a0b35322e32302e31382e383610a388031a05302e302e352802320218053a603962313431363538346134613338306262383661366337643732303764386165646462633362363365613330353939383235356263653833353162613462356463613532633932383261353461366265643630646536336365303361616132340a81010a0c34302e37392e38332e31323410a388031a05302e302e352802320218053a603962313431363538346134613338306262383661366337643732303764386165646462633362363365613330353939383235356263653833353162613462356463613532633932383261353461366265643630646536336365303361616132340a82010a0d33342e38332e3131322e31313610a388031a05302e302e362803320218063a603634383636383562346536653063623936333437326330316665393939333166643965346334343838376261383334323361653766656564323264363438343834636638613362633563636361366133373338376266393664333836373238300a81010a0c35342e37302e3139322e333310a388031a05302e302e362803320218063a603634383636383562346536653063623936333437326330316665393939333166643965346334343838376261383334323361653766656564323264363438343834636638613362633563636361366133373338376266393664333836373238300a81010a0c35322e3138332e34352e363510a388031a05302e302e362803320218063a603634383636383562346536653063623936333437326330316665393939333166643965346334343838376261383334323361653766656564323264363438343834636638613362633563636361366133373338376266393664333836373238300a80010a0b33342e39342e3136302e3410a388031a05302e302e372804320218073a603339653930393931356138353238303330313534613663373730393530633762343737376261343031333537633065363138373635343231356363323061616363646438653566663239653963346439356366343130316661363862653435630a83010a0e35342e3137362e3139392e31303910a388031a05302e302e372804320218073a603339653930393931356138353238303330313534613663373730393530633762343737376261343031333537633065363138373635343231356363323061616363646438653566663239653963346439356366343130316661363862653435630a82010a0d31332e36342e3138312e31333610a388031a05302e302e372804320218073a603339653930393931356138353238303330313534613663373730393530633762343737376261343031333537633065363138373635343231356363323061616363646438653566663239653963346439356366343130316661363862653435630a83010a0e33342e3130362e3130322e32313810a388031a05302e302e382805320218083a606134343837346137616131623337373431613037316164616165373866623135326236393664316335386438646566626531643832333034353332613063303139656539366363313964373536383635373864333961316536633331613165650a82010a0d33352e3135352e34392e31343710a388031a05302e302e382805320218083a606134343837346137616131623337373431613037316164616165373866623135326236393664316335386438646566626531643832333034353332613063303139656539366363313964373536383635373864333961316536633331613165650a81010a0c31332e37382e3233382e333210a388031a05302e302e382805320218083a606134343837346137616131623337373431613037316164616165373866623135326236393664316335386438646566626531643832333034353332613063303139656539366363313964373536383635373864333961316536633331613165650a83010a0e33342e3133332e3139372e32333010a388031a05302e302e392806320218093a603639383332613733613336303265386431666265356164353864316332363337613162363732643731656538376166313064623634386562393161666232323832353362316634376535376433643461343466663534376233333934616132320a82010a0d35322e31342e3235322e32303710a388031a05302e302e392806320218093a603639383332613733613336303265386431666265356164353864316332363337613162363732643731656538376166313064623634386562393161666232323832353362316634376535376433643461343466663534376233333934616132320a82010a0d35322e3136352e31372e32333110a388031a05302e302e392806320218093a60363938333261373361333630326538643166626535616435386431633236333761316236373264373165653837616631306462363438656239316166623232383235336231663437653537643364346134346666353437623333393461613232"))),MAINNET_ADDRESS_BOOK=NodeAddressBook._fromProtobuf(lib.proto.NodeAddressBook.decode(decode$5("0ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633435363165336332373863643635306538306334313363613434343233633163336331336366313437356636663639373664353937616534333262343961623432303836623739623834313332363035346238623364636635376438666364373962666330353831383363613234636434633163626335373465643131313765326635623762336336336365376230366439623465666366373337353633376234316665366635336338313162396465363134336633613532393537636466393536373735313230623333373033666635373632313430376162393537356263326433356330643434663039383366633165663633613466663532303966303730633932616631303632393536303163393662636564303634656331393031393730313963363831316334633864643830636234663461633731663961643736653761633839343536666266346630313166393061626432643930353336653832333436353166366265663932376533643564386237626634353930353039383362656361336162656632613964393761663334353737326137373430653936393932373562303138656130646632383661646436636539323365663930386662653736326137356632313131363836326462343464336463613164343462346432653864633130363663353030366262356137643935346164323535643462363033323733343735653531316165623438356430363961303637633061623563323435333863393333633036623561366165666139343030356332393135323133653463636461653663393432663632373266396464353238326436623839306631663230656664323339396364363734393234666135373034366163366461333265373339353161373331313365393166633262376666323965343835316238336666333966383362613965633666303863656664626236636262626666616266646661613931643933306637323030646134383133376333393463626431336537303165636463323631366664323162616436383161613466303031303230333031303030312804320218073a603665396138616263646364653665313134396133656265313766643538643839303538333961383664623732623036613365613230616131373666383638623235343838353261653432336437613963366237636666396537313436323961320ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030613163343037373135343330336363373263346662373639326333663934323531626465633132333961316637613839373261626539316133353332336662656361363235613766666165363430366338353564633261663231313039303062306466306536653664623736333634646661316666653835656461353637393336653239383562383536333461333261613532613635393964643663333062653166376136633562386635656563616632363231643861343539363832666364326462616164313536316431316633336663636237663535303061633536386431363564626561616365333238366432383934663634313239643738316436633732666437643539396339653164336166346161343333633233623931306661653463343834313634316636313532366164373837656265613533393837343136376539643361373363633066623135363432396431356563373633613664306630363131356137396239616637383364373762393864383330393661613437343366393734303864396531346263663464646666653435393137363838343762343063623864613763613337353235366432623933356430393566653235326661653831666636653337663834643761393064376535373061346638656633633764373636656564613437326630393230313939303135613839303832353961383733633534353466636262646361643265353238646538353435356234303833633764633461646335613938386530636464666463313539643564373132616264353434616137336563303239303839383134633938613434663236666330363434363539633138336533313834616132373266386431646330626661336530613536303438346362303535626134646262356363333339656338306264313164363432646333613730326538633730336162323139333038346439626436336630646665313261343333633235373665616637383163666164383637656637306264613631373638623262656631346635306336633362386230393666303230333031303030312805320218083a606464336233653763643361323537643832373665343635333533363162303138623730303931663438363635653832303031306538316563303539326236396264346265316662643765636435303964303730313364643034313238343266640ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030623263636163363561643066633736343561383137626661626334383761643765343133313165376133313938623337666238343264383463333935623366363764366264383438663130633666303363323930653866376461613864303031613834343164633335326131393136306133313933653638623832656466313961653637363933613961333364346362383765373839613130373037313535313565613737326361613862383661353639623931633534353038333564396333353466306461636563393766653737303931623435623134373639386237663836303134323264636432323631653932386465346461633963343264636261666466393663303732333362613330323730373666333763393639653865643330623662356438663530333462653764393263353936663862653836316535316663633361323432626639643862653965326139653865306631353565626366663233656666613763643537633130353432383131643830373736633935383535323666646230656161333465653139353564353131313933393066653837336534633034646564643239313635383834623938623436333038373838616537666334643461613461386663396263323637346261333231343933623632343435356164343130633164653731626339356431643931666130663230313431386137393565333039656166323937623639396266323763396661323736336364353963656230323165313662383230306331303630663238313766643833636663373637313833343839343631653335393932393162333830643665393339626161346231393233326136613237326464653635316638303436666463333464623237366137373764366662326265633332353562326363323434623461663536366231303566333063363530366464616530656233646564646366393437626362396336306530303039383466336234613863366334656434626639306263313933326237663934646333616536623336303030386562393032303430663962303230333031303030312802320218053a603561383634313561303861306138323566336232656237353031303135353230326533313234336665343161303333333834653738633138633131653565386632303964343933623062326664343565303662333734663262363964663564370ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030613365333762373663366364356636363232643639323434343464313263363737633339356632623539303266336262393862386138623530353561373037373036636130323863643735303630613264383730326432643862303439343762646366653061386331343161613238343462316530366536363139303031326538623633323661623066613331373937336263376362346432393439663231303861613034633462306339316261613537323866356235363232656337356162663537386131663762343165646532613637656264363963313865353831666466396336303230616330646539636132633331663063363436393030333331316662623563653764623439633738376531613764323761613432356565376238346461376536363933396639633830643065383266636535356530326466633862356337383431386132366161343336353036393837313962616663656366306264343930303061646463666134303537303862646265666262313937343964323264616230303765343464343565613233623130366638383334633135326532353036326434636632346666323533353663376562333732393130353339336662343962616239303461303266306630626234313763643931396433353238393031323865366262666634666163396639306465313138613937346632613664643031653033326137396231373866363066613166636262643032623537303466623436323935633135313930383136333733656464363633356338353639373866316239353033663166373362346230626538616261326564316665656164353939353362663832656664653933613334373161626435356364613362613861363733666262333739393734396662303036643030336630653633663636356333343631643261376232396463386232303462613539613635363638613436616532383738663030643166393439306466396532383066656266343331356561303465616135363861336139666434386336326336336236656364613639303230333031303030312803320218063a606434363430333938303337393230373965636364356134343331316361306463323262353065633839356235366535336431326232396637326463366462613363616665326535623831303466626461303338616635623434376430666231320ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393361323135636334613761373232636165396331336162643633366466393963636565633661663964623436623639666135313637313665663530636532343930613938316530396162303139636132636234363831316235623631396431626431643565653666343661343263373737636264656536343261313438346563646635646464333732393634326333386336643433613838353838373434373566353832343434333636346330346466656439623839303435666230383565323563336566636234383431373333656666376335323963313339653639333530633263643739623263386431393637396137313265346538636166643332363735343162383332623365313061303132353564656636396466316539643362386438656166303331316465363764356531326232366464303164626264396433653432643335643964653237313330326530663166363964383763626337616361396538383637653964343238643363616230363636656234393064356662616233306266663366373835643033663230373261343362623962356535343635366135393263623631656166643561356566323834633763616563363666376634373332356363306434633164323766363631643861373438636135303731633036656631333464666639366634303836363838333636643436386132343738303031376530623536616261376661623433623362376330623737393036666165353438326633323831316332393265366231343435346531346238393438303161383661303363633437373934646430643734353237613732653432346564336166613034383939656362396136336632613961653732626537666139383961646630643635613332633835316439383031666334313034386466333335363466633762333137303765633866623830313430666537623761316661313230626131636236363033323463656666623462636332643962623764653063663534633831396632646433626365616465633963323566356531396463396231303230333031303030312806320218093a603365303261363732306334343636353965383633303564353562666565383230623335653635306665636163633535333039373435356532633465303332636339646564313662316262343464336235393262626163623663326266663165360ab70722cc063330383230316132333030643036303932613836343838366637306430313031303130353030303338323031386630303330383230313861303238323031383130303930323539663465336439663066333934323536353438653963373330386231306237333430336363393039346439376164313531623737303631373062393737326365623634643636326563656639303161386437643135643331396135396338623731303731616363643839356237633933363130646336393736663637633465313732396261383337336162376535326133663363386632363534393164646536396436653039393934373065373434353938313133316264393663333665363836353230336662326562643564353065616461666237323633393664656331643931373438393862346539626530346337346433303466656164643963626433323334633362376633333036633939636230633333396663323539363962343164353861326237636663313833326532323664383163313936333939336532323535613038376431363938633033643432313062643634353830363434643039356361373661613137393465646434306331633837623566383261386533396636303365393731313662613034353738653765383033343634393564373835643465663763663737313462396562366635663965306239613934663462373338383436313962393237346434613935656631353735346138396439376566356331613838623664363933653061383065626435333766633963663063613931643163363264393135646537656438313862393532653634633230303239336565386532383461343136613732613365313266633764343233623135386639623439363630636263323436366662656430666564326532346531303266646539343265623463666439346265633436643364393066633038633339666563626130336530636132343634616536363462393739353135626132396531663730326333666537303262653739333739366438656462313761613438633039323930623032343534396630363131663561653233656437653136343432646637643164616432323836633262623039643535323264643365643639386332663032303330313030303128093202180c3a606339373462623938326338313931336237333236643561336639646363343836313261313566376161643032663230376230663130636432303137613666626666353830336537636139626662343730396162323862366230396435623133660ab70722cc063330383230316132333030643036303932613836343838366637306430313031303130353030303338323031386630303330383230313861303238323031383130303962646438653834666164616133353332666334636530316138613137643463336232333266353061393739306532363236383465646334383233653831356131626435623230656365613762663536653239663662623762383331666233626636656663643134373566306238656435666662306231333835623936643136366236323966303339366138666566356630366534626361323565653461313334306565323633613464396262303230643866343732333036663364383836313338646537613031396530353962643061666339303263636261316132313361653264616136306338613031333735356665306134386530333466356234303233613264616465616138386335343836383335336163376137613364663132623266623634313837373465396231346265366561623863633237623838303132616436313632646137346530656562313631333539303566343337333734646162383538366437353061323662626433616332346165643837386334643533653635313037326338373165393464376163633537356339363733383137333461353366656166346437626136626364643234316363363435386336303837643836333032616132353163303466366435366239633332643764393636323437353065643035353738356430373733663433646330393962323863393232383131343865366338316632393766663964313636653030306163303462333132343138363737356663656637356635656261306331303332626631333064663663643761343632313164306466336530353834643932656136373334396438343930353038656234656638386635346338633364343836646538373139663130666139366665623835636337393630373663613738313331386565326439656439303363613133333630343063353961643931613464326636393865393130386165306564623962316362393561643333623139376666623138626431626138623536636265653261616539353835656365323038613165313462343835363436333032303330313030303128083202180b3a603937303834333033333130373866353638326337663332343464383263336233653238316139313837393537386465656163646363326132656265353431616631383831313561643265383338363565356635643234376234613138633165650ab50722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303039303938383635646566326632616233373663376630663733386331643837613237616330316166643030383632306333356362366562666362623063333330303331393361333838633334366433303233313732373031323139336262373666643330303462383634333132633638396566353231336362623930313130313530396465616239346632366137333265363337393239646134633463623332353137653361646262333831316435306163346337376331666365386236353136303632313566333437303766336537323635353435653538633839343630396532383337366264623737373566653330343339653065313539326664636230633365653163333035373733643037326136623839353765616663653161313162653936356564616666333834333336366362366134346563323561383930313036653632343735363766373662353530666461343832626165633633303764363938656338383834316664363666323366323130653437623861396463626136626134653166613731366462333363383065333038313934393664636235653536303966623665376336313533373962646465643432376539323331623932353463326261663934333630386138366436393861653961336338363339646638383764366636623561373133383564323433333864393131613231326266373166316532616363386231383662393665633865363963383662366430353832313737373661303963396336383935336564623539313635373862356132363362326634363965336230633037656164613731613434376565613766386663316262383037343235353536376237663062643165366166623033353837313863393862343239653234623232393835393666633736636636616633393663613934333464373932366563376433376434623932616635366434356665666638313936303935323234613931366331666665366236363765323535666333616338636363656639323064633034346232353030333133326238373830363734326630323033303130303031320218033a603333373339306438666561313434616663313265383132353461323864616336656138323839333833366163303732656666643835653061373734383538306566323830393636343863356137663864626234636538313437363831353133370ab70722cc063330383230316132333030643036303932613836343838366637306430313031303130353030303338323031386630303330383230313861303238323031383130306335376564623966663237366530323362323830323163623164383763646631393636623639386366343865346561616137633639323037376365656538636362323339613463393231353937653865383966376363303564336633313331353738393736633465333134343035643461346530336137323431306335633039636135323761643561383562393938363337653732613332653166626330643535343662323436356539653830366332646435303965623035306162356662323730363366643932383135623164643236383965323131316361656236663534396539346139663030663038323164346361366336613631313766356135333363393236336266303734613330643563626566353064316338633233383762636139373265646564613039383362356430613662353764636230303230303036383238623430653430373662343837306232346261643834303536656535326235663432326538383430303238633235303036333832643865396336363132323566346637366561373265333430363037653966633666336332303433333037366131636138636231356564303361633839363664303530376263646536383165346530323331656539663837643131316537623438616338663934643264383432623532646637336635373363633534313439363437393763363236393638666661653734313866336236313039623561306630396533323233663461346435653335303964643235303133386636626331376266366365636531373539343433306466313830613338653930616466326166666266616430633662386331623837663137386130363164636662666638623932633931363664383734633166663561663466626364626665386539643039393337306464663630626537343736333364333665653465623563643531663665336333333965313531653431626462356135636532633863393761306134336233636434636330383138383463383739663964326633373438343238633835373366313763393066336362643032303330313030303128073202180a3a603734306166366266373339653838336338386633333434633961306638623330316533396463393831633531363365306465326133666634326239396534323665643765353662363766343231383530333834356466363266343963396662300ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393133316161333638663933343532323966393762363235396363636166666561323365303063643565616430326533663639366331653731346565333933396461643836306533386266393561323937346639656234386539333433663861616334303565613935356430353332336531313762336231633934383133613361663432666538303832633364343362616631626434643833363765393364623030616436393665363237613130333661653533346630313165616435653536663337613666666534346236623965303939343031313932616435363061303334366234316138313030393566356632643766643332643665656236353562613735386336623532366331323933383661663731393763376135336165363033643632323833323235343936316631366430656661383037396137363835363138383862653733333439323231373935366262636166616562623631333563356662623234383464356234613566646630333336616330326532366331363532633162643865616633306461653164366433656230306637623466616238643634373866653864393565623931316466393636613064656134653532326462373662383936363537306563633561663039353136343234663061663566386565363665333836643536353037313339393731363961633337353733626635326664303538646539356162326666363865363831313161623233343035656139363462326262383864303263306631636165643731656364643465346534303835393438373666646238353030626335356337626130323036366530356162393864396637653034363664393730326562353765653337323266386663633835613735353035666633323632313730323838623738383732336164623937653464653536323063633930656164313338326663643735373138383966656662313165363737316263336636663366656231396337616335343238373864303361393032373035323663336565643234393465666635346531353363613966363839303230333031303030312801320218043a603765616236393661623935343336363538626331346666366234626534643932356364353162323230646632613164356336656531363061646166323961353165363934646533656531383463653232656164386437646239333231383266330ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303038326465373330363566333466666332393334306435393439643232323062316534333636656435636637633665626436313663663934313661353365613030313766366262313136626664336633646566636331356237613464646630653434643032666536393536383830353365373961373730653230316263663731393333393030333965653866303836643466613734366337653035363931383330316639623565383465333932363238323830383561373962333232626361306235643835666539373232316132366262646532353863363230663064636561303261623165646431366363343961336632616239323838653364643166333764633462366136663731333366663932653534316337316237306432613266363664353537323561623138626638366430303965633364323466356431326530623565363830326431313531333732643462373634656265636234616638326636343934383565633537623561303164633637393538663561303363636161623763626139333534613137333732633133313662613437633935336161663934393031623366386332346536613361666436373538653766336231343363653264643363623037316232613734633932316365653934396134623561366265383739663163373930613662386436336231393264376565323961393439316664643638396139386330613763336436303332306631623461633264363232396466643934653432663361363034386137366265316562393538633861313837336265386433333861656339666335396162376633373632363738393430326331666435393566313930383735373565306265383237666334633061346662336433393361643734613934396363393836626662363463616264646165353339333566366463353630373464623933643737656133623831366264643662653533343439373237323238393835396666333463653531383630616666623632316431303438376463333834336631663836643534303334613633653438613161306430323033303130303031280a3202180d3a606132656363316232616539386264323862633161303864386633373161306434663734356337363864306337373339363235363265333433623235643833343235656565613765663865613134323935333432623865623738643332656333660ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303039383735356134303862353332316532363330353230303064366437643461326333613535346435653133383461396362356562663437346165383832633633623438366264303864313434646466316139346365396137643632353139363330303661666461616334353838343666313736343031393566653235333961363536393330656661383534663231343865363865633161303863316334396432303063336633303435666537313437663036643533346334626432363231303063623164643339373339643736306438316130626432306638336632353564323530376434636362313130366235333631386336613934343039633838376361653236326434636565396338363233323134376365633134303465306335376262613733313731333065653339363433383838616633643539386564643832623863363165363561653831613465316135366263303664333937313433613938643431636138376433656634333365663061656162363830313139316233653338343830393638663636623665383836363261663435613965323132393934663638623238386562393637626562393834373863323433653231333663316131353931663036316635626330346232316666326261343862323966313834333130383838373362646665393966386135326539343038393731383536653830346465613630326133313137383663393835363532393633633361333737303332396234303966373466646663373436623232613566383431383931323037316334636538343663396234623332306665646636653962363465326362653338346639613832623661616164346232303930373433316466316133336636393230376135363536303062653831303730643038333239303039393538353961343439386435623539333135626365626566656538303765623061336139343266316364663333363764643434343466646232393838366566636464306265346162653961313838383033393533383735656461333364623732393839663736336230323033303130303031280b3202180e3a603139366237623132303739376364623361396430303362393833643537646131303331303662313733306531376636376532633762616161646234333738396166313639366461313031316232353362636263383630333333383566303332380ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303061396462376638626161313236383938666162373839313135613362356438393734346631393765323830343161653039386633653838366336393837313732316531316262306164313166336365393132346161393631643661306463383435663439373635633366616231393935383430323637366635363434363262663238316462613535383837383066303365393035373938653138343236396161613630663761313437323333316532666231646561646438373763383463626362363431636139653563386164366534356263313539636230373966636230643434396364636438643932333963316130343765376234343864613063646361323636313061323566323936643936653734363962363736643461343434353136653761353965383532393361383038366638343063303532383534653032613863623230303264616433353832356265346438336235326661393165386337336666303439373436313438383632373837633131313866393234643331636261633162343466656666323264343336623339373965616466396234336134626661373265313562343735356663616232363065303661323739633362623733626337663136613036306434643532326664343930353830333838616135393564383034343733366535323266363432343931356637383033623735383365303935636466373863333235313936393764653831623839666235303035343735336231613137663961616662303634643834633939326639616231316363626338636231303831346463616635323634616134356632316264656661633832636361636161663335386533313337336565316261346537343032666438613730656130633238636135636337346463343235313063393639636432633435396231656333363838613031656133396139393237313063643232393763393861383462363334386135373738303466646332333464336665313930336532633231653137326461323862353961653665346337653865646438623731633439643730323033303130303031280c3202180f3a603538343661353366343437353239666439636462373830346364333136383865643665656265336236336461326635663231316666626337333731393763663366316366626664613631626537643135313066306539323339383131376637340ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303061386365616333363765623166316465356630643965663365616630646639623938343438666532303830383437363536326130363063353163323839373730623463616366653932636236353536393832336539363263326132633966656435336264333663613361313232646531633532356135383266323561346437643632386331613364356264623839333661656365373531306537353534656537303333303235633039326338323865656235373338626530326564393633646138316135393230353633346365393435343537376162383266343066313366316565353565306165373237653233633330323834623166343462393961636534646463356639616337616438386439666132323535393335623234646362613834303036343265313663663235333263306230643638393239303436303837313563343037366634366438346130653066656433366537366363646339363335356537613236313630393435633262353461653236636330306664303832333236333436656565656137646437356639313931316539396462636239396561346163366261303536633333323238643838316438353833316439636338373935393364613137343664643065653935646332623936666539336261666366663263643764393239353864373864663333663230356437313135656439666163346462366634636336306535366135343431646135623562353566613539393939303265393538613662366334346438313064646335363138313234316238376632326630353961363838306538303231373336643031383937646236353434396365383137613233373564303335353163623064653530376336303961306338303330656366346266646562323133633033646161373634613138323162373234333334663731663736386437616563623237373035326137303333373635663037323138303536633738663261383761663138333836643866363161356366636233663262613464643539393135663133643338363334643136393537353730323033303130303031280d320218103a603030306162636435396133306135333838633530306265363832663663613239343034363239356339323735383831633230643334626230643639306564613762333862366262643037613364643166646662366137303434626230396366660ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303061663062393134323537626637613436353563346135306430636164356530613165343538316564363632336630653837333066373936623866323963353831373862636363363933326331666333316633396566343462383264336334336233393837333733373366656362313239353232386130346664353061313466333634366438346665316634363763616562393864343633653239373565393935623864326531653339663362663661646463323561653335643635643032363038653033343535333739363665326162636534396238313462656164336331623735373137346165333063303062306334336539396238303439366237326433633133316631633665346663646130356632383131376566396532386334333033626534643863376530343264353862383363633132313934356132633635653739363263616139313835393338663337353764663763636139356366303262356533313934346133613631396130616333663165333462396230313364346332323463346631653730666439666433363938336566383661646535313833363263633833323263306637623631613961633735666238326537623836643638626330663039396130396131346361633561316438643338663961386137306363333766663563633362626432373432666664313436323535633137316536613137383038333237316463653066646536383165643439326362353962303739366432373031373538333864633539303831303765336136656133663961343036623364313133306363656333623437393165343962626332333136303362343661623264306639336434336265373561623961346437313065613934306532383561376231353362306361376364646565366439646365306164383335306334316439306332313562393538383531356166613061633333363561653037653831663362626233366264626561633462333162636231616134653832353635623937376639646164383564363236656566396161613965663864376533666230323033303130303031280e320218113a603933653238313031303462326231376230303935326235613431303264333365646230343363623136646533616433643364363832363066353562623065353837333765613539343463333338663763386362383863373833336663383630630ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303038633037626533303561643630623930626132646162333962306565373736306531613232663835373532323534306437306230336233663965343837356133613239616230383038386631343466353765623235326534366261353933383564306536643432373031313764613061626331623362383036393463396135303538623836643631646661303665373136373039633838653866656163376333613065316432356663306165626636613866373666636239396638343566653138313436316361623638353862393763336134303237666233373132623134653663303738396465313764343137363435373765353131343137656231363236393265623037616531653733353532333565396262343339303437623663303136313337383265376464366636303464616134363734363631643533393631663436633366616136623765373637363264333733623562353432623739656139363365666266333361633638313938626232623636316366663637363931366566333732616434633236633231366334626334373837633834656333326431383464373763373531383663303963663364396639313433336361393835333131396261623331666136616432366634353365353936643962646563613638613537363962633866656537613533356438306338633666336566623164666232383861623661393739383534623763653833313234656330643130326166663934633362373466396333373839353863323565623933336464353363316538303561313836353464366439313836393930663635373034323966393630663334653862346637666439393732646362666539323430653037346461326433353561356637656639633161663632656635393832613831373435373862396331356334396563353636626461636233306363666365663039636466653730386164343837343234653963316265363533663965653736363065376439343263316566613564613238366531616464616230366139613333663964653934363739356230323033303130303031280f320218123a603934383235313739643163333934303137306233356432363665346366613830643737386335653966356261653764653833666638636334373431663362653336616336336431653761653439373261656466366263316533636632303638390ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030626531376339393634376365633635613434343037623533353835366233633362616566356235346635363561663538623834353662613863376365353335643561633732633631633434633736623363353763386538363438343136333762653130613833636665333963303932343736643064626534643663646364636437323061333062356266656235316130316131386635383263343566366338363939336663663764663138323933356465316438363930363034346463663335313836393335643962643765656137393532333532626562623465663961653066373636316537306134323337616661393839393636383763613438666366633562303064333830376630353462653066613863336266613432353033386265366566323935313634663232663733623765383863393465613962653861613466336132343563383962396431666435313932663761353062393538623265663831303462333666316266386664326366623238633134323138303063316334376534656639386166313530303730636336643639643137653865623932663138613661613161363532363661343935323338643130336638663639356235376563663337333635306130353230303837343537323162656138313536323739363763383037363336356466386334633761376434646438663263333835306331386662613731656236306536653864666264313936653035333766643730623334346563626363353330646663383364613666656466343964353161393034313935303262613964373063643335663163663363303639346532333534663930363466646266353335656232336332376330613433643062373863316638363763363164393836393564386465663762633261313062623636373463323266363661616230613931383133646466323763646238353263353965663739653162396531613037356661366565323761376533373734646266346232363436353432376536643561623931666537663066336137313738346563613138326235303230333031303030312810320218133a603038393039376465663031623037633764393734613537353532353161366161613061666236623332613534353334336432393138653732626164303433323163313131633234643432373538306633626131653236616139643735653632360ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030613561643262373634336130346330353564326638636432353131623135313339666334353537353632313338386534396331313962326633393861636131313066363133393662306338363664653530363335323262623835343032373365313366366439346365316536303433386636616662303061616136343631326637313435653962636538626331613533623934313931336161373663396633613238333366616437636632383563376163326433376639396633633263646234396465346431353165363136373835363466323831663534313432346234316661376335316232613936303232383363376433326565303065623833386461313563333861666339366530363164393763656465323231363566663161613935396631633432373562326430393863343035383661353537396662623363623930303732373034313230613861363661353237306634666366643130383663393233363930613335653766643434356533336163303366313339633638363835353635373063646334616166323231303761366331613434323435366137633663373965653034303930653765356434663636626361363063613166343762366466623534336461633363626631396137373139613866353562366638336234613362386136366436303235366430613436353531666137303234626430353633316238613535383038373732353463326632663236386364633333643264626263666237333365396662653233336262396362353961623331613031343862323365386334323638306666313061663463373961346430383334366662373961393364393632393534386561663162623132343639386661656661346364643732343432633033613034623733333433326637343839303361333235633238336434353661623961653932316165376564333339316535643137383765666463323335343061376238356336393161653837306130376639306231316331336233326365343365616564313562333639363835636534393137376363393835303230333031303030312811320218143a603939666162633461646534653636326336653238323366346139366562323134343034383465356136643064333132623730633036386432326236323936333830376332333361343964626239383361376562623330653737303637373261340ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030386434356332316330633935656636356130323964353263393537666430663835663230313233646130333465363136373164646565353437356630373338326136366336366362346463353035303464646664333735383130383364663864313735373733306564386436663336346466346333366132363531353931393535646132303161323430376661386162396232333133383131323235613064613233306662653338306530393061613536656661346632303265633962343832336636353031643936616336393865626632366161636633656532643166333261373231633934376531303736636633356233373364613164383761333661313532653030653731303131373932323832653832356666313731633538333362383835373062666336646138343439653666393566386231323635616235353531393430333135353364316435373666393363343263306361363061616261633463386464313632643831313466326232313531313538336337323533396665353663343939613932396465336134306130643435633137633538396332643739383863653236656166633932613364333762376561303034326434336530336166613632373162323632353561366363636661653533373138323164383165306230356332353062353966306139303734316130653065383861303965643536633562393738306430393566303930366630623831643531323633393832616165303131333663303732643834346131316436646134623261363163363434653161623137663136666634386565323366656465383435326631653432653264333061303739306332356434323036306531643434613637316132656232336431313466363863373165333366313736646235386136386234333030353462633164323938336132336133326561366666393566613763346438653338306562323936653938623739363865636638343534643831376337333765656135646439323165623836633136633762323933303461346137656362653561336131303230333031303030312812320218153a606537396165396337313933643164326263393433383436346338616135663632323461653835323936366134336239383235383833663766373432633533393562643330393935383761393638363662393233396431656666336165353037610ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030623035616265326162303066646430366339353565383637313062306530366631613932363234613438616431636263386466633666323231323936326230633330666462643238346133376335613337363538623633633336656138313632353631613865346639343663626535373232633032383830316630663238316337306638643838633763303061326632653239663539376237393938363965643833353664663537633437626539393434613261616666363530663962346262613064626335336463383830666462623639656134353139303564323830323230326638653239633034613736643237616632656237633534383438356266336634363934633930633431383130383838383433373932383438383335663738313637303764336538643736663465363766353738306263663038383133633535656336333961396264363234313738663565623134376435303061663335316539656631623165333432343834636132363064623763636261653438366631336366323635623562316162363838303636303038303533623230633364656463653737316339613038613033323061613963653435316562396439383361376234396361613130393666386164633039383331386463333865306537636566306438653564353537613036373536383561316339653235366132626339646261333232623362623331373263663731343037376263333830663861306134333361386266613766626663353966366230393365633862663665393339376330396231386531383034306331623536363836343733376338666137653239373935663361343538386464613763326261623439353636356363346139623833366532656239306336326133666361663539316662356638313830346337363138306536323666613236343461376465333435313164366334363637643938393337653237373333663464316539313338383333353465353466643733353137323165373666376235366333343833333838663461366238376232386165626562303230333031303030312813320218163a603962343038383566313362366163316337353336393262613366313739303061333838333165363934613061663937343934623834333838323039636235656662646339386136646162623265316337313833393166633133356264616163330ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030396463643863306135336539306333353539353734663636323034313137643362353033653530613336643330393766616338343239653663656364333762623534303731383038663265653938323033356638353161306339626532313736333833613232653338633161626131363866333266393035373063623332333363666536323539383736363661663637623531346361656632316662386466366430666364333363663236303662393264646561353533366236303638643836373832653339626435633338343435393931643431396237643165633038353939343132633039343964316332343062333563313464633535323734646261373166666165393336313235613566383139663534313332653234333964346163353539373939366563653835653133646666333336316639313331663536636561633562396635353262343963663666396139616336653564636532646233363934363266393361663830653562353662366538626566613136326130363162346137363839326264633834363437333036633630303835386664643237303332373663326337303434303139386566643766653335343563663261623538306337346366643634343561616637626437663734356363323532656162643236356561626565383632343137313034653639343861353537353666646332323264663061313031353234646531633363303863636630343330313165633766653936346564643834353161313330313437633037333633613335663131666465656638663261326237363137353762343335386666383962373561343864363762646336303930363933653062623836373965636262393366666462336633656439366265633933656634363536653337313661623837636534366361386531323539633866656464653866326631656130663365623263343865393635353164653132333330333435373235663435656436396338353735623531363833616661343732363231383236646232326262326431633466316533363436346139303230333031303030312814320218173a60346630613033333466393737363738313632663830643936376637323139313431333630633062376637663033316233376336396536323137333933336564616434366263626139373636376565373262666435613933346261313532326330")));class ManagedNetwork{constructor(e){this._network=new Map,this._nodes=[],this._healthyNodes=[],this._createNetworkChannel=e,this._ledgerId=null,this._minBackoff=8e3,this._maxBackoff=1e3*60*60,this._maxNodeAttempts=-1,this._nodeMinReadmitPeriod=this._minBackoff,this._nodeMaxReadmitPeriod=this._maxBackoff,this._earliestReadmitTime=Date.now()+this._nodeMinReadmitPeriod}setNetworkName(e){return console.warn("Deprecated: Use `setLedgerId` instead"),this.setLedgerId(e)}get networkName(){return console.warn("Deprecated: Use `ledgerId` instead"),this.ledgerId!=null?this.ledgerId.toString():null}setLedgerId(e){return this._ledgerId=typeof e=="string"?LedgerId.fromString(e):e,this}get ledgerId(){return this._ledgerId!=null?this._ledgerId:null}_createNodeFromNetworkEntry(e){throw new Error("not implemented")}_getNodesToRemove(e){throw new Error("not implemented")}_removeDeadNodes(){if(this._maxNodeAttempts>0)for(let e=this._nodes.length-1;e>=0;e--)this._nodes[e]._badGrpcStatusCount<this._maxNodeAttempts||this._closeNode(e)}_readmitNodes(){const e=Date.now();if(this._earliestReadmitTime<=e){let t=Number.MAX_SAFE_INTEGER,o=!0;e:for(let c=0;c<this._nodes.length;c++){for(let l=0;l<this._healthyNodes.length;l++)if(o&&this._nodes[c]._readmitTime>e&&(t=Math.min(this._nodes[c]._readmitTime,t)),this._nodes[c]==this._healthyNodes[l])continue e;o=!1,this._nodes[c]._readmitTime<=e&&this._healthyNodes.push(this._nodes[c])}this._earliestReadmitTime=Math.min(Math.max(t,this._nodeMinReadmitPeriod),this._nodeMaxReadmitPeriod)}}_getNumberOfMostHealthyNodes(e){this._removeDeadNodes(),this._readmitNodes();const t=[];let o=this._healthyNodes;for(let c=0;c<e;c++){const l=Math.floor(Math.random()*o.length),h=o[l];t.push(h),o=o.filter(d=>d.getKey()!==h.getKey())}return t}_closeNode(e){const t=this._nodes[e];t.close(),this._removeNodeFromNetwork(t),this._nodes.splice(e,1)}_removeNodeFromNetwork(e){const t=this._network.get(e.getKey());for(let o=0;o<t.length;o++)if(t[o]===e){t.splice(o,1);break}t.length===0&&this._network.delete(e.getKey())}_setNetwork(e){const t=[],o=new Set,c=new Set,l=[],h=new Map;for(const d of this._getNodesToRemove(e))this._closeNode(d);for(const d of this._nodes)t.push(d),o.add(d.getKey()),c.add(d.address.toString());for(const[d,g]of e)o.has(g.toString())&&c.has(d)||t.push(this._createNodeFromNetworkEntry([d,g]));shuffle(t);for(const d of t){if(!d.isHealthy())continue;l.push(d);const g=h.has(d.getKey())?h.get(d.getKey()):[];g.push(d),h.set(d.getKey(),g)}return this._nodes=t,this._healthyNodes=l,this._network=h,this._ledgerId=null,this}get maxNodeAttempts(){return this._maxNodeAttempts}setMaxNodeAttempts(e){return this._maxNodeAttempts=e,this}get minBackoff(){return this._minBackoff}setMinBackoff(e){this._minBackoff=e;for(const t of this._nodes)t.setMinBackoff(e);return this}get maxBackoff(){return this._maxBackoff}setMaxBackoff(e){this._maxBackoff=e;for(const t of this._nodes)t.setMaxBackoff(e);return this}get nodeMinReadmitPeriod(){return this._nodeMinReadmitPeriod}setNodeMinReadmitPeriod(e){return this._nodeMinReadmitPeriod=e,this._earliestReadmitTime=Date.now()+this._nodeMinReadmitPeriod,this}get nodeMaxReadmitPeriod(){return this._nodeMaxReadmitPeriod}setNodeMaxReadmitPeriod(e){return this._nodeMaxReadmitPeriod=e,this}getNode(e){if(this._readmitNodes(),e!=null&&e!=null){const t=this._network.get(e.toString());if(t){const o=Math.floor(Math.random()*t.length);return t[o]}else{const o=Array.from(this._network.keys()),c=o[Math.floor(Math.random()*o.length)],l=this._network.get(c),h=Math.floor(Math.random()*l.length);return l[h]}}else{if(this._healthyNodes.length==0)throw new Error("failed to find a healthy working node");return this._healthyNodes[Math.floor(Math.random()*this._healthyNodes.length)]}}increaseBackoff(e){e.increaseBackoff();for(let t=0;t<this._healthyNodes.length;t++)this._healthyNodes[t]==e&&this._healthyNodes.splice(t,1)}decreaseBackoff(e){e.decreaseBackoff()}close(){for(const e of this._nodes)e.close();this._network.clear(),this._nodes=[]}}let Network$1=class extends ManagedNetwork{constructor(e){super(e),this._maxNodesPerTransaction=-1,this._addressBook=null,this._transportSecurity=!1}setNetwork(e){this._setNetwork(new Map(Object.entries(e).map(([t,o])=>[t,typeof o=="string"?AccountId.fromString(o):o])))}setNetworkFromAddressBook(e){const t={},o=this.isTransportSecurity()?50212:50211;for(const c of e.nodeAddresses)for(const l of c.addresses)l.port===o&&c.accountId!=null&&(t[l.toString()]=c.accountId);return this.setNetwork(t),this}get network(){var e={};for(const t of this._nodes)e[t.address.toString()]=t.accountId;return e}setNetworkName(e){switch(super.setLedgerId(e),e){case"mainnet":this._addressBook=MAINNET_ADDRESS_BOOK;break;case"testnet":this._addressBook=TESTNET_ADDRESS_BOOK;break;case"previewnet":this._addressBook=PREVIEWNET_ADDRESS_BOOK;break}if(this._addressBook!=null)for(const t of this._nodes)for(const o of this._addressBook.nodeAddresses)o.accountId!=null&&o.accountId.toString()===t.accountId.toString()&&t.setNodeAddress(o);return this}get networkName(){return this._ledgerId!=null?this._ledgerId.toString():null}_createNodeFromNetworkEntry(e){const t=typeof e[1]=="string"?AccountId.fromString(e[1]):e[1];return new Node({newNode:{address:e[0],accountId:t,channelInitFunction:this._createNetworkChannel}}).setMinBackoff(this._minBackoff)}_getNodesToRemove(e){const t=[];for(let o=this._nodes.length-1;o>=0;o--){const c=this._nodes[o],l=e.get(c.address.toString());(l==null||l.toString()!==c.accountId.toString())&&t.push(o)}return t}_checkNetworkContainsEntry(e){for(const t of this._nodes)if(t.address.toString()===e[0])return!0;return!1}get maxNodesPerTransaction(){return this._maxNodesPerTransaction}setMaxNodesPerTransaction(e){return this._maxNodesPerTransaction=e,this}get maxNodeAttempts(){return this._maxNodeAttempts}setMaxNodeAttempts(e){return this._maxNodeAttempts=e,this}isTransportSecurity(){return this._transportSecurity}setTransportSecurity(e){if(this._transportSecurity==e)return this;this._network.clear();for(let t=0;t<this._nodes.length;t++){let o=this._nodes[t];o.close(),o=e?o.toSecure().setCert(this._ledgerId!=null?this._ledgerId.toString():""):o.toInsecure(),this._nodes[t]=o;const c=this._network.get(o.getKey())!=null?this._network.get(o.getKey()):[];c.push(o),this._network.set(o.getKey(),c)}return this._healthyNodes=[...this._nodes],this._transportSecurity=e,this}getNumberOfNodesForTransaction(){return this._maxNodesPerTransaction>0?this._maxNodesPerTransaction:this._nodes.length<=9?this._nodes.length:Math.floor((this._nodes.length+3-1)/3)}getNodeAccountIdsForExecute(){return this._getNumberOfMostHealthyNodes(this.getNumberOfNodesForTransaction()).map(e=>e.accountId)}};class MirrorNode extends ManagedNode{constructor(e={}){super(e)}getKey(){return this._address.toString()}}class MirrorNetwork extends ManagedNetwork{constructor(e){super(e)}setNetwork(e){this._setNetwork(new Map(e.map(t=>[t,t])))}get network(){var e=[];for(const t of this._nodes)e.push(t.address.toString());return e}_createNodeFromNetworkEntry(e){return new MirrorNode({newNode:{address:e[1],channelInitFunction:this._createNetworkChannel}}).setMinBackoff(this._minBackoff)}_getNodesToRemove(e){const t=[],o=Object.values(e);for(let c=this._nodes.length-1;c>=0;c--){const l=this._nodes[c];o.includes(l.address.toString())||t.push(c)}return t}getNextMirrorNode(){if(this._createNetworkChannel==null)throw new Error("mirror network not supported on browser");return this._getNumberOfMostHealthyNodes(1)[0]}}class Client{constructor(e){this._mirrorNetwork=new MirrorNetwork(this._createMirrorNetworkChannel()),this._network=new Network$1(this._createNetworkChannel()),this._operator=null,this._defaultMaxTransactionFee=null,this._maxQueryPayment=new Hbar(1),e!=null&&e.operator!=null&&this.setOperator(e.operator.accountId,e.operator.privateKey),this._maxAttempts=null,this._signOnDemand=!1,this._autoValidateChecksums=!1,this._minBackoff=250,this._maxBackoff=8e3,this._defaultRegenerateTransactionId=!0,this._requestTimeout=null,this._networkUpdatePeriod=24*60*60*1e3,this._isShutdown=!1,e!=null&&e.scheduleNetworkUpdate!==!1&&(this._initialNetworkUpdate(),this._scheduleNetworkUpdate()),this._timer,this._logger=null}setNetworkName(e){return console.warn("Deprecated: Use `setLedgerId` instead"),this.setLedgerId(e)}get networkName(){return console.warn("Deprecated: Use `ledgerId` instead"),this.ledgerId!=null?this.ledgerId.toString():null}setLedgerId(e){return this._network.setLedgerId(typeof e=="string"?LedgerId.fromString(e):e),this}get ledgerId(){return this._network._ledgerId!=null?this._network.ledgerId:null}setNetwork(e){throw new Error("not implemented")}setNetworkFromAddressBook(e){return this._network.setNetworkFromAddressBook(e),this}get network(){return this._network.network}setMirrorNetwork(e){throw new Error("not implemented")}get mirrorNetwork(){return this._mirrorNetwork.network}get signOnDemand(){return this._signOnDemand}setSignOnDemand(e){this._signOnDemand=e}isTransportSecurity(){return this._network.isTransportSecurity()}setTransportSecurity(e){return this._network.setTransportSecurity(e),this}setOperator(e,t){const o=typeof t=="string"?PrivateKey.fromString(t):t;return this.setOperatorWith(e,o.publicKey,c=>Promise.resolve(o.sign(c)))}setOperatorWith(e,t,o){const c=e instanceof AccountId?e:AccountId.fromString(e);return this._network._ledgerId!=null&&c.validateChecksum(this),this._operator={transactionSigner:o,accountId:c,publicKey:t instanceof PublicKey?t:PublicKey.fromString(t)},this}setAutoValidateChecksums(e){return this._autoValidateChecksums=e,this}isAutoValidateChecksumsEnabled(){return this._autoValidateChecksums}get operatorAccountId(){return this._operator!=null?this._operator.accountId:null}get operatorPublicKey(){return this._operator!=null?this._operator.publicKey:null}get maxTransactionFee(){return this._defaultMaxTransactionFee}setMaxTransactionFee(e){return this._defaultMaxTransactionFee=e,this}get defaultMaxTransactionFee(){return this._defaultMaxTransactionFee}setDefaultMaxTransactionFee(e){return this._defaultMaxTransactionFee=e,this}get defaultRegenerateTransactionId(){return this._defaultRegenerateTransactionId}setDefaultRegenerateTransactionId(e){return this._defaultRegenerateTransactionId=e,this}get maxQueryPayment(){return this._maxQueryPayment}setMaxQueryPayment(e){return this._maxQueryPayment=e,this}get maxAttempts(){return this._maxAttempts!=null?this._maxAttempts:10}setMaxAttempts(e){return this._maxAttempts=e,this}get maxNodeAttempts(){return this._network.maxNodeAttempts}setMaxNodeAttempts(e){return this._network.setMaxNodeAttempts(e),this}get nodeWaitTime(){return this._network.minBackoff}setNodeWaitTime(e){return this._network.setMinBackoff(e),this}get maxNodesPerTransaction(){return this._network.maxNodesPerTransaction}setMaxNodesPerTransaction(e){return this._network.setMaxNodesPerTransaction(e),this}setMinBackoff(e){if(e==null)throw new Error("minBackoff cannot be null.");if(e>this._maxBackoff)throw new Error("minBackoff cannot be larger than maxBackoff.");return this._minBackoff=e,this}get minBackoff(){return this._minBackoff}setMaxBackoff(e){if(e==null)throw new Error("maxBackoff cannot be null.");if(e<this._minBackoff)throw new Error("maxBackoff cannot be smaller than minBackoff.");return this._maxBackoff=e,this}get maxBackoff(){return this._maxBackoff}setNodeMinBackoff(e){return this._network.setMinBackoff(e),this}get nodeMinBackoff(){return this._network.minBackoff}setNodeMaxBackoff(e){return this._network.setMaxBackoff(e),this}get nodeMaxBackoff(){return this._network.maxBackoff}setNodeMinReadmitPeriod(e){return this._network.setNodeMinReadmitPeriod(e),this}get nodeMinReadmitPeriod(){return this._network.nodeMinReadmitPeriod}setNodeMaxReadmitPeriod(e){return this._network.setNodeMaxReadmitPeriod(e),this}get nodeMaxReadmitPeriod(){return this._network.nodeMaxReadmitPeriod}setRequestTimeout(e){return this._requestTimeout=e,this}get requestTimeout(){return this._requestTimeout}get networkUpdatePeriod(){return this._networkUpdatePeriod}setNetworkUpdatePeriod(e){return clearTimeout(this._timer),this._networkUpdatePeriod=e,this._scheduleNetworkUpdate(),this}setLogger(e){return this._logger=e,this}get logger(){return this._logger}async ping(e){await new AccountBalanceQuery({accountId:e}).setNodeAccountIds([e instanceof AccountId?e:AccountId.fromString(e)]).execute(this)}async pingAll(){for(const e of Object.values(this._network.network))await this.ping(e)}close(){this._network.close(),this._mirrorNetwork.close(),this._isShutdown=!0,clearTimeout(this._timer)}_createNetworkChannel(){throw new Error("not implemented")}_createMirrorNetworkChannel(){throw new Error("not implemented")}_scheduleNetworkUpdate(){this._timer=setTimeout(async()=>{try{const e=await CACHE$1.addressBookQueryConstructor().setFileId(FileId.ADDRESS_BOOK).execute(this);this.setNetworkFromAddressBook(e),this._isShutdown||this._scheduleNetworkUpdate()}catch(e){this._logger&&this._logger.trace(`failed to update client address book: ${e.toString()}`)}},this._networkUpdatePeriod)}_initialNetworkUpdate(){setTimeout(async()=>{try{const e=await CACHE$1.addressBookQueryConstructor().setFileId(FileId.ADDRESS_BOOK).execute(this);this.setNetworkFromAddressBook(e)}catch(e){this._logger&&this._logger.trace(`failed to update client address book: ${e.toString()}`)}},1e3)}get isClientShutDown(){return this._isShutdown}}const{proto}=HashgraphProto;class Channel{constructor(){this._crypto=null,this._smartContract=null,this._file=null,this._consensus=null,this._freeze=null,this._network=null,this._token=null,this._schedule=null,this._util=null}close(){throw new Error("not implemented")}get crypto(){return this._crypto!=null?this._crypto:(this._crypto=proto.CryptoService.create(this._createUnaryClient("CryptoService")),this._crypto)}get smartContract(){return this._smartContract!=null?this._smartContract:(this._smartContract=proto.SmartContractService.create(this._createUnaryClient("SmartContractService")),this._smartContract)}get file(){return this._file!=null?this._file:(this._file=proto.FileService.create(this._createUnaryClient("FileService")),this._file)}get consensus(){return this._consensus!=null?this._consensus:(this._consensus=proto.ConsensusService.create(this._createUnaryClient("ConsensusService")),this._consensus)}get freeze(){return this._freeze!=null?this._freeze:(this._freeze=proto.FreezeService.create(this._createUnaryClient("FreezeService")),this._freeze)}get network(){return this._network!=null?this._network:(this._network=proto.NetworkService.create(this._createUnaryClient("NetworkService")),this._network)}get token(){return this._token!=null?this._token:(this._token=proto.TokenService.create(this._createUnaryClient("TokenService")),this._token)}get schedule(){return this._schedule!=null?this._schedule:(this._schedule=proto.ScheduleService.create(this._createUnaryClient("ScheduleService")),this._schedule)}get util(){return this._util!=null?this._util:(this._util=proto.UtilService.create(this._createUnaryClient("UtilService")),this._util)}_createUnaryClient(e){throw new Error("not implemented")}}function encodeRequest(n){const e=new ArrayBuffer(n.byteLength+5);return new DataView(e,1,4).setUint32(0,n.length),new Uint8Array(e,5).set(n),e}function decodeUnaryResponse(n,e=0,t=n.byteLength){const o=new DataView(n,e,t);let c=0,l=null,h=0;for(;c<o.byteLength;){const g=o.getUint8(c+0)>>7,m=o.getUint32(c+1),v=c+5;if(v+m>o.byteLength)throw new Error("(BUG) unexpected frame length past the boundary");const _=new Uint8Array(n,o.byteOffset+v,m);if(g===0){if(l!=null)throw new Error("(BUG) unexpectedly received more than one data frame");l=_}else if(g===1){const p=decode(_),[a,u]=p.split(":");if(a==="grpc-status")h=parseInt(u);else throw new Error(`(BUG) unhandled trailer, ${p}`)}else throw new Error(`(BUG) unexpected frame type: ${g}`);c+=m+5}if(h!==0)throw new Error(`(BUG) unhandled grpc-status: ${h}`);if(l==null)throw new Error("(BUG) unexpectedly received no response");return l}class WebChannel extends Channel{constructor(e){super(),this._address=e}close(){}_createUnaryClient(e){return async(t,o,c)=>{try{const l=await fetch(`${this._address}/proto.${e}/${t.name}`,{method:"POST",headers:{"content-type":"application/grpc-web+proto","x-user-agent":"hedera-sdk-js/v2","x-grpc-web":"1"},body:encodeRequest(o)});if(!l.ok){const v=new HttpError(HttpStatus._fromValue(l.status));c(v,null)}const h=l.headers.get("grpc-status"),d=l.headers.get("grpc-message");if(h!=null&&d!=null){const v=new GrpcServiceError(GrpcStatus._fromValue(parseInt(h)));v.message=d,c(v,null)}const g=await l.arrayBuffer(),m=decodeUnaryResponse(g);c(null,m)}catch{const h=new GrpcServiceError(GrpcStatus._fromValue(18));c(h,null)}}}}const MAINNET={"https://grpc-web.myhbarwallet.com:443":new AccountId(3),"https://node01-00-grpc.swirlds.com:443":new AccountId(4),"https://node02.swirldslabs.com:443":new AccountId(5),"https://node03.swirldslabs.com:443":new AccountId(6),"https://node04.swirldslabs.com:443":new AccountId(7),"https://node05.swirldslabs.com:443":new AccountId(8),"https://node06.swirldslabs.com:443":new AccountId(9),"https://node07.swirldslabs.com:443":new AccountId(10),"https://node08.swirldslabs.com:443":new AccountId(11),"https://node09.swirldslabs.com:443":new AccountId(12),"https://node10.swirldslabs.com:443":new AccountId(13),"https://node11.swirldslabs.com:443":new AccountId(14),"https://node12.swirldslabs.com:443":new AccountId(15),"https://node13.swirldslabs.com:443":new AccountId(16),"https://node14.swirldslabs.com:443":new AccountId(17),"https://node15.swirldslabs.com:443":new AccountId(18),"https://node16.swirldslabs.com:443":new AccountId(19),"https://node17.swirldslabs.com:443":new AccountId(20),"https://node18.swirldslabs.com:443":new AccountId(21),"https://node19.swirldslabs.com:443":new AccountId(22),"https://node20.swirldslabs.com:443":new AccountId(23),"https://node21.swirldslabs.com:443":new AccountId(24),"https://node22.swirldslabs.com:443":new AccountId(25),"https://node23.swirldslabs.com:443":new AccountId(26),"https://node24.swirldslabs.com:443":new AccountId(27),"https://node25.swirldslabs.com:443":new AccountId(28),"https://node26.swirldslabs.com:443":new AccountId(29)},WEB_TESTNET={"https://testnet-node00-00-grpc.hedera.com:443":new AccountId(3),"https://testnet-node01-00-grpc.hedera.com:443":new AccountId(4),"https://testnet-node02-00-grpc.hedera.com:443":new AccountId(5),"https://testnet-node03-00-grpc.hedera.com:443":new AccountId(6),"https://testnet-node04-00-grpc.hedera.com:443":new AccountId(7),"https://testnet-node05-00-grpc.hedera.com:443":new AccountId(8),"https://testnet-node06-00-grpc.hedera.com:443":new AccountId(9)},WEB_PREVIEWNET={"https://previewnet-node00-00-grpc.hedera.com:443":new AccountId(3),"https://previewnet-node01-00-grpc.hedera.com:443":new AccountId(4),"https://previewnet-node02-00-grpc.hedera.com:443":new AccountId(5),"https://previewnet-node03-00-grpc.hedera.com:443":new AccountId(6),"https://previewnet-node04-00-grpc.hedera.com:443":new AccountId(7),"https://previewnet-node05-00-grpc.hedera.com:443":new AccountId(8),"https://previewnet-node06-00-grpc.hedera.com:443":new AccountId(9)};new AccountId(3);new AccountId(3);const Network={fromName(n){switch(n){case"mainnet":return Network.MAINNET;case"testnet":return Network.TESTNET;case"previewnet":return Network.PREVIEWNET;default:throw new Error(`unknown network name: ${n}`)}},MAINNET,TESTNET:WEB_TESTNET,PREVIEWNET:WEB_PREVIEWNET};class WebClient extends Client{constructor(e){if(super(e),e!=null)if(typeof e.network=="string")switch(e.network){case"mainnet":this.setNetwork(Network.MAINNET),this.setLedgerId(LedgerId.MAINNET);break;case"testnet":this.setNetwork(Network.TESTNET),this.setLedgerId(LedgerId.TESTNET);break;case"previewnet":this.setNetwork(Network.PREVIEWNET),this.setLedgerId(LedgerId.PREVIEWNET);break;default:throw new Error(`unknown network: ${e.network}`)}else e.network!=null&&this.setNetwork(e.network)}static fromConfig(e){return new WebClient(typeof e=="string"?JSON.parse(e):e)}static forNetwork(e){return new WebClient({network:e,scheduleNetworkUpdate:!1})}static forName(e){return new WebClient({network:e,scheduleNetworkUpdate:!1})}static forMainnet(){return new WebClient({network:"mainnet",scheduleNetworkUpdate:!1})}static forTestnet(){return new WebClient({network:"testnet",scheduleNetworkUpdate:!1})}static forPreviewnet(){return new WebClient({network:"previewnet",scheduleNetworkUpdate:!1})}setNetwork(e){if(typeof e=="string")switch(e){case"previewnet":this._network.setNetwork(Network.PREVIEWNET);break;case"testnet":this._network.setNetwork(Network.TESTNET);break;case"mainnet":this._network.setNetwork(Network.MAINNET)}else this._network.setNetwork(e)}setMirrorNetwork(e){return typeof e=="string"?this._mirrorNetwork.setNetwork([]):this._mirrorNetwork.setNetwork(e),this}_createNetworkChannel(){return e=>new WebChannel(e)}_createMirrorNetworkChannel(){return()=>{throw new Error("mirror support is not supported in browsers")}}}const contractAddress="0x7c2d149301d2f50a7f684e4726a6db2d2f33f433";let ethPrivateKey,wl,hederaPrivateKey,hederaClient;(async function(){const n=(await setupLibp2p()).libp2p;window.peerIdSpan.innerHTML=n.peerId.toString();const e=localStorage.getItem("ethPrivateKey");e!=null&&(ethPrivateKey=e,window.privateKeyInput.value=ethPrivateKey),window.privateKeyBtn.onclick=async()=>{window.privateKeyInput.value==""?alert("can't use that key"):ethPrivateKey=window.privateKeyInput.value;const g=new JsonRpcProvider({url:"https://testnet.hashio.io/api",headers:{"Access-Control-Allow-Origin":"*"}});wl=new Wallet(ethPrivateKey,g),hederaPrivateKey=PrivateKey.fromStringECDSA(ethPrivateKey),localStorage.setItem("ethPrivateKey",ethPrivateKey);const m=await axios$1.get(`https://testnet.mirrornode.hedera.com/api/v1/accounts/${wl.address}`);window.accNoSpan.innerHTML=m.data.account,window.accNoSpan.href=`https://hashscan.io/testnet/account/${m.data.account}`;const v=m.data.evm_address;window.ethPkSpan.innerHTML=v.slice(0,6)+"..."+v.slice(-4),setInterval(function(){g.getBalance(wl.address).then(_=>{window.balanceSpan.innerHTML=(Number(_.toBigInt()/BigInt(1e12))/1e6).toString()})},1e4),hederaClient=WebClient.forTestnet(),hederaClient.setOperator(m.data.account,hederaPrivateKey),window.enterPrivateKeyDiv.style.visibility="hidden",window.enterRendezvousDiv.style.visibility="visible"},window.goAliveBtn.onclick=async()=>{window.enterRendezvousDiv.style.visibility="hidden",window.connectToPeerDiv.style.visibility="visible";const m=new URLSearchParams(window.location.search).get("d");m!=null&&(window.peerInput.value=m);const v=async a=>{const y=await(await new TopicCreateTransaction().setTopicMemo(a).setTransactionMemo(a).execute(hederaClient)).getReceipt(hederaClient);return y.topicId==null?"":y.topicId.num.toString()},_=await v("alive");window.aliveTopicSpan.innerHTML=_,window.aliveTopicSpan.href=`https://hashscan.io/testnet/topic/0.0.${_}`;const p=await v("in-Voice");window.inVoiceTopicSpan.innerHTML=p,window.inVoiceTopicSpan.href=`https://hashscan.io/testnet/topic/0.0.${p}`,navigator.geolocation&&navigator.geolocation.getCurrentPosition(a=>{console.log(a);const u=randomLocation.randomCirclePoint(a.coords,1e3);setInterval(function(){new TopicMessageSubmitTransaction().setTopicId(_).setMessage(`{"location":{"lat":${u.latitude},"lon":${u.longitude},"alt":0},"own":""}`).execute(hederaClient)},8e3)}),await tellHederaAboutAvailability(contractAddress,wl,_,p,n.peerId.toString())};let t,o,c,l;function h(){t=null,o=null,c=null,l=null}window.peerInput.onchange=()=>h(),window.connectBtn.onclick=async()=>{try{if(t==null&&(t=await getPhoneNumber(window.peerInput.value,contractAddress,wl)),t==null){alert("address not providing service");return}o==null&&(o=await axios$1.get(`https://testnet.mirrornode.hedera.com/api/v1/topics/${t.aliveTopic}/messages?limit=3&order=desc`));const g=JSON.parse(atob(o?.data.messages[0].message)).own,m=CryptoJS.enc.Hex.parse(g.substr(0,32)),v=CryptoJS.enc.Hex.parse(g.substr(32)),_=CryptoJS.enc.Utf8.parse("passphrasewhichneedstobe32bytes!"),a=CryptoJS.AES.decrypt({ciphertext:v},_,{mode:CryptoJS.mode.CBC,iv:m}).toString(CryptoJS.enc.Utf8).replaceAll(/\[|\]/g,"").split(" ").filter(b=>b.includes("webtransport"))[0]+"/p2p/"+t.peerId,u=multiaddr(a);console.log("The multiaddress is"+u),c==null&&(c=await n.dial(u)),l=await c.newStream(["/nrn-protocol-id/1.0.0"]);const y=performance.now();pipe([fromString$2(`hey
`)],l,async function(b){for await(const w of b){const T=performance.now();d((T-y).toFixed(2))}}),n.services.pubsub.subscribe("topic")}catch(g){alert("The connection is struggling - hold your horses "+g),h()}},navigator.geolocation&&navigator.geolocation.getCurrentPosition(g=>{console.log(g);let m=randomLocation.randomCirclePoint(g.coords,1e3);console.log(m)});function d(g){window.connlistWrapperEl.hidden=!1;const m=document.createElement("tr");m.innerHTML=`<td>High Five Back!</td><td>${g}</td>`,window.connlistEl.appendChild(m),window.connectBtn.disabled=!0,setTimeout(function(){window.connectBtn.disabled=!1},5e3)}})();
